(()=>{var __webpack_modules__={"./Areas/VAS/Scripts/app/forms/InvoiceLineTabPanel.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to view the Invoice Report\r\n * chronological  : Development\r\n * Created Date   : 26 August 2024\r\n * Created by     : VIS-383\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.InvoiceLineTabPanel = function () {\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    // var $bsyDiv = null;\n    var ctx = this.ctx;\n    $self = this;\n    var windowID = 0;\n    var $iFrameDiv = null;\n    var $root = $(\'<div class = "root h-100" style="position:relative;"></div>\');\n    var wrapperDiv = $("<div class =\'vas-apInvWrapper h-100\'></div>");\n    var $bsyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n    this.init = function () {\n      //windowNo = this.windowNo;\n      InvoiceLinePanel($self.windowNo);\n      $root.append(wrapperDiv).append($bsyDiv);\n    };\n    /*Function defined to append design*/\n    function InvoiceLinePanel(windowNo) {\n      wrapperDiv.append(\'<div class="vas-apInvListGroup h-100">\' + \'<div id="VAS-InvDetail_\' + windowNo + \'" class= "VAS-InvDetail mb-2 h-100">\' + \'</div>\' + \'</div>\');\n      $iFrameDiv = $(\'<iframe id="iframeinv\' + windowNo + \'" src="" width="100%" height="100%" frameborder="0" scrolling="no">\');\n      wrapperDiv.find(\'#VAS-InvDetail_\' + windowNo).append($iFrameDiv);\n    }\n    ;\n\n    /*VIS-383: 27/07/24:-This function is used to get invoice data for pdf*/\n    this.getInvoiceLineData = function (invoiceId) {\n      busyDiv(true);\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS/PoReceipt/GetInvoiceLineReport",\n        type: "GET",\n        dataType: "json",\n        contentType: "application/json; charset=utf-8",\n        data: {\n          InvoiceId: invoiceId,\n          AD_WindowID: windowID\n        },\n        success: function (data) {\n          //var urlPath = null;\n          /*Clear iFrame when select new invoice*/\n          document.getElementById(\'iframeinv\' + $self.windowNo).src = \'\';\n          if (data != "") {\n            var data = JSON.parse(data);\n            console.log(data);\n            if (data != "" && data.length > 0) {\n              var urlPath = VIS.Application.contextFullUrl + "" + data;\n              /*Create iFrame to view invoice report using report path*/\n              document.getElementById(\'iframeinv\' + $self.windowNo).src = urlPath;\n              busyDiv(false);\n            }\n          }\n          busyDiv(false);\n        },\n        error: function (eror) {\n          console.log(eror);\n          busyDiv(false);\n        }\n      });\n    };\n    function busyDiv(Value) {\n      if (Value) {\n        $bsyDiv[0].style.visibility = \'visible\';\n      } else {\n        $bsyDiv[0].style.visibility = \'hidden\';\n      }\n    }\n    ;\n    /*Retrun container of panel\'s Design*/\n    this.getRoot = function () {\n      return $root;\n    };\n    /*Invoked when user click on panel icon*/\n    VAS.InvoiceLineTabPanel.prototype.startPanel = function (windowNo, curTab) {\n      this.windowNo = windowNo;\n      this.curTab = curTab;\n      $self.windowNo = windowNo;\n      windowID = this.curTab.getAD_Window_ID();\n      this.init();\n    };\n    /* This function will execute when user navigate or refresh a record */\n    VAS.InvoiceLineTabPanel.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      var invoiceId = selectedRow.c_invoice_id;\n      this.getInvoiceLineData(invoiceId);\n    };\n    /* Set width as per window width in dafault case it is 75% */\n    VAS.InvoiceLineTabPanel.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n    /* Disposing all variables from memory */\n    VAS.InvoiceLineTabPanel.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.panelWidth = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/InvoiceLineTabPanel.js?\n}')},"./Areas/VAS/Scripts/app/forms/InvoiceTaxTabPanel.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get Invoice Tax Data\r\n * chronological  : Development\r\n * Created Date   : 16 January 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.InvoiceTaxTabPanel = function () {\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var lblTitle = null;\n    var ctx = this.ctx;\n    var $self = this;\n    var elements = [\"VAS_InvoiceTaxTitleTabPanel\", \"VAS_InvoiceTax\", \"VAS_InvoiceTaxPaybaleAmt\", \"VAS_InvoiceTaxAmt\", \"VAS_IsIncludeTax\"];\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    var $root = $('<div class = \"root\"></div>');\n    var wrapperDiv = $(\"<div class ='vas-apTaxWrapper'></div>\");\n    lblTitle = $(\"<h6 class='vas-apTax-ttl'>\" + VAS.translatedTexts.VAS_InvoiceTaxTitleTabPanel + \"</h6>\");\n    this.init = function () {\n      wrapperDiv.append(lblTitle);\n      InvoiceTaxPanel();\n      $root.append(wrapperDiv);\n    };\n    //Function defined to append design\n    function InvoiceTaxPanel() {\n      wrapperDiv.append('<div class=\"vas-aptaxListGroup\">' + '<div id=\"VAS-TaxDetail_' + $self.windowNo + '\" class= \"VAS-TaxDetail mb-2\" > ' + '</div>' + '</div>');\n    }\n    ;\n    /*This function is used to get invoice tax data*/\n    this.getInvoiceTaxData = function (recordID) {\n      $.ajax({\n        url: VIS.Application.contextUrl + \"VAS/PoReceipt/GetTaxData\",\n        type: \"GET\",\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        data: {\n          InvoiceId: recordID\n        },\n        success: function (data) {\n          wrapperDiv.find('#VAS-TaxDetail_' + $self.windowNo).empty();\n          if (JSON.parse(data) != \"\") {\n            data = JSON.parse(data);\n            console.log(data);\n            if (data != null && data.length > 0) {\n              for (i = 0; i < data.length; i++) {\n                var TabPaneldesign = '<div class=\"vas-apListItem mb-2\">' + '<div class=\"vas-ap-sglItem mb-2\">' + '<div class=\"vas-singleTaxElement vas-setTaxWidth\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_InvoiceTax + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].TaxName + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxPaybleAmtWidth\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_InvoiceTaxPaybaleAmt + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].TaxPaybleAmt.toLocaleString(window.navigator.language, {\n                  minimumFractionDigits: data[i].stdPrecision,\n                  maximumFractionDigits: data[i].stdPrecision\n                }) + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxAmtWidth\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_InvoiceTaxAmt + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].TaxAmt.toLocaleString(window.navigator.language, {\n                  minimumFractionDigits: data[i].stdPrecision,\n                  maximumFractionDigits: data[i].stdPrecision\n                }) + '</span>' + '</div>' + '</div >' + '<div class=\"vas-apItem-checkbox d-flex align-items-center\">' + '<input type=\"checkbox\" id=\"vas-includeTaxCheckbox\" ' + (data[i].IsTaxIncluded == \"Y\" ? 'checked' : '') + '>' + '<label class=\"vas-apcheckbox-label ml-1\" for=\"vas-includeTaxCheckbox\">' + VAS.translatedTexts.VAS_IsIncludeTax + '</label>' + '</div>' + '</div>';\n                //Appending design to wrapperDiv\n                wrapperDiv.find('#VAS-TaxDetail_' + $self.windowNo).append(TabPaneldesign);\n              }\n            }\n          }\n        },\n        error: function (eror) {\n          console.log(eror);\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.InvoiceTaxTabPanel.prototype.startPanel = function (windowNo, curTab) {\n      this.windowNo = windowNo;\n      this.curTab = curTab;\n      $self.windowNo = windowNo;\n      this.init();\n    };\n    /* This function to update tab panel based on selected record */\n    VAS.InvoiceTaxTabPanel.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getInvoiceTaxData(recordID);\n    };\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.InvoiceTaxTabPanel.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n    /* Disposing all variables from memory */\n    VAS.InvoiceTaxTabPanel.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n      lblTitle = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/InvoiceTaxTabPanel.js?\n}")},"./Areas/VAS/Scripts/app/forms/LineHistoryTabPanel.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get Line History  Data\r\n * chronological  : Development\r\n * Created Date   : 20 Feb 2024\r\n * Created by     : VAI051\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.LineHistoryTabPanel = function () {\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var lblTitle = null;\n    var ctx = this.ctx;\n    var self = this;\n    var elements = [\"VAS_HistoryTitleTabPanel\", \"VAS_LineHistory\", \"VAS_LineNo\", \"VAS_DateOrdered\", \"VAS_DatePromised\", \"VAS_Product\", \"VAS_Charge\", \"VAS_Quantity\", \"VAS_UOM\", \"VAS_QuantityOrdered\", \"VAS_Price\", \"VAS_ListPrice\", \"VAS_UnitPrice\", \"VAS_Tax\", \"VAS_Discount\", \"VAS_LineAmount\", \"VAS_Description\"];\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    var $root = $('<div class = \"root\"></div>');\n    var wrapperDiv = $(\"<div class ='vas-apTaxWrapper'></div>\");\n    lblTitle = $(\"<h6 class='vas-apTax-ttl'>\" + VAS.translatedTexts.VAS_LineHistory + \"</h6>\");\n    this.init = function () {\n      wrapperDiv.append(lblTitle);\n      LineHistoryPanel();\n      $root.append(wrapperDiv);\n    };\n\n    //Function defined to append design\n    function LineHistoryPanel() {\n      wrapperDiv.append('<div class=\"vas-aptaxListGroup\">' + '<div id= \"VAS-TaxDetail_' + self.windowNo + '\" class= \"VAS-TaxDetail mb-2\" > ' + '</div>' + '</div>');\n    }\n    ;\n\n    /*This function is used to get Line History  data*/\n    this.getLineHistoryPanel = function (recordID) {\n      $.ajax({\n        url: VIS.Application.contextUrl + \"VAS/PoReceipt/GetLineHistoryData\",\n        type: \"GET\",\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        data: {\n          OrderLineID: recordID\n        },\n        complete: function () {\n          if ($root.closest('.vis-ad-w-p-actionpanel-b').length > 0) {\n            $root.closest('.vis-ad-w-p-ap-tp-outerwrap').css('height', '100%');\n          }\n        },\n        success: function (data) {\n          wrapperDiv.find('#VAS-TaxDetail_' + self.windowNo).empty();\n          data = JSON.parse(data);\n          if (data != null && data.length > 0) {\n            for (i = 0; i < data.length; i++) {\n              var TabPaneldesign = '<div class=\"vas-apListItem mb-2\">' + '<div class=\"vas-ap-sgl1Item1_First mb-2\">' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_LineNo + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].LineNo + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_DateOrdered + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + new Date(data[i].DateOrdered).toLocaleDateString() + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_DatePromised + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + new Date(data[i].DatePromised).toLocaleDateString() + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_Product + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].Product + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_Charge + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].Charge + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_Quantity + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].Quantity + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_UOM + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].UOM + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_QuantityOrdered + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].QuantityOrdered + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_Price + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].Price.toLocaleString(window.navigator.language, {\n                minimumFractionDigits: data[i].stdPrecision,\n                maximumFractionDigits: data[i].stdPrecision\n              }) + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_ListPrice + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].ListPrice.toLocaleString(window.navigator.language, {\n                minimumFractionDigits: data[i].stdPrecision,\n                maximumFractionDigits: data[i].stdPrecision\n              }) + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_UnitPrice + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].UnitPrice.toLocaleString(window.navigator.language, {\n                minimumFractionDigits: data[i].stdPrecision,\n                maximumFractionDigits: data[i].stdPrecision\n              }) + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_Tax + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].Tax + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_Discount + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].Discount.toLocaleString(window.navigator.language, {\n                minimumFractionDigits: data[i].stdPrecision,\n                maximumFractionDigits: data[i].stdPrecision\n              }) + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_LineAmount + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].LineAmount.toLocaleString(window.navigator.language, {\n                minimumFractionDigits: data[i].stdPrecision,\n                maximumFractionDigits: data[i].stdPrecision\n              }) + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement \">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_Description + '</span>' + '<span class=\"vas-singleTaxElementValue1_first\">' + data[i].Description + '</span>' + '</div>' + '</div>';\n              '</div>';\n              //Appending design to wrapperDiv\n              wrapperDiv.find('#VAS-TaxDetail_' + self.windowNo).append(TabPaneldesign);\n            }\n          }\n        },\n        error: function (eror) {\n          console.log(eror);\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.LineHistoryTabPanel.prototype.startPanel = function (windowNo, curTab) {\n      self.windowNo = windowNo;\n      self.curTab = curTab;\n      self.init();\n    };\n\n    /* This function to update tab panel based on selected record */\n    VAS.LineHistoryTabPanel.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getLineHistoryPanel(recordID);\n    };\n\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.LineHistoryTabPanel.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n\n    /* Disposing all variables from memory */\n    VAS.LineHistoryTabPanel.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n      lblTitle = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/LineHistoryTabPanel.js?\n}")},"./Areas/VAS/Scripts/app/forms/MatchPOTabPanel.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get Match PO Data of Purchase order Window\r\n * chronological  : Development\r\n * Created Date   : 20 February 2024\r\n * Created by     : VIS430\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.MatchPOTabPanel = function () {\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var lblTitle = null;\n    var ctx = this.ctx;\n    var elements = [\"VAS_MatchPoTabPanel\", \"VAS_TransactionDate\", \"VAS_PurchaseOrderNo\", \"VAS_OrderLine\", \"VAS_ShipmentLine\", \"VAS_InvoiceLineMatch\", \"VAS_Product\", \"VAS_AttributeSetInstance\", \"VAS_QuantityReq\"];\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    var $root = $('<div class = \"root\"></div>');\n    var wrapperDiv = $(\"<div class ='vas-apTaxWrapper'></div>\");\n    lblTitle = $(\"<h6 class='vas-apTax-ttl'>\" + VAS.translatedTexts.VAS_MatchPoTabPanel + \"</h6>\");\n    this.init = function () {\n      wrapperDiv.append(lblTitle);\n      MatchPoPanel();\n      $root.append(wrapperDiv);\n    };\n\n    //Function defined to append design\n    function MatchPoPanel() {\n      wrapperDiv.append('<div class=\"vas-aptaxListGroup\">' + '<div id=\"VAS-TaxDetail_' + this.windowNo + '\" class= \"VAS-TaxDetail mb-2\" > ' + '</div>' + '</div>');\n    }\n    ;\n\n    /*This function is used to get Match PO data*/\n    this.getMatchPoData = function (recordID) {\n      $.ajax({\n        url: VIS.Application.contextUrl + \"VAS/OrderLineTabPanel/GetMatchingData\",\n        type: \"GET\",\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        data: {\n          OrderLineId: recordID\n        },\n        success: function (data) {\n          wrapperDiv.find('#VAS-TaxDetail_' + self.windowNo).empty();\n          data = JSON.parse(data);\n          if (data != null && data.length > 0) {\n            for (i = 0; i < data.length; i++) {\n              //VIS430:Handled Duplication of data on Match PO Tab Panel                               \n              var TabPaneldesign = '<div class=\"vas-apListItem mb-2\">' + '<div class=\"vas-ap-sglItem mb-2\">' + '<div class=\"vas-singleTaxElement vas-setMatchPo\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_TransactionDate + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + new Date(data[i].TransactionDate).toLocaleDateString() + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setMatchPo\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_PurchaseOrderNo + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].MatchPoNo + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setMatchPo\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_OrderLine + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].PoDocumentNo + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setMatchPo\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_ShipmentLine + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].ShipmentLine + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setMatchPo\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_InvoiceLineMatch + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].InvoiceDocNo + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setShipWidth\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_Product + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].Product + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setShipWidth\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_AttributeSetInstance + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].AttributeSetInstance + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setMatchPo\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_QuantityReq + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].Quantity.toLocaleString() + '</span>' +\n              //VIS430:Handled Qty format on Match PO Tab Panel\n              '</div>' + '</div >' + '</div>';\n              //Appending design to wrapperDiv\n              wrapperDiv.find('#VAS-TaxDetail_' + this.windowNo).append(TabPaneldesign);\n            }\n          }\n        },\n        error: function (eror) {\n          console.log(eror);\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.MatchPOTabPanel.prototype.startPanel = function (windowNo, curTab) {\n      this.windowNo = windowNo;\n      this.curTab = curTab;\n      this.init();\n    };\n\n    /* This function to update tab panel based on selected record */\n    VAS.MatchPOTabPanel.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getMatchPoData(recordID);\n    };\n\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.MatchPOTabPanel.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n\n    /* Disposing all variables from memory */\n    VAS.MatchPOTabPanel.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n      lblTitle = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/MatchPOTabPanel.js?\n}")},"./Areas/VAS/Scripts/app/forms/PoReceiptTabPanel.js":()=>{eval('{/*******************************************************\r\n       * Module Name    : VAS\r\n       * Purpose        : Tab Panel For AP Matched PO and MatchedReceipt\r\n       * chronological  : Development\r\n       * Created Date   : 12 January 2024\r\n       * Created by     : VAI066\r\n      ******************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.PoReceiptTabPanel = function () {\n    this.record_ID = 0;\n    var $self = this;\n    this.windowNo = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var lblOrderId = null;\n    var lblGrnLineId = null;\n    var lblQty = null;\n    var lblInvoiceLineId = null;\n    var lblProductName = null;\n    var lblAttributeSetInstance = null;\n    var lblTitle = null;\n    var ctx = this.ctx;\n    var elements = ["VAS_InvoiceLineTitleTabPanel", "VAS_InvoiceLine", "VAS_OrderLineNo", "VAS_ReceiptLine", "VAS_Product", "VAS_Attribute", "VAS_Qty"];\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    var wrapperDiv = $("<div class =\'vas-apInvPoWrapper\'></div>");\n    lblTitle = $("<h6 class=\'vas-apInvPoTtl\'>" + VAS.translatedTexts.VAS_InvoiceLineTitleTabPanel + "</h6>");\n    lblInvoiceLineId = $("<span class = \'vas-apInvPoTitle\'>" + VAS.translatedTexts.VAS_InvoiceLine + "</span>");\n    var $lblInvoiceLineValue = $(\'<span class = "vas-apInvPoValue"><label>&nbsp;</label></span>\');\n    lblOrderId = $("<span class = \'vas-apInvPoTitle\'>" + VAS.translatedTexts.VAS_OrderLineNo + "</span>");\n    var $lblOrderValue = $(\'<span class = "vas-apInvPoValue"><label>&nbsp;</label></span>\');\n    lblGrnLineId = $("<span class = \'vas-apInvPoTitle\'>" + VAS.translatedTexts.VAS_ReceiptLine + "</span>");\n    var $lblGrnLineValue = $(\'<span class = "vas-apInvPoValue"><label>&nbsp;</label></span>\');\n    lblProductName = $("<span class = \'vas-apInvPoTitle\'>" + VAS.translatedTexts.VAS_Product + "</span>");\n    var $lblProductValue = $(\'<span class = "vas-apInvPoValue"><label>&nbsp;</label></span>\');\n    lblAttributeSetInstance = $("<span class = \'vas-apInvPoTitle\'>" + VAS.translatedTexts.VAS_Attribute + "</span>");\n    var $lblAttributeSetInstanceValue = $(\'<span class = "vas-apInvPoValue"><label>&nbsp;</label></span>\');\n    lblQty = $("<span class = \'vas-apInvPoTitle\'>" + VAS.translatedTexts.VAS_Qty + "</span>");\n    var $lblQtyValue = $(\'<span class = "vas-apInvPoValue"><label>&nbsp;</label></span>\');\n    var $root = $(\'<div class = "root"></div>\');\n\n    /*  Intialize UI Elements */\n    this.init = function () {\n      /*Assign the div space for each label */\n      InvoicePoListGroup = $(\'<div class = "vas-apInvPoListGroup"></div>\');\n      InvoiceLinediv = $(\'<div class = "vas-apInvPoSingleItem"></div>\');\n      OrderLinediv = $(\'<div class = "vas-apInvPoSingleItem"></div>\');\n      ReceiptLinediv = $(\'<div class = "vas-apInvPoSingleItem"></div>\');\n      Productdiv = $(\'<div class = "vas-apInvPoSingleItem"></div>\');\n      Attributediv = $(\'<div class = "vas-apInvPoSingleItem"></div>\');\n      Qtydiv = $(\'<div class = "vas-apInvPoSingleItem"></div>\');\n      InvoicePoSubListGroup = $(\'<div class = "vas-apInvPoListItem mb-2"></div>\');\n      InvoiceLinediv.append(lblInvoiceLineId).append($lblInvoiceLineValue);\n      OrderLinediv.append(lblOrderId).append($lblOrderValue);\n      ReceiptLinediv.append(lblGrnLineId).append($lblGrnLineValue);\n      Productdiv.append(lblProductName).append($lblProductValue);\n      Attributediv.append(lblAttributeSetInstance).append($lblAttributeSetInstanceValue);\n      Qtydiv.append(lblQty).append($lblQtyValue);\n      InvoicePoSubListGroup.append(InvoiceLinediv).append(OrderLinediv).append(ReceiptLinediv).append(Productdiv).append(Attributediv).append(Qtydiv);\n      InvoicePoListGroup.append(InvoicePoSubListGroup);\n      wrapperDiv.append(lblTitle).append(InvoicePoListGroup);\n      /* Attach design to Root division */\n      $root.append(wrapperDiv);\n    };\n\n    /* Get the tabpanel data returned from ajax method to the lebels */\n    this.getPoReceiptData = function (parentID) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS/PoReceipt/GetData",\n        type: "GET",\n        dataType: "json",\n        contentType: "application/json; charset=utf-8",\n        data: {\n          parentID: parentID\n        },\n        success: function (data) {\n          if (JSON.parse(data) != "") {\n            data = JSON.parse(data);\n            console.log(data);\n            if (data[0].OrderDocumentNo != "" || data[0].GRNDocumentNo != "") {\n              $lblOrderValue.text(data[0].OrderDocumentNo);\n              $lblGrnLineValue.text(data[0].GRNDocumentNo);\n              $lblInvoiceLineValue.text(data[0].InvoiceDocumentNo);\n              $lblProductValue.text(data[0].ProductName);\n              $lblAttributeSetInstanceValue.text(data[0].AttributeSetInstance);\n              $lblQtyValue.text(data[0].Qty);\n            }\n          }\n        },\n        error: function (eror) {\n          console.log(eror);\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.PoReceiptTabPanel.prototype.startPanel = function (windowNo, curTab) {\n      this.windowNo = windowNo;\n      this.curTab = curTab;\n      this.init();\n    };\n\n    /* This function to update tab panel based on selected record */\n    VAS.PoReceiptTabPanel.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getPoReceiptData(recordID);\n    };\n\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.PoReceiptTabPanel.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n\n    /* Release all variables from memory */\n    VAS.PoReceiptTabPanel.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n      lblOrderId = null;\n      lblGrnLineId = null;\n      lblQty = null;\n      lblInvoiceLineId = null;\n      lblProductName = null;\n      lblAttributeSetInstance = null;\n      lblTitle = null;\n      $lblInvoiceLineValue = null;\n      $lblOrderValue = null;\n      $lblGrnLineValue = null;\n      $lblProductValue = null;\n      $lblAttributeSetInstanceValue = null;\n      $lblQtyValue = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/PoReceiptTabPanel.js?\n}')},"./Areas/VAS/Scripts/app/forms/PurchaseOrderTabPanel.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get Order Tax Data\r\n * chronological  : Development\r\n * Created Date   : 16 Feb 2024\r\n * Created by     : VAI051\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.PurchaseOrderTabPanel = function () {\n    this.windowNo;\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var ctx = this.ctx;\n    var self = this;\n    var lblTitle = null;\n    var elements = [\"VAS_OrderTitleTabPanel\", \"VAS_OrderTax\", \"VAS_DocumentNo\", \"VAS_OrderTaxPaybaleAmt\", \"VAS_OrderTaxAmt\", \"VAS_IsIncludeTax\"];\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    var $root = $('<div class = \"root\"></div>');\n    var wrapperDiv = $(\"<div class ='vas-apTaxWrapper'></div>\");\n    lblTitle = $(\"<h6 class='vas-apTax-ttl'>\" + VAS.translatedTexts.VAS_OrderTitleTabPanel + \"</h6>\");\n    this.init = function () {\n      wrapperDiv.append(lblTitle);\n      OrderTaxPanel();\n      $root.append(wrapperDiv);\n    };\n\n    //Function defined to append design\n    function OrderTaxPanel() {\n      wrapperDiv.append('<div class=\"vas-aptaxListGroup\">' + '<div id=\"VAS-TaxDetail_' + self.windowNo + '\" class= \"VAS-TaxDetail mb-2\" > ' + '</div>' + '</div>');\n    }\n    ;\n\n    /*This function is used to get Order tax data*/\n    this.getOrderTaxData = function (recordID) {\n      $.ajax({\n        url: VIS.Application.contextUrl + \"VAS/PoReceipt/GetPurchaseOrderTaxData\",\n        type: \"GET\",\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        data: {\n          OrderId: recordID\n        },\n        complete: function () {\n          if ($root.closest('.vis-ad-w-p-actionpanel-b').length > 0) {\n            $root.closest('.vis-ad-w-p-ap-tp-outerwrap').css('height', '100%');\n          }\n        },\n        success: function (data) {\n          wrapperDiv.find('#VAS-TaxDetail_' + self.windowNo).empty();\n          data = JSON.parse(data);\n          if (data != null && data.length > 0) {\n            for (i = 0; i < data.length; i++) {\n              var TabPaneldesign = '<div class=\"vas-apListItem mb-2\">' + '<div class=\"vas-ap-sglItem mb-2\">' + '<div class=\"vas-singleTaxElement vas-setTaxWidth1\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_DocumentNo + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].DocumentNo + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxWidth1\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_OrderTax + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].TaxName + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxAmtWidth1\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_OrderTaxAmt + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].TaxAmt.toLocaleString(window.navigator.language, {\n                minimumFractionDigits: data[i].stdPrecision,\n                maximumFractionDigits: data[i].stdPrecision\n              }) + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxPaybleAmtWidth1\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold\">' + VAS.translatedTexts.VAS_OrderTaxPaybaleAmt + '</span>' + '<span class=\"vas-singleTaxElementValue\">' + data[i].TaxPaybleAmt.toLocaleString(window.navigator.language, {\n                minimumFractionDigits: data[i].stdPrecision,\n                maximumFractionDigits: data[i].stdPrecision\n              }) + '</span>' + '</div>' + '<div class=\"vas-apItem-checkbox d-flex align-items-center vas-setTaxWidthCheckbox \">' + '<input type=\"checkbox\" id=\"vas-includeTaxCheckbox\" ' + (data[i].IsTaxIncluded == \"Y\" ? 'checked' : '') + ' disabled>' + '<label class=\"vas-apcheckbox-label ml-1\" for=\"vas-includeTaxCheckbox\">' + VAS.translatedTexts.VAS_IsIncludeTax + '</label>' + '</div>' + '</div >' + '</div>';\n              //Appending design to wrapperDiv\n              wrapperDiv.find('#VAS-TaxDetail_' + self.windowNo).append(TabPaneldesign);\n            }\n          }\n        },\n        error: function (eror) {\n          console.log(eror);\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.PurchaseOrderTabPanel.prototype.startPanel = function (windowNo, curTab) {\n      self.windowNo = windowNo;\n      self.curTab = curTab;\n      self.init();\n    };\n\n    /* This function to update tab panel based on selected record */\n    VAS.PurchaseOrderTabPanel.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getOrderTaxData(recordID);\n    };\n\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.PurchaseOrderTabPanel.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n\n    /* Disposing all variables from memory */\n    VAS.PurchaseOrderTabPanel.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n      lblTitle = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/PurchaseOrderTabPanel.js?\n}")},"./Areas/VAS/Scripts/app/forms/RequisitionLinesTabPanel.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get Requition Lines Data\r\n * chronological  : Development\r\n * Created Date   : 19 February 2024\r\n * Created by     : VIS430\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.RequisitionLinesTabPanel = function () {\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var lblTitle = null;\n    var ctx = this.ctx;\n    var elements = [\"VAS_ReuitionLinesTabPanel\", \"VAS_LineNo\", \"VAS_Requition\", \"VAS_Product\", \"VAS_Charge\", \"VAS_QuantityReq\", \"VAS_Uom\", \"VAS_UnitPrice\", \"VAS_LineAmount\", \"VAS_Description\"];\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    var $root = $('<div class = \"root\"></div>');\n    var wrapperDiv = $(\"<div class ='vas-apTaxWrapper'></div>\");\n    lblTitle = $(\"<h6 class='vas-apTax-ttl'>\" + VAS.translatedTexts.VAS_ReuitionLinesTabPanel + \"</h6>\");\n    this.init = function () {\n      wrapperDiv.append(lblTitle);\n      ReuitionLinesPanel();\n      $root.append(wrapperDiv);\n    };\n\n    //Function defined to append design\n    function ReuitionLinesPanel() {\n      wrapperDiv.append('<div class=\"vas-aptaxListGroup\">' + '<div id=\"VAS-TaxDetail_' + this.windowNo + '\" class= \"VAS-TaxDetail mb-2\" > ' + '</div>' + '</div>');\n    }\n    ;\n\n    /*This function is used to get Requisition data*/\n    this.getReuitionLinesData = function (recordID) {\n      $.ajax({\n        url: VIS.Application.contextUrl + \"VAS/OrderLineTabPanel/GetRequitionLinesData\",\n        type: \"GET\",\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        data: {\n          OrderLineId: recordID\n        },\n        success: function (data) {\n          wrapperDiv.find('#VAS-TaxDetail_' + self.windowNo).empty();\n          data = JSON.parse(data);\n          if (data != null && data.length > 0) {\n            for (i = 0; i < data.length; i++) {\n              //VIS430:Handled Duplication of data on Requisition Tab Panel\n              var TabPaneldesign = '<div class=\"vas-apListItem mb-2\">' + '<div class=\"vas-ap-sglItem d-flex flex-column mb-2\">' + '<div class=\"vas-singleItemListWrap mb-2\">' + '<div class=\"vas-singleTaxElement vas-setTaxWidth vas-setUomWidth\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold w-100\">' + VAS.translatedTexts.VAS_LineNo + '</span>' + '<span class=\"vas-singleRequesitionValue\">' + data[i].LineNo + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxPaybleAmtWidth vas-setUomWidth\">' + '<span class=\"vas-singleTaxElementTTl font-weight-bold w-100\">' + VAS.translatedTexts.VAS_Requition + '</span>' + '<span class=\"vas-singleRequesitionValue w-100\">' + data[i].RequitionDocumentNo + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setShipWidth vas-setChargeWidth\">' + '<span class=\"vas-singleTaxElementTTl w-100 font-weight-bold vas-tp-widthpro\">' + VAS.translatedTexts.VAS_Product + '</span>' + '<span class=\"vas-singleRequesitionValue w-100\">' + data[i].ProductName + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxProWidth vas-setUomWidth\">' + '<span class=\"vas-singleTaxElementTTl w-100 font-weight-bold\">' + VAS.translatedTexts.VAS_QuantityReq + '</span>' + '<span class=\"vas-singleRequesitionValue w-100\">' + data[i].Qty.toLocaleString() + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxProWidth vas-setChargeWidth\">' + '<span class=\"vas-singleTaxElementTTl w-100 font-weight-bold vas-setShipWidth\">' + VAS.translatedTexts.VAS_Charge + '</span>' + '<span class=\"vas-singleRequesitionValue w-100\">' + data[i].ChargeName + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxProWidth vas-setUomWidth\">' + '<span class=\"vas-singleTaxElementTTl w-100 font-weight-bold\">' + VAS.translatedTexts.VAS_Uom + '</span>' + '<span class=\"vas-singleRequesitionValue w-100\">' + data[i].UomName + '</span>' + '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxProWidth vas-setUomWidth\">' + '<span class=\"vas-singleTaxElementTTl w-100 font-weight-bold\">' + VAS.translatedTexts.VAS_UnitPrice + '</span>' + '<span class=\"vas-singleRequesitionValue w-100\">' + data[i].PriceActual.toLocaleString(window.navigator.language, {\n                minimumFractionDigits: data[i].StdPrecision,\n                maximumFractionDigits: data[i].StdPrecision\n              }) + '</span>' +\n              //VIS430:Handled Precision unit price on Requisition Tab Panel\n              '</div>' + '<div class=\"vas-singleTaxElement vas-setTaxProWidth vas-setUomWidth\">' + '<span class=\"vas-singleTaxElementTTl w-100 font-weight-bold\">' + VAS.translatedTexts.VAS_LineAmount + '</span>' + '<span class=\"vas-singleRequesitionValue w-100\">' + data[i].LineNetAmt.toLocaleString(window.navigator.language, {\n                minimumFractionDigits: data[i].StdPrecision,\n                maximumFractionDigits: data[i].StdPrecision\n              }) + '</span>' +\n              //VIS430:Handled Precision Line Amount on Requisition Tab Panel\n              '</div>' + '</div>' + '<div class=\"vas-singleTaxElement\">' + '<span class=\"vas-singleTaxElementTTl w-100 font-weight-bold vas-setReqAmtWidth\">' + VAS.translatedTexts.VAS_Description + '</span>' + '<span class=\"vas-singleTaxDescription\">' + data[i].Description + '</span>' + '</div>' + '</div >' + '</div>';\n              //Appending design to wrapperDiv\n              wrapperDiv.find('#VAS-TaxDetail_' + this.windowNo).append(TabPaneldesign);\n            }\n          }\n        },\n        error: function (eror) {\n          console.log(eror);\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.RequisitionLinesTabPanel.prototype.startPanel = function (windowNo, curTab) {\n      this.windowNo = windowNo;\n      this.curTab = curTab;\n      this.init();\n    };\n\n    /* This function to update tab panel based on selected record */\n    VAS.RequisitionLinesTabPanel.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getReuitionLinesData(recordID);\n    };\n\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.RequisitionLinesTabPanel.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n\n    /* Disposing all variables from memory */\n    VAS.RequisitionLinesTabPanel.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n      lblTitle = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/RequisitionLinesTabPanel.js?\n}")},"./Areas/VAS/Scripts/app/forms/TabAlertRuleSql.js":()=>{eval("{;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.TabAlertRuleSql = function () {\n    this.windowNo = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    this.ParentId = 0;\n    var $self = this;\n    var pageSize = 100;\n    var autoComValue = null;\n    var pageNo = 1;\n    var tableID,\n      EventTable = 0;\n    var tabID = 0;\n    var joinData = null;\n    var addedOptions = [];\n    var joinColumnName = [];\n    var alertID = 0;\n    var alertRuleID = 0;\n    var mainTableName = null;\n    var filterArrayIndex = 0;\n    var andFlag = true;\n    var sqlGenerateFlag = false;\n    var sqlFlag = true;\n    var filterIndex = null;\n    var WhereCondition;\n    var joinsArray, $filterCurrentDate, $filterDateList, isDynamic, txtYear, txtMonth, txtDay, txtIsInsert, txtIsUpdate, txtIsDelete, windowTabCtrl, FiledColumnCtrl, okBtn, lblBottomMsg;\n    var joinTable;\n    var seletedJoinCloumn = [];\n    var sortValuesArray = [];\n    var whereJoinClause = '';\n    var $query = $(\"<div>\");\n    var gridDiv = $(\"<div class='vas-grid-div1'>\");\n    var gridDiv2 = $(\"<div class='vas-grid-div2'>\");\n    var $joinMultiSelect = $(\"<div class='vas-join-multiselect'>\");\n    var $sqlResultDiv = $(\"<div class='vas-sql-result-msg'>\");\n    var $sqlGeneratorBtn = null;\n    var $testSqlGeneratorBtn = null;\n    var $testSqlBtn = null;\n    var $saveBtn = null;\n    var $saveGeneratorBtn = null;\n    var $addJoinBtn = null;\n    var $addFilterBtn = null;\n    var $addSortBtn = null;\n    var sqlGridCols = [];\n    var sqlGeneratorGridCols = [];\n    var filterArray, isEmailCtrl, emailColNameCtrl, txtIsEmail, txtEmailColName, emailContentDiv, isInserCtrl, isUpdateCtrl, isDeleteCtrl, CRUDContentCtrl, UpdateColumnCtrl, txtWindowTab, txtFiledColumn;\n    var sortedIndex = -1;\n    var pagePrev,\n      pageNext = null;\n    var totalPages = 1;\n    var recordCount = 0;\n    this.dGrid = null;\n    this.dGridGen = null;\n    this.BasedOn = \"\";\n    var $windowTabDiv = $(\"<div class='vas-windowtab'><label>\" + VIS.Msg.getMsg(\"VAS_WindowTab\") + \"</label>\");\n    var $joinSearch = $(\"<div class='vas-windowtab vas-searchinput-block'><label>\" + VIS.Msg.getMsg(\"VAS_WindowTabAddition\") + \"</label>\");\n    var $multiSelectArrow = $('<span class=\"vis vis-arrow-down vas-arrow-down\"></span>');\n    var $multiSelectJoinArrow = $('<span class=\"vis vis-arrow-down vas-arrow-down\"></span>');\n    var $windowTabSelect = null;\n    var $txtWindow = $(\"<div class='VIS-AMTD-formData VIS-AMTD-InputBtns input-group vas-input-wrap'>\");\n    var $windowFieldColumnSelect = $(\"<div class='vas-windowfieldcol-select vas-windowtab vis-ev-col-mandatory' style='display: none;'><label>\" + VIS.Msg.getMsg(\"VAS_FieldColumn\") + \"</label></div>\");\n    var $joinsSelect = $(\"<div style='display: none;' class='vas-joins-select vas-common-style vas-windowtab'><label>\" + VIS.Msg.getMsg(\"VAS_FieldColumn\") + \"</label>\");\n    var $selectGenQuerySqlText = $(\"<div class='vas-sqlquery-text'>\");\n    var $sqlGenDeleteIcon = $(\"<i class='vis vis-delete vas-filters-editdelete-btns'></i>\");\n    var $selectQuery = $(\"<div class='vas-query-input vas-sql-query-input' id='query-input' contenteditable='true'>\");\n    var $selectGeneratorQuery = $(\"<div class='vas-query-input' contenteditable='false'>\");\n    var $multiSelect = $(\"<div class='vas-multiselect'>\");\n    var $selectBox = $(\"<div class='vas-selectBox vas-windowtab'><select><option>\" + VIS.Msg.getMsg(\"VAS_SelectAll\") + \"</option></select><div class='vas-overselect'></div></div>\");\n    var $checkBoxes = $(\"<div class='vas-checkboxes'>\");\n    var $joins = $(\"<div class='vas-joins'>\");\n    var $joinsDiv = $(\"<div class='vas-add-label'><label>\" + VIS.Msg.getMsg(\"VAS_Joins\") + \"</label>\");\n    var $column1Div = $(\"<div class='vas-column1'>\");\n    var $addJoinsDiv = $(\"<div class='vas-add-label-content'><h4>\" + VIS.Msg.getMsg(\"VAS_AddJoin\") + \"</h4>\");\n    var $joinsWindowTabSelect = null;\n    var $txtJoinWindow = $(\"<div class='VIS-AMTD-formData VIS-AMTD-InputBtns input-group vas-input-wrap'>\");\n    var $joinsDropdown = null;\n    var $filterEditDiv = $(\"<div style='display:none;'>\");\n    var $joinOnFieldColumnMainTable = null;\n    var $joinOnFieldColumnJoinTable = null;\n    var $filters = $(\"<div class='vas-filters'>\");\n    var $filterDiv = $(\"<div class='vas-add-label'><label>\" + VIS.Msg.getMsg(\"VAS_Condition\") + \"</label>\");\n    var $addFilterSelectButton = $(\"<div class='vas-select-plus-btn'>\");\n    var addConditionLabel = $(\"<div class='vas-addfiltertext'>\" + VIS.Msg.getMsg('VAS_AddFilter') + \"</div>\");\n    var $addFilterDiv = $(\"<div class='vas-add-label-content'>\");\n    var $filterOperatorDiv = $(\"<div class='vas-windowtab vas-operator'><label>\" + VIS.Msg.getMsg(\"Operator\") + \"</label>\");\n    var $filterValueDiv = $(\"<div class='vas-windowtab vas-columnval vas-single-input vas-showHideColumn'><label>\" + VIS.Msg.getMsg(\"VAS_ColumnValue\") + \"</label>\");\n    var $filterColumnName = $(\"<div class='vas-filter-text-input vas-single-selection-dropdown'>\");\n    var $filterValDropdown = $(\"<div class='vas-filter-val'>\");\n    var $filterOperator = $(\"<select class='vas-filtercondn'><option>=</option><option><></option><option>></option><option><</option><option><=</option><option>>=</option><option>LIKE</option><option>NOT LIKE</option><option>IS NULL</option><option>IS NOT NULL</option></select>\");\n    var $filterValue = $(\"<input type='textbox' class='vas-filter-text-input'>\");\n    var $fieldColDropdownBlock = $(\"<div class='vas-fielddropdown vas-windowtab'><label>\" + VIS.Msg.getMsg(\"VAS_FieldColumn\") + \"</label>\");\n    var $fieldJoinColDropdownBlock = $(\"<div class='vas-joinfielddropdown vas-windowtab'><label>\" + VIS.Msg.getMsg(\"VAS_FieldColumn\") + \"</label>\");\n    var $filterConditionV2 = null;\n    var switchValueBtn = $('<i data-info=\"Y\" class=\"fa fa-exchange\" title=\"' + VIS.Msg.getMsg('SwapColumnValue') + '\"></i>');\n    var $sortElements = null;\n    var $sortSelectArrow = $('<span class=\"vis vis-arrow-down vas-arrow-down\"></span>');\n    var $filterSelectArrow = $('<span class=\"vis vis-arrow-down vas-arrow-down\"></span>');\n    var $filterValSelectArrow = $('<span class=\"vis vis-arrow-down vas-arrow-down\"></span>');\n    var $baseTableSelectArrow = $('<span class=\"vis vis-arrow-down vas-arrow-down\"></span>');\n    var $joiningTableSelectArrow = $('<span class=\"vis vis-arrow-down vas-arrow-down\"></span>');\n    var $sortColumnInput = $(\"<input class='vas-select-col' type='textbox' placeholder='\" + VIS.Msg.getMsg(\"VAS_TypeColumn\") + \"'>\");\n    var $filterColumnInput = $(\"<input class='vas-select-col' type='textbox' placeholder='\" + VIS.Msg.getMsg(\"VAS_TypeColumn\") + \"'>\");\n    var $filterValInput = $(\"<input class='vas-select-col' data-input='oldColumn' type='textbox' placeholder='\" + VIS.Msg.getMsg(\"VAS_TypeColumn\") + \"'>\");\n    var $baseTableJoinInput = $(\"<input class='vas-select-col' type='textbox' placeholder='\" + VIS.Msg.getMsg(\"VAS_TypeColumn\") + \"'>\");\n    var $joiningTableInput = $(\"<input class='vas-select-col' type='textbox' placeholder='\" + VIS.Msg.getMsg(\"VAS_TypeColumn\") + \"'>\");\n    var $fieldColDropdown = $(\"<input class='vas-select-col vis-ev-col-mandatory' type='textbox' placeholder='\" + VIS.Msg.getMsg(\"VAS_TypeColumn\") + \"'>\");\n    var $fieldJoinColDropdown = $(\"<input class='vas-join-select-col' type='textbox' placeholder='\" + VIS.Msg.getMsg(\"VAS_TypeColumn\") + \"'>\");\n    var $sortByDiv = $(\"<div class='vas-add-label'><label>\" + VIS.Msg.getMsg(\"VAS_Sort\") + \"</label>\");\n    var $filterofMultipleColumns = $(\"<div class='vas-filterofMultipleCols'>\");\n    var $filterNewColumn = $(\"<div class='vas-single-input vas-windowtab vas-searchinput-block vas-filterNewCol' style='display: none;'><label>\" + VIS.Msg.getMsg(\"VAS_CompareColumn\") + \"</label>\");\n    var $filterNewColumnInput = $(\"<input class='vas-select-col' data-input='newColumn' type='textbox' placeholder='\" + VIS.Msg.getMsg(\"VAS_TypeColumn\") + \"'>\");\n    var $filterNewColumnArrow = $('<span class=\"vis vis-arrow-down vas-arrow-down\"></span>');\n    var $addSortByDiv = $(\"<div class='vas-add-label-content'><h4>\" + VIS.Msg.getMsg(\"VAS_AddSort\") + \"</h4>\");\n    var $sortByDropdown = $(\"<div class='vas-sortby-dropdown'>\");\n    var $sortInputBlock = $(\"<div class='vas-single-input vas-windowtab vas-sort-block'><label>\" + VIS.Msg.getMsg(\"VAS_FieldColumn\") + \"</label>\");\n    var $filterInputBlock = $(\"<div class='vas-single-input vas-windowtab vas-searchinput-block'><label>\" + VIS.Msg.getMsg(\"VAS_FieldColumn\") + \"</label>\");\n    var $filterValExchangeIconBlock = $(\"<div class='vas-filterValExchangeIconBlock vas-showHideColumn' style='display: none;'>\");\n    var $filterValBlock = $(\"<div class='vas-single-input vas-windowtab vas-searchinput-block vas-filterValBlock'><label>\" + VIS.Msg.getMsg(\"VAS_FieldColumn\") + \"</label>\");\n    var $filterCol2Block = $(\"<div class='vas-single-input vas-windowtab vas-searchinput-block vas-filterCol2Block vas-single-selection-dropdown'>\");\n    var $baseTableInputBlock = $(\"<div class='vas-single-input vas-windowtab'><label>\" + VIS.Msg.getMsg(\"VAS_MainTable_Column\") + \"</label>\");\n    var $joiningTableInputBlock = $(\"<div class='vas-single-input vas-joiningtable-input vas-windowtab'><label>\" + VIS.Msg.getMsg(\"VAS_JoinTable_Column\") + \"</label>\");\n    var $addSortBySelectWithButton = $(\"<div class='vas-select-plus-btn vas-addsort-btn'>\");\n    var $sqlBtns = $(\"<div class='vas-sql-btns'>\");\n    var $contentArea = $(\"<div class='vas-content-area'>\");\n    var $queryMessage = $(\"<div class='vas-query-message'>\");\n    var $sqlContent = $(\"<div class='vas-sql-content'><div class='vas-sqlquery-text'>\" + VIS.Msg.getMsg(\"VAS_SQL\") + \"</div></div>\");\n    var $queryResultGrid = $(\"<div style='display:none;' class='vas-queryresult-grid'></div>\");\n    var $sqlGeneratorContent = null;\n    var $sqlGeneratorQueryResultGrid = $(\"<div style='display:none;' class='vas-queryresult-grid'></div>\");\n    var $filterDateDiv = $('<div class=\"vis-advanedSearch-InputsWrap vis-advancedSearchMrgin vas-dateBlock\">' + '<div id=\"currentDate\" class= \"vis-form-group vis-advancedSearchInput1\" ><input type=\"checkbox\" ' + 'id=\"chkDynamic\" name=\"IsDynamic\" class=\"vis-pull-left\"><label for=\"IsDynamic\">' + VIS.Msg.getMsg(\"IsDynamic\") + '</label></div>' + '<div class=\"vis-form-group vis-advancedSearchInput\">' + '<select id=\"drpDynamicOp\" disabled>' + '<option>' + VIS.Msg.getMsg(\"Today\") + '</option>' + '<option>' + VIS.Msg.getMsg(\"lastxDays\") + '</option>' + '<option>' + VIS.Msg.getMsg(\"lastxMonth\") + '</option>' + '<option>' + VIS.Msg.getMsg(\"lastxYears\") + '</option>' + '</select></div>' + '<div class= \"vis-form-group vis-advancedSearchHorigontal vis-pull-left\"id = \"divYear\" style = \"display: none;\" >' + '<input id = \"txtYear\" type = \"number\" min = \"1\" max = \"99\" > <label for=\"Year\">' + VIS.Msg.getMsg(\"Year\") + '</label>' + '</div>' + '<div class=\"vis-form-group vis-advancedSearchHorigontal vis-pull-left\" id=\"divMonth\" style=\"display: none;\">' + ' <input id=\"txtMonth\" type=\"number\" min=\"1\" max=\"12\">' + '<label for=\"Month\">' + VIS.Msg.getMsg(\"Month\") + '</label></div><div class=\"vis-form-group vis-advancedSearchHorigontal vis-pull-left\" id=\"divDay\" style=\"\">' + '<input id=\"txtDay\" type=\"number\" min=\"0\" max=\"31\">' + '<label for=\"Day\">' + VIS.Msg.getMsg(\"Day\") + '</label></div></div>');\n    var sqlQuery = VIS.Msg.getMsg(\"VAS_SQLQuery\");\n    var $sortCollection = $(\"<div class='vas-sortCollection'>\");\n    var testSQL = VIS.Msg.getMsg(\"VAS_TestSql\");\n    var joinCommonColumn,\n      $bsyDiv = null;\n    var record = [];\n    var Joinrecord = [];\n    var $root = $(\"<div class='vas-root'>\");\n    var $SQLMainDiv = $(\"<div class='vas-root-main'>\");\n    var $EventMainDiv = $(\"<div style='display:none;' class='vas-root-eventmain'>\");\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\" style=\"visibility: hidden;\"></div>');\n      $bsyDiv.append($('<div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis-busyindicatordiv\"></i></div>'));\n      setBusy(false);\n      $root.append($bsyDiv);\n    }\n    ;\n\n    /**\r\n     * function used to show/hide busy indicator\r\n     * @param {any} isBusy\r\n     */\n    function setBusy(isBusy) {\n      if (isBusy) {\n        $bsyDiv[0].style.visibility = \"visible\";\n      } else {\n        $bsyDiv[0].style.visibility = \"hidden\";\n      }\n    }\n    ;\n\n    // Initialize UI Elements\n    this.init = function () {\n      $sqlBtn = $(\"<input class='VIS_Pref_btn-2 vas-sql-btn' id='vas-sql-btn\" + $self.windowNo + \"' type='button' value='\" + VIS.Msg.getMsg(\"VAS_SQL\") + \"'>\");\n      $sqlGeneratorBtn = $(\"<input class='VIS_Pref_btn-2 vas-sql-generator' id='vas-sql-generatorbtn\" + $self.windowNo + \"' type='button' value='\" + VIS.Msg.getMsg(\"VAS_SQLGenerator\") + \"'>\");\n      $testSqlGeneratorBtn = $(\"<input style='display: none;' class='VIS_Pref_btn-2 vas-test-sql vas-test-sqlgenerator' id='vas-testsql-generatorbtn\" + $self.windowNo + \"' type='button' value='\" + VIS.Msg.getMsg(\"VAS_TestSql\") + \"'>\");\n      $testSqlBtn = $(\"<input class='VIS_Pref_btn-2 vas-test-sql' id='vas-testsql-btn\" + $self.windowNo + \"' type='button' value='\" + VIS.Msg.getMsg(\"VAS_TestSql\") + \"'>\");\n      $saveBtn = $(\"<input class='VIS_Pref_btn-2 vas-save-btn' type='button' id='vas-save-btn\" + $self.windowNo + \"' value='\" + VIS.Msg.getMsg(\"VAS_Save\") + \"'>\");\n      $saveGeneratorBtn = $(\"<input class='VIS_Pref_btn-2 vas-save-btn mt-0' id='vas-savegenerator-btn\" + $self.windowNo + \"' type='button' value='\" + VIS.Msg.getMsg(\"VAS_Save\") + \"'>\");\n      pagingDiv = $('<div>' + '<ul class=\"vis-ad-w-p-s-plst\">' + '<li style=\"opacity: 0.6;\"><div><i class=\"vis vis-pageup\" id=\"VAS_pageUp' + $self.windowNo + '\"></i></div></li>' + '<li>' + '<select class=\"vis-statusbar-combo\" id= \"VAS_dropDownSelect' + $self.windowNo + '\"><option>1</option></select>' + '</li>' + '<li style=\"opacity: 0.6;\"><div><i class=\"vis vis-pagedown\"  id= \"VAS_pageDown' + $self.windowNo + '\"></i></div></li>' + '</ul>' + '<div>');\n      pagingPlusBtnDiv = $('<div class=\"VAS-pagingDiv d-none\">');\n      $addJoinBtn = $(\"<input class='VIS_Pref_btn-2 vas-add-join-btn' id='vas-addjoin-btn\" + $self.windowNo + \"' type='button' value='\" + VIS.Msg.getMsg(\"VAS_AddJoin\") + \"'>\");\n      $addFilterBtn = $(\"<input class='VIS_Pref_btn-2 vas-add-btn' id='vas-addfilter-btn\" + $self.windowNo + \"' type='button' value='\" + VIS.Msg.getMsg(\"VAS_AddFilter\") + \"'>\");\n      $addSortBtn = $(\"<input class='VIS_Pref_btn-2 vas-add-btn' id='vas-addsort-btn\" + $self.windowNo + \"' type='button' value='\" + VIS.Msg.getMsg(\"VAS_AddSort\") + \"'>\");\n      $sqlGeneratorContent = $(\"<div class='vas-sqlgenerator' id='vas-sqlgeneratorcontent\" + $self.windowNo + \"' style='display: none;'><div class='vas-sqlgenerator-column vas-sqlgenerator-column1'></div><div class='vas-sqlgenerator-column vas-sqlgenerator-column2'></div></div>\");\n      $joinsDropdown = $(\"<select class='vas-joins-collection'><option>INNER JOIN</option><option>LEFT OUTER JOIN</option><option>RIGHT OUTER JOIN</option><option>FULL JOIN</option></select>\");\n      $joinOnFieldColumnMainTable = $(\"<div class='vas-single-selection-dropdown'>\");\n      $joinOnFieldColumnJoinTable = $(\"<div class='vas-single-selection-dropdown'>\");\n      $filterConditionV2 = $(\"<select><option>AND</option><option>OR</option></select>\");\n      $sortElements = $(\"<select><option>ASC</option><option>DESC</option></select>\");\n      $filterCurrentDate = $filterDateDiv.find('#currentDate');\n      $filterDateList = $filterDateDiv.find('#drpDynamicOp');\n      isDynamic = $filterDateDiv.find('#chkDynamic');\n      txtYear = $filterDateDiv.find('#txtYear');\n      txtMonth = $filterDateDiv.find('#txtMonth');\n      txtDay = $filterDateDiv.find('#txtDay');\n      divDay = $filterDateDiv.find('#divDay');\n      divMonth = $filterDateDiv.find('#divMonth');\n      divYear = $filterDateDiv.find('#divYear');\n      $sqlBtns.append($sqlGeneratorBtn).append($sqlBtn).append($sqlResultDiv).append($testSqlBtn).append($testSqlGeneratorBtn);\n      $selectGenQuerySqlText.text(VIS.Msg.getMsg(\"VAS_SQLQuery\"));\n      $selectGeneratorQuery.attr('disabled', true);\n      $SQLMainDiv.append($sqlBtns).append($contentArea).append(gridDiv).append(gridDiv2);\n      $root.append($SQLMainDiv).append($EventMainDiv);\n      $contentArea.append($sqlContent).append($sqlGeneratorContent).append($queryMessage);\n      $queryResultGrid.append(gridDiv);\n      $sqlGeneratorQueryResultGrid.append(gridDiv2);\n      $sqlGeneratorContent.find(\".vas-sqlgenerator-column1\").append($column1Div);\n      $column1Div.append($windowTabDiv).append($multiSelect).append($joinsDiv).append($addJoinsDiv).append($filterDiv).append($addFilterDiv).append($sortByDiv).append($addSortByDiv);\n      $windowTabDiv.append($txtWindow);\n      $multiSelect.append($fieldColDropdownBlock);\n      $fieldColDropdownBlock.append($fieldColDropdown);\n      $fieldColDropdownBlock.append($multiSelectArrow);\n      $multiSelect.append($windowFieldColumnSelect).append($checkBoxes);\n      $addJoinsDiv.append($joinSearch).append($fieldJoinColDropdownBlock).append($joinsSelect).append($joinMultiSelect).append($joinsDropdown).append($baseTableInputBlock).append($joinOnFieldColumnMainTable).append($joiningTableInputBlock).append($joinOnFieldColumnJoinTable).append($addJoinBtn).append($joins);\n      $joinSearch.append($txtJoinWindow);\n      $fieldJoinColDropdownBlock.append($fieldJoinColDropdown);\n      $fieldJoinColDropdownBlock.append($multiSelectJoinArrow);\n      $filterOperatorDiv.append($filterOperator);\n      $filterValueDiv.append($filterValue);\n      $addFilterDiv.append(addConditionLabel).append($filterInputBlock).append($filterColumnName).append($filterOperatorDiv).append($filterofMultipleColumns).append($filterCol2Block).append($filterValDropdown).append($addFilterSelectButton).append($filterEditDiv);\n      $addFilterSelectButton.append($filterConditionV2).append($addFilterBtn);\n      $addSortByDiv.append($sortInputBlock).append($sortByDropdown).append($addSortBySelectWithButton).append($sortCollection);\n      $sortInputBlock.append($sortColumnInput).append($sortSelectArrow);\n      $filterInputBlock.append($filterColumnInput).append($filterSelectArrow);\n      $filterValExchangeIconBlock.append($filterValBlock);\n      $filterofMultipleColumns.append(switchValueBtn).append($filterValueDiv).append($filterValExchangeIconBlock).append($filterNewColumn).append($filterDateDiv);\n      $filterNewColumn.append($filterNewColumnInput).append($filterNewColumnArrow);\n      $filterValBlock.append($filterValInput).append($filterValSelectArrow);\n      $baseTableInputBlock.append($baseTableJoinInput).append($baseTableSelectArrow);\n      $joiningTableInputBlock.append($joiningTableInput).append($joiningTableSelectArrow);\n      $addSortBySelectWithButton.append($sortElements).append($addSortBtn);\n      $sqlContent.append($selectQuery).append($queryResultGrid);\n      $sqlContent.append('<div id=\"emailContent_' + $self.windowNo + '\" class=\"vas-alert-emailmsg VIS_Pref_show vis-formouterwrpdiv\">' + '<div class= \"VIS_Pref_dd\"><div class=\"input-group vis-input-wrap\" id=\"Is_Email_' + $self.windowNo + '\"></div></div>' + '<div class= \"VIS_Pref_dd\"><div style=\"display:none;\" class=\"input-group vis-input-wrap\" id=\"EmailColName_' + $self.windowNo + '\"></div></div>' + '</div>');\n      $EventMainDiv.append('<div class=\"vas-windowtab\"><label>' + VIS.Msg.getMsg(\"VAS_WindowTab\") + '</label>' + '<div id=\"WindowTab_' + $self.windowNo + '\"  class=\"VIS-AMTD-formData VIS-AMTD-InputBtns input-group vas-input-wrap\"></div>' + '</div><div id=\"CRUDContent_' + $self.windowNo + '\" class=\"vas-alert-emailmsg VIS_Pref_show vis-formouterwrpdiv\">' + '<div class= \"VIS_Pref_dd\"><div class=\"input-group vis-input-wrap\" id=\"Is_Insert_' + $self.windowNo + '\"></div></div>' + '<div class= \"VIS_Pref_dd\"><div class=\"input-group vis-input-wrap\" id=\"IsUpdate_' + $self.windowNo + '\"></div></div>' + '<div class= \"VIS_Pref_dd\"><div class=\"input-group vis-input-wrap\" id=\"IsDelete_' + $self.windowNo + '\"></div></div>' + '</div><div style=\"display:none;\" class=\"VAS-Alert-window-column\" id=\"updateColumn_' + $self.windowNo + '\">' + '<div class= \"vas-windowtab\"><label>' + VIS.Msg.getMsg(\"VAS_FieldColumn\") + '</label>' + '<div id=\"FieldColumn_' + $self.windowNo + '\"  class=\"VIS-AMTD-formData VIS-AMTD-InputBtns input-group vas-input-wrap\"></div>' + '</div></div>' + '<div class=\"vis-ctrfrm-btnwrp\">' + '<input id=\"okBtn_' + $self.windowNo + '\" class=\"VIS_Pref_btn-2\" type=\"button\" value=\"' + VIS.Msg.getMsg(\"OK\") + '\">' + '<div class=\"vis-ad-w-p-s-main pull-left\"><div class=\"vis-ad-w-p-s-infoline\"></div><div class=\"vis-ad-w-p-s-msg\" style=\"align-items:flex-end;\" id=\"lblBottomMsg_' + $self.windowNo + '\"></div></div>' + '</div>');\n      createBusyIndicator();\n      isEmailCtrl = $sqlContent.find(\"#Is_Email_\" + $self.windowNo);\n      emailColNameCtrl = $sqlContent.find(\"#EmailColName_\" + $self.windowNo);\n      emailContentDiv = $sqlContent.find(\"#emailContent_\" + $self.windowNo);\n      var isEmailCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      var emailColCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      var isInsertCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      var isUpdateCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      var isDeleteCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      isInserCtrl = $EventMainDiv.find(\"#Is_Insert_\" + $self.windowNo);\n      isUpdateCtrl = $EventMainDiv.find(\"#IsUpdate_\" + $self.windowNo);\n      isDeleteCtrl = $EventMainDiv.find(\"#IsDelete_\" + $self.windowNo);\n      CRUDContentCtrl = $EventMainDiv.find(\"#CRUDContent_\" + $self.windowNo);\n      UpdateColumnCtrl = $EventMainDiv.find(\"#updateColumn_\" + $self.windowNo);\n      windowTabCtrl = $EventMainDiv.find(\"#WindowTab_\" + $self.windowNo);\n      FiledColumnCtrl = $EventMainDiv.find(\"#FieldColumn_\" + $self.windowNo);\n      okBtn = $EventMainDiv.find(\"#okBtn_\" + $self.windowNo);\n      lblBottomMsg = $EventMainDiv.find(\"#lblBottomMsg_\" + $self.windowNo);\n      $sqlGeneratorContent.find('.vas-sqlgenerator-column2').append($selectGenQuerySqlText.append($sqlGenDeleteIcon)).append($selectGeneratorQuery).append(gridDiv2);\n      txtIsEmail = new VIS.Controls.VCheckBox(\"IsEmail\", false, false, true, VIS.Msg.getMsg(\"VAS_SendMail\"), null, false);\n      isEmailCtrl.append(isEmailCtrlWrap);\n      isEmailCtrlWrap.append(txtIsEmail.getControl().addClass(\"vis-ec-col-lblchkbox\"));\n      txtEmailColName = new VIS.Controls.VTextBox(\"EMail\", true, false, true);\n      emailColNameCtrl.append(emailColCtrlWrap);\n      emailColCtrlWrap.append(txtEmailColName.getControl().attr('title', VIS.Msg.getMsg(\"VAS_TypeEmailColumn\")).attr('placeholder', ' ').attr('data-placeholder', '').attr(\"autocomplete\", \"off\")).append('<label>' + VIS.Msg.getMsg(\"VAS_EmailColumn\") + '</label>');\n      txtIsInsert = new VIS.Controls.VCheckBox(\"IsInsert\", false, false, true, VIS.Msg.getMsg(\"VAS_OnInsert\"), null, false);\n      isInserCtrl.append(isInsertCtrlWrap);\n      isInsertCtrlWrap.append(txtIsInsert.getControl().addClass(\"vis-ec-col-lblchkbox\"));\n      txtIsUpdate = new VIS.Controls.VCheckBox(\"IsUpdate\", false, false, true, VIS.Msg.getMsg(\"VAS_OnUpdate\"), null, false);\n      isUpdateCtrl.append(isUpdateCtrlWrap);\n      isUpdateCtrlWrap.append(txtIsUpdate.getControl().addClass(\"vis-ec-col-lblchkbox\"));\n      txtIsDelete = new VIS.Controls.VCheckBox(\"IsDeleted\", false, false, true, VIS.Msg.getMsg(\"VAS_OnDelete\"), null, false);\n      isDeleteCtrl.append(isDeleteCtrlWrap);\n      isDeleteCtrlWrap.append(txtIsDelete.getControl().addClass(\"vis-ec-col-lblchkbox\"));\n      var lookups = new VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.Search, \"AD_Tab_ID\", 0, false, \"AD_Tab.AD_Window_ID IN (SELECT AD_Window_ID FROM AD_Window_Access WHERE AD_Role_ID = \" + VIS.Env.getCtx().getAD_Role_ID() + \")\");\n      txtWindowTab = new VIS.Controls.VTextBoxButton(\"AD_Tab_ID\", true, false, true, VIS.DisplayType.Search, lookups);\n      var locDep = txtWindowTab.getControl().attr('placeholder', ' Search here').attr(\"id\", \"Ad_Table_ID\").css(\"width\", \"100%\").css(\"height\", \"100%\");\n      var DivSearchCtrlWrap = $('<div class=\"vas-control-wrap\">');\n      var DivSearchBtnWrap = $('<div class=\"input-group-append\">');\n      windowTabCtrl.css(\"width\", \"100%\");\n      windowTabCtrl.append(DivSearchCtrlWrap).append(DivSearchBtnWrap);\n      DivSearchCtrlWrap.append(locDep);\n      DivSearchBtnWrap.append(txtWindowTab.getBtn(0));\n      DivSearchBtnWrap.append(txtWindowTab.getBtn(1));\n      txtWindowTab.setCustomInfo('VAS_AlertSQLGenerator');\n      txtWindowTab.getControl().addClass(\"vis-ev-col-mandatory\");\n      var fieldlookup = new VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.MultiKey, \"AD_Column_ID\", 0, false, \"\");\n      txtFiledColumn = new VIS.Controls.VTextBoxButton(\"AD_Column_ID\", true, false, true, VIS.DisplayType.MultiKey, fieldlookup);\n      var locDep = txtFiledColumn.getControl().attr('placeholder', ' Search here').attr(\"id\", \"AD_Column_ID\").css(\"width\", \"100%\").css(\"height\", \"100%\");\n      var DivSearchCtrlWrap = $('<div class=\"vas-control-wrap\">');\n      var DivSearchBtnWrap = $('<div class=\"input-group-append\">');\n      FiledColumnCtrl.css(\"width\", \"100%\");\n      FiledColumnCtrl.append(DivSearchCtrlWrap).append(DivSearchBtnWrap);\n      DivSearchCtrlWrap.append(locDep);\n      DivSearchBtnWrap.append(txtFiledColumn.getBtn(0));\n      DivSearchBtnWrap.append(txtFiledColumn.getBtn(1));\n      txtFiledColumn.setCustomInfo('VAS_AlertFieldColumn');\n      txtFiledColumn.getControl().addClass(\"vis-ev-col-mandatory\");\n\n      // Empty the Condition's Operator value\n      $filterOperator.val('');\n\n      /*Multiple column checbox handling*/\n\n      $fieldColDropdown.on(\"keyup\", function () {\n        var $fieldColDropdownVal = $(this).val().toLowerCase();\n        var $windowMultiSelectItem = $checkBoxes.children('.vas-column-list-item');\n        var $windowMultiSelectItemLength = $windowMultiSelectItem.length;\n        if ($windowMultiSelectItemLength > 0) {\n          $checkBoxes.show();\n          $windowMultiSelectItem.filter(function () {\n            $(this).toggle($(this).text().toLowerCase().indexOf($fieldColDropdownVal) > -1);\n          });\n        } else {\n          $checkBoxes.hide();\n        }\n        if (!$windowMultiSelectItem.is(':visible')) {\n          $checkBoxes.hide();\n        }\n      });\n      isDynamic.on(\"change\", function () {\n        var enable = isDynamic.prop(\"checked\");\n        $filterDateList.prop(\"disabled\", !enable);\n        if (enable) {\n          setDynamicQryControls();\n        } else {\n          divYear.hide();\n          divMonth.hide();\n          divDay.hide();\n        }\n      });\n      $filterDateList.on(\"change\", function () {\n        setDynamicQryControls();\n      });\n      $filterNewColumn.find('input').on(\"keyup\", function () {\n        var $filterNewColumnVal = $(this).val().toLowerCase();\n        var $filterCol2BlockItem = $filterCol2Block.children('.vas-column-list-item');\n        var $filterCol2BlockItemLength = $filterCol2BlockItem.length;\n        if ($filterCol2BlockItemLength > 0) {\n          $filterCol2Block.show();\n          $filterCol2BlockItem.filter(function () {\n            $(this).toggle($(this).text().toLowerCase().indexOf($filterNewColumnVal) > -1);\n          });\n        } else {\n          $filterCol2Block.hide();\n        }\n        if (!$filterCol2BlockItem.is(':visible')) {\n          $filterCol2Block.hide();\n        }\n      });\n      $filterofMultipleColumns.find(switchValueBtn).off(VIS.Events.onTouchStartOrClick);\n      $filterofMultipleColumns.find(switchValueBtn).on(VIS.Events.onTouchStartOrClick, function () {\n        $filterCol2Block.hide();\n        if ($(this).parents('.vas-add-label-content').find('input[type=\"textbox\"]').val() != '') {\n          $filterNewColumn.toggle();\n          if ($filterNewColumn.css('display') != 'none') {\n            $filterValExchangeIconBlock.hide();\n            $filterValueDiv.hide();\n            $filterOperator.removeClass('vas-checkboxoption-hidden');\n            $filterOperator.removeClass('vas-remove-isnulloption');\n            $filterOperator.removeClass('vas-add-isnulloption');\n            $filterOperator.removeClass('vas-remove-likeoption');\n            $filterOperator.addClass('vas-comparision-opeartor');\n            $filterDateDiv.hide();\n            $filterColumnInput.attr('datatype', 13);\n          } else {\n            var columnId = $filterInputBlock.find('input').attr('columnid');\n            $filterColumnName.find('.vas-column-list-item[columnid=' + columnId + ']').trigger('click');\n            var ctrlDataType = $filterInputBlock.find('input').attr('datatype');\n            if (ctrlDataType == VIS.DisplayType.Date || ctrlDataType == VIS.DisplayType.DateTime) {\n              $filterDateDiv.show();\n              $filterColumnName.find('.vas-column-list-item.active').trigger('click');\n            } else {\n              $filterDateDiv.hide();\n            }\n          }\n          //$filterOperator.val('=');\n        }\n      });\n\n      /*Multiple join column checbox handling*/\n\n      $fieldJoinColDropdown.on(\"keyup\", function () {\n        var $joinColDropdownVal = $(this).val().toLowerCase();\n        var $joinMultiSelectItem = $joinMultiSelect.children('.vas-column-list-item');\n        var $joinMultiSelectItemLength = $joinMultiSelectItem.length;\n        if ($joinMultiSelectItemLength > 0) {\n          $joinMultiSelect.show();\n          $joinMultiSelectItem.filter(function () {\n            $(this).toggle($(this).text().toLowerCase().indexOf($joinColDropdownVal) > -1);\n          });\n        }\n        if (!$joinMultiSelectItem.is(':visible')) {\n          $joinMultiSelect.hide();\n        }\n      });\n\n      /*searching the sort column when user start typing*/\n\n      $sortColumnInput.on(\"keyup\", function () {\n        var $sortByColDropdownVal = $(this).val().toLowerCase();\n        var $sortBySelectedItem = $sortByDropdown.children('.vas-column-list-item');\n        var $sortBySelectedItemLength = $sortBySelectedItem.length;\n        if ($sortBySelectedItemLength > 0) {\n          $sortByDropdown.show();\n          $sortBySelectedItem.filter(function () {\n            $(this).toggle($(this).text().toLowerCase().indexOf($sortByColDropdownVal) > -1);\n          });\n        }\n        if (!$sortBySelectedItem.is(':visible')) {\n          $sortByDropdown.hide();\n        } else {\n          $sortBySelectedItem.on(VIS.Events.onTouchStartOrClick, function () {\n            let $sortByItemVal = $(this).attr('value');\n            $(this).parent($sortByDropdown).prev($sortInputBlock).find($sortColumnInput).val($sortByItemVal);\n            sortOnChange($(this), $sortBySelectedItem);\n            $sortByDropdown.hide();\n          });\n        }\n      });\n\n      /* Hiding filter Value on basis of filter Operator */\n\n      $filterOperator.on(\"change\", function () {\n        if ($filterOperator.val() == 'IS NULL') {\n          $filterValExchangeIconBlock.find('input').prop('disabled', true);\n          $filterValueDiv.find('input').prop('disabled', true);\n          $filterValExchangeIconBlock.find('.vas-arrow-down').css('pointer-events', 'none');\n        } else if ($filterOperator.val() == 'LIKE') {\n          $filterValueDiv.find('input').prop('disabled', false);\n          $filterValueDiv.show();\n          $filterValExchangeIconBlock.hide();\n        } else {\n          $filterValExchangeIconBlock.find('input').prop('disabled', false);\n          $filterValueDiv.find('input').prop('disabled', false);\n          $filterValExchangeIconBlock.find('.vas-arrow-down').css('pointer-events', 'all');\n        }\n      });\n\n      /*searching the filter column when user start typing*/\n      $filterColumnInput.off(\"keyup\");\n      $filterColumnInput.on(\"keyup\", function () {\n        var $filterColDropdownVal = $(this).val().toLowerCase();\n        var $filterSelectedItem = $filterColumnName.children('.vas-column-list-item');\n        if ($filterSelectedItem.length > 0) {\n          $filterColumnName.show();\n          $filterSelectedItem.filter(function () {\n            $(this).toggle($(this).text().toLowerCase().indexOf($filterColDropdownVal) > -1);\n          });\n        }\n        if (!$filterSelectedItem.is(':visible')) {\n          $filterColumnName.hide();\n        } else {\n          $filterSelectedItem.off(VIS.Events.onTouchStartOrClick);\n          $filterSelectedItem.on(VIS.Events.onTouchStartOrClick, function () {\n            filterOnChange($(this), $filterSelectedItem);\n          });\n        }\n      });\n\n      /*searching the  main base table column when user start typing*/\n\n      $baseTableJoinInput.on(\"keyup\", function () {\n        var $join1DropdownVal = $(this).val().toLowerCase();\n        var $join1SelectedItem = $joinOnFieldColumnMainTable.children('.vas-column-list-item');\n        var $join1SelectedItemLength = $join1SelectedItem.length;\n        if ($join1SelectedItemLength > 0) {\n          $joinOnFieldColumnMainTable.show();\n          $join1SelectedItem.filter(function () {\n            $(this).toggle($(this).text().toLowerCase().indexOf($join1DropdownVal) > -1);\n          });\n        }\n        if (!$join1SelectedItem.is(':visible')) {\n          $joinOnFieldColumnMainTable.hide();\n        } else {\n          $join1SelectedItem.on(VIS.Events.onTouchStartOrClick, function () {\n            let $join1ItemVal = $(this).attr('value');\n            $(this).parent($filterColumnName).prev($baseTableInputBlock).find($baseTableJoinInput).val($join1ItemVal);\n            $join1SelectedItem.removeClass('active');\n            $(this).addClass('active');\n            var activeItemDataType = $joinOnFieldColumnMainTable.children('.vas-column-list-item.active').attr('datatype');\n            $(this).parent($joinOnFieldColumnMainTable).prev($baseTableInputBlock).find($baseTableJoinInput).attr('datatype', activeItemDataType);\n            $joinOnFieldColumnMainTable.hide();\n          });\n          //onTopSelCheckbox($joinOnFieldColumnMainTable);\n        }\n      });\n\n      /*searching the column of join table when user start typing*/\n\n      $joiningTableInput.on(\"keyup\", function () {\n        var $join2DropdownVal = $(this).val().toLowerCase();\n        var $join2SelectedItem = $joinOnFieldColumnJoinTable.children('.vas-column-list-item');\n        var $join2SelectedItemLength = $join2SelectedItem.length;\n        if ($join2SelectedItemLength > 0) {\n          $joinOnFieldColumnJoinTable.show();\n          $join2SelectedItem.filter(function () {\n            $(this).toggle($(this).text().toLowerCase().indexOf($join2DropdownVal) > -1);\n          });\n        }\n        if (!$join2SelectedItem.is(':visible')) {\n          $joinOnFieldColumnJoinTable.hide();\n        } else {\n          $join2SelectedItem.on(VIS.Events.onTouchStartOrClick, function () {\n            let $join2ItemVal = $(this).attr('value');\n            $(this).parent($joinOnFieldColumnJoinTable).prev($joiningTableInputBlock).find($joiningTableInput).val($join2ItemVal);\n            $join2SelectedItem.removeClass('active');\n            $(this).addClass('active');\n            var activeItemDataType = $joinOnFieldColumnJoinTable.children('.vas-column-list-item.active').attr('datatype');\n            $(this).parent($joinOnFieldColumnJoinTable).prev($joiningTableInputBlock).find($joiningTableInput).attr('datatype', activeItemDataType);\n            $joinOnFieldColumnJoinTable.hide();\n          });\n          //onTopSelCheckbox($joinOnFieldColumnJoinTable);\n        }\n      });\n\n      /*\r\n        Click event on Test SQL Button \r\n        to show the result in Grid with \r\n        validation on input textbox in which\r\n        user will write the SQL query in \r\n        SQL Tab\r\n      */\n\n      $testSqlBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        if ($selectQuery && $selectQuery.text().length > 0) {\n          if ($sqlBtn.hasClass('active')) {\n            $(this).toggleClass('vas-show-grid');\n            if (!$(this).hasClass('vas-show-grid')) {\n              $(this).val(testSQL);\n              $queryResultGrid.hide();\n              $query.show();\n              $selectQuery.show();\n              emailContentDiv.show();\n              $sqlContent.find($saveBtn).hide();\n              $sqlResultDiv.hide();\n              $sqlContent.removeClass('vas-grid-height');\n            } else {\n              $(this).val(sqlQuery);\n              $sqlContent.append($saveBtn);\n              $sqlContent.find($saveBtn).show();\n              $sqlContent.addClass('vas-grid-height');\n              var query = $selectQuery.text();\n              var match = query.match(/\\bFROM\\b\\s+([a-zA-Z0-9_.\"]+)/);\n              if (match && match[1]) {\n                mainTableName = match[1].replace(/\"/g, ''); // remove quotes if any\n                getResult(query);\n              } else {\n                VIS.ADialog.error(\"\", \"\", VIS.Msg.getMsg(\"No table found\"));\n              }\n            }\n          }\n        } else {\n          $sqlResultDiv.text(VIS.Msg.getMsg(\"VAS_WriteQuery\"));\n          $sqlResultDiv.addClass('vas-sql-result-error');\n          $sqlResultDiv.show();\n        }\n      });\n\n      /*\r\n         Click event on Test SQL Generator Button \r\n         to show the result in Grid with \r\n         validation in which user will select \r\n         the Window/Tab and Column in \r\n         SQL Generator Tab\r\n      */\n\n      $testSqlGeneratorBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        var sqlGeneratorColumn2 = $sqlGeneratorContent.find('.vas-sqlgenerator-column2');\n        var hideSaveGeneratorBtn = sqlGeneratorColumn2.find($saveGeneratorBtn);\n        if ($selectGeneratorQuery.text() != '') {\n          if ($sqlGeneratorBtn.hasClass('active')) {\n            $(this).toggleClass('vas-show-grid');\n            if (!$(this).hasClass('vas-show-grid')) {\n              $(this).val(testSQL);\n              $selectGeneratorQuery.show();\n              gridDiv2.hide();\n              $sqlGeneratorQueryResultGrid.hide();\n              hideSaveGeneratorBtn.hide();\n              $sqlResultDiv.hide();\n              pagingPlusBtnDiv.addClass('d-none');\n              pagingPlusBtnDiv.removeClass('d-flex justify-content-between align-items-center');\n            } else {\n              $(this).val(sqlQuery);\n              $selectGeneratorQuery.hide();\n              gridDiv2.show();\n              $sqlGeneratorQueryResultGrid.show();\n              sqlGeneratorColumn2.append(pagingPlusBtnDiv);\n              pagingPlusBtnDiv.append(pagingDiv).append($saveGeneratorBtn);\n              sqlGeneratorColumn2.find($saveGeneratorBtn).show();\n              var query = $selectGeneratorQuery.text();\n              getResult(query);\n              pagePrev = $root.find('#VAS_pageUp' + $self.windowNo);\n              pageNext = $root.find('#VAS_pageDown' + $self.windowNo);\n              pagePrev.addClass('VA107-disablePage');\n              pagePrev.parents('li').css('pointer-events', 'none');\n              pagePrev.off(VIS.Events.onTouchStartOrClick);\n              pagePrev.on(VIS.Events.onTouchStartOrClick, function () {\n                pageNo = pagingDiv.find(\"select\").val() - 1;\n                if (pageNo <= 1) {\n                  pagePrev.css(\"opacity\", \"0.6\");\n                  pageNext.removeClass('VA107-disablePage');\n                  pageNext.css(\"opacity\", \"1\");\n                  if (pageNo < 1) {\n                    return;\n                  }\n                } else if (pageNo > 1) {\n                  pagePrev.removeClass('VA107-disablePage');\n                  pagePrev.parents('li').css('pointer-events', 'all');\n                  pageNext.removeClass('VA107-disablePage');\n                  pagePrev.css(\"opacity\", \"1\");\n                  pageNext.css(\"opacity\", \"1\");\n                }\n                pagingDiv.find(\"select\").val(pageNo);\n                var query = $selectGeneratorQuery.text();\n                getResult(query);\n              });\n              pageNext.off(VIS.Events.onTouchStartOrClick);\n              pageNext.on(VIS.Events.onTouchStartOrClick, function () {\n                pageNo = parseInt(pagingDiv.find(\"select\").val()) + 1;\n                pagePrev.removeClass('VA107-disablePage');\n                pagePrev.parents('li').css('pointer-events', 'all');\n                pagePrev.css(\"opacity\", \"1\");\n                if (pageNo >= totalPages) {\n                  pageNext.addClass('VA107-disablePage');\n                  pageNext.css(\"opacity\", \"0.6\");\n                  if (pageNo > totalPages) {\n                    return;\n                  }\n                }\n                pagingDiv.find(\"select\").val(pageNo);\n                var query = $selectGeneratorQuery.text();\n                getResult(query);\n              });\n            }\n          }\n        } else {\n          $sqlResultDiv.show();\n          $sqlResultDiv.text(VIS.Msg.getMsg(\"VAS_DisplayQuery\"));\n          $sqlResultDiv.addClass('vas-sql-result-error');\n        }\n        $fieldColDropdown.val('');\n        $fieldJoinColDropdown.val('');\n      });\n      pagingDiv.find(\"select\").on(\"change\", function () {\n        pageNo = parseInt($(this).val());\n        if (pageNo >= totalPages) {\n          pageNext.css(\"opacity\", \"0.6\");\n          pageNext.addClass(\"VA107-disablePage\");\n          pagePrev.css(\"opacity\", \"1\");\n          pagePrev.removeClass(\"VA107-disablePage\");\n        } else {\n          pageNext.css(\"opacity\", \"1\");\n          pageNext.removeClass(\"VA107-disablePage\");\n        }\n        if (pageNo <= 1) {\n          pagePrev.css(\"opacity\", \"0.6\");\n          pagePrev.addClass(\"VA107-disablePage\");\n          pageNext.css(\"opacity\", \"1\");\n          pageNext.removeClass(\"VA107-disablePage\");\n        } else {\n          pagePrev.css(\"opacity\", \"1\");\n          pagePrev.removeClass(\"VA107-disablePage\");\n        }\n        var query = $selectGeneratorQuery.text();\n        getResult(query);\n        /*   selectPage.find(\"option[value='\" + pageNo + \"']\").prop(\"selected\", true);*/\n      });\n\n      /*\r\n       Click event on Arrow\r\n       to display the data in form of multiple checkboxes \r\n      */\n      $multiSelectArrow.on(VIS.Events.onTouchStartOrClick, function () {\n        let windowFieldItem = $checkBoxes.children('.vas-column-list-item').length;\n        let $windowMultiSelectItem = $checkBoxes.children('.vas-column-list-item');\n        if (windowFieldItem > 0) {\n          $checkBoxes.toggle();\n          $checkBoxes.toggleClass('vas-open-col');\n          $windowMultiSelectItem.show();\n        }\n        if (!$windowMultiSelectItem.is(':visible')) {\n          $fieldColDropdown.val('');\n          $checkBoxes.hide();\n        }\n        //onTopSelCheckbox($checkBoxes);\n      });\n      $sortSelectArrow.on(VIS.Events.onTouchStartOrClick, function () {\n        let $sortByItemLength = $sortByDropdown.children('.vas-column-list-item').length;\n        let $sortByItem = $sortByDropdown.children('.vas-column-list-item');\n        if ($sortByItemLength > 0) {\n          if ($sortByDropdown.css('display') === 'none') {\n            $sortByDropdown.css({\n              'display': 'flex',\n              'flex-wrap': 'wrap'\n            });\n          } else {\n            $sortByDropdown.css('display', 'none');\n          }\n          $sortByItem.show();\n        }\n        if (!$sortByItem.is(':visible')) {\n          $sortByDropdown.hide();\n        } else {\n          $sortByItem.on(VIS.Events.onTouchStartOrClick, function () {\n            let $sortByItemVal = $(this).attr('value');\n            $(this).parent($sortByDropdown).prev($sortInputBlock).find($sortColumnInput).val($sortByItemVal);\n            $sortByDropdown.hide();\n          });\n        }\n      });\n      $baseTableSelectArrow.on(VIS.Events.onTouchStartOrClick, function () {\n        let $join1Length = $joinOnFieldColumnMainTable.children('.vas-column-list-item').length;\n        let $join1Item = $joinOnFieldColumnMainTable.children('.vas-column-list-item');\n        if ($join1Length > 0) {\n          $joinOnFieldColumnMainTable.toggle();\n          $join1Item.show();\n        }\n        if (!$join1Item.is(':visible')) {\n          $joinOnFieldColumnMainTable.hide();\n        } else {\n          $join1Item.on(VIS.Events.onTouchStartOrClick, function () {\n            let $join1ItemVal = $(this).attr('value');\n            $(this).parent($joinOnFieldColumnMainTable).prev($baseTableInputBlock).find($baseTableJoinInput).val($join1ItemVal);\n            $joinOnFieldColumnMainTable.hide();\n          });\n        }\n      });\n      $joiningTableSelectArrow.on(VIS.Events.onTouchStartOrClick, function () {\n        let $join2Length = $joinOnFieldColumnJoinTable.children('.vas-column-list-item').length;\n        let $join2Item = $joinOnFieldColumnJoinTable.children('.vas-column-list-item');\n        if ($join2Length > 0) {\n          //$joinOnFieldColumnJoinTable.toggle();\n          if ($joinOnFieldColumnJoinTable.css('display') === 'none') {\n            $joinOnFieldColumnJoinTable.css({\n              'display': 'flex',\n              'flex-wrap': 'wrap',\n              'float': 'none'\n            });\n          } else {\n            $joinOnFieldColumnJoinTable.css('display', 'none');\n          }\n          $join2Item.show();\n        }\n        if (!$join2Item.is(':visible')) {\n          $joinOnFieldColumnJoinTable.hide();\n        } else {\n          $join2Item.on(VIS.Events.onTouchStartOrClick, function () {\n            let $join2ItemVal = $(this).attr('value');\n            $(this).parent($joinOnFieldColumnJoinTable).prev($joiningTableInputBlock).find($joiningTableInput).val($join2ItemVal);\n            $joinOnFieldColumnJoinTable.hide();\n          });\n        }\n      });\n      $filterSelectArrow.off(VIS.Events.onTouchStartOrClick);\n      $filterSelectArrow.on(VIS.Events.onTouchStartOrClick, function () {\n        var $filterSelectedItem = $filterColumnName.children('.vas-column-list-item');\n        let $filterItem = $filterColumnName.children('.vas-column-list-item');\n        if ($filterSelectedItem.length > 0) {\n          $filterColumnName.toggle();\n          $filterItem.show();\n        }\n        if (!$filterItem.is(':visible')) {\n          $filterColumnName.hide();\n        } else {\n          $filterItem.off(VIS.Events.onTouchStartOrClick);\n          $filterItem.on(VIS.Events.onTouchStartOrClick, function () {\n            filterOnChange($(this), $filterSelectedItem);\n          });\n        }\n      });\n      $filterNewColumnArrow.on(VIS.Events.onTouchStartOrClick, function () {\n        var $filterNewColumnSelectedItem = $filterCol2Block.children('.vas-column-list-item');\n        let $filterItem = $filterCol2Block.children('.vas-column-list-item');\n        if ($filterNewColumnSelectedItem.length > 0) {\n          $filterCol2Block.toggle();\n          $filterItem.show();\n        }\n        if (!$filterItem.is(':visible')) {\n          $filterCol2Block.hide();\n        }\n      });\n\n      /* Click Event for Filter Value Select Arrow */\n      $filterValSelectArrow.on(VIS.Events.onTouchStartOrClick, function () {\n        var $filterValSelectedItem = $filterValDropdown.children('.vas-filterValItem');\n        $(this).toggleClass('vas-showFilterVal');\n        if ($filterValSelectedItem.length > 0) {\n          $filterValDropdown.toggle();\n          if (!$(this).hasClass('vas-showFilterVal')) {\n            // $filterValBlock.find('input').val('');\n            $filterValSelectedItem.removeClass('vas-selected-filterVal');\n          }\n        }\n        if (!$filterValSelectedItem.is(':visible')) {\n          $filterValDropdown.hide();\n        }\n      });\n\n      /*Change the control on basic of column datatype*/\n      $multiSelectJoinArrow.on(VIS.Events.onTouchStartOrClick, function () {\n        let joinFieldItem = $joinMultiSelect.children('.vas-column-list-item').length;\n        let $joinMultiSelectItem = $joinMultiSelect.children('.vas-column-list-item');\n        if (joinFieldItem > 0) {\n          $joinMultiSelect.toggle();\n          $joinMultiSelectItem.show();\n        }\n        if (!$joinMultiSelectItem.is(':visible')) {\n          $fieldJoinColDropdown.val('');\n          $joinMultiSelect.hide();\n        }\n        //onTopSelCheckbox($joinMultiSelect);\n      });\n\n      /*\r\n         Function to collect filter data to display\r\n         on UI when user select the\r\n         dropdowns in Filter Accordion\r\n      */\n\n      let filterArray = [];\n      function readFilterData() {\n        var data = '';\n        var divId = $filterValInput.attr('value');\n        var updatedFilterValue = $filterValue.val();\n        for (let obj of filterArray) {\n          if (obj.filterValue.startsWith(\"'\") && obj.filterValue.endsWith(\"'\")) {\n            obj.filterValue = obj.filterValue.slice(1, -1);\n          }\n        }\n        for (var i = 0; i < filterArray.length; i++) {\n          var dataType = filterArray[i].dataType;\n          data += '<div class=\"vas-filter-item\" value=\"' + filterArray[i].filterVal + '\" colVersion=\"' + filterArray[i].columnVersion + '\" dataType=\"' + dataType + '\" filterId =\"' + filterArray[i].filterValue + '\" index=\"' + i + '\">';\n          data += '<div class=\"vas-filter-whitebg\" style=\"background-color:' + randomColor() + '\">';\n          data += '<div class=\"vas-filters-block\">';\n          data += '<div class=\"vas-filter-andor-value\" style=display:none;>' + filterArray[i].filterAndOrValue + '</div>';\n          data += '<div class=\"vas-filter-whereExit\" style=display:none;>' + filterArray[i].whereExist + '</div>';\n          data += '<div class=\"vas-filter-datatype\" style=display:none;>' + dataType + '</div>';\n          if ((VIS.DisplayType.Date == dataType || VIS.DisplayType.DateTime == dataType) && filterArray[i].chkDynamic == 'N') {\n            data += '<div class=\"vas-selecttable\" title=' + \" TO_CHAR(\" + filterArray[i].filterVal + \", 'yyyy-mm-dd')\" + '>' + \" TO_CHAR(\" + filterArray[i].filterVal + \", 'yyyy-mm-dd')\" + '</div>';\n          }\n          //else if (VIS.DisplayType.DateTime == dataType || VIS.DisplayType.Date == dataType && filterArray[i].columnVersion == \"oldColumn\") {\n          //    data += '<div class=\"vas-selecttable\" title=' + \" TO_CHAR(\" + filterArray[i].filterVal + \", 'yyyy-mm-dd')\" + '>' + \" TO_CHAR(\" + filterArray[i].filterVal + \", 'yyyy-mm-dd')\" +  '</div>';\n          //    data += '<span class=\"vas-filter-price-value\">' + filterArray[i].filterValue + '</span>';\n          //}\n          else {\n            data += '<div class=\"vas-selecttable\" title=' + filterArray[i].filterVal + '>' + filterArray[i].filterVal + '</div>';\n          }\n          data += '<span class=\"vas-filter-condition\">' + \" \" + filterArray[i].filterCondition + \" \" + '</span>';\n          if (filterArray[i].filterCondition == 'IS NULL' || filterArray[i].filterCondition == 'IS NOT NULL') {\n            data += '<span class=\"vas-filter-price-value\"></span>';\n          } else if (VIS.DisplayType.Integer == dataType || VIS.DisplayType.ID == dataType || VIS.DisplayType.IsSearch == dataType || filterArray[i].chkDynamic == 'Y') {\n            data += '<span class=\"vas-filter-price-value\">' + filterArray[i].filterValue + '</span>';\n            //data += '<span class=\"vas-filter-price-name\">' + filterArray[i].columnVal + '</span>';\n          } else if (VIS.DisplayType.String == dataType || VIS.DisplayType.List == dataType || VIS.DisplayType.Text == dataType || VIS.DisplayType.TextLong == dataType || VIS.DisplayType.DateTime == dataType || VIS.DisplayType.Date == dataType) {\n            data += '<span class=\"vas-filter-price-value\">' + \"'\" + filterArray[i].filterValue + \"'\" + '</span>';\n          } else if (VIS.DisplayType.YesNo == dataType && filterArray[i].columnVersion == 'oldColumn') {\n            data += '<span class=\"vas-filter-price-value\">' + \"'\" + filterArray[i].filterValue.substring(1, filterArray[i].filterValue.length - 1) + \"'\" + '</span>';\n          }\n          // Added the condition if display type is lookup datatype\n          else if (VIS.DisplayType.IsLookup(dataType)) {\n            data += '<span class=\"vas-filter-price-value d-none\">' + filterArray[i].filterValue + '</span>';\n            data += '<span class=\"vas-filter-price-name\">' + filterArray[i].columnVal + '</span>';\n          } else {\n            data += '<span class=\"vas-filter-price-value\" columnId=' + filterArray[i].filterValue + '>' + filterArray[i].filterValue + '</span>';\n          }\n          data += '<span class=\"vas-columnVersion d-none\">' + filterArray[i].columnVersion + '</span>';\n          data += '</div>';\n          data += '<div class=\"vas-filters-editdelete-btns\">';\n          //if (VIS.DisplayType.Date != dataType && VIS.DisplayType.DateTime != dataType && filterArray[i].filterCondition!='IN') {\n          if (VIS.DisplayType.Date != dataType && VIS.DisplayType.DateTime != dataType) {\n            data += '<div><i class=\"vis vis-edit\"></i></div>';\n          } else {\n            data += '<div><i class=\"vis vis-edit\"></i></div>';\n          }\n          data += '<div><i class=\"vis vis-delete\"></i></div>';\n          data += '</div>';\n          data += '</div>';\n          data += '</div>';\n        }\n        $filters.append(data);\n        console.log(filterArray);\n      }\n\n      /*\r\n         Function to add filters to display\r\n         on UI when user select the\r\n         dropdowns in Filter Accordion\r\n      */\n\n      function addFilter(value, dataType) {\n        // var filterVal = $filterColumnName.children('.vas-column-list-item.active').attr('value');\n        var filterVal = $filterColumnInput.val();\n        var columnVal = $filterValInput.val();\n        var columnVersion = $filterValInput.data('input');\n        if ($filterNewColumn.css('display') != 'none') {\n          columnVal = $filterNewColumn.find('input').val();\n          columnVersion = $filterNewColumn.find('input').data('input');\n        }\n        var chkDynamic = \"N\";\n        let filterCondition = $filterOperator.find('option:selected').val();\n        var filterValue = value;\n        if (autoComValue != null) {\n          filterValue = autoComValue;\n          autoComValue = null;\n        }\n        var columnIndex = $selectGeneratorQuery.text().indexOf(filterVal);\n        var beforeCondition = $selectGeneratorQuery.text().slice(columnIndex - 6, columnIndex);\n        var whereExist = false;\n        if (beforeCondition.indexOf('WHERE') > -1) {\n          whereExist = true;\n        }\n        //var dataType = $filterColumnName.children('.vas-column-list-item.active').attr(\"datatype\");\n        if (VIS.DisplayType.YesNo == dataType) {\n          if ($filterValue.is(':checked')) {\n            filterValue = \"Y\";\n          } else {\n            filterValue = \"N\";\n          }\n        }\n        if (isDynamic.is(':checked')) {\n          chkDynamic = \"Y\";\n        }\n        /*if (filterCondition == 'IN') {\r\n            filterValue = \"(\"+$inDropdownVal+\")\";\r\n        }*/\n        let filterAndOrValue = $filterConditionV2.find('option:selected').val();\n        const filterObj = {\n          filterVal,\n          filterCondition,\n          filterValue,\n          filterAndOrValue,\n          dataType,\n          whereExist,\n          chkDynamic,\n          columnVal,\n          columnVersion\n        };\n        filterArray.push(filterObj);\n        $filters.empty();\n        readFilterData();\n        if ($filters && $filters.length > 0) {\n          $filters.find('.vas-filter-item').addClass('vas-filters-row');\n        }\n      }\n\n      /*inOperatorArray = [];\r\n        function readInOperatorData() {                \r\n          $inDropdownVal.push($filterValue.val());\r\n          $inOperatorValues.empty();\r\n            for (var i = 0; i < $inDropdownVal.length; i++) {\r\n              if (inOperatorArray[i]) {\r\n                  inOperatorData += '<div class=\"vas-selecttable\">' + $inDropdownVal[i] +\" \"+ '</div>';\r\n                  inOperatorData += '</div>';\r\n              }\r\n          }\r\n          $inOperatorValues.append($inDropdownVal);\r\n      }\r\n      $inOperatorArrow.on(VIS.Events.onTouchStartOrClick, function (event) {\r\n          readInOperatorData();\r\n      });*/\n\n      /*\r\n         Click event on Edit and Delete Buttons \r\n         for Filters in Filter Accordion\r\n      */\n\n      $filters.on(VIS.Events.onTouchStartOrClick, function (event) {\n        var filterItem = $(event.target).parents('.vas-filter-item');\n        if ($(event.target).hasClass('vis-delete')) {\n          deleteFilter();\n          filterArray.splice(filterItem.index(), 1);\n          filterItem.remove();\n          if ($('.vas-filters .vas-filter-item').length < 2) {\n            $('.vas-filters .vas-filter-item').removeClass('vas-first-delete-icon');\n          }\n          $filters.empty();\n          readFilterData();\n          if ($filters && $filters.length > 0) {\n            $filters.find('.vas-filter-item').addClass('vas-filters-row');\n          }\n          $sqlResultDiv.hide();\n        }\n        if ($(event.target).hasClass('vis-edit')) {\n          $addFilterBtn.val(VIS.Msg.getMsg(\"VAS_UpdateFilter\"));\n          updateFilter();\n          var filterSelectTableVal = filterItem.find(\".vas-selecttable\").text();\n          var filterValue = filterItem.find(\".vas-filter-price-value\").text();\n          var updatedword = filterValue.replace(/^'|'$/g, '');\n          filterItem.siblings().find(\".vas-filter-condition\").removeClass('active');\n          filterItem.siblings().find(\".vas-filter-price-value\").removeClass('active');\n          filterItem.siblings().find(\".vas-filter-andor-value\").removeClass('active');\n          filterItem.siblings().find(\".vas-filter-price-name\").removeClass('active');\n          filterItem.siblings().find(\".vas-selecttable\").removeClass('active');\n          filterItem.find(\".vas-filter-condition\").addClass('active');\n          filterItem.find(\".vas-filter-price-value\").addClass('active');\n          filterItem.find(\".vas-filter-andor-value\").addClass('active');\n          filterItem.find(\".vas-filter-price-name\").addClass('active');\n          filterItem.find(\".vas-selecttable\").addClass('active');\n          filterItem.siblings().removeClass('active');\n          filterItem.addClass('active');\n          if (filterItem.attr('datatype') != 15 && filterItem.attr('datatype') != 16) {\n            $filterColumnInput.val(filterSelectTableVal);\n          } else {\n            var itemValue = $filters.children('.vas-filter-item.active').attr('value');\n            $filterColumnInput.val(itemValue);\n          }\n          var filterCondition = filterItem.find(\".vas-filter-condition.active\").text().trim();\n          $filterOperator.val(filterCondition);\n          $filterValue.val(updatedword);\n          if (filterValue == \"'Y'\") {\n            $filterValue.prop('checked', true);\n          }\n          $addFilterBtn.addClass('vas-edit-btn');\n          // $filterSelectArrow.css('pointer-events', 'none');\n\n          let $filterPriceItem = $filterColumnName.children('.vas-column-list-item');\n          $filterPriceItem.each(function () {\n            let filterPriceEditedVal = $(this).attr('value');\n            if (filterPriceEditedVal === filterSelectTableVal) {\n              $(this).trigger('click');\n            }\n          });\n          $sqlResultDiv.hide();\n\n          // Edit the paricular value based on specific datatype\n          var versionInfo = filterItem.attr('colversion');\n          var nameText = filterItem.find(\".vas-filter-price-name.active\").text();\n          var colId = filterItem.find(\".vas-filter-price-value.active\").text();\n\n          // Show the Column textbox if data types are 12, 29 etc..\n          var activeItemDataType = $filterColumnName.children('.vas-column-list-item.active').attr('datatype');\n          if (activeItemDataType == 12 || activeItemDataType == 29 || activeItemDataType == 22 || activeItemDataType == 47) {\n            $filterValueDiv.find('input').val(colId);\n          }\n          if (filterItem.hasClass('active')) {\n            var editDataType = filterItem.find(\".vas-filter-datatype\").text();\n            $filterColumnInput.attr('datatype', editDataType);\n          }\n\n          // Set the input value & attribute value based on old/new columns\n          if (versionInfo == \"newColumn\") {\n            $('.vas-select-col[data-input=' + versionInfo + ']').parents('.vas-filterofMultipleCols').find(switchValueBtn).trigger('click');\n            //$filterNewColumnInput.val(oldColText);\n            $filterNewColumnInput.val(colId);\n            $filterNewColumnInput.attr('columnid', colId);\n          } else if (versionInfo == \"oldColumn\") {\n            if (nameText) {\n              $filterValInput.val(nameText);\n            } else {\n              $filterValInput.val(colId);\n            }\n            $filterValInput.attr('columnid', colId);\n          }\n        }\n      });\n\n      /*\r\n         Function to update the filter\r\n         in Filter Accordion\r\n      */\n\n      function updateFilter() {\n        var filterItem = $(event.target).parents('.vas-filter-item');\n        var filterValue = filterItem.find(\".vas-filter-price-value\").text();\n        var filterCondition = filterItem.find(\".vas-filter-condition\").text();\n        var andOrOperator = filterItem.find(\".vas-filter-andor-value\").text();\n        var displayType = filterItem.find(\".vas-filter-datatype\").text();\n        var filterColumn = filterItem.find(\".vas-selecttable\").text();\n        filterArrayIndex = $(event.target).parents('.vas-filter-item').attr('index');\n        if (displayType == VIS.DisplayType.Date || displayType == VIS.DisplayType.DateTime) {\n          $filterValue.attr('type', 'date');\n          $filterValue.prev('label').removeClass('vas-label-space');\n        } else if (displayType == VIS.DisplayType.Integer || displayType == VIS.DisplayType.ID || displayType == VIS.DisplayType.Amount) {\n          $filterValue.attr('type', 'number');\n          $filterValue.prev('label').removeClass('vas-label-space');\n        } else if (displayType == VIS.DisplayType.YesNo) {\n          $filterValue.attr('type', 'checkbox');\n          $filterValue.prev('label').addClass('vas-label-space');\n        } else {\n          $filterValue.attr('type', 'textbox');\n          $filterValue.prev('label').removeClass('vas-label-space');\n        }\n        if (filterArrayIndex == 0) {\n          var oldFilterVal = filterColumn + \" \" + filterCondition + \" \" + filterValue;\n        } else {\n          var oldFilterVal = andOrOperator + \" \" + filterColumn + \" \" + filterCondition + \" \" + filterValue;\n        }\n        oldFilterVal = oldFilterVal.replace(/\\s{2,}/g, ' ');\n        $filterEditDiv.text(oldFilterVal);\n        filterIndex = filterItem.attr('index');\n      }\n\n      /*\r\n         Click event on SQL Button\r\n         to display UI as per design\r\n      */\n\n      $sqlBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        $sqlResultDiv.hide();\n        $sqlContent.show();\n        $testSqlBtn.show();\n        $testSqlGeneratorBtn.hide();\n        Active(this);\n        $sqlGeneratorContent.hide();\n        sqlGenerateFlag = false;\n        sqlFlag = true;\n      });\n\n      /*\r\n        Click event on SQL Generator Button\r\n        to display UI as per design\r\n      */\n\n      $sqlGeneratorBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        let contentHeight = $contentArea.parents('.vis-ad-w-p-ap-tp-o-b-content').height();\n        $contentArea.parents('.vis-ad-w-p-ap-tp-o-b-content').css({\n          \"height\": contentHeight,\n          \"overflow-y\": \"auto\"\n        });\n        $sqlResultDiv.hide();\n        $sqlGeneratorQueryResultGrid.hide();\n        $sqlContent.hide();\n        $testSqlGeneratorBtn.show();\n        $testSqlBtn.hide();\n        Active(this);\n        $sqlGeneratorContent.show();\n        sqlGenerateFlag = true;\n        sqlFlag = false;\n      });\n      $sqlGeneratorBtn.trigger('click');\n\n      /*\r\n         Joins Accordion\r\n      */\n\n      $joinsDiv.on(VIS.Events.onTouchStartOrClick, function () {\n        $(this).siblings().removeClass('active');\n        $(this).toggleClass('active');\n      });\n\n      /*\r\n         Filters Accordion\r\n      */\n      $filterDiv.on(VIS.Events.onTouchStartOrClick, function () {\n        $(this).siblings().removeClass('active');\n        $(this).toggleClass('active');\n      });\n\n      /*\r\n         Sort Accordion\r\n      */\n\n      $sortByDiv.on(VIS.Events.onTouchStartOrClick, function () {\n        $(this).siblings().removeClass('active');\n        $(this).toggleClass('active');\n      });\n\n      /*\r\n         Click event on Window/Field Column \r\n         to display the data in form of multiple checkboxes \r\n      */\n\n      $windowFieldColumnSelect.on(VIS.Events.onTouchStartOrClick, function () {\n        let windowFieldItem = $checkBoxes.children('.vas-column-list-item').length;\n        if (windowFieldItem > 0) {\n          $(this).next().toggle();\n        }\n      });\n\n      /*\r\n         Click event on Save Button \r\n         to save the query\r\n      */\n\n      $saveBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        var query = $selectQuery.text().trim();\n        alertID = VIS.context.getContext($self.windowNo, 'AD_Alert_ID');\n        if (alertID > 0) {\n          UpdateAlertRule(query);\n        }\n      });\n\n      /*\r\n        Click event on Save Generator Button \r\n        to save the query\r\n      */\n\n      $saveGeneratorBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        var query = $selectGeneratorQuery.text().trim();\n        alertID = VIS.context.getContext($self.windowNo, 'AD_Alert_ID');\n        if (alertID > 0) {\n          UpdateAlertRule(query);\n        }\n      });\n\n      /*\r\n         Click event on Add Filter Button\r\n         to add/update filters\r\n      */\n\n      // Event handler for adding or editing filter\n      $addFilterBtn.on(VIS.Events.onTouchStartOrClick, function (event) {\n        var filterCondition = $filterOperator.val();\n        var filterColumn = $filterColumnInput.val();\n        var updatedFilterValue = $filterValue.val();\n        var displayType = $filterColumnInput.attr(\"datatype\");\n\n        // Check if the filter value div is visible\n        if ($filterValueDiv.css('display') != 'none') {\n          if (autoComValue != null) {\n            updatedFilterValue = autoComValue;\n          }\n\n          // Check if the display type is Date or DateTime\n          if (VIS.DisplayType.Date == displayType || VIS.DisplayType.DateTime == displayType) {\n            if (!isDynamic.is(':checked') && updatedFilterValue.length > 0) {\n              filterColumn += \"TO_CHAR(\" + filterColumn + \", 'yyyy-mm-dd')\";\n              updatedFilterValue = \"'\" + updatedFilterValue + \"'\";\n            }\n            if (isDynamic.is(':checked')) {\n              updatedFilterValue = getDynamicValue($filterDateList[0].selectedIndex);\n              $filterOperator.val('>=');\n              filterCondition = \">=\";\n            }\n          }\n\n          // Handle Yes/No condition\n          if (displayType == VIS.DisplayType.YesNo) {\n            updatedFilterValue = $filterValue.is(':checked') ? \"'Y'\" : \"'N'\";\n          }\n\n          // Handle other types like String, List, Text\n          if (VIS.DisplayType.String == displayType || VIS.DisplayType.List == displayType || VIS.DisplayType.Text == displayType || VIS.DisplayType.TextLong == displayType) {\n            updatedFilterValue = \"'\" + updatedFilterValue + \"'\";\n          }\n        }\n        // Handling if filter value exchange icon block is visible\n        else if ($filterValExchangeIconBlock.css('display') != 'none' && $filterValExchangeIconBlock.find('input').val() != '') {\n          updatedFilterValue = $filterValExchangeIconBlock.find('input').attr('columnid');\n        }\n        // Handling if a new column is displayed\n        else if ($filterNewColumn.css('display') != 'none') {\n          updatedFilterValue = $filterNewColumn.find('input').val();\n          displayType = 13;\n        }\n\n        // Make sure all necessary filter values are provided before adding filter\n        if (filterColumn != '' && filterCondition != '' && filterCondition != undefined && updatedFilterValue && updatedFilterValue.length > 0) {\n          var WhereCondition = '';\n          // Set WHERE if it hasn't been set yet\n          if (andFlag && $selectGeneratorQuery.text().indexOf('WHERE') == -1) {\n            WhereCondition = \"WHERE\";\n          } else {\n            WhereCondition = $filterConditionV2.val();\n          }\n\n          // Edit button logic\n          if ($(this).hasClass('vas-edit-btn')) {\n            $filters.empty();\n\n            // Get the updated filter condition and operator\n            var updatedFilterConditionValue = $filterOperator.find('option:selected').val();\n            $filters.find('.vas-filter-price-value.active').parents('.vas-filter-item').attr(\"filterId\", updatedFilterValue);\n            var andOrOperator = $filterConditionV2.find('option:selected').val();\n            var oldQuery = $filterEditDiv.text();\n            var sqlGenQuery = $selectGeneratorQuery.text();\n\n            // Disable dynamic filter inputs while editing\n            txtDay.prop(\"readonly\", true);\n            txtMonth.prop(\"readonly\", true);\n            txtYear.prop(\"readonly\", true);\n            isDynamic.prop(\"disabled\", true);\n            $filterDateList.prop(\"disabled\", true);\n\n            // Set dynamic value if dynamic checkbox is checked\n            var chkDynamic = isDynamic.is(':checked') ? \"Y\" : \"N\";\n\n            // Enable dynamic checkbox after edit\n            isDynamic.prop(\"disabled\", false);\n\n            // Handle SQL query generation logic\n            var columnVersion = $filterValInput.data('input');\n            if ($filterNewColumn.css('display') != 'none') {\n              reqFilterVal = $filterNewColumn.find('input').val();\n              columnVersion = $filterNewColumn.find('input').data('input');\n            }\n            var dateType = $filterColumnInput.attr('datatype');\n            var newQuery = generateNewQuery(dateType, filterColumn, updatedFilterValue, updatedFilterConditionValue, andOrOperator, filterArrayIndex);\n\n            // Update SQL generator query\n            sqlGenQuery = sqlGenQuery.replace(oldQuery, newQuery);\n            $selectGeneratorQuery.text(sqlGenQuery);\n\n            // Update filterArray with new values\n            var dataTypeReq = $filterColumnInput.attr('datatype');\n            var reqFilterVal = $filterValInput.val();\n            var regex = /(.+)TO_CHAR/;\n            var match = filterColumn.match(regex);\n            if (filterIndex > -1 && filterArray[filterIndex] && typeof filterArray[filterIndex] === 'object') {\n              filterArray[filterIndex].filterCondition = updatedFilterConditionValue;\n              filterArray[filterIndex].columnVal = reqFilterVal;\n              filterArray[filterIndex].filterValue = updatedFilterValue;\n              // Update the value in case of date format\n              if (match != null && (dateType == 15 || dateType == 16)) {\n                filterArray[filterIndex].filterVal = match[1];\n              } else {\n                filterArray[filterIndex].filterVal = filterColumn;\n              }\n              filterArray[filterIndex].columnVersion = columnVersion;\n              filterArray[filterIndex].dataType = dataTypeReq;\n              filterArray[filterIndex].filterAndOrValue = andOrOperator;\n              filterArray[filterIndex].chkDynamic = chkDynamic;\n            }\n\n            // Reset UI state after editing\n            $(this).removeClass('vas-edit-btn');\n            ClearText();\n            autoComValue = null;\n            $addFilterBtn.val(VIS.Msg.getMsg(\"VAS_AddFilter\"));\n            $filterSelectArrow.css('pointer-events', 'all');\n            readFilterData(); // Refresh the filter data UI\n          } else {\n            // Add a new filter to the list if edit button wasn't clicked\n            $addFilterDiv.append($filters);\n            ApplyFilter(WhereCondition, updatedFilterValue, displayType);\n            addFilter(updatedFilterValue, displayType);\n\n            // Reset filter input type and hide date div\n            $filterValue.attr('type', 'text');\n            $filterDateDiv.hide();\n          }\n\n          // Reset filter column input after adding or editing filter\n          $filterColumnInput.val('');\n          ClearText();\n        } else {\n          $sqlResultDiv.text(VIS.Msg.getMsg(\"VAS_AddFilterValues\"));\n          $sqlResultDiv.addClass('vas-sql-result-error');\n        }\n      });\n\n      /**\r\n       * Function to generate new SQL query based on filter values\r\n       * @param {any} dateType\r\n       * @param {any} filterColumn\r\n       * @param {any} updatedFilterValue\r\n       * @param {any} updatedFilterConditionValue\r\n       * @param {any} andOrOperator\r\n       * @param {any} filterArrayIndex\r\n       */\n      function generateNewQuery(dateType, filterColumn, updatedFilterValue, updatedFilterConditionValue, andOrOperator, filterArrayIndex) {\n        // Wrap values in quotes based on dateType or other conditions\n        var startIndex = filterColumn.indexOf(\"TO_CHAR(\");\n        var extracted = \"\";\n        var endIndex = \"\";\n        if (startIndex !== -1) {\n          endIndex = filterColumn.indexOf(\")\", startIndex) + 1;\n          extracted = filterColumn.slice(startIndex, endIndex);\n        }\n        var newQuery = \"\";\n        var regex = /(.+)TO_CHAR/;\n        var match = filterColumn.match(regex);\n\n        // Function to handle dateType 17 logic\n        function wrapInQuotes(value, dateType) {\n          return dateType == 17 ? \"'\" + value + \"'\" : value;\n        }\n        if (filterArrayIndex == 0 && dateType != 15 && dateType != 16) {\n          newQuery = \" \" + filterColumn + \" \" + updatedFilterConditionValue + \" \" + wrapInQuotes(updatedFilterValue, dateType);\n        } else if (match != null && (dateType == 15 || dateType == 16)) {\n          if (filterArrayIndex >= 1) {\n            newQuery = andOrOperator + \" \" + extracted + \" \" + updatedFilterConditionValue + \" \" + wrapInQuotes(updatedFilterValue, dateType);\n          } else {\n            newQuery = \" \" + extracted + \" \" + updatedFilterConditionValue + \" \" + wrapInQuotes(updatedFilterValue, dateType);\n          }\n        } else if (match == null && (dateType == 15 || dateType == 16)) {\n          if (filterArrayIndex < 1) {\n            newQuery = \" \" + filterColumn + \" \" + updatedFilterConditionValue + \" \" + wrapInQuotes(updatedFilterValue, dateType);\n          }\n        } else {\n          newQuery = andOrOperator + \" \" + filterColumn + \" \" + updatedFilterConditionValue + \" \" + wrapInQuotes(updatedFilterValue, dateType);\n        }\n        return newQuery.replace(/\\s{2,}/g, ' '); // Clean up extra spaces\n      }\n\n      /*\r\n         Function to collect joins data to display\r\n         on UI when user select the\r\n         dropdowns in Joins Accordion\r\n      */\n      function randomColor() {\n        var hue = Math.floor(Math.random() * 360);\n        var v = Math.floor(Math.random() * 16) + 75;\n        var pastel = 'hsl(' + hue + ', 100%, ' + v + '%)';\n        return pastel;\n      }\n      joinsArray = [];\n      function readJoinsData() {\n        var data = '';\n        for (var i = 0; i < joinsArray.length; i++) {\n          data += '<div class=vas-join-item>';\n          data += '<div class=\"vas-joins-bg\">';\n          data += '<div class=\"vas-joins-block\">';\n          data += '<div class=\"vas-selecttable join-title\" style=\"background-color:' + randomColor() + '\">' + joinsArray[i].joinsDropDown + '</div>';\n          data += '<div class=\"vas-selecttable join-base-table\" style=\"background-color:' + randomColor() + '\">' + joinsArray[i].keyColumn1 + '</div>';\n          data += '<div class=\"vas-selecttable join-tab\" style=\"background-color:' + randomColor() + '\">' + joinsArray[i].joinTableName + '</div>';\n          data += '<div class=\"vas-selecttable join-jointable\" style=\"background-color:' + randomColor() + '\">' + joinsArray[i].keyColumn2 + '</div>';\n          if (joinsArray[i].joinSelectedColumn.length > 0) {\n            data += '<div class=\"vas-selecttable join-joinselectedcolumn\" style=\"background-color:' + randomColor() + '\">' + joinsArray[i].joinSelectedColumn + '</div>';\n          }\n          data += '</div>';\n          // data += '<div class=\"vas-delete-join-btn\">';\n          // data += '<div><i class=\"vis vis-delete\"></i></div>';\n          data += '</div>';\n          data += '</div>';\n          data += '</div>';\n        }\n        $joins.append(data);\n      }\n\n      // Click event on Edit and Delete Buttons for Joins\n\n      /* $joins.on(VIS.Events.onTouchStartOrClick, function (event) {\r\n           if ($(event.target).hasClass('vis-delete')) {\r\n               var deleteJoin = $(event.target).parents('.vas-delete-join-btn');\r\n               var joinsTitle = deleteJoin.prev('.vas-joins-block').find('.join-title').text();\r\n               var joinsTab = deleteJoin.prev('.vas-joins-block').find('.join-tab').text();\r\n               var joinsBaseTable = deleteJoin.prev('.vas-joins-block').find('.join-base-table').text();\r\n               var joinsJoinTable = deleteJoin.prev('.vas-joins-block').find('.join-jointable').text();\r\n               var columnToRemove = \", \" + deleteJoin.prev('.vas-joins-block').find('.join-jo\r\n               \r\n               inselectedcolumn').text();\r\n               var reqJoinQuery = joinsTitle + \" \" + joinsTab + \" \" + 'ON (' + joinsBaseTable + \" = \" + joinsJoinTable + \")\";\r\n               if (joinCommonColumn.length > 0 && joinsJoinTable.length > 0) {\r\n                   var joinTableIndex = joinsJoinTable.indexOf('.');\r\n                   if (joinTableIndex > 0) {\r\n                       for (var i = joinCommonColumn.length - 1; i >= 0; i--) {\r\n                           if (joinCommonColumn[i].TableName === joinsJoinTable.slice(0, joinTableIndex)) {\r\n                               joinCommonColumn.splice(i, 1);\r\n                           }\r\n                       }\r\n                   }\r\n               }\r\n               $removeJoins = $selectGeneratorQuery.text().replace(reqJoinQuery, '').trim();\r\n               $selectGeneratorQuery.text($removeJoins);\r\n               removeColumnJoins = $selectGeneratorQuery.text().replace(columnToRemove, '');\r\n               $selectGeneratorQuery.empty();\r\n               $selectGeneratorQuery.text(removeColumnJoins);\r\n               $(event.target).parents('.vas-join-item').remove();\r\n               joinsArray.splice($(event.target), 1);\r\n               $sqlResultDiv.hide();\r\n           }\r\n       });*/\n\n      $(\"body\").on(VIS.Events.onTouchStartOrClick, function (e) {\n        var target = $(e.target);\n        var $windowMultiSelectItem = $checkBoxes.children('.vas-column-list-item');\n        var $windowMultiSelectItemCheckbox = $checkBoxes.children('.vas-column-list-item').children('.vas-column-checkbox');\n        if (!target.is($multiSelectArrow) && !target.is($fieldColDropdown) && !target.is($checkBoxes) && !target.is($windowMultiSelectItem) && !target.is($windowMultiSelectItemCheckbox)) {\n          $checkBoxes.hide();\n          $fieldColDropdown.val('');\n        }\n        if (!target.is($filterSelectArrow) && !target.is($filterColumnInput) && !target.is($filterColumnName)) {\n          $filterColumnName.hide();\n        }\n        if (!target.is($baseTableSelectArrow) && !target.is($baseTableJoinInput) && !target.is($joinOnFieldColumnMainTable)) {\n          // $joinOnFieldColumnMainTable.hide();\n          if ($joinOnFieldColumnMainTable == null) {\n            return;\n          }\n        }\n        if (!target.is($joiningTableSelectArrow) && !target.is($joiningTableInput) && !target.is($joinOnFieldColumnJoinTable)) {\n          $joinOnFieldColumnJoinTable.hide();\n        }\n        var $joinMultiSelectItem = $joinMultiSelect.children('.vas-column-list-item');\n        var $joinMultiSelectItemCheckbox = $joinMultiSelect.children('.vas-column-list-item').children('.vas-column-checkbox');\n        if (!target.is($multiSelectJoinArrow) && !target.is($fieldJoinColDropdown) && !target.is($joinMultiSelect) && !target.is($joinMultiSelectItem) && !target.is($joinMultiSelectItemCheckbox)) {\n          $joinMultiSelect.hide();\n          $fieldJoinColDropdown.val('');\n        }\n        var $filterValItem = $filterValDropdown.children('.vas-filterValItem');\n        var $filterValSelectedItemInput = $filterValBlock.find('input');\n        if (!target.is($filterValItem) && !target.is($filterValSelectArrow) && !target.is($filterValDropdown) && !target.is($filterValSelectedItemInput)) {\n          $filterValDropdown.hide();\n        }\n        var $filterCol2Item = $filterCol2Block.children('.vas-column-list-item');\n        if (!target.is($filterCol2Item) && !target.is($filterNewColumnArrow) && !target.is($filterCol2Block) && !target.is($filterNewColumnInput)) {\n          $filterCol2Block.hide();\n        }\n        var $sortByItem = $sortByDropdown.children('.vas-column-list-item');\n        if (!target.is($sortByItem) && !target.is($sortSelectArrow) && !target.is($sortByDropdown) && !target.is($sortColumnInput)) {\n          $sortByDropdown.hide();\n        }\n      });\n\n      /*\r\n         Click event on Add Join Button\r\n         to add joins\r\n      */\n\n      $addJoinBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        var joinQuery;\n        var joinTableName = joinTable;\n        var joinSelectedColumn = seletedJoinCloumn;\n        var keyColumn1 = $baseTableJoinInput.val();\n        var keyColumn2 = $joiningTableInput.val();\n        var sql = $selectGeneratorQuery.text();\n        record = record.concat(Joinrecord);\n        var joinsDropDown = $joinsDropdown.find('option:selected').val();\n        const joinsObj = {\n          joinsDropDown,\n          joinTableName,\n          keyColumn1,\n          keyColumn2,\n          joinSelectedColumn\n        };\n        if (joinsDropDown && joinTableName && keyColumn1 && keyColumn2 && joinSelectedColumn) {\n          joinsArray.push(joinsObj);\n        }\n        if (sql != '' && keyColumn1 != '' && keyColumn2 != '' && keyColumn1 != null && keyColumn2 != null) {\n          var fromIndex = sql.indexOf('FROM');\n          var whereIndex = sql.indexOf('WHERE');\n          var orderIndex = sql.indexOf('ORDER BY');\n          var fromClause = '';\n          var whereClause = '';\n          var orderClause = '';\n          if (whereIndex == -1 && orderIndex == -1) {\n            fromClause = sql.slice(fromIndex);\n          } else if (whereIndex != -1 && orderIndex == -1) {\n            fromClause = sql.slice(fromIndex, whereIndex);\n            whereClause = sql.slice(whereIndex);\n          } else if (whereIndex == -1 && orderIndex != -1) {\n            fromClause = sql.slice(fromIndex, orderIndex);\n            orderClause = sql.slice(orderIndex);\n          } else if (whereIndex != -1 && orderIndex != -1) {\n            fromClause = sql.slice(fromIndex, whereIndex);\n            whereClause = sql.slice(whereIndex, orderIndex);\n            orderClause = sql.slice(orderIndex);\n          }\n          if (fromClause != '') {\n            joinQuery = \" \" + $joinsDropdown.val() + \" \" + joinTable + ' ON (' + keyColumn1 + \" = \" + keyColumn2 + \")\";\n            var addJoinQuery = $joinsDropdown.val() + \" \" + joinTable + ' ON (' + keyColumn1 + \" = \" + keyColumn2 + \")\";\n            $selectGeneratorQuery.text(addJoinQuery);\n            if (seletedJoinCloumn.length > 0) {\n              sql = sql.slice(0, fromIndex) + \", \" + seletedJoinCloumn + fromClause + joinQuery;\n              joinColumnName = seletedJoinCloumn;\n            } else {\n              sql = sql.slice(0, fromIndex) + fromClause + joinQuery;\n            }\n            if (whereClause != '') {\n              sql += \" \" + whereClause;\n            }\n            if (whereJoinClause != '') {\n              if (whereIndex != -1) {\n                sql += \" AND \" + whereJoinClause;\n              } else {\n                sql += \" WHERE \" + whereJoinClause;\n              }\n            }\n            if (orderClause != '') {\n              sql += \" \" + orderClause;\n            }\n          }\n          if (joinData != null) {\n            if (joinData && joinData.length > 0) {\n              joinTableName = joinData[0].TableName;\n              joinCommonColumn = joinCommonColumn.concat(joinData);\n              for (var i = 0; i < joinData.length; i++) {\n                var optionValue = joinTableName + \".\" + joinData[i].DBColumn;\n                var optionText = joinTableName + \" - \" + joinData[i].ColumnName + \" (\" + joinData[i].DBColumn + \")\";\n                if (!addedOptions.includes(optionValue)) {\n                  $sortByDropdown.append(\" <div class='vas-column-list-item' title='\" + optionText + \"' value=\" + optionValue + \">\" + optionText + \"</div>\");\n                  $filterColumnName.append(\" <div class='vas-column-list-item' title='\" + optionText + \"' refValId=\" + joinData[i].ReferenceValueID + \" fieldID=\" + joinData[i].FieldID + \" WindowID=\" + joinData[i].WindowID + \" tabID=\" + tabID + \" DBColumnName=\" + joinData[i].DBColumn + \" TableName=\" + joinTableName + \" columnID=\" + joinData[i].ColumnID + \" datatype=\" + joinData[i].DataType + \" value=\" + optionValue + \">\" + optionText + \"</div>\");\n                  $filterCol2Block.append(\"<div class='vas-column-list-item' title='\" + optionText + \"' refValId=\" + joinData[i].ReferenceValueID + \" fieldID=\" + joinData[i].FieldID + \" WindowID=\" + joinData[i].WindowID + \" tabID=\" + tabID + \" DBColumnName=\" + joinData[i].DBColumn + \" TableName=\" + joinTableName + \" columnID=\" + joinData[i].ColumnID + \" datatype=\" + joinData[i].DataType + \" value=\" + optionValue + \">\" + optionText + \"</div>\");\n                  addedOptions.push(optionValue);\n                }\n              }\n            }\n          }\n          $joins.empty();\n          readJoinsData();\n          $selectGeneratorQuery.text('');\n          $selectGeneratorQuery.text(sql);\n          $joinMultiSelect.val('');\n          $joinOnFieldColumnJoinTable.val('');\n          $joinOnFieldColumnMainTable.val('');\n          filterFlag = true;\n          $fieldJoinColDropdown.val('');\n          $baseTableJoinInput.val('');\n          $joiningTableInput.val('');\n          seletedJoinCloumn = [];\n          $joinsWindowTabSelect.setValue(null);\n          getJoinsColumns(0, 0);\n        }\n      });\n\n      /* Auto complete suggestion for lookups to fileration*/\n\n      autoComValue = null;\n      $filterValue.vaautocomplete({\n        minLength: 1,\n        source: function (term, response) {\n          var displayType = $filterColumnName.children('.vas-column-list-item.active').attr(\"datatype\");\n          var res = [];\n          if (displayType == VIS.DisplayType.TableDir || displayType == VIS.DisplayType.Table || displayType == VIS.DisplayType.Search) {\n            var filtervalue = $filterColumnName.children('.vas-column-list-item.active').attr('value');\n            var tabID = $filterColumnName.children('.vas-column-list-item.active').attr(\"tabid\");\n            var referenceValueID = $filterColumnName.children('.vas-column-list-item.active').attr(\"refValId\");\n            var columnName = filtervalue.slice(filtervalue.indexOf('.') + 1);\n            var columnID = $filterColumnName.children('.vas-column-list-item.active').attr(\"columnID\");\n            var fieldID = $filterColumnName.children('.vas-column-list-item.active').attr(\"fieldID\");\n            var windowId = $filterColumnName.children('.vas-column-list-item.active').attr(\"WindowID\");\n            var validation = \"\";\n            var d = {\n              'ctx': VIS.Env.getCtx(),\n              'windowNo': VIS.Env.getWindowNo(),\n              'column_ID': columnID,\n              'AD_Reference_ID': displayType,\n              'columnName': columnName,\n              'AD_Reference_Value_ID': referenceValueID,\n              'isParent': true,\n              'validationCode': validation\n            };\n            autoComValue = null;\n            $.ajax({\n              type: 'Post',\n              url: VIS.Application.contextUrl + \"Form/GetAccessSqlAutoComplete\",\n              data: {\n                columnName: columnName,\n                text: term,\n                WindowNo: $self.windowNo,\n                AD_Window_ID: windowId,\n                AD_Tab_ID: tabID,\n                AD_Field_ID: fieldID,\n                Validation: JSON.stringify(validation),\n                LookupData: JSON.stringify(d)\n              },\n              success: function (data) {\n                res = [];\n                if (JSON.parse(data) != null) {\n                  result = JSON.parse(data).Table;\n                  for (var i = 0; i < result.length; i++) {\n                    var parseObj = {};\n                    parseObj[Object.keys(result[i])[0].toLowerCase()] = result[i][Object.keys(result[i])[0]];\n                    parseObj[Object.keys(result[i])[1].toLowerCase()] = result[i][Object.keys(result[i])[1]];\n                    parseObj[Object.keys(result[i])[2].toLowerCase()] = result[i][Object.keys(result[i])[2]];\n                    res.push({\n                      id: parseObj.id,\n                      value: VIS.Utility.Util.getIdentifierDisplayVal(parseObj.finalvalue)\n                    });\n                  }\n                  response(res);\n                }\n              }\n            });\n          } else if ($filterOperator.val() == 'LIKE' || $filterOperator.val() == 'NOT LIKE') {\n            var searchValue = $filterValue.val();\n            var id = [searchValue + '%', '%' + searchValue, '%' + searchValue + '%'];\n            var finalValue = ['StartWith_' + searchValue, 'EndWith_' + searchValue, 'InBetween_' + searchValue];\n            res = [];\n            for (var i = 0; i < id.length; i++) {\n              res.push({\n                id: id[i],\n                value: VIS.Utility.Util.getIdentifierDisplayVal(finalValue[i])\n              });\n            }\n            response(res);\n          } else {\n            return;\n          }\n        },\n        onSelect: function (e, item) {\n          autoComValue = item.id;\n        }\n      });\n\n      /*   Click event on Add Sort Button\r\n         to add sorts like ASC, DESC etc*/\n      sortValuesArray = [];\n      sortedIndex = -1;\n      $addSortBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        var sortQuery = \"\";\n        var sortColumn = $sortColumnInput.val();\n        var sql = $selectGeneratorQuery.text();\n        var direction = $sortElements.val();\n        var sortColValue = $sortColumnInput.val();\n\n        // Append subquery in sorting in Add Sort section\n        var sortdatatype = $sortColumnInput.attr('sortdatatype');\n        var sortcolumnID = $sortColumnInput.attr('sortcolumnID');\n        var sortDBColumnName = $sortColumnInput.attr('sortDBColumnName');\n        var sortrefValId = $sortColumnInput.attr('sortrefValId');\n        var sortisParent = $sortColumnInput.attr('sortisParent');\n        var sortTableName = $sortColumnInput.attr('sortTableName');\n        if (VIS.DisplayType.IsLookup(sortdatatype)) {\n          var subQuery = GetLookup(sortdatatype, sortcolumnID, sortDBColumnName, sortrefValId, sortisParent, sortTableName);\n          if (subQuery.indexOf(') as') > 0) {\n            sortColumn = subQuery.substring(0, subQuery.indexOf(') as') + 1).trim();\n          }\n        }\n        var sortObject = {\n          column: sortColumn,\n          reqSortVal: sortColValue,\n          direction: direction,\n          sortdatatype: sortdatatype,\n          sortcolumnID: sortcolumnID,\n          sortDBColumnName: sortDBColumnName,\n          sortrefValId: sortrefValId,\n          sortisParent: sortisParent,\n          sortTableName: sortTableName\n        };\n        if (!$(this).hasClass('vas-edit-sort')) {\n          if (sql !== '' && sortColumn !== '') {\n            // Push the current sort object to the array\n            sortValuesArray.push(sortObject);\n            $sortColumnInput.val('');\n            displaySortValues();\n            rebuildSQLQuery();\n          }\n        } else {\n          $(this).removeClass('vas-edit-sort');\n          $addSortBtn.val(VIS.Msg.getMsg(\"VAS_AddSort\"));\n          $sortColumnInput.val('');\n          if (sortedIndex >= 0 && sortedIndex < sortValuesArray.length) {\n            sortValuesArray[sortedIndex] = sortObject;\n          }\n          displaySortValues();\n          rebuildSQLQuery();\n        }\n      });\n\n      // Function to display the sort values on the UI\n      function displaySortValues() {\n        $sortCollection.empty();\n        sortValuesArray.forEach(function (sortObject, index) {\n          $sortCollection.append('<div class=\"VAS-sortedItem d-flex justify-content-between\" data-index=' + index + ' style=\"background-color: ' + randomColor() + '\">' + '<div>' + sortObject.column + ' ' + sortObject.direction + '</div>' + '<div class=\"vas-sortcolval d-none\">' + sortObject.reqSortVal + '</div>' + '<div class=\"vas-sortColumnName d-none\">' + sortObject.column + '</div>' + '<div class=\"vas-sortDirection d-none\">' + sortObject.direction + '</div>' + '<div class=\"vas-sort-datatype d-none\">' + sortObject.sortdatatype + '</div>' + '<div class=\"vas-sort-columnID d-none\">' + sortObject.sortcolumnID + '</div>' + '<div class=\"vas-sort-DBColumName d-none\">' + sortObject.sortDBColumnName + '</div>' + '<div class=\"vas-sort-refValId d-none\">' + sortObject.sortrefValId + '</div>' + '<div class=\"vas-sort-isParent d-none\">' + sortObject.sortisParent + '</div>' + '<div class=\"vas-sort-TableName d-none\">' + sortObject.sortTableName + '</div>' + '<div class=\"vas-sortBtns\">' + '<i class=\"vis vis-edit\" data-index=\"' + index + '\"></i>' + '<i class=\"vis vis-delete\" data-index=\"' + index + '\"></i>' + '</div>' + '</div>');\n        });\n\n        // Delete handler\n        $sortCollection.find('.vas-sortBtns i.vis-delete').off(VIS.Events.onTouchStartOrClick).on(VIS.Events.onTouchStartOrClick, function () {\n          var indexToRemove = parseInt($(this).data('index'));\n          sortValuesArray.splice(indexToRemove, 1);\n          displaySortValues();\n          rebuildSQLQuery();\n        });\n\n        // Edit handler\n        $sortCollection.find('.vas-sortBtns i.vis-edit').off(VIS.Events.onTouchStartOrClick).on(VIS.Events.onTouchStartOrClick, function () {\n          var sortedItem = $(this).closest('.VAS-sortedItem');\n          sortedIndex = parseInt(sortedItem.data('index'));\n          sortedItem.addClass('active').siblings().removeClass('active');\n          $sortColumnInput.val(sortedItem.find('.vas-sortcolval').text());\n          $sortElements.val(sortedItem.find('.vas-sortDirection').text());\n          $sortColumnInput.attr('sortdatatype', sortedItem.find('.vas-sort-datatype').text());\n          $sortColumnInput.attr('sortcolumnID', sortedItem.find('.vas-sort-columnID').text());\n          $sortColumnInput.attr('sortDBColumnName', sortedItem.find('.vas-sort-DBColumName').text());\n          $sortColumnInput.attr('sortrefValId', sortedItem.find('.vas-sort-refValId').text());\n          $sortColumnInput.attr('sortisParent', sortedItem.find('.vas-sort-isParent').text());\n          $sortColumnInput.attr('sortTableName', sortedItem.find('.vas-sort-TableName').text());\n          $addSortBtn.val(VIS.Msg.getMsg(\"VAS_UpdateSort\")).addClass('vas-edit-sort');\n        });\n      }\n\n      // Rebuilds the SQL query\n      function rebuildSQLQuery() {\n        var sql = $selectGeneratorQuery.text().replace(/ORDER BY[\\s\\S]*$/i, '').trim();\n        if (sortValuesArray.length > 0) {\n          var orderByClauses = sortValuesArray.map(function (sortObject) {\n            return \"LOWER(TRIM(\" + sortObject.column + \")) \" + sortObject.direction;\n          }).join(\", \");\n          sql += \" ORDER BY \" + orderByClauses;\n        }\n        $selectGeneratorQuery.text(sql);\n      }\n\n      // Clear/refresh sql query\n      $sqlGenDeleteIcon.on(VIS.Events.onTouchStartOrClick, function () {\n        clear();\n        //resetSorting();\n      });\n\n      //show query \n      $column1Div.on(VIS.Events.onTouchStartOrClick, function () {\n        $saveGeneratorBtn.hide();\n        $selectGeneratorQuery.show();\n        gridDiv2.hide();\n        $sqlGeneratorQueryResultGrid.hide();\n        $testSqlGeneratorBtn.val(testSQL);\n        $testSqlGeneratorBtn.removeClass('vas-show-grid');\n      });\n\n      /*\r\n          Function of add/remove active class on SQL & SQL Generator Buttons\r\n      */\n      function Active(e) {\n        $sqlBtn.removeClass('active');\n        $sqlGeneratorBtn.removeClass('active');\n        $(e).addClass('active');\n      }\n      getWindow();\n      getJoinWindow(0, 0);\n      eventHandling();\n      $filterDateDiv.hide();\n    };\n\n    /*\r\n        AJAX Call to get Alert Data\r\n    */\n    this.SqlQuery = function (ParentId) {\n      var event = VIS.context.getContext(windowNo, 'BasedOn');\n      UpdateColumnCtrl.hide();\n      $sqlResultDiv.text(\"\");\n      $SQLMainDiv.show();\n      $EventMainDiv.hide();\n      if (event == 'E') {\n        $SQLMainDiv.hide();\n        $EventMainDiv.show();\n      }\n      emailContentDiv.hide();\n      alertRuleID = ParentId;\n      if (alertRuleID > 0) {\n        $sqlGeneratorBtn.attr('disabled', true);\n        $sqlGeneratorBtn.css(\"opacity\", .3);\n        $.ajax({\n          url: VIS.Application.contextUrl + \"AlertSQLGenerate/GetAlertData\",\n          type: \"POST\",\n          data: {\n            alertRuleID: alertRuleID\n          },\n          async: false,\n          success: function (result) {\n            result = JSON.parse(result);\n            if (result) {\n              $self.BasedOn = result.BasedOn;\n              if (result.BasedOn && result.BasedOn == 'S') {\n                emailContentDiv.show();\n                txtEmailColName.setValue(result.EmailColumnName);\n                txtIsEmail.setValue(result.IsEmail);\n                if (result.IsEmail) {\n                  emailColNameCtrl.show();\n                } else {\n                  emailColNameCtrl.hide();\n                }\n              }\n              $selectQuery.text(result.Query);\n              if (!result.Query) {\n                $windowTabSelect.setValue(null);\n                $selectQuery.text('');\n                $sqlGeneratorBtn.attr('disabled', false);\n                $sqlGeneratorBtn.css(\"opacity\", 1);\n                $testSqlBtn.val(testSQL);\n                $queryResultGrid.hide();\n                $query.show();\n                $selectQuery.show();\n                emailContentDiv.show();\n              }\n              if (result.BasedOn && result.BasedOn == 'E') {\n                txtWindowTab.setValue(result.TabID);\n                txtIsInsert.setValue(result.IsInsert);\n                txtIsUpdate.setValue(result.IsUpdate);\n                txtIsDelete.setValue(result.IsDelete);\n                if (result.IsUpdate) {\n                  txtFiledColumn.setValue(result.ColumnID);\n                  UpdateColumnCtrl.show();\n                } else {\n                  UpdateColumnCtrl.hide();\n                }\n                EventTable = result.TableID;\n                $SQLMainDiv.hide();\n                $EventMainDiv.show();\n              }\n            }\n          },\n          error: function (error) {\n            console.log(error);\n          }\n        });\n        $sqlBtn.trigger('click');\n        $sqlResultDiv.show();\n      } else if (event == 'E') {\n        $SQLMainDiv.hide();\n        $EventMainDiv.show();\n        txtWindowTab.setValue(null);\n        txtIsInsert.setValue(false);\n        txtIsUpdate.setValue(false);\n        txtIsDelete.setValue(false);\n        txtFiledColumn.setValue(null);\n        EventTable = 0;\n      } else {\n        $windowTabSelect.setValue(null);\n        OnChange(0, 'O');\n        $selectQuery.text('');\n        $sqlGeneratorBtn.attr('disabled', false);\n        $sqlGeneratorBtn.css(\"opacity\", 1);\n        $testSqlBtn.val(testSQL);\n        $queryResultGrid.hide();\n        $query.show();\n        $selectQuery.show();\n        emailContentDiv.show();\n        $saveBtn.hide();\n      }\n    };\n    function pageCtrls() {\n      if (totalPages > 0) {\n        pagingDiv.find(\"select\").empty();\n        for (var i = 0; i < totalPages; i++) {\n          pagingDiv.find(\"select\").append($(\"<option>\").val(i + 1).text(i + 1));\n        }\n        pagingDiv.find(\"select\").val(pageNo);\n      }\n    }\n    ;\n\n    /*Getting last n days query*/\n\n    function getDynamicValue(index) {\n      var text = \"\";\n      text = \" adddays(sysdate, - \" + getTotalDays(index) + \") \";\n      return text;\n    }\n    ;\n\n    /*Calucating total days*/\n\n    function getTotalDays(index) {\n      let totalDays = 0;\n      let y = parseInt(txtYear.val() || 0, 10);\n      let m = parseInt(txtMonth.val() || 0, 10);\n      let d = parseInt(txtDay.val() || 0, 10);\n      if (index == 3 || index == 6) {\n        // years + months + days\n        let startDate = new Date(0, 0, 0);\n        let targetDate = new Date(y, m, d); // JS handles month/day rollover\n        totalDays = Math.floor((targetDate - startDate) / (1000 * 60 * 60 * 24));\n      } else if (index == 2 || index == 5) {\n        // only months + days\n        let startDate = new Date(0, 0, 0);\n        let targetDate = new Date(0, m, d);\n        totalDays = Math.floor((targetDate - startDate) / (1000 * 60 * 60 * 24));\n      } else {\n        // only days\n        totalDays = d;\n      }\n      return totalDays;\n    }\n\n    /* Displaying year month and days on basis of seletion */\n\n    function setDynamicQryControls(isUser) {\n      var index = $filterDateList[0].selectedIndex;\n      if (isUser) {\n        divYear.hide();\n        divMonth.hide();\n        divDay.hide();\n        return;\n      }\n      divYear.show();\n      divMonth.show();\n      if (isDynamic.is(':checked')) {\n        divDay.show();\n      } else {\n        divDay.hide();\n      }\n      txtDay.prop(\"readonly\", false);\n      txtMonth.prop(\"readonly\", false);\n      txtYear.prop(\"readonly\", false);\n      txtMonth.prop(\"min\", 1);\n      if (index == 3 || index == 6) {\n        txtMonth.prop(\"min\", 0);\n        txtDay.val(0);\n        txtMonth.val(0);\n        txtYear.val(1);\n      } else if (index == 2 || index == 5) {\n        divYear.hide();\n        txtYear.val(\"\");\n        txtMonth.val(1);\n        txtDay.val(0);\n      } else if (index == 1 || index == 4) {\n        divYear.hide();\n        divMonth.hide();\n        txtDay.val(0);\n      } else if (index == 0) {\n        txtDay.prop(\"readonly\", true);\n        divYear.hide();\n        divMonth.hide();\n        txtDay.val(0);\n        //divDay.hide();\n      }\n    }\n    ;\n    /*  Function to delete the particular filter in Filter Accordion*/\n\n    function deleteFilter() {\n      var filterItem = $(event.target).parents('.vas-filter-item');\n      var andOrVal = filterItem.find(\".vas-filter-andor-value\").text();\n      var filterSelectTableVal = filterItem.find(\".vas-selecttable\").text();\n      /*var filterValue = filterItem.find(\".vas-filter-price-value\").text();*/\n      var filterValue = filterItem.attr(\"filterId\");\n      if (typeof filterValue == \"string\") {\n        filterValue = filterItem.find(\".vas-filter-price-value\").text();\n      }\n      var filterCondition = filterItem.find(\".vas-filter-condition\").text();\n      var currentValue = $selectGeneratorQuery.text();\n      currentValue = currentValue.replace(/\\s{2,}/g, ' ');\n      var orderByIndex = currentValue.indexOf('ORDER BY');\n      var whereIndex = currentValue.indexOf('WHERE');\n      var conditionToRemove = andOrVal + \" \" + filterSelectTableVal + \" \" + filterCondition + \" \" + filterValue;\n      var orderBySQL = \"\";\n      if (orderByIndex > -1) {\n        orderBySQL = currentValue.slice(orderByIndex);\n        currentValue = currentValue.slice(0, orderByIndex).trim();\n      }\n      var orIndexCR = conditionToRemove.indexOf('OR');\n      var orIndexSql = currentValue.indexOf('OR');\n      var andIndexCR = conditionToRemove.indexOf('AND');\n      var andIndexSql = currentValue.indexOf('AND');\n      if (whereIndex > -1 && andIndexSql == -1 && orIndexSql == -1) {\n        if (orIndexCR !== -1) {\n          conditionToRemove = conditionToRemove.replace(\"OR\", \"\").trim();\n        }\n        if (andIndexCR !== -1) {\n          conditionToRemove = conditionToRemove.replace(\"AND\", \"\").trim();\n        }\n        currentValue = currentValue.replace(\"WHERE\", \"\").trim();\n        andFlag = true;\n      }\n      var handleWhereSql = conditionToRemove;\n      if (andIndexSql > -1 || orIndexSql > -1) {\n        if (andIndexCR > -1) {\n          handleWhereSql = conditionToRemove.replace(\"AND\", \"\").trim();\n        }\n        if (orIndexCR > -1) {\n          handleWhereSql = conditionToRemove.replace(\"OR\", \"\").trim();\n        }\n        handleWhereSql = handleWhereSql.replace(/\\s{2,}/g, ' ');\n        var conditionIndex = currentValue.indexOf(handleWhereSql);\n        var conditionLength = handleWhereSql.length;\n        var beforeCondition = currentValue.slice(conditionIndex - 6, conditionIndex);\n        var whereExistIndex = beforeCondition.indexOf('WHERE');\n        if (whereExistIndex > -1) {\n          var afterCondition = currentValue.slice(conditionIndex, conditionIndex + conditionLength + 4).trim();\n          var orExistIndexCR = afterCondition.indexOf('OR');\n          var andExistIndexSql = afterCondition.indexOf('AND');\n          if (orExistIndexCR > -1) {\n            handleWhereSql = currentValue.slice(conditionIndex, conditionIndex + conditionLength + 3).trim();\n          }\n          if (andExistIndexSql > -1) {\n            handleWhereSql = currentValue.slice(conditionIndex, conditionIndex + conditionLength + 4).trim();\n          }\n          conditionToRemove = handleWhereSql;\n        }\n      }\n      conditionToRemove = conditionToRemove.replace(/\\s{2,}/g, ' ');\n      var updatedQuery = currentValue.replace(conditionToRemove, \"\").trim();\n      updatedQuery += \" \" + orderBySQL;\n      $selectGeneratorQuery.text('');\n      updatedQuery = updatedQuery.replace(/\\s{2,}/g, ' ');\n      $selectGeneratorQuery.text(updatedQuery);\n      ClearText();\n    }\n\n    /*\r\n        Function of Event Handling\r\n    */\n    function eventHandling() {\n      $windowTabSelect.fireValueChanged = function (e) {\n        lblBottomMsg.text(\"\");\n        OnChange(e.newValue, 'S');\n      };\n      txtWindowTab.fireValueChanged = function (e) {\n        isProcessing = false;\n        OnChange(e.newValue, 'E');\n        UpdateColumnCtrl.hide();\n        txtFiledColumn.setValue(null);\n        getEventColumn(e.newValue);\n        txtIsUpdate.setReadOnly(false);\n        txtIsInsert.setReadOnly(false);\n        txtIsDelete.setReadOnly(false);\n        lblBottomMsg.text(\"\");\n      };\n      txtIsInsert.fireValueChanged = function (e) {\n        isProcessing = false;\n        UpdateColumnCtrl.hide();\n        if (e.newValue) {\n          txtIsDelete.setValue(false);\n          txtIsUpdate.setValue(false);\n          txtIsDelete.setReadOnly(true);\n          txtIsUpdate.setReadOnly(true);\n        } else {\n          txtIsDelete.setReadOnly(false);\n          txtIsUpdate.setReadOnly(false);\n        }\n        lblBottomMsg.text(\"\");\n      };\n      txtIsUpdate.fireValueChanged = function (e) {\n        isProcessing = false;\n        UpdateColumnCtrl.hide();\n        if (e.newValue) {\n          var tabID = txtWindowTab.getValue();\n          if (tabID == 0) {\n            VIS.ADialog.error(\"\", \"\", VIS.Msg.getMsg(\"VAS_EnterWindowTab\"));\n          }\n          UpdateColumnCtrl.show();\n          txtIsInsert.setValue(false);\n          txtIsDelete.setValue(false);\n          txtIsDelete.setReadOnly(true);\n          txtIsInsert.setReadOnly(true);\n        } else {\n          txtIsDelete.setReadOnly(false);\n          txtIsInsert.setReadOnly(false);\n        }\n        lblBottomMsg.text(\"\");\n      };\n      txtIsDelete.fireValueChanged = function (e) {\n        lblBottomMsg.text(\"\");\n        isProcessing = false;\n        UpdateColumnCtrl.hide();\n        if (e.newValue) {\n          txtIsInsert.setValue(false);\n          txtIsUpdate.setValue(false);\n          txtIsUpdate.setReadOnly(true);\n          txtIsInsert.setReadOnly(true);\n        } else {\n          txtIsUpdate.setReadOnly(false);\n          txtIsInsert.setReadOnly(false);\n        }\n      };\n      let isProcessing = false;\n      okBtn.on(VIS.Events.onClick, function () {\n        if (isProcessing) return;\n        setBusy(true);\n        isProcessing = true;\n        saveAlertRule();\n      });\n      txtIsEmail.fireValueChanged = function (e) {\n        if (e.newValue) {\n          emailColNameCtrl.show();\n        } else {\n          emailColNameCtrl.hide();\n        }\n      };\n    }\n    function getEventColumn(tabID) {\n      FiledColumnCtrl.empty();\n      //txtFiledColumn.setValue(null);\n      var fieldlookup = new VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.MultiKey, \"AD_Column_ID\", 0, false, \" AD_Column.IsActive='Y' AND FD.AD_Tab_ID= \" + tabID);\n      txtFiledColumn = new VIS.Controls.VTextBoxButton(\"AD_Column_ID\", true, false, true, VIS.DisplayType.MultiKey, fieldlookup);\n      var locDep = txtFiledColumn.getControl().attr('placeholder', ' Search here').attr(\"id\", \"AD_Column_ID\").css(\"width\", \"100%\").css(\"height\", \"100%\");\n      var DivSearchCtrlWrap = $('<div class=\"vas-control-wrap\">');\n      var DivSearchBtnWrap = $('<div class=\"input-group-append\">');\n      FiledColumnCtrl.css(\"width\", \"100%\");\n      FiledColumnCtrl.append(DivSearchCtrlWrap).append(DivSearchBtnWrap);\n      DivSearchCtrlWrap.append(locDep);\n      DivSearchBtnWrap.append(txtFiledColumn.getBtn(0));\n      DivSearchBtnWrap.append(txtFiledColumn.getBtn(1));\n      txtFiledColumn.setCustomInfo('VAS_AlertFieldColumn');\n      txtFiledColumn.getControl().addClass(\"vis-ev-col-mandatory\");\n      // UpdateColumnCtrl.show();\n    }\n    function saveAlertRule() {\n      lblBottomMsg.text(\"\");\n      if (txtWindowTab.getValue() == 0) {\n        setBusy(false);\n        VIS.ADialog.error(\"\", \"\", VIS.Msg.getMsg(\"VAS_EnterWindowTab\"));\n        isProcessing = false;\n        return false;\n      }\n      var ColumnIds = '';\n      if (txtIsUpdate.getValue()) {\n        if (txtFiledColumn.getValue() && txtFiledColumn.getValue().trim().length == 0) {\n          setBusy(false);\n          VIS.ADialog.error(\"\", \"\", VIS.Msg.getMsg(\"VAS_EnterFieldColumn\"));\n          isProcessing = false;\n          return false;\n        }\n        ColumnIds = txtFiledColumn.getValue();\n      }\n      var obj = {\n        alertRuleID: $self.ParentId,\n        alertID: VIS.context.getContext($self.windowNo, 'AD_Alert_ID'),\n        tableID: EventTable,\n        TabID: txtWindowTab.getValue(),\n        ColumnID: ColumnIds,\n        IsInsert: txtIsInsert.getValue(),\n        IsUpdate: txtIsUpdate.getValue(),\n        IsDelete: txtIsDelete.getValue()\n      };\n      $.ajax({\n        url: VIS.Application.contextUrl + \"AlertSQLGenerate/SaveAlertRule\",\n        type: \"POST\",\n        data: obj,\n        async: false,\n        success: function (result) {\n          result = JSON.parse(result);\n          if (result == 'Saved Successfully') {\n            setBusy(false);\n            lblBottomMsg.text('Saved Successfully');\n            isProcessing = false;\n          }\n        },\n        error: function (error) {\n          setBusy(false);\n          console.log(error);\n          isProcessing = false;\n        }\n      });\n    }\n\n    /*\r\n        Onchange function to get the table data\r\n    */\n\n    function OnChange(tabID, type) {\n      tableID = 0;\n      pageNo = 1;\n      recordCount = 0;\n      //  var tabID = $windowTabSelect.getValue();\n      var whereClause = '';\n      record = [];\n      if (tabID > 0) {\n        $.ajax({\n          url: VIS.Application.contextUrl + \"AlertSQLGenerate/GetTable\",\n          type: \"POST\",\n          async: false,\n          data: {\n            tabID: tabID,\n            windowNo: self.windowNo\n          },\n          success: function (result) {\n            result = JSON.parse(result);\n            if (result && result.length > 0) {\n              tableID = result[0].TableID;\n              EventTable = tableID;\n              mainTableName = result[0].TableName;\n              tabID = result[0].TabID;\n              whereClause = result[0].WhereClause;\n              record = result[0].dr.Table;\n            }\n          },\n          error: function (error) {\n            console.log(error);\n          }\n        });\n      }\n      if (tableID > 0) {\n        if (type == 'S') {\n          getColumns(tableID, tabID, whereClause);\n          $joinsWindowTabSelect.fireValueChanged = joinsTableOnChange;\n          $windowTabSelect.getControl().removeClass(\"vis-ev-col-mandatory\");\n        }\n      } else {\n        clear();\n      }\n    }\n\n    /*\r\n        Function to get Window/Tab data in Joins\r\n    */\n\n    function joinsTableOnChange() {\n      var whereClause = '';\n      var tabID = $joinsWindowTabSelect.getValue();\n      var TableID2 = 0;\n      Joinrecord = [];\n      if (tabID > 0) {\n        $.ajax({\n          url: VIS.Application.contextUrl + \"AlertSQLGenerate/GetTable\",\n          type: \"POST\",\n          async: false,\n          data: {\n            tabID: tabID,\n            windowNo: self.windowNo\n          },\n          success: function (result) {\n            result = JSON.parse(result);\n            if (result && result.length > 0) {\n              TableID2 = result[0].TableID;\n              whereClause = result[0].WhereClause;\n              Joinrecord = result[0].dr.Table;\n            }\n          },\n          error: function (error) {\n            console.log(error);\n          }\n        });\n      }\n      if (TableID2 != null && TableID2 != \"\") {\n        getJoinsColumns(TableID2, tabID, whereClause);\n      } else {\n        getJoinsColumns(0, 0, null);\n      }\n    }\n\n    /*\r\n        Function to apply filters\r\n    */\n\n    function ApplyFilter(WhereCondition, value, dataType) {\n      var sql = $selectGeneratorQuery.text();\n      var orderIndex = sql.indexOf('ORDER BY');\n      var whereSql = \"\";\n      var filterval = $filterColumnInput.val();\n      var filterValue = value;\n      var filterCondition = $filterOperator.val();\n      if (filterval != null) {\n        var filterColumn = filterval.slice(filterval.indexOf(':') + 1);\n        //  var dataType = $filterColumnName.children('.vas-column-list-item.active').attr(\"datatype\");\n        if (sql != '' && filterColumn != '' && filterCondition != '') {\n          if (orderIndex == -1) {\n            if (autoComValue != null) {\n              filterValue = autoComValue;\n            }\n            /* if (filterCondition == 'IN') {\r\n                 filterValue = \"(\" + $inDropdownVal + \")\";\r\n             }*/\n            sql += \" \" + WhereCondition;\n            if (filterCondition == 'IS NULL' || filterCondition == 'IS NOT NULL') {\n              sql += \" \" + filterColumn + \" \" + filterCondition;\n            }\n            /* else if (VIS.DisplayType.Integer == dataType || VIS.DisplayType.ID == dataType || VIS.DisplayType.IsSearch == dataType) {\r\n                 sql += \" \" + filterColumn + \" \" + filterCondition + \" \" + filterValue;\r\n             }*/else if (VIS.DisplayType.String == dataType || VIS.DisplayType.List == dataType || VIS.DisplayType.Text == dataType || VIS.DisplayType.TextLong == dataType) {\n              sql += \" \" + filterColumn + \" \" + filterCondition + \" '\" + filterValue + \"'\";\n            } else if (VIS.DisplayType.Date == dataType || VIS.DisplayType.DateTime == dataType) {\n              if (isDynamic.is(':checked')) {\n                $filterOperator.val('>=');\n                sql += \" \" + filterColumn + \" >=\" + getDynamicValue($filterDateList[0].selectedIndex);\n              } else {\n                sql += \" TO_CHAR(\" + filterColumn + \", 'yyyy-mm-dd') \" + filterCondition + \" \" + filterValue;\n              }\n            } else if (VIS.DisplayType.YesNo == dataType) {\n              if ($filterValue.is(':checked')) {\n                sql += \" \" + filterColumn + \" \" + filterCondition + \" 'Y'\";\n              } else {\n                sql += \" \" + filterColumn + \" \" + filterCondition + \" 'N'\";\n              }\n            } else {\n              sql += \" \" + filterColumn + \" \" + filterCondition + \" \" + filterValue;\n            }\n          } else {\n            whereSql += \" \" + WhereCondition;\n            if (filterCondition == 'IS NULL' || filterCondition == 'IS NOT NULL') {\n              whereSql += \" \" + filterColumn + \" \" + filterCondition;\n            } else if (VIS.DisplayType.Integer == dataType || VIS.DisplayType.ID == dataType || VIS.DisplayType.IsSearch == dataType) {\n              whereSql += \" \" + filterColumn + \" \" + filterCondition + \" \" + filterValue;\n            } else if (VIS.DisplayType.String == dataType || VIS.DisplayType.IsDate == dataType || VIS.DisplayType.IsText == dataType || VIS.DisplayType.Text == dataType || VIS.DisplayType.TextLong == dataType) {\n              whereSql += \" \" + filterColumn + \" \" + filterCondition + \" '\" + filterValue + \"'\";\n            } else if (VIS.DisplayType.Date == dataType || VIS.DisplayType.DateTime == dataType) {\n              whereSql += \" TO_CHAR(\" + filterColumn + \", 'yyyy-mm-dd') \" + filterCondition + \" '\" + filterValue + \"'\";\n            } else if (VIS.DisplayType.Date == dataType || VIS.DisplayType.DateTime == dataType) {\n              if (isDynamic.is(':checked')) {\n                $filterOperator.val('>=');\n                whereSql += \" \" + filterColumn + \" >=\" + getDynamicValue($filterDateList[0].selectedIndex);\n              } else {\n                whereSql += \" TO_CHAR(\" + filterColumn + \", 'yyyy-mm-dd') \" + filterCondition + \" \" + filterValue;\n              }\n            } else {\n              whereSql += \" \" + filterColumn + \" \" + filterCondition + \" \" + filterValue;\n            }\n            sql = sql.substring(0, orderIndex) + \" \" + whereSql + \" \" + sql.substring(orderIndex);\n          }\n          $selectGeneratorQuery.text('');\n          $selectGeneratorQuery.text(sql);\n          andFlag = false;\n        }\n      }\n    }\n\n    /*\r\n        Function to clear the filter dropdowns\r\n    */\n    function ClearText() {\n      $filterColumnName.val('');\n      $filterValue.val('');\n      $filterOperator.val('');\n      $filterValExchangeIconBlock.hide();\n      $filterNewColumn.hide();\n      $filterValInput.val('');\n      $filterColumnInput.val('');\n      $addFilterBtn.val(VIS.Msg.getMsg(\"VAS_AddFilter\"));\n      $filterNewColumn.find('input').val('');\n      $filterValExchangeIconBlock.find('input').val('');\n      $filterCurrentDate.find('input').prop('checked', false);\n      $filterValue.prop('checked', false);\n      $filterValueDiv.show();\n    }\n    function GetLookup(columnDatatype, columnID, columnName, refrenceID, isParent, tableName) {\n      var result = \"\";\n      $.ajax({\n        url: VIS.Application.contextUrl + \"AlertSQLGenerate/GetLookup\",\n        type: \"POST\",\n        data: {\n          windowNo: $self.windowNo,\n          columnDatatype: columnDatatype,\n          columnID: columnID,\n          columnName: columnName,\n          refrenceID: refrenceID,\n          isParent: isParent === 'Y',\n          tableName: tableName\n        },\n        async: false,\n        success: function (data) {\n          result = JSON.parse(data);\n        },\n        error: function (error) {\n          console.log(error);\n        }\n      });\n      return result;\n    }\n\n    /*\r\n        Function to get the columns from Table in Window/Tab\r\n    */\n    function getColumns(tableID, tabID, whereClause) {\n      $selectBox.find('select').empty();\n      var flag = true;\n      var seletedCloumn = [];\n      $checkBoxes.empty();\n      $sortByDropdown.empty();\n      $filterColumnName.empty();\n      $filterCol2Block.empty();\n      $joinOnFieldColumnMainTable.empty();\n      joinCommonColumn = [];\n      $.ajax({\n        url: VIS.Application.contextUrl + \"AlertSQLGenerate/GetColumns\",\n        data: {\n          tableID: tableID,\n          tabID: tabID\n        },\n        type: \"POST\",\n        async: false,\n        success: function (result) {\n          result = JSON.parse(result);\n          if (result && result.length > 0) {\n            mainTableName = result[0].TableName;\n            joinCommonColumn = result;\n            for (var i = 0; i < result.length; i++) {\n              // Append the dynamic values of Sort/Joins/Conditions and displayed on UI\n              $sortByDropdown.append(\"<div class='vas-column-list-item' \" + \"title='\" + mainTableName + \" - \" + result[i].ColumnName + \" (\" + result[i].DBColumn + \")' \" + \"value='\" + mainTableName + \".\" + result[i].DBColumn + \"' \" + \"refValId='\" + result[i].ReferenceValueID + \"' \" + \"fieldID='\" + result[i].FieldID + \"' \" + \"WindowID='\" + result[i].WindowID + \"' \" + \"isParent='\" + result[i].IsParent + \"' \" + \"tabID='\" + tabID + \"' \" + \"DBColumnName='\" + result[i].DBColumn + \"' \" + \"fieldName='\" + result[i].FieldName + \"' \" + \"TableName='\" + mainTableName + \"' \" + \"columnID='\" + result[i].ColumnID + \"' \" + \"datatype='\" + result[i].DataType + \"'>\" + result[i].ColumnName + \" (\" + result[i].DBColumn + \")\" + \"</div>\");\n              $filterColumnName.append(\"<div class='vas-column-list-item' \" + \"columnID='\" + result[i].ColumnID + \"' \" + \"TableName='\" + mainTableName + \"' \" + \"title='\" + mainTableName + \" - \" + result[i].ColumnName + \" (\" + result[i].DBColumn + \")' \" + \"refValId='\" + result[i].ReferenceValueID + \"' \" + \"fieldID='\" + result[i].FieldID + \"' \" + \"WindowID='\" + result[i].WindowID + \"' \" + \"isParent='\" + result[i].IsParent + \"' \" + \"tabID='\" + tabID + \"' \" + \"DBColumnName='\" + result[i].DBColumn + \"' \" + \"fieldName='\" + result[i].FieldName + \"' \" + \"datatype='\" + result[i].DataType + \"' \" + \"value='\" + mainTableName + \".\" + result[i].DBColumn + \"'>\" + mainTableName + \" - \" + result[i].ColumnName + \" (\" + result[i].DBColumn + \")\" + \"</div>\");\n              $filterCol2Block.append(\"<div class='vas-column-list-item' \" + \"title='\" + mainTableName + \" - \" + result[i].ColumnName + \" (\" + result[i].DBColumn + \")' \" + \"refValId='\" + result[i].ReferenceValueID + \"' \" + \"fieldID='\" + result[i].FieldID + \"' \" + \"WindowID='\" + result[i].WindowID + \"' \" + \"tabID='\" + tabID + \"' \" + \"DBColumnName='\" + result[i].DBColumn + \"' \" + \"TableName='\" + mainTableName + \"' \" + \"fieldName='\" + result[i].FieldName + \"' \" + \"columnID='\" + result[i].ColumnID + \"' \" + \"datatype='\" + result[i].DataType + \"' \" + \"value='\" + mainTableName + \".\" + result[i].DBColumn + \"'>\" + mainTableName + \" - \" + result[i].ColumnName + \" (\" + result[i].DBColumn + \")\" + \"</div>\");\n              $checkBoxes.append(\"<div class='vas-column-list-item' \" + \"refValId='\" + result[i].ReferenceValueID + \"' \" + \"fieldID='\" + result[i].FieldID + \"' \" + \"WindowID='\" + result[i].WindowID + \"' \" + \"tabID='\" + tabID + \"' \" + \"DBColumnName='\" + result[i].DBColumn + \"' \" + \"TableName='\" + mainTableName + \"' \" + \"fieldName='\" + result[i].FieldName + \"' \" + \"columnID='\" + result[i].ColumnID + \"' \" + \"datatype='\" + result[i].DataType + \"' \" + \"isParent='\" + result[i].IsParent + \"' \" + \"title='\" + result[i].FieldName + \" - \" + result[i].DBColumn + \"'>\" + \"<input type='checkbox' class='vas-column-checkbox' data-oldIndex='\" + i + \"'>\" + result[i].FieldName + \" - \" + result[i].DBColumn + \"</div>\");\n            }\n          }\n          seletedCloumn = [];\n          $(\".vas-column-list-item .vas-column-checkbox\").on('click', function (eve) {\n            if (!flag) {\n              $(\".vas-column-checkbox\").prop(\"checked\", false);\n              flag = true;\n            }\n            var selectedItem = $(this).parent('.vas-column-list-item');\n            var columnDatatype = selectedItem.attr('datatype');\n            var desiredResult = \"\";\n            var fieldName = selectedItem.attr('fieldName');\n            fieldName = fieldName.replace(/[^a-zA-Z0-9\\s]+/g, '');\n            if (VIS.DisplayType.IsLookup(columnDatatype)) {\n              desiredResult = GetLookup(columnDatatype, $(this).parent('.vas-column-list-item').attr('columnID'), $(this).parent('.vas-column-list-item').attr('DBColumnName'), $(this).parent('.vas-column-list-item').attr('refValId'), $(this).parent('.vas-column-list-item').attr('isParent'), $(this).parent('.vas-column-list-item').attr('TableName'));\n            }\n            if (desiredResult == \"\") {\n              if (fieldName != \"\") {\n                desiredResult = mainTableName + \".\" + selectedItem.attr('dbcolumnname').trim() + \" AS \" + '\"' + fieldName + '\" ';\n              } else {\n                desiredResult = mainTableName + \".\" + selectedItem.attr('dbcolumnname').trim() + \" \";\n              }\n            }\n            if (this.checked) {\n              seletedCloumn.push(desiredResult);\n            } else {\n              seletedCloumn = seletedCloumn.filter(function (elem) {\n                return elem != desiredResult;\n              });\n            }\n            if (seletedCloumn.length > 0) {\n              GetSQL(seletedCloumn, whereClause);\n            }\n            if (seletedCloumn.length > 0) {\n              $joinsDiv.css(\"pointer-events\", \"all\");\n              $filterDiv.css(\"pointer-events\", \"all\");\n              $sortByDiv.css(\"pointer-events\", \"all\");\n              $windowFieldColumnSelect.removeClass(\"vis-ev-col-mandatory\");\n              $sqlResultDiv.hide();\n            } else {\n              $joinsDiv.css(\"pointer-events\", \"none\");\n              $filterDiv.css(\"pointer-events\", \"none\");\n              $sortByDiv.css(\"pointer-events\", \"none\");\n              $selectGeneratorQuery.text('');\n              $windowFieldColumnSelect.addClass(\"vis-ev-col-mandatory\");\n            }\n          });\n          $checkBoxes.on('change', '.vas-column-list-item .vas-column-checkbox', function () {\n            var $currentItem = $(this).closest('.vas-column-list-item');\n            var isChecked = this.checked;\n            if (isChecked) {\n              // Move checked item to top\n              $currentItem.prependTo($checkBoxes);\n              $fieldColDropdown.removeClass(\"vis-ev-col-mandatory\");\n            } else {\n              // Get the index of the current item\n              var currentIndex = $(this).data('oldindex');\n              $currentItem.insertAfter($checkBoxes.children().eq(currentIndex));\n            }\n            // Check if more than one checkbox is checked\n            var checkedCount = $checkBoxes.find('.vas-column-checkbox:checked').length;\n            // Toggle the 'vis-ev-col-mandatory' class based on checked count\n            if (checkedCount > 0) {\n              $fieldColDropdown.removeClass(\"vis-ev-col-mandatory\");\n            } else {\n              $fieldColDropdown.addClass(\"vis-ev-col-mandatory\");\n            }\n          });\n        },\n        error: function (error) {\n          console.log(error);\n        }\n      });\n    }\n    ;\n\n    /*\r\n        Function to get the columns from Table in Joins Dropdowns\r\n    */\n    function getJoinsColumns(TableID2, tabID2, whereClause) {\n      whereJoinClause = '';\n      if (whereClause != '' && whereClause) {\n        whereJoinClause = whereClause;\n      }\n      var joinColumns = [];\n      $baseTableJoinInput.val('');\n      $joiningTableInput.val('');\n      $selectBox.find('select').empty();\n      $joinMultiSelect.empty();\n      $joinOnFieldColumnJoinTable.empty();\n      $joinsSelect.css(\"margin-bottom\", \"10px\");\n      $.ajax({\n        url: VIS.Application.contextUrl + \"AlertSQLGenerate/GetColumns\",\n        data: {\n          tableID: TableID2,\n          tabID: tabID2\n        },\n        type: \"POST\",\n        async: false,\n        success: function (result) {\n          result = JSON.parse(result);\n          joinData = result;\n          if (result && result.length > 0) {\n            joinTable = result[0].TableName;\n            var primaryKeyMTable = null;\n            var primaryKeyjTable = null;\n            for (var i = 0; i < result.length; i++) {\n              for (var j = 0; j < joinCommonColumn.length; j++) {\n                var optionMTableValue = joinCommonColumn[j].TableName + \".\" + joinCommonColumn[j].DBColumn;\n                var optionMTableText = joinCommonColumn[j].DBColumn + \" (\" + joinCommonColumn[j].TableName + \")\";\n                var optionJTableValue = joinTable + \".\" + result[i].DBColumn;\n                var optionJTableText = result[i].DBColumn + \" (\" + joinTable + \")\";\n                if (joinCommonColumn[j].DBColumn == result[i].DBColumn) {\n                  if (!joinColumns.includes(result[i].DBColumn)) {\n                    $joinOnFieldColumnJoinTable.append(\"<div class='vas-column-list-item' title='\" + optionJTableText + \"'value=\" + optionJTableValue + \">\" + optionJTableText + \"</div>\");\n                    joinColumns.push(result[i].DBColumn);\n                  }\n                  $joinOnFieldColumnMainTable.append(\" <div class='vas-column-list-item' title='\" + optionMTableText + \"' value=\" + optionMTableValue + \">\" + optionMTableText + \"</div>\");\n                }\n                if (joinCommonColumn[j].IsKey == 'Y' && !$baseTableJoinInput.val().length > 0) {\n                  $baseTableJoinInput.val(optionMTableValue);\n                  primaryKeyMTable = joinCommonColumn[j].DBColumn;\n                }\n              }\n              if (result[i].DBColumn == primaryKeyMTable && $joiningTableInput.val() != null) {\n                $joiningTableInput.val(joinTable + \".\" + primaryKeyMTable);\n              }\n              if (result[i].IsKey == 'Y') {\n                primaryKeyjTable = result[i].DBColumn;\n              }\n              $joinMultiSelect.append(\"<div class='vas-column-list-item' \" + \"refValId='\" + result[i].ReferenceValueID + \"' \" + \"fieldID='\" + result[i].FieldID + \"' \" + \"WindowID='\" + result[i].WindowID + \"' \" + \"tabID='\" + tabID + \"' \" + \"DBColumnName='\" + result[i].DBColumn + \"' \" + \"TableName='\" + mainTableName + \"' \" + \"fieldName='\" + result[i].FieldName + \"' \" + \"columnID='\" + result[i].ColumnID + \"' \" + \"datatype='\" + result[i].DataType + \"' \" + \"isParent='\" + result[i].IsParent + \"' \" + \"title='\" + result[i].FieldName + \" - \" + result[i].DBColumn + \"'>\" + \"<input type='checkbox' class='vas-column-checkbox' data-oldIndex='\" + i + \"'>\" + result[i].FieldName + \" - \" + result[i].DBColumn + \"</div>\");\n            }\n            if ($joiningTableInput.val() == '' && primaryKeyjTable != null) {\n              $joiningTableInput.val(joinTable + \".\" + primaryKeyjTable);\n            }\n            filterFlag = false;\n            seletedJoinCloumn = [];\n            $(\".vas-join-multiselect .vas-column-checkbox\").on('click', function (eve) {\n              var selectedItem = $(this).parent('.vas-column-list-item');\n              var columnDatatype = selectedItem.attr('datatype');\n              var desiredResult = \"\";\n              var fieldName = selectedItem.attr('fieldName');\n              fieldName = fieldName.replace(/[^a-zA-Z0-9\\s]+/g, '');\n              if (VIS.DisplayType.IsLookup(columnDatatype)) {\n                desiredResult = GetLookup(columnDatatype, $(this).parent('.vas-column-list-item').attr('columnID'), $(this).parent('.vas-column-list-item').attr('DBColumnName'), $(this).parent('.vas-column-list-item').attr('refValId'), $(this).parent('.vas-column-list-item').attr('isParent'), $(this).parent('.vas-column-list-item').attr('TableName'));\n              }\n              if (desiredResult == \"\") {\n                if (fieldName != \"\") {\n                  desiredResult = joinTable + \".\" + selectedItem.attr('dbcolumnname').trim() + \" AS \" + '\"' + fieldName + '\" ';\n                } else {\n                  desiredResult = joinTable + \".\" + selectedItem.attr('dbcolumnname').trim() + \" \";\n                }\n              }\n              if (this.checked) {\n                seletedJoinCloumn.push(desiredResult);\n              } else {\n                seletedJoinCloumn = seletedJoinCloumn.filter(function (elem) {\n                  return elem != desiredResult;\n                });\n              }\n            });\n            $joinMultiSelect.on('change', '.vas-column-list-item .vas-column-checkbox', function () {\n              var $currentItem = $(this).closest('.vas-column-list-item');\n              var isChecked = this.checked;\n              if (isChecked) {\n                // Move checked item to top\n                $currentItem.prependTo($joinMultiSelect);\n              } else {\n                // Get the index of the current item\n                var currentIndex = $(this).data('oldindex');\n                $currentItem.insertAfter($joinMultiSelect.children().eq(currentIndex));\n              }\n            });\n          }\n        },\n        error: function (error) {\n          console.log(error);\n        }\n      });\n    }\n    ;\n\n    /*\r\n        Search functionality for Joins\r\n    */\n    function getJoinWindow(tabID, tableID) {\n      var lookups = new VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.Search, \"AD_Tab_ID\", 0, false, \"AD_Tab.AD_Window_ID IN (SELECT AD_Window_ID FROM AD_Window_Access WHERE AD_Role_ID = \" + VIS.Env.getCtx().getAD_Role_ID() + \") AND AD_Tab.AD_Tab_ID <> \" + tabID + \" AND AD_Tab.AD_Table_ID<>\" + tableID);\n      $joinsWindowTabSelect = new VIS.Controls.VTextBoxButton(\"AD_Tab_ID\", false, false, true, VIS.DisplayType.Search, lookups);\n      var locDep = $joinsWindowTabSelect.getControl().attr('placeholder', ' Search here').attr(\"id\", \"Ad_Tab_ID\");\n      var DivSearchCtrlWrap = $('<div class=\"vas-control-wrap\">');\n      var DivSearchBtnWrap = $('<div class=\"input-group-append\">');\n      $txtJoinWindow.css(\"width\", \"100%\");\n      $txtJoinWindow.append(DivSearchCtrlWrap).append(DivSearchBtnWrap);\n      DivSearchCtrlWrap.append(locDep);\n      DivSearchBtnWrap.append($joinsWindowTabSelect.getBtn(0));\n      DivSearchBtnWrap.append($joinsWindowTabSelect.getBtn(1));\n      $joinsWindowTabSelect.setCustomInfo('VAS_AlertSQLGenerator');\n    }\n\n    /*\r\n        Search functionality for Window/Tab\r\n    */\n    function getWindow() {\n      var lookups = new VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.Search, \"AD_Tab_ID\", 0, false, \"AD_Tab.AD_Window_ID IN (SELECT AD_Window_ID FROM AD_Window_Access WHERE AD_Role_ID = \" + VIS.Env.getCtx().getAD_Role_ID() + \")\");\n      $windowTabSelect = new VIS.Controls.VTextBoxButton(\"AD_Tab_ID\", true, false, true, VIS.DisplayType.Search, lookups);\n      var locDep = $windowTabSelect.getControl().attr('placeholder', ' Search here').attr(\"id\", \"Ad_Table_ID\").css(\"width\", \"100%\").css(\"height\", \"100%\");\n      var DivSearchCtrlWrap = $('<div class=\"vas-control-wrap\">');\n      var DivSearchBtnWrap = $('<div class=\"input-group-append\">');\n      $txtWindow.css(\"width\", \"100%\");\n      $txtWindow.append(DivSearchCtrlWrap).append(DivSearchBtnWrap);\n      DivSearchCtrlWrap.append(locDep);\n      DivSearchBtnWrap.append($windowTabSelect.getBtn(0));\n      DivSearchBtnWrap.append($windowTabSelect.getBtn(1));\n      $windowTabSelect.setCustomInfo('VAS_AlertSQLGenerator');\n      $windowTabSelect.getControl().addClass(\"vis-ev-col-mandatory\");\n    }\n\n    /*\r\n        Functionality to Update the Query in SQL Generator Tab\r\n    */\n    function UpdateAlertRule(query) {\n      if (query != null) {\n        var obj = {\n          query: VIS.secureEngine.encrypt(query),\n          tableID: tableID || 0,\n          alertID: alertID,\n          alertRuleID: alertRuleID,\n          isEmail: txtIsEmail.getValue(),\n          emailColumn: txtEmailColName.getValue()\n        };\n        alertRuleID = $self.ParentId;\n        $.ajax({\n          url: VIS.Application.contextUrl + \"AlertSQLGenerate/UpdateQuery\",\n          type: \"POST\",\n          data: obj,\n          async: false,\n          success: function (result) {\n            result = JSON.parse(result);\n            if (result && result.length > 0) {\n              $sqlResultDiv.text(result);\n              $sqlResultDiv.removeClass('vas-sql-result-error');\n              $sqlResultDiv.show();\n              $self.curTab.dataRefreshAll();\n            }\n            if (result == 'Saved Successfully') {\n              $sqlBtn.trigger('click');\n              $sqlResultDiv.text(result);\n              $sqlResultDiv.show();\n            }\n          },\n          error: function (error) {\n            console.log(error);\n          }\n        });\n      }\n    }\n\n    /*\r\n        Function to display SQL based on Column Values in SQL Generator Tab\r\n    */\n\n    function GetSQL(columnValue, whereClause) {\n      var currentSql = $selectGeneratorQuery.text();\n      var fromIndex = currentSql.indexOf('FROM');\n      var joinIndex = currentSql.indexOf('JOIN');\n      var whereIndex = currentSql.indexOf('WHERE');\n      $selectGeneratorQuery.text('');\n      if (fromIndex == -1) {\n        sql = \"SELECT \" + columnValue + \"FROM \" + mainTableName;\n      } else if (joinIndex != -1 && joinColumnName.length > 0) {\n        sql = \"SELECT \" + columnValue + \", \" + joinColumnName + currentSql.slice(fromIndex);\n      } else {\n        sql = \"SELECT \" + columnValue + currentSql.slice(fromIndex);\n      }\n      if (whereClause.length > 0 && sql.length > 0 && whereIndex == -1) {\n        sql += \" WHERE \" + whereClause;\n      }\n      $selectGeneratorQuery.text('');\n      $selectGeneratorQuery.text(sql);\n    }\n\n    /*\r\n        AJAX Call to get the result in Grid \r\n        in SQL and SQL Generator Tab\r\n    */\n\n    function getResult(query) {\n      if (query != null) {\n        query = query.replace(/\\s{2,}/g, ' ').trim();\n        $.ajax({\n          url: VIS.Application.contextUrl + \"AlertSQLGenerate/GetResult\",\n          data: {\n            Query: VIS.secureEngine.encrypt(query),\n            pageNo: pageNo,\n            pageSize: pageSize,\n            tableName: mainTableName,\n            recordCount: recordCount\n          },\n          type: \"POST\",\n          async: false,\n          success: function (result) {\n            result = JSON.parse(result);\n            if (result != null && result != []) {\n              if (result.RecordList.length > 0) {\n                recordCount = result.TotalRecord;\n                totalPages = Math.ceil(recordCount / pageSize);\n                pageCtrls();\n                if (sqlFlag) {\n                  sqlGrid(result.RecordList);\n                  $sqlResultDiv.hide();\n                }\n                if (sqlGenerateFlag) {\n                  sqlGeneratorGrid(result.RecordList);\n                  $sqlResultDiv.hide();\n                }\n                pagingPlusBtnDiv.removeClass('d-none');\n                pagingPlusBtnDiv.addClass('d-flex justify-content-between align-items-center');\n              } else {\n                if (sqlFlag) {\n                  $testSqlBtn.val(testSQL);\n                  $queryResultGrid.hide();\n                  $query.show();\n                  $selectQuery.show();\n                  emailContentDiv.show();\n                  $saveBtn.hide();\n                }\n                if (sqlGenerateFlag) {\n                  $selectGeneratorQuery.show();\n                  gridDiv2.hide();\n                  $sqlGeneratorQueryResultGrid.hide();\n                  $testSqlGeneratorBtn.val(testSQL);\n                }\n                $sqlResultDiv.show();\n                $sqlResultDiv.text(VIS.Msg.getMsg(\"NoRecordFound\"));\n                $saveGeneratorBtn.hide();\n                // Removed the paging if result is null\n                pagingPlusBtnDiv.addClass('d-none');\n                pagingPlusBtnDiv.removeClass('d-flex justify-content-between align-items-center');\n                $testSqlGeneratorBtn.removeClass('vas-show-grid');\n                $sqlResultDiv.addClass('vas-sql-result-error');\n              }\n            } else {\n              if (sqlFlag) {\n                $testSqlBtn.val(testSQL);\n                $queryResultGrid.hide();\n                $query.show();\n                $selectQuery.show();\n                emailContentDiv.show();\n                $saveBtn.hide();\n              }\n              if (sqlGenerateFlag) {\n                $selectGeneratorQuery.show();\n                gridDiv2.hide();\n                $sqlGeneratorQueryResultGrid.hide();\n                $testSqlGeneratorBtn.val(testSQL);\n              }\n              $testSqlBtn.removeClass('vas-show-grid');\n              $sqlResultDiv.show();\n              $sqlResultDiv.text(VIS.Msg.getMsg(\"VAS_ValidQuery\"));\n              $saveGeneratorBtn.hide();\n              $testSqlGeneratorBtn.removeClass('vas-show-grid');\n              $sqlResultDiv.addClass('vas-sql-result-error');\n              // Removed the paging if result is null\n              pagingPlusBtnDiv.addClass('d-none');\n              pagingPlusBtnDiv.removeClass('d-flex justify-content-between align-items-center');\n            }\n          },\n          error: function (error) {\n            console.log(error);\n          }\n        });\n      }\n    }\n\n    /*\r\n      Showing selected checkbox on top position\r\n    */\n    //function onTopSelCheckbox(checkBoxes) {\n    //    var origOrder = checkBoxes.children();\n    //    checkBoxes.on(\"click\", \":checkbox\", function () {\n    //        var i, checked = document.createDocumentFragment(),\n    //            unchecked = document.createDocumentFragment();\n    //        for (i = 0; i < origOrder.length; i++) {\n    //            if (origOrder[i].getElementsByTagName(\"input\")[0].checked) {\n    //                checked.appendChild(origOrder[i]);\n    //            } else {\n    //                unchecked.appendChild(origOrder[i]);\n    //            }\n    //        }\n    //        checkBoxes.append(checked).append(unchecked);\n    //    });\n    //}\n\n    /*\r\n        Function to load the grids with result\r\n        in SQL & SQL Generator Tab\r\n    */\n\n    function sqlGrid(result) {\n      sqlGridCols = [];\n      for (var i = 0; i < Object.keys(result[0]).length; i++) {\n        if (Object.keys(result[0])[i] != 'recid') {\n          sqlGridCols.push({\n            field: Object.keys(result[0])[i],\n            caption: Object.keys(result[0])[i],\n            size: '130px'\n          });\n        }\n      }\n      if (this.dGrid != null) {\n        this.dGrid.destroy();\n        this.dGrid = null;\n      }\n      this.dGrid = $(gridDiv).w2grid({\n        name: \"gridForm\" + $self.windowNo,\n        recordHeight: 35,\n        multiSelect: true,\n        columns: sqlGridCols,\n        records: w2utils.encodeTags(result)\n      });\n      $selectQuery.hide();\n      emailContentDiv.hide();\n      $query.hide();\n      $queryResultGrid.show();\n    }\n\n    /*Grid Generation for SQL generator*/\n\n    function sqlGeneratorGrid(result) {\n      sqlGeneratorGridCols = [];\n      for (var i = 0; i < Object.keys(result[0]).length; i++) {\n        if (Object.keys(result[0])[i] != 'recid') {\n          sqlGeneratorGridCols.push({\n            field: Object.keys(result[0])[i],\n            caption: Object.keys(result[0])[i],\n            size: '130px'\n          });\n        }\n      }\n      if (this.dGridGen != null) {\n        this.dGridGen.destroy();\n        this.dGridGen = null;\n      }\n      this.dGridGen = $(gridDiv2).w2grid({\n        name: \"gridForm2\" + $self.windowNo,\n        recordHeight: 35,\n        multiSelect: true,\n        columns: sqlGeneratorGridCols,\n        records: w2utils.encodeTags(result)\n      });\n      $selectGeneratorQuery.hide();\n      gridDiv2.show();\n      $sqlGeneratorQueryResultGrid.show();\n    }\n    function filterOnChange(self, $filterSelectedItem) {\n      let $filterItemVal = self.attr('value');\n      var htmlString = '';\n      //$filterValBlock.find('input').val('');\n      // $filterNewColumnInput.val('');\n\n      // $filterValueDiv.hide();\n      // $filterValExchangeIconBlock.show();\n      $filterValueDiv.find('input').val('');\n      $filterValInput.val('');\n      self.parent($filterColumnName).prev($filterInputBlock).find($filterColumnInput).val($filterItemVal);\n      $filterSelectedItem.removeClass('active');\n      self.addClass('active');\n      var activeItemDataType = $filterColumnName.children('.vas-column-list-item.active').attr('datatype');\n      // Show the Column textbox if data types are 12, 29 etc..\n      if (activeItemDataType == 12 || activeItemDataType == 29 || activeItemDataType == 22 || activeItemDataType == 47) {\n        $filterValueDiv.show();\n        $filterValExchangeIconBlock.hide();\n      } else {\n        $filterValueDiv.hide();\n        $filterValExchangeIconBlock.show();\n      }\n      self.parent($filterColumnName).prev($filterInputBlock).find($filterColumnInput).attr('datatype', activeItemDataType);\n      var activeItemColId = $filterColumnName.children('.vas-column-list-item.active').attr('columnid');\n      self.parent($filterColumnName).prev($filterInputBlock).find($filterColumnInput).attr('columnid', activeItemColId);\n      $filterColumnName.hide();\n      $filterCurrentDate.find('input').prop('checked', false);\n      $filterDateDiv.hide();\n      $filterValDropdown.empty();\n      var displayType = self.attr(\"datatype\");\n      var columnName = self.attr(\"DBColumnName\");\n      var tableName = self.attr(\"TableName\");\n      var refrenceValue = self.attr('refvalid');\n      if (!VIS.DisplayType.IsLookup(displayType)) {\n        for (var i = 0; i < record.length; i++) {\n          if (record[i][columnName]) {\n            htmlString += '<div class=\"vas-filterValItem\" isNameExist=\"' + false + '\"DBColumnName=\"' + columnName + '\" tableName=\"' + tableName + '\" value=\"' + record[i][columnName] + '\">' + record[i][columnName] + '</div>';\n          }\n        }\n      }\n      $filterValDropdown.append(htmlString);\n      $filterofMultipleColumns.find('i').removeClass('vas-showAnotherColControl');\n      $filterNewColumn.hide();\n      $filterValExchangeIconBlock.find('input').prop('disabled', false);\n      $filterValueDiv.find('input').prop('disabled', false);\n      $filterValExchangeIconBlock.find('.vas-arrow-down').css('pointer-events', 'all');\n\n      /*Click event on New Column Dropdown Item */\n      $filterCol2Block.children('.vas-column-list-item').off(VIS.Events.onTouchStartOrClick);\n      $filterCol2Block.children('.vas-column-list-item').on(VIS.Events.onTouchStartOrClick, function () {\n        var itemText = $(this).attr('value');\n        $filterNewColumnInput.val(itemText);\n        $filterCol2Block.children('.vas-column-list-item').removeClass('vas-selected-filterVal');\n        $(this).addClass('vas-selected-filterVal');\n      });\n\n      /* Keyup Event for Filter Value Items in Dropdown */\n      $filterValBlock.find('input').off(\"keyup\");\n      $filterValBlock.find('input').on(\"keyup\", function () {\n        var $filterValLowerCase = $(this).val();\n        var $filterValSelectItem = $filterValDropdown.children('.vas-filterValItem');\n        if ($filterValLowerCase.length > 1) {\n          var tname = $filterValSelectItem.attr('tablename');\n          var isNameExist = $filterValSelectItem.attr('isNameExist');\n          var data = getIdsName(columnName, tname, displayType, $filterValLowerCase, isNameExist, activeItemColId, refrenceValue);\n          if (data && data.length > 0) {\n            var htmlString = '';\n            $filterValDropdown.empty();\n            for (var k = 0; k < data.length; k++) {\n              if (data[k].Value) {\n                htmlString += '<div class=\"vas-filterValItem\" isNameExist=\"' + data[k].isNameExist + '\" DBColumnName=\"' + columnName + '\" tableName=\"' + data[k].tableName + '\" value=\"' + data[k].Value + '\">' + data[k].Name + '</div>';\n              }\n            }\n            $filterValDropdown.append(htmlString);\n            $filterValSelectItem = $filterValDropdown.children('.vas-filterValItem');\n            $filterValSelectItem.off(VIS.Events.onTouchStartOrClick);\n            $filterValSelectItem.on(VIS.Events.onTouchStartOrClick, function () {\n              $filterValDropdown.find('.vas-filterValItem').removeClass('vas-selected-filterVal');\n              $(this).addClass('vas-selected-filterVal');\n              var $filterValDropdownText = $(this).text();\n              $filterValBlock.find('input').val($filterValDropdownText);\n            });\n            $filterValDropdown.show();\n            return;\n          }\n        }\n        var $filterValSelectItemLength = $filterValSelectItem.length;\n        $filterValSelectItem.removeClass('vas-selected-filterVal');\n        if ($filterValSelectItemLength > 0) {\n          $filterValDropdown.show();\n          $filterValSelectItem.filter(function () {\n            $(this).toggle($(this).text().toLowerCase().indexOf($filterValLowerCase) > -1);\n          });\n        } else {\n          $filterValDropdown.hide();\n        }\n        if (!$filterValSelectItem.is(':visible')) {\n          $filterValDropdown.hide();\n        }\n      });\n      switchValueBtn.css(\"pointer-events\", \"all\");\n      $filterOperator.removeClass('vas-checkboxoption-hidden');\n      $filterOperator.removeClass('vas-remove-isnulloption');\n      $filterOperator.removeClass('vas-add-isnulloption');\n      $filterOperator.removeClass('vas-remove-likeoption');\n      $filterOperator.removeClass('vas-comparision-opeartor');\n      if (displayType == VIS.DisplayType.Date || displayType == VIS.DisplayType.DateTime) {\n        $filterValue.attr('type', 'date');\n        $filterValue.prev('label').removeClass('vas-label-space');\n        $filterOperator.addClass('vas-add-isnulloption');\n        $filterOperator.addClass('vas-remove-likeoption');\n        $filterOperator.addClass('vas-comparision-opeartor');\n        $filterValExchangeIconBlock.hide();\n        $filterValueDiv.show();\n        $filterDateDiv.show();\n        txtDay.prop(\"readonly\", true);\n        isDynamic.prop(\"disabled\", false);\n        $filterDateList.prop(\"disabled\", true);\n        $filterCurrentDate.on('change', 'input[type=\"checkbox\"]', function () {\n          if ($(this).is(':checked')) {\n            $filterValueDiv.find('input').prop('disabled', true);\n            switchValueBtn.css(\"pointer-events\", \"none\");\n          } else {\n            $filterValueDiv.find('input').prop('disabled', false);\n            switchValueBtn.css(\"pointer-events\", \"all\");\n          }\n        });\n        $filterValueDiv.on('change', 'input[type=\"date\"]', function () {\n          if ($(this).val()) {\n            $filterDateDiv.find('input[type=\"checkbox\"]').attr('disabled', true);\n          } else {\n            $filterDateDiv.find('input[type=\"checkbox\"]').removeAttr('disabled');\n          }\n        });\n      } else if (VIS.DisplayType.IsLookup(displayType)) {\n        $filterValue.attr('type', 'number');\n        $filterValue.prev('label').removeClass('vas-label-space');\n        $filterOperator.addClass('vas-remove-likeoption');\n        var data = getIdsName(columnName, tableName, displayType, null, false, activeItemColId, refrenceValue);\n        if (data && data.length > 0) {\n          $filterValDropdown.empty();\n          htmlString = '';\n          for (var i = 0; i < data.length; i++) {\n            if (data[i].Value) {\n              htmlString += '<div class=\"vas-filterValItem\" isNameExist=\"' + data[i].isNameExist + '\" DBColumnName=\"' + columnName + '\" tableName=\"' + data[i].tableName + '\" value=\"' + data[i].Value + '\">' + data[i].Name + '</div>';\n            }\n          }\n          $filterValDropdown.append(htmlString);\n        }\n      } else if (displayType == VIS.DisplayType.Integer || displayType == VIS.DisplayType.Amount || displayType == VIS.DisplayType.ID) {\n        $filterValue.attr('type', 'number');\n        $filterValue.prev('label').removeClass('vas-label-space');\n        $filterOperator.addClass('vas-remove-likeoption');\n      } else if (displayType == VIS.DisplayType.String || VIS.DisplayType.List == displayType || VIS.DisplayType.Text == displayType || VIS.DisplayType.TextLong == displayType) {\n        $filterValue.attr('type', 'textbox');\n        $filterValue.prev('label').removeClass('vas-label-space');\n        $filterOperator.addClass('vas-add-likeoption');\n        $filterOperator.addClass('vas-add-isnulloption');\n      } else if (displayType == VIS.DisplayType.YesNo) {\n        $filterValue.attr('type', 'checkbox');\n        $filterValue.prev('label').addClass('vas-label-space');\n        $filterOperator.addClass('vas-checkboxoption-hidden');\n        $filterOperator.addClass('vas-remove-isnulloption');\n        $filterValExchangeIconBlock.hide();\n        $filterValueDiv.show();\n      } else {\n        $filterValue.attr('type', 'textbox');\n        $filterValue.prev('label').removeClass('vas-label-space');\n      }\n      /* Click Event for Filter Value Items in Dropdown */\n      $filterValDropdown.find('.vas-filterValItem').off(VIS.Events.onTouchStartOrClick);\n      $filterValDropdown.find('.vas-filterValItem').on(VIS.Events.onTouchStartOrClick, function () {\n        $filterValDropdown.find('.vas-filterValItem').removeClass('vas-selected-filterVal');\n        $(this).addClass('vas-selected-filterVal');\n        var $filterValDropdownText = $(this).attr('value');\n        $filterValBlock.find('input').val($(this).text());\n        $filterValBlock.find('input').attr('columnId', $filterValDropdownText);\n      });\n    }\n\n    /**\r\n     * Added the attributes when user change the dropdown value in Add Sort Section\r\n     * @param {any} self\r\n     * @param {any} $sortSelectedItem\r\n     */\n    function sortOnChange(self, $sortSelectedItem) {\n      let $sortByItemVal = self.attr('value');\n      self.parent($sortByDropdown).prev($sortInputBlock).find($sortColumnInput).val($sortByItemVal);\n      $sortSelectedItem.removeClass('active');\n      self.addClass('active');\n      var activeItemDataType = $sortByDropdown.children('.vas-column-list-item.active').attr('datatype');\n      self.parent($sortByDropdown).prev($sortInputBlock).find($sortColumnInput).attr('sortdatatype', activeItemDataType);\n      var activeItemColId = $sortByDropdown.children('.vas-column-list-item.active').attr('columnID');\n      self.parent($sortByDropdown).prev($sortInputBlock).find($sortColumnInput).attr('sortcolumnID', activeItemColId);\n      var activeItemColDB = $sortByDropdown.children('.vas-column-list-item.active').attr('DBColumnName');\n      self.parent($sortByDropdown).prev($sortInputBlock).find($sortColumnInput).attr('sortDBColumnName', activeItemColDB);\n      var activeItemrefID = $sortByDropdown.children('.vas-column-list-item.active').attr('refValId');\n      self.parent($sortByDropdown).prev($sortInputBlock).find($sortColumnInput).attr('sortrefValId', activeItemrefID);\n      var activeItemChkParent = $sortByDropdown.children('.vas-column-list-item.active').attr('isParent');\n      self.parent($sortByDropdown).prev($sortInputBlock).find($sortColumnInput).attr('sortisParent', activeItemChkParent);\n      var activeItemtable = $sortByDropdown.children('.vas-column-list-item.active').attr('TableName');\n      self.parent($sortByDropdown).prev($sortInputBlock).find($sortColumnInput).attr('sortTableName', activeItemtable);\n    }\n    function getIdsName(columnName, tableName, displayType, whereClause, isNameExist, columnID, refrenceValueID) {\n      var results = null;\n      $.ajax({\n        url: VIS.Application.contextUrl + \"AlertSQLGenerate/GetIdsName\",\n        type: \"POST\",\n        async: false,\n        data: {\n          columnName: columnName,\n          tableName: tableName,\n          displayType: displayType,\n          whereClause: whereClause,\n          isNameExist: isNameExist,\n          columnID: columnID,\n          refrenceValueID: refrenceValueID,\n          windowNo: $self.windowNo\n        },\n        success: function (result) {\n          result = JSON.parse(result);\n          if (result && result.length > 0) {\n            results = result;\n          }\n        },\n        error: function (error) {\n          console.log(error);\n        }\n      });\n      return results;\n    }\n\n    /*\r\n       Clears the values of controls used\r\n    */\n    function clear() {\n      $self.BasedOn = \"\";\n      lblBottomMsg.text(\"\");\n      tableID = 0;\n      EventTable = 0;\n      mainTableName = \"\";\n      tabID = 0;\n      $selectGeneratorQuery.text('');\n      joinsArray = [];\n      $joins.empty();\n      filterArray = [];\n      Joinrecord = [];\n      record = [];\n      $sortCollection.empty();\n      $filters.empty();\n      $filterCol2Block.empty();\n      $windowFieldColumnSelect.addClass(\"vis-ev-col-mandatory\");\n      getColumns(0, 0);\n      getJoinsColumns(0, 0);\n      $filterofMultipleColumns.find('i').removeClass('vas-showAnotherColControl');\n      $filterValueDiv.show();\n      $filterValExchangeIconBlock.hide();\n      $filterNewColumn.hide();\n      $filterValDropdown.hide();\n      $filterValDropdown.empty();\n      $joinsDiv.css(\"pointer-events\", \"none\");\n      $filterDiv.css(\"pointer-events\", \"none\");\n      $sortByDiv.css(\"pointer-events\", \"none\");\n      $checkBoxes.hide();\n      $checkBoxes.children('.vas-column-list-item').find('input[type=\"checkbox\"]').prop('checked', false);\n      $(\".vas-column-checkbox\").prop(\"checked\", false);\n      $sortColumnInput.val('');\n      $filterColumnInput.val('');\n      $windowTabSelect.getControl().addClass(\"vis-ev-col-mandatory\");\n      $fieldColDropdown.addClass(\"vis-ev-col-mandatory\");\n      $filterSelectArrow.css('pointer-events', 'all');\n      $addFilterBtn.val(VIS.Msg.getMsg(\"VAS_AddFilter\"));\n      $sortByDiv.removeClass('active');\n      $joinsDiv.removeClass('active');\n      $filterDiv.removeClass('active');\n      $txtJoinWindow.empty();\n      getJoinWindow(0, 0);\n      $selectGeneratorQuery.show();\n      gridDiv2.hide();\n      $sqlGeneratorQueryResultGrid.hide();\n      $saveGeneratorBtn.hide();\n      $testSqlGeneratorBtn.val(testSQL);\n      $sqlResultDiv.hide();\n      $filterDateDiv.hide();\n      andFlag = true;\n      $windowTabSelect.setValue(null);\n      addedOptions = [];\n      joinColumnName = [];\n      seletedJoinCloumn = [];\n      joinData = null;\n      $filterValue.attr('type', 'Textbox');\n      $filterValue.val('');\n      joinCommonColumn = [];\n      $baseTableJoinInput.val('');\n      $joiningTableInput.val('');\n      $joinOnFieldColumnMainTable.empty();\n      $joinOnFieldColumnJoinTable.empty();\n      $filterValBlock.find('input').val('');\n      $filterNewColumnInput.val('');\n      whereJoinClause = '';\n      pagingPlusBtnDiv.addClass('d-none');\n      pagingPlusBtnDiv.removeClass('d-flex justify-content-between align-items-center');\n      sortValuesArray = [];\n      sortedIndex = -1;\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n    this.disposeComponent = function () {\n      if ($testSqlBtn) $testSqlBtn.off(VIS.Events.onTouchStartOrClick);\n      if ($testSqlGeneratorBtn) $testSqlGeneratorBtn.off(VIS.Events.onTouchStartOrClick);\n      if ($filters) $filters.off(VIS.Events.onTouchStartOrClick);\n      if ($sqlBtn) $sqlBtn.off(VIS.Events.onTouchStartOrClick);\n      //if ($sqlGeneratorBtn)\n      //    $sqlGeneratorBtn.off(VIS.Events.onTouchStartOrClick);\n      if ($joinsDiv) $joinsDiv.off(VIS.Events.onTouchStartOrClick);\n      if ($filterDiv) $filterDiv.off(VIS.Events.onTouchStartOrClick);\n      if ($sortByDiv) $sortByDiv.off(VIS.Events.onTouchStartOrClick);\n      if ($windowFieldColumnSelect) $windowFieldColumnSelect.off(VIS.Events.onTouchStartOrClick);\n      if ($joinsSelect) $joinsSelect.off(VIS.Events.onTouchStartOrClick);\n      if ($saveBtn) $saveBtn.off(VIS.Events.onTouchStartOrClick);\n      if ($saveGeneratorBtn) $saveGeneratorBtn.off(VIS.Events.onTouchStartOrClick);\n      if ($addFilterBtn) $addFilterBtn.off(VIS.Events.onTouchStartOrClick);\n      if ($joins) $joins.off(VIS.Events.onTouchStartOrClick);\n      if ($addJoinBtn) $addJoinBtn.off(VIS.Events.onTouchStartOrClick);\n      if ($addSortBtn) $addSortBtn.off(VIS.Events.onTouchStartOrClick);\n      if ($root != null) {\n        $root.remove();\n      }\n      $root = null;\n      $self = null;\n      $sqlBtn = null;\n      $sqlGeneratorBtn = null;\n      $testSqlGeneratorBtn = null;\n      $testSqlBtn = null;\n      $saveBtn = null;\n      $saveGeneratorBtn = null;\n      $addJoinBtn = null;\n      $addFilterBtn = null;\n      $addSortBtn = null;\n      $sqlGeneratorContent = null;\n      $joinsDropdown = null;\n      $joinOnFieldColumnMainTable = null;\n      $joinOnFieldColumnJoinTable = null;\n      $filterOperator = null;\n      $filterConditionV2 = null;\n      $filterValue = null;\n      $sortElements = null;\n      removeColumnJoins = null;\n      oldFilterVal = null;\n      pageNo = 1;\n      recordCount = 0;\n      filterIndex = null;\n      sortedIndex = -1;\n      this.getRoot = null;\n      this.dGrid = null;\n      this.disposeComponent = null;\n    };\n  };\n\n  /*\r\n      Function to start the Tab Panel\r\n  */\n  VAS.TabAlertRuleSql.prototype.startPanel = function (windowNo, curTab) {\n    this.windowNo = windowNo;\n    this.curTab = curTab;\n    this.init();\n  };\n\n  /*\r\n      Function to update tab panel based on selected record\r\n  */\n  VAS.TabAlertRuleSql.prototype.refreshPanelData = function (ParentId, selectedRow) {\n    this.ParentId = ParentId;\n    this.selectedRow = selectedRow;\n    this.SqlQuery(ParentId);\n  };\n\n  /*\r\n      Function to resize tab panel based on selected record\r\n  */\n\n  VAS.TabAlertRuleSql.prototype.sizeChanged = function (width) {\n    this.panelWidth = width;\n  };\n\n  // Function of Memory Dealocation\n  VAS.TabAlertRuleSql.prototype.dispose = function () {\n    this.windowNo = 0;\n    this.curTab = null;\n    this.rowSource = null;\n    this.panelWidth = null;\n    this.disposeComponent();\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/TabAlertRuleSql.js?\n}")},"./Areas/VAS/Scripts/app/forms/UnAllocatedPaymentTabPanel.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get UnAllocated Payments\r\n * chronological  : Development\r\n * Created Date   : 08 August 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.UnAllocatedPaymentTabPanel = function () {\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var $self = this;\n    var ctx = this.ctx;\n    /*Stored messages which is to be translated*/\n    var elements = [\"DateTrx\", \"DateAcct\", \"VAS_PayNo\", \"VAS_Amount\", \"C_Payment_ID\", \"AD_Org_ID\", \"VAS_UnaAllocatedPayTabPanel\", \"VAS_Zoom\", \"AD_Window_ID\", \"C_ConversionType_ID\", \"VAS_RecordNo\"];\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    var $root = $('<div class=\"VAS-unallocated-flyout\" style=\"width: 100%;\">');\n    var wrapperDiv = $('<div class=\"VAS-payment-details\">');\n    /*this is init fucntion to create design*/\n    this.init = function () {\n      var UnAllocatedPaymentList = $('<ul id=\"VAS-unallocated_' + $self.windowNo + '\"></ul></div>');\n      wrapperDiv.append(UnAllocatedPaymentList);\n      $root.append(wrapperDiv);\n    };\n    /**\r\n    * this fucntion is used to zoom to payment window for the record which is clicked from grid\r\n    * @param {any} PaymentId\r\n    * @param {any} windowId\r\n    */\n    function handleZoomClick(PaymentId, windowId) {\n      if (windowId > 0) {\n        var zoomQuery = new VIS.Query();\n        zoomQuery.addRestriction(\"C_Payment_ID\", VIS.Query.prototype.EQUAL, PaymentId);\n        zoomQuery.setRecordCount(1);\n        VIS.viewManager.startWindow(windowId, zoomQuery);\n      }\n    }\n    /**\r\n    * this fucntion is used to get the unallocated payment for particular bussiness partner\r\n    * @param {any} C_BPartner_ID\r\n    * @param {any} IsSoTrx\r\n    * @param {any} AD_Org_ID\r\n    */\n    this.getUnAllocatedPayData = function (C_BPartner_ID, IsSoTrx, AD_Org_ID) {\n      $.ajax({\n        url: VIS.Application.contextUrl + \"VAS/PoReceipt/GetUnAllocatedPayData\",\n        type: \"GET\",\n        dataType: \"json\",\n        contentType: \"application/json; charset=utf-8\",\n        data: {\n          C_BPartner_ID: C_BPartner_ID,\n          IsSoTrx: IsSoTrx,\n          AD_Org_ID: AD_Org_ID\n        },\n        success: function (res) {\n          wrapperDiv.find('#VAS-unallocated_' + $self.windowNo).empty();\n          var gridDataResult = JSON.parse(res);\n          for (var i = 0; i < gridDataResult.length; i++) {\n            var TabPaneldesign = '<li>' + '<span class=\"VAS-search-link\">' + '<i class=\"glyphicon glyphicon-zoom-in\" data-PaymentId=\"' + gridDataResult[i].C_Payment_ID + '\" data-windowId=\"' + gridDataResult[i].AD_Window_ID + '\" id=\"VAS-unAllocatedZoom_' + $self.windowNo + '\"></i>' + '</span>' +\n            //'<div class=\"form-check\">' +\n            //'<input class=\"form-check-input position-static\" type=\"checkbox\" id=\"blankCheckbox\" value=\"option1\" aria-label=\"...\"> ' +\n            //'</div>' +\n            '<div class=\"VAS-payment-opt w-100\">' + '<div class=\"VAS-paymentDetail\">' + '<div class=\"VAS-payment-val\">' + '<label for=\"\" title=\"' + VAS.translatedTexts.VAS_PayNo + '\">' + VAS.translatedTexts.VAS_PayNo + '</label>' + '<span class=\"vas-ualdocno\" title=\"' + gridDataResult[i].DocumentNo + '\">' + gridDataResult[i].DocumentNo + '</span>' + '</div>' + '<div class=\"VAS-payment-val\">' + '<label for=\"\" title=\"' + VAS.translatedTexts.DateAcct + '\">' + VAS.translatedTexts.DateAcct + '</label>' + '<span>' + VIS.Utility.Util.getValueOfDate(gridDataResult[i].DateAcct).toLocaleDateString() + '</span>' + '</div>' +\n            //'<div class=\"VAS-payment-val\">' +\n            //'<label for=\"\" title=\"' + VAS.translatedTexts.DateTrx +'\">' + VAS.translatedTexts.DateTrx + '</label>' +\n            //'<span>' + VIS.Utility.Util.getValueOfDate(gridDataResult[i].DateTrx).toLocaleDateString() +'</span>' +\n            //'</div>' +\n            '<div class=\"VAS-paymentDetail VAS-grid-col1\">' + '<div class=\"VAS-payment-val\">' + '<label for=\"\" title=\"' + VAS.translatedTexts.VAS_Amount + '\">' + VAS.translatedTexts.VAS_Amount + '</label>' + '<span class=\"VAS-totalPrice\">' + gridDataResult[i].PayAmt.toLocaleString(window.navigator.language, {\n              minimumFractionDigits: gridDataResult[i].StdPrecision,\n              maximumFractionDigits: gridDataResult[i].StdPrecision\n            }) + ' ' + gridDataResult[i].CurrencyName + '</span>' + '</div>' + '</div>' + '</div>' + '</div>' + '</li>';\n            //Appending design to wrapperDiv\n            wrapperDiv.find('#VAS-unallocated_' + $self.windowNo).append(TabPaneldesign);\n          }\n          //Applied click event fro zoom window\n          wrapperDiv.find('.glyphicon-zoom-in').on(\"click\", function () {\n            var PaymentId = VIS.Utility.Util.getValueOfInt($(this).attr(\"data-PaymentId\"));\n            var windowId = VIS.Utility.Util.getValueOfInt($(this).attr(\"data-windowId\"));\n            handleZoomClick(PaymentId, windowId);\n          });\n        },\n        error: function (eror) {\n          console.log(eror);\n        }\n      });\n    };\n    /*this fucntion is used to get the root for design*/\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.UnAllocatedPaymentTabPanel.prototype.startPanel = function (windowNo, curTab) {\n      this.windowNo = windowNo;\n      this.curTab = curTab;\n      $self.windowNo = windowNo;\n      this.init();\n    };\n    /* This function to update tab panel based on selected record */\n    VAS.UnAllocatedPaymentTabPanel.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getUnAllocatedPayData(selectedRow.c_bpartner_id, selectedRow.issotrx, selectedRow.ad_org_id);\n    };\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.UnAllocatedPaymentTabPanel.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n    /* Disposing all variables from memory */\n    VAS.UnAllocatedPaymentTabPanel.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.curTab = null;\n      this.selectedRow = null;\n      this.panelWidth;\n      lblTitle = null;\n      ctx = this.ctx;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/UnAllocatedPaymentTabPanel.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ARInvoiceWidget.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Created Widget To get AR Invoice Data\r\n * chronological  : Development\r\n * Created Date   : 21 August 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_ARInvoiceWidget = function () {\n    this.frame;\n    this.windowNo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $(\'<div class="h-100 w-100">\');\n    var $maindiv = $(\'<div class="vas-arwidg-receivable-container">\');\n    var ctx = this.ctx;\n    var TotalAmtArray = [];\n    var culture = new VIS.CultureSeparator();\n    var msgArray = null;\n    var widgetID = null;\n    var unit = null;\n    /*Intialize function will intialize busy indiactor*/\n    this.initalize = function () {\n      widgetID = VIS.Utility.Util.getValueOfInt(this.widgetInfo.AD_UserHomeWidgetID) != 0 ? this.widgetInfo.AD_UserHomeWidgetID : $self.windowNo;\n      createBusyIndicator();\n      $bsyDiv[0].style.visibility = "visible";\n    };\n\n    /*This function will load data in widget */\n    this.intialLoad = function () {\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "VAS/PoReceipt/GetARInvSchData", {\n        "ISOtrx": VIS.Env.getCtx().isSOTrx($self.windowNo)\n      }, function (dr) {\n        var gridDataResult = dr;\n        if (gridDataResult != null && gridDataResult.length > 0) {\n          /* This function used to intialize the image*/\n          InitailizeMessage();\n          //Seprating the value\n          convertAmountToDotFormat(gridDataResult[5].arTotalAmtWidget[0].totalAmt.toLocaleString(window.navigator.language, {\n            minimumFractionDigits: gridDataResult[0].stdPrecision,\n            maximumFractionDigits: gridDataResult[0].stdPrecision\n          }));\n          $maindiv.append(\'  <div class="vas-arwidg-totalAmt-box" id="vas_arwidtotaamtContainer_\' + widgetID + \'">\' + \'    <div class="vas-arwidg-totalRec-amount">\' + \'      <h1 class="vas-arwidg-rtl-amt">\' + TotalAmtArray[0] + \'<span class="vas-arwidg-cur-symbol">\' + TotalAmtArray[1] + \'<span>\' + \'<span class="vas-arwidg-Symbol">\' + gridDataResult[4].Symbol + \'</span></h1>\' + \'      <div class="vas-arwidg-totalRecTxt">\' + (VIS.Env.getCtx().isSOTrx($self.windowNo) == true ? VAS.translatedTexts.VAS_TotalRec : VAS.translatedTexts.VAS_TotalPurchase) + \'</div>\' + \'    </div>\' + \'  </div>\');\n          var listDesign = $(\'<div class="vas-arwidg-rec-listing" id="vas_listContainer_\' + widgetID + \'">\');\n          for (var i = 0; i < gridDataResult.length - 1; i++) {\n            var widgetDataDesign = \'<div class="vas-arwidg-receiveTxt-box">\' + \'<div class="vas-arwidg-orderTxt">\' + msgArray[i] + \'</div>\' + \'<div class="vas-arwidg-recBox-amt">\' + \'<span class="vas-vaswidg-Symbol">\' + gridDataResult[i].Symbol + \'</span>\' + formatLargeNumber(gridDataResult[i].daysAmt, gridDataResult[i].stdPrecision) + unit;\n            \'</div>\' + \'</div>\';\n            listDesign.append(widgetDataDesign);\n          }\n          $maindiv.append(listDesign);\n          $root.append($maindiv);\n        }\n        $bsyDiv[0].style.visibility = "hidden";\n      });\n    };\n    /**\r\n    * This Function is responsible converting the value into million\r\n    * @param {any} number\r\n    * @param {any} stdPrecision\r\n    */\n    function formatLargeNumber(number, stdPrecision) {\n      // Determine the sign of the number\n      var isNegative = number < 0;\n      // Work with the absolute value for formatting\n      var absNumber = Math.abs(number);\n      var formattedNumber;\n\n      // Determine the unit and format the number accordingly\n      if (absNumber >= 1000000000000) {\n        /* Trillion */\n        unit = VAS.translatedTexts.VAS_Trillion;\n        formattedNumber = (absNumber / 1000000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (absNumber >= 1000000000) {\n        /* Billion */\n        unit = VAS.translatedTexts.VAS_Billion;\n        formattedNumber = (absNumber / 1000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else {\n        unit = \'\';\n        formattedNumber = absNumber.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: stdPrecision,\n          maximumFractionDigits: stdPrecision\n        });\n      }\n      // Return the formatted number with the correct sign and unit\n      return (isNegative ? \'-\' : \'\') + formattedNumber;\n    }\n    /*This function will show busy indicator in widget */\n    function createBusyIndicator() {\n      $bsyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis_widgetloader"></i></div></div>\');\n      $bsyDiv.css({\n        "position": "absolute",\n        "width": "98%",\n        "height": "97%",\n        \'text-align\': \'center\',\n        \'z-index\': \'999\'\n      });\n      $bsyDiv[0].style.visibility = "visible";\n      $root.append($bsyDiv);\n    }\n    ;\n    /**\r\n    * This Function is responsible for dividing total amount in array\r\n    * @param {any} AmtVal\r\n    */\n    function convertAmountToDotFormat(AmtVal) {\n      //Get decimal seperator\n      var isDotSeparator = culture.isDecimalSeparatorDot(window.navigator.language);\n      if (!isDotSeparator) {\n        if (AmtVal.contains(",")) {\n          TotalAmtArray = AmtVal.split(",");\n          TotalAmtArray[3] = ",";\n        }\n      } else {\n        TotalAmtArray = AmtVal.split(".");\n        TotalAmtArray[3] = ".";\n      }\n      //If decimal separator is zero then not to consider its value\n      if (VIS.Utility.Util.getValueOfDecimal(TotalAmtArray[1]) == 0) {\n        TotalAmtArray[1] = "";\n      }\n    }\n    /*This function used translate message*/\n    function InitailizeMessage() {\n      /*Inisalised Element for array*/\n      var elements = ["VAS_30", "VAS_30to60", "VAS_60to90", "VAS_90to120", "VAS_Older", "VAS_TotalRec", "VAS_TotalPurchase", "VAS_Trillion", "VAS_Billion"];\n      VAS.translatedTexts = VIS.Msg.translate(VIS.Env.getCtx(), elements, true);\n      msgArray = [VAS.translatedTexts.VAS_30, VAS.translatedTexts.VAS_30to60, VAS.translatedTexts.VAS_60to90, VAS.translatedTexts.VAS_90to120, VAS.translatedTexts.VAS_Older];\n    }\n    /*This function used to get root*/\n    this.getRoot = function () {\n      return $root;\n    };\n    /*this function is used to refresh design and data of widget*/\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = "visible";\n      $maindiv.find(\'#vas_arwidtotaamtContainer_\' + widgetID).remove();\n      $maindiv.find(\'#vas_listContainer_\' + widgetID).remove();\n      $self.intialLoad();\n    };\n  };\n  VAS.VAS_ARInvoiceWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad();\n    }, 50);\n  };\n  VAS.VAS_ARInvoiceWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  /*this function is called when widget size changes*/\n  VAS.VAS_ARInvoiceWidget.prototype.widgetSizeChange = function (widget) {\n    //this.getRoot().css("height", widget.height);\n    //this.getRoot().css("width", widget.width);\n    this.widgetInfo = widget;\n  };\n  /*Used to dispose the variable*/\n  VAS.VAS_ARInvoiceWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ARInvoiceWidget.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_BankBalanceWidget.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Bank Balance Widget\r\n * chronological  : Development\r\n * Created Date   : 19 Sep 2024\r\n * Created by     : VIS103\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_BankBalanceWidget = function () {\n    this.frame;\n    this.windowNo;\n    var $self = this;\n    var $root;\n    var $bsyDiv;\n    var $divBankBal;\n    var $divBankDet;\n    var $divBankBody;\n    var CurrentPage = 0;\n    var pageSize = 4;\n    var bankBalData = [];\n    var $prevArrowBank;\n    var $pageInfo;\n    var widgetID = null;\n    var $divBusy;\n    var $divnoBankData;\n    var $dummyBankDiv;\n\n    /*This function will load data in widget */\n    function initializeComponent() {\n      getControls();\n      events();\n      createDummyDiv();\n    }\n    ;\n    /**Get data from server for upcoming  */\n    function GetBankBalanceData() {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS_PaymentWidget/GetBankBalance",\n        dataType: "json",\n        async: true,\n        success: function (data) {\n          var divString = "";\n          bankBalData = jQuery.parseJSON(data);\n          if (bankBalData == null || bankBalData.length <= 0) {\n            if ($divBankBal.find(".VAS_noBankData").length > 0) {\n              $divBankBal.find(".VAS_noBankData").remove();\n            }\n            divString = $(\'<div class="VAS_noBankData" id="div_noBankData_\' + widgetID + \'">\' + VIS.Msg.getMsg("VAS_NoData") + \'</div>\');\n            $divBankBal.append(divString);\n            $divBankBal.css("height", "100%");\n            $divnoBankData.show();\n            $divBankBody.hide();\n            $nextArrowBank.addClass("disabled");\n            $prevArrowBank.addClass("disabled");\n          } else {\n            fillBankBalnaceData();\n          }\n          ShowBusy(false);\n        },\n        error: function (eror) {\n          console.log(eror);\n          ShowBusy(false);\n        }\n      });\n    }\n    ;\n    /** Create dummy div to append in structure */\n    function createDummyDiv() {\n      $dummyBankDiv = \'<div class="VAS-bankBalDetail-box VAS-bankDummy-div">\' + \'<div class="VAS-bankbal-name">-</div>\' + \'<div class="VAS-BankBaldata"><div class="VAS-bankbalISOCode">-\' + \'</div> <div class="VAS-totalbankbal-amount">-\' + \'</div>\' + \'</div>\' + \'</div>\';\n    }\n    ;\n    function bindDummyDiv(j) {\n      for (var i = 0; i < j; i++) {\n        $divBankBody.append($dummyBankDiv);\n      }\n      ;\n    }\n    /**Bind bank balance data to container */\n    function fillBankBalnaceData() {\n      $divBankBody.empty();\n      if (bankBalData != null) {\n        var start = CurrentPage * pageSize;\n        var end = Math.min(start + pageSize, bankBalData.length);\n        var TxtPageFooter = "<span>" + (CurrentPage + 1).toString() + " " + "</span>" + "<span>" + VIS.Msg.getMsg("VAS_Of") + " " + "</span>" + "<span>" + Math.ceil(bankBalData.length / pageSize).toString() + "</span>";\n        $pageInfo.html(TxtPageFooter);\n        var width = $divBankBal.width();\n        for (var i = start; i < end; i++) {\n          $divBankBody.append(\'<div class="VAS-bankBalDetail-box" id="div_bankDetail_\' + widgetID + \'">\' + \'<div class="VAS-bankbal-name" title="\' + bankBalData[i].Name + \' - \' + bankBalData[i].AccountNo + \'">\' + bankBalData[i].Name + \' - \' + bankBalData[i].AccountNo + \'</div>\' + \'<div class="VAS-BankBaldata"><div class="VAS-bankbalISOCode">\' + bankBalData[i].CurSymbol + \'</div> <div class="VAS-totalbankbal-amount">\' + bankBalData[i].EndingBalance.toLocaleString(window.navigator.language, {\n            minimumFractionDigits: bankBalData[i].StdPrecision,\n            maximumFractionDigits: bankBalData[i].StdPrecision\n          }) + \'</div></div>\' + \'</div>\');\n        }\n        ;\n        if (end - start < pageSize) {\n          bindDummyDiv(pageSize - (end - start));\n        }\n        if (CurrentPage == 0) {\n          $prevArrowBank.addClass("disabled");\n          $nextArrowBank.removeClass("disabled");\n        } else {\n          $prevArrowBank.removeClass("disabled");\n          if (end == bankBalData.length) {\n            $nextArrowBank.addClass("disabled");\n          } else {\n            $nextArrowBank.removeClass("disabled");\n          }\n        }\n        if (bankBalData.length <= 4) {\n          $nextArrowBank.addClass("disabled");\n        }\n        ShowBusy(false);\n      }\n    }\n    ;\n\n    /** bind events for arrow buttons */\n    function events() {\n      $nextArrowBank.on("click", function (e) {\n        ShowBusy(true);\n        if ((CurrentPage + 1) * pageSize < bankBalData.length) {\n          CurrentPage++;\n          fillBankBalnaceData();\n        }\n        ShowBusy(false);\n      });\n      $prevArrowBank.on("click", function (e) {\n        ShowBusy(true);\n        if (CurrentPage > 0) {\n          CurrentPage--;\n          fillBankBalnaceData();\n        }\n        ShowBusy(false);\n      });\n    }\n    ;\n    /** Get control elements from root */\n    function getControls() {\n      $divBankBal = $root.find("#div_bankBal_widget_" + widgetID);\n      $divBankBody = $root.find("#VAS_divbankBody_" + widgetID);\n      $divBankDet = $root.find("#div_bankDetail_" + widgetID);\n      $nextArrowBank = $root.find("#VAS_BankBalNextArrow_" + widgetID);\n      $prevArrowBank = $root.find("#VAS_BankBalPrevArrow_" + widgetID);\n      $pageInfo = $root.find("#VAS_PageInfo_" + widgetID);\n      $divBusy = $root.find("#busyDivId_" + widgetID);\n      $divnoBankData = $root.find("#div_noBankData_" + widgetID);\n      ShowBusy(true);\n      GetBankBalanceData();\n    }\n\n    /*Create Busy Indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $(\'<div id="busyDivId_\' + widgetID + \'" class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis_widgetloader"></i></div></div>\');\n      $root.append($bsyDiv);\n    }\n    ;\n    /* Method to enable and disable busy indicator */\n    function ShowBusy(show) {\n      if (show) {\n        $divBusy.show();\n      } else {\n        $divBusy.hide();\n      }\n    }\n    ;\n    /*this function is used to refresh design and data of widget*/\n    this.refreshWidget = function () {\n      ShowBusy(true);\n      CurrentPage = 0;\n      pageSize = 4;\n      bankBalData = [];\n      initializeComponent();\n    };\n    /**\r\n     *This function is used to resize the widget\r\n     * @param {any} height\r\n     * @param {any} width\r\n     */\n    this.sizeChanged = function (width) {\n      var containerWidth = $divBankBal.width();\n      $divBankBal.find(".VAS-bankbal-name").css("width", width - 20 + \'px;\');\n      var bankNameWidth = containerWidth - 20;\n      var length = $divBankBal.find(".VAS-bankbal-name").length;\n      for (var i = 0; i < length; i++) {\n        $($divBankBal.find(".VAS-bankbal-name")[i]).css("width", bankNameWidth + "px");\n      }\n    };\n\n    /*This function is used to intialize the design structure */\n    this.Initialize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      if (widgetID == 0) {\n        widgetID = $self.windowNo;\n      }\n      $root = $(\'<div class="VAS-bankBalroot" id="VAS_root_"></div>\');\n      $root.append(\'<div class="VAS-bankbalance-container" id="div_bankBal_widget_\' + widgetID + \'">\' + \'<div class="VAS-bankbalwidget-header">\' + \'<h1>\' + VIS.Msg.getMsg("VAS_BankBalance") + \'</h1>\' + \'<div class="VAS-bankBalarrow-control">\' + \'<a href="#"><i id="VAS_BankBalPrevArrow_\' + widgetID + \'" class="fa fa-arrow-circle-left vas-bankbalwidget-leftar" aria-hidden="true"></i></a>\' + \'<span id="VAS_PageInfo_\' + widgetID + \'" class="vas-bankbalwidget-pageInfo"></span>\' + \'<a href="#"><i id="VAS_BankBalNextArrow_\' + widgetID + \'" class="fa fa-arrow-circle-right vas-bankbalwidget-rightar" aria-hidden="true"></i></a>\' + \'</div>\' + \'</div><div class="VAS-bankbalwidget-body" id="VAS_divbankBody_\' + widgetID + \'"></div>\');\n      createBusyIndicator();\n      initializeComponent();\n    };\n    //Privilized function\n    this.getRoot = function () {\n      return $root;\n    };\n  };\n\n  //Must Implement with same parameter\n  VAS.VAS_BankBalanceWidget.prototype.widgetSizeChange = function (width) {\n    this.sizeChanged(width);\n  };\n  VAS.VAS_BankBalanceWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_BankBalanceWidget.prototype.init = function (windowNo, frame) {\n    //Assign to this Variable\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    var obj = this.Initialize();\n    this.frame.getContentGrid().append(this.getRoot());\n  };\n  VAS.VAS_BankBalanceWidget.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    //this.disposeComponent();\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $divBusy = null;\n    $divnoBankData = null;\n    $dummyBankDiv = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_BankBalanceWidget.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_CashBalanceWidget.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Cash Balance Widget\r\n * chronological  : Development\r\n * Created Date   : 23 Sep 2024\r\n * Created by     : VIS103\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_CashBalanceWidget = function () {\n    this.frame;\n    this.windowNo;\n    var $self = this;\n    var $root;\n    var $bsyDiv;\n    var $divCashDet;\n    var $divCashBody;\n    var CurrentPage = 0;\n    var pageSize = 4;\n    var cashBalData = [];\n    var $prevArrow;\n    var $pageInfo;\n    var widgetID = null;\n    var $divBusy;\n    var $dummDiv;\n\n    /*This function will load data in widget */\n    function initializeComponent() {\n      getControls();\n      events();\n      createDummyDiv();\n    }\n    ;\n    /**Get data from server for upcoming  */\n    function GetCashBalanceData() {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS_PaymentWidget/GetCashBookBalance",\n        dataType: "json",\n        async: true,\n        success: function (data) {\n          var divString = "";\n          cashBalData = jQuery.parseJSON(data);\n          if (cashBalData == null || cashBalData.length <= 0) {\n            if ($divCashBal.find(".VAS_noBankData").length > 0) {\n              $divCashBal.find(".VAS_noBankData").remove();\n            }\n            divString = $(\'<div class="VAS_noCashData"  id="div_noCashData_\' + widgetID + \'">\' + VIS.Msg.getMsg("VAS_NoData") + \'</div>\');\n            $divCashBal.append(divString);\n            $divCashBal.css("height", "100%");\n            $divnoCashData.show();\n            $divCashBody.hide();\n            $prevArrow.addClass("disabled");\n            $nextArrow.addClass("disabled");\n          } else {\n            fillCashBalanceData();\n          }\n          ShowBusy(false);\n        },\n        error: function (eror) {\n          console.log(eror);\n          ShowBusy(false);\n        }\n      });\n    }\n    ;\n    /** Create dummy div to append in structure */\n    function createDummyDiv() {\n      $dummDiv = \'<div class="VAS-cashDetail-box VAS-cashDummy-div">\' + \'<div class="VAS-cashbook-name"> - </div>\' + \'<div class="VAS-CashBaldata"><div class="VAS-cashISOCode">-\' + \'</div> <div class="VAS-cashbook-amount">-\' + \'</div>\' + \'</div>\' + \'</div>\';\n    }\n    ;\n    function bindDummyDiv(j) {\n      for (var i = 0; i < j; i++) {\n        $divCashBody.append($dummDiv);\n      }\n      ;\n    }\n    ;\n    /**Bind Cashbook data to container */\n    function fillCashBalanceData() {\n      $divCashBody.empty();\n      if (cashBalData != null) {\n        var start = CurrentPage * pageSize;\n        var end = Math.min(start + pageSize, cashBalData.length);\n        var TxtPageFooter = "<span>" + (CurrentPage + 1).toString() + " " + "</span>" + "<span>" + VIS.Msg.getMsg("VAS_Of") + " " + "</span>" + "<span>" + Math.ceil(cashBalData.length / pageSize).toString() + "</span>";\n        $pageInfo.html(TxtPageFooter);\n        var width = $divCashBal.width();\n        for (var i = start; i < end; i++) {\n          $divCashBody.append(\'<div class="VAS-cashDetail-box" id="div_cashDetail_\' + widgetID + \'">\' + \'<div class="VAS-cashbook-name" title="\' + cashBalData[i].Name + \'">\' + cashBalData[i].Name + \'</div>\' + \'<div class="VAS-CashBaldata"><div class="VAS-cashISOCode"> \' + cashBalData[i].CurSymbol + \'</div> <div class="VAS-cashbook-amount">\' + cashBalData[i].CompletedBalance.toLocaleString(window.navigator.language, {\n            minimumFractionDigits: cashBalData[i].StdPrecision,\n            maximumFractionDigits: cashBalData[i].StdPrecision\n          }) + \'</div></div>\' + \'</div>\');\n        }\n        ;\n        $divCashDet.width(width - 20);\n        if (end - start < pageSize) {\n          bindDummyDiv(pageSize - (end - start));\n        }\n        if (CurrentPage == 0) {\n          $prevArrow.addClass("disabled");\n          $nextArrow.removeClass("disabled");\n        } else {\n          $prevArrow.removeClass("disabled");\n          if (end == cashBalData.length) {\n            $nextArrow.addClass("disabled");\n          } else {\n            $nextArrow.removeClass("disabled");\n          }\n        }\n        if (cashBalData.length <= 4) {\n          $nextArrow.addClass("disabled");\n        }\n        ShowBusy(false);\n      }\n    }\n    ;\n\n    /** bind events for arrow buttons */\n    function events() {\n      $nextArrow.on("click", function (e) {\n        ShowBusy(true);\n        if ((CurrentPage + 1) * pageSize < cashBalData.length) {\n          CurrentPage++;\n          fillCashBalanceData();\n        }\n        ShowBusy(false);\n      });\n      $prevArrow.on("click", function (e) {\n        ShowBusy(true);\n        if (CurrentPage > 0) {\n          CurrentPage--;\n          fillCashBalanceData();\n        }\n        ShowBusy(false);\n      });\n    }\n    ;\n    /** Get control elements from root */\n    function getControls() {\n      $divCashBal = $root.find("#div_cashBal_widget_" + widgetID);\n      $divCashBody = $root.find("#VAS_divCashBody_" + widgetID);\n      $divCashDet = $root.find("#div_cashDetail_" + widgetID);\n      $nextArrow = $root.find("#VAS_CashNextArrow_" + widgetID);\n      $prevArrow = $root.find("#VAS_CashPrevArrow_" + widgetID);\n      $pageInfo = $root.find("#VAS_PageInfo_" + widgetID);\n      $divBusy = $root.find("#busyDivId_" + widgetID);\n      $divnoCashData = $root.find("#div_noCashData_" + widgetID);\n      ShowBusy(true);\n      GetCashBalanceData();\n    }\n\n    /*Create Busy Indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $(\'<div id="busyDivId_\' + widgetID + \'" class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis_widgetloader"></i></div></div>\');\n      $root.append($bsyDiv);\n    }\n    ;\n    /* Method to enable and disable busy indicator */\n    function ShowBusy(show) {\n      if (show) {\n        $divBusy.show();\n      } else {\n        $divBusy.hide();\n      }\n    }\n    ;\n    /**\r\n     *This function is used to resize the widget\r\n     * @param {any} height\r\n     * @param {any} width\r\n     */\n    this.sizeChanged = function (width) {\n      var containerWidth = $divCashBal.width();\n      var bankNameWidth = containerWidth - 20;\n      var length = $divCashBal.find(".VAS-cashbook-name").length;\n      for (var i = 0; i < length; i++) {\n        $($divCashBal.find(".VAS-cashbook-name")[i]).css("width", bankNameWidth + "px");\n      }\n    };\n    /*this function is used to refresh design and data of widget*/\n    this.refreshWidget = function () {\n      ShowBusy(true);\n      CurrentPage = 0;\n      pageSize = 4;\n      cashBalData = [];\n      initializeComponent();\n    };\n    /*This function is used to intialize the design structure */\n    this.Initialize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      if (widgetID == 0) {\n        widgetID = $self.windowNo;\n      }\n      $root = $(\'<div class="VAS-cashroot"  id="VAS_cashroot_"></div>\');\n      createBusyIndicator();\n      $root.append(\'<div class="VAS-cashbalance-container" id="div_cashBal_widget_\' + widgetID + \'">\' + \'<div class="VAS-cashwidget-header">\' + \'<h1>\' + VIS.Msg.getMsg("VAS_CashBalance") + \'</h1>\' + \'<div class="VAS-casharrow-control">\' + \'<a href="#"><i id="VAS_CashPrevArrow_\' + widgetID + \'" class="fa fa-arrow-circle-left VAS-cashwidget-leftar" aria-hidden="true"></i></a>\' + \'<span id="VAS_PageInfo_\' + widgetID + \'" class="vas-cashwidget-pageInfo"></span>\' + \'<a href="#"><i id="VAS_CashNextArrow_\' + widgetID + \'" class="fa fa-arrow-circle-right VAS-cashwidget-rightar" aria-hidden="true"></i></a>\' + \'</div>\' + \'</div><div class="VAS-cashwidget-body" id="VAS_divCashBody_\' + widgetID + \'"></div>\');\n      initializeComponent();\n    };\n    //Privilized function\n    this.getRoot = function () {\n      return $root;\n    };\n  };\n  VAS.VAS_CashBalanceWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n\n  //Must Implement with same parameter\n  VAS.VAS_CashBalanceWidget.prototype.widgetSizeChange = function (width) {\n    this.sizeChanged(width);\n  };\n  VAS.VAS_CashBalanceWidget.prototype.init = function (windowNo, frame) {\n    //Assign to this Varable\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    var obj = this.Initialize();\n    this.frame.getContentGrid().append(this.getRoot());\n  };\n  VAS.VAS_CashBalanceWidget.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    //this.disposeComponent();\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $dummDiv = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_CashBalanceWidget.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_CashFlowWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : This Widget is used to showcase Cash Flow in system\r\n * chronological  : Development\r\n * Created Date   : 20 November 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_CashFlowWidget = function () {\n    var widgetID = 0;\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $maindiv = null;\n    var precision = 0;\n    var vDifferentYearDataList = null;\n    var $root = $('<div class=\"h-100 w-100 vas-cashFlow-background\">');\n\n    /** Load Design on Load */\n    this.initalize = function () {\n      widgetID = VIS.Utility.Util.getValueOfInt(this.widgetInfo.AD_UserHomeWidgetID) != 0 ? this.widgetInfo.AD_UserHomeWidgetID : $self.windowNo;\n      GetColumnID();\n      createBusyIndicator();\n      $maindiv = $('<div id=\"VAS-BarLine-ERP_' + widgetID + '\" class=\"vas-barline-cashFlow-container\">');\n      var MainHeadingComboDiv = $('<div class=\"d-flex justify-content-between vas-cashFlow-heading\">');\n      var HeadingDiv = $('<div class= \"vas-cf-heading\">' + VIS.Msg.getMsg(\"VAS_CashFlowWidget\") + '</div>');\n\n      // Create Control Div\n      $DifferentYearDataListDiv = $('<div class=\"input-group vis-input-wrap\">');\n      /* parameters are: context, windowno., coloumn id, display type, DB coloumn name, Reference key, Is parent, Validation Code*/\n      $DifferentYearDataListLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), widgetID, 0, VIS.DisplayType.List, \"VAS_CashFlowWidgetList\", ColumnIds.AD_Reference_ID, false, null);\n      // Parameters are: columnName, mandatory, isReadOnly, isUpdateable, lookup,display length\n      vDifferentYearDataList = new VIS.Controls.VComboBox(\"VAS_CashFlowWidgetList\", true, false, true, $DifferentYearDataListLookUp, 20);\n      //default value set for 6 months\n      vDifferentYearDataList.setValue(\"05\");\n      var $DifferentYearDataListControlWrap = $('<div class=\"vis-control-wrap\">');\n      $DifferentYearDataListDiv.append($DifferentYearDataListControlWrap);\n      $DifferentYearDataListControlWrap.append(vDifferentYearDataList.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' '));\n      $DifferentYearDataListDiv.append($DifferentYearDataListControlWrap);\n\n      // Add Control into Maine Heading Div\n      MainHeadingComboDiv.append(HeadingDiv).append($DifferentYearDataListDiv);\n\n      // Add Maine Hedaeding dive into main div\n      $maindiv.append(MainHeadingComboDiv);\n\n      // Add maine div into Root\n      $root.append($maindiv);\n\n      // Fire Value Change Evenet for the year Control\n      vDifferentYearDataList.fireValueChanged = function () {\n        vDifferentYearDataList.setValue(vDifferentYearDataList.getValue());\n        $bsyDiv[0].style.visibility = \"visible\";\n        $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n        $self.getCashFlowvDetails();\n      };\n    };\n\n    /** Get data and load */\n    this.getCashFlowvDetails = function () {\n      // Show busy indicator while data is loading\n      $bsyDiv[0].style.visibility = \"visible\";\n\n      // Define your AJAX request\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetCashFlowData\", {\n        \"ListValue\": vDifferentYearDataList.getValue()\n      }, function (dr) {\n        var CashFlowData = dr;\n\n        // Remove existing canvas if exists\n        $root.find('canvas').remove();\n        if (CashFlowData != null && CashFlowData.ErrorMessage != null) {\n          // If there is no data, show \"No record found\" message\n          $maindiv.append('<div class=\"vas-igwidg-notfounddiv\" id=\"vas_norecordcont_' + widgetID + '\">' + VIS.Msg.getMsg(\"VAS_RecordNotFound\") + '</div>');\n          $root.append($maindiv);\n        } else {\n          const precision = CashFlowData.stdPrecision;\n          // Define static labels and colors\n          const lstLabel = CashFlowData.labels;\n          const zeroLinePlugin = {\n            id: 'zeroLine',\n            beforeDraw: function (chart) {\n              const ctx = chart.ctx;\n              const yScale = chart.scales.y;\n              const xScale = chart.scales.x;\n\n              // Find the pixel for 0 on the Y-axis\n              const zeroY = yScale.getPixelForValue(0);\n\n              // Draw the line\n              ctx.save();\n              ctx.beginPath();\n              ctx.moveTo(xScale.left, zeroY);\n              ctx.lineTo(xScale.right, zeroY);\n              ctx.lineWidth = 1;\n              ctx.strokeStyle = 'rgb(211,211,211)';\n              ctx.stroke();\n              ctx.restore();\n            }\n          };\n\n          // Prepare the data object for the chart\n          const data = {\n            labels: lstLabel,\n            // Dynamic labels\n            datasets: [{\n              label: VIS.Msg.getMsg(\"VAS_CashOut\"),\n              data: CashFlowData.lstCashOutData,\n              borderColor: 'rgba(0,0,0,0)',\n              // Transparent border color\n              borderWidth: 0,\n              // No border\n              backgroundColor: 'rgba(255, 99, 132, 0.7)',\n              order: 1\n            }, {\n              label: VIS.Msg.getMsg(\"VAS_CashIn\"),\n              data: CashFlowData.lstCashInData,\n              borderColor: 'rgba(0,0,0,0)',\n              // Transparent border color\n              borderWidth: 0,\n              // No border\n              backgroundColor: 'rgba(0, 187, 0, 0.7)',\n              order: 1\n            }]\n          };\n\n          // Plugin to adjust legend height (optional)\n          const plugin = {\n            beforeInit: function (chart) {\n              const originalFit = chart.legend.fit;\n              chart.legend.fit = function fit() {\n                originalFit.bind(chart.legend)();\n                this.height += -5; // Adjust legend height if needed\n              };\n            }\n          };\n\n          // Define the chart configuration for the bar chart\n          const config = {\n            type: 'bar',\n            data: data,\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              scales: {\n                x: {\n                  grid: {\n                    display: true // Show grid lines on the x-axis\n                  }\n                },\n                y: {\n                  grid: {\n                    display: false // Hide grid lines on the y-axis\n                  }\n                  //beginAtZero: true, // Ensure y-axis starts at 0\n                }\n              },\n              plugins: {\n                legend: {\n                  display: true,\n                  // Enable legend\n                  position: 'bottom',\n                  padding: {\n                    top: 0,\n                    bottom: 0\n                  }\n                },\n                tooltip: {\n                  enabled: true,\n                  mode: 'nearest',\n                  intersect: true,\n                  callbacks: {\n                    label: function (tooltipItem) {\n                      const dataIndex = tooltipItem.dataIndex;\n                      const datasetIndex = tooltipItem.datasetIndex;\n                      const dataset = tooltipItem.chart.data.datasets[datasetIndex];\n                      const labels = tooltipItem.chart.data.labels;\n                      const dsLabel = dataset.label;\n                      const value = dataset.data[dataIndex];\n                      return dsLabel + \" - \" + labels[dataIndex] + ': ' + parseFloat(value).toLocaleString(window.navigator.language, {\n                        minimumFractionDigits: precision,\n                        maximumFractionDigits: precision\n                      });\n                    }\n                  }\n                }\n              }\n            },\n            plugins: [plugin] // Apply the plugins\n          };\n\n          // Create a new canvas element and append it to the root\n          const canvas = $('<canvas class=\"vas-expay-barline-canvas\"></canvas>').css({\n            width: '100%',\n            // Set width to 100% (or any fixed value)\n            height: '100%' // Set height for the canvas\n          });\n\n          // Append canvas to the root container\n          var polarChart = $root.find('#VAS-BarLine-ERP_' + widgetID);\n          polarChart.append(canvas);\n\n          // Initialize the chart with the new data\n          const ctx = canvas[0].getContext('2d');\n          const chart = new Chart(ctx, config);\n\n          // Ensure the canvas resizes dynamically on window resize\n          //function resizeChart() {\n          //    // Set the canvas internal dimensions based on container size\n          //    const container = polarChart;  // `polarChart` is the container\n          //    const width = container.width();\n          //    const height = container.height();\n\n          //    canvas[0].width = width;   // Set canvas internal width\n          //    canvas[0].height = height; // Set canvas internal height\n\n          //    chart.resize(); // Re-render the chart to reflect the new canvas size\n          //}\n\n          //// Initial resize to make sure the chart fits correctly when loaded\n          //resizeChart();\n\n          // Check if the chart was initialized correctly\n          if (!chart) {\n            console.error(\"Failed to initialize the chart.\");\n          }\n        }\n\n        // Hide busy indicator once data is loaded\n        $bsyDiv[0].style.visibility = \"hidden\";\n      });\n    };\n\n    /** Get List Reference ID for filter Data */\n    var GetColumnID = function () {\n      ColumnIds = VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetColumnID\", {\n        \"refernceName\": \"VAS_CashFlowWidgetList\"\n      }, null);\n    };\n\n    /** Add busy Indicator in Root */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $bsyDiv[0].style.visibility = \"visible\";\n      $root.append($bsyDiv);\n    }\n    ;\n\n    /** Get Root */\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /** Refresh Widget Data */\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n      $self.getCashFlowvDetails();\n    };\n  };\n\n  /**\r\n   * Int Function for Intialize Form\r\n   * @param {any} windowNo\r\n   * @param {any} frame\r\n   */\n  VAS.VAS_CashFlowWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var self = this;\n    window.setTimeout(function () {\n      self.getCashFlowvDetails();\n    }, 50);\n  };\n\n  /**\r\n   * Widget Size change\r\n   * @param {any} widget\r\n   */\n  VAS.VAS_CashFlowWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n\n  /** refresh Widget Function */\n  VAS.VAS_CashFlowWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n\n  /** Dispose Function */\n  VAS.VAS_CashFlowWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_CashFlowWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_CreateInventoryLines.js":()=>{eval('{;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_CreateInventoryLines = function () {\n    this.frame;\n    this.windowNo;\n    this.Record_ID;\n    this.Table_ID;\n    var $CartHeaderSection;\n    var $CartLineDetailSection;\n    var $self = this; //scoped self pointer\n    var $root = $(\'<div style="overflow:hidden;height:100%;width:100%;">\');\n    var InputCartSearch = null;\n    var InputRefSearch = null;\n    var CartName = null;\n    var RefNo = null;\n    var ClearFilter = null;\n    var $FromDate = null;\n    var $ToDate = null;\n    var FromDatediv = null;\n    var toDatediv = null;\n    var userid = [];\n    var UserIds = "";\n    var selectedLines = [];\n    var IsUpdateTrue = false;\n    var window_ID = 0;\n    var AD_tab_ID = 0;\n    var Reference = null;\n    var WindowName = "";\n    var _FromLocatorLookUp;\n    var $FromLocatorControl;\n    var _FlocatCtrl = "";\n    var FromLoctr = 0;\n    var ToLoctor = 0;\n    var _ToLocatorLookUp;\n    var ToWarehouse = 0;\n    var DTDSrcWarehouse = 0;\n    var Bpartner = 0;\n    var OrderNo = 0;\n    //var WindowName = VIS.context.m_map[1]["1|0|Name"];\n\n    this.initalize = function () {\n      createBusyIndicator();\n      $CartHeaderSection = $(\'<div class="VAS-filters-container" id="VAS-CartHeader_\' + $self.windowNo + \'">\');\n      $CartLineDetailSection = $(\'<div class="VAS-flyout-body h-100" id="VAS-CartLines_\' + $self.windowNo + \'" style="display:none;">\');\n\n      //VIS0336-Cart detail and left filter\n      $CartHeaderSection.append(\'<div class="VAS-left-filters VAS-CartDetail">\' + \'<div class="VAS-field-opt-col">\' + \'<div class="VAS-filters-heading">\' + VIS.Msg.getMsg("VAS_Filters") + \'</div>\' + \'<div class="VAS-form-field">\' + \'<label for="">\' + VIS.Msg.getMsg("VAS_CreatedBy") + \'</label>\' + \'<div class="VAS-input-w-icon" id="VAS-UserId_\' + $self.windowNo + \'">\' + \'<i class="fa fa-search" aria-hidden="true"></i>\' + \'<input type="text" id="VAS_UserSearch_\' + $self.windowNo + \'" placeholder="Search user">\' + \'</div>\' + \'<div class="VAS-lblChip-container VAS_UserTag">\' + \'</div>\' + \'</div>\' + \'<div class="VAS-input-w-icon mb-3">\' + \' <i class="fa fa-search" aria-hidden="true"></i>\' + \'<input type="text" id="VAS-Refnumber_\' + $self.windowNo + \'" placeholder="Reference No.">\' + \'</div>\' + \'<div class="VAS-form-field">\' + \'<label for="">\' + VIS.Msg.getMsg("VAS_DateRange") + \'</label>\' + \'<div class="VAS-Datefileter">\' + \'<div class="vas-FromdateDiv w-100">\' + \'</div>\' + \'<div class="vas-todateDiv w-100">\' + \'</div>\' + \'</div>\' + \'</div>\' + \'</div>\' + \'<div class="VAS-filter-btn">\' + \'<input type="button" class="btn ui-button-outline ui-widget" id= "VAS-ClearFilter_\' + $self.windowNo + \'" value="Clear Filters">\' + \'</div>\' + \'</div>\' + \'<div class= "VAS-avail-cart-col" >\' + \'<div class="VAS-cartCountW-input">\' + \'<label for=""> \' + VIS.Msg.getMsg("VAS_AvailCarts") + \'<span class="VAS-Availcarts" id= "VAS-Availcarts_\' + $self.windowNo + \'"> \' + 0 + \'<span></label>\' + \'<div class="VAS-input-w-icon">\' + \' <i class="fa fa-search" aria-hidden="true"></i>\' + \'<input type="text" id="VAS-CartSearch_\' + $self.windowNo + \'" placeholder="Search Cart">\' + \'</div>\' + \'</div>\' + \'<div class= "VAS-carts-results-list">\' + \'<div class="VAS-carts-box-col" id="InventoryCart_\' + $self.windowNo + \'">\' + \'</div>\' + \'</div>\' + \'</div>\');\n      //VIS0336-Cart lines\n      $CartLineDetailSection.append(\'<div class="VAS-carts-listing-col VAS-CartLineDetails h-100">\' + \'<div class="VAS-cart-list-header">\' + \'<a><span class="vis vis-back-arrow" id="VAS-BackArrow_\' + $self.windowNo + \'"></span></a>\' + \'<div class="VAS-space-between">\' + \'<div class="VAS-heading-w-lbl-col">\' + \'<div class="VAS-createName-heading"><span class="VAS-CartName" id= "VAS-CartName_\' + $self.windowNo + \'"><span></div>\' + \'<div class="VAS-cartAct-lbl">\' + \'<span class="VAS-TransactionType" id= "VAS-TransactionType_\' + $self.windowNo + \'"><span>\' + \'</div>\' + \'</div>\' + \'<div class="VAS-Inventorymove" style="display:flex;gap:10px;width:50%;">\' + \' <div class="input-group vis-input-wrap vis-formouterwrpdiv" id="VAS_FlocatorCtrl\' + $self.windowNo + \'" style="width:50%" > \' + \'</div > \' + \' <div class="input-group vis-input-wrap vis-formouterwrpdiv" id="VAS_TolocatorCtrl\' + $self.windowNo + \'" style="width:50%" > \' + \'</div > \' + \'</div > \' + \'<div class="VAS-total-lines">\' + \'<span class="VAS-lineCount"><span class= "VAS-LineCount" id = "VAS-LineCount_\' + $self.windowNo + \'"><span></span>\' + \'<span class="VAS-line-lbl">Line</span>\' + \'</div>\' + \'</div>\' + \'</div>\' + \'<div class="VAS-hgt-spaceBetween VAS-LineDetails">\' + \'<div class="table-responsive VAS-filter-list-table-col">\' + \'<table class="table">\' + \'<thead>\' + \'<tr>\' + \'<th>\' + \'<div>\' + \'<input type="checkbox" id="selectAllCheckbox" value="option1" aria-label="...">\' + \'</div>\' + \'</th>\' + \'<th>\' + VIS.Msg.getMsg("VAS_Code") + \'</th>\' + \'<th>\' + VIS.Msg.getMsg("VAS_Product") + \'</th>\' + \'<th>\' + VIS.Msg.getMsg("VAS_Attribute") + \'</th>\' + \'<th>\' + VIS.Msg.getMsg("VAS_UOM") + \'</th>\' + \'<th class="text-right">\' + VIS.Msg.getMsg("VAS_Qty") + \'</th>\' + \'</tr>\' + \'</thead>\' + \'<tbody  id="VAS-CartLinesDetails_\' + $self.windowNo + \'">\' + \'</tbody>\' + \'</table>\' + \'</div>\' + \'<div class="VAS-footerBtn-w-opt">\' + \'<div class="form-check VAS-Update" style="display:none;">\' + \'<input  type="checkbox" value="" id="VAS-Updatedcheckbox_\' + $self.windowNo + \'">\' + \'<label class="form-check-label" for="defaultCheck8">\' + \'Update\' + \'</label>\' + \'</div>\' + \'<input type="button" class="btn ui-button ui-widget" id="VAS-CreateLines_\' + $self.windowNo + \'" value="Create Lines">\' + \'</div>\' + \' </div>\' + \'</div>\' + \'</div>\');\n      $root.append($CartHeaderSection).append($CartLineDetailSection);\n      AD_tab_ID = VIS.context.getWindowTabContext($self.windowNo, 0, "AD_Tab_ID");\n      window_ID = VIS.dataContext.getJSONRecord("InfoProduct/GetWindowID", AD_tab_ID.toString());\n      WindowName = VIS.context.getContext($self.windowNo, "ScreenName");\n      ToWarehouse = VIS.context.getContextAsInt($self.windowNo, "M_Warehouse_ID");\n      DTDSrcWarehouse = VIS.context.getContextAsInt($self.windowNo, "DTD001_MWarehouseSource_ID");\n      Bpartner = VIS.context.getContextAsInt($self.windowNo, "C_BPartner_ID");\n      OrderNo = VIS.context.getContextAsInt($self.windowNo, "C_Order_ID");\n      if (window_ID == "168") {\n        //update record only allowed in case of physical inventory\n        $root.find(".VAS-Update").css("display", "block");\n      }\n    };\n    this.intialLoad = function () {\n      _User = $root.find("#VAS_UserSearch_" + $self.windowNo);\n      ClearFilter = $root.find(\'#VAS-ClearFilter_\' + $self.windowNo);\n      FromDatediv = $root.find(\'.vas-FromdateDiv\');\n      toDatediv = $root.find(\'.vas-todateDiv\');\n      Userdiv = $root.find(\'#VAS-UserId_\' + $self.windowNo);\n      Userinput = $root.find(\'#VAS_UserSearch_\' + $self.windowNo);\n      InputCartSearch = $root.find(\'#VAS-CartSearch_\' + $self.windowNo);\n      InputRefSearch = $root.find(\'#VAS-Refnumber_\' + $self.windowNo);\n\n      /* autocompletion on user input for loading user*/\n      $(Userinput).on("focus", function () {\n        //VIS0336:handled the dropdown serach issue\n        Userinput.autocomplete({\n          classes: {\n            \'ui-autocomplete\': \'VAS-AutoComp\'\n          },\n          minLength: 0,\n          source: function (request, response) {\n            if (request.term.trim().length == 0) {\n              return;\n            }\n            GetUsers(response, request.term);\n          },\n          select: function (ev, ui) {\n            tag = $(\'<div class="VAS-lbl-chip" item-id="\' + ui.item.ids + \'">\' + \'<span class="VAS-chipTxt">\' + ui.item.label + \'</span><span class="vis vis-cross"></span>\' + \'</div>\');\n            tag.find(\'.vis-cross\').on(\'click\', function () {\n              itemId = $(this).parent().attr(\'item-id\');\n              $(this).parent().remove();\n              userid = userid.filter(item => item !== parseInt(itemId));\n              UserIds = userid.join(\',\');\n              LoadCartData();\n            });\n            userid.push(ui.item.ids);\n            UserIds = userid.join(\',\');\n            LoadCartData();\n            if (!isProductTagExist(ui.item.ids)) {\n              this.value = "";\n              return true;\n            }\n            if (ui.item.ids != 9999) {\n              itemId = $(this).parent().attr(\'item-id\');\n              $root.find(\'.VAS_UserTag\').append(tag);\n              this.value = "";\n              $(this).focus();\n              return false;\n            }\n          }\n        });\n      });\n      ;\n\n      //VIS0336-Date fileters\n      $FromDatewrapDiv = $(\'<div class="input-group vis-input-wrap">\');\n      $FromDate = new VIS.Controls.VDate("DateReport", true, false, true, VIS.DisplayType.Date, "DateReport");\n      var $FromDateWrap = $(\'<div class="vis-control-wrap">\');\n      $FromDatewrapDiv.append($FromDateWrap);\n      $FromDateWrap.append($FromDate.getControl().attr(\'placeholder\', \' \').attr(\'data-placeholder\', \'\').addClass("VAS-Cursor"));\n      FromDatediv.append($FromDatewrapDiv);\n      $toDatewrapDiv = $(\'<div class="input-group vis-input-wrap">\');\n      $ToDate = new VIS.Controls.VDate("DateReport", true, false, true, VIS.DisplayType.Date, "DateReport");\n      var $toDateWrap = $(\'<div class="vis-control-wrap">\');\n      $toDatewrapDiv.append($toDateWrap);\n      $toDateWrap.append($ToDate.getControl().attr(\'placeholder\', \' \').attr(\'data-placeholder\', \'\').addClass("VAS-Cursor"));\n      toDatediv.append($toDatewrapDiv);\n      LoadCartData();\n      InitEvents();\n    };\n    //VIS0336-method for loading the cart names and on click of arrow lines will load\n    function LoadCartData() {\n      $self.setBusy(true);\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "InventoryLines/GetIventoryCartData", {\n        "CartName": CartName,\n        "UserId": UserIds,\n        "FromDate": $FromDate.getValue(),\n        "ToDate": $ToDate.getValue(),\n        "RefNo": RefNo,\n        "windowID": window_ID,\n        "RecordId": $self.Record_ID,\n        "WindowName": WindowName,\n        "ToWarehouse": ToWarehouse,\n        "DTDSrcWarehouse": DTDSrcWarehouse,\n        "BPartnerId": Bpartner,\n        "OrderNo": OrderNo\n      }, function (data) {\n        $root.find("#VAS-CartLines_" + $self.windowNo).css("display", "none");\n        $root.find("#VAS-CartHeader_" + $self.windowNo).css("display", "");\n        $root.find("#InventoryCart_" + $self.windowNo).empty();\n        $root.find("#VAS-Availcarts_" + $self.windowNo).text(\'(\' + 0 + \')\');\n        if (data && data.length > 0) {\n          for (var i = 0; i < data.length; i++) {\n            $root.find("#VAS-Availcarts_" + $self.windowNo).text(\'(\' + data.length + \')\');\n            $root.find("#InventoryCart_" + $self.windowNo).append(\'<div class= "VAS-cart-box" id="VAS-CartId_\' + $self.windowNo + \'" vas-cart-id = "\' + data[i].CartId + \'"  vas-cart-name = "\' + data[i].CartName + \'"  vas-transactiontype = "\' + data[i].TransactionType + \'"  vas-createdby = "\' + data[i].CreatedBy + \'" vas-CartRef = "\' + data[i].ReferenceNo + \'">\' + \'<div class="VAS-cartName-w-des">\' + \'<h1>\' + data[i].CartName + \'</h1>\' + \'<div class="VAS-cart-type">Type: \' + data[i].TransactionType + \'</div>\' + \'<div class="VAS-cart-created">Created by: \' + data[i].CreatedBy + \'</div>\' + \'</div>\' + \'<div class="VAS-linesdetail-col">\' + \'<div class="VAS-total-lines">\' + \'<span class="VAS-lineCount">\' + data[i].CartLineCount + \'</span>\' + \'<span class="VAS-line-lbl">Line</span>\' + \'</div>\'\n            // + \'<a href="javascript:void(0);"><i class="fa fa-caret-right"  vas-cart-id = "\' + data[i].CartId + \'"  vas-cart-name = "\' + data[i].CartName + \'"  vas-transactiontype = "\' + data[i].TransactionType + \'"  vas-createdby = "\' + data[i].CreatedBy + \'" vas-CartRef = "\' + data[i].ReferenceNo + \'" aria-hidden="true" ></i></a> \'\n            + \'</div>\' + \'</div>\');\n          }\n          $root.find("#VAS-CartId_" + $self.windowNo).off(\'click\');\n          $root.on(\'click\', "#VAS-CartId_" + $self.windowNo, function () {\n            $self.setBusy(true);\n            $root.find("#VAS-CartLines_" + $self.windowNo).css("display", "block");\n            $root.find("#VAS-CartHeader_" + $self.windowNo).css("display", "none");\n            var CartId = $(this).attr(\'vas-cart-id\');\n            Reference = $(this).attr(\'vas-CartRef\');\n            var CartName = $(this).attr(\'vas-cart-name\');\n            var TransType = $(this).attr(\'vas-transactiontype\');\n            var CreatedBy = $(this).attr(\'vas-createdby\');\n            VIS.dataContext.getJSONData(VIS.Application.contextUrl + "InventoryLines/GetIventoryCartLines", {\n              "CartId": CartId,\n              "RefNo": Reference,\n              "ScreenName": WindowName,\n              "RecordId": $self.Record_ID\n            }, function (data) {\n              if (data && data.length > 0) {\n                $root.find("#VAS-CartName_" + $self.windowNo).text(CartName);\n                $root.find("#VAS-TransactionType_" + $self.windowNo).text(TransType + " | Created by:" + CreatedBy);\n                $root.find("#VAS-LineCount_" + $self.windowNo).text(0);\n                $root.find("#VAS-CartLinesDetails_" + $self.windowNo).empty();\n                for (var i = 0; i < data.length; i++) {\n                  $root.find("#VAS-LineCount_" + $self.windowNo).text(data.length);\n                  $root.find("#VAS-CartLinesDetails_" + $self.windowNo).append(\'<tr cart-code="\' + data[i].Code + \'" product-id="\' + data[i].ProductId + \'" attr-id="\' + data[i].AttrId + \'"uom-id="\' + data[i].UomId + \'" inventorycount-id="\' + data[i].InventoryCountId + \'" qty="\' + data[i].Quantity + \'">\' + \'<td>\' + \'<div>\' + \'<input class="lineCheckbox "type="checkbox"  value="option1" aria-label="...">\' + \'</div>\' + \'</td>\' + \'<td>\' + data[i].Code + \'</td>\' + \'<td>\' + data[i].ProductName + \'</td>\' + \'<td>\' + data[i].AttrName + \'</td>\' + \'<td>\' + data[i].UomName + \'</td>\' + \'<td class="text-right">\' + data[i].Quantity + \'</td>\' + \'</tr>\');\n                }\n                $root.find("#VAS-CartLinesDetails_" + $self.windowNo).on(\'change\', \'.lineCheckbox\', function () {\n                  var allChecked = $root.find("#VAS-CartLinesDetails_" + $self.windowNo).find(".lineCheckbox").length === $root.find("#VAS-CartLinesDetails_" + $self.windowNo).find(".lineCheckbox:checked").length;\n                  $root.find("#selectAllCheckbox").prop(\'checked\', allChecked);\n                  Fetchdata();\n                });\n                if (WindowName == "VAS_InventoryMove") {\n                  $root.find(".VAS-Inventorymove").css("display", "flex");\n                  $root.find("#VAS_FlocatorCtrl" + $self.windowNo).empty();\n                  $root.find("#VAS_TolocatorCtrl" + $self.windowNo).empty();\n                  _FlocatCtrl = $root.find("#VAS_FlocatorCtrl" + $self.windowNo);\n                  _TolocatCtrl = $root.find("#VAS_TolocatorCtrl" + $self.windowNo);\n\n                  //From warehouse\n                  var SqlWhere = " M_Locator.M_Warehouse_ID=" + DTDSrcWarehouse;\n                  _FromLocatorLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.TableDir, "M_Locator_ID", 0, false, SqlWhere);\n                  $FromLocatorControl = new VIS.Controls.VComboBox("M_Locator_ID", false, false, true, _FromLocatorLookUp, 50);\n                  var Flocatorctrlwrap = $(\'<div class="vis-control-wrap">\');\n                  var Flocatorbtnwrap = $(\'<div class="input-group-append">\');\n                  _FlocatCtrl.append(Flocatorctrlwrap);\n                  _FlocatCtrl.append(Flocatorbtnwrap);\n                  Flocatorctrlwrap.append($FromLocatorControl.getControl().attr(\'placeholder\', \' \').attr(\'data-placeholder\', \'\').attr(\'data-hasbtn\', \' \')).append($(\'<label>\' + VIS.Msg.getMsg("VAS_FromLocator") + \'</label>\'));\n                  FromLoctr = VIS.Utility.Util.getValueOfInt($FromLocatorControl.getValue());\n                  $FromLocatorControl.fireValueChanged = function () {\n                    FromLoctr = VIS.Utility.Util.getValueOfInt($FromLocatorControl.getValue());\n                  };\n\n                  ////towarehouse\n                  var SqlWhere = " M_Locator.M_Warehouse_ID=" + ToWarehouse;\n                  _ToLocatorLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.TableDir, "M_Locator_ID", 0, false, SqlWhere);\n                  $ToLocatorControl = new VIS.Controls.VComboBox("M_Locator_ID", false, false, true, _ToLocatorLookUp, 50);\n                  var Tolocatorctrlwrap = $(\'<div class="vis-control-wrap">\');\n                  var Tolocatorbtnwrap = $(\'<div class="input-group-append">\');\n                  _TolocatCtrl.append(Tolocatorctrlwrap);\n                  _TolocatCtrl.append(Tolocatorbtnwrap);\n                  Tolocatorctrlwrap.append($ToLocatorControl.getControl().attr(\'placeholder\', \' \').attr(\'data-placeholder\', \'\').attr(\'data-hasbtn\', \' \')).append($(\'<label>\' + VIS.Msg.getMsg("VAS_ToLocator") + \'</label>\'));\n                  ToLoctor = VIS.Utility.Util.getValueOfInt($ToLocatorControl.getValue());\n                  $ToLocatorControl.fireValueChanged = function () {\n                    ToLoctor = VIS.Utility.Util.getValueOfInt($ToLocatorControl.getValue());\n                  };\n                } else {\n                  $root.find(".VAS-Inventorymove").css("display", "none");\n                }\n              }\n              $self.setBusy(false);\n            });\n          });\n        }\n        $self.setBusy(false);\n      });\n    }\n    //VIS0336-for verifying is user alredy selected on user filter\n    function isProductTagExist(pTagid) {\n      var ptagItem = $root.find(\'.VAS_UserTag\').find("[item-id=\'" + pTagid + "\']");\n      if (ptagItem) {\n        if (ptagItem.length > 0) {\n          return false;\n        }\n      }\n      return true;\n    }\n    ;\n    function InitEvents() {\n      InputCartSearch.on(\'keyup\', function (e) {\n        CartName = InputCartSearch.val();\n        if (e.keyCode === 13) {\n          LoadCartData();\n        }\n      });\n      InputRefSearch.on(\'keyup\', function (e) {\n        RefNo = InputRefSearch.val();\n        if (e.keyCode === 13) {\n          LoadCartData();\n        }\n      });\n      ClearFilter.on("click touchstart", function (ev) {\n        UserIds = "";\n        userid = [];\n        RefNo = "";\n        InputRefSearch.val("");\n        CartName = "";\n        InputCartSearch.val("");\n        $FromDate.oldValue = null;\n        $FromDate.setValue("");\n        $FromDate.setValue(null);\n        $ToDate.oldValue = null;\n        $ToDate.setValue("");\n        $ToDate.setValue(null);\n        $root.find("#VAS_UserSearch_" + $self.windowNo).val("");\n        if ($root.find(\'.VAS_UserTag\').find(\'div\').length > 0) {\n          $root.find(\'.VAS_UserTag\').find(\'div\').remove();\n        }\n        LoadCartData();\n      });\n      $root.find(\'.VAS-CartLineDetails\').find(\'#VAS-BackArrow_\' + $self.windowNo).click(function () {\n        LoadCartData();\n      });\n      $root.find("#selectAllCheckbox").on("change", function () {\n        var isChecked = $(this).is(\':checked\');\n        $root.find("#VAS-CartLinesDetails_" + $self.windowNo + " input[type=\'checkbox\']").prop(\'checked\', isChecked);\n        Fetchdata();\n      });\n      $root.find(\'#VAS-Updatedcheckbox_\' + $self.windowNo).on("change", function () {\n        if ($(this).is(\':checked\')) {\n          IsUpdateTrue = true;\n        } else {\n          IsUpdateTrue = false;\n        }\n      });\n      $root.find(\'.VAS-CartLineDetails\').find(\'#VAS-CreateLines_\' + $self.windowNo).click(function () {\n        if (selectedLines.length == 0) {\n          VIS.ADialog.info("VAS_PleaseSelectLines", null, "", "");\n          return;\n        }\n        if (WindowName == "VAS_InventoryMove") {\n          if (FromLoctr == 0 || ToLoctor == 0) {\n            VIS.ADialog.info("VAS_PleaseSelectLocator", null, "", "");\n            return;\n          }\n          if (FromLoctr == ToLoctor) {\n            VIS.ADialog.info("VAS_InValidCase", null, "", "");\n            return;\n          }\n        }\n        SaveTransaction();\n      });\n      $FromDate.getControl().on("change", function () {\n        if ($FromDate.getValue() > $ToDate.getValue()) {\n          VIS.ADialog.info("VAS_InCorrectDate", null, "", "");\n          $FromDate.oldValue = null;\n          $FromDate.setValue("");\n          $FromDate.setValue(null);\n          return;\n        }\n        LoadCartData();\n      });\n      $ToDate.getControl().on("change", function () {\n        if ($FromDate.getValue() > $ToDate.getValue()) {\n          VIS.ADialog.info("VAS_InCorrectDate", null, "", "");\n          $ToDate.oldValue = null;\n          $ToDate.setValue("");\n          $ToDate.setValue(null);\n          return;\n        }\n        LoadCartData();\n      });\n    }\n    //VIS0336-for storign selected lines in array on the selection of checkbox\n    function Fetchdata() {\n      selectedLines = [];\n      $root.find("#VAS-CartLinesDetails_" + $self.windowNo + " input:checked").each(function () {\n        var row = $(this).closest(\'tr\');\n        var Code = row.attr(\'cart-code\');\n        var ProductId = row.attr(\'product-id\');\n        var AttrId = row.attr(\'attr-id\');\n        var UOMId = row.attr(\'uom-id\');\n        var InventoryCountId = row.attr(\'inventorycount-id\');\n        var Qty = row.attr(\'qty\');\n        selectedLines.push({\n          Code: Code,\n          ProductId: ProductId,\n          AttrId: AttrId,\n          UOMId: UOMId,\n          InventoryCountId: InventoryCountId,\n          Qty: Qty\n        });\n      });\n    }\n    //VIS0336-for saving the records\n    function SaveTransaction() {\n      $self.setBusy(true);\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS/InventoryLines/SaveTransactions",\n        type: "POST",\n        dataType: "json",\n        async: true,\n        data: {\n          TransactionID: $self.Record_ID,\n          lstScanDetail: JSON.stringify(selectedLines),\n          IsUpdateTrue: IsUpdateTrue,\n          windowID: window_ID,\n          RefNo: Reference,\n          FromLocatorId: FromLoctr,\n          ToLocatorId: ToLoctor\n        },\n        success: function (result) {\n          if (JSON.parse(result) == "") {\n            $self.frame.close();\n            VIS.ADialog.info("VAS_RecordSaved", null, "", "");\n          } else {\n            VIS.ADialog.info(result);\n          }\n          $self.setBusy(false);\n        },\n        error: function () {\n          $self.setBusy(false);\n        }\n      });\n    }\n    //VIS0336-forfetching the user for autocomplete cntrl\n    function GetUsers(response, value) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "InventoryLines/GetUsers",\n        type: "GET",\n        datatype: "json",\n        data: {\n          SearchKey: value\n        },\n        success: function (result) {\n          var result = JSON.parse(result);\n          response($.map(result, function (item) {\n            return {\n              label: item.Name,\n              value: item.Name,\n              ids: item.Key\n            };\n          }));\n          $($self.div).autocomplete("search", "");\n          $($self.div).trigger("focus");\n        }\n      });\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n    function createBusyIndicator() {\n      $bsyDiv = $(\'<div class="vis-busyindicatorouterwrap" style="visibility: hidden;"></div>\');\n      $bsyDiv.append($(\'<div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div>\'));\n      $self.setBusy(false);\n      $root.append($bsyDiv);\n    }\n    ;\n    this.setBusy = function (isBusy) {\n      if (isBusy) {\n        $bsyDiv[0].style.visibility = "visible";\n      } else {\n        $bsyDiv[0].style.visibility = "hidden";\n      }\n    };\n  };\n  VAS.VAS_CreateInventoryLines.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.Record_ID = this.frame.getRecord_ID();\n    this.Table_ID = this.frame.getAD_Table_ID();\n    this.frame.getContentGrid().append(this.getRoot());\n    this.initalize();\n    this.intialLoad();\n  };\n  VAS.VAS_CreateInventoryLines.prototype.setHeight = function () {\n    return "575";\n  };\n  VAS.VAS_CreateInventoryLines.prototype.setWidth = function () {\n    return "850";\n  };\n  VAS.VAS_CreateInventoryLines.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_CreateInventoryLines.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_CreditUtilizationWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        :Get the details of PO and Create GRN\r\n * chronological  : Development\r\n * Created Date   : 20 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_CreditUtilizationWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0,\n      referenceID = 0;\n    var pageSize = 4;\n    var $divCustContainer, $divChartContainer, divCustomer, divChart, spnPageCount;\n    var lookupCredit, ctrlCredit, $cmbCredit, btnUpdate;\n    var bp_ID, loc_ID, creditsetting, creditVal, creditlimit, creditused;\n    this.initalize = function () {\n      widgetID = this.windowNo;\n      createBusyIndicator();\n      $root.append('<div class=\"VAS-creditLimit-container\">' + '<div class= \"VAS-LeftTabs-container\" id=\"VAS_CustomerContainer_' + widgetID + '\">' + '<div class=\"VAS-tab-heading\">' + VIS.Msg.getMsg(\"VAS_CreditUtilization\") + '</div>' + '<div class=\"nav\" id=\"VAS_divCustomers_' + widgetID + '\" role=\"tablist\" aria-orientation=\"vertical\"> ' + '</div>' + '<div class=\"VAS-tiles-pagination\">' + '<i class=\"fa fa-arrow-circle-left VAS-page-prev\" id=\"VAS_Prev_' + widgetID + '\" aria-hidden=\"true\"></i>' + '<span class=\"VAS-total-count\" id=\"VAS_spnPageCount_' + widgetID + '\">0 of 0</span>' + '<i class=\"fa fa-arrow-circle-right VAS-page-next\" id=\"VAS_Next_' + widgetID + '\" aria-hidden=\"true\"></i>' + '</div>' + '</div>' + '<div class=\"VAS-creditLimit-chart\" id=\"VAS_ChartContainer_' + widgetID + '\" aria-controls=\"credit-limit\">' + '<div class=\"VAS-chart-container\" id=\"VAS_divChart_' + widgetID + '\"></div>' + '<div class=\"VAS-inputWbtn\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '<div class=\"input-group vis-input-wrap\">' + '<div class=\"vis-control-wrap\" id=\"VAS_cmbCredit_' + widgetID + '\">' + '<label for=\"VAS_Phase\">' + VIS.Msg.getMsg(\"VAS_CreditValidation\") + '</label>' + '</div>' + '</div>' + '<input type=\"button\" id=\"VAS_btnUpdate_' + widgetID + '\" class=\"btn ui-button ui-widget\" value=\"Update\">' + '</div>' + '</div>' + '</div>');\n      $divCustContainer = $root.find(\"#VAS_CustomerContainer_\" + widgetID);\n      $divChartContainer = $root.find(\"#VAS_ChartContainer_\" + widgetID);\n      divCustomer = $divCustContainer.find(\"#VAS_divCustomers_\" + widgetID);\n      divChart = $divChartContainer.find(\"#VAS_divChart_\" + widgetID);\n      $cmbCredit = $divChartContainer.find(\"#VAS_cmbCredit_\" + widgetID);\n      btnUpdate = $divChartContainer.find(\"#VAS_btnUpdate_\" + widgetID);\n      spnPageCount = $root.find(\"#VAS_spnPageCount_\" + widgetID);\n      referenceID = VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"Common/GetReference\", {\n        Name: \"CreditValidation\"\n      });\n      lookupCredit = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.List, \"CreditValidation\", referenceID, false, \"AD_Ref_List.IsActive = 'Y'\");\n      ctrlCredit = new VIS.Controls.VComboBox(\"CreditValidation\", true, false, true, lookupCredit, 50);\n      $cmbCredit.prepend(ctrlCredit.getControl());\n\n      // Add event listeners for arrows\n      $divCustContainer.find('#VAS_Prev_' + widgetID).on('click', function (e) {\n        if ($self.currentPage > 1) {\n          $bsyDiv[0].style.visibility = \"visible\";\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $divCustContainer.find('#VAS_Next_' + widgetID).on('click', function (e) {\n        if ($self.currentPage < $self.totalPages) {\n          $bsyDiv[0].style.visibility = \"visible\";\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      btnUpdate.on('click', function () {\n        if (ctrlCredit.getValue() == creditVal) {\n          return;\n        }\n        $bsyDiv.css('visibility', 'visible');\n        VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"Product/UpdateCreditValidation\", {\n          BP_ID: bp_ID,\n          Loc_ID: loc_ID,\n          CreditSetting: creditsetting,\n          CreditValidation: ctrlCredit.getValue()\n        }, function (result) {\n          var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n          var message = \"\";\n          if (result == 1) {\n            creditVal = ctrlCredit.getValue();\n            message = VIS.Msg.getMsg(\"VAS_CreditValUpd\");\n          } else {\n            ctrlCredit.setValue(creditVal);\n            message = VIS.Msg.getMsg(\"VAS_CreditValNotUpd\");\n          }\n          spnWO.text(message);\n          spnWO.fadeIn();\n          spnWO.fadeOut(5000);\n          $self.intialLoad($self.currentPage);\n        });\n      });\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"Product/GetCustomerCredit\", {\n        pageNo: pageNo,\n        pageSize: pageSize\n      }, function (response) {\n        divCustomer.empty();\n        var statusClass = \"\";\n        if (response != null && response.Customers != null && response.Customers.length > 0) {\n          for (i = 0; i < response.Customers.length; i++) {\n            if (response.Customers[i][\"SOCreditStatus\"] == \"S\") {\n              statusClass = \"VAS-redStatusColor\";\n            } else if (response.Customers[i][\"SOCreditStatus\"] == \"H\") {\n              statusClass = \"VAS-orangeStatusColor\";\n            } else if (response.Customers[i][\"SOCreditStatus\"] == \"O\") {\n              statusClass = \"VAS-greenStatusColor\";\n            } else if (response.Customers[i][\"SOCreditStatus\"] == \"W\") {\n              statusClass = \"VAS-yellowStatusColor\";\n            } else {\n              statusClass = \"VAS-greyStatusColor\";\n            }\n            var hue = Math.floor(Math.random() * (360 - 0)) + 0;\n            var v = Math.floor(Math.random() * 16) + 80;\n            var pastel = 'hsl(' + hue + ', 100%,' + v + '%)';\n            var pastelClr = 'hsl(' + hue + ', 100%,' + (v - 50) + '%)';\n            var highlightChar = response.Customers[i].Name;\n            var txt = highlightChar.trim().split(' ');\n            highlightChar = txt[0].substring(0, 1).toUpper();\n            if (txt.length > 1) {\n              highlightChar += txt[txt.length - 1].substring(0, 1).toUpper();\n            } else {\n              highlightChar = txt[0].substring(0, 2).toUpper();\n            }\n            divCustomer.append('<div class=\"VAS-credit-limit-nav ' + (i == 0 ? \"active\" : \"\") + '\" aria-controls=\"credit-limit\" data-creditlimit=\"' + response.Customers[i][\"SO_CreditLimit\"] + '\" data-creditused=\"' + response.Customers[i][\"SO_CreditUsed\"] + '\" data-bpid=\"' + response.Customers[i][\"C_BPartner_ID\"] + '\" data-locid=\"' + response.Customers[i][\"Location_ID\"] + '\" data-creditsetting=\"' + response.Customers[i][\"CreditSetting\"] + '\" data-creditval=\"' + response.Customers[i][\"CreditValidation\"] + '\">' + '<div class=\"VAS-credit-des\">' +\n            //'<img src=\"' + (response.Customers[i].ImageUrl != \"\" ? VIS.Application.contextUrl + response.Customers[i].ImageUrl :\n            //    VIS.Application.contextUrl + 'Areas/VAS/Content/Images/dummy.jpg') + '\" alt=\"\"> ' +\n            '<div class=\"VAS-credit-img\" style=\"background-color:' + pastel + '; color:' + pastelClr + '\">' + '<span>' + highlightChar + '</span></div>' + '<div class=\"VAS-userCredit-detail\">' + '<div class=\"VAS-userCredit-name\">' + response.Customers[i].Name + '</div>' + '<div class=\"VAS-userCreditStatus\">' + VIS.Msg.getMsg(\"VAS_Status\") + '<span class=\"' + statusClass + '\">' + response.Customers[i][\"CreditStatus\"] + '</span></div>' + '</div>' + '</div>' + '<div class=\"progress\">' + '<div class=\"progress-bar bg-danger\" role=\"progressbar\" style=\"width:' + response.Customers[i].CreditUtil + '%\" aria-valuenow=\"100\" aria-valuemin=\"0\" aria-valuemax=\"100\"></div>' + '</div>' + '</div>');\n            if (i == 0) {\n              bp_ID = response.Customers[i][\"C_BPartner_ID\"];\n              loc_ID = response.Customers[i][\"Location_ID\"];\n              creditsetting = response.Customers[i][\"CreditSetting\"];\n              creditVal = response.Customers[i][\"CreditValidation\"];\n              creditlimit = response.Customers[i][\"SO_CreditLimit\"];\n              creditused = response.Customers[i][\"SO_CreditUsed\"];\n              displayUtilizationDetails(bp_ID, loc_ID, creditsetting, creditVal, creditlimit);\n            }\n          }\n\n          /* Add Pagination div on first tym data load*/\n          if (pageNo == 1) {\n            $self.totalPages = Math.ceil(response.RecordCount / pageSize);\n          }\n          spnPageCount.text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n\n          // Attach click event listener to delivery boxes\n          divCustomer.off('click', '.VAS-credit-limit-nav');\n          divCustomer.on('click', '.VAS-credit-limit-nav', function () {\n            $bsyDiv.css('visibility', 'visible');\n            divCustomer.find('.VAS-credit-limit-nav').removeClass('active');\n            $(this).addClass('active');\n            bp_ID = $(this).data('bpid');\n            loc_ID = $(this).data('locid');\n            creditsetting = $(this).data('creditsetting');\n            creditVal = $(this).data('creditval');\n            creditlimit = $(this).data('creditlimit');\n            creditused = $(this).data('creditused');\n            displayUtilizationDetails(bp_ID, loc_ID, creditsetting, creditVal, creditlimit);\n          });\n        }\n        $bsyDiv.css('visibility', 'hidden');\n      });\n    };\n    function displayUtilizationDetails() {\n      divChart.empty();\n\n      // Remove existing canvas if exists\n      $divChartContainer.find('canvas').remove();\n\n      // Prepare the data object for the chart\n      const data = {\n        labels: [VIS.Msg.getMsg(\"CreditLimit\"), VIS.Msg.getMsg(\"VAS_CreditUsed\")],\n        label: VIS.Msg.getMsg(\"VAS_CreditUtilization\"),\n        datasets: [{\n          backgroundColor: ['rgba(255, 99, 132, 0.6)', 'rgba(54, 162, 235, 0.5)'],\n          data: [creditlimit, creditused],\n          borderColor: 'rgba(0,0,0,0)',\n          // Transparent border color\n          borderWidth: 0,\n          // No border\n          hoverOffset: 4\n        }]\n      };\n      const plugin = {\n        beforeInit: function (chart) {\n          const originalFit = chart.legend.fit;\n          chart.legend.fit = function fit() {\n            originalFit.bind(chart.legend)();\n            this.height += 10;\n          };\n        }\n      };\n\n      // Define the chart configuration for Doughnut chart\n      const config = {\n        type: 'doughnut',\n        data: data,\n        options: {\n          responsive: true,\n          elements: {\n            arc: {\n              borderWidth: 1 // Adjust the border width if needed\n            },\n            layout: {\n              padding: {\n                bottom: 0\n              }\n            }\n          },\n          radius: '70%',\n          // Adjust this value to decrease the outer radius\n          plugins: {\n            legend: {\n              display: true,\n              position: 'bottom',\n              // Positioning the legend on the right                            \n              padding: {\n                top: 0\n              }\n            },\n            tooltip: {\n              callbacks: {\n                label: function (tooltipItem) {\n                  const dataIndex = tooltipItem.dataIndex;\n                  const datasetIndex = tooltipItem.datasetIndex;\n                  const dataset = tooltipItem.chart.data.datasets[datasetIndex];\n                  const labels = tooltipItem.chart.data.labels;\n                  const value = dataset.data[dataIndex];\n                  return labels[dataIndex] + ': ' + value;\n                }\n              }\n            },\n            datalabels: {\n              display: false,\n              color: '#000',\n              anchor: 'end',\n              align: 'end',\n              formatter: function (value) {\n                return value; // Return value for external use only\n              },\n              font: {\n                weight: 'bold'\n              }\n            }\n          }\n        }\n      };\n\n      // Create a new canvas element and append it to the root\n      const canvas = $('<canvas></canvas>');\n      divChart.append(canvas);\n      canvas.css('height', '100%');\n      canvas.css('width', '100%');\n\n      // Initialize the chart with the new data\n      const ctx = canvas[0].getContext('2d');\n      new Chart(ctx, config);\n      ctrlCredit.setValue(creditVal);\n      $bsyDiv.css('visibility', 'hidden');\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_CreditUtilizationWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_CreditUtilizationWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_CreditUtilizationWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_CreditUtilizationWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_CreditUtilizationWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_CreditUtilizationWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_CreditUtilizationWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_CustomerRMAWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Get Customer RMA detail and create customer return\r\n * chronological  : Development\r\n * Created Date   : 23 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_CustomerRMAWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-customer-container-pending\">' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_CustomerRMA\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_CustomerRMACount\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n      //    buildPagination();\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: \"CR\"\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_CustomerLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-customer-container-pending\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToCustomerRMA\") + '        </h6>' + '<span id=\"VAS_GenerateGRN_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateCustomerReturn\") + '\">' + '<i class=\"vis vis-action\" ></i></span> ' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading VAS-orders-text-white\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text VAS-orders-text-white\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no VAS-orders-text-white\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count VAS-orders-text-white\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n          $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"VAS-delivery-box\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\"><span title=\"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\">' + line.QtyOrdered + '</span></div>' + '                </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details VAS-orders-text-white\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateGRN_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateGRN_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateGRN_' + widgetID).hide();\n        }\n        console.log(selectedOrderLineIDs);\n      });\n\n      // Event listener for Generate Customer return  button\n      $root.on('click', '#VAS_GenerateGRN_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateCustomerReturn(orderId);\n      });\n      $root.find('#VAS_GenerateGRN_' + widgetID).hide();\n      function generateCustomerReturn(orderId) {\n        $bsyDiv.css('visibility', 'visible');\n        var orderLineIDs = selectedOrderLineIDs.join(',');\n        $.ajax({\n          url: VIS.Application.contextUrl + \"Product/CreateGRN\",\n          data: {\n            C_Order_ID: orderId,\n            C_OrderLines_IDs: orderLineIDs,\n            Type: \"CR\"\n          },\n          dataType: 'json',\n          success: function (response) {\n            var response = JSON.parse(response);\n            if (response.Shipment_ID > 0) {\n              try {\n                /* if (AD_Window_ID > 0) {*/\n                var windowParam = {\n                  \"TabWhereClause\": \"M_InOut.M_InOut_ID=\" + response.Shipment_ID + \"\",\n                  \"TabLayout\": \"Y\",\n                  // 'N'[Grid],'Y'[Single],'C'[Card]}\t \t \n                  \"TabIndex\": \"0\"\n                };\n                $self.widgetFirevalueChanged(windowParam);\n                $self.currentPage = 1;\n                $self.intialLoad($self.currentPage);\n                //  }\n              } catch (e) {\n                console.log(e);\n              }\n            } else {\n              var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n              var message = \"\";\n              if (response.message != null && response.message != \"\") {\n                message = response.message;\n              } else {\n                message = VIS.Msg.getMsg(\"VAS_CustomerReturnNotGenerated\");\n              }\n              spnWO.text(message);\n              spnWO.fadeIn();\n              spnWO.fadeOut(5000);\n            }\n            $bsyDiv.css('visibility', 'hidden');\n          },\n          error: function (xhr, status, error) {\n            // Handle errors\n            console.log('Failed to fetch data:', status, error);\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        });\n      }\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows VAS-orders-text-white\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_CustomerRMAWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_CustomerRMAWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_CustomerRMAWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_CustomerRMAWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_CustomerRMAWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_CustomerRMAWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_CustomerRMAWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_DueFulfilmentWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Get the Expected Delivery Orders details\r\n * chronological  : Development\r\n * Created Date   : 12 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_DueFulfilmentWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    var childRecords = [];\n    var itemsPerPage = 6;\n    var totalPages = 0;\n    var currentPage = 1;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-due-fulfilment-container\">' + '    <div class=\"VAS-orders-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_DueFulfilments\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_Fulfilments\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n      //    buildPagination();\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: 'PD'\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_DeliveryLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $root.find('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-due-fulfilment-container\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-orders-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToFulfilment\") + '        </h6>' + '<span id=\"VAS_GenerateDeliveryOrder_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateDeliverOrder\") + '\"><i class=\"fa fa-truck\" aria-hidden=\"true\"></i></span>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      childRecords = childRecordsMap[docNo] || [];\n      totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      currentPage = 1;\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateDeliveryOrder_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).hide();\n        }\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateDeliveryOrder_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateDeliveryOrder(orderId);\n      });\n      $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).hide();\n    }\n    function generateDeliveryOrder(orderId) {\n      $bsyDiv.css('visibility', 'visible');\n      var orderLineIDs = selectedOrderLineIDs.join(',');\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/CreateShipment\",\n        data: {\n          C_Order_ID: orderId,\n          C_OrderLines_IDs: orderLineIDs\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          if (response.Shipment_ID > 0) {\n            $self.currentPage = 1;\n            $self.intialLoad($self.currentPage);\n            if (AD_Window_ID > 0) {\n              var zoomQuery = new VIS.Query();\n              zoomQuery.addRestriction(\"M_InOut_ID\", VIS.Query.prototype.EQUAL, response.Shipment_ID);\n              zoomQuery.setRecordCount(1);\n              VIS.viewManager.startWindow(AD_Window_ID, zoomQuery);\n            }\n          } else {\n            var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n            var message = \"\";\n            if (response.message != null && response.message != \"\") {\n              message = response.message;\n            } else {\n              message = VIS.Msg.getMsg(\"VAS_DeliveryOrderNotGenerated\");\n            }\n            spnWO.text(message);\n            spnWO.fadeIn();\n            spnWO.fadeOut(5000);\n          }\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    }\n    function updatePage(page) {\n      // Ensure page is within bounds\n      if (page < 1) {\n        page = 1;\n      }\n      if (page > totalPages) {\n        page = totalPages;\n      }\n      currentPage = page;\n      // Calculate start and end index\n      var startIndex = (currentPage - 1) * itemsPerPage;\n      var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n      // Clear previous records\n      $root.find('#VAS_OrderLine_' + widgetID).empty();\n      // Generate HTML for records of the current page\n      for (var i = startIndex; i < endIndex; i++) {\n        var line = childRecords[i];\n        var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n        var hasStock = line.ProductType != 'I' || line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n        var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n        var badgeClass;\n        if (line.ProductType != 'I' || line.OnHandQty >= line.QtyOrdered) {\n          badgeClass = 'badge-green'; //  stock available\n        } else if (line.OnHandQty < line.QtyOrdered && line.OnHandQty > 0) {\n          badgeClass = 'badge-orange'; //stock less tham order \n        } else {\n          badgeClass = 'badge-red'; // Insufficient stock\n        }\n        $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"' + boxClass + '\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + (hasStock ? '' : ' disabled') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\">' + '                    <span title = \"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\" class=\"badge badge-light ' + badgeClass + '\"> ' + line.QtyEntered + '</span ></div > ' + '                      </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n      }\n      $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n      /*  Append pagination controls*/\n      $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n      $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_DueFulfilmentWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_DueFulfilmentWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_DueFulfilmentWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_DueFulfilmentWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_DueFulfilmentWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_DueFulfilmentWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_DueFulfilmentWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_DueOrderWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        :Get the details of PO and Create GRN\r\n * chronological  : Development\r\n * Created Date   : 20 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_DueOrderWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-due-fulfilment-container\">' + '    <div class=\"VAS-orders-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_DueOrders\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_Orders\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n      //    buildPagination();\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: \"PG\"\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"Vendor\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_VendorLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $root.find('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          //else {\n\n          //    // Display \"No data available\" message\n          //    const message = $('<div class=\"VAS-data-message\">' + VIS.Msg.getMsg(\"VAS_NoDataAvailable\") + '</div>');\n          //    $root.find('.VAS-height-container').append(message);\n          //}\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-due-fulfilment-container\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-orders-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToOrder\") + '        </h6>' + '<span id=\"VAS_GenerateGRN_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateGRN\") + '\">' + '<i class=\"vis vis-action\" ></i ></span> ' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"Vendor\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n          //var hasStock = line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n          //var hasStock = line.OnHandQty > 0;\n          //var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n\n          $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"VAS-delivery-box\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\"><span title=\"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\">' + line.QtyEntered + '</span></div>' + '                </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateGRN_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateGRN_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateGRN_' + widgetID).hide();\n        }\n        console.log(selectedOrderLineIDs);\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateGRN_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateGRN(orderId);\n      });\n      $root.find('#VAS_GenerateGRN_' + widgetID).hide();\n      function generateGRN(orderId) {\n        $bsyDiv.css('visibility', 'visible');\n        var orderLineIDs = selectedOrderLineIDs.join(',');\n        $.ajax({\n          url: VIS.Application.contextUrl + \"Product/CreateGRN\",\n          data: {\n            C_Order_ID: orderId,\n            C_OrderLines_IDs: orderLineIDs\n          },\n          dataType: 'json',\n          success: function (response) {\n            var response = JSON.parse(response);\n            if (response.Shipment_ID > 0) {\n              $self.currentPage = 1;\n              $self.intialLoad($self.currentPage);\n              if (AD_Window_ID > 0) {\n                var zoomQuery = new VIS.Query();\n                zoomQuery.addRestriction(\"M_InOut_ID\", VIS.Query.prototype.EQUAL, response.Shipment_ID);\n                zoomQuery.setRecordCount(1);\n                VIS.viewManager.startWindow(AD_Window_ID, zoomQuery);\n              }\n            } else {\n              var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n              var message = \"\";\n              if (response.message != null && response.message != \"\") {\n                message = response.message;\n              } else {\n                message = VIS.Msg.getMsg(\"VAS_DeliveryOrderNotGenerated\");\n              }\n              spnWO.text(message);\n              spnWO.fadeIn();\n              spnWO.fadeOut(5000);\n            }\n            $bsyDiv.css('visibility', 'hidden');\n          },\n          error: function (xhr, status, error) {\n            // Handle errors\n            console.log('Failed to fetch data:', status, error);\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        });\n        console.log('Generating delivery order for ID:', orderId);\n      }\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_DueOrderWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_DueOrderWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_DueOrderWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_DueOrderWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_DueOrderWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_DueOrderWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_DueOrderWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ExpRevProfitWidget.js":()=>{eval("{/************************************************************\r\n * Module Name��� : VAS\r\n * Purpose������� : This Widget is used to showcase the Expense Revenue And Profit Data\r\n * chronological  : Development\r\n * Created Date   : 03 October 2024\r\n * Created by     : VIS_0045\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_ExpRevProfitWidget = function () {\n    var widgetID = 0;\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $maindiv = null;\n    var vDifferentYearDataList = null;\n    var $root = $('<div class=\"h-100 w-100 vas-ExRePr-background\">');\n\n    /** Load Design on Load */\n    this.initalize = function () {\n      widgetID = VIS.Utility.Util.getValueOfInt(this.widgetInfo.AD_UserHomeWidgetID) != 0 ? this.widgetInfo.AD_UserHomeWidgetID : $self.windowNo;\n      GetColumnID();\n      createBusyIndicator();\n      $maindiv = $('<div id=\"VAS-BarLine-ERP_' + widgetID + '\" class=\"vas-barline-ExRePr-container\">');\n      var MainHeadingComboDiv = $('<div class=\"d-flex justify-content-between vas-ExRePr-heading\">');\n      var HeadingDiv = $('<div class= \"\">' + VIS.Msg.getMsg(\"VAS_ExpRevProfitWid\") + '</div>');\n\n      // Create Control Div\n      $DifferentYearDataListDiv = $('<div class=\"input-group vis-input-wrap\">');\n      /* parameters are: context, windowno., coloumn id, display type, DB coloumn name, Reference key, Is parent, Validation Code*/\n      $DifferentYearDataListLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), widgetID, 0, VIS.DisplayType.List, \"VAS_ExpRevProfitWidget\", ColumnIds.AD_Reference_ID, false, null);\n      // Parameters are: columnName, mandatory, isReadOnly, isUpdateable, lookup,display length\n      vDifferentYearDataList = new VIS.Controls.VComboBox(\"VAS_ExpRevProfitWidget\", true, false, true, $DifferentYearDataListLookUp, 20);\n      vDifferentYearDataList.setValue(\"01\");\n      var $DifferentYearDataListControlWrap = $('<div class=\"vis-control-wrap\">');\n      $DifferentYearDataListDiv.append($DifferentYearDataListControlWrap);\n      $DifferentYearDataListControlWrap.append(vDifferentYearDataList.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' '));\n      $DifferentYearDataListDiv.append($DifferentYearDataListControlWrap);\n\n      // Add Control into Maine Heading Div\n      MainHeadingComboDiv.append(HeadingDiv).append($DifferentYearDataListDiv);\n\n      // Add Maine Hedaeding dive into main div\n      $maindiv.append(MainHeadingComboDiv);\n\n      // Add maine div into Root\n      $root.append($maindiv);\n\n      // Fire Value Change Evenet for the year Control\n      vDifferentYearDataList.fireValueChanged = function () {\n        vDifferentYearDataList.setValue(vDifferentYearDataList.getValue());\n        $bsyDiv[0].style.visibility = \"visible\";\n        $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n        $self.getExpRevDetails();\n      };\n    };\n\n    /** Get data and load */\n    this.getExpRevDetails = function () {\n      // Show busy indicator while data is loading\n      $bsyDiv[0].style.visibility = \"visible\";\n\n      // Define your AJAX request\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetIncomeAndExpenseData\", {\n        \"ListValue\": vDifferentYearDataList.getValue()\n      }, function (dr) {\n        var ExpRevData = dr;\n\n        // Remove existing canvas if exists\n        $root.find('canvas').remove();\n        if (ExpRevData != null && ExpRevData.ErrorMessage != null) {\n          $maindiv.append('<div class=\"vas-igwidg-notfounddiv\" id=\"vas_norecordcont_' + widgetID + '\">' + VIS.Msg.getMsg(\"VAS_RecordNotFound\") + '</div>');\n          $root.append($maindiv);\n        } else {\n          let precision = ExpRevData.Precision;\n\n          // Define static labels and colors\n          const labels = ExpRevData.lstLabel;\n\n          // Prepare the data object for the chart\n          const data = {\n            labels: labels,\n            // Dynamic labels\n            datasets: [{\n              label: VIS.Msg.getMsg(\"VAS_Expenses\"),\n              data: ExpRevData.lstExpData,\n              borderColor: 'rgba(0,0,0,0)',\n              // Transparent border color\n              borderWidth: 0,\n              // No border\n              backgroundColor: 'rgb(204, 0, 0, 0.6)',\n              order: 1\n            }, {\n              label: VIS.Msg.getMsg(\"VAS_Revenue\"),\n              data: ExpRevData.lstRevData,\n              borderColor: 'rgba(0,0,0,0)',\n              // Transparent border color\n              borderWidth: 0,\n              // No border\n              backgroundColor: 'rgba(0, 102, 204, 0.6)',\n              order: 1\n            }, {\n              label: VIS.Msg.getMsg(\"VAS_Profit\"),\n              data: ExpRevData.lstProfitData,\n              borderColor: 'rgba(51, 102, 0, 0.5)',\n              // Transparent border color\n              borderWidth: 2,\n              backgroundColor: 'rgba(51, 102, 0, 0.5)',\n              type: 'line',\n              tension: 0.4,\n              fill: false,\n              /* No fill under the line */\n              order: 2 /*Draw this last (higher z-index) */\n            }]\n          };\n\n          // this is used to set the padding for legend\n          const plugin = {\n            beforeInit: function (chart) {\n              const originalFit = chart.legend.fit;\n              chart.legend.fit = function fit() {\n                originalFit.bind(chart.legend)();\n                this.height += -10;\n              };\n            }\n          };\n\n          // Define the chart configuration for BAR / Line chart\n          const config = {\n            type: 'bar',\n            data: data,\n            options: {\n              responsive: true,\n              layout: {\n                padding: 0\n              },\n              scales: {\n                x: {\n                  grid: {\n                    display: true // Hide the grid lines on the x-axis   \n                  }\n                },\n                y: {\n                  grid: {\n                    display: false // Hide the grid lines on the y-axis\n                    //beginAtZero: true,\n                  }\n                },\n                y1: {\n                  /* type: 'linear',*/\n                  display: false,\n                  /*position: 'right',*/\n                  beginAtZero: false\n                  /*grid: {\r\n                      drawOnChartArea: false, // only want the grid lines for one axis to show up\r\n                  },*/\n                }\n              },\n              plugins: {\n                title: {\n                  display: true,\n                  text: \" \",\n                  align: 'start',\n                  /*font: {\r\n                    size: 18\r\n                  },*/\n                  padding: {\n                    top: 0,\n                    bottom: 0\n                  }\n                },\n                legend: {\n                  display: true,\n                  position: 'bottom',\n                  // Positioning the legend on the right\n                  padding: {\n                    top: 0,\n                    bottom: 0\n                  }\n                },\n                tooltip: {\n                  callbacks: {\n                    label: function (tooltipItem) {\n                      const dataIndex = tooltipItem.dataIndex;\n                      const datasetIndex = tooltipItem.datasetIndex;\n                      const dataset = tooltipItem.chart.data.datasets[datasetIndex];\n                      const labels = tooltipItem.chart.data.labels;\n                      const dsLabel = dataset.label;\n                      const value = dataset.data[dataIndex];\n                      return dsLabel + \" - \" + labels[dataIndex] + ': ' + value.toLocaleString(window.navigator.language, {\n                        minimumFractionDigits: precision,\n                        maximumFractionDigits: precision\n                      });\n                    }\n                  }\n                },\n                datalabels: {\n                  display: false,\n                  color: '#000',\n                  anchor: 'end',\n                  align: 'end',\n                  formatter: function (value) {\n                    return value; // Return value for external use only\n                  },\n                  font: {\n                    weight: 'bold'\n                  }\n                }\n              }\n            },\n            plugins: [plugin]\n          };\n\n          // Create a new canvas element and append it to the root\n          const canvas = $('<canvas class=\"vas-barline-ExRePr-canvas\"></canvas>');\n          var polarChart = $root.find('#VAS-BarLine-ERP_' + widgetID);\n          polarChart.append(canvas);\n\n          // Initialize the chart with the new data\n          const ctx = canvas[0].getContext('2d');\n          new Chart(ctx, config);\n        }\n\n        // Hide busy indicator\n        $bsyDiv[0].style.visibility = \"hidden\";\n      });\n    };\n\n    /** Get List Reference ID for filter Data */\n    var GetColumnID = function () {\n      ColumnIds = VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetColumnID\", {\n        \"refernceName\": \"VAS_ExpRevProfitWidget\"\n      }, null);\n    };\n\n    /** Add busy Indicator in Root */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $bsyDiv[0].style.visibility = \"visible\";\n      $root.append($bsyDiv);\n    }\n    ;\n\n    /** Get Root */\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /** Refresh Widget Data */\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n      $self.getExpRevDetails();\n    };\n  };\n\n  /**\r\n   * Int Function for Intialize Form\r\n   * @param {any} windowNo\r\n   * @param {any} frame\r\n   */\n  VAS.VAS_ExpRevProfitWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var self = this;\n    window.setTimeout(function () {\n      self.getExpRevDetails();\n    }, 50);\n  };\n\n  /**\r\n   * Widget Size change\r\n   * @param {any} widget\r\n   */\n  VAS.VAS_ExpRevProfitWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n\n  /** refresh Widget Function */\n  VAS.VAS_ExpRevProfitWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n\n  /** Dispose Function */\n  VAS.VAS_ExpRevProfitWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ExpRevProfitWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ExpectedDeliveryWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Get the Expected Delivery Orders details\r\n * chronological  : Development\r\n * Created Date   : 12 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_ExpectedDeliveryWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-deliveries-container\">' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_Expecteddeliveries\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_Deliveries\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n      //    buildPagination();\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: 'ED'\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_DeliveryLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $root.find('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          //else {\n\n          //    // Display \"No data available\" message\n          //    const message = $('<div class=\"VAS-data-message\">' + VIS.Msg.getMsg(\"VAS_NoDataAvailable\") + '</div>');\n          //    $root.find('.VAS-height-container').append(message);\n          //}\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-deliveries-container\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToDeliveries\") + '        </h6>' + '<span id=\"VAS_GenerateDeliveryOrder_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateDeliverOrder\") + '\"><i class=\"fa fa-truck\" aria-hidden=\"true\"></i></span>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading VAS-orders-text-white\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text VAS-orders-text-white\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no VAS-orders-text-white\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count VAS-orders-text-white\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n          var hasStock = line.ProductType != 'I' || line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n          var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n          var badgeClass;\n          if (line.ProductType != 'I' || line.OnHandQty >= line.QtyOrdered) {\n            badgeClass = 'badge-green'; //  stock available\n          } else if (line.OnHandQty < line.QtyOrdered && line.OnHandQty > 0) {\n            badgeClass = 'badge-orange'; //stock less tham order \n          } else {\n            badgeClass = 'badge-red'; // Insufficient stock\n          }\n          $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"' + boxClass + '\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + (hasStock ? '' : ' disabled') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\">' + '                    <span title = \"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\" class=\"badge badge-light ' + badgeClass + '\"> ' + line.QtyEntered + '</span ></div > ' + '                      </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details VAS-orders-text-white\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateDeliveryOrder_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).hide();\n        }\n        console.log(selectedOrderLineIDs);\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateDeliveryOrder_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateDeliveryOrder(orderId);\n      });\n      $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).hide();\n      function generateDeliveryOrder(orderId) {\n        $bsyDiv.css('visibility', 'visible');\n        var orderLineIDs = selectedOrderLineIDs.join(',');\n        $.ajax({\n          url: VIS.Application.contextUrl + \"Product/CreateShipment\",\n          data: {\n            C_Order_ID: orderId,\n            C_OrderLines_IDs: orderLineIDs\n          },\n          dataType: 'json',\n          success: function (response) {\n            var response = JSON.parse(response);\n            if (response.Shipment_ID > 0) {\n              try {\n                if (AD_Window_ID > 0) {\n                  var windowParam = {\n                    \"TabWhereClause\": \"M_InOut.M_InOut_ID=\" + response.Shipment_ID + \"\",\n                    \"TabLayout\": \"Y\",\n                    // 'N'[Grid],'Y'[Single],'C'[Card]}\t \t \n                    \"TabIndex\": \"0\"\n                  };\n                  $self.widgetFirevalueChanged(windowParam);\n                  $self.currentPage = 1;\n                  $self.intialLoad($self.currentPage);\n                }\n              } catch (e) {\n                console.log(e);\n              }\n            } else {\n              var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n              var message = \"\";\n              if (response.message != null && response.message != \"\") {\n                message = response.message;\n              } else {\n                message = VIS.Msg.getMsg(\"VAS_DeliveryOrderNotGenerated\");\n              }\n              spnWO.text(message);\n              spnWO.fadeIn();\n              spnWO.fadeOut(5000);\n            }\n            $bsyDiv.css('visibility', 'hidden');\n          },\n          error: function (xhr, status, error) {\n            // Handle errors\n            console.log('Failed to fetch data:', status, error);\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        });\n        console.log('Generating delivery order for ID:', orderId);\n      }\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows VAS-orders-text-white\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_ExpectedDeliveryWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_ExpectedDeliveryWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_ExpectedDeliveryWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_ExpectedDeliveryWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_ExpectedDeliveryWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_ExpectedDeliveryWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ExpectedDeliveryWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ExpectedFulfilmentWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Get the Expected Delivery Orders details\r\n * chronological  : Development\r\n * Created Date   : 12 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_ExpectedFulfilmentWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    var childRecords = [];\n    var itemsPerPage = 6;\n    var totalPages = 0;\n    var currentPage = 1;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-Expected-fulfilment-container\">' + '    <div class=\"VAS-orders-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_ExpectedFulfilments\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_Fulfilments\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n      //    buildPagination();\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: 'ED'\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_DeliveryLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $root.find('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-Expected-Order-container\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-orders-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToFulfilment\") + '        </h6>' + '<span id=\"VAS_GenerateDeliveryOrder_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateDeliverOrder\") + '\"><i class=\"fa fa-truck\" aria-hidden=\"true\"></i></span>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      childRecords = childRecordsMap[docNo] || [];\n      totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      currentPage = 1;\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateDeliveryOrder_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).hide();\n        }\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateDeliveryOrder_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateDeliveryOrder(orderId);\n      });\n      $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).hide();\n    }\n    function generateDeliveryOrder(orderId) {\n      $bsyDiv.css('visibility', 'visible');\n      var orderLineIDs = selectedOrderLineIDs.join(',');\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/CreateShipment\",\n        data: {\n          C_Order_ID: orderId,\n          C_OrderLines_IDs: orderLineIDs\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          if (response.Shipment_ID > 0) {\n            $self.currentPage = 1;\n            $self.intialLoad($self.currentPage);\n            if (AD_Window_ID > 0) {\n              var zoomQuery = new VIS.Query();\n              zoomQuery.addRestriction(\"M_InOut_ID\", VIS.Query.prototype.EQUAL, response.Shipment_ID);\n              zoomQuery.setRecordCount(1);\n              VIS.viewManager.startWindow(AD_Window_ID, zoomQuery);\n            }\n          } else {\n            var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n            var message = \"\";\n            if (response.message != null && response.message != \"\") {\n              message = response.message;\n            } else {\n              message = VIS.Msg.getMsg(\"VAS_DeliveryOrderNotGenerated\");\n            }\n            spnWO.text(message);\n            spnWO.fadeIn();\n            spnWO.fadeOut(5000);\n          }\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    }\n    function updatePage(page) {\n      // Ensure page is within bounds\n      if (page < 1) {\n        page = 1;\n      }\n      if (page > totalPages) {\n        page = totalPages;\n      }\n      currentPage = page;\n      // Calculate start and end index\n      var startIndex = (currentPage - 1) * itemsPerPage;\n      var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n      // Clear previous records\n      $root.find('#VAS_OrderLine_' + widgetID).empty();\n      // Generate HTML for records of the current page\n      for (var i = startIndex; i < endIndex; i++) {\n        var line = childRecords[i];\n        var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n        var hasStock = line.ProductType != 'I' || line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n        var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n        var badgeClass;\n        if (line.ProductType != 'I' || line.OnHandQty >= line.QtyOrdered) {\n          badgeClass = 'badge-green'; //  stock available\n        } else if (line.OnHandQty < line.QtyOrdered && line.OnHandQty > 0) {\n          badgeClass = 'badge-orange'; //stock less tham order \n        } else {\n          badgeClass = 'badge-red'; // Insufficient stock\n        }\n        $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"' + boxClass + '\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + (hasStock ? '' : ' disabled') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\">' + '                    <span title = \"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\" class=\"badge badge-light ' + badgeClass + '\"> ' + line.QtyEntered + '</span ></div > ' + '                      </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n      }\n      $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n      /*  Append pagination controls*/\n      $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n      $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_ExpectedFulfilmentWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_ExpectedFulfilmentWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_ExpectedFulfilmentWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_ExpectedFulfilmentWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_ExpectedFulfilmentWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_ExpectedFulfilmentWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ExpectedFulfilmentWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ExpectedGRNWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Get the details of PO and Create GRN\r\n * chronological  : Development\r\n * Created Date   : 20 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_ExpectedGRNWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-grn-container\">' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_ExpectedGRN\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_GRNCount\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n      //    buildPagination();\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: \"EG\"\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"Vendor\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_VendorLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $root.find('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          //else {\n\n          //    // Display \"No data available\" message\n          //    const message = $('<div class=\"VAS-data-message\">' + VIS.Msg.getMsg(\"VAS_NoDataAvailable\") + '</div>');\n          //    $root.find('.VAS-height-container').append(message);\n          //}\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-grn-container\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToGRN\") + '        </h6>' + '<span id=\"VAS_GenerateGRN_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateGRN\") + '\">' + '<i class=\"vis vis-action\"></i></span> ' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading VAS-orders-text-white\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text VAS-orders-text-white\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no VAS-orders-text-white\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"Vendor\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count VAS-orders-text-white\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n          //var hasStock = line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n          //var hasStock = line.OnHandQty > 0;\n          //var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n\n          $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"VAS-delivery-box\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\"><span title=\"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\">' + line.QtyEntered + '</span></div>' + '                </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details VAS-orders-text-white\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateGRN_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateGRN_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateGRN_' + widgetID).hide();\n        }\n        console.log(selectedOrderLineIDs);\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateGRN_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateGRN(orderId);\n      });\n      $root.find('#VAS_GenerateGRN_' + widgetID).hide();\n      function generateGRN(orderId) {\n        $bsyDiv.css('visibility', 'visible');\n        var orderLineIDs = selectedOrderLineIDs.join(',');\n        $.ajax({\n          url: VIS.Application.contextUrl + \"Product/CreateGRN\",\n          data: {\n            C_Order_ID: orderId,\n            C_OrderLines_IDs: orderLineIDs\n          },\n          dataType: 'json',\n          success: function (response) {\n            var response = JSON.parse(response);\n            if (response.Shipment_ID > 0) {\n              try {\n                if (AD_Window_ID > 0) {\n                  var windowParam = {\n                    \"TabWhereClause\": \"M_InOut.M_InOut_ID=\" + response.Shipment_ID + \"\",\n                    \"TabLayout\": \"Y\",\n                    // 'N'[Grid],'Y'[Single],'C'[Card]}\t \t \n                    \"TabIndex\": \"0\"\n                  };\n                  $self.widgetFirevalueChanged(windowParam);\n                  $self.currentPage = 1;\n                  $self.intialLoad($self.currentPage);\n                }\n              } catch (e) {\n                console.log(e);\n              }\n            } else {\n              var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n              var message = \"\";\n              if (response.message != null && response.message != \"\") {\n                message = response.message;\n              } else {\n                message = VIS.Msg.getMsg(\"VAS_DeliveryOrderNotGenerated\");\n              }\n              spnWO.text(message);\n              spnWO.fadeIn();\n              spnWO.fadeOut(5000);\n            }\n            $bsyDiv.css('visibility', 'hidden');\n          },\n          error: function (xhr, status, error) {\n            // Handle errors\n            console.log('Failed to fetch data:', status, error);\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        });\n        console.log('Generating delivery order for ID:', orderId);\n      }\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows VAS-orders-text-white\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_ExpectedGRNWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_ExpectedGRNWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_ExpectedGRNWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_ExpectedGRNWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_ExpectedGRNWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_ExpectedGRNWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ExpectedGRNWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ExpectedInvoiceWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Created widget to get data for expected invoices\r\n * chronological  : Development\r\n * Created Date   : 11 September 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_ExpectedInvoiceWidget = function () {\n    this.frame;\n    this.windowNo;\n    var $bsyDiv;\n    var $dummDiv = null;\n    var $self = this;\n    var ctx = VIS.Env.getCtx();\n    var filetrDivExpectedInv = null;\n    var RecCount = 0;\n    var widgetID = null;\n    //this pgaeno will be responsible to get data from database\n    var pageNo = 1;\n    //this pgaeno will be responsible to get data from array\n    var pageNoarray = 1;\n    var CurrentPage = 1;\n    var TotalPagesofrecords = 1;\n    //Main pagesize to get data in array\n    var pageSize = 500;\n    //Page size to show data in main div\n    var arrayPageSize = 4;\n    var countRecord = 4;\n    var C_BPartner_ID = null;\n    var $root = $('<div class=\"h-100 w-100\">');\n    var $maindiv = null;\n    var gridDataResult = null;\n    var TotalAmtArray = [];\n    var ExpectedListDiv = null;\n    var ColumnIds = null;\n    var totalRecordCount = null;\n    var listDesign = null;\n    var cmbDocType = null;\n    var invoiceRef = null;\n    var $isGenChargesLabel = null;\n    var $CreateInvoiceHeader = null;\n    var $FilterHeaderforInv = null;\n    var IsFilterBtnClicked = false;\n    var isOrder = false;\n    var vSearchBPartner = null;\n    var ColumnIds = null;\n    var totalRecordCount = null;\n    var IsGenInvBtnClicked = false;\n    var listDesign = null;\n    var ListValue = null;\n    var fromDate = null;\n    var toDate = null;\n    var ColumnData = [{\n      refernceName: \"VAS_ExpectedInvoiceList\"\n    }, {\n      ColumnName: \"C_BPartner_ID\"\n    }];\n\n    /*Intialize function will intialize busy indiactor*/\n    this.initalize = function () {\n      GetColumnID();\n      createDummyDiv();\n      createBusyIndicator();\n      widgetID = VIS.Utility.Util.getValueOfInt(this.widgetInfo.AD_UserHomeWidgetID) != 0 ? this.widgetInfo.AD_UserHomeWidgetID : $self.windowNo;\n      $maindiv = $('<div class=\"vas-exinvd-expected-invoice\">');\n      var headingDiv = $('<div class=\"vas-exinvd-expected-heading\">');\n      var filterDiv = $('<h6>' + VIS.Msg.getMsg(\"VAS_ExpectedInvoice\") + '</h6>');\n      filetrDivExpectedInv = $(\"<div class='vas-exinvd-filter dropdown'>\" + \"<div class='vas-exinvd-icondiv'>\" + \"<span class='vas-exinvd-filterspn btn d-flex position-relative' type='button' id='vas_exinvd_dropdownMenu_\" + $self.windowNo + \"'>\" + \"<i class='fa fa-filter vas-exinvd-filterIcon'></i>\" + \"</span>\" + \"</div>\" + \"<div class='vas-exinvd-filterPopupWrap' id='vas_exinvd_FilterPopupWrap_\" + $self.windowNo + \"'>\" + \"</div>\" + \"</div>\");\n      headingDiv.append(filterDiv).append(filetrDivExpectedInv);\n      /*finding the div of filter icon*/\n      var FilterToClickDiv = filetrDivExpectedInv.find(\"#vas_exinvd_dropdownMenu_\" + $self.windowNo);\n      /*Created design to filter records on click of filter icon*/\n      FilterToClickDiv.on(\"click\", function () {\n        CreateDesignForFilter();\n      });\n      $maindiv.append(headingDiv);\n    };\n\n    /*This function will load data in widget */\n    this.intialLoad = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetExpectedInvoiceData\", {\n        \"ISOtrx\": VIS.Env.getCtx().isSOTrx($self.windowNo),\n        \"pageNo\": pageNo,\n        \"pageSize\": pageSize,\n        \"ListValue\": ListValue,\n        \"C_BPartner_ID\": C_BPartner_ID,\n        \"fromDate\": fromDate,\n        \"toDate\": toDate\n      }, function (dr) {\n        TotalAmtArray = dr;\n        if (TotalAmtArray != null && TotalAmtArray.length > 0) {\n          //InitailizeMessage();\n          /*if on reverse arrow click pageNoarray is zero \r\n           then initailzed page number to get previous record*/\n          if (pageNoarray == 0) {\n            pageNoarray = Math.ceil(TotalAmtArray.length / arrayPageSize);\n          }\n          /*this function is use to get records based on start and end index*/\n          gridDataResult = getRecordsForPage(TotalAmtArray, pageNoarray, arrayPageSize);\n          //this function creating the design\n          CreateListDesign();\n        } else {\n          $maindiv.append('<div class=\"vas-igwidg-notfounddiv\" id=\"vas_norecordcont_' + widgetID + '\">' + VIS.Msg.getMsg(\"VAS_RecordNotFound\") + '</div>');\n          $root.append($maindiv);\n        }\n        $bsyDiv[0].style.visibility = \"hidden\";\n      });\n    };\n    /*this function will create empty div if records are less then 4*/\n    function createDummyDiv() {\n      $dummDiv = $('<div class=\"vas-exinvd-invoices-box vas-exinvd-emptydiv\">' + ' <h6></h6>' + '<div class=\"vas-exinvd-invoices-detail\">' + '<div class=\"vas-exinvd-thumb-txt\">' + '<img src=\"\" alt=\"\" style=\"width:0px\">' + '<div class=\"vas-exinvd-company-w-date\">' + '<div class=\"vas-exinvd-com-name\"></div>' + '<div class=\"vas-exinvd-invoiceDate\"></div>' + '</div>' + '</div>' + '<div class=\"vas-exinvd-invoice-w-amount\">' + '<div class=\"vas-exinvd-invoice-lbl\"></div>' + '<div class=\"vas-exinvd-invoiceTotalAmt\"><span></span></div>' + '</div>' + '</div>' + '</div>');\n    }\n    ;\n    /*This Function is used to create the design for the fiteration of data*/\n    function CreateDesignForFilter() {\n      //Created LOV control for task which will have billable,non billable and null values\n\n      if (!IsFilterBtnClicked && !IsGenInvBtnClicked) {\n        //Disabled filter icon after clicking it\n        filetrDivExpectedInv.addClass('vas-disableArrow');\n        IsFilterBtnClicked = true;\n        $FilterHeaderforInv = $('<div class=\"vas-exinvd-main-filter-flyout\">');\n        var lookUpData = VIS.Env.getCtx().isSOTrx($self.windowNo) == true ? \"AD_Ref_List.Value IN ('AL','SO','DO')\" : \"AD_Ref_List.Value IN ('AL','PO','GR')\";\n        ExpectedListDiv = $('<div class=\"VAS-ExpectedListDiv\" style=\"padding-bottom: 11px;\">');\n        $ExpectedListDiv = $('<div class=\"input-group vis-input-wrap\">');\n        /* parameters are: context, windowno., coloumn id, display type, DB coloumn name, Reference key, Is parent, Validation Code*/\n        $ExpectedListLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.List, \"VAS_ExpectedInvoiceList\", ColumnIds.VAS_ExpectedInvoiceList, false, lookUpData);\n        // Parameters are: columnName, mandatory, isReadOnly, isUpdateable, lookup,display length\n        $self.vExpectedList = new VIS.Controls.VComboBox(\"VAS_ExpectedInvoiceList\", true, false, true, $ExpectedListLookUp, 20);\n        $self.vExpectedList.setValue(\"AL\");\n        var $ExpectedListControlWrap = $('<div class=\"vis-control-wrap\">');\n        $ExpectedListDiv.append($ExpectedListControlWrap);\n        $ExpectedListControlWrap.append($self.vExpectedList.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label style=\"background-color: #fff;\">' + VIS.Msg.getMsg(\"VAS_ExpectedList\") + '</label>');\n        $ExpectedListDiv.append($ExpectedListControlWrap);\n        ExpectedListDiv.append($ExpectedListDiv);\n\n        //Created customer search control to filter out data\n        var BPValidation = VIS.Env.getCtx().isSOTrx($self.windowNo) == true ? \"C_BPartner.IsActive='Y' AND C_BPartner.IsCustomer = 'Y' AND C_BPartner.IsSummary = 'N'\" : \"C_BPartner.IsActive='Y' AND C_BPartner.IsVendor = 'Y' AND C_BPartner.IsSummary = 'N'\";\n        var BPartnerDiv = $('<div class=\"vas-BPartnerDiv\">');\n        $BPartnerDiv = $('<div class=\"input-group vis-input-wrap\">');\n        var BPartnerLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, ColumnIds.C_BPartner_ID, VIS.DisplayType.Search, \"C_BPartner_ID\", 0, false, BPValidation);\n        vSearchBPartner = new VIS.Controls.VTextBoxButton(\"C_BPartner_ID\", false, false, true, VIS.DisplayType.Search, BPartnerLookUp);\n        //set custom info for business partners\n        VIS.Env.getCtx().isSOTrx($self.windowNo) == true ? vSearchBPartner.setCustomInfo('VAS_Customer') : vSearchBPartner.setCustomInfo('VAS_VendorEmployee');\n        var $BPartnerControlWrap = $('<div class=\"vis-control-wrap\">');\n        var $BPartnerButtonWrap = $('<div class=\"input-group-append\">');\n        $BPartnerDiv.append($BPartnerControlWrap);\n        $BPartnerControlWrap.append(vSearchBPartner.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label style=\"background-color: transparent;\">' + (VIS.Env.getCtx().isSOTrx($self.windowNo) == true ? VIS.Msg.getMsg(\"VAS_CustomerPartner\") : VIS.Msg.getMsg(\"VAS_VendorPartner\")) + '</label>');\n        $BPartnerDiv.append($BPartnerControlWrap);\n        $BPartnerButtonWrap.append(vSearchBPartner.getBtn(0));\n        $BPartnerDiv.append($BPartnerButtonWrap);\n        BPartnerDiv.append($BPartnerDiv);\n\n        //Created from and to date control to filter out data\n        var FromDatediv = $('<div class=\"vas-expay-dateWidth vas-FromdateDiv\">');\n        $FromDatewrapDiv = $('<div class=\"input-group vis-input-wrap\">');\n        $FromDate = new VIS.Controls.VDate(\"DateReport\", false, false, true, VIS.DisplayType.Date, \"DateReport\");\n        var $FromDateWrap = $('<div class=\"vis-control-wrap\">');\n        $FromDatewrapDiv.append($FromDateWrap);\n        $FromDateWrap.append($FromDate.getControl().attr('placeholder', ' ').attr('data-placeholder', '')).append('<label class=\"vas-expay-lablels\" style=\"color:black;\">' + VIS.Msg.getMsg(\"VAS_FromDate\") + '</label>');\n        ;\n        FromDatediv.append($FromDatewrapDiv);\n        var toDatediv = $('<div class=\"vas-expay-dateWidth vas-todateDiv\">');\n        $toDatewrapDiv = $('<div class=\"input-group vis-input-wrap\">');\n        $ToDate = new VIS.Controls.VDate(\"DateReport\", false, false, true, VIS.DisplayType.Date, \"DateReport\");\n        var $toDateWrap = $('<div class=\"vis-control-wrap\">');\n        $toDatewrapDiv.append($toDateWrap);\n        $toDateWrap.append($ToDate.getControl().attr('placeholder', ' ').attr('data-placeholder', '')).append('<label class=\"vas-expay-lablels\" style=\"color:black;\">' + VIS.Msg.getMsg(\"VAS_ToDate\") + '</label>');\n        ;\n        toDatediv.append($toDatewrapDiv);\n        var $DatesDiv = $('<div class=\"vas-expay-datefilter\">');\n        $DatesDiv.append(FromDatediv).append(toDatediv);\n        $FilterHeaderforInv.append(ExpectedListDiv).append(BPartnerDiv).append($DatesDiv);\n        var ButtonDiv = $('<div class=\"vas-expay-btndiv\">');\n        var ApplyBtn = $('<div class=\"vas-flyout-footer\">' + '<button id=\"VAS_Apply_' + $self.windowNo + '\" class=\"VIS_Pref_btn-2 vas-expay-filtbtn\">' + VIS.Msg.getMsg(\"VAS_Apply\") + '</button>' + '</div>');\n        var ClearBtn = $('<div class=\"vas-flyout-footer\">' + '<button id=\"VAS_Close_' + $self.windowNo + '\" class=\"VIS_Pref_btn-2 vas-expay-filtbtn\">' + VIS.Msg.getMsg(\"VAS_Clear\") + '</button>' + '</div>');\n        ButtonDiv.append(ClearBtn).append(ApplyBtn);\n        $FilterHeaderforInv.append(ButtonDiv);\n        $maindiv.append($FilterHeaderforInv);\n        //Resetting the value on click of filetr button\n        if (ListValue != null || C_BPartner_ID != null || fromDate != null || toDate != null) {\n          $self.vExpectedList.setValue(ListValue);\n          vSearchBPartner.setValue(C_BPartner_ID);\n          $FromDate.setValue(fromDate);\n          $ToDate.setValue(toDate);\n        }\n        var $ApplyButton = ApplyBtn.find(\"#VAS_Apply_\" + $self.windowNo);\n        vSearchBPartner.fireValueChanged = function () {\n          C_BPartner_ID = vSearchBPartner.value;\n        };\n        //on click of apply button filtering the data\n        $ApplyButton.on(\"click\", function () {\n          if ($FromDate.getValue() > $ToDate.getValue()) {\n            VIS.ADialog.info('VAS_PlzEnterCorrectDate');\n            $ToDate.setValue(null);\n            return;\n          }\n          $maindiv.find('#vas_listContainer_' + widgetID).remove();\n          $maindiv.find('#vas_arrawcontainer_' + widgetID).remove();\n          $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n          ListValue = $self.vExpectedList.getValue();\n          fromDate = $FromDate.getValue();\n          toDate = $ToDate.getValue();\n          IsFilterBtnClicked = false;\n          pageNo = 1;\n          pageNoarray = 1;\n          CurrentPage = 1;\n          pageSize = 500;\n          arrayPageSize = 4;\n          RecCount = 0;\n          countRecord = 4;\n          $self.intialLoad();\n          if ($CreateInvoiceHeader != null) {\n            $CreateInvoiceHeader[0].remove();\n          }\n          $FilterHeaderforInv[0].remove();\n        });\n        ClearBtn.on('click', function () {\n          //Set value of list as ALL\n          if ($self.vExpectedList.oldValue == \"AL\") {\n            $self.vExpectedList.setValue(null);\n          }\n          $self.vExpectedList.setValue(\"AL\");\n          vSearchBPartner.setValue(null);\n          $FromDate.setValue(null);\n          $ToDate.setValue(null);\n          C_BPartner_ID = null;\n          ListValue = null;\n          fromDate = null;\n          toDate = null;\n          if ($CreateInvoiceHeader != null) {\n            $CreateInvoiceHeader[0].remove();\n          }\n        });\n        //Enabled filter icon\n        setTimeout(function () {\n          filetrDivExpectedInv.removeClass('vas-disableArrow');\n        }, 2000);\n      } else {\n        $FilterHeaderforInv[0].remove();\n        IsFilterBtnClicked = false;\n      }\n    }\n    function bindDummyDiv(j) {\n      for (var i = 0; i < j; i++) {\n        listDesign.append($dummDiv);\n      }\n      ;\n    }\n    ;\n    /*This function will create the design */\n    function CreateListDesign() {\n      var hue = Math.floor(Math.random() * (360 - 0)) + 0;\n      var v = Math.floor(Math.random() * (75 - 60 + 1)) + 60;\n      var pastel = 'hsl(' + hue + ', 100%,' + v + '%)';\n      listDesign = $('<div class=\"vas-exinvd-invoicesListing\" id=\"vas_listContainer_' + widgetID + '\">');\n\n      // Iterate through each item in the gridDataResult\n      for (var i = 0; i < gridDataResult.length; i++) {\n        RecCount = RecCount + 1;\n        totalRecordCount = gridDataResult[0].recordCount;\n        //var custChar = '';\n        //var custNameArr = gridDataResult[i].Name.trim().split(' ');\n\n        //// Generate customer initials\n        //custChar = custNameArr[0].substring(0, 1).toUpperCase();\n        //if (custNameArr.length > 1) {\n        //    custChar += custNameArr[custNameArr.length - 1].substring(0, 1).toUpperCase();\n        //} else {\n        //    custChar = custNameArr[0].substring(0, 2).toUpperCase();\n        //}\n        var headingText = '';\n\n        // Determine the correct text based on conditions\n        if (gridDataResult[i].RecordType === \"GRN\") {\n          isOrder = false;\n          if (VIS.Env.getCtx().isSOTrx($self.windowNo) == true) {\n            headingText = VIS.Msg.getMsg(\"VAS_DeliveryOrder\");\n          } else {\n            headingText = VIS.Msg.getMsg(\"VAS_GRN\");\n          }\n        } else if (gridDataResult[i].RecordType === \"Order\") {\n          isOrder = true;\n          if (VIS.Env.getCtx().isSOTrx($self.windowNo) == true) {\n            headingText = VIS.Msg.getMsg(\"VAS_SO\");\n          } else {\n            headingText = VIS.Msg.getMsg(\"VAS_PO\");\n          }\n        }\n        // Create the widget data design element\n        var widgetDataDesign = '<div class=\"vas-exinvd-invoices-box\">' + '<div class=\"vas-exinvd-amtdiv\">' + '<h6 class=\"vas-exinvd-trxtype vas-exinvd-ovrflow\" title=\"' + VIS.Msg.getMsg(\"VAS_Type\") + ': ' + headingText + '\">' + headingText + '</h6>';\n        /*if document is GRN then add generate invoice button*/\n        if (!isOrder) {\n          widgetDataDesign += '<span id=\"VAS_GenerateInvoice_' + widgetID + '\" class=\"VAS-exinvd-generate-delivery-btn\" data-grnid=\"' + gridDataResult[i].Record_ID + '\" data-windowid=\"' + gridDataResult[i].InvWinID + '\" data-totalamt=\"' + gridDataResult[i].TotalAmt + '\" data-bpname=\"' + gridDataResult[i].Name + '\" data-documentno=\"' + gridDataResult[i].DocumentNo + '\" data-stdprecision=\"' + gridDataResult[i].stdPrecision + '\" data-isfullydelivered=\"' + gridDataResult[i].IsFullyDelivered + '\" data-ad_org_id=\"' + gridDataResult[i].AD_Org_ID + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateInvoice\") + '\">' + '<i class=\"vis vis-action\" ></i ></span>';\n        }\n        widgetDataDesign += '</div>' + '<div class=\"vas-exinvd-invoices-detail\">' + '<div class=\"vas-exinvd-thumb-w-txt\">';\n\n        //if (gridDataResult[i].ImageUrl != null) {\n        //    // Append image if available\n        //    widgetDataDesign += '<img class=\"vas-businessPartnerImg\" alt=\"' + gridDataResult[i].ImageUrl + '\" src=\"' + VIS.Application.contextUrl + gridDataResult[i].ImageUrl + '\">'\n        //} else {\n\n        //    // Append initial if image is not available\n        //    widgetDataDesign +=\n        //        '<div style=\"float:left; background-color:' + pastel + '\" class=\"vas-igtwidg-img-icon\">' +\n        //        '<span style=\"font-size: 16px;\">' + custChar + '</span>' +\n        //        '</div>';\n        //}\n        widgetDataDesign += '<div class=\"vas-exinvd-company-w-date\">' + '<div class=\"vas-exinvd-com-name vas-exinvd-ovrflow\" title=\"' + (VIS.Env.getCtx().isSOTrx($self.windowNo) == true ? VIS.Msg.getMsg(\"VAS_CustomerPartner\") : VIS.Msg.getMsg(\"VAS_VendorPartner\")) + ': ' + gridDataResult[i].Name + '\">' + gridDataResult[i].Name + '</div>' + '<div class=\"vas-exinvd-invoiceDate vas-exinvd-ovrflow\" title=\"' + (isOrder == true ? VIS.Msg.getMsg(\"DateOrdered\") : VIS.Msg.getMsg(\"DateDelivered\")) + ': ' + VIS.Utility.Util.getValueOfDate(gridDataResult[i].OrderdDate).toLocaleDateString(window.navigator.language, {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        }) + '\">' + (isOrder == true ? VIS.Msg.getMsg(\"DateOrdered\") : VIS.Msg.getMsg(\"DateDelivered\")) + ': ' + VIS.Utility.Util.getValueOfDate(gridDataResult[i].OrderdDate).toLocaleDateString(window.navigator.language, {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        }) + '</div>' + '<div class=\"vas-exinvd-invoiceDate vas-exinvd-ovrflow\" title=\"' + VIS.Msg.getMsg(\"DatePromised\") + ': ' + VIS.Utility.Util.getValueOfDate(gridDataResult[i].DatePromised).toLocaleDateString(window.navigator.language, {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        }) + '\">' + VIS.Msg.getMsg(\"DatePromised\") + ': ' + VIS.Utility.Util.getValueOfDate(gridDataResult[i].DatePromised).toLocaleDateString(window.navigator.language, {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        }) + '</div>' + '</div>' + '</div>' + '<div class=\"vas-exinvd-invoice-w-amount\" >' + '<div class=\"vas-exinvd-invoice-lbl vas-exinvd-right-ovrflow\" title=\"' + VIS.Msg.getMsg(\"DocumentNo\") + ': ' + gridDataResult[i].DocumentNo + '\">' + gridDataResult[i].DocumentNo + '</div>' + '<span>' + '<i class=\"glyphicon glyphicon-zoom-in vas-exinv-zoom\" data-Record_ID=\"' + gridDataResult[i].Record_ID + '\" data-windowId=\"' + gridDataResult[i].Window_ID + '\" data-Primary_ID=\"' + gridDataResult[i].Primary_ID + '\" id=\"VAS-unAllocatedZoom_' + $self.windowNo + '\" title=\"' + VIS.Msg.getMsg(\"VAS_Zoom\") + '\"></i>' + '</span>' + '</div>' + '</div>';\n        widgetDataDesign += '<div class=\"vas-exinvd-bottomdiv\">' + '<div class=\"vas-exinvd-invoiceTotalAmt vas-exinvd-ovrflow\"  title=\"' + VIS.Msg.getMsg(\"VAS_Amount\") + ':' + gridDataResult[i].TotalAmt.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: gridDataResult[i].stdPrecision,\n          maximumFractionDigits: gridDataResult[i].stdPrecision\n        }) + '\">' + (gridDataResult[i].Symbol.length != 3 ? '<span>' + gridDataResult[i].Symbol + ' ' + '</span>' : '') + gridDataResult[i].TotalAmt.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: gridDataResult[i].stdPrecision,\n          maximumFractionDigits: gridDataResult[i].stdPrecision\n        }) + (gridDataResult[i].Symbol.length == 3 ? ' ' + '<span>' + gridDataResult[i].Symbol + '</span>' : '') + '</div>';\n        /*if invoice rule has value then append the same*/\n        if (VIS.Env.getCtx().isSOTrx($self.windowNo) == true && gridDataResult[i].InvoiceRule != \"\") {\n          widgetDataDesign += '<div class=\"vas-exinvd-com-name vas-exinvd-right-ovrflow vas-exinvd-rulefont\" title=\"' + VIS.Msg.getMsg(\"VAS_InvoiceRule\") + ': ' + gridDataResult[i].InvoiceRule + '\">' + gridDataResult[i].InvoiceRule + '</div>';\n        }\n        widgetDataDesign += '</div>' + '</div>';\n\n        // Append the widget data design to the list container\n        listDesign.append(widgetDataDesign);\n      }\n      //This function used to generate invoice\n      $root.off('click', '#VAS_GenerateInvoice_' + widgetID);\n      $root.on('click', '#VAS_GenerateInvoice_' + widgetID, function () {\n        var isFullyDelivered = VIS.Utility.Util.getValueOfString($(this).attr(\"data-isfullydelivered\"));\n        if (isFullyDelivered == \"Y\") {\n          VIS.ADialog.info(\"VAS_OrderIsNotFullyDelivered\");\n          return;\n        }\n        var grnid = VIS.Utility.Util.getValueOfInt($(this).attr(\"data-grnid\"));\n        var windowId = VIS.Utility.Util.getValueOfInt($(this).attr(\"data-windowid\"));\n        var documentNo = VIS.Utility.Util.getValueOfString($(this).attr(\"data-documentno\"));\n        var totalAmt = parseFloat($(this).attr(\"data-totalamt\"));\n        var ad_org_id = VIS.Utility.Util.getValueOfInt($(this).attr(\"data-ad_org_id\"));\n        var bpName = VIS.Utility.Util.getValueOfString($(this).attr(\"data-bpname\"));\n        var stdPrecision = VIS.Utility.Util.getValueOfInt($(this).attr(\"data-stdprecision\"));\n        GetGRNParameter(grnid, windowId, documentNo, totalAmt, bpName, stdPrecision, ad_org_id);\n      });\n      /*if the record are less then 4 than append empty div*/\n      if (RecCount < arrayPageSize) {\n        bindDummyDiv(arrayPageSize - RecCount);\n      }\n      TotalPagesofrecords = Math.ceil(totalRecordCount / arrayPageSize);\n      var arrowDiv = $('<div class=\"vas-exinvd-pagingdiv\">' + '<div class=\"vas-exinvd-slider-arrows\" id=\"vas_arrawcontainer_' + widgetID + '\">' + '<i class= \"fa fa-arrow-circle-left vas-exinvd-leftar\" aria-hidden=\"true\"></i>' + '<span class=\"vas-exinvd-pagespan\">' + '<span>' + CurrentPage + ' ' + '</span>' + '<span>' + VIS.Msg.getMsg(\"VAS_Of\") + ' ' + '</span>' + '<span>' + TotalPagesofrecords + '</span>' + '</span > ' + '<i class=\"fa fa-arrow-circle-right vas-exinvd-rightar\" aria-hidden=\"true\"></i>' + '</div>' + '</div>');\n      $maindiv.append(listDesign).append(arrowDiv);\n      $root.append($maindiv);\n      //disabled the left array when page no's are 1\n      if (pageNoarray == 1 && pageNo == 1) {\n        arrowDiv.find(\".fa-arrow-circle-left\").addClass('vas-disableArrow');\n      }\n      //handled value on right array click to get next record\n      arrowDiv.find(\".fa-arrow-circle-right\").on(\"click\", function () {\n        pageNoarray++;\n        CurrentPage++;\n        $maindiv.find('#vas_listContainer_' + widgetID).remove();\n        $maindiv.find('#vas_arrawcontainer_' + widgetID).remove();\n        gridDataResult = getRecordsForPage(TotalAmtArray, pageNoarray, arrayPageSize);\n        if (countRecord >= TotalAmtArray.length) {\n          pageNoarray = 1;\n          countRecord = 4;\n          pageNo++;\n          $self.intialLoad();\n        } else {\n          countRecord = countRecord + arrayPageSize;\n          CreateListDesign();\n        }\n      });\n      //handled value on left click to get previous record\n      arrowDiv.find(\".fa-arrow-circle-left\").on(\"click\", function () {\n        pageNoarray--;\n        CurrentPage--;\n        $maindiv.find('#vas_listContainer_' + widgetID).remove();\n        $maindiv.find('#vas_arrawcontainer_' + widgetID).remove();\n        gridDataResult = getRecordsForPage(TotalAmtArray, pageNoarray, arrayPageSize);\n        if (countRecord == arrayPageSize) {\n          countRecord = pageSize;\n          pageNo--;\n          $self.intialLoad();\n        } else {\n          countRecord = countRecord - arrayPageSize;\n          CreateListDesign();\n        }\n      });\n      //If all the records displayed then disabled next button\n      var totalPages = Math.ceil(totalRecordCount / pageSize);\n      if (pageNo >= totalPages && countRecord >= TotalAmtArray.length) {\n        arrowDiv.find(\".fa-arrow-circle-right\").addClass('vas-disableArrow');\n      }\n      //handled zoom here\n      $maindiv.find('.glyphicon-zoom-in').on(\"click\", function () {\n        var Record_ID = VIS.Utility.Util.getValueOfInt($(this).attr(\"data-Record_ID\"));\n        var windowId = VIS.Utility.Util.getValueOfInt($(this).attr(\"data-windowId\"));\n        var Primary_ID = VIS.Utility.Util.getValueOfString($(this).attr(\"data-Primary_ID\"));\n        handleZoomClick(Record_ID, windowId, Primary_ID);\n      });\n    }\n\n    /**\r\n    * This Function is used to slice array of records according to start and end index\r\n    * @param {any} records\r\n    * @param {any} pageNumber\r\n    * @param {any} pageSize\r\n    */\n    function getRecordsForPage(records, pageNumber, pageSize) {\n      var startIndex = (pageNumber - 1) * pageSize;\n      var endIndex = startIndex + pageSize;\n      return records.slice(startIndex, endIndex);\n    }\n    /*This function will show busy indicator in widget */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $bsyDiv.css({\n        \"position\": \"absolute\",\n        \"width\": \"98%\",\n        \"height\": \"97%\",\n        'text-align': 'center',\n        'z-index': '999'\n      });\n      $bsyDiv[0].style.visibility = \"visible\";\n      $root.append($bsyDiv);\n    }\n    ;\n    /*This function used translate message*/\n    //function InitailizeMessage() {\n    //    /*Inisalised Element for array*/\n    //    var elements = [\n    //        \"VAS_ExpectedInvoice\",\n    //        \"VAS_DeliveryOrder\",\n    //        \"VAS_GRN\",\n    //        \"VAS_PO\",\n    //        \"VAS_SO\",\n    //        \"VAS_Of\",\n    //        \"VAS_FilterBy\"\n    //    ];\n\n    //    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n\n    //}\n    /**\r\n    * This function is used to get the refernce id of list\r\n    */\n    var GetColumnID = function () {\n      ColumnIds = VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetColumnIDForExpPayment\", {\n        \"refernceName\": JSON.stringify(ColumnData)\n      }, null);\n    };\n\n    /*This function used to get root*/\n    this.getRoot = function () {\n      return $root;\n    };\n    /*this function is used to refresh design and data of widget*/\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      $maindiv.find('#vas_listContainer_' + widgetID).remove();\n      $maindiv.find('#vas_arrawcontainer_' + widgetID).remove();\n      $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n      pageNo = 1;\n      pageNoarray = 1;\n      pageSize = 500;\n      CurrentPage = 1;\n      RecCount = 0;\n      arrayPageSize = 4;\n      countRecord = 4;\n      $self.intialLoad();\n    };\n    /**\r\n     * This Function is used to show process parameters\r\n     * @param {any} grnid\r\n     * @param {any} windowId\r\n     *@param {any} documentNo\r\n     * @param {any} totalAmt\r\n     * @param {any} bpName\r\n     * @param {any} stdPrecision\r\n     */\n    function GetGRNParameter(grnid, windowId, documentNo, totalAmt, bpName, stdPrecision, ad_org_id) {\n      if (!IsGenInvBtnClicked && !IsFilterBtnClicked) {\n        ctx.setContext($self.windowNo, \"AD_Org_ID\", ad_org_id);\n        IsGenInvBtnClicked = true;\n        var headingDiv = $('<div class=\"vas-exinvd-createinvdiv\">' + VIS.Msg.getMsg(\"VAS_CreateInvoice\") + '</div>');\n        //    '<div class=\"vas-exinvd-filter-heading\">' +\n        //    '<h6>' + VIS.Msg.getMsg(\"VAS_DocumentNo\")+':'+ documentNo + '</h6>' +\n        //    '<h6>' + (VIS.Env.getCtx().isSOTrx($self.windowNo) == true ? VIS.Msg.getMsg(\"VAS_CustomerPartner\") : VIS.Msg.getMsg(\"VAS_VendorPartner\")) + ': '+ bpName + '</h6>' +\n        //    '<h6>' + VIS.Msg.getMsg(\"VAS_Amount\") + ':'+ parseFloat(totalAmt).toLocaleString(window.navigator.language, { minimumFractionDigits: stdPrecision, maximumFractionDigits: stdPrecision }) + '</h6>' +\n        //    '</div>'+\n        //'</div>');\n        $CreateInvoiceHeader = $('<div class=\"vas-exinvd-filter-flyout\">');\n        DocTypeDiv = $('<div class=\"vas-exinvd-DocTyperDiv\">');\n        var $DocTypeDiv = $('<div class=\"input-group vis-input-wrap\">');\n        var DoctypeValidationCode = \"C_DocType.DocBaseType IN ('API','APC','ARI','ARC') AND C_DocType.IsSOTrx='@IsSOTrx@' AND C_DocType.IsReturnTrx='@IsReturnTrx@'\" + \" AND C_DocType.AD_Org_ID IN(0, @AD_Org_ID@) AND C_DocType.IsExpenseInvoice = 'N' AND C_DocType.IsActive = 'Y'\";\n        var DocTypelookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.TableDir, \"C_DocType_ID\", 0, false, DoctypeValidationCode);\n        cmbDocType = new VIS.Controls.VComboBox(\"C_DocType_ID\", true, false, true, DocTypelookUp, 50, VIS.DisplayType.TableDir);\n        var $DocTypeControlWrap = $('<div class=\"vis-control-wrap\">');\n        var $DocTypeButtonWrap = $('<div class=\"input-group-append\">');\n        $DocTypeDiv.append($DocTypeControlWrap);\n        $DocTypeControlWrap.append(cmbDocType.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label style=\"background-color: #fff;\">' + VIS.Msg.getMsg(\"VAS_DoctType\") + '</label>');\n        $DocTypeDiv.append($DocTypeControlWrap);\n        $DocTypeButtonWrap.append(cmbDocType.getBtn(0));\n        $DocTypeDiv.append($DocTypeButtonWrap);\n        DocTypeDiv.append($DocTypeDiv);\n        invoiceRefDiv = $('<div class=\"vas-invoiceRefrDiv\">');\n        var $invoiceRefDiv = $('<div class=\"input-group vis-input-wrap\">');\n        invoiceRef = new VIS.Controls.VTextBox(\"Name\", true, false, true, VIS.DisplayType.Textbox);\n        var $invoiceRefControlWrap = $('<div class=\"vis-control-wrap\">');\n        var $invoiceRefButtonWrap = $('<div class=\"input-group-append\">');\n        $invoiceRefDiv.append($invoiceRefControlWrap);\n        $invoiceRefControlWrap.append(invoiceRef.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label style=\"background-color: transparent;\">' + VIS.Msg.getMsg(\"VAS_InvoiceRefernce\") + '</label>');\n        $invoiceRefDiv.append($invoiceRefControlWrap);\n        //  $invoiceRefButtonWrap.append($self.cmbinvoiceRef.getBtn(0));\n        $invoiceRefDiv.append($invoiceRefButtonWrap);\n        invoiceRefDiv.append($invoiceRefDiv);\n        isGenChargesdiv = $(\"<div class='vis-col'>\");\n        var $isGenChargesDiv = $('<div class=\"input-group vis-input-wrap\">');\n        // Parameters are: value, name, isMandatory\n        $isGenChargesLabel = new VIS.Controls.VLabel(\"GenerateCharges\", \"GenerateCharges\", false, true);\n        // Parameters are:  columnName, isMandatory, isReadOnly, isUpdateable, displayType, title\n        $isGenChargescheckbox = new VIS.Controls.VCheckBox(\"GenerateCharges\", true, false, true, VIS.DisplayType.CheckBox, \"CheckBox\");\n        var $isGenChargesControlWrap = $('<div class=\"vis-control-wrap\">');\n        var $isGenChargesButtonWrap = $('<div class=\"input-group-append\">');\n        $isGenChargesDiv.append($isGenChargesControlWrap);\n        $isGenChargesControlWrap.append($isGenChargescheckbox.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.Msg.getMsg(\"VAS_GenerateCharges\") + '</label>');\n        $isGenChargesDiv.append($isGenChargesControlWrap);\n        //  $isGenChargesButtonWrap.append($self.cmbisGenCharges.getBtn(0));\n        $isGenChargesDiv.append($isGenChargesButtonWrap);\n        isGenChargesdiv.append($isGenChargesDiv);\n        if (VIS.Env.getCtx().isSOTrx($self.windowNo) == true) {\n          $CreateInvoiceHeader.append(headingDiv).append(DocTypeDiv);\n        } else {\n          $CreateInvoiceHeader.append(headingDiv).append(DocTypeDiv).append(invoiceRefDiv).append(isGenChargesdiv);\n        }\n        var ButtonDiv = $('<div class=\"vas-expay-btndiv\">');\n        var ApplyBtn = $('<div class=\"vas-flyout-footer\">' + '<button id=\"VAS_Apply_' + $self.windowNo + '\" class=\"VIS_Pref_btn-2 vas-expay-filtbtn\">' + VIS.Msg.getMsg(\"VAS_CreateInvoice\") + '</button>' + '</div>');\n        var CloseBtn = $('<div class=\"vas-flyout-footer\">' + '<button id=\"VAS_Close_' + $self.windowNo + '\" class=\"VIS_Pref_btn-2 vas-expay-filtbtn\">' + VIS.Msg.getMsg(\"VAS_Close\") + '</button>' + '</div>');\n        ButtonDiv.append(CloseBtn).append(ApplyBtn);\n        $CreateInvoiceHeader.append(ButtonDiv);\n        $maindiv.append($CreateInvoiceHeader);\n        var $ApplyButton = ApplyBtn.find(\"#VAS_Apply_\" + $self.windowNo);\n        //here user is generating invoice\n        $ApplyButton.on(\"click\", function () {\n          if (cmbDocType.getValue() == null && VIS.Env.getCtx().isSOTrx($self.windowNo) == false && invoiceRef.getValue() == \"\") {\n            VIS.ADialog.info(\"VAS_DoctypeAndInvRefIsMandatory\");\n            return;\n          }\n          if (cmbDocType.getValue() == null) {\n            VIS.ADialog.info(\"VAS_DoctypeIsMandatory\");\n            return;\n          }\n          if (VIS.Env.getCtx().isSOTrx($self.windowNo) == false && invoiceRef.getValue() == \"\") {\n            VIS.ADialog.info(\"VAS_InvoiceReferenceIsMandatory\");\n            return;\n          }\n          IsGenInvBtnClicked = false;\n          var invRef = invoiceRef.getValue();\n          var docId = cmbDocType.getValue();\n          var IsGenCheck = $isGenChargescheckbox.getValue();\n          generateInvoice(grnid, invRef, docId, IsGenCheck, windowId);\n        });\n        CloseBtn.on('click', function () {\n          IsGenInvBtnClicked = false;\n          $CreateInvoiceHeader[0].remove();\n        });\n      } else {\n        IsGenInvBtnClicked = false;\n        $CreateInvoiceHeader[0].remove();\n      }\n    }\n    ;\n    /**\r\n     * This Function is used to generate invoice\r\n     * @param {any} grnid\r\n     * @param {any} invRef\r\n     * @param {any} docId\r\n     * @param {any} IsGenCheck\r\n     * @param {any} windowId\r\n     */\n    function generateInvoice(grnid, invRef, docId, IsGenCheck, windowId) {\n      $bsyDiv[0].style.visibility = \"visible\";\n      $.ajax({\n        url: VIS.Application.contextUrl + \"VAS/PoReceipt/GenerateInvoice\",\n        // The URL endpoint\n        type: \"GET\",\n        // You can also use \"POST\" if you need to send data in the body\n        data: {\n          \"grnid\": grnid,\n          // Pass the grnid parameter\n          \"invRef\": invRef,\n          // Pass the invRef parameter\n          \"docId\": docId,\n          // Pass the docId parameter\n          \"IsGenCheck\": IsGenCheck // Pass the IsGenCheck parameter\n        },\n        success: function (dr) {\n          // Callback function when the AJAX request succeeds\n          var responseData = JSON.parse(dr); // The response (Invoice ID) from the server\n\n          if (responseData.C_Invoice_ID > 0) {\n            // If the Invoice_ID is greater than 0, handle zoom click and remove the filter header\n            handleZoomClick(responseData.C_Invoice_ID, windowId, \"C_Invoice_ID\");\n            $CreateInvoiceHeader[0].remove();\n          } else {\n            // If no invoice is created, show an info dialog\n            VIS.ADialog.info('', '', responseData.ExceptionMessage);\n          }\n          // Hide the loading spinner once the operation is complete\n          $bsyDiv[0].style.visibility = \"hidden\";\n        },\n        error: function (xhr, status, error) {\n          // Callback function when the AJAX request fails\n          // In case of an error, show an info dialog and remove the filter header\n          VIS.ADialog.info(error);\n          // Hide the loading spinner if the request fails\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    }\n    ;\n    /**\r\n     * This Function is used to handle the zoom to window\r\n     * @param {any} Record_ID\r\n     * @param {any} windowId\r\n     * @param {any} Primary_ID\r\n     */\n    function handleZoomClick(Record_ID, windowId, Primary_ID) {\n      if (windowId > 0) {\n        var zoomQuery = new VIS.Query();\n        zoomQuery.addRestriction(Primary_ID, VIS.Query.prototype.EQUAL, Record_ID);\n        zoomQuery.setRecordCount(1);\n        VIS.viewManager.startWindow(windowId, zoomQuery);\n      }\n    }\n  };\n  VAS.VAS_ExpectedInvoiceWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad();\n    }, 50);\n  };\n  VAS.VAS_ExpectedInvoiceWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  /*this function is called when widget size changes*/\n  VAS.VAS_ExpectedInvoiceWidget.prototype.widgetSizeChange = function (widget) {\n    //this.getRoot().css(\"height\", widget.height);\n    //this.getRoot().css(\"width\", widget.width);\n    this.widgetInfo = widget;\n  };\n  /*Used to dispose the variable*/\n  VAS.VAS_ExpectedInvoiceWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ExpectedInvoiceWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ExpectedOrderWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Get the details of PO and Create GRN\r\n * chronological  : Development\r\n * Created Date   : 20 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_ExpectedOrderWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-Expected-Order-container\">' + '    <div class=\"VAS-orders-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_ExpectedOrders\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_Orders\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n      //    buildPagination();\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: \"EG\"\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"Vendor\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_VendorLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $root.find('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          //else {\n\n          //    // Display \"No data available\" message\n          //    const message = $('<div class=\"VAS-data-message\">' + VIS.Msg.getMsg(\"VAS_NoDataAvailable\") + '</div>');\n          //    $root.find('.VAS-height-container').append(message);\n          //}\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-Expected-Order-container\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-orders-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToOrder\") + '        </h6>' + '<span id=\"VAS_GenerateGRN_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateGRN\") + '\">' + '<i class=\"vis vis-action\"></i></span> ' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"Vendor\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n          //var hasStock = line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n          //var hasStock = line.OnHandQty > 0;\n          //var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n\n          $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"VAS-delivery-box\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\"><span title=\"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\">' + line.QtyEntered + '</span></div>' + '                </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateGRN_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateGRN_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateGRN_' + widgetID).hide();\n        }\n        console.log(selectedOrderLineIDs);\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateGRN_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateGRN(orderId);\n      });\n      $root.find('#VAS_GenerateGRN_' + widgetID).hide();\n      function generateGRN(orderId) {\n        $bsyDiv.css('visibility', 'visible');\n        var orderLineIDs = selectedOrderLineIDs.join(',');\n        $.ajax({\n          url: VIS.Application.contextUrl + \"Product/CreateGRN\",\n          data: {\n            C_Order_ID: orderId,\n            C_OrderLines_IDs: orderLineIDs\n          },\n          dataType: 'json',\n          success: function (response) {\n            var response = JSON.parse(response);\n            if (response.Shipment_ID > 0) {\n              $self.currentPage = 1;\n              $self.intialLoad($self.currentPage);\n              if (AD_Window_ID > 0) {\n                var zoomQuery = new VIS.Query();\n                zoomQuery.addRestriction(\"M_InOut_ID\", VIS.Query.prototype.EQUAL, response.Shipment_ID);\n                zoomQuery.setRecordCount(1);\n                VIS.viewManager.startWindow(AD_Window_ID, zoomQuery);\n              }\n            } else {\n              var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n              var message = \"\";\n              if (response.message != null && response.message != \"\") {\n                message = response.message;\n              } else {\n                message = VIS.Msg.getMsg(\"VAS_DeliveryOrderNotGenerated\");\n              }\n              spnWO.text(message);\n              spnWO.fadeIn();\n              spnWO.fadeOut(5000);\n            }\n            $bsyDiv.css('visibility', 'hidden');\n          },\n          error: function (xhr, status, error) {\n            // Handle errors\n            console.log('Failed to fetch data:', status, error);\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        });\n        console.log('Generating delivery order for ID:', orderId);\n      }\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_ExpectedOrderWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_ExpectedOrderWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_ExpectedOrderWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_ExpectedOrderWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_ExpectedOrderWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_ExpectedOrderWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ExpectedOrderWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ExpectedPayments.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Created widget to get data for expected Payments\r\n * chronological  : Development\r\n * Created Date   : 12 November 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_ExpectedPaymentWidget = function () {\n    this.frame;\n    this.windowNo;\n    var $bsyDiv;\n    var $dummDiv = null;\n    var $self = this;\n    var ctx = VIS.Env.getCtx();\n    var RecCount = 0;\n    var widgetID = null;\n    //this pgaeno will be responsible to get data from database\n    var pageNo = 1;\n    //this pgaeno will be responsible to get data from array\n    var pageNoarray = 1;\n    var CurrentPage = 1;\n    var TotalPagesofrecords = 1;\n    //Main pagesize to get data in array\n    var pageSize = 500;\n    //Page size to show data in main div\n    var arrayPageSize = 6;\n    var countRecord = 6;\n    var $root = $('<div class=\"h-100 w-100\">');\n    var $maindiv = null;\n    var gridDataResult = null;\n    var $FilterHeader = null;\n    var TotalAmtArray = [];\n    var vSearchBPartner = null;\n    var ColumnIds = null;\n    var totalRecordCount = null;\n    var listDesign = null;\n    var FinancialPeriodValue = null;\n    var fromDate = null;\n    var toDate = null;\n    var isSOTrx = null;\n    var C_BPartner_ID = null;\n    var IsFilterBtnClicked = false;\n    var docTypeValue = null;\n    var ColumnData = [{\n      refernceName: \"VAS_DocTypeExPayPaymentList\"\n    }, {\n      refernceName: \"VAS_FinancialPeriodPaymentList\"\n    }, {\n      ColumnName: \"C_BPartner_ID\"\n    }];\n\n    /*Intialize function will intialize busy indiactor*/\n    this.initalize = function () {\n      GetColumnID();\n      createDummyDiv();\n      createBusyIndicator();\n      widgetID = VIS.Utility.Util.getValueOfInt(this.widgetInfo.AD_UserHomeWidgetID) != 0 ? this.widgetInfo.AD_UserHomeWidgetID : $self.windowNo;\n      var value = null;\n      /*Here we are getting the value for context here*/\n      value = GetContextValue(\"ScreenName\") || GetContextValue(\"IsReceipt\") || GetContextValue(\"IsSOTrx\");\n      if (value === \"VAS_APPayment\" || value === \"N\") {\n        isSOTrx = false;\n      } else if (value === \"VAS_ARReceipt\" || value === \"Y\") {\n        isSOTrx = true;\n      }\n      $maindiv = $('<div class=\"vas-expay-expected-payment\">');\n      var headingDiv = $('<div class=\"vas-expay-expected-heading\">');\n      var HeadingLabelDiv = $('<div style=\"font-size:1.4em\">' + (isSOTrx == true ? VIS.Msg.getMsg(\"VAS_ExpectedReceipt\") : VIS.Msg.getMsg(\"VAS_ExpectedPayment\")) + '</div>');\n      var filetrDiv = $(\"<div class='vas-expay-filter dropdown'>\" + \"<div class='vas-expay-icondiv'>\" + \"<span class='vas-expay-filterspn btn d-flex position-relative' type='button' id='vas_expay_dropdownMenu_\" + $self.windowNo + \"'>\" + \"<i class='fa fa-filter vas-expay-filterIcon'></i>\" + \"</span>\" + \"</div>\" + \"<div class='vas-expay-filterPopupWrap' id='vas_expay_FilterPopupWrap_\" + $self.windowNo + \"'>\" + \"</div>\" + \"</div>\");\n      headingDiv.append(HeadingLabelDiv).append(filetrDiv);\n      $maindiv.append(headingDiv);\n      /*Find FilterDiv which will open filter section on click of filter button*/\n      var FilterToClickDiv = filetrDiv.find(\"#vas_expay_dropdownMenu_\" + $self.windowNo);\n      FilterToClickDiv.on(\"click\", function () {\n        if (!IsFilterBtnClicked) {\n          filetrDiv.addClass('vas-disableArrow');\n          IsFilterBtnClicked = true;\n          var $FilterDiv = $root.find(\"#vas_expay_FilterPopupWrap_\" + $self.windowNo);\n          $FilterHeader = $('  <div class=\"vas-expay-filter-flyout\">' + '    <div class=\"vas-from-row\">');\n          DocTypeExPayListDiv = $('<div class=\"VAS-DocTypeExPayListDiv\">');\n          $DocTypeExPayListDiv = $('<div class=\"input-group vis-input-wrap\">');\n          /* parameters are: context, windowno., coloumn id, display type, DB coloumn name, Reference key, Is parent, Validation Code*/\n          $DocTypeExPayListLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.List, \"VAS_DocTypeExPayPaymentList\", ColumnIds.VAS_DocTypeExPayPaymentList, false);\n          // Parameters are: columnName, mandatory, isReadOnly, isUpdateable, lookup,display length\n          $self.vDocTypeExPayList = new VIS.Controls.VComboBox(\"VAS_DocTypeExPayPaymentList\", true, false, true, $DocTypeExPayListLookUp, 20);\n          $self.vDocTypeExPayList.setValue(\"01\");\n          var $DocTypeExPayListControlWrap = $('<div class=\"vis-control-wrap\">');\n          $DocTypeExPayListDiv.append($DocTypeExPayListControlWrap);\n          $DocTypeExPayListControlWrap.append($self.vDocTypeExPayList.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label style=\"top:-9px;background-color: rgb(235, 235, 235);color:black;\">' + VIS.Msg.getMsg(\"VAS_DocTypeExPayDiv\") + '</label>');\n          ;\n          $DocTypeExPayListDiv.append($DocTypeExPayListControlWrap);\n          DocTypeExPayListDiv.append($DocTypeExPayListDiv);\n          FinancialPeriodListDiv = $('<div class=\"VAS-FinancialPeriodListDiv\">');\n          $FinancialPeriodListDiv = $('<div class=\"input-group vis-input-wrap\">');\n          /* parameters are: context, windowno., coloumn id, display type, DB coloumn name, Reference key, Is parent, Validation Code*/\n          $FinancialPeriodListLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.List, \"VAS_FinancialPeriodPaymentList\", ColumnIds.VAS_FinancialPeriodPaymentList, false);\n          // Parameters are: columnName, mandatory, isReadOnly, isUpdateable, lookup,display length\n          $self.vFinancialPeriodList = new VIS.Controls.VComboBox(\"VAS_FinancialPeriodPaymentList\", false, false, true, $FinancialPeriodListLookUp, 20);\n          // $self.vFinancialPeriodList.setValue(\"01\");\n          var $FinancialPeriodListControlWrap = $('<div class=\"vis-control-wrap\">');\n          $FinancialPeriodListDiv.append($FinancialPeriodListControlWrap);\n          $FinancialPeriodListControlWrap.append($self.vFinancialPeriodList.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label style=\"top:-9px;background-color: rgb(235, 235, 235);color:black;\">' + VIS.Msg.getMsg(\"VAS_FinancialPeriodDiv\") + '</label>');\n          ;\n          $FinancialPeriodListDiv.append($FinancialPeriodListControlWrap);\n          FinancialPeriodListDiv.append($FinancialPeriodListDiv);\n\n          //Created customer search control to filter out data\n          var BPValidation = isSOTrx == true ? \"C_BPartner.IsActive='Y' AND C_BPartner.IsCustomer = 'Y' AND C_BPartner.IsSummary = 'N'\" : \"C_BPartner.IsActive='Y' AND C_BPartner.IsVendor = 'Y' AND C_BPartner.IsSummary = 'N'\";\n          var BPartnerDiv = $('<div class=\"vas-BPartnerDiv\">');\n          $BPartnerDiv = $('<div class=\"input-group vis-input-wrap\">');\n          var BPartnerLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, ColumnIds.C_BPartner_ID, VIS.DisplayType.Search, \"C_BPartner_ID\", 0, false, BPValidation);\n          vSearchBPartner = new VIS.Controls.VTextBoxButton(\"C_BPartner_ID\", false, false, true, VIS.DisplayType.Search, BPartnerLookUp);\n          //set custom info for business partners\n          isSOTrx == true ? vSearchBPartner.setCustomInfo('VAS_Customer') : vSearchBPartner.setCustomInfo('VAS_VendorEmployee');\n          var $BPartnerControlWrap = $('<div class=\"vis-control-wrap\">');\n          var $BPartnerButtonWrap = $('<div class=\"input-group-append\">');\n          $BPartnerDiv.append($BPartnerControlWrap);\n          $BPartnerControlWrap.append(vSearchBPartner.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label class=\"vas-exinvd-bpLabel\" style=\"color:#000;\">' + (isSOTrx == true ? VIS.Msg.getMsg(\"VAS_CustomerPartner\") : VIS.Msg.getMsg(\"VAS_VendorPartner\")) + '</label>');\n          ;\n          $BPartnerDiv.append($BPartnerControlWrap);\n          $BPartnerButtonWrap.append(vSearchBPartner.getBtn(0));\n          $BPartnerDiv.append($BPartnerButtonWrap);\n          BPartnerDiv.append($BPartnerDiv);\n\n          //Created from and to date control to filter out data\n          var FromDatediv = $('<div class=\"vas-expay-dateWidth vas-FromdateDiv\">');\n          $FromDatewrapDiv = $('<div class=\"input-group vis-input-wrap\">');\n          $FromDate = new VIS.Controls.VDate(\"DateReport\", false, false, true, VIS.DisplayType.Date, \"DateReport\");\n          var $FromDateWrap = $('<div class=\"vis-control-wrap\">');\n          $FromDatewrapDiv.append($FromDateWrap);\n          $FromDateWrap.append($FromDate.getControl().attr('placeholder', ' ').attr('data-placeholder', '')).append('<label class=\"vas-expay-lablels\" style=\"color:black;\">' + VIS.Msg.getMsg(\"VAS_FromDate\") + '</label>');\n          ;\n          FromDatediv.append($FromDatewrapDiv);\n          var toDatediv = $('<div class=\"vas-expay-dateWidth vas-todateDiv\">');\n          $toDatewrapDiv = $('<div class=\"input-group vis-input-wrap\">');\n          $ToDate = new VIS.Controls.VDate(\"DateReport\", false, false, true, VIS.DisplayType.Date, \"DateReport\");\n          var $toDateWrap = $('<div class=\"vis-control-wrap\">');\n          $toDatewrapDiv.append($toDateWrap);\n          $toDateWrap.append($ToDate.getControl().attr('placeholder', ' ').attr('data-placeholder', '')).append('<label class=\"vas-expay-lablels\" style=\"color:black;\">' + VIS.Msg.getMsg(\"VAS_ToDate\") + '</label>');\n          ;\n          toDatediv.append($toDatewrapDiv);\n          var $DatesDiv = $('<div class=\"vas-expay-datefilter\">');\n          $DatesDiv.append(FromDatediv).append(toDatediv);\n          $FilterHeader.append(DocTypeExPayListDiv).append(FinancialPeriodListDiv).append(BPartnerDiv).append($DatesDiv);\n          var ButtonDiv = $('<div class=\"vas-expay-btndiv\">');\n          var ApplyBtn = $('<div class=\"vas-flyout-footer\">' + '<button id=\"VAS_Apply_' + $self.windowNo + '\" class=\"VIS_Pref_btn-2 vas-expay-filtbtn\">' + VIS.Msg.getMsg(\"VAS_Apply\") + '</button>' + '</div>');\n          var CloseBtn = $('<div class=\"vas-flyout-footer\">' + '<button id=\"VAS_Close_' + $self.windowNo + '\" class=\"VIS_Pref_btn-2 vas-expay-filtbtn\">' + VIS.Msg.getMsg(\"VAS_Clear\") + '</button>' + '</div>');\n          ButtonDiv.append(CloseBtn).append(ApplyBtn);\n          $FilterHeader.append(ButtonDiv);\n          $maindiv.append($FilterHeader);\n          if (C_BPartner_ID != null || FinancialPeriodValue != null || fromDate != null || toDate != null || docTypeValue != null) {\n            $self.vFinancialPeriodList.setValue(FinancialPeriodValue);\n            vSearchBPartner.setValue(C_BPartner_ID);\n            $FromDate.setValue(fromDate);\n            $ToDate.setValue(toDate);\n            $self.vDocTypeExPayList.setValue(docTypeValue);\n          }\n          var $ApplyButton = ApplyBtn.find(\"#VAS_Apply_\" + $self.windowNo);\n          vSearchBPartner.fireValueChanged = function () {\n            C_BPartner_ID = vSearchBPartner.value;\n          };\n          $ApplyButton.on(\"click\", function () {\n            //if (C_BPartner_ID == null && $self.vFinancialPeriodList.getValue() == null && $FromDate.getValue() == null && $ToDate.getValue() == null) {\n            //    VIS.ADialog.info(\"VAS_SelectAnyOneFilter\");\n            //    return '';\n            //}\n            if ($FromDate.getValue() > $ToDate.getValue()) {\n              VIS.ADialog.info('VAS_PlzEnterCorrectDate');\n              $ToDate.setValue(null);\n              return;\n            }\n            IsFilterBtnClicked = false;\n            pageNo = 1;\n            pageNoarray = 1;\n            CurrentPage = 1;\n            pageSize = 500;\n            arrayPageSize = 6;\n            RecCount = 0;\n            countRecord = 6;\n            FinancialPeriodValue = $self.vFinancialPeriodList.getValue();\n            fromDate = $FromDate.getValue();\n            toDate = $ToDate.getValue();\n            docTypeValue = $self.vDocTypeExPayList.getValue();\n            $FilterHeader.remove();\n            $maindiv.find('#vas_listContainer_' + widgetID).remove();\n            $maindiv.find('#vas_arrawcontainer_' + widgetID).remove();\n            $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n            $self.intialLoad();\n          });\n          CloseBtn.on('click', function () {\n            if ($self.vFinancialPeriodList.oldValue == null) {\n              $self.vFinancialPeriodList.setValue(0);\n            }\n            //Set value of list as ALL\n            if ($self.vDocTypeExPayList.oldValue == \"01\") {\n              $self.vDocTypeExPayList.setValue(null);\n            }\n            $self.vDocTypeExPayList.setValue(\"01\");\n            $self.vFinancialPeriodList.setValue(null);\n            vSearchBPartner.setValue(null);\n            $FromDate.setValue(null);\n            $ToDate.setValue(null);\n            C_BPartner_ID = null;\n            FinancialPeriodValue = null;\n            fromDate = null;\n            toDate = null;\n            docTypeValue = null;\n          });\n          setTimeout(function () {\n            filetrDiv.removeClass('vas-disableArrow');\n          }, 1000);\n        } else {\n          $FilterHeader.remove();\n          IsFilterBtnClicked = false;\n        }\n      });\n    };\n\n    /*This function will load data in widget */\n    this.intialLoad = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetExpectedPaymentData\", {\n        \"ISOtrx\": isSOTrx,\n        \"pageNo\": pageNo,\n        \"pageSize\": pageSize,\n        \"FinancialPeriodValue\": FinancialPeriodValue,\n        \"C_BPartner_ID\": C_BPartner_ID,\n        \"fromDate\": fromDate,\n        \"toDate\": toDate,\n        \"docTypeValue\": docTypeValue\n      }, function (dr) {\n        TotalAmtArray = dr;\n        if (TotalAmtArray != null && TotalAmtArray.length > 0) {\n          /*if on reverse arrow click pageNoarray is zero \r\n           then initailzed page number to get previous record*/\n          if (pageNoarray == 0) {\n            pageNoarray = Math.ceil(TotalAmtArray.length / arrayPageSize);\n          }\n          /*this function is use to get records based on start and end index*/\n          gridDataResult = getRecordsForPage(TotalAmtArray, pageNoarray, arrayPageSize);\n          //this function creating the design\n          CreateListDesign();\n        } else {\n          $maindiv.append('<div class=\"vas-igwidg-notfounddiv\" id=\"vas_norecordcont_' + widgetID + '\">' + VIS.Msg.getMsg(\"VAS_RecordNotFound\") + '</div>');\n          $root.append($maindiv);\n        }\n        $bsyDiv[0].style.visibility = \"hidden\";\n      });\n    };\n    /*this function will create empty div if records are less then 4*/\n    function createDummyDiv() {\n      $dummDiv = $('<div class=\"vas-expay-payments-box vas-expay-emptydiv\">' + ' <h6></h6>' + '<div class=\"vas-expay-payments-detail\">' + '<div class=\"vas-expay-thumb-txt\">' + '<img src=\"\" alt=\"\" style=\"width:0px\">' + '<div class=\"vas-expay-company-w-date\">' + '<div class=\"vas-expay-com-name\"></div>' + '<div class=\"vas-expay-paymentDate\"></div>' + '</div>' + '</div>' + '<div class=\"vas-expay-payment-w-amount\">' + '<div class=\"vas-expay-payment-lbl\"></div>' + '<div class=\"vas-expay-paymentTotalAmt\"><span></span></div>' + '</div>' + '</div>' + '</div>');\n    }\n    ;\n    /**\r\n    * This Function is used to value of context\r\n    * @param {any} contextValue\r\n    */\n    function GetContextValue(contextValue) {\n      var name = VIS.context.getWindowContext($self.windowNo, contextValue);\n      return name && name.trim() !== \"\" ? name : null;\n    }\n    function bindDummyDiv(j) {\n      for (var i = 0; i < j; i++) {\n        listDesign.append($dummDiv);\n      }\n      ;\n    }\n    ;\n    /*This function will create the design */\n    function CreateListDesign() {\n      var hue = Math.floor(Math.random() * (360 - 0)) + 0;\n      var v = Math.floor(Math.random() * (75 - 60 + 1)) + 60;\n      var pastel = 'hsl(' + hue + ', 100%,' + v + '%)';\n      listDesign = $('<div class=\"vas-expay-paymentsListing\" id=\"vas_listContainer_' + widgetID + '\">');\n\n      // Iterate through each item in the gridDataResult\n      for (var i = 0; i < gridDataResult.length; i++) {\n        RecCount = RecCount + 1;\n        totalRecordCount = gridDataResult[0].recordCount;\n        var custChar = '';\n        var custNameArr = gridDataResult[i].Name.trim().split(' ');\n\n        // Generate customer initials\n        custChar = custNameArr[0].substring(0, 1).toUpperCase();\n        if (custNameArr.length > 1) {\n          custChar += custNameArr[custNameArr.length - 1].substring(0, 1).toUpperCase();\n        } else {\n          custChar = custNameArr[0].substring(0, 2).toUpperCase();\n        }\n        var headingText = '';\n\n        // Determine the correct text based on conditions\n        if (gridDataResult[i].windowType === \"Order\") {\n          if (isSOTrx == true) {\n            headingText = VIS.Msg.getMsg(\"VAS_AdvSalesOrder\");\n          } else {\n            headingText = VIS.Msg.getMsg(\"VAS_AdvPurchaseOrder\");\n          }\n        } else if (gridDataResult[i].windowType === \"Invoice\") {\n          if (isSOTrx == true) {\n            headingText = VIS.Msg.getMsg(\"VAS_SalesInvoice\");\n          } else {\n            headingText = VIS.Msg.getMsg(\"VAS_PurchaseInvoice\");\n          }\n        }\n        // Create the widget data design element\n        var widgetDataDesign = '<div class=\"vas-expay-payments-box\">' + '<span class=\"VAS-expay-searchLinkIconBlock\">' + '<i class=\"glyphicon glyphicon-zoom-in\" data-Record_ID=\"' + gridDataResult[i].Record_ID + '\" data-windowId=\"' + gridDataResult[i].Window_ID + '\" data-Primary_ID=\"' + gridDataResult[i].Primary_ID + '\" id=\"VAS-unAllocatedZoom_' + $self.windowNo + '\" title=\"' + VIS.Msg.getMsg(\"VAS_Zoom\") + '\"></i>' + '</span>' + '<div class=\"vas-expay-payments-detail\">' + '<div class=\"vas-expay-payment-w-amount\">' + '<div class=\"vas-expay-payment-lbl vas-expay-com-name vas-expay-head-font\"  title=\"' + VIS.Msg.getMsg(\"VAS_Type\") + ': ' + headingText + '\">' + headingText + '</div>' + '</div>' + '<div class=\"vas-expay-payment-w-amount\">' + '<div class=\"vas-expay-payment-lbl vas-expay-text-align vas-expay-com-name vas-expay-rtl\" title=\"' + VIS.Msg.getMsg(\"VAS_DueDate\") + ': ' + VIS.Utility.Util.getValueOfDate(gridDataResult[i].OrderdDate).toLocaleDateString(window.navigator.language, {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        }) + '\">' + VIS.Utility.Util.getValueOfDate(gridDataResult[i].OrderdDate).toLocaleDateString(window.navigator.language, {\n          day: '2-digit',\n          month: '2-digit',\n          year: 'numeric'\n        }) + '</div>' + '</div>' + '<div class=\"vas-expay-payment-w-amount\">';\n\n        //if (gridDataResult[i].ImageUrl != null) {\n        //    // Append image if available\n        //    widgetDataDesign += '<img class=\"vas-businessPartnerImg\" alt=\"' + gridDataResult[i].ImageUrl + '\" src=\"' + VIS.Application.contextUrl + gridDataResult[i].ImageUrl + '\">'\n        //} else {\n\n        //    // Append initial if image is not available\n        //    widgetDataDesign +=\n        //        '<div style=\"float:left; background-color:' + pastel + '\" class=\"vas-igtwidg-img-icon\">' +\n        //        '<span style=\"font-size: 16px;\">' + custChar + '</span>' +\n        //        '</div>';\n        //}\n        widgetDataDesign +=\n        // '<div class=\"vas-expay-company-w-date\">' +\n        '<div class=\"vas-expay-payment-lbl vas-expay-com-name\" title=\"' + (isSOTrx == true ? VIS.Msg.getMsg(\"VAS_CustomerPartner\") : VIS.Msg.getMsg(\"VAS_VendorPartner\")) + ': ' + gridDataResult[i].Name + '\">' + gridDataResult[i].Name + '</div>' + '</div>' + '<div class=\"vas-expay-payment-w-amount\">' + '<div class=\"vas-expay-payment-lbl vas-expay-text-align vas-expay-com-name vas-expay-rtl\" title=\"' + VIS.Msg.getMsg(\"DocumentNo\") + ': ' + gridDataResult[i].DocumentNo + '\">' + gridDataResult[i].DocumentNo + '</div>' + '</div>' + '<div class=\"vas-expay-payment-w-amount\">' + '<div class=\"vas-expay-payment-lbl vas-expay-com-name\" title=\"' + VIS.Msg.getMsg(\"VAS_Currency\") + ': ' + gridDataResult[i].ISO_Code + '\">' + gridDataResult[i].ISO_Code + '</div>' + '</div>' + '<div class=\"vas-expay-payment-w-amount\">' + '<div class=\"vas-expay-payment-lbl vas-expay-text-align vas-expay-com-name vas-expay-rtl\" title=\"' + VIS.Msg.getMsg(\"VAS_DueAmtExPay\") + ': ' + gridDataResult[i].TotalAmt.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: gridDataResult[i].stdPrecision,\n          maximumFractionDigits: gridDataResult[i].stdPrecision\n        }) + '\">' + (gridDataResult[i].Symbol.length != 3 ? '<span class=\"vas-expay-symbol\">' + gridDataResult[i].Symbol + ' ' + '</span>' : '') + gridDataResult[i].TotalAmt.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: gridDataResult[i].stdPrecision,\n          maximumFractionDigits: gridDataResult[i].stdPrecision\n        }) + (gridDataResult[i].Symbol.length == 3 ? ' ' + '<span class=\"vas-expay-symbol\">' + gridDataResult[i].Symbol + '</span>' : '') + '</div>' + '</div>' + '</div>' + '</div>';\n\n        // Append the widget data design to the list container\n        listDesign.append(widgetDataDesign);\n      }\n      /*if the record are less then 4 than append empty div*/\n      if (RecCount < arrayPageSize) {\n        bindDummyDiv(arrayPageSize - RecCount);\n      }\n      TotalPagesofrecords = Math.ceil(totalRecordCount / arrayPageSize);\n      var arrowDiv = $('<div class=\"vas-expay-pagingdiv\">' + '<div class=\"vas-expay-slider-arrows\" id=\"vas_arrawcontainer_' + widgetID + '\">' + '<i class= \"fa fa-arrow-circle-left vas-expay-leftar\" aria-hidden=\"true\"></i>' + '<span class=\"vas-expay-pagespan\">' + '<span>' + CurrentPage + ' ' + '</span>' + '<span>' + VIS.Msg.getMsg(\"VAS_Of\") + ' ' + '</span>' + '<span>' + TotalPagesofrecords + '</span>' + '</span > ' + '<i class=\"fa fa-arrow-circle-right vas-expay-rightar\" aria-hidden=\"true\"></i>' + '</div>' + '</div>');\n      $maindiv.append(listDesign).append(arrowDiv);\n      $root.append($maindiv);\n      //disabled the left array when page no's are 1\n      if (pageNoarray == 1 && pageNo == 1) {\n        arrowDiv.find(\".fa-arrow-circle-left\").addClass('vas-disableArrow');\n      }\n      //handled value on right array click to get next record\n      arrowDiv.find(\".fa-arrow-circle-right\").on(\"click\", function () {\n        pageNoarray++;\n        CurrentPage++;\n        $maindiv.find('#vas_listContainer_' + widgetID).remove();\n        $maindiv.find('#vas_arrawcontainer_' + widgetID).remove();\n        gridDataResult = getRecordsForPage(TotalAmtArray, pageNoarray, arrayPageSize);\n        if (countRecord >= TotalAmtArray.length) {\n          pageNoarray = 1;\n          countRecord = 5;\n          pageNo++;\n          $self.intialLoad();\n        } else {\n          countRecord = countRecord + arrayPageSize;\n          CreateListDesign();\n        }\n      });\n      //handled value on left click to get previous record\n      arrowDiv.find(\".fa-arrow-circle-left\").on(\"click\", function () {\n        pageNoarray--;\n        CurrentPage--;\n        $maindiv.find('#vas_listContainer_' + widgetID).remove();\n        $maindiv.find('#vas_arrawcontainer_' + widgetID).remove();\n        gridDataResult = getRecordsForPage(TotalAmtArray, pageNoarray, arrayPageSize);\n        if (countRecord == arrayPageSize) {\n          countRecord = pageSize;\n          pageNo--;\n          $self.intialLoad();\n        } else {\n          countRecord = countRecord - arrayPageSize;\n          CreateListDesign();\n        }\n      });\n      //If all the records displayed then disabled next button\n      var totalPages = Math.ceil(totalRecordCount / pageSize);\n      if (pageNo >= totalPages && countRecord >= TotalAmtArray.length) {\n        arrowDiv.find(\".fa-arrow-circle-right\").addClass('vas-disableArrow');\n      }\n      $maindiv.find('.glyphicon-zoom-in').on(\"click\", function () {\n        var Record_ID = VIS.Utility.Util.getValueOfInt($(this).attr(\"data-Record_ID\"));\n        var windowId = VIS.Utility.Util.getValueOfInt($(this).attr(\"data-windowId\"));\n        var Primary_ID = VIS.Utility.Util.getValueOfString($(this).attr(\"data-Primary_ID\"));\n        handleZoomClick(Record_ID, windowId, Primary_ID);\n      });\n    }\n    /**\r\n    * This Function is used to slice array of records according to start and end index\r\n    * @param {any} records\r\n    * @param {any} pageNumber\r\n    * @param {any} pageSize\r\n    */\n    function getRecordsForPage(records, pageNumber, pageSize) {\n      var startIndex = (pageNumber - 1) * pageSize;\n      var endIndex = startIndex + pageSize;\n      return records.slice(startIndex, endIndex);\n    }\n    /*This function will show busy indicator in widget */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $bsyDiv.css({\n        \"position\": \"absolute\",\n        \"width\": \"98%\",\n        \"height\": \"97%\",\n        'text-align': 'center',\n        'z-index': '999'\n      });\n      $bsyDiv[0].style.visibility = \"visible\";\n      $root.append($bsyDiv);\n    }\n    ;\n    /**\r\n    * This function is used to get the refernce id of list\r\n    */\n    var GetColumnID = function () {\n      ColumnIds = VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetColumnIDForExpPayment\", {\n        \"refernceName\": JSON.stringify(ColumnData)\n      }, null);\n    };\n    /**\r\n    * this fucntion is used to zoom to window for the record which is clicked from grid\r\n    * @param {any} Record_ID\r\n    * @param {any} windowId\r\n    * @param {any} Primary_ID\r\n    */\n    function handleZoomClick(Record_ID, windowId, Primary_ID) {\n      if (windowId > 0) {\n        var zoomQuery = new VIS.Query();\n        zoomQuery.addRestriction(Primary_ID, VIS.Query.prototype.EQUAL, Record_ID);\n        zoomQuery.setRecordCount(1);\n        VIS.viewManager.startWindow(windowId, zoomQuery);\n      }\n    }\n    /*This function used to get root*/\n    this.getRoot = function () {\n      return $root;\n    };\n    /*this function is used to refresh design and data of widget*/\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      $maindiv.find('#vas_listContainer_' + widgetID).remove();\n      $maindiv.find('#vas_arrawcontainer_' + widgetID).remove();\n      $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n      C_BPartner_ID = null;\n      FinancialPeriodValue = null;\n      fromDate = null;\n      toDate = null;\n      docTypeValue = null;\n      pageNo = 1;\n      pageNoarray = 1;\n      pageSize = 500;\n      CurrentPage = 1;\n      if ($FilterHeader != null) {\n        $FilterHeader.remove();\n      }\n      RecCount = 0;\n      arrayPageSize = 6;\n      docTypeValue = null;\n      countRecord = 6;\n      $self.intialLoad();\n    };\n  };\n  VAS.VAS_ExpectedPaymentWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad();\n    }, 50);\n  };\n  VAS.VAS_ExpectedPaymentWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  /*this function is called when widget size changes*/\n  VAS.VAS_ExpectedPaymentWidget.prototype.widgetSizeChange = function (widget) {\n    //this.getRoot().css(\"height\", widget.height);\n    //this.getRoot().css(\"width\", widget.width);\n    this.widgetInfo = widget;\n  };\n  /*Used to dispose the variable*/\n  VAS.VAS_ExpectedPaymentWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ExpectedPayments.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ExpectedTransferWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Get the Expected Material Transfer Details\r\n * chronological  : Development\r\n * Created Date   : 26 Sep 2024\r\n * Created by     : VIS0060\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_ExpectedTransferWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 5;\n    var selecteLineIDs = []; // Array to keep track of selected order line IDs\n\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      // Create busy indicator\n      createBusyIndicator();\n      var reqContainer = '<div id=\"VAS_TransferContainer_' + widgetID + '\" class=\"VAS-deliveries-container\">' + '<div class=\"VAS-deliveries-heading\">' + '<h6>' + VIS.Msg.getMsg(\"VAS_ExpectedTransfers\") + '</h6>' + '</div>' + '<div class=\"VAS-delivery-count\">' + '<div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_Transfers\") + ' <span id=\"VAS_TransferCount_' + widgetID + '\">0</span></div>' + '</div>' + '<div class=\"VAS-delivery-detail\">' + '<div class=\"VAS-box-heading\">' + '</div>' + '</div>' + '<div class=\"VAS-height-container\">' + '<div id=\"VAS_TransferBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '</div>' + '<div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '</div>' + '</div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      $root.append(reqContainer);\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_TransferContainer_' + widgetID).show();\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"Product/GetExpectedTransfer\", {\n        pageNo: pageNo,\n        pageSize: pageSize,\n        Type: \"ET\"\n      }, function (response) {\n        $root.find('#VAS_TransferBox_' + widgetID).empty();\n        $root.find('#VAS_ReqContainer' + widgetID).remove;\n        if (response != null && response.Requisitions != null && response.Requisitions.length > 0) {\n          for (i = 0; i < response.Requisitions.length; i++) {\n            var boxHtml = '<div id=\"VAS_ReqContainer' + widgetID + '\" class=\"VAS-delivery-box\" >' + '<div class=\"VAS-box-heading\">' + '<div class=\"VAS-icon-w-name\">' + '<i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '<div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + 'title=\"' + VIS.Msg.getMsg(\"DocumentNo\") + '\" ' + 'data-doc-no=\"' + response.Requisitions[i][\"DocumentNo\"] + '\" ' + 'data-customer-name=\"' + response.Requisitions[i][\"Employee\"] + '\" ' + 'data-reqid=\"' + response.Requisitions[i][\"M_Requisition_ID\"] + '\">' +\n            // Add data-reqid attribute here\n            '' + response.Requisitions[i][\"DocumentNo\"] + '</div>' + '</div>' + '<div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Requisitions[i][\"LineCount\"] + '</div>' + '</div>' + '<div class=\"VAS-spaceBetween-col\">' +\n            // '<div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"Employee\") + '\">' + response.Requisitions[i][\"Employee\"] + '</div>' +\n            '</div>' + '<div class=\"VAS-spaceBetween-col grid-2-col\">' + '<div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Destination\") + '\">' + response.Requisitions[i][\"Destination\"] + '</div>' + '<div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_Source\") + '\">' + response.Requisitions[i][\"Source\"] + '</div>' + '</div>' + '<div class=\"VAS-spaceBetween-col\">' + '<div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Requisitions[i][\"Symbol\"] + '</span>' + ' ' + response.Requisitions[i][\"GrandTotal\"].toLocaleString() + '</div>' + '</div>' + '</div>';\n            $root.find('#VAS_TransferBox_' + widgetID).append(boxHtml);\n          }\n          childRecordsMap = [];\n          // Populate the childRecordsMap with child records\n          response.Requisitions.forEach(function (requisition) {\n            if (requisition.ReqLines && requisition.ReqLines.length > 0) {\n              childRecordsMap[requisition.DocumentNo] = requisition.ReqLines;\n            }\n          });\n\n          /* Add Pagination div on first tym data load*/\n          if (pageNo == 1) {\n            $root.find('#VAS_TransferCount_' + widgetID).text(response.RecordCount);\n            buildPagination(response.RecordCount);\n          }\n          $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n\n          // Attach click event listener to transfer boxes\n          $root.off('click', '#VAS_DocumentNo_' + widgetID);\n          $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n            var docNo = $(this).data('doc-no');\n            var customerName = $(this).data('customer-name');\n            var reqid = $(this).data('reqid');\n            displayOrderDetails(docNo, customerName, reqid);\n          });\n        }\n        $bsyDiv.css('visibility', 'hidden');\n      });\n    };\n    function displayOrderDetails(docNo, customerName, reqid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_TransferContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selecteLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-deliveries-container\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + '            <span id=\"VAS_BackToTransfer_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToTransfer\") + '        </h6>' + '<span id=\"VAS_GenerateTransfer_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-reqid=\"' + reqid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenMaterialTransfer\") + '\"><i class=\"fa fa-truck\" aria-hidden=\"true\"></i></span>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading VAS-orders-text-white\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text VAS-orders-text-white\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no VAS-orders-text-white\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' +\n      //'                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"Employee\") + '\">' + customerName + '</div>' +\n      '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count VAS-orders-text-white\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selecteLineIDs.includes(line.C_OrderLine_ID);\n          var hasStock = line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n          var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n          var badgeClass;\n          if (line.OnHandQty >= line.QtyOrdered) {\n            badgeClass = 'badge-green'; //  stock available\n          } else if (line.OnHandQty < line.QtyOrdered && line.OnHandQty > 0) {\n            badgeClass = 'badge-orange'; //stock less tham order \n          } else {\n            badgeClass = 'badge-red'; // Insufficient stock\n          }\n          $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"' + boxClass + '\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-reqlineid=\"' + line.M_RequisitionLine_ID + '\"' + (isChecked ? ' checked' : '') + (hasStock ? '' : ' disabled') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\">' + '                    <span title = \"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\" class=\"badge badge-light ' + badgeClass + '\"> ' + line.QtyEntered + '</span ></div > ' + '                      </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details VAS-orders-text-white\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackToTransfer_' + widgetID);\n      $root.off('click', '#VAS_GenerateTransfer_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackToTransfer_' + widgetID, function () {\n        $root.find('#VAS_TransferContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var reqlineid = $(this).data('reqlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selecteLineIDs.includes(reqlineid)) {\n            selecteLineIDs.push(reqlineid);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selecteLineIDs = selecteLineIDs.filter(id => id !== reqlineid);\n        }\n        if (selecteLineIDs.length > 0) {\n          $root.find('#VAS_GenerateTransfer_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateTransfer_' + widgetID).hide();\n        }\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateTransfer_' + widgetID, function () {\n        var reqId = $(this).data('reqid');\n        generateMaterialTransfer(reqId);\n      });\n      $root.find('#VAS_GenerateTransfer_' + widgetID).hide();\n    }\n    function generateMaterialTransfer(reqId) {\n      $bsyDiv.css('visibility', 'visible');\n      var reqLineIDs = selecteLineIDs.join(',');\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/CreateMaterialTransfer\",\n        data: {\n          M_Requisition_ID: reqId,\n          M_RequisitionLines_IDs: reqLineIDs\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          if (response.Movement_ID > 0) {\n            try {\n              var windowParam = {\n                \"TabWhereClause\": \"M_Movement.M_Movement_ID=\" + response.Movement_ID,\n                \"TabLayout\": \"Y\",\n                // 'N'[Grid],'Y'[Single],'C'[Card]}\t \t \n                \"TabIndex\": \"0\"\n              };\n              $self.widgetFirevalueChanged(windowParam);\n              $self.currentPage = 1;\n              $self.intialLoad($self.currentPage);\n            } catch (e) {\n              console.log(e);\n            }\n          } else {\n            var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n            var message = \"\";\n            if (response.message != null && response.message != \"\") {\n              message = response.message;\n            } else {\n              message = VIS.Msg.getMsg(\"VAS_TransferNotGenerated\");\n            }\n            spnWO.text(message);\n            spnWO.fadeIn();\n            spnWO.fadeOut(5000);\n          }\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows VAS-orders-text-white\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_ExpectedTransferWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_ExpectedTransferWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_ExpectedTransferWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_ExpectedTransferWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_ExpectedTransferWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_ExpectedTransferWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ExpectedTransferWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ExpenseAmountWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Created Widget to show top 10 expense\r\n *                  amount\r\n * chronological  : Development\r\n * Created Date   : 01 October 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_YearBasedExpenseData = function () {\n    var widgetID = 0;\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $maindiv = null;\n    var vDifferentYearDataList = null;\n    var $root = $('<div class=\"h-100 w-100 vas-t10exp-background\">');\n    var ExpenseAmountData = [];\n    var ExpenseNameArray = [];\n    this.initalize = function () {\n      widgetID = VIS.Utility.Util.getValueOfInt(this.widgetInfo.AD_UserHomeWidgetID) != 0 ? this.widgetInfo.AD_UserHomeWidgetID : $self.windowNo;\n      GetColumnID();\n      createBusyIndicator();\n      $maindiv = $('<div id=\"vas_pieChartExpense_' + widgetID + '\" class=\"vas-piechartexpense-container\">');\n      var MainHeadingComboDiv = $('<div class=\"d-flex justify-content-between vas-t10exp-div\">');\n      var HeadingDiv = $('<div class= \"vas-t10exp-heading\">' + VIS.Msg.getMsg(\"VAS_Top10Expenses\") + '</div>');\n      // YearBasedDataListDiv = $('<div class=\"VAS-YearBasedDataListDiv\">');\n      $DifferentYearDataListDiv = $('<div class=\"input-group vis-input-wrap\">');\n      /* parameters are: context, windowno., coloumn id, display type, DB coloumn name, Reference key, Is parent, Validation Code*/\n      $DifferentYearDataListLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), widgetID, 0, VIS.DisplayType.List, \"VAS_DifferentYear\", ColumnIds.AD_Reference_ID, false, null);\n      // Parameters are: columnName, mandatory, isReadOnly, isUpdateable, lookup,display length\n      vDifferentYearDataList = new VIS.Controls.VComboBox(\"VAS_DifferentYear\", true, false, true, $DifferentYearDataListLookUp, 20);\n      vDifferentYearDataList.setValue(\"1\");\n      var $DifferentYearDataListControlWrap = $('<div class=\"vis-control-wrap\">');\n      $DifferentYearDataListDiv.append($DifferentYearDataListControlWrap);\n      $DifferentYearDataListControlWrap.append(vDifferentYearDataList.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' '));\n      $DifferentYearDataListDiv.append($DifferentYearDataListControlWrap);\n      MainHeadingComboDiv.append(HeadingDiv).append($DifferentYearDataListDiv);\n      $maindiv.append(MainHeadingComboDiv);\n      $root.append($maindiv);\n      vDifferentYearDataList.fireValueChanged = function () {\n        vDifferentYearDataList.setValue(vDifferentYearDataList.getValue());\n        $bsyDiv[0].style.visibility = \"visible\";\n        ExpenseAmountData = [];\n        ExpenseNameArray = [];\n        $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n        $self.getExpenseDetails();\n      };\n    };\n    this.getExpenseDetails = function () {\n      // Show busy indicator while data is loading\n      $bsyDiv[0].style.visibility = \"visible\";\n\n      // Define your AJAX request\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetTop10ExpenseAmountData\", {\n        \"ListValue\": vDifferentYearDataList.getValue()\n      }, function (dr) {\n        var ExpenseData = dr;\n\n        // Remove existing canvas if exists\n        $root.find('canvas').remove();\n        if (ExpenseData.length > 0) {\n          var precision = ExpenseData[0].stdPrecision;\n          for (var i = 0; i < ExpenseData.length; i++) {\n            if (ExpenseData[i].ExpenseAmount != 0) {\n              ExpenseAmountData.push(ExpenseData[i].ExpenseAmount);\n              ExpenseNameArray.push(ExpenseData[i].ExpenseName);\n            }\n          }\n\n          // Define static labels and colors\n          const labels = ExpenseNameArray;\n          const backgroundColors = ['rgba(255, 99, 132, 0.7)',\n          // Red\n          'rgba(54, 162, 235, 0.7)',\n          // Blue\n          'rgba(255, 206, 86, 0.7)',\n          // Yellow\n          'rgba(75, 192, 192, 0.7)',\n          // Teal\n          'rgba(153, 102, 255, 0.7)',\n          // Purple\n          'rgba(255, 159, 64, 0.7)',\n          // Orange\n          'rgba(0, 187, 0, 0.7)',\n          // Green\n          'rgba(255, 105, 180, 0.7)',\n          // Pink\n          'rgba(100, 149, 237, 0.7)',\n          // Cornflower Blue\n          'rgba(124, 246, 0, 0.7)' // Lime Green\n          ];\n\n          // Prepare the data object for the chart\n          const data = {\n            labels: labels,\n            // Dynamic labels\n            datasets: [{\n              backgroundColor: backgroundColors,\n              data: ExpenseAmountData,\n              borderColor: 'rgba(0,0,0,0)',\n              // Transparent border color\n              borderWidth: 0 // No border\n            }]\n          };\n          const plugin = {\n            beforeInit: function (chart) {\n              const originalFit = chart.legend.fit;\n              chart.legend.fit = function fit() {\n                originalFit.bind(chart.legend)();\n                this.height += -10;\n              };\n            }\n          };\n\n          // Define the chart configuration for Doughnut chart\n          const config = {\n            type: 'doughnut',\n            data: data,\n            options: {\n              responsive: true,\n              maintainAspectRatio: false,\n              // Makes the chart responsive\n              radius: '80%',\n              // Adjust this value to decrease the outer radius\n              plugins: {\n                legend: {\n                  display: true,\n                  position: 'right',\n                  // Positioning the legend on the right\n                  labels: {\n                    generateLabels: function (chart) {\n                      const data = chart.data;\n                      const labels = data.labels;\n                      return labels.map((label, i) => ({\n                        text: label,\n                        fillStyle: backgroundColors[i] || '#000000',\n                        strokeStyle: 'transparent',\n                        lineWidth: 0\n                      }));\n                    },\n                    boxWidth: 10\n                  }\n                },\n                tooltip: {\n                  enabled: true,\n                  mode: 'index',\n                  callbacks: {\n                    label: function (tooltipItem) {\n                      const dataIndex = tooltipItem.dataIndex;\n                      const datasetIndex = tooltipItem.datasetIndex;\n                      const dataset = tooltipItem.chart.data.datasets[datasetIndex];\n                      const labels = tooltipItem.chart.data.labels;\n                      const value = dataset.data[dataIndex];\n                      return labels[dataIndex] + ': ' + parseFloat(value).toLocaleString(window.navigator.language, {\n                        minimumFractionDigits: precision,\n                        maximumFractionDigits: precision\n                      });\n                    }\n                  }\n                }\n              }\n            },\n            plugins: [plugin]\n          };\n\n          // Create a new canvas element and append it to the root\n          const canvas = $('<canvas></canvas>');\n          canvas.attr('width', 300); // Set width for square aspect ratio\n          canvas.attr('height', 300); // Set height for square aspect ratio\n          var polarChart = $root.find('#vas_pieChartExpense_' + widgetID);\n          polarChart.append(canvas);\n\n          // Initialize the chart with the new data\n          const ctx = canvas[0].getContext('2d');\n          new Chart(ctx, config);\n          $root.find('canvas').addClass('vas-t10exp-canvas');\n        } else {\n          // Display \"No data available\" message\n          $maindiv.append('<div class=\"vas-igwidg-notfounddiv\" id=\"vas_norecordcont_' + widgetID + '\">' + VIS.Msg.getMsg(\"VAS_RecordNotFound\") + '</div>');\n          $root.append($maindiv);\n        }\n\n        // Hide busy indicator\n        $bsyDiv[0].style.visibility = \"hidden\";\n      });\n    };\n    var GetColumnID = function () {\n      ColumnIds = VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetColumnID\", {\n        \"refernceName\": \"VAS_DifferentYear\"\n      }, null);\n    };\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $bsyDiv[0].style.visibility = \"visible\";\n      $root.append($bsyDiv);\n    }\n    ;\n    this.getRoot = function () {\n      return $root;\n    };\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      ExpenseAmountData = [];\n      ExpenseNameArray = [];\n      $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n      $self.getExpenseDetails();\n    };\n  };\n  VAS.VAS_YearBasedExpenseData.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var self = this;\n    window.setTimeout(function () {\n      self.getExpenseDetails();\n    }, 50);\n  };\n  VAS.VAS_YearBasedExpenseData.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_YearBasedExpenseData.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_YearBasedExpenseData.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ExpenseAmountWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_FinDInsights.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        :Created Widget to get finance data insights\r\n * chronological  : Development\r\n * Created Date   : 04 October 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_FinDInsights = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $(\'<div class="h-100 w-100">\');\n    var divContainer = null;\n    var widgetID = 0;\n    var counter = 0;\n    this.initalize = function () {\n      widgetID = VIS.Utility.Util.getValueOfInt(this.widgetInfo.AD_UserHomeWidgetID) != 0 ? this.widgetInfo.AD_UserHomeWidgetID : $self.windowNo;\n      createBusyIndicator();\n      $root.append(\'<div class="vas-fdi-feed-container">\' + \'<div class="vas-fdi-spaceBetween">\' + \'<h1 class="vas-fdi-widget-head">\' + VIS.Msg.getMsg("VAS_FinDInsights") + \'</h1>\' + \'<div class="vas-fdi-marquee" id = "VAS_divContainer_\' + widgetID + \'">\' + \'<p>\' + \'</p>\' + \'</div>\' + \'</div>\');\n      divContainer = $root.find("#VAS_divContainer_" + widgetID);\n      $root.find(".vas-fdi-refreshIco").hide();\n    };\n    this.intialLoad = function () {\n      divContainer.find(\'p\').empty();\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "VAS/PoReceipt/GetFinInsightsData", null, function (dr) {\n        InsightData = dr;\n        if (InsightData.length > 0) {\n          for (i = 0; i < InsightData.length; i++) {\n            divContainer.find(\'p\').append(\' <div class="vas-fdi-req-generated">\' + \'<div class="vas-fdi-req-count"></div>\' + \'<a href="#" class="vas-fdi-reqGen-Txt vas-custom-link" data-name="\' + InsightData[i].Name + \'" data-dataobject="\' + InsightData[i].DataObject + \'" data-tableview="\' + InsightData[i].TabelView + \'" data-ad_org_id="\' + InsightData[i].AD_Org_ID + \'">\' + \'<span style="font-size: 1.8em;">\' + InsightData[i].Result + \'</span>\' + \'    \' + \'<span style="font-size: 1.2em;">\' + ExtractText(InsightData[i].DisplayName) + \'</span>\' + \'</a>\' + \'</div>\' + \'</div>\');\n          }\n        } else {\n          divContainer.find(\'p\').append(\'<div class="vas-fdi-notfounddiv" id="vas_norecordcont_\' + widgetID + \'">\' + VIS.Msg.getMsg("VAS_RecordNotFound") + \'</div>\');\n        }\n        $bsyDiv[0].style.visibility = "hidden";\n        divContainer.find(\'a\').on("click", function () {\n          ++counter;\n          var insightDataView = new VAS.VAS_FinDInsightsGridView();\n          insightDataView.setProperties($(this).attr("data-tableview"), $(this).attr("data-name"), $(this).attr("data-dataobject"), counter, $(this).attr("data-ad_org_id"));\n          insightDataView.Initialize();\n        });\n      });\n    };\n\n    /**\r\n     * This function is used to extract the Data between @@ values and convert it according to culture \r\n     * @param {any} DisplayName\r\n     */\n    function ExtractText(DisplayName) {\n      /* Extracted Variable */\n      var extractedText = "";\n\n      /* get Extracted Data */\n      var matches = DisplayName.match(/@(.+?)@/);\n      if (matches && matches[1]) {\n        /* Match[1] contain text between @@ */\n        extractedText = matches[1];\n\n        /* Convert Original Text with Culture */\n        var newText = DisplayName.replace("@" + extractedText + "@", VIS.Msg.getMsg(extractedText));\n\n        /* return Text */\n        return newText;\n      }\n\n      /* When Display Name dont contain text which contain @@ then return Original text */\n      return DisplayName;\n    }\n    ;\n    function createBusyIndicator() {\n      $bsyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis_widgetloader"></i></div></div>\');\n      $bsyDiv[0].style.visibility = "visible";\n      $root.append($bsyDiv);\n    }\n    ;\n    this.getRoot = function () {\n      return $root;\n    };\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = "visible";\n      $self.intialLoad();\n    };\n  };\n  VAS.VAS_FinDInsights.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad();\n    }, 50);\n  };\n  VAS.VAS_FinDInsights.prototype.widgetSizeChange = function (widget) {\n    //size = {\n    //    AD_UserHomeWidgetID: 200001,\n    //    editMode: true || false,\n    //    rows: 2,\n    //    Cols: 2,\n    //    width: \'200px\',\n    //    height: \'200px\',\n    //}\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_FinDInsights.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_FinDInsights.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_FinDInsights.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_FinDInsightsGridView.js":()=>{eval('{/********************************************************\r\n* Module Name    : VAS\r\n* Purpose        : To show the homepage for finDInsightGW Form\r\n* Class Used     : VAS.Gridinsight\r\n* Chronological Development\r\n* VAI-093         3 Oct 2024\r\n******************************************************/\n\n;\nVAS = window.VAS || {};\n/* self-invoking function no need to call ,automatically call on pageload */\n;\n(function (VAS, $) {\n  /* Form Class function fullnamespace */\n  VAS.VAS_FinDInsightsGridView = function () {\n    var frame;\n    this.windowNo;\n    var $root;\n    this.log = VIS.Logging.VLogger.getVLogger("finDInsightGW_Form"); /* init log Class */\n    var self = this;\n    var gridDiv;\n    var insightGrid = null;\n    var orgId = null;\n    var InsightGridCounter = 0;\n    var pageSize = 50;\n    var pageNo = 1;\n    var TotalPageCount = 0;\n    var Label = null;\n    var frame = null;\n    var tableName = null;\n    var columnsData = null;\n    var Data = null;\n    var ulPaging = null;\n    var liFirstPage = null;\n    var liPrevPage = null;\n    var cmbPage = null;\n    var AD_Org_ID = null;\n    var liCurrPage = null;\n    var liNextPage = null;\n    var liLastPage = null;\n    var divPaging = null;\n\n    /*\r\n     for Initial design and message\r\n    */\n    function initializeComponent() {\n      /* creating a root div */\n      $root = $(\'<div style="height:100%">\');\n\n      /* creating busy indicator */\n      createBusyIndicator();\n\n      /* creating a new frame */\n      frame = new VIS.CFrame();\n      frame.setName(VIS.Utility.encodeText(Label));\n      frame.setTitle(VIS.Utility.encodeText(Label));\n      frame.setContent(self);\n      frame.hideHeader(false);\n      frame.show();\n      setBusy(true);\n\n      /* creating html structure */\n      createinsighstructure();\n\n      /*function used to the get the data for the grid */\n      GetData(pageNo);\n\n      /*create paging */\n      createPageSettings();\n      setTimeout(function () {\n        setBusy(false);\n      }, 1000);\n    }\n    ;\n\n    /* function used to create basic HTML structure */\n    function createinsighstructure() {\n      mainContainerDiv = $(\'<div class="VAS-finDInsightGW-Grid-container h-100">\');\n      gridDiv = $(\'<div class="VAS-finDInsightGW-gridDiv "style="height:calc(100vh - 152px); width: 100%;">\');\n      divPaging = $(\'<div class="VAS-finDInsightGW-Paging mr-3" style="display:flex;align-items: center;justify-content:end;margin-top:10px">\');\n      mainContainerDiv.append(gridDiv).append(divPaging);\n      $root.append(mainContainerDiv);\n    }\n    ;\n\n    /* function used  to load grid */\n    function loadGrid(colz, InsightData = []) {\n      if (insightGrid != null) {\n        insightGrid.destroy();\n        insightGrid = null;\n      }\n      insightGrid = $(gridDiv).w2grid({\n        name: "VAS_Grid_" + InsightGridCounter,\n        recordHeight: 25,\n        show: {\n          toolbar: false,\n          // indicates if toolbar is v isible\n          //columnHeaders: true,   // indicates if columns is visible\n          lineNumbers: true,\n          // indicates if line numbers column is visible\n          selectColumn: false,\n          // indicates if select column is visible\n          toolbarReload: false,\n          // indicates if toolbar reload button is visible\n          toolbarColumns: true,\n          // indicates if toolbar columns button is visible\n          toolbarSearch: false,\n          // indicates if toolbar search controls are visible\n          toolbarAdd: false,\n          // indicates if toolbar add new button is visible\n          toolbarDelete: true,\n          // indicates if toolbar delete button is visible\n          toolbarSave: true // indicates if toolbar save button is visible\n        },\n        multiSelect: false,\n        columns: colz,\n        records: InsightData\n        //onRefresh: function (event) {\n        //    /* Set random colors for each row */\n        //    var grid = this;\n        //    grid.records.forEach(function (record) {\n        //        var randomColor = getRandomColor();\n        //        record.style = \'background-color: \' + randomColor + \'; color: black;\'; // Add text color for contrast\n        //    });\n        //},\n      });\n    }\n\n    /* function to get random colors */\n    //function getRandomColor() {\n    //    var r = Math.floor(Math.random() * 156) + 200; // Values between 100 and 255\n    //    var g = Math.floor(Math.random() * 156) + 200; // Values between 100 and 255\n    //    var b = Math.floor(Math.random() * 156) + 200; // Values between 100 and 255\n    //    return \'rgb(\' + r + \',\' + g + \',\' + b + \')\';\n    //}\n\n    /* function used to create column data */\n    function createColumnData(data) {\n      columnsData = data.map(name => ({\n        field: name,\n        caption: VIS.Msg.getMsg(name),\n        columnName: VIS.Msg.getMsg(name),\n        size: \'10%\',\n        sortable: true,\n        resizable: true\n      }));\n    }\n\n    /**\r\n     *  Ajax function used to get data for the grid\r\n     * @param {any} pageNo\r\n     */\n    function GetData(pageNo) {\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "VAS/PoReceipt/GetFinDataInsightGrid", {\n        "tableName": tableName,\n        "pageNo": pageNo,\n        "pageSize": pageSize,\n        "AD_Org_ID": orgId\n      }, function (dr) {\n        data = dr;\n        if (data != null && data.length > 0) {\n          if (data.length > 1) {\n            columnsData = data[0].ColName.split(\',\');\n            Data = data.shift();\n\n            /* function used to create fields for the columns for w2ui grid */\n            createColumnData(columnsData);\n            //Calculted Page count\n            TotalPageCount = Math.ceil(data[0].Count / pageSize);\n          } else {\n            columnsData = data[0].ColName.split(\',\');\n            data.shift();\n            /* function used to create fields for the columns for w2ui grid */\n\n            createColumnData(columnsData);\n            VIS.ADialog.info("VAS_RecordNotFound");\n          }\n        }\n\n        /* function used for loading the grid */\n        loadGrid(columnsData, data);\n\n        /*function used to reset the pagging after loading of grid */\n        resetPageCtrls(TotalPageCount);\n      });\n    }\n\n    /* function used for creating paging div */\n    function createPageSettings() {\n      ulPaging = $(\'<ul class="vis-statusbar-ul">\');\n      liFirstPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-shiftleft" title="First Page" style="opacity: 0.6;"></i></div></li>\');\n      liPrevPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-pageup" title="Page Up" style="opacity: 0.6;"></i></div></li>\');\n      cmbPage = $(\'<select>\');\n      liCurrPage = $(\'<li>\').append(cmbPage);\n      liNextPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-pagedown" title="Page Down" style="opacity: 0.6;"></i></div></li>\');\n      liLastPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-shiftright" title="Last Page" style="opacity: 0.6;"></i></div></li>\');\n      ulPaging.append(liFirstPage).append(liPrevPage).append(liCurrPage).append(liNextPage).append(liLastPage);\n      divPaging.append(ulPaging);\n      pageEvents();\n    }\n    ;\n\n    /* function used to create click events for the paging arrows */\n    function pageEvents() {\n      liFirstPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo = 1;\n          GetData(pageNo);\n        }\n      });\n      liPrevPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo--;\n          GetData(parseInt(pageNo));\n        }\n      });\n      liNextPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo++;\n          GetData(parseInt(pageNo));\n        }\n      });\n      liLastPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo = parseInt(cmbPage.find("Option:last").val());\n          GetData(pageNo);\n        }\n      });\n      cmbPage.on("change", function () {\n        pageNo = cmbPage.val();\n        GetData(pageNo);\n      });\n    }\n    ;\n\n    /**\r\n     *  function used to reset the paging according to the \r\n     *  current page count \r\n     * @param {any} TotalPageCount\r\n     */\n    function resetPageCtrls(TotalPageCount) {\n      cmbPage.empty();\n      if (TotalPageCount > 0) {\n        for (var i = 0; i < TotalPageCount; i++) {\n          cmbPage.append($("<option value=" + (i + 1) + ">" + (i + 1) + "</option>"));\n        }\n        cmbPage.val(pageNo);\n        if (TotalPageCount > pageNo) {\n          liNextPage.css("opacity", "1");\n          liLastPage.css("opacity", "1");\n        } else {\n          liNextPage.css("opacity", "0.6");\n          liLastPage.css("opacity", "0.6");\n        }\n        if (pageNo > 1) {\n          liFirstPage.css("opacity", "1");\n          liPrevPage.css("opacity", "1");\n        } else {\n          liFirstPage.css("opacity", "0.6");\n          liPrevPage.css("opacity", "0.6");\n        }\n        if (TotalPageCount == 1) {\n          liFirstPage.css("opacity", "0.6");\n          liPrevPage.css("opacity", "0.6");\n          liNextPage.css("opacity", "0.6");\n          liLastPage.css("opacity", "0.6");\n        }\n      } else {\n        liFirstPage.css("opacity", "0.6");\n        liPrevPage.css("opacity", "0.6");\n        liNextPage.css("opacity", "0.6");\n        liLastPage.css("opacity", "0.6");\n      }\n    }\n    ;\n\n    /* function used to create Busy Indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $(\'<div class="vis-busyindicatorouterwrap" style="visibility: hidden;"></div>\');\n      $bsyDiv.append($(\'<div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div>\'));\n      setBusy(false);\n      $root.append($bsyDiv);\n    }\n    ;\n\n    /**\r\n     * function used to show/hide busy indicator\r\n     * @param {any} isBusy\r\n     */\n    function setBusy(isBusy) {\n      if (isBusy) {\n        $bsyDiv[0].style.visibility = "visible";\n      } else {\n        $bsyDiv[0].style.visibility = "hidden";\n      }\n    }\n    ;\n\n    /* function used to set the properties passed */\n    this.setProperties = function (TName, lbl, Dataobject, Counter, AD_Org_ID) {\n      Label = lbl;\n      tableName = TName;\n      Dataobject = Dataobject;\n      InsightGridCounter = Counter;\n      orgId = VIS.Utility.Util.getValueOfInt(AD_Org_ID);\n    };\n    this.Initialize = function () {\n      initializeComponent();\n    };\n\n    /* Privilized function */\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* function used to clear the variables and dispose the frame */\n    this.disposeComponent = function () {\n      self = null;\n      if (insightGrid != null) {\n        insightGrid.destroy();\n        insightGrid = null;\n      }\n      if ($root) $root.remove();\n      $root = null;\n      gridDiv = null;\n      $button1 = null;\n      $button2 = null;\n      insightGrid = null;\n      orgId = null;\n      Label = null;\n      columnsData = null;\n      Data = null;\n      ulPaging = null;\n      liFirstPage = null;\n      liPrevPage = null;\n      cmbPage = null;\n      liCurrPage = null;\n      liNextPage = null;\n      liLastPage = null;\n      divPaging = null;\n      pageNo = null;\n      TotalPageCount = null;\n      this.getRoot = null;\n      this.disposeComponent = null;\n    };\n  };\n\n  //Must Implement with same parameter\n  //self Invoking function\n  VAS.VAS_FinDInsightsGridView.prototype.init = function (windowNo, frame) {\n    //Assign to this Variable\n    this.frame = frame;\n    this.windowNo = windowNo;\n    frame.hideHeader(true); //hide header\n    var obj = this.Initialize();\n    this.frame.getContentGrid().append(this.getRoot());\n  };\n\n  //Must implement dispose\n  VAS.VAS_FinDInsightsGridView.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_FinDInsightsGridView.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_HighestSellProduct.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Created Widget To get Highest selling data of top 10 Product\r\n * chronological  : Development\r\n * Created Date   : 28 August 2024\r\n * Created by     : VIS0060\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_HighestSellProduct = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $(\'<div class="h-100 w-100">\');\n    var $divProduct = "",\n      $divCurrentRevenue = "",\n      $divLastRevenue = "";\n    var TopProductData = [];\n    var culture = new VIS.CultureSeparator();\n    var unit = null,\n      spnPageCount = null;\n    var prevPage = null;\n    var nextPage = null;\n    var widgetID = 0;\n    var count = 0;\n\n    /*Intialize function will intialize busy indiactor*/\n    this.initalize = function () {\n      createBusyIndicator();\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      $root.append(\'<div class="VAS-selling-container VAS-highest-selling-prod">\' + \'<div class="VAS-container-heading">\' + VIS.Msg.getMsg("VAS_HighestSellProduct") + \'</div>\' + \'<div class="VAS-org-col" id="VAS_divProduct_\' + widgetID + \'">\' + \'</div>\' + \'<div class="VAS-yearly-revenue">\' + \'<div class="VAS-lastRevenue" id="VAS_divLastYear_\' + widgetID + \'">\' + \'</div>\' + \'<div class="VAS-currentRevenue" id="VAS_divCurrentYear_\' + widgetID + \'">\' + \'</div>\' + \'<div class="VAS-pagination-sell">\' + \'<div class= "VAS-arrow-col">\' + \'<a href="javascript:void(0);"><span class="fa fa-arrow-left" id="VAS_Prev_\' + widgetID + \'"></span></a>\' + \'<a href="javascript:void(0);"><span class="fa fa-arrow-right" id="VAS_Next_\' + widgetID + \'"></span></a>\' + \'</div>\' + \'<div class="VAS-page-count" id="VAS_spnPageCount_\' + widgetID + \'">1 of 10</div>\' + \'</div>\' + \'</div>\' + \'</div>\');\n      $divProduct = $root.find("#VAS_divProduct_" + widgetID);\n      $divLastRevenue = $root.find("#VAS_divLastYear_" + widgetID);\n      $divCurrentRevenue = $root.find("#VAS_divCurrentYear_" + widgetID);\n      spnPageCount = $root.find("#VAS_spnPageCount_" + widgetID);\n      prevPage = $root.find("#VAS_Prev_" + widgetID);\n      nextPage = $root.find("#VAS_Next_" + widgetID);\n      prevPage.on(VIS.Events.onTouchStartOrClick, function () {\n        if (count > 0) {\n          $bsyDiv[0].style.visibility = "visible";\n          count--;\n          $divProduct.empty();\n          $divLastRevenue.empty();\n          $divCurrentRevenue.empty();\n          setProductData();\n        }\n      });\n      nextPage.on(VIS.Events.onTouchStartOrClick, function () {\n        if (count < TopProductData.length - 1) {\n          $bsyDiv[0].style.visibility = "visible";\n          count++;\n          $divProduct.empty();\n          $divLastRevenue.empty();\n          $divCurrentRevenue.empty();\n          setProductData();\n        }\n      });\n    };\n\n    /*This function will load data in widget */\n    this.intialLoad = function () {\n      $divProduct.empty();\n      $divLastRevenue.empty();\n      $divCurrentRevenue.empty();\n      count = 0;\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "Product/GetTopProductData", "", function (dr) {\n        if (dr != null) {\n          TopProductData = dr;\n          setProductData();\n        }\n        $bsyDiv[0].style.visibility = "hidden";\n      });\n    };\n    function setProductData() {\n      $divProduct.append(\'<div class="VAS-orgName-col">\' + \'<h1>#\' + (count + 1) + \'</h1>\' + \'<div class="VAS-org-name"><span>\' + TopProductData[count].Name + \'</span></div>\' + \'</div>\' + \'<img src="\' + (TopProductData[count].ImageUrl != "" ? VIS.Application.contextUrl + TopProductData[count].ImageUrl : VIS.Application.contextUrl + \'Areas/VAS/Content/Images/cube-icon.png\') + \'" alt="">\');\n      $divLastRevenue.append(\'<h1><span style="margin-right:0.2em;">\' + TopProductData[count].Symbol + \'</span>\' + formatLargeNumber(TopProductData[count].PreviousTotal, TopProductData[count].StdPrecision) + (unit != null ? \'<span>\' + unit + \'</span>\' : \'\') + \'<span class="VAS-sale-Qty">(\' + TopProductData[count].PreviousQty + \' \' + TopProductData[count].UOM + \')</span>\' + \'</h1><span>\' + VIS.Msg.getMsg("VAS_LastYear") + \'</span>\');\n      $divCurrentRevenue.append(\'<h1><span style="margin-right:0.2em;">\' + TopProductData[count].Symbol + \'</span>\' + formatLargeNumber(TopProductData[count].CurrentTotal, TopProductData[count].StdPrecision) + (unit != null ? \'<span>\' + unit + \'</span>\' : \'\') + \'<span class="VAS-sale-Qty"">(\' + TopProductData[count].CurrentQty + \' \' + TopProductData[count].UOM + \')</span>\' + \'</h1><span>\' + VIS.Msg.getMsg("VAS_CurrentYear") + \'</span>\');\n      if (count > 0) {\n        prevPage.css("opacity", "1");\n      } else {\n        prevPage.css("opacity", "0.6");\n      }\n      if (TopProductData.length - 1 > count) {\n        nextPage.css("opacity", "1");\n      } else {\n        nextPage.css("opacity", "0.6");\n      }\n      spnPageCount.text(count + 1 + VIS.Msg.getMsg("VAS_Of") + TopProductData.length);\n      $bsyDiv[0].style.visibility = "hidden";\n    }\n\n    /**\r\n     * This Function is responsible converting the value into million\r\n     * @param {any} number\r\n     * @param {any} stdPrecision\r\n     */\n    function formatLargeNumber(number, stdPrecision) {\n      if (number >= 1000000000000) {\n        /* Trillion*/\n        unit = VIS.Msg.getMsg("VAS_Trillion");\n        return (number / 1000000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000000000) {\n        /* Billion*/\n        unit = VIS.Msg.getMsg("VAS_Billion");\n        return (number / 1000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000000) {\n        /* Million*/\n        unit = VIS.Msg.getMsg("VAS_Million");\n        return (number / 1000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000) {\n        /* Thousand*/\n        unit = VIS.Msg.getMsg("VAS_Thousand");\n        return (number / 1000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else {\n        unit = null;\n        return number.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: stdPrecision,\n          maximumFractionDigits: stdPrecision\n        });\n      }\n    }\n\n    /**\r\n    * This Function is responsible for dividing total amount in array\r\n    * @param {any} AmtVal\r\n    */\n    function convertAmountToDotFormat(AmtVal) {\n      //Get decimal seperator\n      var isDotSeparator = culture.isDecimalSeparatorDot(window.navigator.language);\n      if (!isDotSeparator) {\n        if (AmtVal.contains(",")) {\n          TotalAmtArray = AmtVal.split(",");\n          TotalAmtArray[2] = ",";\n        }\n      } else {\n        TotalAmtArray = AmtVal.split(".");\n        TotalAmtArray[2] = ".";\n      }\n    }\n\n    /*This function will show busy indicator in widget */\n    function createBusyIndicator() {\n      $bsyDiv = $("<div class=\'vis-apanel-busy\'>");\n      $bsyDiv.css({\n        "position": "absolute",\n        "width": "98%",\n        "height": "97%",\n        \'text-align\': \'center\',\n        \'z-index\': \'999\'\n      });\n      $bsyDiv[0].style.visibility = "visible";\n      $root.append($bsyDiv);\n    }\n    ;\n\n    /*This function used to get root*/\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /*this function is used to refresh design and data of widget*/\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = "visible";\n      count = 0;\n      $self.intialLoad();\n    };\n  };\n  VAS.VAS_HighestSellProduct.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad();\n    }, 50);\n  };\n  VAS.VAS_HighestSellProduct.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n\n  /*this function is called when widget size changes*/\n  VAS.VAS_HighestSellProduct.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n\n  /*Used to dispose the variable*/\n  VAS.VAS_HighestSellProduct.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_HighestSellProduct.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_InvGrandTotalWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Created Widget To get AR/AP Invoice Data \r\n *                  of top 5 Business partner\r\n * chronological  : Development\r\n * Created Date   : 21 August 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_InvGrandTotalWidget = function () {\n    this.frame;\n    this.windowNo;\n    var $bsyDiv;\n    var $self = this;\n    var ctx = VIS.Env.getCtx();\n    var $YearBasedDataListLookUp = null;\n    var widgetID = null;\n    var unit = null;\n    var $root = $('<div class=\"h-100 w-100\">');\n    var $maindiv = null;\n    var TotalAmtArray = [];\n    var culture = new VIS.CultureSeparator();\n    var $dummDiv = null;\n    var RecCount = 0;\n    var listDesign = null;\n    var ExpectedRecordCount = 5;\n\n    /*Intialize function will intialize busy indiactor*/\n    this.initalize = function () {\n      //This function will get the reference id of list\n      GetColumnID();\n      createBusyIndicator();\n      createDummyDiv();\n      widgetID = VIS.Utility.Util.getValueOfInt(this.widgetInfo.AD_UserHomeWidgetID) != 0 ? this.widgetInfo.AD_UserHomeWidgetID : $self.windowNo;\n      var classTop5 = VIS.Env.getCtx().isSOTrx($self.windowNo) == true ? 'vas-igtwidg-customer-bgColor' : 'vas-igtwidg-vendor-bgColor';\n      $maindiv = $('<div class=\"vas-igtwidg-top-vendors-col ' + classTop5 + '\">');\n      //Getting list to fiter the data base on year\n      var HeadingComboDiv = $('<div class=\"d-flex justify-content-between\">');\n      var HeadingDiv = $('<div class= \"vas-igtwidg-vendors-heading\">' + (VIS.Env.getCtx().isSOTrx($self.windowNo) == true ? VIS.Msg.getMsg(\"VAS_Top5\") : VIS.Msg.getMsg(\"VAS_TopPurchase5\")) + '</div>');\n      YearBasedDataListDiv = $('<div class=\"VAS-YearBasedDataListDiv\">');\n      $YearBasedDataListDiv = $('<div class=\"input-group vis-input-wrap\">');\n      /* parameters are: context, windowno., coloumn id, display type, DB coloumn name, Reference key, Is parent, Validation Code*/\n      $YearBasedDataListLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.List, \"VAS_YearBasedData\", ColumnIds.AD_Reference_ID, false, null);\n      // Parameters are: columnName, mandatory, isReadOnly, isUpdateable, lookup,display length\n      $self.vYearBasedDataList = new VIS.Controls.VComboBox(\"VAS_YearBasedData\", true, false, true, $YearBasedDataListLookUp, 20);\n      $self.vYearBasedDataList.setValue(\"02\");\n      var $YearBasedDataListControlWrap = $('<div class=\"vis-control-wrap\">');\n      $YearBasedDataListDiv.append($YearBasedDataListControlWrap);\n      $YearBasedDataListControlWrap.append($self.vYearBasedDataList.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' '));\n      $YearBasedDataListDiv.append($YearBasedDataListControlWrap);\n      YearBasedDataListDiv.append($YearBasedDataListDiv);\n      HeadingComboDiv.append(HeadingDiv).append(YearBasedDataListDiv);\n      $maindiv.append(HeadingComboDiv);\n      $self.vYearBasedDataList.fireValueChanged = function () {\n        RecCount = 0;\n        $self.vYearBasedDataList.setValue($self.vYearBasedDataList.getValue());\n        $maindiv.find('#vas_listContainer_' + widgetID).remove();\n        $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n        $bsyDiv[0].style.visibility = \"visible\";\n        $self.intialLoad();\n      };\n      $bsyDiv[0].style.visibility = \"visible\";\n    };\n    function createDummyDiv() {\n      $dummDiv = '<div class=\"vas-igtwidg-invoices-box vas-idtwidg-emptydiv\">' + '<div class=\"vas-igtwidg-invoices-detail\" >' + '<div class=\"vas-igtwidg-thumb-w-txt\">' + '<img src=\"\" alt=\"\" class=\"vas-igtwidg-emptyimg\">' + '<div class=\"vas-igtwidg-vendor-w-date\">' + '<div class=\"vas-igtwidg-vendor-name\"></div>' + '<div class=\"vas-igtwidg-invoiceDate\"></div>' + '</div>';\n      '</div>' + '<div class=\"vas-igtwidg-invoiceTotalAmt\"><span class=\"vas-igtwidg-amt-val\"></span><span class=\"vas-igtwidg-cur-symbol\"><span></span></span></div>' + '</div>' + '</div>';\n    }\n    ;\n    function bindDummyDiv(j) {\n      for (var i = 0; i < j; i++) {\n        listDesign.append($dummDiv);\n      }\n      ;\n    }\n    ;\n\n    /*This function will load data in widget */\n    this.intialLoad = function () {\n      var hue = Math.floor(Math.random() * (360 - 0)) + 0;\n      var v = Math.floor(Math.random() * (75 - 60 + 1)) + 60;\n      var pastel = 'hsl(' + hue + ', 100%,' + v + '%)';\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetInvTotalGrandData\", {\n        \"ISOtrx\": VIS.Env.getCtx().isSOTrx($self.windowNo),\n        \"ListValue\": $self.vYearBasedDataList.getValue()\n      }, function (dr) {\n        var gridDataResult = dr;\n        if (gridDataResult != null && gridDataResult.length > 0) {\n          InitailizeMessage();\n          // Create the container for the list\n          listDesign = $('<div class=\"vas-igtwidg-vendors-listing\" id=\"vas_listContainer_' + widgetID + '\">');\n\n          // Iterate through each item in the gridDataResult\n          for (var i = 0; i < gridDataResult.length; i++) {\n            RecCount += 1;\n            var custChar = '';\n            var custNameArr = gridDataResult[i].Name.trim().split(' ');\n\n            // Generate customer initials\n            custChar = custNameArr[0].substring(0, 1).toUpperCase();\n            if (custNameArr.length > 1) {\n              custChar += custNameArr[custNameArr.length - 1].substring(0, 1).toUpperCase();\n            } else {\n              custChar = custNameArr[0].substring(0, 2).toUpperCase();\n            }\n\n            //convertAmountToDotFormat(formatLargeNumber(gridDataResult[i].GrandTotalAmt, gridDataResult[i].stdPrecision));\n            // Create the widget data design element\n            var widgetDataDesign = '<div class=\"vas-igtwidg-invoices-box\">' + '<div class= \"vas-igtwidg-invoices-detail\">' + '<div class=\"vas-igtwidg-thumb-w-txt\">';\n            if (gridDataResult[i].ImageUrl != null) {\n              // Append image if available\n              widgetDataDesign += '<img class=\"vas-businessPartnerImg\" alt=\"' + gridDataResult[i].ImageUrl + '\" src=\"' + VIS.Application.contextUrl + gridDataResult[i].ImageUrl + '\">';\n            } else {\n              // Append initial if image is not available\n              widgetDataDesign += '<div style=\"float:left; background-color:' + pastel + '\" class=\"vas-igtwidg-img-icon\">' + '<span style=\"font-size: 16px;\">' + custChar + '</span>' + '</div>';\n            }\n            widgetDataDesign += '<div class=\"vas-igtwidg-vendor-w-date\">' + '<div class=\"vas-igtwidg-vendor-name\">' + gridDataResult[i].Name + '</div>' +\n            //'<div class=\"vas-igtwidg-invoiceDate\">' + VAS.translatedTexts.VAS_Since + ' ' + VIS.Utility.Util.getValueOfDate(gridDataResult[i].SinceDate).toLocaleDateString() + '</div>' +\n            '</div>' + '</div >';\n            //if (unit != null || unit == undefined) {\n            widgetDataDesign += '<div class=\"vas-igtwidg-invoiceTotalAmt\"><span class=\"vas-igtwidg-amt-val\">' + (gridDataResult[i].Symbol.length != 3 ? '<span class=\"vas-vaswidg-Symbol\">' + gridDataResult[i].Symbol + '</span>' : '') + formatLargeNumber(gridDataResult[i].GrandTotalAmt, gridDataResult[i].stdPrecision) + '<span style=\"font-weight: 600;padding-left:1px;\">' + unit + '</span>';\n            '<span>' + (gridDataResult[i].Symbol.length == 3 ? ' ' + gridDataResult[i].Symbol : '') + '</span>';\n            //widgetDataDesign += '<div class=\"vas-igtwiginvmillion\">' + TotalAmtArray[1] + '<span style=\"font-weight: 600;padding-left:1px;\">' + unit + '</span>'\n            //    + (gridDataResult[i].Symbol.length == 3 ? ' ' + gridDataResult[i].Symbol : '') + '</div>'\n            //}\n            //else {\n            //    widgetDataDesign += '<span class=\"vas-igtwidg-cur-symbol\"> ' + TotalAmtArray[1] + (gridDataResult[i].Symbol.length == 3 ? '<span>' + gridDataResult[i].Symbol + '</span>':'') +'</span></div> '\n            //}\n            widgetDataDesign += '</div >' + '</div >';\n\n            // Append the widget data design to the list container\n            listDesign.append(widgetDataDesign);\n          }\n          if (RecCount < ExpectedRecordCount) {\n            bindDummyDiv(ExpectedRecordCount - RecCount);\n          }\n          $maindiv.append(listDesign);\n          $root.append($maindiv);\n        } else {\n          $maindiv.append('<div class=\"vas-igwidg-notfounddiv\" id=\"vas_norecordcont_' + widgetID + '\">' + VIS.Msg.getMsg(\"VAS_RecordNotFound\") + '</div>');\n          $root.append($maindiv);\n        }\n        $bsyDiv[0].style.visibility = \"hidden\";\n      });\n    };\n    /*This function will show busy indicator in widget */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $bsyDiv.css({\n        \"position\": \"absolute\",\n        \"width\": \"98%\",\n        \"height\": \"97%\",\n        'text-align': 'center',\n        'z-index': '999'\n      });\n      $bsyDiv[0].style.visibility = \"visible\";\n      $root.append($bsyDiv);\n    }\n    ;\n    /*This function used translate message*/\n    function InitailizeMessage() {\n      /*Inisalised Element for array*/\n      var elements = [\"VAS_Since\", \"VAS_Top5\", \"VAS_Million\", \"VAS_Trillion\", \"VAS_Billion\", \"VAS_Thousand\", \"VAS_TopPurchase5\"];\n      VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    }\n    /**\r\n     * This Function is responsible converting the value into million\r\n     * @param {any} number\r\n     * @param {any} stdPrecision\r\n     */\n    function formatLargeNumber(number, stdPrecision) {\n      var isNegative = number < 0;\n      var number = Math.abs(number);\n      var formattedNumber = 0;\n      if (number >= 1000000000000) {\n        /* Trillion*/\n        unit = VAS.translatedTexts.VAS_Trillion;\n        formattedNumber = (number / 1000000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000000000) {\n        /* Billion*/\n        unit = VAS.translatedTexts.VAS_Billion;\n        ;\n        formattedNumber = (number / 1000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000000) {\n        /* Million*/\n        unit = VAS.translatedTexts.VAS_Million;\n        formattedNumber = (number / 1000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000) {\n        /* Thousand*/\n        unit = VAS.translatedTexts.VAS_Thousand;\n        formattedNumber = (number / 1000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else {\n        unit = '';\n        formattedNumber = number.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: stdPrecision,\n          maximumFractionDigits: stdPrecision\n        });\n      }\n      if (isNegative) {\n        formattedNumber = '-' + formattedNumber;\n      }\n      return formattedNumber;\n    }\n    /**\r\n    * This function is used to get the refernce id of list\r\n    */\n    var GetColumnID = function () {\n      ColumnIds = VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetColumnID\", {\n        \"refernceName\": \"VAS_YearBasedData\"\n      }, null);\n    };\n    /**\r\n    * This Function is responsible for dividing total amount in array\r\n    * @param {any} AmtVal\r\n    */\n    //function convertAmountToDotFormat(AmtVal) {\n    //    //Get decimal seperator\n    //    var isDotSeparator = culture.isDecimalSeparatorDot(window.navigator.language);\n\n    //    if (!isDotSeparator) {\n    //        if (AmtVal.contains(\",\")) {\n    //            TotalAmtArray = AmtVal.split(\",\")\n    //            TotalAmtArray[2] = \",\";\n    //        }\n    //    }\n    //    else {\n    //        TotalAmtArray = AmtVal.split(\".\")\n    //        TotalAmtArray[2] = \".\";\n    //    }\n    //}\n    /*This function used to get root*/\n    this.getRoot = function () {\n      return $root;\n    };\n    /*this function is used to refresh design and data of widget*/\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      RecCount = 0;\n      $maindiv.find('#vas_listContainer_' + widgetID).remove();\n      $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n      $self.intialLoad();\n    };\n  };\n  VAS.VAS_InvGrandTotalWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad();\n    }, 50);\n  };\n  VAS.VAS_InvGrandTotalWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  /*this function is called when widget size changes*/\n  VAS.VAS_InvGrandTotalWidget.prototype.widgetSizeChange = function (widget) {\n    //this.getRoot().css(\"height\", widget.height);\n    //this.getRoot().css(\"width\", widget.width);\n    this.widgetInfo = widget;\n  };\n  /*Used to dispose the variable*/\n  VAS.VAS_InvGrandTotalWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_InvGrandTotalWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_InvoiceMatchedTabPanel.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get Invoice Matched Data\r\n * chronological  : Development\r\n * Created Date   : 16 November 2024\r\n * Created by     : VIS_045\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_InvoiceMatchedTabPanel = function () {\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var ctx = this.ctx;\n    var pageNo = 1;\n    var pageSize = 10;\n    var $self = this;\n    var TotalPageCount = 0;\n    var C_Invoice_ID = 0;\n    var ulPaging = null;\n    var liFirstPage = null;\n    var liPrevPage = null;\n    var cmbPage = null;\n    var liCurrPage = null;\n    var liNextPage = null;\n    var liLastPage = null;\n    var divPaging = null;\n    var TabPaneldesign = null;\n    var elements = ["VAS_Quantity", "VAS_PO", "VAS_GRN", "VAS_Matched", "VAS_UnMatched"];\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    var $root = $(\'<div class = "vas-invmatch-Data-root"></div>\');\n    var wrapperDiv = $("<div class =\'vas-invmatch-DataWrapper\'></div>");\n    var divPaging = $(\'<div class="vas-invmatch-data-Paging mr-3">\');\n    this.init = function () {\n      createBusyIndicator();\n      ScheduleDataPanel();\n      $root.append(wrapperDiv);\n      createPageSettings();\n      $root.append(divPaging);\n    };\n\n    //Function defined to append design\n    function ScheduleDataPanel() {\n      wrapperDiv.append(\'<div class="vas-invmatch-DataListGroup">\' + \'<div id="VAS-ScheduleData_\' + $self.windowNo + \'" class="VAS-ScheduleData mb-2">\' + \'</div>\' + \'</div>\');\n    }\n    ;\n\n    /**\r\n     *  function used to reset the paging according to the \r\n     *  current page count \r\n     * @param {any} TotalPageCount\r\n     */\n    function resetPageCtrls(TotalPageCount) {\n      cmbPage.empty();\n      if (TotalPageCount > 0) {\n        for (var i = 0; i < TotalPageCount; i++) {\n          cmbPage.append($("<option value=" + (i + 1) + ">" + (i + 1) + "</option>"));\n        }\n        cmbPage.val(pageNo);\n        if (TotalPageCount > pageNo) {\n          liNextPage.css("opacity", "1");\n          liLastPage.css("opacity", "1");\n        } else {\n          liNextPage.css("opacity", "0.6");\n          liLastPage.css("opacity", "0.6");\n        }\n        if (pageNo > 1) {\n          liFirstPage.css("opacity", "1");\n          liPrevPage.css("opacity", "1");\n        } else {\n          liFirstPage.css("opacity", "0.6");\n          liPrevPage.css("opacity", "0.6");\n        }\n        if (TotalPageCount == 1) {\n          liFirstPage.css("opacity", "0.6");\n          liPrevPage.css("opacity", "0.6");\n          liNextPage.css("opacity", "0.6");\n          liLastPage.css("opacity", "0.6");\n        }\n      } else {\n        liFirstPage.css("opacity", "0.6");\n        liPrevPage.css("opacity", "0.6");\n        liNextPage.css("opacity", "0.6");\n        liLastPage.css("opacity", "0.6");\n      }\n    }\n    ;\n\n    /*function is used to create the paging div*/\n    function createPageSettings() {\n      ulPaging = $(\'<ul class="vis-statusbar-ul">\');\n      liFirstPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-shiftleft" title="First Page" style="opacity: 0.6;"></i></div></li>\');\n      liPrevPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-pageup" title="Page Up" style="opacity: 0.6;"></i></div></li>\');\n      cmbPage = $(\'<select>\');\n      liCurrPage = $(\'<li>\').append(cmbPage);\n      liNextPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-pagedown" title="Page Down" style="opacity: 0.6;"></i></div></li>\');\n      liLastPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-shiftright" title="Last Page" style="opacity: 0.6;"></i></div></li>\');\n      ulPaging.append(liFirstPage).append(liPrevPage).append(liCurrPage).append(liNextPage).append(liLastPage);\n      divPaging.append(ulPaging);\n      pageEvents();\n    }\n    ;\n\n    /* function used to create click events for the paging arrows */\n    function pageEvents() {\n      liFirstPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo = 1;\n          $self.getInvoiceLineData(C_Invoice_ID);\n        }\n      });\n      liPrevPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo--;\n          $self.getInvoiceLineData(C_Invoice_ID);\n        }\n      });\n      liNextPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo++;\n          $self.getInvoiceLineData(C_Invoice_ID);\n        }\n      });\n      liLastPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo = parseInt(cmbPage.find("Option:last").val());\n          $self.getInvoiceLineData(C_Invoice_ID);\n        }\n      });\n      cmbPage.on("change", function () {\n        pageNo = cmbPage.val();\n        $self.getInvoiceLineData(C_Invoice_ID);\n      });\n    }\n    ;\n\n    /*This function is used to get invoice schedule data*/\n    this.getInvoiceLineData = function (recordID) {\n      $bsyDiv[0].style.visibility = "visible";\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS/PoReceipt/GetInvoiceLineMatchData",\n        type: "GET",\n        dataType: "json",\n        contentType: "application/json; charset=utf-8",\n        data: {\n          InvoiceId: recordID,\n          pageNo: pageNo,\n          pageSize: pageSize\n        },\n        success: function (data) {\n          wrapperDiv.find(\'#VAS-ScheduleData_\' + $self.windowNo).empty();\n          wrapperDiv.find(\'#vas_norecordcont_\' + $self.windowNo).remove();\n          if (JSON.parse(data) != "") {\n            data = JSON.parse(data);\n            if (data != null && data.length > 0) {\n              TotalPageCount = Math.ceil(data[0].RecordCount / pageSize);\n              for (i = 0; i < data.length; i++) {\n                TabPaneldesign = "";\n                let OrderClass = data[i].C_OrderLine_ID === 0 ? "vas-invmatch-DataElementValue vas-invmatch-unmatched" : "vas-invmatch-DataElementValue vas-invmatch-matched";\n                let grnClass = data[i].M_InOutLine_ID === 0 ? "vas-invmatch-DataElementValue vas-invmatch-unmatched" : "vas-invmatch-DataElementValue vas-invmatch-matched";\n                if (i == 0 && (data[i].DiscrepancyCount > 0 || data[i].TotalAdvanceAmt != 0)) {\n                  let Values;\n                  if (data[i].DiscrepancyCount > 0) {\n                    Values = VIS.Msg.getMsg("VAS_DiscrepancyFound") + data[i].DiscrepancyCount + VIS.Msg.getMsg("VAS_DiscrepancyLines");\n                  }\n                  if (data[i].TotalAdvanceAmt != 0) {\n                    if (VIS.Utility.Util.getValueOfString(Values) == "") {\n                      Values = data[i].TotalAdvanceAmt + VIS.Msg.getMsg("VAS_AdvancePayNotPaid");\n                    } else {\n                      Values += data[i].TotalAdvanceAmt + VIS.Msg.getMsg("VAS_AdvancePayNotPaid");\n                    }\n                  }\n                  TabPaneldesign = \'<div class="vas-invmatch-DiscrepancyFont"><span class="vas-invmatch-discrepancytextcolor">\' + Values + \'</span></div>\';\n                }\n                TabPaneldesign += \'<div data-C_Invoiceline_ID="\' + data[i].C_Invoiceline_ID + \'" class="vas-invmatch-datalist">\' + \'<div class="vas-invmatch-DataListItem mb-2 vas-invmatch-DataListItem-block">\';\n                let Discrepancy = data[i].IsDiscrepancy;\n                if (Discrepancy) {\n                  TabPaneldesign += \'<span class="vas-invmatch-DataListNotPaid">\' + VIS.Msg.getMsg("VAS_Discrepancy") + \'</span>\';\n                } else {\n                  TabPaneldesign += \'<span class="vas-invmatch-DataListPaid">\' + VIS.Msg.getMsg("VAS_Matched") + \'</span>\';\n                }\n                TabPaneldesign += \'<div class="vas-invmatch-Data-sglItem mb-2" style="flex-direction:column">\' + \'<div class="vas-invmatch-headerRow">\' + \'<span class="" title="\' + VIS.Msg.getMsg("VAS_LineNo") + \'">\' + data[i].Line + \'</span>\' + \'<span class="font-weight-bold" style="margin-left:25px" title="\' + VIS.Msg.getMsg("VAS_Product") + \'">\' + data[i].ProductName + \'</span>\' + \'</div>\';\n                if (!Discrepancy) {\n                  TabPaneldesign += \'<div class="vas-invmatch-Qty">\' + \'<span>\' + VIS.Msg.getMsg("VAS_Match-QtyOrder") + data[i].QtyOrdered.toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].UOMPrecision,\n                    maximumFractionDigits: data[i].UOMPrecision\n                  }) + \';\' + VIS.Msg.getMsg("VAS_Match-QtyDeliver") + data[i].OrderDelivered.toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].UOMPrecision,\n                    maximumFractionDigits: data[i].UOMPrecision\n                  }) + \';\' + VIS.Msg.getMsg("VAS_Match-QtyInvoice") + data[i].QtyInvoiced.toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].UOMPrecision,\n                    maximumFractionDigits: data[i].UOMPrecision\n                  }) + \'</span>\' + \'</div>\';\n                }\n\n                // need to insert div\n                TabPaneldesign += \'</div> \';\n                if (Discrepancy) {\n                  TabPaneldesign += \'<div class="vas-invmatch-Data-sglItem vas-invmatch-ExpectedMargin mb-2">\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="vas-invmatch-DataElementValue vas-invmatch-setCol1Width">&nbsp;</span>\' + \'</div>\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="vas-vas-invmatch-DataElementTTl font-weight-bold">\' + VIS.Msg.getMsg("VAS_Expected") + \'</span>\' + \'</div>\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="vas-vas-invmatch-DataElementTTl font-weight-bold">\' + VIS.Msg.getMsg("VAS_Actual") + \'</span>\' + \'</div>\' + \'</div>\';\n                  let dataElementValueClass = "vas-invmatch-DataElementValue text-right";\n                  /*if (data[i].C_OrderLine_ID != 0) {*/\n                  if (data[i].DocStatus == \'CO\' || data[i].DocStatus == \'CL\') {\n                    if (data[i].ExpectedOrder < 0) {\n                      dataElementValueClass = "vas-invmatch-DataElementValue text-right vas-invmatch-notMatched";\n                    }\n                  } else if (data[i].ExpectedOrder - data[i].QtyInvoiced < 0) {\n                    dataElementValueClass = "vas-invmatch-DataElementValue text-right vas-invmatch-notMatched";\n                  }\n                  /*}*/\n                  TabPaneldesign += \'<div class="vas-invmatch-Data-sglItem vas-invmatch-DataRow mb-2">\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="vas-invmatch-DataElementValue">\' + VIS.Msg.getMsg("VAS_Order") + \'</span>\' + \'</div>\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="\' + dataElementValueClass + \'" title="\' + VIS.Msg.getMsg("VAS_OrderedQty") + \'">\' + (data[i].ExpectedOrder + (data[i].DocStatus == \'CO\' || data[i].DocStatus == \'CL\' ? data[i].QtyInvoiced : 0)).toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].UOMPrecision,\n                    maximumFractionDigits: data[i].UOMPrecision\n                  }) + \'</span>\' + \'</div>\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="\' + dataElementValueClass + \'" title="\' + VIS.Msg.getMsg("VAS_InvoicedQty") + \'">\' + data[i].QtyInvoiced.toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].UOMPrecision,\n                    maximumFractionDigits: data[i].UOMPrecision\n                  }) + \'</span>\' + \'</div>\' + \'</div>\';\n                  dataElementValueClass = "vas-invmatch-DataElementValue text-right";\n                  if (data[i].DocStatus == \'CO\' || data[i].DocStatus == \'CL\') {\n                    if (data[i].ExpectedGRN < 0) {\n                      dataElementValueClass = "vas-invmatch-DataElementValue text-right vas-invmatch-notMatched";\n                    }\n                  } else if (data[i].ExpectedGRN - data[i].QtyInvoiced < 0) {\n                    dataElementValueClass = "vas-invmatch-DataElementValue text-right vas-invmatch-notMatched";\n                  }\n                  TabPaneldesign += \'<div class="vas-invmatch-Data-sglItem vas-invmatch-DataRow mb-2">\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="vas-invmatch-DataElementValue">\' + VIS.Msg.getMsg("VAS_GRN") + \'</span>\' + \'</div>\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="\' + dataElementValueClass + \'" title="\' + VIS.Msg.getMsg("VAS_MovementQty") + \'">\' + (data[i].ExpectedGRN + (data[i].DocStatus == \'CO\' || data[i].DocStatus == \'CL\' ? data[i].QtyInvoiced : 0)).toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].UOMPrecision,\n                    maximumFractionDigits: data[i].UOMPrecision\n                  }) + \'</span>\' + \'</div>\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="\' + dataElementValueClass + \'" title="\' + VIS.Msg.getMsg("VAS_InvoicedQty") + \'">\' + data[i].QtyInvoiced.toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].UOMPrecision,\n                    maximumFractionDigits: data[i].UOMPrecision\n                  }) + \'</span>\' + \'</div>\' + \'</div>\';\n                  dataElementValueClass = "vas-invmatch-DataElementValue text-right";\n                  if (data[i].C_OrderLine_ID != 0) {\n                    if (data[i].OrderPrice - data[i].InvoicePrice < 0) {\n                      dataElementValueClass = "vas-invmatch-DataElementValue text-right vas-invmatch-notMatched";\n                    }\n                  }\n                  TabPaneldesign += \'<div class="vas-invmatch-Data-sglItem vas-invmatch-DataRow mb-2">\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="vas-invmatch-DataElementValue">\' + VIS.Msg.getMsg("VAS_Price") + \'</span>\' + \'</div>\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="\' + dataElementValueClass + \'" title="\' + VIS.Msg.getMsg("VAS_OrderPrice") + \'">\' + data[i].OrderPrice.toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].InvoicePriceListPrecision,\n                    maximumFractionDigits: data[i].InvoicePriceListPrecision\n                  }) + \'</span>\' + \'</div>\' + \'<div class="vas-scheduleDataElement vas-invmatch-setCol1Width">\' + \'<span class="\' + dataElementValueClass + \'" title="\' + VIS.Msg.getMsg("VAS_InvoicePrice") + \'">\' + data[i].InvoicePrice.toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].InvoicePriceListPrecision,\n                    maximumFractionDigits: data[i].InvoicePriceListPrecision\n                  }) + \'</span>\' + \'</div>\' + \'</div>\';\n                  TabPaneldesign += \'<div class="vas-invmatch-Data-sglItem vas-invmatch-DataRow mb-2" style="background-color:white">\' + \'<div class="vas-scheduleDataElement">\' + \'<span class="vas-invmatch-Qty">\' + VIS.Msg.getMsg("VAS_Match-QtyOrder") + data[i].QtyOrdered.toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].UOMPrecision,\n                    maximumFractionDigits: data[i].UOMPrecision\n                  }) + \';\' + VIS.Msg.getMsg("VAS_Match-QtyDeliver") + data[i].OrderDelivered.toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].UOMPrecision,\n                    maximumFractionDigits: data[i].UOMPrecision\n                  }) + \';\' + VIS.Msg.getMsg("VAS_Match-QtyInvoice") + data[i].QtyInvoiced.toLocaleString(window.navigator.language, {\n                    minimumFractionDigits: data[i].UOMPrecision,\n                    maximumFractionDigits: data[i].UOMPrecision\n                  }) + \'</span>\' + \'</div></div>\';\n                }\n                TabPaneldesign += \'</div></div>\';\n\n                //Appending design to wrapperDiv\n                wrapperDiv.find(\'#VAS-ScheduleData_\' + $self.windowNo).append(TabPaneldesign);\n              }\n              $root.find(\'.vas-invmatch-data-Paging\').show();\n              resetPageCtrls(TotalPageCount);\n            }\n          } else {\n            wrapperDiv.append(\'<div class="vas-igwidg-notfounddiv" id="vas_norecordcont_\' + $self.windowNo + \'">\' + VIS.Msg.getMsg("VAS_NoMatchDataFound") + \'</div>\');\n            $root.find(\'.vas-invmatch-data-Paging\').hide();\n          }\n          $bsyDiv[0].style.visibility = "hidden";\n        },\n        error: function (eror) {\n          $bsyDiv[0].style.visibility = "hidden";\n          console.log(eror);\n        }\n      });\n    };\n\n    /*This function will show busy indicator in widget */\n    function createBusyIndicator() {\n      $bsyDiv = $("<div class=\'vis-apanel-busy\'>");\n      $bsyDiv.css({\n        "position": "absolute",\n        "width": "98%",\n        "height": "97%",\n        \'text-align\': \'center\',\n        \'z-index\': \'999\'\n      });\n      $bsyDiv[0].style.visibility = "visible";\n      $root.append($bsyDiv);\n    }\n    ;\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.VAS_InvoiceMatchedTabPanel.prototype.startPanel = function (windowNo, curTab) {\n      this.windowNo = windowNo;\n      this.curTab = curTab;\n      $self.windowNo = windowNo;\n      this.init();\n    };\n    /* This function to update tab panel based on selected record */\n    VAS.VAS_InvoiceMatchedTabPanel.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      C_Invoice_ID = recordID;\n      pageNo = 1;\n      pageSize = 10;\n      this.selectedRow = selectedRow;\n      this.getInvoiceLineData(recordID);\n    };\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.VAS_InvoiceMatchedTabPanel.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n    /* Disposing all variables from memory */\n    VAS.VAS_InvoiceMatchedTabPanel.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n      lblTitle = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_InvoiceMatchedTabPanel.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_InvoiceSummary.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get Invoice Summary Data\r\n * chronological  : Development\r\n * Created Date   : 16 September 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_InvoiceSummary = function () {\n    this.windowNo;\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var ctx = this.ctx;\n    var self = this;\n    var $root = $(\'<div class="root"></div>\');\n    var wrapperDiv = null;\n    this.init = function () {\n      wrapperDiv = $(\'<div class ="vas-apTaxWrapper">\' + \'<div id="VAS-TaxDetail_\' + self.windowNo + \'" class="VAS-summary-details mb-2">\' + \'</div></div>\');\n      $root.append(wrapperDiv);\n    };\n\n    /*This function is used to get Order tax data*/\n    this.getInvoiceSummary = function (recordID) {\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "VAS/PoReceipt/GetTaxData", {\n        "InvoiceID": recordID\n      }, function (data) {\n        wrapperDiv.find(\'#VAS-TaxDetail_\' + self.windowNo).empty();\n        if (data != null && data.length > 0) {\n          wrapperDiv.find(\'#VAS-TaxDetail_\' + self.windowNo).append($(\'<div class="VAS-summary-header">\' + \'<span class="">\' + VIS.Msg.getMsg("VAS_SubTotal") + ":" + \'</span>\' + \'</div>\'));\n          wrapperDiv.find(\'#VAS-TaxDetail_\' + self.windowNo).append($(\'<div class="VAS-summary-info">\' + \'<span class="VAS-summary-amount" style="font-weight: 600;">\' + data[0].CurSymbol + " " + data[0].TotalLines.toLocaleString(window.navigator.language, {\n            minimumFractionDigits: data[0].stdPrecision,\n            maximumFractionDigits: data[0].stdPrecision\n          }) + \'</span>\' + \'</div>\'));\n          for (i = 0; i < data.length; i++) {\n            wrapperDiv.find(".VAS-summary-header").append(\'<span class="">\' + VIS.Utility.encodeText(data[i].TaxName) + ":" + \'</span>\');\n            wrapperDiv.find(".VAS-summary-info").append(\'<span class="VAS-summary-amount">\' + data[0].CurSymbol + " " + data[i].TaxAmt.toLocaleString(window.navigator.language, {\n              minimumFractionDigits: data[0].stdPrecision,\n              maximumFractionDigits: data[0].stdPrecision\n            }) + \'</span>\');\n          }\n          if (data[0].TCSAmount != 0) {\n            wrapperDiv.find(".VAS-summary-header").append(\'<span class="">\' + VIS.Msg.getMsg("VAS_TCSTotal") + ":" + \'</span>\');\n            wrapperDiv.find(".VAS-summary-info").append(\'<span class="VAS-summary-amount">\' + data[0].CurSymbol + " " + data[0].TCSAmount.toLocaleString(window.navigator.language, {\n              minimumFractionDigits: data[0].stdPrecision,\n              maximumFractionDigits: data[0].stdPrecision\n            }) + \'</span>\');\n          }\n          wrapperDiv.find(".VAS-summary-header").append(\'<span class="">\' + VIS.Msg.getMsg("GrandTotal") + ":" + \'</span>\');\n          wrapperDiv.find(".VAS-summary-info").append(\'<span class="VAS-summary-amount" style="font-weight: 600;font-size: 1rem;border-top: 1px solid rgba(var(--v-c-on-secondary), 1);">\' + data[0].CurSymbol + " " + data[0].GrandTotal.toLocaleString(window.navigator.language, {\n            minimumFractionDigits: data[0].stdPrecision,\n            maximumFractionDigits: data[0].stdPrecision\n          }) + \'</span>\');\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.VAS_InvoiceSummary.prototype.startPanel = function (windowNo, curTab) {\n      self.windowNo = windowNo;\n      self.curTab = curTab;\n      self.init();\n    };\n\n    /* This function to update tab panel based on selected record */\n    VAS.VAS_InvoiceSummary.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getInvoiceSummary(recordID);\n    };\n\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.VAS_InvoiceSummary.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n\n    /* Disposing all variables from memory */\n    VAS.VAS_InvoiceSummary.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_InvoiceSummary.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_LowestPrMonthlySalesWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Created Widget to get top 10 Lowest selling\r\n *                  Product\r\n * chronological  : Development\r\n * Created Date   : 09 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_LowestPrMonthlySalesWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var ctx = this.ctx;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    var orgControlDiv;\n    var unit = null;\n    var sqlWHERE = \"\";\n    var OrganizationUnit = 0;\n    var stdPrecision = 0;\n    var symbol = \"\";\n    var $vOrg;\n    function createStructure(widgetID) {\n      var currentYear = new Date().getFullYear();\n      var lastYear = currentYear - 1;\n      var $contentContainer = $('<div class=\"VAS-org-lowest-unitsales-col VAS-content-container vis-formouterwrpdiv\">' + '<div class=\"VAS-sales-heading\">' + VIS.Msg.getMsg(\"VAS_LowestSellingProduct\") + '</div>' + '<div class=\"VAS-organization-block\">' + '<div id=\"VAS_Org_' + widgetID + '\" class=\"VAS_OrgUnitControl\"></div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>' + '<div class=\"VAS-graph-details\">' + '<div class=\"VAS-salesGraph-heading\"><span id=\"VAS_ProductRank_' + widgetID + '\">#1</span>&nbsp<span id=\"VAS_ProductName_' + widgetID + '\"> Product Name</span></div>' + '<div class=\"VAS-totalSales-col\">' + '<div class=\"VAS-startSale-box\">' + '<div class=\"VAS-yearTxt\"><span>' + lastYear + '<span></div>' + '<div class=\"VAS-totalSale\"><span id=\"VAS_LastYearSales_' + widgetID + '\">520 €</span></div>' + '</div>' + '<div class=\"VAS-endSale-box\">' + '<div class=\"VAS-yearSale-col\">' + '<div class=\"VAS-yearTxt\"><span>' + currentYear + '<span></div>' + '<div class=\"VAS-totalSale\"><span id=\"VAS_CurrentSales_' + widgetID + '\">520 €</span></div>' + '</div>' + '<div class=\"VAS-graph-result\">' + '<span class=\"vis vis-trending-down\"></span>' + '<div class=\"repfix-resultTxt\">-10.32%</div>' + '</div>' + '</div>' + '</div>' + '<div class=\"VAS-graph-col VAS-chart-container\" style=\"display: flex; align-items: center; justify-content: center;\">' + '</div>' + /*           '<div class=\"VAS-pagination-container\"></div>' +*/\n      '</div>');\n      orgControlDiv = $contentContainer.find('#VAS_Org_' + widgetID);\n      return $contentContainer;\n    }\n\n    //This function is used to create the VIS controls\n    function createControls() {\n      /* VIS control for Organization (Table) */\n      orgControlDiv.empty();\n      orgDivInputWrap = $('<div class=\"input-group vis-input-wrap\">');\n      $lookupOrg = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.Search, \"AD_Org_ID\", 0, false, sqlWHERE);\n      $vOrg = new VIS.Controls.VTextBoxButton(\"AD_Org_ID\", false, false, true, VIS.DisplayType.Search, $lookupOrg);\n\n      //$orgButtonWrap = $('<div class=\"input-group-append\">');\n      $orgControlWrap = $('<div class=\"vis-control-wrap\">');\n      orgDivInputWrap.append($orgControlWrap);\n      $orgControlWrap.append($vOrg.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.Msg.getMsg(\"VAS_OrgUnit\") + '</label><span class= \"vis-ev-ctrlinfowrap\"</span>');\n\n      //$orgButtonWrap.append($vOrg.getBtn(0));\n      //orgDivInputWrap.append($orgButtonWrap);\n      orgControlDiv.append(orgDivInputWrap);\n      $vOrg.fireValueChanged = function () {\n        OrganizationUnit = $vOrg.getValue() == null ? 0 : $vOrg.getValue();\n        $self.intialLoad();\n      };\n    }\n    var productList = [];\n    var chartInstance;\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      // Create busy indicator\n      createBusyIndicator();\n      var demo = createStructure(widgetID);\n      $root.append(demo);\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function () {\n      // Show busy indicator\n      //$bsyDiv.css('visibility', 'visible'); \n\n      // AJAX request to fetch product list and sales data\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetProductSalesAndDetails\",\n        data: {\n          OrganizationUnit: OrganizationUnit,\n          Type: \"ASC\"\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          if (response) {\n            productList = response.products; // Store the list of products\n            $self.totalPages = productList.length; // Update totalPages\n            symbol = response.Symbol;\n            stdPrecision = response.StdPrecision;\n            // Build pagination controls\n            buildPagination();\n            // Use the monthly sales data for the first product if available\n            if (productList.length > 0) {\n              var firstProduct = productList[0];\n              var monthlyData = response.product_monthly_sales;\n              loadChartData(monthlyData); // Load the chart data for the first product\n            }\n            sqlWHERE = response.sqlWhereForLookup;\n            createControls();\n            updatePagination();\n            $root.find('.VAS-graph-details').show(); // Clear the graph details container\n            $root.find('.VAS-pagination-container').show(); // Clear the pagination container\n            // Hide busy indicator\n            $bsyDiv[0].style.visibility = \"hidden\";\n          } else {\n            productList = [];\n            $root.find('.VAS-graph-details').hide(); // Clear the graph details container\n            $root.find('.VAS-pagination-container').hide(); // Clear the pagination container\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.error('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination() {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      if (productList.length > 0) {\n        $self.totalPages = productList.length; // Update totalPages\n        var $pagination = $('<div class=\"VAS-pagination-col\">' + '<div class=\"VAS-arrow-col\">' + '<a href=\"#\" id=\"VAS_Prev_Page_' + widgetID + '\"><span class=\"fa fa-arrow-left\"></span></a>' + '<a href=\"#\" id=\"VAS_Next_Page_' + widgetID + '\"><span class=\"fa fa-arrow-right\"></span></a>' + '</div>' + '<div class=\"VAS-page-count\"><span id=\"VAS_PageCount_' + widgetID + '\">1 of ' + $self.totalPages + '</span></div>' + '</div>');\n\n        // Add event listeners for arrows\n        $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n          e.preventDefault();\n          if ($self.currentPage > 1) {\n            $self.currentPage--;\n            loadProductData(productList[$self.currentPage - 1].Product_ID);\n          }\n        });\n        $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n          e.preventDefault();\n          if ($self.currentPage < $self.totalPages) {\n            $self.currentPage++;\n            loadProductData(productList[$self.currentPage - 1].Product_ID);\n          }\n        });\n\n        // Append the pagination controls to the container\n        $paginationContainer.append($pagination);\n      }\n    }\n\n    /* This function updates the pagination controls display */\n    function updatePagination() {\n      var $pageCount = $root.find('#VAS_PageCount_' + widgetID);\n      $pageCount.text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n      var currentProduct = productList[$self.currentPage - 1];\n      var lastYearSales = parseFloat(currentProduct.PreviousTotal);\n      var currentSales = parseFloat(currentProduct.CurrentTotal);\n      var percentageDifference = calculatePercentageDifference(currentSales, lastYearSales);\n      $root.find('#VAS_ProductRank_' + widgetID).text('#' + $self.currentPage);\n      $root.find('#VAS_ProductName_' + widgetID).text(currentProduct.ProductName);\n      $root.find('#VAS_LastYearSales_' + widgetID).text(symbol + ' ' + formatLargeNumber(lastYearSales) + ' ' + unit);\n      $root.find('#VAS_CurrentSales_' + widgetID).text(symbol + ' ' + +formatLargeNumber(currentSales) + ' ' + unit);\n      $root.find('.repfix-resultTxt').text(percentageDifference);\n\n      // Adjust the result icon based on the percentage difference\n      var resultIcon = $root.find('.VAS-graph-result .vis');\n      if (percentageDifference.startsWith('-')) {\n        resultIcon.removeClass('vis-trending-up').addClass('vis-trending-down');\n      } else {\n        resultIcon.removeClass('vis-trending-down').addClass('vis-trending-up');\n      }\n      if (OrganizationUnit > 0) {\n        $vOrg.setValue(OrganizationUnit);\n      }\n    }\n    /* This function loads data for a given product page */\n    function loadProductData(productId) {\n      // AJAX request to fetch monthly sales data for the selected product\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetProductMonthlySalesData\",\n        data: {\n          ProductID: productId,\n          OrganizationUnit: OrganizationUnit\n        },\n        dataType: 'json',\n        success: function (response) {\n          var monthlyData = JSON.parse(response);\n          loadChartData(monthlyData); // Load the chart data\n          updatePagination();\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.error('Failed to fetch product data:', status, error);\n        }\n      });\n    }\n    function calculatePercentageDifference(currentSales, lastYearSales) {\n      if (lastYearSales === 0) {\n        return currentSales > 0 ? '100%' : '0%'; // Handle edge case of last year's sales being zero\n      }\n      var difference = currentSales - lastYearSales;\n      var percentage = difference / lastYearSales * 100;\n      return percentage.toFixed(2) + '%';\n    }\n\n    /**\r\n      * This Function is responsible converting the value into million\r\n      * @param {any} number\r\n      */\n    function formatLargeNumber(number) {\n      if (number >= 1000000000000) {\n        /* Trillion*/\n        unit = VIS.Msg.getMsg(\"VAS_Trillion\");\n        return (number / 1000000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000000000) {\n        /* Billion*/\n        unit = VIS.Msg.getMsg(\"VAS_Billion\");\n        return (number / 1000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000000) {\n        /* Million*/\n        unit = VIS.Msg.getMsg(\"VAS_Million\");\n        return (number / 1000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000) {\n        /* Thousand*/\n        unit = VIS.Msg.getMsg(\"VAS_Thousand\");\n        return (number / 1000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else {\n        unit = \"\";\n        return number.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: stdPrecision,\n          maximumFractionDigits: stdPrecision\n        });\n      }\n    }\n\n    /* This function loads chart data */\n    function loadChartData(monthlyData) {\n      const labels = monthlyData.map(item => item.month);\n      const cyData = monthlyData.map(item => item.cy_month_sales);\n      const lyData = monthlyData.map(item => item.ly_month_sales);\n      // Define chart data and configuration\n      const data = {\n        labels: labels,\n        datasets: [{\n          label: VIS.Msg.getMsg(\"VAS_CurrentYearSales\"),\n          data: cyData,\n          fill: false,\n          borderColor: 'rgb(75, 192, 192)',\n          tension: 0.1,\n          datalabels: {\n            //color: 'rgb(75, 192, 192)',\n            backgroundColor: 'rgba(75, 192, 192, 0.2)',\n            borderRadius: 3,\n            padding: 6,\n            font: {\n              weight: 'bold',\n              size: 12\n            },\n            align: 'center',\n            anchor: 'end'\n          }\n        }, {\n          label: VIS.Msg.getMsg(\"VAS_LastYearSales\"),\n          data: lyData,\n          fill: false,\n          borderColor: 'rgb(255, 99, 132)',\n          tension: 0.1,\n          datalabels: {\n            //color: 'rgb(255, 99, 132)',\n            backgroundColor: 'rgba(255, 99, 132, 0.2)',\n            borderRadius: 3,\n            padding: 6,\n            font: {\n              weight: 'bold',\n              size: 12\n            },\n            align: 'center',\n            anchor: 'end'\n          }\n        }]\n      };\n      const config = {\n        type: 'line',\n        data: data,\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              position: 'bottom' // Position the legend at the bottom\n            },\n            datalabels: {\n              display: true\n            }\n          }\n        },\n        plugins: [ChartDataLabels] // Add the data labels plugin here\n      };\n      if (chartInstance) {\n        chartInstance.data = data;\n        chartInstance.update();\n      } else {\n        // Remove existing canvas if exists\n        $root.find('canvas').remove();\n\n        // Create a new canvas element and append it to the root\n        const canvas = $('<canvas></canvas>');\n        var chartContainer = $root.find('.VAS-chart-container');\n        chartContainer.append(canvas);\n        // Initialize the chart with the new data\n        const ctx = canvas[0].getContext('2d');\n        chartInstance = new Chart(ctx, config);\n      }\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad();\n    };\n  };\n  VAS.VAS_LowestPrMonthlySalesWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad();\n    }, 50);\n  };\n  VAS.VAS_LowestPrMonthlySalesWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_LowestPrMonthlySalesWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_LowestPrMonthlySalesWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_LowestPrMonthlySalesWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_LowestSellProduct.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Created Widget To get Lowest selling data of 10 Product\r\n * chronological  : Development\r\n * Created Date   : 30 August 2024\r\n * Created by     : VIS0060\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_LowestSellProduct = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $(\'<div class="h-100 w-100">\');\n    var $divProduct = "",\n      $divCurrentRevenue = "",\n      $divLastRevenue = "";\n    var ProductData = [];\n    var culture = new VIS.CultureSeparator();\n    var unit = null,\n      spnPageCount = null;\n    var prevPage = null;\n    var nextPage = null;\n    var widgetID = 0;\n    var count = 0;\n\n    /*Intialize function will intialize busy indiactor*/\n    this.initalize = function () {\n      createBusyIndicator();\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      $root.append(\'<div class="VAS-selling-container VAS-lowest-selling-prod">\' + \'<div class="VAS-container-heading">\' + VIS.Msg.getMsg("VAS_LowestSellProduct") + \'</div>\' + \'<div class="VAS-org-col" id="VAS_divProduct_\' + widgetID + \'">\' + \'</div>\' + \'<div class="VAS-yearly-revenue">\' + \'<div class="VAS-lastRevenue" id="VAS_divLastYear_\' + widgetID + \'">\' + \'</div>\' + \'<div class="VAS-currentRevenue" id="VAS_divCurrentYear_\' + widgetID + \'">\' + \'</div>\' + \'<div class="VAS-pagination-sell">\' + \'<div class= "VAS-arrow-col">\' + \'<a href="javascript:void(0);"><span class="fa fa-arrow-left" id="VAS_Prev_\' + widgetID + \'"></span></a>\' + \'<a href="javascript:void(0);"><span class="fa fa-arrow-right" id="VAS_Next_\' + widgetID + \'"></span></a>\' + \'</div>\' + \'<div class="VAS-page-count" id="VAS_spnPageCount_\' + widgetID + \'">1 of 10</div>\' + \'</div>\' + \'</div>\' + \'</div>\');\n      $divProduct = $root.find("#VAS_divProduct_" + widgetID);\n      $divLastRevenue = $root.find("#VAS_divLastYear_" + widgetID);\n      $divCurrentRevenue = $root.find("#VAS_divCurrentYear_" + widgetID);\n      spnPageCount = $root.find("#VAS_spnPageCount_" + widgetID);\n      prevPage = $root.find("#VAS_Prev_" + widgetID);\n      nextPage = $root.find("#VAS_Next_" + widgetID);\n      prevPage.on(VIS.Events.onTouchStartOrClick, function () {\n        if (count > 0) {\n          $bsyDiv[0].style.visibility = "visible";\n          count--;\n          $divProduct.empty();\n          $divLastRevenue.empty();\n          $divCurrentRevenue.empty();\n          setProductData();\n        }\n      });\n      nextPage.on(VIS.Events.onTouchStartOrClick, function () {\n        if (count < ProductData.length - 1) {\n          $bsyDiv[0].style.visibility = "visible";\n          count++;\n          $divProduct.empty();\n          $divLastRevenue.empty();\n          $divCurrentRevenue.empty();\n          setProductData();\n        }\n      });\n    };\n\n    /*This function will load data in widget */\n    this.intialLoad = function () {\n      $divProduct.empty();\n      $divLastRevenue.empty();\n      $divCurrentRevenue.empty();\n      count = 0;\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "Product/GetLowestProductData", "", function (dr) {\n        if (dr != null) {\n          ProductData = dr;\n          setProductData();\n        }\n        $bsyDiv[0].style.visibility = "hidden";\n      });\n    };\n    function setProductData() {\n      $divProduct.append(\'<div class="VAS-orgName-col">\' + \'<h1>#\' + (count + 1) + \'</h1>\' + \'<div class="VAS-org-name"><span>\' + ProductData[count].Name + \'</span></div>\' + \'</div>\' + \'<img src="\' + (ProductData[count].ImageUrl != "" ? VIS.Application.contextUrl + ProductData[count].ImageUrl : VIS.Application.contextUrl + \'Areas/VAS/Content/Images/cube-icon.png\') + \'" alt="">\');\n      $divLastRevenue.append(\'<h1><span style="margin-right:0.2em;">\' + ProductData[count].Symbol + \'</span>\' + formatLargeNumber(ProductData[count].PreviousTotal, ProductData[count].StdPrecision) + (unit != null ? \'<span>\' + unit + \'</span>\' : \'\') + \'<span class="VAS-sale-Qty">(\' + ProductData[count].PreviousQty + \' \' + ProductData[count].UOM + \')</span>\' + \'</h1><span>\' + VIS.Msg.getMsg("VAS_LastYear") + \'</span>\');\n      $divCurrentRevenue.append(\'<h1><span style="margin-right:0.2em;">\' + ProductData[count].Symbol + \'</span>\' + formatLargeNumber(ProductData[count].CurrentTotal, ProductData[count].StdPrecision) + (unit != null ? \'<span>\' + unit + \'</span>\' : \'\') + \'<span class="VAS-sale-Qty"">(\' + ProductData[count].CurrentQty + \' \' + ProductData[count].UOM + \')</span>\' + \'</h1><span>\' + VIS.Msg.getMsg("VAS_CurrentYear") + \'</span>\');\n      if (count > 0) {\n        prevPage.css("opacity", "1");\n      } else {\n        prevPage.css("opacity", "0.6");\n      }\n      if (ProductData.length - 1 > count) {\n        nextPage.css("opacity", "1");\n      } else {\n        nextPage.css("opacity", "0.6");\n      }\n      spnPageCount.text(count + 1 + VIS.Msg.getMsg("VAS_Of") + ProductData.length);\n      $bsyDiv[0].style.visibility = "hidden";\n    }\n\n    /**\r\n     * This Function is responsible converting the value into million\r\n     * @param {any} number\r\n     * @param {any} stdPrecision\r\n     */\n    function formatLargeNumber(number, stdPrecision) {\n      if (number >= 1000000000000) {\n        /* Trillion*/\n        unit = VIS.Msg.getMsg("VAS_Trillion");\n        return (number / 1000000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000000000) {\n        /* Billion*/\n        unit = VIS.Msg.getMsg("VAS_Billion");\n        return (number / 1000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000000) {\n        /* Million*/\n        unit = VIS.Msg.getMsg("VAS_Million");\n        return (number / 1000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000) {\n        /* Thousand*/\n        unit = VIS.Msg.getMsg("VAS_Thousand");\n        return (number / 1000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else {\n        unit = null;\n        return number.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: stdPrecision,\n          maximumFractionDigits: stdPrecision\n        });\n      }\n    }\n\n    /*This function will show busy indicator in widget */\n    function createBusyIndicator() {\n      $bsyDiv = $("<div class=\'vis-apanel-busy\'>");\n      $bsyDiv.css({\n        "position": "absolute",\n        "width": "98%",\n        "height": "97%",\n        \'text-align\': \'center\',\n        \'z-index\': \'999\'\n      });\n      $bsyDiv[0].style.visibility = "visible";\n      $root.append($bsyDiv);\n    }\n    ;\n\n    /*This function used to get root*/\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /*this function is used to refresh design and data of widget*/\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = "visible";\n      count = 0;\n      $self.intialLoad();\n    };\n  };\n  VAS.VAS_LowestSellProduct.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad();\n    }, 50);\n  };\n  VAS.VAS_LowestSellProduct.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n\n  /*this function is called when widget size changes*/\n  VAS.VAS_LowestSellProduct.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n\n  /*Used to dispose the variable*/\n  VAS.VAS_LowestSellProduct.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_LowestSellProduct.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_MonthlyAvBankBalWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : This Widget is used to showcase the Monthly Average Balance data\r\n * chronological  : Development\r\n * Created Date   : 25 Decemeber 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_MonthlyAvBankBal = function () {\n    var widgetID = 0;\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $maindiv = null;\n    var $root = $('<div class=\"h-100 w-100 vas-monAvBbal-background\">');\n    var BankAccountDiv = null;\n    var C_BankAccount_ID = 0;\n    var cmbBankAccount = null;\n\n    /** Load Design on Load */\n    this.initalize = function () {\n      widgetID = VIS.Utility.Util.getValueOfInt(this.widgetInfo.AD_UserHomeWidgetID) != 0 ? this.widgetInfo.AD_UserHomeWidgetID : $self.windowNo;\n      createBusyIndicator();\n      $maindiv = $('<div id=\"VAS-BarLine-MABB_' + widgetID + '\" class=\"vas-barline-monAvBbal-container\">');\n      var MainHeadingComboDiv = $('<div class=\"d-flex justify-content-between vas-monAvBbal-heading\">');\n      var HeadingDiv = $('<div class= \"\">' + VIS.Msg.getMsg(\"VAS_MonthlyAvBalWidget\") + '</div>');\n      /*Created Bank Account Control*/\n      BankAccountDiv = $('<div class=\"vas-exinvd-BankAccountrDiv\">');\n      var $BankAccountDiv = $('<div class=\"input-group vis-input-wrap\">');\n      /* If selected organisation is * then show all bank account else show bank account \r\n       which are created in particular organization*/\n      var AD_Org_ID = VIS.Env.getCtx().getAD_Org_ID();\n      if (AD_Org_ID != 0) {\n        var BankAccountValidationCode = \"C_BankAccount.AD_Org_ID = @AD_Org_ID@ AND C_BankAccount.IsActive = 'Y'\";\n      } else {\n        var BankAccountValidationCode = \"C_BankAccount.IsActive = 'Y'\";\n      }\n      var BankAccountlookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.TableDir, \"C_BankAccount_ID\", 0, false, BankAccountValidationCode);\n      cmbBankAccount = new VIS.Controls.VComboBox(\"C_BankAccount_ID\", false, false, true, BankAccountlookUp, 50, VIS.DisplayType.TableDir);\n      var $BankAccountControlWrap = $('<div class=\"vis-control-wrap\">');\n      var $BankAccountButtonWrap = $('<div class=\"input-group-append\">');\n      $BankAccountDiv.append($BankAccountControlWrap);\n      $BankAccountControlWrap.append(cmbBankAccount.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label style=\"background: rgba(255, 236, 236)\">' + VIS.Msg.getMsg(\"VAS_BankAccount\") + '</label>');\n      $BankAccountDiv.append($BankAccountControlWrap);\n      $BankAccountButtonWrap.append(cmbBankAccount.getBtn(0));\n      $BankAccountDiv.append($BankAccountButtonWrap);\n      BankAccountDiv.append($BankAccountDiv);\n      //Get lookUp Data\n      var data = BankAccountlookUp.getData(true, true, false, false);\n      if (data != null && data != undefined && data.length > 0) {\n        //Set default value\n        cmbBankAccount.setValue(data[0].Key);\n      }\n      //Get value of bank account id\n      C_BankAccount_ID = VIS.Utility.Util.getValueOfInt(cmbBankAccount.getValue());\n      // Add Control into Maine Heading Div\n      MainHeadingComboDiv.append(HeadingDiv);\n\n      // Add Main Hedaeding div into main div\n      $maindiv.append(MainHeadingComboDiv);\n      //adding bank account control to main div\n      $maindiv.append(BankAccountDiv);\n\n      // Add maine div into Root\n      $root.append($maindiv);\n      /*Bank Account Change event*/\n      cmbBankAccount.fireValueChanged = function () {\n        $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n        $maindiv.find('#vas_currencyrecord_' + widgetID).remove();\n        C_BankAccount_ID = VIS.Utility.Util.getValueOfInt(cmbBankAccount.getValue());\n        $bsyDiv[0].style.visibility = \"visible\";\n        $self.getMonthlyAvBankBalDetails();\n      };\n    };\n\n    /** Get data and load */\n    this.getMonthlyAvBankBalDetails = function () {\n      // Show busy indicator while data is loading\n      $bsyDiv[0].style.visibility = \"visible\";\n\n      // Define your AJAX request\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetMonthlyAvBankBalData\", {\n        \"C_BankAccount_ID\": C_BankAccount_ID\n      }, function (dr) {\n        var MontlyAvBalData = dr;\n\n        // Remove existing canvas if exists\n        $root.find('canvas').remove();\n        if (MontlyAvBalData != null && MontlyAvBalData.ErrorMessage != null) {\n          $maindiv.append('<div class=\"vas-igwidg-notfounddiv\" id=\"vas_norecordcont_' + widgetID + '\">' + VIS.Msg.getMsg(\"VAS_RecordNotFound\") + '</div>');\n          $root.append($maindiv);\n        } else {\n          //getting precision\n          var precision = MontlyAvBalData.stdPrecision;\n          var ISO_Code = MontlyAvBalData.ISO_Code;\n          var currencyDiv = $('<div id=\"vas_currencyrecord_' + widgetID + '\" class=\"vas-monAvbal-curr\">' + VIS.Msg.getMsg(\"VAS_AmountIsIn\") + ' : ' + ISO_Code + '</div>');\n          $maindiv.append(currencyDiv);\n          // Define static labels\n          const labels = MontlyAvBalData.labels;\n\n          // Prepare the data object for the chart\n          const data = {\n            labels: labels,\n            // Dynamic labels\n            datasets: [{\n              label: VIS.Msg.getMsg(\"VAS_Payments\"),\n              data: MontlyAvBalData.APPayAmt,\n              borderColor: 'rgba(0,0,0,0)',\n              // Transparent border color\n              borderWidth: 0,\n              // No border\n              backgroundColor: 'rgb(0, 132, 196)',\n              order: 1\n            }, {\n              label: VIS.Msg.getMsg(\"VAS_Receipts\"),\n              data: MontlyAvBalData.ARPayAmt,\n              borderColor: 'rgba(0,0,0,0)',\n              // Transparent border color\n              borderWidth: 0,\n              // No border\n              backgroundColor: 'rgba(255,124,128)',\n              order: 1\n            }, {\n              label: VIS.Msg.getMsg(\"VAS_Balances\"),\n              data: MontlyAvBalData.EndingBal,\n              borderColor: 'rgba(86,108,176)',\n              // Transparent border color\n              borderWidth: 2,\n              backgroundColor: 'rgba(86,108,176)',\n              type: 'line',\n              tension: 0.4,\n              fill: false,\n              /* No fill under the line */\n              order: 2 /*Draw this last (higher z-index) */\n            }]\n          };\n\n          // this is used to set the padding for legend\n          const plugin = {\n            beforeInit: function (chart) {\n              const originalFit = chart.legend.fit;\n              chart.legend.fit = function fit() {\n                originalFit.bind(chart.legend)();\n                this.height += -10;\n              };\n            }\n          };\n\n          // Define the chart configuration for BAR / Line chart\n          const config = {\n            type: 'bar',\n            data: data,\n            options: {\n              responsive: true,\n              layout: {\n                padding: 0\n              },\n              scales: {\n                x: {\n                  grid: {\n                    display: true // Hide the grid lines on the x-axis   \n                  }\n                },\n                y: {\n                  grid: {\n                    display: false // Hide the grid lines on the y-axis\n                    //beginAtZero: true,\n                  }\n                },\n                y1: {\n                  /* type: 'linear',*/\n                  display: false,\n                  /*position: 'right',*/\n                  beginAtZero: false\n                  /*grid: {\r\n                      drawOnChartArea: false, // only want the grid lines for one axis to show up\r\n                  },*/\n                }\n              },\n              plugins: {\n                title: {\n                  display: true,\n                  text: \" \",\n                  align: 'start',\n                  /*font: {\r\n                    size: 18\r\n                  },*/\n                  padding: {\n                    top: 0,\n                    bottom: 0\n                  }\n                },\n                legend: {\n                  display: true,\n                  position: 'bottom',\n                  // Positioning the legend on the right\n                  padding: {\n                    top: 0,\n                    bottom: 0\n                  }\n                },\n                tooltip: {\n                  callbacks: {\n                    label: function (tooltipItem) {\n                      const dataIndex = tooltipItem.dataIndex;\n                      const datasetIndex = tooltipItem.datasetIndex;\n                      const dataset = tooltipItem.chart.data.datasets[datasetIndex];\n                      const labels = tooltipItem.chart.data.labels;\n                      const dsLabel = dataset.label;\n                      const value = dataset.data[dataIndex];\n                      return dsLabel + \" - \" + ISO_Code + ': ' + value.toLocaleString(window.navigator.language, {\n                        minimumFractionDigits: precision,\n                        maximumFractionDigits: precision\n                      });\n                    }\n                  }\n                },\n                datalabels: {\n                  display: false,\n                  color: '#000',\n                  anchor: 'end',\n                  align: 'end',\n                  formatter: function (value) {\n                    return value; // Return value for external use only\n                  },\n                  font: {\n                    weight: 'bold'\n                  }\n                }\n              }\n            },\n            plugins: [plugin]\n          };\n\n          // Create a new canvas element and append it to the root\n          const canvas = $('<canvas class=\"vas-barline-monAvBbal-canvas\"></canvas>');\n          var polarChart = $root.find('#VAS-BarLine-MABB_' + widgetID);\n          polarChart.append(canvas);\n\n          // Initialize the chart with the new data\n          const ctx = canvas[0].getContext('2d');\n          new Chart(ctx, config);\n        }\n\n        // Hide busy indicator\n        $bsyDiv[0].style.visibility = \"hidden\";\n      });\n    };\n\n    /** Add busy Indicator in Root */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $bsyDiv[0].style.visibility = \"visible\";\n      $root.append($bsyDiv);\n    }\n    ;\n\n    /** Get Root */\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /** Refresh Widget Data */\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      $maindiv.find('#vas_norecordcont_' + widgetID).remove();\n      $maindiv.find('#vas_currencyrecord_' + widgetID).remove();\n      $self.getMonthlyAvBankBalDetails();\n    };\n  };\n\n  /**\r\n   * Int Function for Intialize Form\r\n   * @param {any} windowNo\r\n   * @param {any} frame\r\n   */\n  VAS.VAS_MonthlyAvBankBal.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var self = this;\n    window.setTimeout(function () {\n      self.getMonthlyAvBankBalDetails();\n    }, 50);\n  };\n\n  /**\r\n   * Widget Size change\r\n   * @param {any} widget\r\n   */\n  VAS.VAS_MonthlyAvBankBal.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n\n  /** refresh Widget Function */\n  VAS.VAS_MonthlyAvBankBal.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n\n  /** Dispose Function */\n  VAS.VAS_MonthlyAvBankBal.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_MonthlyAvBankBalWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_OpenQuotationWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        :Get the details of PO and Create GRN\r\n * chronological  : Development\r\n * Created Date   : 20 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_OpenQuotationWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-due-fulfilment-container\">' + '    <div class=\"VAS-orders-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_OpenQuotation\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_Quotation\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n      //    buildPagination();\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: \"OQ\"\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_DeliveryLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $root.find('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          //else {\n\n          //    // Display \"No data available\" message\n          //    const message = $('<div class=\"VAS-data-message\">' + VIS.Msg.getMsg(\"VAS_NoDataAvailable\") + '</div>');\n          //    $root.find('.VAS-height-container').append(message);\n          //}\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-due-fulfilment-container\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-orders-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToQuotations\") + '        </h6>' + '<span id=\"VAS_GenerateOrder_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateOrder\") + '\">' + '<i class=\"vis vis-action\" ></i ></span> ' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n          $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"VAS-delivery-box\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\"><span title=\"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\">' + line.QtyEntered + '</span></div>' + '                </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateOrder_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateOrder_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateOrder_' + widgetID).hide();\n        }\n        console.log(selectedOrderLineIDs);\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateOrder_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateOrder(orderId);\n      });\n      $root.find('#VAS_GenerateOrder_' + widgetID).hide();\n      function generateOrder(orderId) {\n        $bsyDiv.css('visibility', 'visible');\n        var orderLineIDs = selectedOrderLineIDs.join(',');\n        $.ajax({\n          url: VIS.Application.contextUrl + \"Product/CreateSalesOrder\",\n          data: {\n            C_Order_ID: orderId,\n            C_OrderLines_IDs: orderLineIDs\n          },\n          dataType: 'json',\n          success: function (response) {\n            var response = JSON.parse(response);\n            if (response.SalesOrder_ID > 0) {\n              $self.currentPage = 1;\n              $self.intialLoad($self.currentPage);\n              if (AD_Window_ID > 0) {\n                var zoomQuery = new VIS.Query();\n                zoomQuery.addRestriction(\"C_Order_ID\", VIS.Query.prototype.EQUAL, response.SalesOrder_ID);\n                zoomQuery.setRecordCount(1);\n                VIS.viewManager.startWindow(AD_Window_ID, zoomQuery);\n              }\n            } else {\n              var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n              var message = \"\";\n              if (response.message != null && response.message != \"\") {\n                message = response.message;\n              } else {\n                message = VIS.Msg.getMsg(\"VAS_SalesOrderNotGenerated\");\n              }\n              spnWO.text(message);\n              spnWO.fadeIn();\n              spnWO.fadeOut(5000);\n            }\n            $bsyDiv.css('visibility', 'hidden');\n          },\n          error: function (xhr, status, error) {\n            // Handle errors\n            console.log('Failed to fetch data:', status, error);\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        });\n        console.log('Generating delivery order for ID:', orderId);\n      }\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_OpenQuotationWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_OpenQuotationWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_OpenQuotationWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_OpenQuotationWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_OpenQuotationWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_OpenQuotationWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_OpenQuotationWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_OrderSummary.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get Order Summary Data\r\n * chronological  : Development\r\n * Created Date   : 09 August 2024\r\n * Created by     : VIS0060\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_OrderSummary = function () {\n    this.windowNo;\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var ctx = this.ctx;\n    var self = this;\n    var $root = $(\'<div class="root"></div>\');\n    var wrapperDiv = null;\n    this.init = function () {\n      wrapperDiv = $(\'<div class ="vas-apTaxWrapper">\' + \'<div id="VAS-TaxDetail_\' + self.windowNo + \'" class="VAS-summary-details mb-2">\' + \'</div></div>\');\n      $root.append(wrapperDiv);\n    };\n\n    /*This function is used to get Order tax data*/\n    this.getOrderSummary = function (recordID) {\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "VAS/PoReceipt/GetOrderSummary", {\n        "OrderId": recordID\n      }, function (data) {\n        wrapperDiv.find(\'#VAS-TaxDetail_\' + self.windowNo).empty();\n        if (data != null && data.length > 0) {\n          wrapperDiv.find(\'#VAS-TaxDetail_\' + self.windowNo).append($(\'<div class="VAS-summary-header">\' + \'<span class="">\' + VIS.Msg.getMsg("VAS_SubTotal") + ":" + \'</span>\' + \'</div>\'));\n          wrapperDiv.find(\'#VAS-TaxDetail_\' + self.windowNo).append($(\'<div class="VAS-summary-info">\' + \'<span class="VAS-summary-amount" style="font-weight: 600;">\' + data[0].CurSymbol + " " + data[0].TotalLines.toLocaleString(window.navigator.language, {\n            minimumFractionDigits: data[0].StdPrecision,\n            maximumFractionDigits: data[0].StdPrecision\n          }) + \'</span>\' + \'</div>\'));\n          for (i = 0; i < data.length; i++) {\n            wrapperDiv.find(".VAS-summary-header").append(\'<span class="">\' + VIS.Utility.encodeText(data[i].TaxName) + ":" + \'</span>\');\n            wrapperDiv.find(".VAS-summary-info").append(\'<span class="VAS-summary-amount">\' + data[0].CurSymbol + " " + data[i].TaxAmt.toLocaleString(window.navigator.language, {\n              minimumFractionDigits: data[0].StdPrecision,\n              maximumFractionDigits: data[0].StdPrecision\n            }) + \'</span>\');\n          }\n          wrapperDiv.find(".VAS-summary-header").append(\'<span class="">\' + VIS.Msg.getMsg("GrandTotal") + ":" + \'</span>\');\n          wrapperDiv.find(".VAS-summary-info").append(\'<span class="VAS-summary-amount" style="font-weight: 600;font-size: 1rem;border-top: 1px solid rgba(var(--v-c-on-secondary), 1);">\' + data[0].CurSymbol + " " + data[0].GrandTotal.toLocaleString(window.navigator.language, {\n            minimumFractionDigits: data[0].StdPrecision,\n            maximumFractionDigits: data[0].StdPrecision\n          }) + \'</span>\');\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.VAS_OrderSummary.prototype.startPanel = function (windowNo, curTab) {\n      self.windowNo = windowNo;\n      self.curTab = curTab;\n      self.init();\n    };\n\n    /* This function to update tab panel based on selected record */\n    VAS.VAS_OrderSummary.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getOrderSummary(recordID);\n    };\n\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.VAS_OrderSummary.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n\n    /* Disposing all variables from memory */\n    VAS.VAS_OrderSummary.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_OrderSummary.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_PendingDeliveryWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Get the Pending Delivery Orders details\r\n * chronological  : Development\r\n * Created Date   : 19 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_PendingDeliveryWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-deliveries-container-pending\">' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_Pendingdeliveries\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_Deliveries\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: \"PD\"\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_DeliveryLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $root.find('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $root.find(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          //else {\n\n          //    // Display \"No data available\" message\n          //    const message = $('<div class=\"VAS-data-message\">' + VIS.Msg.getMsg(\"VAS_NoDataAvailable\") + '</div>');\n          //    $root.find('.VAS-height-container').append(message);\n          //}\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-deliveries-container-pending\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToDeliveries\") + '        </h6>' + '<span id=\"VAS_GenerateDeliveryOrder_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateDeliverOrder\") + '\"><i class=\"fa fa-truck\" aria-hidden=\"true\"></i></span>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading VAS-orders-text-white\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text VAS-orders-text-white\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no VAS-orders-text-white\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"VAS_Customer\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count VAS-orders-text-white\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n          var hasStock = line.ProductType != 'I' || line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n          var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n\n          // Determine badge class\n          var badgeClass;\n          if (line.ProductType != 'I' || line.OnHandQty >= line.QtyOrdered) {\n            badgeClass = 'badge-green'; //  stock available\n          } else if (line.OnHandQty < line.QtyOrdered && line.OnHandQty > 0) {\n            badgeClass = 'badge-orange'; //stock less tham order \n          } else {\n            badgeClass = 'badge-red'; // Insufficient stock\n          }\n          $root.find('#VAS_OrderLine_' + widgetID).append('<div class=\"' + boxClass + '\">' + '<div class=\"VAS-box-heading\">' + '<div class=\"VAS-icon-w-name\">' + '<input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + (hasStock ? '' : ' disabled') + '/> ' + '<i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '<div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '</div>' + '<div class=\"VAS-total-items-count\">' + '<span title = \"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\" class=\"badge badge-light ' + badgeClass + '\"> ' + line.QtyEntered + '</span ></div > ' + '</div>' + '<div class=\"VAS-spaceBetween-col\">' + '<div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '<div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '</div>' + '</div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details VAS-orders-text-white\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateDeliveryOrder_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).hide();\n        }\n        console.log(selectedOrderLineIDs);\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateDeliveryOrder_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateDeliveryOrder(orderId);\n      });\n      $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).hide();\n      function generateDeliveryOrder(orderId) {\n        $bsyDiv.css('visibility', 'visible');\n        var orderLineIDs = selectedOrderLineIDs.join(',');\n        $.ajax({\n          url: VIS.Application.contextUrl + \"Product/CreateShipment\",\n          data: {\n            C_Order_ID: orderId,\n            C_OrderLines_IDs: orderLineIDs\n          },\n          dataType: 'json',\n          success: function (response) {\n            var response = JSON.parse(response);\n            if (response.Shipment_ID > 0) {\n              try {\n                if (AD_Window_ID > 0) {\n                  var windowParam = {\n                    \"TabWhereClause\": \"M_InOut.M_InOut_ID=\" + response.Shipment_ID + \"\",\n                    \"TabLayout\": \"Y\",\n                    // 'N'[Grid],'Y'[Single],'C'[Card]}\t \t \n                    \"TabIndex\": \"0\"\n                  };\n                  $self.widgetFirevalueChanged(windowParam);\n                  $self.currentPage = 1;\n                  $self.intialLoad($self.currentPage);\n                }\n              } catch (e) {\n                console.log(e);\n              }\n            } else {\n              var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n              var message = \"\";\n              if (response.message != null && response.message != \"\") {\n                message = response.message;\n              } else {\n                message = VIS.Msg.getMsg(\"VAS_DeliveryOrderNotGenerated\");\n              }\n              spnWO.text(message);\n              spnWO.fadeIn();\n              spnWO.fadeOut(5000);\n            }\n            $bsyDiv.css('visibility', 'hidden');\n          },\n          error: function (xhr, status, error) {\n            // Handle errors\n            console.log('Failed to fetch data:', status, error);\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        });\n        console.log('Generating delivery order for ID:', orderId);\n      }\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows VAS-orders-text-white\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_PendingDeliveryWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_PendingDeliveryWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_PendingDeliveryWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_PendingDeliveryWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_PendingDeliveryWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_PendingDeliveryWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_PendingDeliveryWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_PendingGRNWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        :Get the details of PO and Create GRN\r\n * chronological  : Development\r\n * Created Date   : 20 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_PendingGRNWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-grn-container-pending\">' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_PendingGRN\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_GRNCount\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n      //    buildPagination();\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: \"PG\"\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"Vendor\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_VendorLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $root.find('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          //else {\n\n          //    // Display \"No data available\" message\n          //    const message = $('<div class=\"VAS-data-message\">' + VIS.Msg.getMsg(\"VAS_NoDataAvailable\") + '</div>');\n          //    $root.find('.VAS-height-container').append(message);\n          //}\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-grn-container-pending\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToGRN\") + '        </h6>' + '<span id=\"VAS_GenerateGRN_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateGRN\") + '\">' + '<i class=\"vis vis-action\" ></i ></span> ' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading VAS-orders-text-white\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text VAS-orders-text-white\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no VAS-orders-text-white\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"Vendor\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count VAS-orders-text-white\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n          //var hasStock = line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n          //var hasStock = line.OnHandQty > 0;\n          //var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n\n          $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"VAS-delivery-box\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\"><span title=\"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\">' + line.QtyEntered + '</span></div>' + '                </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details VAS-orders-text-white\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateGRN_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateGRN_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateGRN_' + widgetID).hide();\n        }\n        console.log(selectedOrderLineIDs);\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateGRN_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateGRN(orderId);\n      });\n      $root.find('#VAS_GenerateGRN_' + widgetID).hide();\n      function generateGRN(orderId) {\n        $bsyDiv.css('visibility', 'visible');\n        var orderLineIDs = selectedOrderLineIDs.join(',');\n        $.ajax({\n          url: VIS.Application.contextUrl + \"Product/CreateGRN\",\n          data: {\n            C_Order_ID: orderId,\n            C_OrderLines_IDs: orderLineIDs\n          },\n          dataType: 'json',\n          success: function (response) {\n            var response = JSON.parse(response);\n            if (response.Shipment_ID > 0) {\n              try {\n                if (AD_Window_ID > 0) {\n                  var windowParam = {\n                    \"TabWhereClause\": \"M_InOut.M_InOut_ID=\" + response.Shipment_ID + \"\",\n                    \"TabLayout\": \"Y\",\n                    // 'N'[Grid],'Y'[Single],'C'[Card]}\t \t \n                    \"TabIndex\": \"0\"\n                  };\n                  $self.widgetFirevalueChanged(windowParam);\n                  $self.currentPage = 1;\n                  $self.intialLoad($self.currentPage);\n                }\n              } catch (e) {\n                console.log(e);\n              }\n            } else {\n              var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n              var message = \"\";\n              if (response.message != null && response.message != \"\") {\n                message = response.message;\n              } else {\n                message = VIS.Msg.getMsg(\"VAS_DeliveryOrderNotGenerated\");\n              }\n              spnWO.text(message);\n              spnWO.fadeIn();\n              spnWO.fadeOut(5000);\n            }\n            $bsyDiv.css('visibility', 'hidden');\n          },\n          error: function (xhr, status, error) {\n            // Handle errors\n            console.log('Failed to fetch data:', status, error);\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        });\n        console.log('Generating delivery order for ID:', orderId);\n      }\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows VAS-orders-text-white\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_PendingGRNWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_PendingGRNWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_PendingGRNWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_PendingGRNWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_PendingGRNWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_PendingGRNWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_PendingGRNWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_PendingTransferWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Get the Pending Material Transfer Details\r\n * chronological  : Development\r\n * Created Date   : 26 Sep 2024\r\n * Created by     : VIS0060\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_PendingTransferWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 5;\n    var selecteLineIDs = []; // Array to keep track of selected order line IDs\n\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      // Create busy indicator\n      createBusyIndicator();\n      var reqContainer = '<div id=\"VAS_TransferContainer_' + widgetID + '\" class=\"VAS-deliveries-container-pending\">' + '<div class=\"VAS-deliveries-heading\">' + '<h6>' + VIS.Msg.getMsg(\"VAS_PendingTransfers\") + '</h6>' + '</div>' + '<div class=\"VAS-delivery-count\">' + '<div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_Transfers\") + ' <span id=\"VAS_TransferCount_' + widgetID + '\">0</span></div>' + '</div>' + '<div class=\"VAS-delivery-detail\">' + '<div class=\"VAS-box-heading\">' + '</div>' + '</div>' + '<div class=\"VAS-height-container\">' + '<div id=\"VAS_TransferBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '</div>' + '<div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '</div>' + '</div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      $root.append(reqContainer);\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_TransferContainer_' + widgetID).show();\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"Product/GetExpectedTransfer\", {\n        pageNo: pageNo,\n        pageSize: pageSize,\n        Type: \"PT\"\n      }, function (response) {\n        $root.find('#VAS_TransferBox_' + widgetID).empty();\n        $root.find('#VAS_ReqContainer' + widgetID).remove;\n        if (response != null && response.Requisitions != null && response.Requisitions.length > 0) {\n          for (i = 0; i < response.Requisitions.length; i++) {\n            var boxHtml = '<div id=\"VAS_ReqContainer' + widgetID + '\" class=\"VAS-delivery-box\" >' + '<div class=\"VAS-box-heading\">' + '<div class=\"VAS-icon-w-name\">' + '<i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '<div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + 'title=\"' + VIS.Msg.getMsg(\"DocumentNo\") + '\" ' + 'data-doc-no=\"' + response.Requisitions[i][\"DocumentNo\"] + '\" ' + 'data-customer-name=\"' + response.Requisitions[i][\"Employee\"] + '\" ' + 'data-reqid=\"' + response.Requisitions[i][\"M_Requisition_ID\"] + '\">' +\n            // Add data-reqid attribute here\n            '' + response.Requisitions[i][\"DocumentNo\"] + '</div>' + '</div>' + '<div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Requisitions[i][\"LineCount\"] + '</div>' + '</div>' + '<div class=\"VAS-spaceBetween-col\">' +\n            // '<div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"Employee\") + '\">' + response.Requisitions[i][\"Employee\"] + '</div>' +\n            '</div>' + '<div class=\"VAS-spaceBetween-col grid-2-col\">' + '<div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Destination\") + '\">' + response.Requisitions[i][\"Destination\"] + '</div>' + '<div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_Source\") + '\">' + response.Requisitions[i][\"Source\"] + '</div>' + '</div>' + '<div class=\"VAS-spaceBetween-col\">' + '<div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Requisitions[i][\"Symbol\"] + '</span>' + ' ' + response.Requisitions[i][\"GrandTotal\"].toLocaleString() + '</div>' + '</div>' + '</div>';\n            $root.find('#VAS_TransferBox_' + widgetID).append(boxHtml);\n          }\n          childRecordsMap = [];\n          // Populate the childRecordsMap with child records\n          response.Requisitions.forEach(function (requisition) {\n            if (requisition.ReqLines && requisition.ReqLines.length > 0) {\n              childRecordsMap[requisition.DocumentNo] = requisition.ReqLines;\n            }\n          });\n\n          /* Add Pagination div on first tym data load*/\n          if (pageNo == 1) {\n            $root.find('#VAS_TransferCount_' + widgetID).text(response.RecordCount);\n            buildPagination(response.RecordCount);\n          }\n          $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n\n          // Attach click event listener to transfer boxes\n          $root.off('click', '#VAS_DocumentNo_' + widgetID);\n          $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n            var docNo = $(this).data('doc-no');\n            var customerName = $(this).data('customer-name');\n            var reqid = $(this).data('reqid');\n            displayOrderDetails(docNo, customerName, reqid);\n          });\n        }\n        $bsyDiv.css('visibility', 'hidden');\n      });\n    };\n    function displayOrderDetails(docNo, customerName, reqid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_TransferContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selecteLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-deliveries-container-pending\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + '            <span id=\"VAS_BackToTransfer_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToTransfer\") + '        </h6>' + '<span id=\"VAS_GenerateTransfer_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-reqid=\"' + reqid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenMaterialTransfer\") + '\"><i class=\"fa fa-truck\" aria-hidden=\"true\"></i></span>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading VAS-orders-text-white\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text VAS-orders-text-white\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no VAS-orders-text-white\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' +\n      //'                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"Employee\") + '\">' + customerName + '</div>' +\n      '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count VAS-orders-text-white\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selecteLineIDs.includes(line.C_OrderLine_ID);\n          var hasStock = line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n          var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n          var badgeClass;\n          if (line.OnHandQty >= line.QtyOrdered) {\n            badgeClass = 'badge-green'; //  stock available\n          } else if (line.OnHandQty < line.QtyOrdered && line.OnHandQty > 0) {\n            badgeClass = 'badge-orange'; //stock less tham order \n          } else {\n            badgeClass = 'badge-red'; // Insufficient stock\n          }\n          $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"' + boxClass + '\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-reqlineid=\"' + line.M_RequisitionLine_ID + '\"' + (isChecked ? ' checked' : '') + (hasStock ? '' : ' disabled') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\">' + '                    <span title = \"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\" class=\"badge badge-light ' + badgeClass + '\"> ' + line.QtyEntered + '</span ></div > ' + '                      </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details VAS-orders-text-white\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackToTransfer_' + widgetID);\n      $root.off('click', '#VAS_GenerateTransfer_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackToTransfer_' + widgetID, function () {\n        $root.find('#VAS_TransferContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var reqlineid = $(this).data('reqlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selecteLineIDs.includes(reqlineid)) {\n            selecteLineIDs.push(reqlineid);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selecteLineIDs = selecteLineIDs.filter(id => id !== reqlineid);\n        }\n        if (selecteLineIDs.length > 0) {\n          $root.find('#VAS_GenerateTransfer_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateTransfer_' + widgetID).hide();\n        }\n      });\n\n      // Event listener for Generate Delivery Order button\n      $root.on('click', '#VAS_GenerateTransfer_' + widgetID, function () {\n        var reqId = $(this).data('reqid');\n        generateMaterialTransfer(reqId);\n      });\n      $root.find('#VAS_GenerateTransfer_' + widgetID).hide();\n    }\n    function generateMaterialTransfer(reqId) {\n      $bsyDiv.css('visibility', 'visible');\n      var reqLineIDs = selecteLineIDs.join(',');\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/CreateMaterialTransfer\",\n        data: {\n          M_Requisition_ID: reqId,\n          M_RequisitionLines_IDs: reqLineIDs\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          if (response.Movement_ID > 0) {\n            try {\n              var windowParam = {\n                \"TabWhereClause\": \"M_Movement.M_Movement_ID=\" + response.Movement_ID,\n                \"TabLayout\": \"Y\",\n                // 'N'[Grid],'Y'[Single],'C'[Card]}\t \t \n                \"TabIndex\": \"0\"\n              };\n              $self.widgetFirevalueChanged(windowParam);\n              $self.currentPage = 1;\n              $self.intialLoad($self.currentPage);\n            } catch (e) {\n              console.log(e);\n            }\n          } else {\n            var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n            var message = \"\";\n            if (response.message != null && response.message != \"\") {\n              message = response.message;\n            } else {\n              message = VIS.Msg.getMsg(\"VAS_TransferNotGenerated\");\n            }\n            spnWO.text(message);\n            spnWO.fadeIn();\n            spnWO.fadeOut(5000);\n          }\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows VAS-orders-text-white\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_PendingTransferWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_PendingTransferWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_PendingTransferWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_PendingTransferWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_PendingTransferWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_PendingTransferWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_PendingTransferWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_PrMonthlySalesWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Created Widget to get top 10 highest selling\r\n *                  Product\r\n * chronological  : Development\r\n * Created Date   : 05 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_PrMonthlySalesWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var ctx = this.ctx;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    var orgControlDiv;\n    var unit = null;\n    var sqlWHERE = \"\";\n    var OrganizationUnit = 0;\n    var stdPrecision = 0;\n    var symbol = \"\";\n    var $vOrg;\n    function createStructure(widgetID) {\n      var currentYear = new Date().getFullYear();\n      var lastYear = currentYear - 1;\n      var $contentContainer = $('<div class=\"VAS-org-unitsales-col VAS-content-container vis-formouterwrpdiv\">' + '<div class=\"VAS-sales-heading\">' + VIS.Msg.getMsg(\"VAS_HighestSellingProduct\") + '</div>' + '<div class=\"VAS-organization-block\">' + '<div id=\"VAS_Org_' + widgetID + '\" class=\"VAS_OrgUnitControl\"></div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>' + '<div class=\"VAS-graph-details\">' + '<div class=\"VAS-salesGraph-heading\"><span id=\"VAS_ProductRank_' + widgetID + '\">#1</span>&nbsp<span id=\"VAS_ProductName_' + widgetID + '\"> Product Name</span></div>' + '<div class=\"VAS-totalSales-col\">' + '<div class=\"VAS-startSale-box\">' + '<div class=\"VAS-yearTxt\"><span>' + lastYear + '<span></div>' + '<div class=\"VAS-totalSale\"><span id=\"VAS_LastYearSales_' + widgetID + '\">520 €</span></div>' + '</div>' + '<div class=\"VAS-endSale-box\">' + '<div class=\"VAS-yearSale-col\">' + '<div class=\"VAS-yearTxt\"><span>' + currentYear + '<span></div>' + '<div class=\"VAS-totalSale\"><span id=\"VAS_CurrentSales_' + widgetID + '\">520 €</span></div>' + '</div>' + '<div class=\"VAS-graph-result\">' + '<span class=\"vis vis-trending-down\"></span>' + '<div class=\"repfix-resultTxt\">-10.32%</div>' + '</div>' + '</div>' + '</div>' + '<div class=\"VAS-graph-col VAS-chart-container\" style=\"display: flex; align-items: center; justify-content: center;\">' + '</div>' + '</div>');\n      orgControlDiv = $contentContainer.find('#VAS_Org_' + widgetID);\n      return $contentContainer;\n    }\n\n    //This function is used to create the VIS controls\n    function createControls() {\n      /* VIS control for Organization (Table) */\n      orgControlDiv.empty();\n      orgDivInputWrap = $('<div class=\"input-group vis-input-wrap\">');\n      $lookupOrg = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.Search, \"AD_Org_ID\", 0, false, sqlWHERE);\n      $vOrg = new VIS.Controls.VTextBoxButton(\"AD_Org_ID\", false, false, true, VIS.DisplayType.Search, $lookupOrg);\n\n      /*    $orgButtonWrap = $('<div class=\"input-group-append\">');*/\n      $orgControlWrap = $('<div class=\"vis-control-wrap\">');\n      orgDivInputWrap.append($orgControlWrap);\n      $orgControlWrap.append($vOrg.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.Msg.getMsg(\"VAS_OrgUnit\") + '</label><span class= \"vis-ev-ctrlinfowrap\"</span>');\n\n      /*    $orgButtonWrap.append($vOrg.getBtn(0));*/\n      /* orgDivInputWrap.append($orgButtonWrap);*/\n      orgControlDiv.append(orgDivInputWrap);\n      $vOrg.fireValueChanged = function () {\n        OrganizationUnit = $vOrg.getValue() == null ? 0 : $vOrg.getValue();\n        $self.intialLoad();\n      };\n    }\n    var productList = [];\n    var chartInstance;\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      // Create busy indicator\n      createBusyIndicator();\n      var demo = createStructure(widgetID);\n      $root.append(demo);\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function () {\n      // Show busy indicator\n      //$bsyDiv.css('visibility', 'visible'); \n\n      // AJAX request to fetch product list and sales data\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetProductSalesAndDetails\",\n        data: {\n          OrganizationUnit: OrganizationUnit,\n          Type: \"DESC\"\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          if (response) {\n            productList = response.products; // Store the list of products\n            $self.totalPages = productList.length; // Update totalPages\n            symbol = response.Symbol;\n            stdPrecision = response.StdPrecision;\n            // Build pagination controls\n            buildPagination();\n\n            // Use the monthly sales data for the first product if available\n            if (productList.length > 0) {\n              var firstProduct = productList[0];\n              var monthlyData = response.product_monthly_sales;\n              loadChartData(monthlyData); // Load the chart data for the first product\n            }\n            sqlWHERE = response.sqlWhereForLookup;\n            createControls();\n            updatePagination();\n            $root.find('.VAS-graph-details').show(); // Clear the graph details container\n            $root.find('.VAS-pagination-container').show(); // Clear the pagination container\n            // Hide busy indicator\n            $bsyDiv[0].style.visibility = \"hidden\";\n          } else {\n            productList = [];\n            $root.find('.VAS-graph-details').hide(); // Clear the graph details container\n            $root.find('.VAS-pagination-container').hide(); // Clear the pagination container\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.error('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination() {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      if (productList.length > 0) {\n        $self.totalPages = productList.length; // Update totalPages\n        var $pagination = $('<div class=\"VAS-pagination-col\">' + '<div class=\"VAS-arrow-col\">' + '<a href=\"#\" id=\"VAS_Prev_Page_' + widgetID + '\"><span class=\"fa fa-arrow-left\"></span></a>' + '<a href=\"#\" id=\"VAS_Next_Page_' + widgetID + '\"><span class=\"fa fa-arrow-right\"></span></a>' + '</div>' + '<div class=\"VAS-page-count\"><span id=\"VAS_PageCount_' + widgetID + '\">1 of ' + $self.totalPages + '</span></div>' + '</div>');\n\n        // Add event listeners for arrows\n        $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n          e.preventDefault();\n          if ($self.currentPage > 1) {\n            $self.currentPage--;\n            loadProductData(productList[$self.currentPage - 1].Product_ID);\n          }\n        });\n        $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n          e.preventDefault();\n          if ($self.currentPage < $self.totalPages) {\n            $self.currentPage++;\n            loadProductData(productList[$self.currentPage - 1].Product_ID);\n          }\n        });\n\n        // Append the pagination controls to the container\n        $paginationContainer.append($pagination);\n      }\n    }\n\n    /* This function updates the pagination controls display */\n    function updatePagination() {\n      console.log($vOrg.getValue());\n      var $pageCount = $root.find('#VAS_PageCount_' + widgetID);\n      $pageCount.text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n      var currentProduct = productList[$self.currentPage - 1];\n      var lastYearSales = parseFloat(currentProduct.PreviousTotal);\n      var currentSales = parseFloat(currentProduct.CurrentTotal);\n      var percentageDifference = calculatePercentageDifference(currentSales, lastYearSales);\n      $root.find('#VAS_ProductRank_' + widgetID).text('#' + $self.currentPage);\n      $root.find('#VAS_ProductName_' + widgetID).text(currentProduct.ProductName);\n      $root.find('#VAS_LastYearSales_' + widgetID).text(symbol + ' ' + formatLargeNumber(lastYearSales) + ' ' + unit);\n      $root.find('#VAS_CurrentSales_' + widgetID).text(symbol + ' ' + +formatLargeNumber(currentSales) + ' ' + unit);\n      $root.find('.repfix-resultTxt').text(percentageDifference);\n\n      // Adjust the result icon based on the percentage difference\n      var resultIcon = $root.find('.VAS-graph-result .vis');\n      if (percentageDifference.startsWith('-')) {\n        resultIcon.removeClass('vis-trending-up').addClass('vis-trending-down');\n      } else {\n        resultIcon.removeClass('vis-trending-down').addClass('vis-trending-up');\n      }\n      if (OrganizationUnit > 0) {\n        $vOrg.setValue(OrganizationUnit);\n      }\n    }\n    /* This function loads data for a given product page */\n    function loadProductData(productId) {\n      // AJAX request to fetch monthly sales data for the selected product\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetProductMonthlySalesData\",\n        data: {\n          ProductID: productId,\n          OrganizationUnit: OrganizationUnit\n        },\n        dataType: 'json',\n        success: function (response) {\n          var monthlyData = JSON.parse(response);\n          loadChartData(monthlyData); // Load the chart data\n          updatePagination();\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.error('Failed to fetch product data:', status, error);\n        }\n      });\n    }\n    function calculatePercentageDifference(currentSales, lastYearSales) {\n      if (lastYearSales === 0) {\n        return currentSales > 0 ? '100%' : '0%'; // Handle edge case of last year's sales being zero\n      }\n      var difference = currentSales - lastYearSales;\n      var percentage = difference / lastYearSales * 100;\n      return percentage.toFixed(2) + '%';\n    }\n\n    /**\r\n      * This Function is responsible converting the value into million\r\n      * @param {any} number\r\n      */\n    function formatLargeNumber(number) {\n      if (number >= 1000000000000) {\n        /* Trillion*/\n        unit = VIS.Msg.getMsg(\"VAS_Trillion\");\n        return (number / 1000000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000000000) {\n        /* Billion*/\n        unit = VIS.Msg.getMsg(\"VAS_Billion\");\n        return (number / 1000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000000) {\n        /* Million*/\n        unit = VIS.Msg.getMsg(\"VAS_Million\");\n        return (number / 1000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (number >= 1000) {\n        /* Thousand*/\n        unit = VIS.Msg.getMsg(\"VAS_Thousand\");\n        return (number / 1000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else {\n        unit = \"\";\n        return number.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: stdPrecision,\n          maximumFractionDigits: stdPrecision\n        });\n      }\n    }\n\n    /* This function loads chart data */\n    function loadChartData(monthlyData) {\n      const labels = monthlyData.map(item => item.month);\n      const cyData = monthlyData.map(item => item.cy_month_sales);\n      const lyData = monthlyData.map(item => item.ly_month_sales);\n      // Define chart data and configuration\n      const data = {\n        labels: labels,\n        datasets: [{\n          label: VIS.Msg.getMsg(\"VAS_CurrentYearSales\"),\n          data: cyData,\n          fill: false,\n          borderColor: 'rgb(75, 192, 192)',\n          tension: 0.1,\n          datalabels: {\n            //color: 'rgb(75, 192, 192)',\n            backgroundColor: 'rgba(75, 192, 192, 0.2)',\n            borderRadius: 3,\n            padding: 6,\n            font: {\n              weight: 'bold',\n              size: 12\n            },\n            align: 'center',\n            anchor: 'end'\n          }\n        }, {\n          label: VIS.Msg.getMsg(\"VAS_LastYearSales\"),\n          data: lyData,\n          fill: false,\n          borderColor: 'rgb(255, 99, 132)',\n          tension: 0.1,\n          datalabels: {\n            //color: 'rgb(255, 99, 132)',\n            backgroundColor: 'rgba(255, 99, 132, 0.2)',\n            borderRadius: 3,\n            padding: 6,\n            font: {\n              weight: 'bold',\n              size: 12\n            },\n            align: 'center',\n            anchor: 'end'\n          }\n        }]\n      };\n      const config = {\n        type: 'line',\n        data: data,\n        options: {\n          responsive: true,\n          maintainAspectRatio: false,\n          plugins: {\n            legend: {\n              position: 'bottom',\n              display: true\n              // Position the legend at the bottom\n            },\n            datalabels: {\n              display: true\n            }\n          }\n        },\n        plugins: [ChartDataLabels] // Add the data labels plugin here\n      };\n      if (chartInstance) {\n        chartInstance.data = data;\n        chartInstance.update();\n      } else {\n        // Remove existing canvas if exists\n        $root.find('canvas').remove();\n\n        // Create a new canvas element and append it to the root\n        const canvas = $('<canvas></canvas>');\n        var chartContainer = $root.find('.VAS-chart-container');\n        chartContainer.append(canvas);\n        canvas.css('height', '100%');\n        canvas.css('width', '100%');\n        // Initialize the chart with the new data\n        const ctx = canvas[0].getContext('2d');\n        chartInstance = new Chart(ctx, config);\n      }\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad();\n    };\n  };\n  VAS.VAS_PrMonthlySalesWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad();\n    }, 50);\n  };\n  VAS.VAS_PrMonthlySalesWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_PrMonthlySalesWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_PrMonthlySalesWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_PrMonthlySalesWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ProductUomSetup.js":()=>{eval("{/*******************************************************\r\n    * Module Name    : VA Standard\r\n    * Purpose        : Save the UOM Conversion\r\n    * Chronological  : Development\r\n    * VAI050         : 20 June 2024\r\n******************************************************/\n\n;\nVAS = window.VAS || {};\n/*$self-invoking function no need to call ,automatically call on pageload*/\n;\n(function (VAS, $) {\n  /*Form Class function fullnamespace*/\n  VAS.VAS_ProductUomSetup = function () {\n    this.frame;\n    this.windowNo;\n    var $root = null;\n    var $bsyDiv = null;\n    var inputDiv = null;\n    var $self = this;\n    var inputSave = null;\n    var VAS_txtPUQtyForPU = null;\n    var VAS_txtSUQtyForPU = null;\n    var VAS_txtSUQtyForSU = null;\n    var VAS_txtPUQtyForSU = null;\n    var VAS_txtSUQtyForCU = null;\n    var VAS_txtPUQtyForCU = null;\n    var VAS_Alltxt = null;\n    var C_UOM_ID = null;\n    var M_Product_ID = null;\n    var rate1 = null;\n    var rate2 = null;\n    var one = 1.0;\n    //\n\n    /*for Initial design*/\n    function initializeComponent() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis-busyindicatordiv\"></i></div></div>');\n      $root = $('<div>');\n      $root.append($bsyDiv);\n      busyDiv(true);\n      inputDiv = $('<div class=\"VAS-flyout-body vis-formouterwrpdiv\">' + '<div class=\"firstRow\">' + '<div class=\"VAS-input-fields\">' + '<div class=\"VIS_Pref_show\">' + '<div class=\"VIS_Pref_dd\">' + '<div class=\"input-group vis-input-wrap VAS-UOM\" id=\"VAS_ddlUOM' + $self.windowNo + '\">' + '</div></div></div>' + '<div class=\"VAS_convertedUnit\">' + VIS.Msg.getMsg(\"VAS_ProductConvertUnit\") + '</div>' + '<div id=\"VAS_ControlDiv\">' + '<div class=\"VIS_Pref_show\">' + '<div class=\"VIS_Pref_dd\">' + '<div class= \"input-group vis-input-wrap\" id = \"VAS_ddlPU' + $self.windowNo + '\" ></div>' + '</div> ' + '<div class=\"VIS_Pref_dd\">' + '<div class= \"input-group vis-input-wrap vas-txtbox\">' + '<div class=\"vis-control-wrap\">' + '<input type=\"text\"  class=\"vas-txtbox\" value=\"1\" placeholder=\"\" data-placeholder=\"\"  id =\"VAS_txtSUQtyForPU' + $self.windowNo + '\" disabled>' + '<label for=\"VAS_txtSUQtyForPU' + $self.windowNo + '\">' + VIS.Msg.getMsg(\"VAS_txtSUQtyForPU\") + '</label>' + '</div > ' + '</div> ' + '</div> ' + '<div class=\"VIS_Pref_dd\">' + '<div class= \"input-group vis-input-wrap vas-txtbox\">' + '<div class=\"vis-control-wrap\">' + '<input type=\"text\"  class=\"vas-txtbox\" value=\"1\" placeholder=\"\" data-placeholder=\"\" id=\"VAS_txtPUQtyForPU' + $self.windowNo + '\"  disabled>' + '<label for=\"VAS_txtPUQtyForPU' + $self.windowNo + '\">' + VIS.Msg.getMsg(\"VAS_txtPUQtyForPU\") + '</label>' + '</div > ' + '</div> ' + '</div> ' + '</div> ' + '<div class=\"VIS_Pref_show\">' + '<div class=\"VIS_Pref_dd\">' + '<div class= \"input-group vis-input-wrap\" id = \"VAS_ddlSU' + $self.windowNo + '\" ></div>' + '</div> ' + '<div class=\"VIS_Pref_dd\">' + '<div class= \"input-group vis-input-wrap vas-txtbox\">' + '<div class=\"vis-control-wrap\">' + '<input type=\"text\" class=\"vas-txtbox\"  value=\"1\" placeholder=\"\" data-placeholder=\"\"  id =\"VAS_txtSUQtyForSU' + $self.windowNo + '\" disabled>' + '<label for=\"VAS_txtSUQtyForSU' + $self.windowNo + '\">' + VIS.Msg.getMsg(\"VAS_txtSUQtyForSU\") + '</label>' + '</div > ' + '</div> ' + '</div> ' + '<div class=\"VIS_Pref_dd\">' + '<div class= \"input-group vis-input-wrap vas-txtbox\">' + '<div class=\"vis-control-wrap\">' + '<input type = \"text\" class= \"vas-txtbox\"  value = \"1\" placeholder = \"\" data-placeholder=\"\" id = \"VAS_txtPUQtyForSU' + $self.windowNo + '\" disabled > ' + '<label for=\"VAS_txtPUQtyForSU' + $self.windowNo + '\">' + VIS.Msg.getMsg(\"VAS_txtPUQtyForSU\") + '</label>' + '</div > ' + '</div> ' + '</div> ' + '</div> ' + '<div class=\"VIS_Pref_show\">' + '<div class=\"VIS_Pref_dd\">' + '<div class= \"input-group vis-input-wrap\" id = \"VAS_ddlCU' + $self.windowNo + '\" ></div>' + '</div> ' + '<div class=\"VIS_Pref_dd\">' + '<div class= \"input-group vis-input-wrap vas-txtbox\">' + '<div class=\"vis-control-wrap\">' + '<input type=\"text\" class=\"vas-txtbox\" value=\"1\" placeholder=\"\" data-placeholder=\"\"  id =\"VAS_txtSUQtyForCU' + $self.windowNo + '\" disabled>' + '<label for=\"VAS_txtSUQtyForCU' + $self.windowNo + '\">' + VIS.Msg.getMsg(\"VAS_txtSUQtyForCU\") + '</label>' + '</div > ' + '</div> ' + '</div> ' + '<div class=\"VIS_Pref_dd\">' + '<div class= \"input-group vis-input-wrap vas-txtbox\">' + '<div class=\"vis-control-wrap\">' + '<input type = \"text\" class= \"vas-txtbox\"  value = \"1\" placeholder = \"\" data-placeholder=\"\" id = \"VAS_txtPUQtyForCU' + $self.windowNo + '\" disabled> ' + '<label for=\"VAS_txtPUQtyForCU' + $self.windowNo + '\">' + VIS.Msg.getMsg(\"VAS_txtPUQtyForCU\") + '</label>' + '</div > ' + '</div> ' + '</div> ' + '</div> ' + '<div class=\"VAS_SaveCancelButtons text-right\">' + '<button id=\"VAS_Cancel' + $self.windowNo + '\">' + VIS.Msg.getMsg(\"VAS_Cancel\") + '</button>' + '<button id=\"VAS_Save' + $self.windowNo + '\">' + VIS.Msg.getMsg(\"VAS_Save\") + '</button>' + '</div>' + '</div>');\n\n      /* find the varibales from html*/\n      $inputUOM = inputDiv.find('#VAS_ddlUOM' + $self.windowNo);\n      $inputPurUnit = inputDiv.find('#VAS_ddlPU' + $self.windowNo);\n      $inputSuUnit = inputDiv.find('#VAS_ddlSU' + $self.windowNo);\n      $inputCuUnit = inputDiv.find('#VAS_ddlCU' + $self.windowNo);\n      $inputTaskField = inputDiv.find('.VAS_AdhocField');\n      VAS_txtSUQtyForPU = inputDiv.find('#VAS_txtSUQtyForPU' + $self.windowNo);\n      VAS_txtPUQtyForPU = inputDiv.find('#VAS_txtPUQtyForPU' + $self.windowNo);\n      VAS_txtSUQtyForSU = inputDiv.find('#VAS_txtSUQtyForSU' + $self.windowNo);\n      VAS_txtPUQtyForSU = inputDiv.find('#VAS_txtPUQtyForSU' + $self.windowNo);\n      VAS_txtSUQtyForCU = inputDiv.find('#VAS_txtSUQtyForCU' + $self.windowNo);\n      VAS_txtPUQtyForCU = inputDiv.find('#VAS_txtPUQtyForCU' + $self.windowNo);\n      VAS_Alltxt = inputDiv.find('.vas-txtbox');\n      C_UOM_ID = VIS.Env.getCtx().getWindowContext($self.windowNo, \"C_UOM_ID\");\n      M_Product_ID = VIS.Env.getCtx().getWindowContext($self.windowNo, \"M_Product_ID\");\n      inputSave = inputDiv.find('#VAS_Save' + $self.windowNo);\n      inputCancel = inputDiv.find('#VAS_Cancel' + $self.windowNo);\n    }\n    ;\n    this.initLoad = function () {\n      /**/\n      var UOMlookup = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.TableDir, \"C_UOM_ID\", 0, false);\n      $self.cmbUOM = new VIS.Controls.VComboBox(\"C_UOM_ID\", true, true, true, UOMlookup, 150, VIS.DisplayType.TableDir);\n      $self.cmbUOM.setValue(C_UOM_ID);\n      var $UOMddlControlWrap = $('<div class=\"vis-control-wrap ddlPadding\">');\n      $inputUOM.append($UOMddlControlWrap);\n      $UOMddlControlWrap.append($self.cmbUOM.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.Msg.getMsg(\"VAS_ddlUOM\") + '</label><span class= \"vis-ev-ctrlinfowrap\"</span>');\n      $inputUOM.append($UOMddlControlWrap);\n      var PUlookup = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.TableDir, \"C_UOM_ID\", 0, false);\n      $self.cmbPU = new VIS.Controls.VComboBox(\"C_UOM_ID\", true, false, true, PUlookup, 150, VIS.DisplayType.TableDir);\n      $self.cmbPU.setValue(C_UOM_ID);\n      var $PurControlWrap = $('<div class=\"vis-control-wrap ddlPadding\">');\n      $inputPurUnit.append($PurControlWrap);\n      $PurControlWrap.append($self.cmbPU.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.Msg.getMsg(\"VAS_ddlPUUnit\") + '</label><span class= \"vis-ev-ctrlinfowrap\"</span>');\n      ;\n      $inputPurUnit.append($PurControlWrap);\n      var SUlookup = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.TableDir, \"C_UOM_ID\", 0, false);\n      $self.cmbSU = new VIS.Controls.VComboBox(\"C_UOM_ID\", true, false, true, SUlookup, 150, VIS.DisplayType.TableDir);\n      $self.cmbSU.setValue(C_UOM_ID);\n      var $SUControlWrap = $('<div class=\"vis-control-wrap ddlPadding\">');\n      $inputSuUnit.prepend($SUControlWrap);\n      $SUControlWrap.append($self.cmbSU.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.Msg.getMsg(\"VAS_ddlSUUnit\") + '</label><span class= \"vis-ev-ctrlinfowrap\"</span>');\n      $inputSuUnit.append($SUControlWrap);\n      var CUlookup = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.TableDir, \"C_UOM_ID\", 0, false);\n      $self.cmbCU = new VIS.Controls.VComboBox(\"C_UOM_ID\", true, false, true, CUlookup, 150, VIS.DisplayType.TableDir);\n      $self.cmbCU.setValue(C_UOM_ID);\n      var $CUControlWrap = $('<div class=\"vis-control-wrap ddlPadding\">');\n      $inputCuUnit.prepend($CUControlWrap);\n      $CUControlWrap.append($self.cmbCU.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.Msg.getMsg(\"VAS_ddlCUUnit\") + '</label><span class= \"vis-ev-ctrlinfowrap\"</span>');\n      $inputCuUnit.append($CUControlWrap);\n      $root.append(inputDiv);\n\n      // This function used to restrict the alphabet in textbox\n      VAS_Alltxt.on('keypress', function (evt) {\n        if (evt.keyCode > 31 && (evt.keyCode < 48 || evt.keyCode > 57)) return false;\n      });\n\n      //Function used to  calculate the divide rate\n\n      VAS_txtSUQtyForPU.on('change', function () {\n        rate1 = VAS_txtSUQtyForPU.val();\n        rate2 = VIS.Env.ZERO;\n        one = 1.0;\n        if (rate1 != 0) {\n          rate2 = (one / rate1).toFixed(12);\n          VAS_txtPUQtyForPU.val(rate2);\n        } else {\n          VAS_txtPUQtyForPU.val(0);\n        }\n      });\n\n      //Function used to  calculate the multiply rate\n      VAS_txtPUQtyForPU.on('change', function () {\n        rate1 = VAS_txtPUQtyForPU.val();\n        rate2 = VIS.Env.ZERO;\n        one = 1.0;\n        if (rate1 != 0) {\n          rate2 = (one / rate1).toFixed(12);\n          VAS_txtSUQtyForPU.val(rate2);\n        } else {\n          VAS_txtSUQtyForPU.val(0);\n        }\n      });\n\n      //Function used to  calculate the divide rate\n\n      VAS_txtSUQtyForSU.on('change', function () {\n        rate1 = VAS_txtSUQtyForSU.val();\n        rate2 = VIS.Env.ZERO;\n        one = 1.0;\n        if (rate1 != 0) {\n          rate2 = (one / rate1).toFixed(12);\n          VAS_txtPUQtyForSU.val(rate2);\n        } else {\n          VAS_txtPUQtyForSU.val(0);\n        }\n      });\n\n      //Function used to  calculate the multiply rate\n\n      VAS_txtPUQtyForSU.on('change', function () {\n        rate1 = VAS_txtPUQtyForSU.val();\n        rate2 = VIS.Env.ZERO;\n        one = 1.0;\n        if (rate1 != 0) {\n          rate2 = (one / rate1).toFixed(12);\n          VAS_txtSUQtyForSU.val(rate2);\n        } else {\n          VAS_txtSUQtyForSU.val(0);\n        }\n      });\n\n      //Function used to  calculate the divide rate\n      VAS_txtSUQtyForCU.on('change', function () {\n        rate1 = VAS_txtSUQtyForCU.val();\n        rate2 = VIS.Env.ZERO;\n        one = 1.0;\n        if (rate1 != 0) {\n          rate2 = (one / rate1).toFixed(12);\n          VAS_txtPUQtyForCU.val(rate2);\n        } else {\n          VAS_txtPUQtyForCU.val(0);\n        }\n      });\n\n      //Function used to  calculate the multiply rate\n      VAS_txtPUQtyForCU.on('change', function () {\n        rate1 = VAS_txtPUQtyForCU.val();\n        rate2 = VIS.Env.ZERO;\n        one = 1.0;\n        if (rate1 != 0) {\n          rate2 = (one / rate1).toFixed(12);\n          VAS_txtSUQtyForCU.val(rate2);\n        } else {\n          VAS_txtSUQtyForCU.val(0);\n        }\n      });\n\n      //SET qty 1 and disabled textbox when base uom and selected uom same\n\n      $self.cmbPU.fireValueChanged = function () {\n        $self.cmbPU.oldValue = null;\n        if (C_UOM_ID == $self.cmbPU.getValue()) {\n          VAS_txtSUQtyForPU.prop('disabled', true);\n          VAS_txtPUQtyForPU.prop('disabled', true);\n          VAS_txtSUQtyForPU.val(1);\n          VAS_txtPUQtyForPU.val(1);\n        } else {\n          VAS_txtSUQtyForPU.prop('disabled', false);\n          VAS_txtPUQtyForPU.prop('disabled', false);\n          VAS_txtSUQtyForPU.val(\"\");\n          VAS_txtPUQtyForPU.val(\"\");\n        }\n      };\n\n      //SET qty 1 and disabled textbox when base uom and selected uom same\n\n      $self.cmbSU.fireValueChanged = function () {\n        $self.cmbSU.oldValue = null;\n        if (C_UOM_ID == $self.cmbSU.getValue()) {\n          VAS_txtSUQtyForSU.prop('disabled', true);\n          VAS_txtPUQtyForSU.prop('disabled', true);\n          VAS_txtSUQtyForSU.val(1);\n          VAS_txtPUQtyForSU.val(1);\n        } else {\n          VAS_txtSUQtyForSU.prop('disabled', false);\n          VAS_txtPUQtyForSU.prop('disabled', false);\n          VAS_txtSUQtyForSU.val(\"\");\n          VAS_txtPUQtyForSU.val(\"\");\n        }\n      };\n\n      //SET qty 1 and disabled textbox when base uom and selected uom same\n\n      $self.cmbCU.fireValueChanged = function () {\n        $self.cmbCU.oldValue = null;\n        if (C_UOM_ID == $self.cmbCU.getValue()) {\n          VAS_txtSUQtyForCU.prop('disabled', true);\n          VAS_txtPUQtyForCU.prop('disabled', true);\n          VAS_txtSUQtyForCU.val(1);\n          VAS_txtPUQtyForCU.val(1);\n        } else {\n          VAS_txtSUQtyForCU.prop('disabled', false);\n          VAS_txtPUQtyForCU.prop('disabled', false);\n          VAS_txtSUQtyForCU.val(\"\");\n          VAS_txtPUQtyForCU.val(\"\");\n        }\n      };\n\n      /*      click function on save button */\n      inputSave.on(VIS.Events.onTouchStartOrClick, function () {\n        saveTask();\n      });\n\n      /*      click function on save button */\n      inputCancel.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.frame.close();\n      });\n      busyDiv(false);\n    };\n\n    /* save task functionality to send the data to server for save the UOM conversion data*/\n    function saveTask() {\n      if ($self.cmbPU.getValue() == null) {\n        VIS.ADialog.info(\"VAS_PuUnitMandatory\");\n        busyDiv(false);\n        return;\n      } else if ($self.cmbSU.getValue() == null) {\n        VIS.ADialog.info(\"VAS_SuUnitMandatory\");\n        busyDiv(false);\n        return;\n      } else if ($self.cmbCU.getValue() == null) {\n        VIS.ADialog.info(\"VAS_CuUnitMandatory\");\n        busyDiv(false);\n        return;\n      } else if (VAS_txtSUQtyForPU.val() == \"\" || VAS_txtSUQtyForPU.val() == 0 || VAS_txtPUQtyForPU.val() == \"\" || VAS_txtPUQtyForPU.val() == 0 || VAS_txtSUQtyForSU.val() == \"\" || VAS_txtSUQtyForSU.val() == 0 || VAS_txtPUQtyForSU.val() == \"\" || VAS_txtPUQtyForSU.val() == 0 || VAS_txtSUQtyForCU.val() == \"\" || VAS_txtSUQtyForCU.val() == 0 || VAS_txtPUQtyForCU.val() == \"\" || VAS_txtPUQtyForCU.val() == 0) {\n        VIS.ADialog.info(\"ProductUOMConversionRateError\");\n        busyDiv(false);\n        return;\n      }\n\n      //  Get the values from the dropdowns\n      var puValue = $self.cmbPU.getValue();\n      var suValue = $self.cmbSU.getValue();\n      var cuValue = $self.cmbCU.getValue();\n      var multiplyRateList = [];\n\n      // Get the values for the quantity fields\n      var qtyForPU = VAS_txtSUQtyForPU.val();\n      var qtyForSU = VAS_txtSUQtyForSU.val();\n      var qtyForCU = VAS_txtSUQtyForCU.val();\n      if (puValue === suValue && suValue === cuValue) {\n        // All values are the same\n        if (qtyForPU === qtyForSU && qtyForSU === qtyForCU) {\n          multiplyRateList.push({\n            C_UOM_To_ID: puValue,\n            MultiplyRate: qtyForPU,\n            DivideRate: VAS_txtPUQtyForPU.val()\n          });\n        } else {\n          // Quantity values are different for the same dropdown values\n          VIS.ADialog.info(\"VAS_AllUnitSameButDifferQty\");\n          busyDiv(false);\n          return;\n        }\n      } else if (puValue === suValue || puValue === cuValue || suValue === cuValue) {\n        // Two values are the same\n        if (puValue === suValue) {\n          if (qtyForPU !== qtyForSU) {\n            VIS.ADialog.info(\"VAS_AllUnitSameButDifferQty\");\n            busyDiv(false);\n            return;\n          }\n          multiplyRateList.push({\n            C_UOM_To_ID: puValue,\n            MultiplyRate: qtyForPU,\n            DivideRate: VAS_txtPUQtyForPU.val()\n          });\n          multiplyRateList.push({\n            C_UOM_To_ID: cuValue,\n            MultiplyRate: VAS_txtSUQtyForCU.val(),\n            DivideRate: VAS_txtPUQtyForCU.val()\n          });\n        } else if (puValue === cuValue) {\n          if (qtyForPU !== qtyForCU) {\n            VIS.ADialog.info(\"VAS_AllUnitSameButDifferQty\");\n            busyDiv(false);\n            return;\n          }\n          multiplyRateList.push({\n            C_UOM_To_ID: puValue,\n            MultiplyRate: qtyForPU,\n            DivideRate: VAS_txtPUQtyForPU.val()\n          });\n          multiplyRateList.push({\n            C_UOM_To_ID: suValue,\n            MultiplyRate: VAS_txtSUQtyForSU.val(),\n            DivideRate: VAS_txtPUQtyForSU.val()\n          });\n        } else if (suValue === cuValue) {\n          if (qtyForSU !== qtyForCU) {\n            VIS.ADialog.info(\"VAS_AllUnitSameButDifferQty\");\n            busyDiv(false);\n            return;\n          }\n          multiplyRateList.push({\n            C_UOM_To_ID: puValue,\n            MultiplyRate: qtyForPU,\n            DivideRate: VAS_txtPUQtyForPU.val()\n          });\n          multiplyRateList.push({\n            C_UOM_To_ID: suValue,\n            MultiplyRate: qtyForSU,\n            DivideRate: VAS_txtPUQtyForSU.val()\n          });\n        }\n      } else {\n        // All values are different\n        multiplyRateList.push({\n          C_UOM_To_ID: puValue,\n          MultiplyRate: qtyForPU,\n          DivideRate: VAS_txtPUQtyForPU.val()\n        });\n        multiplyRateList.push({\n          C_UOM_To_ID: suValue,\n          MultiplyRate: qtyForSU,\n          DivideRate: VAS_txtPUQtyForSU.val()\n        });\n        multiplyRateList.push({\n          C_UOM_To_ID: cuValue,\n          MultiplyRate: qtyForCU,\n          DivideRate: VAS_txtPUQtyForCU.val()\n        });\n      }\n      var uomConversionData = multiplyRateList;\n      busyDiv(true);\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/SaveUOMConversion\",\n        data: {\n          C_UOM_ID: $self.cmbUOM.getValue(),\n          multiplyRateList: JSON.stringify(uomConversionData),\n          Product_ID: M_Product_ID,\n          VAS_PurchaseUOM_ID: puValue,\n          VAS_SalesUOM_ID: suValue,\n          VAS_ConsumableUOM_ID: cuValue\n        },\n        contentType: \"application/json; charset=utf-8\",\n        success: function (result) {\n          result = JSON.parse(result);\n          if (result != null) {\n            if (result.Status == \"1\") {\n              VIS.ADialog.info(\"\", \"\", result.message);\n              busyDiv(false);\n              $self.frame.close();\n            } else {\n              VIS.ADialog.info(\"\", \"\", result.message);\n              busyDiv(false);\n            }\n          }\n        },\n        error: function (eror) {\n          VIS.ADialog.info(\"\", \"\", VIS.Msg.getMsg(\"VAS_UOMConvNotSaved\"));\n          busyDiv(false);\n          console.log(eror);\n        }\n      });\n    }\n    ;\n\n    /* dispose to clean the memory*/\n    this.disposeComponent = function () {\n      if ($root) $root.remove();\n      $root = null;\n      $bsyDiv = null;\n      inputDiv = null;\n      $self = null;\n      inputSave = null;\n      VAS_txtPUQtyForPU = null;\n      VAS_txtSUQtyForPU = null;\n      VAS_txtSUQtyForSU = null;\n      VAS_txtPUQtyForSU = null;\n      VAS_txtSUQtyForCU = null;\n      VAS_txtPUQtyForCU = null;\n      VAS_Alltxt = null;\n      C_UOM_ID = null;\n      M_Product_ID = null;\n      rate1 = null;\n      rate2 = null;\n      one = null;\n    };\n    this.initalize = function () {\n      // load by java script\n      initializeComponent();\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* busydiv indicator*/\n    function busyDiv(Value) {\n      if (Value) {\n        $bsyDiv[0].style.visibility = 'visible';\n      } else {\n        $bsyDiv[0].style.visibility = 'hidden';\n      }\n    }\n    ;\n    VAS.VAS_ProductUomSetup.prototype.init = function (windowNo, frame) {\n      /*Assign to this Variable */\n      this.frame = frame;\n      this.windowNo = windowNo;\n      this.initalize();\n      this.frame.getContentGrid().append(this.getRoot());\n      var ssef = this;\n      window.setTimeout(function () {\n        ssef.initLoad();\n      }, 50);\n    };\n\n    /*Must implement dispose*/\n    VAS.VAS_ProductUomSetup.prototype.dispose = function () {\n      /*CleanUp Code */\n      /*dispose this component*/\n      this.disposeComponent();\n      this.frame = null;\n      this.windowNo = null;\n      C_UOM_ID = null;\n    };\n\n    /* To set the width of frame */\n    VAS.VAS_ProductUomSetup.prototype.setWidth = function () {\n      return 1000;\n    };\n\n    /*  TO set the height of frame*/\n    VAS.VAS_ProductUomSetup.prototype.setHeight = function () {\n      return 480;\n    };\n    // Load form into VIS\n    VAS.VAS_ProductUomSetup = VAS.VAS_ProductUomSetup;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ProductUomSetup.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_PurchaseOrderTabPanel.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get PO History  Data\r\n * chronological  : Development\r\n * Created Date   : 01 July 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_PurchaseOrderTabPanel = function () {\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var lblTitle = null;\n    var ctx = this.ctx;\n    var self = this;\n    var elements = ["VAS_QtyOrderedPO", "VAS_QtyDeliveredPO", "VAS_QtyInvoicedPO", "VAS_ProductsPO"];\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    var $root = $(\'<div class = "VAS-PO-summary h-100"></div>\');\n    var headerLabel = $(\'<div class="VAS-polist-heading">\' + VAS.translatedTexts.VAS_ProductsPO + \'</div>\');\n    var wrapperDiv = $("<div class =\'VAS-PO-list-col\'></div>");\n\n    /*This function is used to get PO History  data*/\n    this.getProductPanel = function (recordID) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS/PoReceipt/GetPOLineData",\n        type: "GET",\n        dataType: "json",\n        contentType: "application/json; charset=utf-8",\n        data: {\n          OrderID: recordID\n        },\n        complete: function () {\n          if ($root.closest(\'.vis-ad-w-p-actionpanel-b\').length > 0) {\n            $root.closest(\'.vis-ad-w-p-ap-tp-outerwrap\').css(\'height\', \'100%\');\n          }\n        },\n        success: function (data) {\n          wrapperDiv.empty();\n          if (lblTitle != null) {\n            lblTitle.remove();\n          }\n          data = JSON.parse(data);\n          if (data != null && data.length > 0) {\n            if (data[0].OrderStatusValue == \'DE\' || data[0].OrderStatusValue == \'DI\') {\n              lblTitle = $(\'<div class="VAS-delivered-msg"><i class="fa fa-check-circle" aria-hidden="true"></i><span class="">\' + data[0].OrderStatus + \'</span> </div>\');\n            } else if (data[0].OrderStatusValue === \'OP\' || data[0].OrderStatusValue === "") {\n              lblTitle = $(\'<div class="VAS-Open-msg"><span class="vis vis-info"></span>\' + data[0].OrderStatus + \'</div>\');\n            } else {\n              lblTitle = $(\'<div class="VAS-partially-msg"><span class="vis vis-info"></span>\' + data[0].OrderStatus + \'</div>\');\n            }\n            $root.append(lblTitle).append(headerLabel);\n            for (i = 0; i < data.length; i++) {\n              var productDesign = \'<div class="VAS-polist-box">\';\n              if (data[i].OrderLineStatusValue === \'OP\' || data[i].OrderLineStatusValue === "") {\n                productDesign += \'<div class="VAS-po-info-icon"><span class="vis vis-info vas-openItem"></span></div>\';\n              } else if (data[i].OrderLineStatusValue && data[i].OrderLineStatusValue.contains(\'P\')) {\n                productDesign += \'<div class="VAS-po-info-icon"><span class="vis vis-info"></span></div>\';\n              } else {\n                productDesign += \'<div class="VAS-po-approve-icon"><i class="fa fa-check-circle" aria-hidden="true"></i></div>\';\n              }\n              var imag = data[i].ImageUrl;\n              if (imag != "") {\n                imag = imag.substring(imag.lastIndexOf("/") + 1, imag.length);\n                var d = new Date();\n                productDesign += \'<div class="VAS-product-thumbnail"><img alt="" title="" style="opacity:1;" src="\' + VIS.Application.contextUrl + "Images/Thumb46x46/" + imag + "?" + d.getTime() + \'"></div>\';\n              } else {\n                productDesign += \'<div class="VAS-product-thumbnail"><i class="vis vis-image"></i></div>\';\n              }\n              productDesign += \'<div class="VAS-PO-details">\' + \'<h1>\' + data[i].ProductName + \'</h1>\' + \'<div class="VAS-Attrbiute">\' + (data[i].AttributeName == null ? "" : data[i].AttributeName) + \'</div>\' + \'<div class="VAS-UPC-num">\' + (data[i].UPC == null || data[i].UPC == "" ? "" : data[i].UPC + \' | \') + \'<span>\' + data[i].UOM + \'</span></div>\' + \'<div class="VAS-order-description">\' + \'<div class="VAS-order-values"><h6>\' + VAS.translatedTexts.VAS_QtyOrderedPO + \'</h6><span>\' + data[i].QtyOrdered + \'</span></div>\' + \'<div class="VAS-order-values"><h6>\' + VAS.translatedTexts.VAS_QtyDeliveredPO + \'</h6><span>\' + data[i].QtyDelivered + \'</span></div>\' + /* \'<div class="VAS-order-values"><h6>\' + VAS.translatedTexts.VAS_QtyInvoicedPO + \'</h6><span>\' + data[i].QtyInvoiced + \'</span></div>\' +*/\n              \'</div>\' + \'</div>\' + \'</div>\';\n\n              //Appending design to wrapperDiv\n              wrapperDiv.append(productDesign);\n            }\n          }\n          $root.append(wrapperDiv);\n        },\n        error: function (eror) {\n          console.log(eror);\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.VAS_PurchaseOrderTabPanel.prototype.startPanel = function (windowNo, curTab) {\n      self.windowNo = windowNo;\n      self.curTab = curTab;\n    };\n\n    /* This function to update tab panel based on selected record */\n    VAS.VAS_PurchaseOrderTabPanel.prototype.refreshPanelData = function (recordID, selectedRow, windowEvt) {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getProductPanel(recordID);\n    };\n\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.VAS_PurchaseOrderTabPanel.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n\n    /* Disposing all variables from memory */\n    VAS.VAS_PurchaseOrderTabPanel.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n      lblTitle = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_PurchaseOrderTabPanel.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_PurchaseStateDetailWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Created Widget To Sale/Purchase state\r\n * chronological  : Development\r\n * Created Date   : 28 August 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_PurchaseStateDetailWidget = function () {\n    this.frame;\n    this.windowNo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">');\n    var $maindiv = $('<div class=\"vas-psdwidg-purchase-state-col\">');\n    var ctx = VIS.Env.getCtx();\n    var unit = null;\n    var msgArray = null;\n\n    /*Intialize function will intialize busy indiactor*/\n    this.initalize = function () {\n      createBusyIndicator();\n      $bsyDiv[0].style.visibility = \"visible\";\n    };\n\n    /*Looping through this array to show icon of amount*/\n    var icon = ['<i class=\"fa fa-hourglass-start\"></i>', '<i class=\"fa fa-hourglass-start\"></i>', '<i class=\"fa fa-handshake-o\"></i>', '<i class=\"fa fa-times\"></i>', '<i class=\"fa fa-check-square\"></i>', '<i class=\"vis vis-createdocumentx\"></i>', '<i class=\"vis vis-drafted\"></i>'];\n\n    /*This function will load data in widget */\n    this.intialLoad = function () {\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS/PoReceipt/GetPurchaseStateDetail\", {\n        \"ISOtrx\": VIS.Env.getCtx().isSOTrx($self.windowNo)\n      }, function (dr) {\n        var gridDataResult = dr;\n        if (gridDataResult != null && gridDataResult.length > 0) {\n          InitailizeMessage();\n          var HeadingDesign = '<div class=\"vas-psdwidg-whiteBoxhead vas-psdwidg-tile-heading vas-psdwidg-heading-item\">';\n          //If isSotrx tru means sale transaction then will show sale as label else will be purchase\n          if (VIS.Env.getCtx().isSOTrx($self.windowNo)) {\n            HeadingDesign += '<h1><span>' + VAS.translatedTexts.VAS_Sale + '</span><span>' + VAS.translatedTexts.VAS_SaleState + '</span></h1>';\n          } else {\n            HeadingDesign += '<h1 class=\"vas-psdwidg-stateheading\"><span>' + VAS.translatedTexts.VAS_Purchase + '</span><span>' + VAS.translatedTexts.VAS_State + '</span></h1>';\n          }\n          HeadingDesign += '</div>';\n          $maindiv.append(HeadingDesign);\n          $maindiv.append('<div class=\"vas-psdwidg-whiteBox vas-psdwidg-itme2\">' + '<div class=\"vas-psdwidg-totalSale\">' + (gridDataResult[0].Symbol.length != 3 ? '<span class=\"vas-vaswidg-Symbol\">' + gridDataResult[0].Symbol + '</span>' + ' ' : '') + formatLargeNumber(gridDataResult[0].TotalAmt, gridDataResult[0].stdPrecision) + '<span class=\"vas-psdwidg-unit\">' + unit + '</span>' + (gridDataResult[0].Symbol.length == 3 ? ' ' + gridDataResult[0].Symbol : '') + '</div>' + '<div class=\"vas-psdwidg-icondiv\">' + icon[0] + '</div>' + '<div class=\"vas-psdwidg-salesYear\">' + '<span>' + msgArray[0] + '</span>' + '</div>');\n          for (var i = 1; i < gridDataResult.length; i++) {\n            //Added this condition because in RTL the text of unallocated receipt and Hold payment was not in centre\n            if (gridDataResult[i].Type == \"Hold\" || gridDataResult[i].Type == \"UnAllocated\") {\n              $maindiv.append('<div class=\"vas-psdwidg-whiteBox\">' + '<div class=\"vas-psdwidg-totalSale\">' + (gridDataResult[i].Symbol.length != 3 ? '<span class=\"vas-vaswidg-Symbol\">' + gridDataResult[i].Symbol + '</span>' + ' ' : '') + formatLargeNumber(gridDataResult[i].TotalAmt, gridDataResult[i].stdPrecision) + '<span class=\"vas-psdwidg-unit\">' + unit + '</span>' + (gridDataResult[i].Symbol.length == 3 ? ' ' + gridDataResult[i].Symbol : '') + '</div>' + '<div class=\"vas-psdwidg-icondiv\">' + icon[i] + '</div>' + '<div class=\"vas-psdwidg-salesYear vas-expay-rtlHU\">' + '<span>' + msgArray[i] + '</span>' + '</div>');\n            } else {\n              $maindiv.append('<div class=\"vas-psdwidg-whiteBox\">' + '<div class=\"vas-psdwidg-totalSale\">' + (gridDataResult[i].Symbol.length != 3 ? '<span class=\"vas-vaswidg-Symbol\">' + gridDataResult[i].Symbol + '</span>' + ' ' : '') + formatLargeNumber(gridDataResult[i].TotalAmt, gridDataResult[i].stdPrecision) + '<span class=\"vas-psdwidg-unit\">' + unit + '</span>' + (gridDataResult[i].Symbol.length == 3 ? ' ' + gridDataResult[i].Symbol : '') + '</div>' + '<div class=\"vas-psdwidg-icondiv\">' + icon[i] + '</div>' + '<div class=\"vas-psdwidg-salesYear\">' + '<span>' + msgArray[i] + '</span>' + '</div>');\n            }\n          }\n          $root.append($maindiv);\n        }\n        $bsyDiv[0].style.visibility = \"hidden\";\n      });\n    };\n    /*This function used translate message*/\n    function InitailizeMessage() {\n      /*Inisalised Element for array*/\n      var elements = [\"VAS_DueAmt\", \"VAS_IPAmt\", \"VAS_Drafted\", \"VAS_IsHold\", \"VAS_DueSoon\", \"VAS_New\", \"VAS_Disputed\", \"VAS_Million\", \"VAS_Trillion\", \"VAS_UnAllocatedReceipt\", \"VAS_Billion\", \"VAS_Thousand\", \"VAS_Purchase\", \"VAS_State\", \"VAS_Sale\", \"VAS_SaleState\"];\n      VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n      msgArray = [VAS.translatedTexts.VAS_DueAmt, VAS.translatedTexts.VAS_DueSoon, VAS.translatedTexts.VAS_Disputed, VIS.Env.getCtx().isSOTrx($self.windowNo) == true ? VAS.translatedTexts.VAS_UnAllocatedReceipt : VAS.translatedTexts.VAS_IsHold, VAS.translatedTexts.VAS_IPAmt, VAS.translatedTexts.VAS_New, VAS.translatedTexts.VAS_Drafted];\n    }\n    /**\r\n     * This Function is responsible converting the value into million\r\n     * @param {any} number\r\n     * @param {any} stdPrecision\r\n     */\n    function formatLargeNumber(number, stdPrecision) {\n      // Determine the sign of the number\n      var isNegative = number < 0;\n      // Work with the absolute value for formatting\n      var absNumber = Math.abs(number);\n      var formattedNumber;\n\n      // Determine the unit and format the number accordingly\n      if (absNumber >= 1000000000000) {\n        /* Trillion */\n        unit = VAS.translatedTexts.VAS_Trillion;\n        formattedNumber = (absNumber / 1000000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (absNumber >= 1000000000) {\n        /* Billion */\n        unit = VAS.translatedTexts.VAS_Billion;\n        formattedNumber = (absNumber / 1000000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (absNumber >= 1000000) {\n        /* Million */\n        unit = VAS.translatedTexts.VAS_Million;\n        formattedNumber = (absNumber / 1000000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else if (absNumber >= 1000) {\n        /* Thousand */\n        unit = VAS.translatedTexts.VAS_Thousand;\n        formattedNumber = (absNumber / 1000).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: 2,\n          maximumFractionDigits: 2\n        });\n      } else {\n        unit = '';\n        formattedNumber = absNumber.toLocaleString(window.navigator.language, {\n          minimumFractionDigits: stdPrecision,\n          maximumFractionDigits: stdPrecision\n        });\n      }\n\n      // Return the formatted number with the correct sign and unit\n      return (isNegative ? '-' : '') + formattedNumber;\n    }\n    /*This function will show busy indicator in widget */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $bsyDiv.css({\n        \"position\": \"absolute\",\n        \"width\": \"98%\",\n        \"height\": \"97%\",\n        'text-align': 'center',\n        'z-index': '999'\n      });\n      $bsyDiv[0].style.visibility = \"visible\";\n      $root.append($bsyDiv);\n    }\n    ;\n\n    /*This function used to get root*/\n    this.getRoot = function () {\n      return $root;\n    };\n    /*this function is used to refresh design and data of widget*/\n    this.refreshWidget = function () {\n      $bsyDiv[0].style.visibility = \"visible\";\n      $maindiv.empty();\n      $self.intialLoad();\n    };\n  };\n  VAS.VAS_PurchaseStateDetailWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad();\n    }, 50);\n  };\n  VAS.VAS_PurchaseStateDetailWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  /*this function is called when widget size changes*/\n  VAS.VAS_PurchaseStateDetailWidget.prototype.widgetSizeChange = function (widget) {\n    //this.getRoot().css(\"height\", widget.height);\n    //this.getRoot().css(\"width\", widget.width);\n    this.widgetInfo = widget;\n  };\n  /*Used to dispose the variable*/\n  VAS.VAS_PurchaseStateDetailWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_PurchaseStateDetailWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_ScheduleDetail.js":()=>{eval('{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Tab Panel created to get Invoice schedule Data\r\n * chronological  : Development\r\n * Created Date   : 22 October 2024\r\n * Created by     : VIS_427\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_ScheduleDetail = function () {\n    this.record_ID = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var ctx = this.ctx;\n    var pageNo = 1;\n    var pageSize = 10;\n    var $self = this;\n    var TotalPageCount = 0;\n    var ScheduleDataArray = [];\n    var C_Invoice_ID = 0;\n    var elements = ["VAS_LineNum", "DueDate", "DueAmt", "VA009_PaymentMethod_ID", "IsPaid", "DateAcct", "VAS_Payment", "DocumentNo", "C_BankAccount_ID", "VAS_CheckDate", "VAS_CheckNo", "VAS_ClickToSeePayment", "VAS_NotPaid"];\n    var paymentData = [];\n    var ulPaging = null;\n    var liFirstPage = null;\n    var liPrevPage = null;\n    var cmbPage = null;\n    var liCurrPage = null;\n    var liNextPage = null;\n    var liLastPage = null;\n    var divPaging = null;\n    var TabPaneldesign = null;\n    var IsToAppend = false;\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n    var $root = $(\'<div class = "vas-scheduleData-root"></div>\');\n    var wrapperDiv = $("<div class =\'vas-scheduleDataWrapper\'></div>");\n    var divPaging = $(\'<div class="VAS-scheduledata-Paging mr-3">\');\n    this.init = function () {\n      ScheduleDataPanel();\n      $root.append(wrapperDiv);\n      createPageSettings();\n      $root.append(divPaging);\n    };\n    //Function defined to append design\n    function ScheduleDataPanel() {\n      wrapperDiv.append(\'<div class="vas-scheduleDataListGroup">\' + \'<div id="VAS-ScheduleData_\' + $self.windowNo + \'" class="VAS-ScheduleData mb-2">\' + \'</div>\' + \'</div>\');\n    }\n    ;\n    /**\r\n     *  function used to reset the paging according to the \r\n     *  current page count \r\n     * @param {any} TotalPageCount\r\n     */\n    function resetPageCtrls(TotalPageCount) {\n      cmbPage.empty();\n      if (TotalPageCount > 0) {\n        for (var i = 0; i < TotalPageCount; i++) {\n          cmbPage.append($("<option value=" + (i + 1) + ">" + (i + 1) + "</option>"));\n        }\n        cmbPage.val(pageNo);\n        if (TotalPageCount > pageNo) {\n          liNextPage.css("opacity", "1");\n          liLastPage.css("opacity", "1");\n        } else {\n          liNextPage.css("opacity", "0.6");\n          liLastPage.css("opacity", "0.6");\n        }\n        if (pageNo > 1) {\n          liFirstPage.css("opacity", "1");\n          liPrevPage.css("opacity", "1");\n        } else {\n          liFirstPage.css("opacity", "0.6");\n          liPrevPage.css("opacity", "0.6");\n        }\n        if (TotalPageCount == 1) {\n          liFirstPage.css("opacity", "0.6");\n          liPrevPage.css("opacity", "0.6");\n          liNextPage.css("opacity", "0.6");\n          liLastPage.css("opacity", "0.6");\n        }\n      } else {\n        liFirstPage.css("opacity", "0.6");\n        liPrevPage.css("opacity", "0.6");\n        liNextPage.css("opacity", "0.6");\n        liLastPage.css("opacity", "0.6");\n      }\n    }\n    ;\n    /*function is used to create the paging div*/\n    function createPageSettings() {\n      ulPaging = $(\'<ul class="vis-statusbar-ul">\');\n      liFirstPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-shiftleft" title="First Page" style="opacity: 0.6;"></i></div></li>\');\n      liPrevPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-pageup" title="Page Up" style="opacity: 0.6;"></i></div></li>\');\n      cmbPage = $(\'<select>\');\n      liCurrPage = $(\'<li>\').append(cmbPage);\n      liNextPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-pagedown" title="Page Down" style="opacity: 0.6;"></i></div></li>\');\n      liLastPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-shiftright" title="Last Page" style="opacity: 0.6;"></i></div></li>\');\n      ulPaging.append(liFirstPage).append(liPrevPage).append(liCurrPage).append(liNextPage).append(liLastPage);\n      divPaging.append(ulPaging);\n      pageEvents();\n    }\n    ;\n    /* function used to create click events for the paging arrows */\n    function pageEvents() {\n      liFirstPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo = 1;\n          $self.getInvoiceTaxData(C_Invoice_ID);\n        }\n      });\n      liPrevPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo--;\n          $self.getInvoiceTaxData(C_Invoice_ID);\n        }\n      });\n      liNextPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo++;\n          $self.getInvoiceTaxData(C_Invoice_ID);\n        }\n      });\n      liLastPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          pageNo = parseInt(cmbPage.find("Option:last").val());\n          $self.getInvoiceTaxData(C_Invoice_ID);\n        }\n      });\n      cmbPage.on("change", function () {\n        pageNo = cmbPage.val();\n        $self.getInvoiceTaxData(C_Invoice_ID);\n      });\n    }\n    ;\n    /*This function is used to get invoice schedule data*/\n    this.getInvoiceTaxData = function (recordID) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS/PoReceipt/GetScheduleData",\n        type: "GET",\n        dataType: "json",\n        contentType: "application/json; charset=utf-8",\n        data: {\n          InvoiceId: recordID,\n          pageNo: pageNo,\n          pageSize: pageSize\n        },\n        success: function (data) {\n          wrapperDiv.find(\'#VAS-ScheduleData_\' + $self.windowNo).empty();\n          wrapperDiv.find(\'#vas_norecordcont_\' + $self.windowNo).remove();\n          if (JSON.parse(data) != "") {\n            data = JSON.parse(data);\n            if (data != null && data.length > 0) {\n              ScheduleDataArray = data;\n              TotalPageCount = Math.ceil(data[0].RecordCount / pageSize);\n              for (i = 0; i < data.length; i++) {\n                TabPaneldesign = \'<div data-payscheduleid="\' + data[i].C_InvoicePaySchedule_ID + \'" class="vas-scheduledatalist">\' + \'<div class="vas-scheduleDataListItem mb-2 vas-scheduleDataListItem-block" title="\' + VAS.translatedTexts.VAS_ClickToSeePayment + \'">\';\n                if (data[i].IsPaid == "Y") {\n                  TabPaneldesign += \'<span class="vas-scheduleDataListPaid">\' + VAS.translatedTexts.IsPaid + \'</span>\';\n                } else {\n                  TabPaneldesign += \'<span class="vas-scheduleDataListNotPaid">\' + VAS.translatedTexts.VAS_NotPaid + \'</span>\';\n                }\n                TabPaneldesign += \'<div class="vas-scheduleData-sglItem mb-2">\' + \'<div class="vas-scheduleDataElement">\' + \'<span class="vas-scheduleDataElementTTl font-weight-bold">\' + VAS.translatedTexts.DueDate + \'</span>\' + \'<span class="vas-scheduleDataElementValue">\' + VIS.Utility.Util.getValueOfDate(data[i].DueDate).toLocaleDateString() + \'</span>\' + \'</div>\' + \'<div class="vas-scheduleDataElement vas-setTaxPaybleAmtWidth">\' + \'<span class="vas-scheduleDataElementTTl font-weight-bold text-right">\' + VAS.translatedTexts.DueAmt + \'</span>\' + \'<span class="vas-scheduleDataElementValue text-right">\' + data[i].DueAmt.toLocaleString(window.navigator.language, {\n                  minimumFractionDigits: data[i].stdPrecision,\n                  maximumFractionDigits: data[i].stdPrecision\n                }) + \'</span>\' + \'</div>\' + \'<div class="vas-scheduleDataElement vas-setTaxAmtWidth">\' + \'<span class="vas-scheduleDataElementTTl font-weight-bold" title="\' + VAS.translatedTexts.VA009_PaymentMethod_ID + \'">\' + VAS.translatedTexts.VA009_PaymentMethod_ID + \'</span>\' + \'<span class="vas-scheduleDataElementValue">\' + data[i].PayMethod + \'</span>\' + \'</div>\' + \'</div >\' + \'</div>\' + \'<div id="VAS-PaymentData_\' + $self.windowNo + \'" class="VAS-PaymentData mb-2">\' + \'</div>\' + \'</div>\';\n                TabPaneldesign += \'<div id="VAS-PaymentData_\' + $self.windowNo + \'" class="VAS-PaymentData mb-2">\' + \'</div>\' + \'</div>\';\n\n                //Appending design to wrapperDiv\n                wrapperDiv.find(\'#VAS-ScheduleData_\' + $self.windowNo).append(TabPaneldesign);\n              }\n              $root.find(\'.VAS-scheduledata-Paging\').show();\n              resetPageCtrls(TotalPageCount);\n\n              /* handled click event of schedule div to get payment associated with it*/\n              wrapperDiv.find(\'#VAS-ScheduleData_\' + $self.windowNo).find(\'.vas-scheduledatalist\').on("click", function () {\n                var scheduleId = $(this).attr("data-payscheduleid");\n                paymentData = jQuery.grep(ScheduleDataArray, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value.C_InvoicePaySchedule_ID) == VIS.Utility.Util.getValueOfInt(scheduleId);\n                });\n                $(this).find(\'.VAS-PaymentData\').click(function (e) {\n                  e.stopPropagation();\n                });\n                wrapperDiv.find(\'#VAS-ScheduleData_\' + $self.windowNo).find(\'.vas-scheduleDataListItem\').removeClass(\'vas-scheduleData-Active\');\n                $(this).find(\'.vas-scheduleDataListItem\').addClass(\'vas-scheduleData-Active\');\n                TabPaneldesign = \'<div class="vas-paymentDataListItem vas-newListItem mb-2">\' + \'<div class="vas-paymentheading">\' + VAS.translatedTexts.VAS_Payment + \'</div>\' + \'<hr class="vas-paymentData-underline">\' + \'<div class="vas-paymentData-sglItem mb-2">\' + \'<div class="vas-paymentDataElement">\' + \'<span class="vas-paymentDataElementTTl font-weight-bold">\' + VAS.translatedTexts.DocumentNo + \'</span>\' + \'<span class="vas-paymentDataElementValue">\' + (paymentData[0].DocumentNo || \'\') + \'</span>\' + \'</div>\' + \'<div class="vas-paymentDataElement">\' + \'<span class="vas-paymentDataElementTTl font-weight-bold">\' + VAS.translatedTexts.DateAcct + \'</span>\' + \'<span class="vas-paymentDataElementValue">\' + (paymentData[0].DateAcct != null ? VIS.Utility.Util.getValueOfDate(paymentData[0].DateAcct).toLocaleDateString() : \'\') + \'</span>\' + \'</div>\' + \'<div class="vas-paymentDataElement">\' + \'<span class="vas-paymentDataElementTTl font-weight-bold">\' + VAS.translatedTexts.VAS_CheckDate + \'</span>\' + \'<span class="vas-paymentDataElementValue">\' + (paymentData[0].CheckDate != null ? VIS.Utility.Util.getValueOfDate(paymentData[0].CheckDate).toLocaleDateString() : \'\') + \'</span>\' + \'</div>\' + \'<div class="vas-paymentDataElement">\' + \'<span class="vas-paymentDataElementTTl font-weight-bold">\' + VAS.translatedTexts.VAS_CheckNo + \'</span>\' + \'<span class="vas-paymentDataElementValue">\' + (paymentData[0].CheckNo || \'\') + \'</span>\' + \'</div>\' + \'</div>\' + \'</div>\' + \'</div>\';\n                /*Handled the appending of payment div*/\n                if ($(this).find(\'#VAS-PaymentData_\' + $self.windowNo).find(\'.vas-paymentDataListItem\').length > 0) {\n                  IsToAppend = false;\n                } else {\n                  IsToAppend = true;\n                  wrapperDiv.find(\'#VAS-ScheduleData_\' + $self.windowNo).find(\'.vas-scheduledatalist\').find(\'#VAS-PaymentData_\' + $self.windowNo).empty();\n                }\n                /*Append payment details div only when invoice is paid and docstatus is not Reversed and void*/\n                if (IsToAppend && paymentData[0].IsPaid == "Y" && paymentData[0].DocStatus != "RE" && paymentData[0].DocStatus != "VO") {\n                  $(this).find(\'#VAS-PaymentData_\' + $self.windowNo).append(TabPaneldesign);\n                } else if (paymentData[0].IsPaid == "Y") {\n                  $(this).find(\'.vas-scheduleDataListItem\').removeClass(\'vas-scheduleData-Active\');\n                  $(this).find(\'#VAS-PaymentData_\' + $self.windowNo).empty();\n                }\n              });\n            }\n          } else {\n            wrapperDiv.append(\'<div class="vas-igwidg-notfounddiv" id="vas_norecordcont_\' + $self.windowNo + \'">\' + VIS.Msg.getMsg("VAS_ScheduleDataNotFound") + \'</div>\');\n            $root.find(\'.VAS-scheduledata-Paging\').hide();\n          }\n        },\n        error: function (eror) {\n          console.log(eror);\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    VAS.VAS_ScheduleDetail.prototype.startPanel = function (windowNo, curTab) {\n      this.windowNo = windowNo;\n      this.curTab = curTab;\n      $self.windowNo = windowNo;\n      this.init();\n    };\n    /* This function to update tab panel based on selected record */\n    VAS.VAS_ScheduleDetail.prototype.refreshPanelData = function (recordID, selectedRow) {\n      this.record_ID = recordID;\n      C_Invoice_ID = recordID;\n      pageNo = 1;\n      pageSize = 10;\n      this.selectedRow = selectedRow;\n      this.getInvoiceTaxData(recordID);\n    };\n    /* This will set width as per window width in dafault case it is 75% */\n    VAS.VAS_ScheduleDetail.prototype.sizeChanged = function (width) {\n      this.panelWidth = width;\n    };\n    /* Disposing all variables from memory */\n    VAS.VAS_ScheduleDetail.prototype.dispose = function () {\n      this.record_ID = 0;\n      this.windowNo = 0;\n      this.curTab = null;\n      this.rowSource = null;\n      this.panelWidth = null;\n      lblTitle = null;\n    };\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_ScheduleDetail.js?\n}')},"./Areas/VAS/Scripts/app/forms/VAS_TimeSheetInvoice.js":()=>{eval("{/********************************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : This Form Created to generate AR invoice against Time recording\r\n * chronological  : Development\r\n * Created Date   : 07 May 2024\r\n * Created by     : VIS_427\r\n ********************************************************************************/\n;\n(function (VAS, $) {\n  function VAS_TimeSheetInvoice() {\n    this.frame;\n    this.windowNo;\n    var $self = this;\n    this.arrListColumns = [];\n    this.PreviewColumns = [];\n    var ctx = VIS.Env.getCtx();\n    var timeExp = null;\n    this.dGrid = null;\n    var AD_Org_ID = null;\n    var precision = 2;\n    var pageNo = 1;\n    var BPWithoutPaymentTerm = [];\n    var BPWithoutPaymentMethod = [];\n    var BPWithZeroPrice = [];\n    var pageSize = 150;\n    var TotalRecords = 0;\n    var toggleside = false;\n    var gridPgnoInvoice = 1;\n    this.lblOrg = new VIS.Controls.VLabel();\n    this.lblCustomer = new VIS.Controls.VLabel();\n    this.lblResource = new VIS.Controls.VLabel();\n    this.tabRecordSelection = new VIS.Controls.VLabel();\n    this.cmbOrg = new VIS.Controls.VComboBox('', false, false, true);\n    this.vSearchCustomer = null;\n    this.vSearchResource = null;\n    this.vSearchRequest = null;\n    this.vSearchTask = null;\n    this.vSearchTimeAndExpense = null;\n    this.vSearchProject = null;\n    var TaskTypeVal = null;\n    var culture = new VIS.CultureSeparator();\n    var format = VIS.DisplayType.GetNumberFormat(VIS.DisplayType.Amount);\n    var dotFormatter = VIS.Env.isDecimalPoint();\n    this.$root = $(\"<div class='vis-formouterwrpdiv vas-arinvroot'>\");\n    this.$busyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis-busyindicatordiv\"></i></div></div>');\n    this.topDiv = null;\n    this.sideDiv = null;\n    this.gridSelectDiv = null;\n    this.bottumDiv = null;\n    this.PreviewGridDiv = null;\n    var $bsyDiv = null;\n    var SubTotal = 0;\n    var $FromDate = null;\n    var $ToDate = null;\n    var $CustomerSelected = null;\n    var $ResourceSelected = null;\n    var $TimeAndExpenseSelected = null;\n    var $TaskSelected = null;\n    var $ProjectSelected = null;\n    var $RequestSelected = null;\n    var $OrgDiv = null;\n    var $CustomerDiv = null;\n    var $ResourceDiv = null;\n    var TimeDiv = null;\n    var ProjectDiv = null;\n    var RequestDiv = null;\n    var TaskDiv = null;\n    var TaskTypeAtApply = null;\n    this.btnToggel = null;\n    this.spnSelect = null;\n    this.btnSpaceDiv = null;\n    this.lblGenrate = null;\n    this.lblSelect = null;\n    var ModulePrefix = null;\n    var LeftSideFields = null;\n    var IsFilterBtnClicked = false;\n    var gridDataArray = [];\n    var PreviewLeftData = [];\n    var PreviewFilteredGridData = [];\n    var TimeExpenseId = [];\n    var RequestId = [];\n    var ResourceId = [];\n    var TaskId = [];\n    var CustomerId = [];\n    var ProjectId = [];\n    var TimeExpenseData = [];\n    var ProjectData = [];\n    var RequestData = [];\n    var TaskData = [];\n    var AppliedTimeExpData = [];\n    var AppliedTaskData = [];\n    var AppliedProjectData = [];\n    var AppliedRequestData = [];\n    var $FilterHeader = null;\n    var sideDivWidth = 260;\n    var SeperationTag = null;\n    var lineDiv = null;\n    // var pushRecords = [];\n    var minSideWidth = 50;\n    var DocTypeDiv = null;\n    //assigne variable value true so that onload the width should be correct\n    var IsSizeChangeOnLoad = true;\n    var selectDivWidth = $(window).width() - (sideDivWidth + 20 + 5);\n    var selectDivFullWidth = $(window).width() - (20 + minSideWidth);\n    //VIS_427 Created array to store column name and tablename to get column id at single request\n    var ColumnData = [{\n      ColumnName: \"AD_Org_ID\",\n      TableName: \"S_TimeExpense\"\n    }, {\n      ColumnName: \"C_BPartner_ID\",\n      TableName: \"S_TimeExpenseLine\"\n    }, {\n      ColumnName: \"S_Resource_ID\",\n      TableName: \"S_Resource\"\n    }, {\n      ColumnName: \"C_ProjectRef_ID\",\n      TableName: \"C_Order\"\n    }, {\n      ColumnName: \"R_Request_ID\",\n      TableName: \"S_TimeExpenseLine\"\n    }, {\n      ColumnName: \"S_TimeExpense_ID\",\n      TableName: \"S_TimeExpense\"\n    }, {\n      ColumnName: \"VA075_Task_ID\",\n      TableName: \"VA075_Task\"\n    }, {\n      ColumnName: \"C_DocTypeTarget_ID\",\n      TableName: \"C_Invoice\"\n    }];\n    //It will store value of column ids\n    var ColumnIds = null;\n\n    //Stored messages which is to be translated\n    var elements = [\"VAS_TimeRecordDoc\", \"VAS_Customer\", \"S_Resource_ID\", \"M_Product_ID\", \"Qty\", \"VAS_TotalBilableAmount\", \"Price\", \"C_BPartner_ID\", \"VA009_PaymentMethod_ID\", \"M_PriceList_ID\", \"C_Charge_ID\", \"C_Currency_ID\", \"C_Uom_ID\", \"VAS_LocationName\", \"VAS_recordCounted\", \"VAS_RecordedDate\", \"VAS_EstimatedTime\", \"VAS_ProjReq_Name\", \"VAS_ProjReq_ID\", \"VAS_PhaseName\", \"PriceStd\", \"PriceLimit\", \"StdPrecision\", \"EnforcePriceLimit\", \"VA075_WorkOrderOperation_ID\", \"S_TimeExpenseLine_ID\", \"AD_Org_ID\", \"VAS_FromDate\", \"VAS_toDate\", \"VAS_RecordSelection\", \"Search\", \"VAS_RecordNo\", \"VAS_Preview\", \"VAS_GenInvoice\", \"S_TimeExpense_ID\", \"C_Project_ID\", \"R_Request_ID\", \"C_Task_ID\", \"VAS_RecordedTime\", \"VAS_EstimatedTime\", \"VAS_RequestOrProject\", \"VAS_RecordingDate\", \"VAS_Filter\", \"VAS_ProductOrCharge\", \"VAS_CustImage\", \"VAS_RecordCount\", \"VAS_Start\", \"VA075_Task_ID\", \"VAS_Apply\", \"VAS_UomName\", \"VAS_PreviewDialog\", \"VAS_RequestInfoDialog\", \"VAS_SubTotal\", \"VAS_ISO_Code\", \"VAS_BindPaymentTerm\", \"VAS_Refresh\", \"VAS_ZeroPriceFor\", \"VAS_TaskType\", \"VAS_RecordId\", \"VAS_PaymentMethodNotBinded\", \"VAS_PaymentTermNotBinded\", \"VAS_InvoiceCreationFail\", \"VAS_PayTermNotBined\", \"VAS_PayMethod\", \"VAS_And\", \"C_DocType_ID\", \"VAS_InvoiceType\"];\n    VAS.translatedTexts = VIS.Msg.translate(ctx, elements, true);\n\n    //This function is called when form is loaded\n    function initializeComponent() {\n      ModulePrefix = VIS.dataContext.getJSONRecord(\"VIS/ModulePrefix/GetModulePrefix\", \"VA075_\");\n      //this function will get the column id for lookups\n      GetColumnID(ColumnData);\n      /*this function is used to create controls on left side pannel div*/\n      LeftSideControls();\n      /*this function is used to create design of form */\n      loadDesign();\n      createBusyIndicator();\n    }\n    ;\n    /*this function is used to create controls on left side pannel div*/\n    function LeftSideControls() {\n      LeftSideFields = $('<div class=\"vas-tis-top-fields\">');\n      //Created organization dropdown control\n      $OrgDiv = $('<div class=\"input-group vis-input-wrap\">');\n      var OrgValidation = \"AD_Org.AD_Org_ID <> 0 AND AD_Org.IsActive='Y' AND AD_Org.IsSummary='N' AND AD_Org.IsCostCenter='N' AND AD_Org.IsProfitCenter='N'\";\n      var Orglookup = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, ColumnIds.AD_Org_ID, VIS.DisplayType.TableDir, \"AD_Org_ID\", 0, false, OrgValidation);\n      $self.cmbOrg = new VIS.Controls.VComboBox(\"AD_Org_ID\", true, false, true, Orglookup, 150, VIS.DisplayType.TableDir);\n      $self.cmbOrg.setMandatory(true);\n      var $OrgControlWrap = $('<div class=\"vis-control-wrap\">');\n      var $OrgButtonWrap = $('<div class=\"input-group-append\">');\n      $OrgDiv.append($OrgControlWrap);\n      $OrgControlWrap.append($self.cmbOrg.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label class=\"vas-tis-lablels\">' + VAS.translatedTexts.AD_Org_ID + '</label>');\n      $OrgDiv.append($OrgControlWrap);\n      $OrgButtonWrap.append($self.cmbOrg.getBtn(0));\n      $OrgDiv.append($OrgButtonWrap);\n      //Created DocumentType dropdown control\n      DocTypeDiv = $('<div class=\"vas-DocTyperDiv\">');\n      var $DocTypeDiv = $('<div class=\"input-group vis-input-wrap\">');\n      var DoctypeValidationCode = \"C_DocType.IsActive = 'Y' AND C_DocType.DocBaseType = 'ARI' AND C_DocType.IsSOTrx = 'Y' AND \" + \" C_DocType.IsReturnTrx = 'N' AND C_DocType.IsExpenseInvoice = 'N' \" + \" AND C_DocType.AD_Org_ID IN (0,@AD_Org_ID@) AND C_DocType.AD_Client_ID IN (0,@AD_Client_ID@)\";\n      var DocTypelookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, ColumnIds.C_DocTypeTarget_ID, VIS.DisplayType.TableDir, \"C_DocType_ID\", 0, false, DoctypeValidationCode);\n      $self.cmbDocType = new VIS.Controls.VComboBox(\"C_DocType_ID\", true, false, true, DocTypelookUp, 50, VIS.DisplayType.TableDir);\n      var $DocTypeControlWrap = $('<div class=\"vis-control-wrap\">');\n      var $DocTypeButtonWrap = $('<div class=\"input-group-append\">');\n      $DocTypeDiv.append($DocTypeControlWrap);\n      $DocTypeControlWrap.append($self.cmbDocType.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label class=\"vas-tis-lablels\">' + VAS.translatedTexts.VAS_InvoiceType + '</label>');\n      $DocTypeDiv.append($DocTypeControlWrap);\n      $DocTypeButtonWrap.append($self.cmbDocType.getBtn(0));\n      $DocTypeDiv.append($DocTypeButtonWrap);\n      DocTypeDiv.append($DocTypeDiv);\n\n      //Created customer search control to filter out data\n      var CustomerDiv = $('<div class=\"vas-CustomerDiv\">');\n      var CustomerValidation = \"C_BPartner.IsActive='Y' AND C_BPartner.AD_Org_ID IN (0,@AD_Org_ID@) AND C_BPartner.IsCustomer = 'Y' AND C_BPartner.IsSummary = 'N'\";\n      $CustomerDiv = $('<div class=\"input-group vis-input-wrap\">');\n      var CustomerLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, ColumnIds.C_BPartner_ID, VIS.DisplayType.MultiKey, \"C_BPartner_ID\", 0, false, CustomerValidation);\n      $self.vSearchCustomer = new VIS.Controls.VTextBoxButton(\"C_BPartner_ID\", true, false, true, VIS.DisplayType.MultiKey, CustomerLookUp);\n      var $CustomerControlWrap = $('<div class=\"vis-control-wrap\">');\n      var $CustomerButtonWrap = $('<div class=\"input-group-append\">');\n      $CustomerDiv.append($CustomerControlWrap);\n      $CustomerControlWrap.append($self.vSearchCustomer.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VAS.translatedTexts.VAS_Customer + '</label>');\n      $CustomerDiv.append($CustomerControlWrap);\n      $CustomerButtonWrap.append($self.vSearchCustomer.getBtn(0));\n      $CustomerDiv.append($CustomerButtonWrap);\n      CustomerDiv.append($CustomerDiv);\n      //Created Resource control to filter out data\n      var ResourceDiv = $('<div class=\"vas-ResourceDiv\">');\n      $ResourceDiv = $('<div class=\"input-group vis-input-wrap\">');\n      var ResourceValidationCode = \"S_Resource.IsActive='Y' AND S_Resource.AD_Org_ID IN(0,@AD_Org_ID@)\";\n      var ResuorceLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, ColumnIds.S_Resource_ID, VIS.DisplayType.MultiKey, \"S_Resource_ID\", 0, false, ResourceValidationCode);\n      $self.vSearchResource = new VIS.Controls.VTextBoxButton(\"S_Resource_ID\", true, false, true, VIS.DisplayType.MultiKey, ResuorceLookUp, 0);\n      var $ResourceControlWrap = $('<div class=\"vis-control-wrap\">');\n      var $ResourceButtonWrap = $('<div class=\"input-group-append\">');\n      $ResourceDiv.append($ResourceControlWrap);\n      $ResourceControlWrap.append($self.vSearchResource.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VAS.translatedTexts.S_Resource_ID + '</label>');\n      $ResourceDiv.append($ResourceButtonWrap);\n      $ResourceButtonWrap.append($self.vSearchResource.getBtn(0));\n      $ResourceDiv.append($ResourceButtonWrap);\n      ResourceDiv.append($ResourceDiv);\n      //Created from and to date control to filter out data\n      var FromDatediv = $('<div class=\"vas-FromdateDiv\">');\n      $FromDatewrapDiv = $('<div class=\"input-group vis-input-wrap\">');\n      $FromDate = new VIS.Controls.VDate(\"DateReport\", true, false, true, VIS.DisplayType.Date, \"DateReport\");\n      var $FromDateWrap = $('<div class=\"vis-control-wrap\">');\n      $FromDatewrapDiv.append($FromDateWrap);\n      $FromDateWrap.append($FromDate.getControl().attr('placeholder', ' ').attr('data-placeholder', '')).append('<label class=\"vas-tis-lablels\">' + VAS.translatedTexts.VAS_FromDate + '</label>');\n      FromDatediv.append($FromDatewrapDiv);\n      var toDatediv = $('<div class=\"vas-todateDiv\">');\n      $toDatewrapDiv = $('<div class=\"input-group vis-input-wrap\">');\n      $ToDate = new VIS.Controls.VDate(\"DateReport\", true, false, true, VIS.DisplayType.Date, \"DateReport\");\n      var $toDateWrap = $('<div class=\"vis-control-wrap\">');\n      $toDatewrapDiv.append($toDateWrap);\n      $toDateWrap.append($ToDate.getControl().attr('placeholder', ' ').attr('data-placeholder', '')).append('<label class=\"vas-tis-lablels\">' + VAS.translatedTexts.VAS_toDate + '</label>');\n      toDatediv.append($toDatewrapDiv);\n      LeftSideFields.append($OrgDiv).append(CustomerDiv).append(ResourceDiv).append(FromDatediv).append(toDatediv);\n      $CustomerSelected = $('<div class=\"vas-tis-dropdown-lbl\">');\n      $ResourceSelected = $('<div class=\"vas-tis-dropdown-lbl\">');\n      /*when user change the value of customer it will check whether record exsist or not if exist then will not append on div else it will be \r\n      appneded to div*/\n      $self.vSearchCustomer.fireValueChanged = function () {\n        //Handling the value when user select multiple values from popup\n        var customerValue = CustomerLookUp;\n        var custIds = $self.vSearchCustomer.value;\n        var custName = \"\";\n        var custMultiIdArray = custIds.toString().split(',');\n        for (var i = 0; i < custMultiIdArray.length; i++) {\n          custName = customerValue.getDisplay(custMultiIdArray[i]);\n          if (CustomerId.indexOf(custMultiIdArray[i]) == -1) {\n            if (custMultiIdArray[i] != null) {\n              $CustomerSelected.append('<div class=\"vas-selected-lbl\">' + custName + '<span class=\"vis vis-cross\" data-custId=\"' + custMultiIdArray[i] + '\"></span></div>');\n              CustomerDiv.append($CustomerSelected);\n              CustomerId.push(custMultiIdArray[i]);\n              $CustomerSelected.find('.vis-cross').on('click', function () {\n                var Customer_ID = $(this).attr('data-custId');\n                CustomerId = jQuery.grep(CustomerId, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value) != VIS.Utility.Util.getValueOfInt(Customer_ID);\n                });\n                $(this).parent().remove();\n                if ($CustomerSelected.find('.vis-cross').length == 0) {\n                  $CustomerSelected.remove();\n                }\n              });\n            }\n          }\n        }\n        $self.vSearchCustomer.setValue(null);\n      };\n      /*when user change the value of resource it will check whether record exist or not if exsist then will not append on div else it will be\r\n       appneded to div*/\n      $self.vSearchResource.fireValueChanged = function () {\n        //Handling the value when user select multiple values from popup\n        var ResourceValue = ResuorceLookUp;\n        var resourceIds = $self.vSearchResource.value;\n        var resourceName = \"\";\n        var resourceMultiIdArray = resourceIds.toString().split(',');\n        for (var i = 0; i < resourceMultiIdArray.length; i++) {\n          resourceName = ResourceValue.getDisplay(resourceMultiIdArray[i]);\n          if (ResourceId.indexOf(resourceMultiIdArray[i]) == -1) {\n            if (resourceMultiIdArray[i] != null) {\n              $ResourceSelected.append('<div class=\"vas-selected-lbl\">' + resourceName + '<span class=\"vis vis-cross\" data-resourceid=\"' + resourceMultiIdArray[i] + '\"></span></div>');\n              ResourceDiv.append($ResourceSelected);\n              ResourceId.push(resourceMultiIdArray[i]);\n              $ResourceSelected.find('.vis-cross').on('click', function () {\n                var Resource_ID = $(this).attr('data-resourceid');\n                ResourceId = jQuery.grep(ResourceId, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value) != VIS.Utility.Util.getValueOfInt(Resource_ID);\n                });\n                $(this).parent().remove();\n                if ($ResourceSelected.find('.vis-cross').length == 0) {\n                  $ResourceSelected.remove();\n                }\n              });\n            }\n          }\n        }\n        $self.vSearchResource.setValue(null);\n      };\n      $self.cmbOrg.fireValueChanged = function () {\n        ctx.setContext($self.windowNo, \"AD_Org_ID\", $self.cmbOrg.getValue());\n      };\n    }\n\n    /*this function is used to create design of form */\n    function loadDesign() {\n      var LeftButtonDiv = $('<div class=\"vas-tis-leftbuttondiv\">');\n      //this design will have all the controls like arrow btn,filter btn\n      $self.topDiv = $(\"<div id='topDiv_\" + $self.windowNo + \"' class='vis-archive-l-s-head vis-frm-ls-top' style='padding: 0;'>\" + \"<div id='btnSpaceDiv_\" + $self.windowNo + \"' class='vas-spacediv'>\" + \"<button id='btnSpace_\" + $self.windowNo + \"' class='vis-archive-sb-t-button' ><i class='vis vis-arrow-left'></i></button></div>\" + \"<div id='spnSelect_\" + $self.windowNo + \"' class='vas-RecordSelection'>\" + \"<div class='vas-SelectDiv'>\" + \"<label id='spnSelectRecord_\" + $self.windowNo + \"' class='VIS_Pref_Label_Font vas-SpnSelect'>\" + VAS.translatedTexts.VAS_RecordSelection + \"</label></div>\" + \"<div class='vas-tis-filter dropdown'>\" + \"<div class='vas-tis-icondiv'>\" + \"<a class='vas-tis-refreshicon' id='vas-tis-refresh_\" + $self.windowNo + \"'>\" + \"<span class='glyphicon glyphicon-refresh'>\" + \"</span>\" + \"</a>\" + \"<span class='vas-tis-filterspn btn d-flex position-relative' type='button' id='vas_tis_dropdownMenu_\" + $self.windowNo + \"'>\" + \"<i class='fa fa-filter vas-tis-filterIcon'></i>\" + \"</span>\" + \"</div>\" + \"<div class='vas-tis-filterPopupWrap' id='vas_tis_FilterPopupWrap_\" + $self.windowNo + \"'>\" + \"</div>\" + \"</div>\");\n      $self.btnSpaceDiv = $self.topDiv.find(\"#btnSpaceDiv_\" + $self.windowNo);\n      $self.recordDiv = $self.topDiv.find(\"#spnSelect_\" + $self.windowNo);\n      $self.LeftsideDiv = $(\"<div id='sideDiv_\" + $self.windowNo + \"' class='vas-tis-leftsidewrap vis-leftsidebarouterwrap px-3'>\");\n      $self.SearchBtn = $(\"<input id='SearchBtn_\" + $self.windowNo + \"' class='VIS_Pref_btn-2 vas-searchbtn' type='button' value='\" + VAS.translatedTexts.Search + \"'>\");\n      // $self.RefreshBtn = $(\"<input id='RefreshBtn_\" + $self.windowNo + \"' class='VIS_Pref_btn-2 vas-searchbtn' type='button' value='\" + VAS.translatedTexts.VAS_Refresh + \"'>\");\n      $self.bottumDiv = $(\"<div class='vis-info-btmcnt-wrap vis-p-t-10 vas-BottomBtnDiv'>\");\n      $self.PreviewBtn = $(\"<button id='PreviewBtn_\" + $self.windowNo + \"' class='VIS_Pref_btn-2 mr-2 vas-tis-btnmargin'>\" + VAS.translatedTexts.VAS_Preview + \"</button>\");\n      $self.GenerateInvBtn = $(\"<button id='VAS_GenInvoice_\" + $self.windowNo + \"' class='VIS_Pref_btn-2 vas-tis-btnmargin'>\" + VAS.translatedTexts.VAS_GenInvoice + \"</button>\");\n      LeftButtonDiv.append($self.SearchBtn);\n      $self.LeftsideDiv.append(LeftSideFields).append(LeftButtonDiv);\n      var rightBottomDiv = $(\"<div class='vas-tis-rightbottomdiv'>\");\n      rightBottomDiv.append($self.GenerateInvBtn).append($self.PreviewBtn);\n      $self.bottumDiv.append(DocTypeDiv).append(rightBottomDiv);\n      $self.gridSelectDiv = $(\"<div id='gridSelectDiv_\" + $self.windowNo + \"' class='vis-frm-grid-outerwrp'>\");\n      //appended all the design to root\n      $self.$root.append($self.topDiv).append($self.LeftsideDiv).append($self.gridSelectDiv).append($self.bottumDiv);\n    }\n    /**\r\n    * this fucntion is used to show unselect those record whose configuration is not correct\r\n    * @param {any} dGrid\r\n    */\n    function UnselectNotConfiguredRecords(dGrid) {\n      var combinedMessage = VAS.translatedTexts.VAS_InvoiceCreationFail;\n      //var paramMessage = '';\n      if (BPWithoutPaymentTerm.length > 0) {\n        for (var i = 0; i < BPWithoutPaymentTerm.length; i++) {\n          dGrid.unselect(BPWithoutPaymentTerm[i]);\n        }\n        // paramMessage = VAS.translatedTexts.VAS_PayTermNotBined\n      }\n      if (BPWithoutPaymentMethod.length > 0) {\n        for (var i = 0; i < BPWithoutPaymentMethod.length; i++) {\n          dGrid.unselect(BPWithoutPaymentMethod[i]);\n        }\n        //if (paramMessage.length > 0) {\n        //    paramMessage += VAS.translatedTexts.VAS_And + VAS.translatedTexts.VAS_PayMethod\n        //}\n        //else {\n        //    paramMessage = VAS.translatedTexts.VAS_PayMethod;\n        //}\n      }\n      //  combinedMessage += paramMessage;\n      VIS.ADialog.info(\"\", \"\", combinedMessage);\n    }\n    /* this function is used to load the column and data on grid*/\n    function dynInit(data) {\n      //get the color on load of Grid data\n      var hue = Math.floor(Math.random() * (360 - 0)) + 0;\n      var v = Math.floor(Math.random() * (75 - 60 + 1)) + 60;\n      var pastel = 'hsl(' + hue + ', 100%,' + v + '%)';\n      if ($self.dGrid != null) {\n        $self.dGrid.destroy();\n        $self.dGrid = null;\n      }\n      if ($self.arrListColumns.length == 0) {\n        $self.arrListColumns.push({\n          field: \"recid\",\n          caption: VAS.translatedTexts.VAS_RecordNo,\n          sortable: true,\n          size: '1%',\n          min: 50,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"DocumentNo\",\n          caption: VAS.translatedTexts.VAS_RecordId,\n          sortable: true,\n          size: '30%',\n          min: 100,\n          hidden: false,\n          render: function (record, index, col_index) {\n            return '<a href=\"#\" class=\"vas-decoration-style\">' + record['DocumentNo'] + '</a>';\n          },\n          editable: {\n            type: 'text'\n          }\n        });\n        $self.arrListColumns.push({\n          field: \"C_BPartner\",\n          caption: VAS.translatedTexts.VAS_Customer,\n          sortable: true,\n          size: '25%',\n          min: 120,\n          hidden: false,\n          render: function (record) {\n            var div;\n            //Extarcted the first character of business partner \n            var custChar = '';\n            var custNameArr = record[\"C_BPartner\"].trim().split(' ');\n            custChar = custNameArr[0].substring(0, 1).toUpper();\n            if (custNameArr.length > 1) {\n              custChar += custNameArr[custNameArr.length - 1].substring(0, 1).toUpper();\n            } else {\n              custChar = custNameArr[0].substring(0, 2).toUpper();\n            }\n            if (record[\"ImageUrl\"] != null) {\n              div = '<div class=\"vas-tis-gridimg vis-gridImageicon\">' + '<img class=\"vas-businessPartnerImg\" alt=\"' + record[\"ImageUrl\"] + '\" src=\"' + VIS.Application.contextUrl + record[\"ImageUrl\"] + '\">' + '<div class=\"vas-tis-bpstyling\">' + record[\"C_BPartner\"] + '</div>';\n              '</div>';\n            } else {\n              div = '<div style=\"float:left ;background-color:' + pastel + '\" class=\"vis-grid-row-td-icon\"><span style=\"font-size: 16px;\">' + custChar + '</span></div>' + '<div class=\"vas-tis-bpstyling\">' + record[\"C_BPartner\"] + '</div>';\n              '</div>';\n            }\n            return div;\n          }\n        });\n        $self.arrListColumns.push({\n          field: \"S_Resource_ID\",\n          caption: VAS.translatedTexts.S_Resource_ID,\n          sortable: true,\n          size: '14%',\n          min: 150,\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: \"M_Product\",\n          caption: VAS.translatedTexts.VAS_ProductOrCharge,\n          sortable: true,\n          size: '25%',\n          min: 100,\n          hidden: false,\n          render: function (record) {\n            var div;\n            //Extarcted the first character of Product \n            var prodChar = '';\n            var prodNameArr = record[\"M_Product\"].trim().split(' ');\n            prodChar = prodNameArr[0].substring(0, 1).toUpper();\n            if (prodNameArr.length > 1) {\n              prodChar += prodNameArr[prodNameArr.length - 1].substring(0, 1).toUpper();\n            } else {\n              prodChar = prodNameArr[0].substring(0, 2).toUpper();\n            }\n            if (record[\"productImgUrl\"] != null) {\n              div = '<div class=\"vas-tis-gridimg vis-gridImageicon\">' + '<img class=\"vas-businessPartnerImg\" alt=\"' + record[\"productImgUrl\"] + '\" src=\"' + VIS.Application.contextUrl + record[\"productImgUrl\"] + '\">' + '<div class=\"vas-tis-bpstyling\">' + record[\"M_Product\"] + '</div>';\n              '</div>';\n            } else {\n              div = '<div style=\"float:left;background-color:' + pastel + '\" class=\"vis-grid-row-td-icon\"><span style=\"font-size: 16px;\">' + prodChar + '</span></div>' + '<div class=\"vas-tis-bpstyling\">' + record[\"M_Product\"] + '</div>';\n              '</div>';\n            }\n            return div;\n          }\n        });\n        $self.arrListColumns.push({\n          field: 'Qty',\n          caption: VAS.translatedTexts.Qty,\n          sortable: true,\n          size: '5%',\n          min: 100,\n          hidden: false,\n          render: function (record, index, col_index) {\n            var val = record[\"Qty\"] + \" \" + record[\"UomName\"];\n            return val;\n          }\n        });\n        $self.arrListColumns.push({\n          field: \"Price\",\n          caption: VAS.translatedTexts.Price,\n          sortable: true,\n          size: '10%',\n          min: 100,\n          hidden: false,\n          style: 'text-align:right;',\n          editable: {\n            type: 'number'\n          },\n          render: function (record, index, col_index) {\n            var val = record[\"Price\"];\n            precision = record[\"StdPrecision\"];\n            return parseFloat(val).toLocaleString(window.navigator.language, {\n              minimumFractionDigits: precision,\n              maximumFractionDigits: precision\n            });\n          }\n        });\n        $self.arrListColumns.push({\n          field: 'Amount',\n          caption: VAS.translatedTexts.VAS_TotalBilableAmount,\n          sortable: true,\n          size: '18%',\n          min: 100,\n          hidden: false,\n          style: 'text-align:right;',\n          render: function (record, index, col_index) {\n            var val = record[\"Amount\"];\n            precision = record[\"StdPrecision\"];\n            return parseFloat(val).toLocaleString(window.navigator.language, {\n              minimumFractionDigits: precision,\n              maximumFractionDigits: precision\n            }) + \" \" + record[\"ISO_Code\"];\n          }\n        });\n        $self.arrListColumns.push({\n          field: \"C_BPartner_ID\",\n          caption: VAS.translatedTexts.C_BPartner_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"VA009_PaymentMethod_ID\",\n          caption: VAS.translatedTexts.VA009_PaymentMethod_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"M_PriceList_ID\",\n          caption: VAS.translatedTexts.M_PriceList_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"C_BPartner_Location_ID\",\n          caption: VAS.translatedTexts.C_BPartner_Location_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"M_Product_ID\",\n          caption: VAS.translatedTexts.M_Product_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"C_Charge_ID\",\n          caption: VAS.translatedTexts.C_Charge_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"C_Currency_ID\",\n          caption: VAS.translatedTexts.C_Currency_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"C_PaymentTerm_ID\",\n          caption: VAS.translatedTexts.C_PaymentTerm_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"C_Uom_ID\",\n          caption: VAS.translatedTexts.C_Uom_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"LocationName\",\n          caption: VAS.translatedTexts.VAS_LocationName,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"recordCount\",\n          caption: VAS.translatedTexts.VAS_recordCounted,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"RecordedDate\",\n          caption: VAS.translatedTexts.VAS_RecordedDate,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"EstimatedTime\",\n          caption: VAS.translatedTexts.VAS_EstimatedTime,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"ProjReq_Name\",\n          caption: VAS.translatedTexts.VAS_ProjReq_Name,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"ProjReq_ID\",\n          caption: VAS.translatedTexts.VAS_ProjReq_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"PhaseName\",\n          caption: VAS.translatedTexts.VAS_PhaseName,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"PriceStd\",\n          caption: VAS.translatedTexts.PriceStd,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"PriceLimit\",\n          caption: VAS.translatedTexts.PriceLimit,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"StdPrecision\",\n          caption: VAS.translatedTexts.StdPrecision,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"EnforcePriceLimit\",\n          caption: VAS.translatedTexts.EnforcePriceLimit,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"VA075_WorkOrderOperation_ID\",\n          caption: VAS.translatedTexts.VA075_WorkOrderOperation_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"S_TimeExpenseLine_ID\",\n          caption: VAS.translatedTexts.S_TimeExpenseLine_ID,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"ISO_Code\",\n          caption: VAS.translatedTexts.VAS_ISO_Code,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: \"RequestSummary\",\n          caption: VAS.translatedTexts.VAS_RequestSummary,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: true\n        });\n      }\n      w2utils.encodeTags(data);\n      $self.dGrid = $($self.gridSelectDiv).w2grid({\n        name: \"gridGenForm_\" + $self.windowNo,\n        recordHeight: 40,\n        show: {\n          selectColumn: true\n        },\n        multiSelect: true,\n        columns: $self.arrListColumns,\n        records: data,\n        scorll: true,\n        onSelect: function (event) {\n          if ($self.dGrid.records.length > 0) {\n            ArrayOfGrid(event, $self.dGrid, false);\n          }\n          event.onComplete = function () {\n            if (BPWithoutPaymentTerm.length > 0 || BPWithoutPaymentMethod.length > 0) {\n              UnselectNotConfiguredRecords($self.dGrid);\n            }\n          };\n        },\n        onUnselect: OnUnseletRow,\n        onEditField: function (event) {\n          if (event.column == 1) {\n            // Prevent the default behavior of the grid's cell click event\n            event.stopPropagation();\n            event.preventDefault();\n            //Converting date to local date format\n            var recordingDate = new Date($self.dGrid.records[event.index].RecordedDate);\n            // Initialize HTML elements for displaying task details\n            var htmlmain = $('<div>');\n            var htmlString = '<div class=\"vas-taskDescDailog\">                                                                       ' + ' <div class=\"vas-taskDesc_feildWrap mb-2 \">                                                                         ' + '   <div class=\"vas-taskDesc_feild\">                                                                                 ' + '     <span class=\"vas-taskdescTtl\">' + VAS.translatedTexts.VAS_RecordingDate + '</span>                                                            ' + '     <span class=\"vas-taskdescValue\">' + (recordingDate.toLocaleDateString() || '') + '</span>                                                              ' + '   </div>                                                                                                           ' + '   <div class=\"vas-taskDesc_feild\">                                                                                 ' + '     <span class=\"vas-taskdescTtl text-right\">' + VAS.translatedTexts.VAS_RequestOrProject + '</span>                                       ' + '     <span class=\"vas-taskdescValue text-right\">' + ($self.dGrid.records[event.index].ProjReq_Name || '') + '</span>                                    ' + '   </div>                                                                                                           ' + ' </div>                                                                                                             ' + ' <div class=\"vas-projectTimeline mb-2\">                                                                             ' + '   <span class=\"vas-taskdescTtl\">' + VAS.translatedTexts.VAS_RequestOrProject + '</span>' + '</div>';\n            if ($self.dGrid.records[event.index].PhaseName != null) {\n              //handled the pipline structure for Project Phases\n              htmlString += '<div class=\"vas-tis-roadmap-container\"> ' + '<div class=\"vas-tis-steps-row\">';\n              var StatusClass = \"\";\n              var count = 0;\n              var phaseInfo = $self.dGrid.records[event.index].PhaseName;\n              var PhaseClass = 'vas-tis-next-row';\n              var ReversePhaseclass = 'vas-tis-reverse-row';\n              var AssignedClass = '';\n              for (var i = 0; i < phaseInfo.length; i++) {\n                if (i == 2) {\n                  AssignedClass = ReversePhaseclass;\n                }\n                if (i > 2 && count == 0 && AssignedClass == ReversePhaseclass) {\n                  AssignedClass = PhaseClass;\n                } else if (count == 0 && AssignedClass == PhaseClass) {\n                  AssignedClass = ReversePhaseclass;\n                }\n                if (phaseInfo[i].PhaseStatus == \"IP\") {\n                  StatusClass = 'vas-tis-step-inprogress';\n                } else if (phaseInfo[i].PhaseStatus == \"CO\") {\n                  StatusClass = 'vas-tis-step-completed';\n                } else if (phaseInfo[i].PhaseStatus == \"DR\") {\n                  StatusClass = 'vas-tis-step-drafted';\n                } else {\n                  StatusClass = 'vas-tis-step-null';\n                }\n                if (i == 0) {\n                  htmlString += '<div class=\"vas-tis-steps-col ' + StatusClass + ' w-33\">' + '<div class=\"vas-tis-step-start\">' + '<div class=\"vas-tis-step-circle\"><span class=\"vis vis-markx\"></span></div>' + '<span>' + VAS.translatedTexts.VAS_Start + '</span>' + '</div>' + '<div class=\"vas-tis-step-content\">' + '<div class=\"vas-tis-step-circle\"><span class=\"vis vis-markx\"></span></div>' + '<span>' + phaseInfo[0].PhaseName + '</span>' + '</div>' + '</div>';\n                }\n                if (i == 1) {\n                  htmlString += appendPhaseDesign(phaseInfo[1], StatusClass);\n                }\n                if (i > 1) {\n                  if (count == 0 && i == 2) {\n                    htmlString += appendPhaseDesign(phaseInfo[i], StatusClass);\n                    htmlString += '</div>';\n                  }\n                  count = count + 1;\n                  if (count == 1) {\n                    htmlString += '<div class=\"vas-tis-steps-row ' + AssignedClass + '\">';\n                    htmlString += appendPhaseDesign(phaseInfo[i], StatusClass);\n                  } else {\n                    htmlString += appendPhaseDesign(phaseInfo[i], StatusClass);\n                  }\n                  if (count == 2 && i != phaseInfo.length - 1) {\n                    //here we are updating the status of next record if it exist in phaseinfo\n                    if (phaseInfo[i + 1].PhaseStatus == \"IP\") {\n                      StatusClass = 'vas-tis-step-inprogress';\n                    } else if (phaseInfo[i + 1].PhaseStatus == \"CO\") {\n                      StatusClass = 'vas-tis-step-completed';\n                    } else if (phaseInfo[i + 1].PhaseStatus == \"DR\") {\n                      StatusClass = 'vas-tis-step-drafted';\n                    } else {\n                      StatusClass = 'vas-tis-step-null';\n                    }\n                    htmlString += appendPhaseDesign(phaseInfo[i], StatusClass);\n                    count = 0;\n                  }\n                }\n                if (count == 0 && i > 1) {\n                  htmlString += '</div>';\n                }\n              }\n            }\n\n            /* Summary*/else if ($self.dGrid.records[event.index].RequestSummary != null) {\n              htmlString += '<div class=\"vas-tis-requestsummary p-3 mb-3 mt-1\">' + ($self.dGrid.records[event.index].RequestSummary || '') + '</div>';\n            }\n            htmlString += '</div>' + '   </div>                                                                                                           ' + ' <div class=\"vas-taskDesc_feildWrap mb-2 \">                                                                         ' + '   <div class=\"vas-taskDesc_feild\">                                                                                 ' + '     <span class=\"vas-taskdescTtl\">' + VAS.translatedTexts.VAS_EstimatedTime + '</span>                                                            ' + '     <span class=\"vas-taskdescValue\">' + ($self.dGrid.records[event.index].EstimatedTime || '') + '</span>                                                                ' + '   </div>                                                                                                           ' + '   <div class=\"vas-taskDesc_feild\">                                                                                 ' + '     <span class=\"vas-taskdescTtl text-right\">' + VAS.translatedTexts.VAS_RecordedTime + '</span>                                                  ' + '     <span class=\"vas-taskdescValue text-right\">' + ($self.dGrid.records[event.index].Qty || '') + '</span>                                                     ' + '   </div>                                                                                                           ' + ' </div>                                                                                                             ' + '</div>';\n            htmlmain.append(htmlString);\n            // Create and configure the dialog for displaying task details\n            var RequestInfoDialog = new VIS.ChildDialog();\n            RequestInfoDialog.setContent(htmlmain);\n            RequestInfoDialog.setTitle(VAS.translatedTexts.VAS_RequestInfoDialog);\n            RequestInfoDialog.setWidth(\"50%\");\n            RequestInfoDialog.setEnableResize(true);\n            RequestInfoDialog.setModal(true);\n            RequestInfoDialog.show();\n            RequestInfoDialog.hideButtons();\n          } else if (event.column == 6) {\n            event.onComplete = function (event) {\n              id = event.recid;\n              $('#grid_gridGenForm_' + $self.windowNo + '_rec_' + id).keydown(function (event) {\n                var isDotSeparator = culture.isDecimalSeparatorDot(window.navigator.language);\n                if (!isDotSeparator && (event.keyCode == 190 || event.keyCode == 110)) {\n                  // , separator\n                  return false;\n                } else if (isDotSeparator && event.keyCode == 188) {\n                  // . separator\n                  return false;\n                }\n                if (event.target.value.contains(\".\") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                  this.value = this.value.replace('.', '');\n                }\n                if (event.target.value.contains(\",\") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                  this.value = this.value.replace(',', '');\n                }\n                if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n                  return false;\n                }\n              });\n            };\n          }\n        },\n        onChange: function (event) {\n          if ($self.dGrid.getChanges(event.recid) != undefined) {\n            if (event.column == 6) {\n              if (event.value_new == \"\") {\n                event.value_new = 0;\n              } else {\n                //Changed New value into number\n                event.value_new = format.GetConvertedNumber(event.value_new, dotFormatter); //Converted new value because the new value is in string\n                event.value_new = event.value_new.toLocaleString(window.navigator.language, {\n                  minimumFractionDigits: precision,\n                  maximumFractionDigits: precision\n                });\n                event.value_new = format.GetConvertedNumber(event.value_new, dotFormatter);\n              }\n              /*Applied Check if Enforce Price limit checkbox true on Price list and user enter value less than price limit it will show error*/\n              if ($self.dGrid.records[event.index]['EnforcePriceLimit'] == \"Y\" && parseFloat(event.value_new) < $self.dGrid.records[event.index]['PriceLimit']) {\n                VIS.ADialog.info('VAS_PriceLimitExceeds');\n                event.value_new = event.value_original;\n                $self.dGrid.getChanges(event.recid).Price = event.value_original;\n                $self.dGrid.records[event.index]['Price'] = event.value_original;\n                $self.dGrid.refreshCell(event.recid, \"Price\");\n                return;\n              }\n              $self.dGrid.records[event.index]['Price'] = event.value_new;\n              $self.dGrid.records[event.index]['Amount'] = event.value_new * $self.dGrid.records[event.index]['Qty'];\n              $self.dGrid.refreshCell(event.recid, \"Amount\");\n              $self.dGrid.refreshCell(event.recid, \"Price\");\n            }\n          }\n        }\n      });\n      $self.gridSelectDiv.find('#grid_gridGenForm_' + $self.windowNo + '_records').off(\"scroll\", enablingscrollEvent);\n      $self.gridSelectDiv.find('#grid_gridGenForm_' + $self.windowNo + '_records').on(\"scroll\", enablingscrollEvent);\n    }\n    /**\r\n    * this fucntion is called when user pipline structure for project phases\r\n    * @param {any} phaseInfo\r\n    * @param {any} StatusClass\r\n    */\n    function appendPhaseDesign(phaseInfo, StatusClass) {\n      var phaseDesign = '';\n      phaseDesign = '<div class=\"vas-tis-steps-col ' + StatusClass + ' w-33\">' + '<div class=\"vas-tis-step-content\">' + '<div class=\"vas-tis-step-circle\"><span class=\"vis vis-markx\"></span></div>' + '<span>' + phaseInfo.PhaseName + '</span>' + '</div>' + '</div>';\n      return phaseDesign;\n    }\n    /**\r\n    * this fucntion is called when user unselects records\r\n    * @param {any} e\r\n    */\n    function OnUnseletRow(e) {\n      ArrayOfGrid(e, $self.dGrid, true);\n    }\n    /**\r\n    * this function used to append busy indicator to root\r\n    */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\" style=\"visibility: hidden;\"></div>');\n      $bsyDiv.append($('<div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis-busyindicatordiv\"></i></div>'));\n      $self.setBusy(false);\n      $self.$root.append($bsyDiv);\n    }\n    ;\n    /**\r\n    * this function used to enable the value of busy indicator by passing the value true or false\r\n    */\n    this.setBusy = function (isBusy) {\n      if (isBusy) {\n        $bsyDiv[0].style.visibility = \"visible\";\n      } else {\n        $bsyDiv[0].style.visibility = \"hidden\";\n      }\n    };\n    /**\r\n     * this fucntion is used to store data on grids on selection and unselection of records\r\n     * @param {any} event\r\n     * @param {any} dGrid\r\n     * @param {any} IsRecordUnselected\r\n     */\n    function ArrayOfGrid(event, dGrid, IsRecordUnselected) {\n      // Check if all records are selected\n      if (event.recid == undefined) {\n        // Clear the arrays\n        gridDataArray = [];\n        PreviewLeftData = [];\n        // Loop through all records in the grid\n        for (var i = 0; i < dGrid.records.length; i++) {\n          // Check if records are unselected\n          if (IsRecordUnselected) {\n            // Reset the arrays if records are unselected\n            gridDataArray = [];\n            PreviewLeftData = [];\n            BPWithZeroPrice = [];\n            BPWithoutPaymentTerm = [];\n            BPWithoutPaymentMethod = [];\n          } else {\n            if (dGrid.records[i].C_PaymentTerm_ID == 0) {\n              BPWithoutPaymentTerm.push(dGrid.records[i].recid);\n            }\n            if (dGrid.records[i].VA009_PaymentMethod_ID == 0) {\n              BPWithoutPaymentMethod.push(dGrid.records[i].recid);\n            } else {\n              // Otherwise, populate gridDataArray with all records\n              gridDataArray.push(dGrid.records[i]);\n            }\n          }\n        }\n        // Add data for preview based on the selection\n        AddForPreviewDataOnAllSelection(gridDataArray, true);\n      } else {\n        // If a record is unselected\n        if (IsRecordUnselected) {\n          // Remove the selected record from gridDataArray\n          AddedDataForPreviewOnSelection(event, dGrid, false);\n          gridDataArray = jQuery.grep(gridDataArray, function (value) {\n            // Filter out the unselected record\n            return VIS.Utility.Util.getValueOfInt(value.recid) != VIS.Utility.Util.getValueOfInt(event.recid);\n          });\n        } else {\n          BPWithZeroPrice = [];\n          BPWithoutPaymentTerm = [];\n          BPWithoutPaymentMethod = [];\n          if (dGrid.records[event.index].C_PaymentTerm_ID == 0 && BPWithoutPaymentTerm.indexOf(dGrid.records[event.index].recid) == -1) {\n            BPWithoutPaymentTerm.push(dGrid.records[event.index].recid);\n          }\n          if (dGrid.records[event.index].VA009_PaymentMethod_ID == 0 && BPWithoutPaymentMethod.indexOf(dGrid.records[event.index].recid) == -1) {\n            BPWithoutPaymentMethod.push(dGrid.records[event.index].recid);\n          } else {\n            // Add the selected record to gridDataArray\n            gridDataArray.push(dGrid.records[event.index]);\n          }\n          // Add data for preview with the selected record\n          AddedDataForPreviewOnSelection(event, dGrid, true);\n        }\n      }\n    }\n\n    //this fucntion is used to get remaining columns  id\n    var GetColumnID = function (ColumnData) {\n      ColumnIds = VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"VAS_TimeSheetInvoices/GetColumnID\", {\n        \"ColumnData\": JSON.stringify(ColumnData)\n      }, null);\n    };\n\n    //This function is called when grid is scrolled to maintain paging\n    function enablingscrollEvent() {\n      if ($(this).scrollTop() + $(this).innerHeight() >= this.scrollHeight) {\n        if (pageNo < gridPgnoInvoice) {\n          $self.setBusy(true);\n          pageNo++;\n          LoadTimeSheetData(pageNo, pageSize, true);\n        }\n      }\n    }\n\n    // Function to add data for preview based on all selections\n    function AddForPreviewDataOnAllSelection(gridDataArray, shouldAdd) {\n      // If gridDataArray is empty, reset PreviewLeftData and return\n      if (gridDataArray.length === 0) {\n        PreviewLeftData = [];\n        return;\n      }\n\n      // Loop through each record in gridDataArray\n      for (var i = 0; i < gridDataArray.length; i++) {\n        var record = gridDataArray[i];\n        var isUnique = true;\n\n        // Loop through each record in PreviewLeftData\n        for (var j = 0; j < PreviewLeftData.length; j++) {\n          // Check if the record already exists in PreviewLeftData based on specific conditions\n          if (record.C_BPartner_ID === PreviewLeftData[j].C_BPartner_ID && record.C_BPartner_Location_ID === PreviewLeftData[j].C_BPartner_Location_ID && record.VA009_PaymentMethod_ID === PreviewLeftData[j].VA009_PaymentMethod_ID && record.M_PriceList_ID === PreviewLeftData[j].M_PriceList_ID) {\n            // If the record exists, increment the record count and mark it as not unique\n            PreviewLeftData[j].recordCount = PreviewLeftData[j].recordCount + 1;\n            isUnique = false;\n            break;\n          }\n        }\n\n        // If the record is unique and should be added\n        if (isUnique && shouldAdd) {\n          // Set the record count to 1 and add it to PreviewLeftData\n          record.recordCount = 1;\n          PreviewLeftData.push(record);\n        }\n      }\n    }\n\n    // Function called when a user selects or unselects a single record\n    function AddedDataForPreviewOnSelection(event, dGrid, shouldAdd) {\n      var isUnique = true;\n\n      // Loop through each record in PreviewLeftData\n      for (var j = 0; j < PreviewLeftData.length; j++) {\n        // Check if the record matches specific conditions and if it should be added\n        if (shouldAdd && dGrid.records[event.index].C_BPartner_ID === PreviewLeftData[j].C_BPartner_ID && dGrid.records[event.index].C_BPartner_Location_ID === PreviewLeftData[j].C_BPartner_Location_ID && dGrid.records[event.index].VA009_PaymentMethod_ID === PreviewLeftData[j].VA009_PaymentMethod_ID && dGrid.records[event.index].M_PriceList_ID === PreviewLeftData[j].M_PriceList_ID) {\n          // If the record matches and should be added, increment the record count and mark it as not unique\n          PreviewLeftData[j].recordCount = PreviewLeftData[j].recordCount + 1;\n          isUnique = false;\n          break;\n        }\n        // Check if the record matches specific conditions and if it should be removed\n        else if (!shouldAdd && dGrid.records[event.index].C_BPartner_ID === PreviewLeftData[j].C_BPartner_ID && dGrid.records[event.index].C_BPartner_Location_ID === PreviewLeftData[j].C_BPartner_Location_ID && dGrid.records[event.index].VA009_PaymentMethod_ID === PreviewLeftData[j].VA009_PaymentMethod_ID && dGrid.records[event.index].M_PriceList_ID === PreviewLeftData[j].M_PriceList_ID) {\n          // If the record matches and should be removed, decrement the record count\n          PreviewLeftData[j].recordCount = PreviewLeftData[j].recordCount - 1;\n          // If the record count becomes zero or less, remove the record from PreviewLeftData\n          if (PreviewLeftData[j].recordCount <= 0) {\n            PreviewLeftData = jQuery.grep(PreviewLeftData, function (record) {\n              return record.recordCount > 0;\n            });\n          }\n        }\n      }\n\n      // If the record is unique and should be added\n      if (isUnique && shouldAdd) {\n        // Set the record count to 1 and add it to PreviewLeftData\n        dGrid.records[event.index].recordCount = 1;\n        PreviewLeftData.push(dGrid.records[event.index]);\n      }\n    }\n\n    /**\r\n    * this function is responsible for loading data into grid\r\n    * @param {any} pageNo\r\n    * @param {any} pageSize\r\n    * @param {any} IsOnScroll\r\n    */\n    function LoadTimeSheetData(pageNo, pageSize, IsOnScroll) {\n      var data = [];\n      gridDataArray = [];\n      PreviewLeftData = [];\n      PreviewFilteredGridData = [];\n      BPWithZeroPrice = [];\n      BPWithoutPaymentTerm = [];\n      BPWithoutPaymentMethod = [];\n      if (VIS.Utility.Util.getValueOfInt(AD_Org_ID) == 0) {\n        VIS.ADialog.info('VAS_PlzSelectOrganization');\n        return;\n      }\n      var AD_Client_ID = VIS.Env.getCtx().getAD_Client_ID();\n      $self.setBusy(true);\n      $.ajax({\n        url: VIS.Application.contextUrl + \"VAS_TimeSheetInvoices/LoadGridData\",\n        type: 'POST',\n        data: {\n          AD_Client_ID: VIS.Utility.Util.getValueOfInt(AD_Client_ID),\n          AD_Org_ID: VIS.Utility.Util.getValueOfInt(AD_Org_ID),\n          C_BPartner_ID: CustomerId.toString(),\n          S_Resource_ID: ResourceId.toString(),\n          TimExpenSeDoc: TimeExpenseId.toString(),\n          C_Project_ID: ProjectId.toString(),\n          R_Request_ID: RequestId.toString(),\n          C_Task_ID: TaskId.toString(),\n          FromDate: $FromDate.getValue(),\n          toDate: $ToDate.getValue(),\n          TaskType: TaskTypeVal,\n          pageNo: pageNo,\n          pageSize: pageSize\n        },\n        success: function (res) {\n          var gridDataResult = JSON.parse(res);\n          if (gridDataResult && gridDataResult.length > 0) {\n            //Intialized count variable to maintain the value of recid\n            var count = 0;\n            if (!IsOnScroll) {\n              count = 1;\n            } else {\n              count = $self.dGrid.records.length + 1;\n            }\n            if (pageNo == 1 && gridDataResult.length > 0) {\n              TotalRecords = gridDataResult[0].countRecords;\n              gridPgnoInvoice = Math.ceil(TotalRecords / pageSize);\n            }\n            for (var i = 0; i < gridDataResult.length; i++) {\n              var line = {};\n              line['DocumentNo'] = gridDataResult[i].DocumentNo;\n              line['C_BPartner'] = gridDataResult[i].CustomerName;\n              line['S_Resource_ID'] = gridDataResult[i].ResourceName;\n              line['M_Product'] = gridDataResult[i].ProductName;\n              line['Qty'] = gridDataResult[i].Qty;\n              line['Price'] = gridDataResult[i].PriceList;\n              line['PriceStd'] = gridDataResult[i].PriceStd;\n              line['PriceLimit'] = gridDataResult[i].PriceLimit;\n              line['Amount'] = gridDataResult[i].PriceList * gridDataResult[i].Qty;\n              line['C_BPartner_ID'] = gridDataResult[i].CustomerId;\n              line['StdPrecision'] = gridDataResult[i].stdPrecision;\n              line['VA009_PaymentMethod_ID'] = gridDataResult[i].VA009_PaymentMethod_ID;\n              line['M_PriceList_ID'] = gridDataResult[i].M_PriceList_ID;\n              line['C_BPartner_Location_ID'] = gridDataResult[i].C_Location_ID;\n              line['M_Product_ID'] = gridDataResult[i].M_Product_ID;\n              line['C_Charge_ID'] = gridDataResult[i].C_Charge_ID;\n              line['C_Uom_ID'] = gridDataResult[i].C_Uom_ID;\n              line['C_PaymentTerm_ID'] = gridDataResult[i].C_PaymentTerm_ID;\n              line['C_Currency_ID'] = gridDataResult[i].C_Currency_ID;\n              line['UomName'] = gridDataResult[i].UomName;\n              line['ISO_Code'] = gridDataResult[i].ISO_Code;\n              line['ImageUrl'] = gridDataResult[i].ImageUrl;\n              line['productImgUrl'] = gridDataResult[i].productImgUrl;\n              line['LocationName'] = gridDataResult[i].LocationName;\n              line['ProjReq_ID'] = gridDataResult[i].ProjReq_ID;\n              line['ProjReq_Name'] = gridDataResult[i].ProjReq_Name;\n              line['RecordedDate'] = gridDataResult[i].RecordedDate;\n              line['EstimatedTime'] = gridDataResult[i].EstimatedTime;\n              line['EnforcePriceLimit'] = gridDataResult[i].EnforcePriceLimit;\n              line['S_TimeExpenseLine_ID'] = gridDataResult[i].S_TimeExpenseLine_ID;\n              line['VA075_WorkOrderOperation_ID'] = gridDataResult[i].VA075_WorkOrderOperation_ID;\n              if (gridDataResult[i].PhaseInfo != null) {\n                line['PhaseName'] = gridDataResult[i].PhaseInfo;\n              } else if (gridDataResult[i].RequestSummary != null) {\n                line['RequestSummary'] = gridDataResult[i].RequestSummary;\n              }\n              line['recordCount'] = 0;\n              line['recid'] = count;\n              count++;\n              data.push(line);\n            }\n          } else {\n            VIS.ADialog.info(\"NoDataFound\");\n          }\n          //Handled condition for scroll\n          if (!IsOnScroll) {\n            dynInit(data);\n          } else {\n            $self.dGrid.add(data);\n          }\n          $self.setBusy(false);\n        },\n        error: function (e) {}\n      });\n      return data;\n    }\n\n    /**\r\n    * this grid is used for loading preview data\r\n    * @param {any} data\r\n    */\n    function PreviewDyinit(data) {\n      var hue = Math.floor(Math.random() * (360 - 0)) + 0;\n      var v = Math.floor(Math.random() * (75 - 60 + 1)) + 60; //Math.floor(Math.random() * 16) + 75;\n      var pastel = 'hsl(' + hue + ', 100%,' + v + '%)';\n      $self.PreviewColumns = [];\n      if ($self.dGridPreview != null) {\n        $self.dGridPreview.destroy();\n        $self.dGridPreview = null;\n      }\n      if ($self.PreviewColumns.length == 0) {\n        $self.PreviewColumns.push({\n          field: \"M_Product\",\n          caption: VAS.translatedTexts.VAS_ProductOrCharge,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: false,\n          render: function (record) {\n            var div;\n            //Extarcted the first character of Product \n            var prodChar = '';\n            var prodNameArr = record[\"M_Product\"].trim().split(' ');\n            prodChar = prodNameArr[0].substring(0, 1).toUpper();\n            if (prodNameArr.length > 1) {\n              prodChar += prodNameArr[prodNameArr.length - 1].substring(0, 1).toUpper();\n            } else {\n              prodChar = prodNameArr[0].substring(0, 2).toUpper();\n            }\n            if (record[\"productImgUrl\"] != null) {\n              div = '<div class=\"vas-tis-gridimg vis-gridImageicon\">' + '<img class=\"vas-businessPartnerImg\" alt=\"' + record[\"productImgUrl\"] + '\" src=\"' + VIS.Application.contextUrl + record[\"productImgUrl\"] + '\">' + '<div class=\"vas-tis-bpstyling\">' + record[\"M_Product\"] + '</div>';\n              '</div>';\n            } else {\n              div = '<div style=\"float:left;margin:6px;background-color:' + pastel + '\" class=\"vis-grid-row-td-icon\"><span style=\"font-size: 16px;\">' + prodChar + '</span></div>' + '<div class=\"vas-tis-prodicon\" style\"text-overflow: ellipsis;\">' + record[\"M_Product\"] + '</div>';\n              '</div>';\n            }\n            return div;\n          }\n        });\n        $self.PreviewColumns.push({\n          field: 'Price',\n          caption: VAS.translatedTexts.Price,\n          size: '16%',\n          sortable: true,\n          size: '16%',\n          min: 150,\n          style: 'text-align:right;',\n          hidden: false,\n          render: function (record, index, col_index) {\n            var val = record[\"Price\"];\n            precision = record[\"StdPrecision\"];\n            return parseFloat(val).toLocaleString(window.navigator.language, {\n              minimumFractionDigits: precision,\n              maximumFractionDigits: precision\n            });\n          }\n        });\n        $self.PreviewColumns.push({\n          field: \"UomName\",\n          caption: VAS.translatedTexts.VAS_UomName,\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: false\n        });\n        $self.PreviewColumns.push({\n          field: 'Qty',\n          caption: VAS.translatedTexts.Qty,\n          size: '16%',\n          sortable: true,\n          size: '16%',\n          min: 150,\n          hidden: false\n        });\n        $self.PreviewColumns.push({\n          field: 'Amount',\n          caption: VAS.translatedTexts.VAS_TotalBilableAmount,\n          size: '16%',\n          sortable: true,\n          style: 'text-align:right;',\n          size: '16%',\n          min: 150,\n          hidden: false,\n          render: function (record, index, col_index) {\n            SubTotal = SubTotal + record[\"Amount\"];\n            var val = record[\"Amount\"];\n            precision = record[\"StdPrecision\"];\n            return parseFloat(val).toLocaleString(window.navigator.language, {\n              minimumFractionDigits: precision,\n              maximumFractionDigits: precision\n            }) + \" \" + record[\"ISO_Code\"];\n          }\n        });\n      }\n      //Identifed and commented line so that records note encode when it has special character\n      // w2utils.encodeTags(data);\n      $self.dGridPreview = $($self.PreviewGridDiv).w2grid({\n        name: \"GridPreview_\" + $self.windowNo,\n        recordHeight: 29,\n        columns: $self.PreviewColumns,\n        records: data\n      });\n    }\n\n    /**\r\n    * this function is used to show preview of records selected by user on clcik of preview button\r\n    * @param {any} gridDataArray\r\n    */\n    function LoadPreviewDialog(gridDataArray) {\n      // Create HTML elements for the preview dialog layout\n      var PreviewWrap = $('<div class=\"vas-tis-arInvViewer d-flex\">');\n      var PreviLeftWrap = $('<div class= \"vas-tis-arInvLeftSide\"><div class=\"vas-tis-arInvListGroup\">');\n      var rightPreviewWrap = $('<div class=\"vas-tis-arInvRightSide\">');\n      var PreviewMainDiv = $(\"<div class='vas-poptis-content vis-formouterwrpdiv'>\");\n\n      // Loop through PreviewLeftData to populate the left side of the dialog\n      for (var i = 0; i < PreviewLeftData.length; i++) {\n        PreviLeftWrap.append('<div class=\"vas-tis-arInvlistItem mb-2\" id=\"C_BpartnerListDiv_' + $self.windowNo + '\">' + '<div class=\"vas-tis-arInvoiceDetails px-2\">' + '<span class=\"vas-tis-arInvDetailsDesc\" id=\"C_BPartnerDiv_' + $self.windowNo + '\" data-bpid=\"' + PreviewLeftData[i].C_BPartner_ID + '\" data-paymethodid=\"' + PreviewLeftData[i].VA009_PaymentMethod_ID + '\" data-pricelistid=\"' + PreviewLeftData[i].M_PriceList_ID + '\"> ' + VIS.Utility.decodeText(PreviewLeftData[i].C_BPartner) + '</span > ' + '<span class=\"vas-tis-arInvDetailsDesc\">' + VAS.translatedTexts.VAS_RecordCount + \":\" + PreviewLeftData[i].recordCount + '</span>' + '<span class=\"vas-tis-arInvDetailsDesLoc\" id=\"C_BPartnerLocationDiv_' + $self.windowNo + '\" data-bplocationid=\"' + PreviewLeftData[i].C_BPartner_Location_ID + '\">' + PreviewLeftData[i].LocationName + '</span>' + '</div>');\n      }\n\n      // Create HTML elements for the right side of the dialog\n      var PreviewId = \"gridSelectDiv_\" + $self.windowNo;\n      var headTagForBPartner = $('<h4 id=\"HeadBPTag_' + $self.windowNo + '\">' + VIS.Utility.decodeText(PreviewLeftData[0].C_BPartner) + '</h4>');\n      $self.PreviewGridDiv = $(\"<div id='\" + PreviewId + \"' class='vas-pointdiv'>\");\n      rightPreviewWrap.append(headTagForBPartner).append($self.PreviewGridDiv);\n\n      // Combine all elements and append them to the main dialog div\n      PreviewWrap.append(PreviLeftWrap).append(rightPreviewWrap);\n      PreviewMainDiv.append(PreviewWrap);\n\n      // Create and configure the preview dialog\n      var PreviewDialog = new VIS.ChildDialog();\n      PreviewDialog.setContent(PreviewMainDiv);\n      PreviewDialog.setTitle(VAS.translatedTexts.VAS_PreviewDialog);\n      PreviewDialog.setWidth(\"80%\");\n      PreviewDialog.setHeight(517);\n      PreviewDialog.setEnableResize(true);\n      PreviewDialog.setModal(true);\n      PreviewDialog.show();\n      PreviewDialog.hideButtons();\n\n      // Handle click events on items in the left side of the dialog\n      var BPartnerInfoClickDiv = PreviLeftWrap.find('.vas-tis-arInvlistItem');\n      BPartnerInfoClickDiv.first().addClass('vas-tis-arInvActive');\n      var locid = BPartnerInfoClickDiv.find(\"#C_BPartnerLocationDiv_\" + $self.windowNo).attr('data-bplocationid');\n      var bpid = BPartnerInfoClickDiv.find(\"#C_BPartnerDiv_\" + $self.windowNo).attr('data-bpid');\n      var priceListId = BPartnerInfoClickDiv.find(\"#C_BPartnerDiv_\" + $self.windowNo).attr('data-pricelistid');\n      var payMethodId = BPartnerInfoClickDiv.find(\"#C_BPartnerDiv_\" + $self.windowNo).attr('data-paymethodid');\n      PreviewFilteredGridData = jQuery.grep(gridDataArray, function (value) {\n        return VIS.Utility.Util.getValueOfInt(value.C_BPartner_ID) === VIS.Utility.Util.getValueOfInt(bpid) && VIS.Utility.Util.getValueOfInt(value.C_BPartner_Location_ID) === VIS.Utility.Util.getValueOfInt(locid) && VIS.Utility.Util.getValueOfInt(value.VA009_PaymentMethod_ID) === VIS.Utility.Util.getValueOfInt(payMethodId) && VIS.Utility.Util.getValueOfInt(value.M_PriceList_ID) === VIS.Utility.Util.getValueOfInt(priceListId);\n      });\n\n      // Initialize the preview grid with filtered data\n      PreviewDyinit(PreviewFilteredGridData);\n\n      // Append subtotal span to the right side of the dialog\n      var SubTotalSpan = $('<div><div class=\"vas-tis-subtotal\" id=\"SubTotalSpan_' + $self.windowNo + '\">' + VAS.translatedTexts.VAS_SubTotal + \": \" + parseFloat(SubTotal).toLocaleString(window.navigator.language, {\n        minimumFractionDigits: precision,\n        maximumFractionDigits: precision\n      }) + '</div></div>');\n      rightPreviewWrap.append(SubTotalSpan);\n\n      // Handle click events on items in the left side of the dialog\n      PreviLeftWrap.find('.vas-tis-arInvlistItem').on('click', function () {\n        locid = $(this).find('.vas-tis-arInvDetailsDesLoc').attr('data-bplocationid');\n        bpid = $(this).find('.vas-tis-arInvDetailsDesc').attr('data-bpid');\n        priceListId = $(this).find('.vas-tis-arInvDetailsDesc').attr('data-pricelistid');\n        payMethodId = $(this).find('.vas-tis-arInvDetailsDesc').attr('data-paymethodid');\n        PreviLeftWrap.find('.vas-tis-arInvlistItem').removeClass('vas-tis-arInvActive');\n        $(this).addClass('vas-tis-arInvActive');\n        PreviewFilteredGridData = jQuery.grep(gridDataArray, function (value) {\n          return VIS.Utility.Util.getValueOfInt(value.C_BPartner_ID) === VIS.Utility.Util.getValueOfInt(bpid) && VIS.Utility.Util.getValueOfInt(value.C_BPartner_Location_ID) === VIS.Utility.Util.getValueOfInt(locid) && VIS.Utility.Util.getValueOfInt(value.VA009_PaymentMethod_ID) === VIS.Utility.Util.getValueOfInt(payMethodId) && VIS.Utility.Util.getValueOfInt(value.M_PriceList_ID) === VIS.Utility.Util.getValueOfInt(priceListId);\n        });\n\n        // Initialize the preview grid with filtered data\n        PreviewDyinit(PreviewFilteredGridData);\n        rightPreviewWrap.find(\"#HeadBPTag_\" + $self.windowNo).text(VIS.Utility.decodeText(PreviewFilteredGridData[0].C_BPartner));\n        rightPreviewWrap.find(\"#SubTotalSpan_\" + $self.windowNo).text(VAS.translatedTexts.VAS_SubTotal + \": \" + parseFloat(SubTotal).toLocaleString(window.navigator.language, {\n          minimumFractionDigits: precision,\n          maximumFractionDigits: precision\n        }));\n        SubTotal = 0;\n      });\n      SubTotal = 0;\n    }\n\n    /**\r\n    * this function is responsible for generating invoice\r\n    * @param {any} gridDataArray\r\n    */\n    function GenerateInvoice(gridDataArray) {\n      if (gridDataArray.length == 0) {\n        VIS.ADialog.info('VAS_PlzSelectRecord');\n        return;\n      }\n      var gridDataWithZeroPrice = jQuery.grep(gridDataArray, function (value) {\n        return VIS.Utility.Util.getValueOfDecimal(value.Price) === 0;\n      });\n      //Restricting to not generate invoice for records whose Price is zero\n      if (gridDataWithZeroPrice.length > 0) {\n        VIS.ADialog.info(\"\", false, VAS.translatedTexts.VAS_ZeroPriceFor);\n        return;\n      }\n      var AD_Client_ID = VIS.Env.getCtx().getAD_Client_ID();\n      $self.setBusy(true);\n      $.ajax({\n        url: VIS.Application.contextUrl + \"VAS_TimeSheetInvoices/GenerateInvoice\",\n        type: 'POST',\n        data: {\n          DataTobeInvoice: JSON.stringify(gridDataArray),\n          AD_Client_ID: VIS.Utility.Util.getValueOfInt(AD_Client_ID),\n          AD_Org_ID: VIS.Utility.Util.getValueOfInt(AD_Org_ID),\n          C_DocType_ID: VIS.Utility.Util.getValueOfInt($self.cmbDocType.getValue())\n        },\n        success: function (result) {\n          if (result != null) {\n            VIS.ADialog.info(\"\", null, JSON.parse(result), null);\n            //Cleared the value of grid after generating the invoice\n            dynInit(null);\n            clearVariables();\n            clearControls();\n            removeControlsSelectedDiv();\n          } else {\n            VIS.ADialog.info(\"VAS_InvoiceNotGenerated\");\n          }\n          $self.setBusy(false);\n        },\n        error: function (e) {\n          VIS.ADialog.info(\"VAS_InvoiceNotGenerated\");\n          $self.setBusy(false);\n        }\n      });\n    }\n    /*this function display the filter popup on click of filter button*/\n    function FilterDisplay() {\n      var $FilterDiv = $self.$root.find(\"#vas_tis_FilterPopupWrap_\" + $self.windowNo);\n      $FilterHeader = $('  <div class=\"vas-filter-flyout\">                                                              ' + '    <div class=\"vas-flyout-header\">                                                            ' + '      <h1>' + VAS.translatedTexts.VAS_Filter + '</h1><span class=\"vis vis-cross\"></span> ' + '    </div>                                                                                     ' + '    <div class=\"vas-from-row\">');\n      //Created the time and expense control \n      $TimeAndExpenseSelected = $('<div class=\"vas-tis-dropdown-lbl d-flex flex-wrap\">');\n      $TaskSelected = $('<div class=\"vas-tis-dropdown-lbl\">');\n      $ProjectSelected = $('<div class=\"vas-tis-dropdown-lbl\">');\n      $RequestSelected = $('<div class=\"vas-tis-dropdown-lbl\">');\n      TimeDiv = $('<div class=\"VAS-Time\">');\n      $TimeAndExpenseDiv = $('<div class=\"input-group vis-input-wrap\">');\n      var validationcode = \"S_TimeExpense.DocStatus IN ('CO','CL')\";\n      var TimeAndExpenseLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, ColumnIds.S_TimeExpense_ID, VIS.DisplayType.MultiKey, \"S_TimeExpense_ID\", 0, false, validationcode);\n      $self.vSearchTimeAndExpense = new VIS.Controls.VTextBoxButton(\"S_TimeExpense_ID\", true, false, true, VIS.DisplayType.MultiKey, TimeAndExpenseLookUp);\n      var $TimeAndExpenseControlWrap = $('<div class=\"vis-control-wrap\">');\n      var $TimeAndExpenseButtonWrap = $('<div class=\"input-group-append\">');\n      $TimeAndExpenseDiv.append($TimeAndExpenseControlWrap);\n      $TimeAndExpenseControlWrap.append($self.vSearchTimeAndExpense.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VAS.translatedTexts.S_TimeExpense_ID + '</label>');\n      $TimeAndExpenseDiv.append($TimeAndExpenseControlWrap);\n      $TimeAndExpenseButtonWrap.append($self.vSearchTimeAndExpense.getBtn(0));\n      $TimeAndExpenseDiv.append($TimeAndExpenseButtonWrap);\n      TimeDiv.append($TimeAndExpenseDiv);\n      // created the Project control \n      ProjectDiv = $('<div class=\"VAS-projectdiv\">');\n      $ProjectDiv = $('<div class=\"input-group vis-input-wrap\">');\n      var validationcode = \"C_Project.AD_Org_ID IN(0,@AD_Org_ID@) AND C_Project.IsActive='Y' AND C_Project.IsOpportunity='N' AND C_Project.IsCampaign='N'\";\n      var ProjectLookUp = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, ColumnIds.C_ProjectRef_ID, VIS.DisplayType.MultiKey, \"C_ProjectRef_ID\", 0, false, validationcode);\n      $self.vSearchProject = new VIS.Controls.VTextBoxButton(\"C_Project_ID\", true, false, true, VIS.DisplayType.MultiKey, ProjectLookUp);\n      var $ProjectControlWrap = $('<div class=\"vis-control-wrap\">');\n      var $ProjectButtonWrap = $('<div class=\"input-group-append\">');\n      //Set the info window As project\n      $self.vSearchProject.setCustomInfo('Project');\n      $ProjectDiv.append($ProjectControlWrap);\n      $ProjectControlWrap.append($self.vSearchProject.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VAS.translatedTexts.C_Project_ID + '</label>');\n      $ProjectDiv.append($ProjectButtonWrap);\n      $ProjectButtonWrap.append($self.vSearchProject.getBtn(0));\n      $ProjectDiv.append($ProjectButtonWrap);\n      ProjectDiv.append($ProjectDiv);\n      // created the Request control \n      RequestDiv = $('<div class=\"VAS-RequestDiv\">');\n      $RequestDiv = $('<div class=\"input-group vis-input-wrap\">');\n      var RequestLookUp = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, ColumnIds.R_Request_ID, VIS.DisplayType.MultiKey);\n      $self.vSearchRequest = new VIS.Controls.VTextBoxButton(\"R_Request_ID\", true, false, true, VIS.DisplayType.MultiKey, RequestLookUp);\n      var $RequestControlWrap = $('<div class=\"vis-control-wrap\">');\n      var $RequestButtonWrap = $('<div class=\"input-group-append\">');\n      $RequestDiv.append($RequestControlWrap);\n      $RequestControlWrap.append($self.vSearchRequest.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VAS.translatedTexts.R_Request_ID + '</label>');\n      $RequestDiv.append($RequestButtonWrap);\n      $RequestButtonWrap.append($self.vSearchRequest.getBtn(0));\n      $RequestDiv.append($RequestButtonWrap);\n      RequestDiv.append($RequestDiv);\n      if (ModulePrefix[\"VA075_\"]) {\n        TaskDiv = $('<div class=\"VAS-TaskDiv\">');\n        $TaskDiv = $('<div class=\"input-group vis-input-wrap\">');\n        var TaskLookUp = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, ColumnIds.VA075_Task_ID, VIS.DisplayType.MultiKey);\n        $self.vSearchTask = new VIS.Controls.VTextBoxButton(\"VA075_Task_ID\", true, false, true, VIS.DisplayType.MultiKey, TaskLookUp);\n        var $TaskControlWrap = $('<div class=\"vis-control-wrap\">');\n        var $TaskButtonWrap = $('<div class=\"input-group-append\">');\n        $self.vSearchTask.setCustomInfo('VA075_TaskMaster');\n        $TaskDiv.append($TaskControlWrap);\n        $TaskControlWrap.append($self.vSearchTask.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VAS.translatedTexts.VA075_Task_ID + '</label>');\n        $TaskDiv.append($TaskControlWrap);\n        $TaskButtonWrap.append($self.vSearchTask.getBtn(0));\n        $TaskDiv.append($TaskButtonWrap);\n        TaskDiv.append($TaskDiv);\n        //Created LOV control for task which will have billable,non billable and null values\n        TaskTypeDiv = $('<div class=\"VAS-TaskTypeDiv\">');\n        $TaskTypeDiv = $('<div class=\"input-group vis-input-wrap\">');\n        /* parameters are: context, windowno., coloumn id, display type, DB coloumn name, Reference key, Is parent, Validation Code*/\n        $TaskTypeLookUp = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.List, \"VAS_TaskType\", ColumnIds.AD_Reference_ID, false);\n        // Parameters are: columnName, mandatory, isReadOnly, isUpdateable, lookup,display length\n        $self.vTaskType = new VIS.Controls.VComboBox(\"VAS_TaskType\", false, false, true, $TaskTypeLookUp, 100);\n        var $TaskTypeControlWrap = $('<div class=\"vis-control-wrap\">');\n        var $TaskTypeButtonWrap = $('<div class=\"input-group-append\">');\n        $TaskTypeDiv.append($TaskTypeControlWrap);\n        $TaskTypeControlWrap.append($self.vTaskType.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VAS.translatedTexts.VAS_TaskType + '</label>');\n        $TaskTypeDiv.append($TaskTypeControlWrap);\n        $TaskTypeButtonWrap.append($self.vTaskType.getBtn(0));\n        $TaskTypeDiv.append($TaskTypeButtonWrap);\n        TaskTypeDiv.append($TaskTypeDiv);\n        $FilterHeader.append(TimeDiv).append(TaskDiv).append(ProjectDiv).append(RequestDiv).append(TaskTypeDiv);\n        if (TaskTypeAtApply != null) {\n          $self.vTaskType.setValue(TaskTypeAtApply);\n        } else {\n          $self.vTaskType.setValue(null);\n        }\n      } else {\n        $FilterHeader.append(TimeDiv).append(ProjectDiv).append(RequestDiv);\n      }\n      var ApplyBtn = $('<div class=\"vas-flyout-footer\">' + '<button class=\"VIS_Pref_btn-2 w-100 mt-0\" id=\"VAS_Apply_' + $self.windowNo + '\">' + VAS.translatedTexts.VAS_Apply + '</button>' + '</div>');\n      $FilterHeader.append(ApplyBtn);\n      var $ApplyButton = ApplyBtn.find(\"#VAS_Apply_\" + $self.windowNo);\n      $FilterDiv.append($FilterHeader);\n      //On click of apply button The data will be filtered according to selected filters\n      $ApplyButton.on(\"click\", function () {\n        if ($FromDate.getValue() == null || $ToDate.getValue() == null) {\n          VIS.ADialog.info('VAS_DateFieldAreMandatory');\n          return;\n        }\n        if ($FromDate.getValue() > $ToDate.getValue()) {\n          VIS.ADialog.info('VAS_PlzEnterCorrectDate');\n          $ToDate.setValue(null);\n          return;\n        }\n        AppliedTimeExpData = TimeExpenseData;\n        AppliedTaskData = TaskData;\n        AppliedProjectData = ProjectData;\n        AppliedRequestData = RequestData;\n        TaskTypeAtApply = TaskTypeVal;\n        AD_Org_ID = $self.cmbOrg.getControl().find('option:selected').val();\n        gridPgnoInvoice = 1;\n        pageNo = 1;\n        LoadTimeSheetData(pageNo, pageSize, false);\n        $FilterHeader.remove();\n      });\n      //Storing value on change of list\n      $self.vTaskType.fireValueChanged = function () {\n        TaskTypeVal = $self.vTaskType.getValue();\n      };\n      $self.vSearchTimeAndExpense.fireValueChanged = function () {\n        //Handling the value when user select multiple values from popup\n        var timeExpValue = TimeAndExpenseLookUp;\n        var timeExpIds = $self.vSearchTimeAndExpense.value;\n        var timeExpName = \"\";\n        var timeExpMultiIdArray = timeExpIds.toString().split(',');\n        for (var i = 0; i < timeExpMultiIdArray.length; i++) {\n          timeExpName = timeExpValue.getDisplay(timeExpMultiIdArray[i]);\n          if (TimeExpenseId.indexOf(timeExpMultiIdArray[i]) == -1) {\n            if (timeExpMultiIdArray[i] != null) {\n              $TimeAndExpenseSelected.append('<div class=\"vas-selected-lbl\">' + timeExpName + '<span class=\"vis vis-cross\" data-timeandexpenceid=\"' + timeExpMultiIdArray[i] + '\"></span></div>');\n              TimeDiv.append($TimeAndExpenseSelected);\n              TimeExpenseId.push(timeExpMultiIdArray[i]);\n              timeExp = {\n                Id: timeExpMultiIdArray[i],\n                Name: timeExpName\n              };\n              TimeExpenseData.push(timeExp);\n              $TimeAndExpenseSelected.find('.vis-cross').on('click', function () {\n                var TimeAndExpense_ID = $(this).attr('data-timeandexpenceid');\n                TimeExpenseId = jQuery.grep(TimeExpenseId, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value) != VIS.Utility.Util.getValueOfInt(TimeAndExpense_ID);\n                });\n                TimeExpenseData = jQuery.grep(TimeExpenseData, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value.Id) != VIS.Utility.Util.getValueOfInt(TimeAndExpense_ID);\n                });\n                $(this).parent().remove();\n                if ($TimeAndExpenseSelected.find('.vis-cross').length == 0) {\n                  $TimeAndExpenseSelected.remove();\n                }\n              });\n            }\n          }\n        }\n        $self.vSearchTimeAndExpense.setValue(null);\n      };\n      $self.vSearchTask.fireValueChanged = function () {\n        //Handling the value when user select multiple values from popup\n        var taskValue = TaskLookUp;\n        var taskIds = $self.vSearchTask.value;\n        var taskName = \"\";\n        var taskMultiIdArray = taskIds.toString().split(',');\n        for (var i = 0; i < taskMultiIdArray.length; i++) {\n          taskName = taskValue.getDisplay(taskMultiIdArray[i]);\n          if (TaskId.indexOf(taskMultiIdArray[i]) == -1) {\n            if (taskMultiIdArray[i] != null) {\n              $TaskSelected.append('<div class=\"vas-selected-lbl\">' + taskName + '<span class=\"vis vis-cross\" data-taskid=\"' + taskMultiIdArray[i] + '\"></span></div>');\n              TaskDiv.append($TaskSelected);\n              TaskId.push(taskMultiIdArray[i]);\n              var taskDataObj = {\n                TaskId: taskMultiIdArray[i],\n                TaskName: taskName\n              };\n              TaskData.push(taskDataObj);\n              $TaskSelected.find('.vis-cross').on('click', function () {\n                var Task_ID = $(this).attr('data-taskid');\n                TaskId = jQuery.grep(TaskId, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value) != VIS.Utility.Util.getValueOfInt(Task_ID);\n                });\n                TaskData = jQuery.grep(TaskData, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value.TaskId) != VIS.Utility.Util.getValueOfInt(Task_ID);\n                });\n                $(this).parent().remove();\n                if ($TaskSelected.find('.vis-cross').length == 0) {\n                  $TaskSelected.remove();\n                }\n              });\n            }\n          }\n        }\n        $self.vSearchTask.setValue(null);\n      };\n      $self.vSearchProject.fireValueChanged = function () {\n        //Handling the value when user select multiple values from popup\n        var projectValue = ProjectLookUp;\n        var projectIds = $self.vSearchProject.value;\n        var projectName = \"\";\n        var projectMultiIdArray = projectIds.toString().split(',');\n        for (var i = 0; i < projectMultiIdArray.length; i++) {\n          projectName = projectValue.getDisplay(projectMultiIdArray[i]);\n          if (ProjectId.indexOf(projectMultiIdArray[i]) == -1) {\n            if (projectMultiIdArray[i] != null) {\n              $ProjectSelected.append('<div class=\"vas-selected-lbl\">' + projectName + '<span class=\"vis vis-cross\" data-projectid=\"' + projectMultiIdArray[i] + '\"></span></div>');\n              ProjectDiv.append($ProjectSelected);\n              ProjectId.push(projectMultiIdArray[i]);\n              var projectDataObj = {\n                ProjectId: projectMultiIdArray[i],\n                ProjectName: projectName\n              };\n              ProjectData.push(projectDataObj);\n              $ProjectSelected.find('.vis-cross').on('click', function () {\n                var Project_ID = $(this).attr('data-projectid');\n                ProjectId = jQuery.grep(ProjectId, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value) != VIS.Utility.Util.getValueOfInt(Project_ID);\n                });\n                ProjectData = jQuery.grep(ProjectData, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value.ProjectId) != VIS.Utility.Util.getValueOfInt(Project_ID);\n                });\n                $(this).parent().remove();\n                if ($ProjectSelected.find('.vis-cross').length == 0) {\n                  $ProjectSelected.remove();\n                }\n              });\n            }\n          }\n        }\n        $self.vSearchProject.setValue(null);\n      };\n      $self.vSearchRequest.fireValueChanged = function () {\n        //Handling the value when user select multiple values from popup\n        var requestValue = RequestLookUp;\n        var requestIds = $self.vSearchRequest.value;\n        var requestName = \"\";\n        var requestMultiIdArray = requestIds.toString().split(',');\n        for (var i = 0; i < requestMultiIdArray.length; i++) {\n          requestName = requestValue.getDisplay(requestMultiIdArray[i]);\n          if (RequestId.indexOf(requestMultiIdArray[i]) == -1) {\n            if (requestMultiIdArray[i] != null) {\n              $RequestSelected.append('<div class=\"vas-selected-lbl\">' + requestName + '<span class=\"vis vis-cross\" data-requestid=\"' + requestMultiIdArray[i] + '\"></span></div>');\n              RequestDiv.append($RequestSelected);\n              RequestId.push(requestMultiIdArray[i]);\n              var requestDataObj = {\n                RequestId: requestMultiIdArray[i],\n                RequestName: requestName\n              };\n              RequestData.push(requestDataObj);\n              $RequestSelected.find('.vis-cross').on('click', function () {\n                var Request_ID = $(this).attr('data-requestid');\n                RequestId = jQuery.grep(RequestId, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value) != VIS.Utility.Util.getValueOfInt(Request_ID);\n                });\n                RequestData = jQuery.grep(RequestData, function (value) {\n                  return VIS.Utility.Util.getValueOfInt(value.RequestId) != VIS.Utility.Util.getValueOfInt(Request_ID);\n                });\n                $(this).parent().remove();\n                if ($RequestSelected.find('.vis-cross').length == 0) {\n                  $RequestSelected.remove();\n                }\n              });\n            }\n          }\n        }\n        $self.vSearchRequest.setValue(null);\n      };\n      $FilterHeader.find('.vis-cross').on('click', function () {\n        $FilterHeader.remove();\n        IsFilterBtnClicked = false;\n      });\n    }\n    //This dunction is used to maintain the value at filter section close and open\n    function GetSelectedFilterVal() {\n      if (AppliedTimeExpData.length > 0) {\n        for (var i = 0; i < AppliedTimeExpData.length; i++) {\n          $TimeAndExpenseSelected.append('<div class=\"vas-selected-lbl\">' + AppliedTimeExpData[i].Name + '<span class=\"vis vis-cross\" data-timeandexpenceid=\"' + AppliedTimeExpData[i].Id + '\"></span></div>');\n          TimeDiv.append($TimeAndExpenseSelected);\n        }\n        $TimeAndExpenseSelected.find('.vis-cross').on('click', function () {\n          var TimeAndExpense_ID = $(this).attr('data-timeandexpenceid');\n          TimeExpenseId = jQuery.grep(TimeExpenseId, function (value) {\n            return VIS.Utility.Util.getValueOfInt(value) != VIS.Utility.Util.getValueOfInt(TimeAndExpense_ID);\n          });\n          TimeExpenseData = jQuery.grep(TimeExpenseData, function (value) {\n            return VIS.Utility.Util.getValueOfInt(value.Id) != VIS.Utility.Util.getValueOfInt(TimeAndExpense_ID);\n          });\n          $(this).parent().remove();\n          if ($TimeAndExpenseSelected.find('.vis-cross').length == 0) {\n            $TimeAndExpenseSelected.remove();\n          }\n        });\n      }\n      if (AppliedTaskData.length > 0) {\n        for (var i = 0; i < TaskData.length; i++) {\n          $TaskSelected.append('<div class=\"vas-selected-lbl\">' + AppliedTaskData[i].TaskName + '<span class=\"vis vis-cross\" data-taskid=\"' + AppliedTaskData[i].TaskId + '\"></span></div>');\n          TaskDiv.append($TaskSelected);\n        }\n        $TaskSelected.find('.vis-cross').on('click', function () {\n          var Task_ID = $(this).attr('data-taskid');\n          TaskId = jQuery.grep(TaskId, function (value) {\n            return VIS.Utility.Util.getValueOfInt(value) != VIS.Utility.Util.getValueOfInt(Task_ID);\n          });\n          TaskData = jQuery.grep(TaskData, function (value) {\n            return VIS.Utility.Util.getValueOfInt(value.TaskId) != VIS.Utility.Util.getValueOfInt(Task_ID);\n          });\n          $(this).parent().remove();\n          if ($TaskSelected.find('.vis-cross').length == 0) {\n            $TaskSelected.remove();\n          }\n        });\n      }\n      if (AppliedProjectData.length > 0) {\n        for (var i = 0; i < ProjectData.length; i++) {\n          $ProjectSelected.append('<div class=\"vas-selected-lbl\">' + AppliedProjectData[i].ProjectName + '<span class=\"vis vis-cross\" data-projectid=\"' + AppliedProjectData[i].ProjectId + '\"></span></div>');\n          ProjectDiv.append($ProjectSelected);\n        }\n        $ProjectSelected.find('.vis-cross').on('click', function () {\n          var Project_ID = $(this).attr('data-projectid');\n          ProjectId = jQuery.grep(ProjectId, function (value) {\n            return VIS.Utility.Util.getValueOfInt(value) != VIS.Utility.Util.getValueOfInt(Project_ID);\n          });\n          ProjectData = jQuery.grep(ProjectData, function (value) {\n            return VIS.Utility.Util.getValueOfInt(value.ProjectId) != VIS.Utility.Util.getValueOfInt(Project_ID);\n          });\n          $(this).parent().remove();\n          if ($ProjectSelected.find('.vis-cross').length == 0) {\n            $ProjectSelected.remove();\n          }\n        });\n      }\n      if (AppliedRequestData.length > 0) {\n        for (var i = 0; i < RequestData.length; i++) {\n          $RequestSelected.append('<div class=\"vas-selected-lbl\">' + AppliedRequestData[i].RequestName + '<span class=\"vis vis-cross\" data-requestid=\"' + AppliedRequestData[i].RequestId + '\"></span></div>');\n          RequestDiv.append($RequestSelected);\n        }\n        $RequestSelected.find('.vis-cross').on('click', function () {\n          var Request_ID = $(this).attr('data-requestid');\n          RequestId = jQuery.grep(RequestId, function (value) {\n            return VIS.Utility.Util.getValueOfInt(value) != VIS.Utility.Util.getValueOfInt(Request_ID);\n          });\n          RequestData = jQuery.grep(RequestData, function (value) {\n            return VIS.Utility.Util.getValueOfInt(value.RequestId) != VIS.Utility.Util.getValueOfInt(Request_ID);\n          });\n          $(this).parent().remove();\n          if ($RequestSelected.find('.vis-cross').length == 0) {\n            $RequestSelected.remove();\n          }\n        });\n      }\n    }\n    //This function is used to clear the controls on generating the invoice\n    function clearControls() {\n      //if oldvalue of control is same as new/null then set 0\n      if ($self.cmbOrg.oldValue == null) {\n        $self.cmbOrg.setValue(0);\n      }\n      if ($self.cmbDocType.oldValue == null) {\n        $self.cmbDocType.setValue(0);\n      }\n      $self.cmbDocType.setValue(null);\n      $self.cmbOrg.setValue(null);\n      $FromDate.setValue(null);\n      $ToDate.setValue(null);\n    }\n    //This function is used to initialize the design onload and handling various click events\n    this.Initialize = function () {\n      initializeComponent();\n      this.btnToggel = this.$root.find(\"#btnSpace_\" + $self.windowNo);\n      this.spnRecordSelection = this.$root.find(\"#spnSelect_\" + $self.windowNo);\n      this.PreviewBtn = this.$root.find(\"#PreviewBtn_\" + $self.windowNo);\n      var btnFilter = this.$root.find(\"#vas_tis_dropdownMenu_\" + $self.windowNo);\n      var refreshIcon = this.$root.find(\"#vas-tis-refresh_\" + $self.windowNo);\n      //On click of filter button added a popup to filter the data\n      if (btnFilter != null) {\n        btnFilter.on(\"click\", function () {\n          if (!IsFilterBtnClicked) {\n            $self.setBusy(true);\n            //storing oldvalue on click of filter button\n            TimeExpenseData = JSON.parse(JSON.stringify(AppliedTimeExpData));\n            TaskData = JSON.parse(JSON.stringify(AppliedTaskData));\n            RequestData = JSON.parse(JSON.stringify(AppliedRequestData));\n            ProjectData = JSON.parse(JSON.stringify(AppliedProjectData));\n            if (TimeExpenseData.length == 0) {\n              TimeExpenseId = [];\n            }\n            if (TaskData.length == 0) {\n              TaskId = [];\n            }\n            if (RequestData.length == 0) {\n              RequestId = [];\n            }\n            if (ProjectData.length == 0) {\n              ProjectId = [];\n            }\n            FilterDisplay();\n            GetSelectedFilterVal();\n            IsFilterBtnClicked = true;\n            $self.setBusy(false);\n          } else {\n            $FilterHeader.remove();\n            IsFilterBtnClicked = false;\n          }\n        });\n      }\n      if (refreshIcon != null) {\n        refreshIcon.on(\"click\", function () {\n          $self.setBusy(true);\n          //on refresh clearing the values\n          dynInit(null);\n          clearVariables();\n          clearControls();\n          removeControlsSelectedDiv();\n          $CustomerSelected = $('<div class=\"vas-tis-dropdown-lbl\">');\n          $ResourceSelected = $('<div class=\"vas-tis-dropdown-lbl\">');\n          if ($FilterHeader != null) {\n            $FilterHeader.remove();\n          }\n          $self.setBusy(false);\n        });\n      }\n      //On clcik of search button the data will beloaded on grid\n      if (this.SearchBtn != null) this.SearchBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        AD_Org_ID = $self.cmbOrg.getControl().find('option:selected').val();\n        if (VIS.Utility.Util.getValueOfInt(AD_Org_ID) == 0) {\n          VIS.ADialog.info('VAS_PlzSelectOrganization');\n          return;\n        }\n        if ($FromDate.getValue() == null || $ToDate.getValue() == null) {\n          VIS.ADialog.info('VAS_DateFieldAreMandatory');\n          return;\n        }\n        if ($FromDate.getValue() > $ToDate.getValue()) {\n          VIS.ADialog.info('VAS_PlzEnterCorrectDate');\n          $ToDate.setValue(null);\n          return;\n        }\n        pageNo = 1;\n        LoadTimeSheetData(pageNo, pageSize, false);\n      });\n      //On clcik of Preview button the data will beloaded on Prview data grid\n      if (this.PreviewBtn != null) {\n        this.PreviewBtn.on(VIS.Events.onTouchStartOrClick, function () {\n          if (PreviewLeftData.length == 0) {\n            VIS.ADialog.info('VAS_PlzSelectRecord');\n            return;\n          }\n          LoadPreviewDialog(gridDataArray);\n        });\n      }\n      //On clcik of Generate invoice button the invoice will be generated\n      if (this.GenerateInvBtn != null) {\n        this.GenerateInvBtn.on(VIS.Events.onTouchStartOrClick, function () {\n          if (PreviewLeftData.length == 0) {\n            VIS.ADialog.info('VAS_PlzSelectRecord');\n            return;\n          }\n          if (VIS.Utility.Util.getValueOfInt($self.cmbDocType.getValue()) == 0) {\n            VIS.ADialog.info('VAS_PlzSelectDocType');\n            return;\n          }\n          GenerateInvoice(gridDataArray);\n        });\n      }\n      /*This event is used to handle the Togle event of left side i.e.\r\n        once this button is clicked by user the left field get disabled*/\n      if (this.btnToggel != null) var borderspace = 0;\n      this.btnToggel.on(VIS.Events.onTouchStartOrClick, function () {\n        if (toggleside) {\n          if (VIS.Application.isRTL) {\n            borderspace = 180;\n          } else {\n            borderspace = 0;\n          }\n          $self.btnToggel.animate({\n            borderSpacing: borderspace\n          }, {\n            step: function (now, fx) {\n              $(this).css('-webkit-transform', 'rotate(' + now + 'deg)');\n              $(this).css('-moz-transform', 'rotate(' + now + 'deg)');\n              $(this).css('transform', 'rotate(' + now + 'deg)');\n            },\n            duration: 'slow'\n          }, 'linear');\n          toggleside = false;\n          $self.btnSpaceDiv.animate({\n            width: sideDivWidth\n          }, \"slow\");\n          $self.recordDiv.animate({\n            width: selectDivWidth\n          }, \"slow\");\n          $self.gridSelectDiv.animate({\n            width: selectDivWidth\n          }, \"slow\");\n          $self.topDiv.find('.vas-RecordSelection').addClass('vas-tis-RecordArea');\n          LeftSideFields.css(\"display\", \"block\");\n          $self.SearchBtn.css(\"display\", \"block\");\n          $self.LeftsideDiv.animate({\n            width: sideDivWidth\n          }, \"slow\", null, function () {\n            $self.dGrid.resize();\n          });\n        } else {\n          if (VIS.Application.isRTL) {\n            borderspace = 0;\n          } else {\n            borderspace = 180;\n          }\n          $self.btnToggel.animate({\n            borderSpacing: borderspace\n          }, {\n            step: function (now, fx) {\n              $(this).css('-webkit-transform', 'rotate(' + now + 'deg)');\n              $(this).css('-moz-transform', 'rotate(' + now + 'deg)');\n              $(this).css('transform', 'rotate(' + now + 'deg)');\n            },\n            duration: 'slow'\n          }, 'linear');\n          toggleside = true;\n          $self.btnSpaceDiv.animate({\n            width: minSideWidth\n          }, \"slow\");\n          $self.LeftsideDiv.animate({\n            width: minSideWidth\n          }, \"slow\");\n          $self.topDiv.find('.vas-RecordSelection').removeClass('vas-tis-RecordArea');\n          LeftSideFields.css(\"display\", \"none\");\n          $self.SearchBtn.css(\"display\", \"none\");\n          $self.recordDiv.animate({\n            width: selectDivFullWidth\n          }, \"slow\");\n          $self.gridSelectDiv.animate({\n            width: selectDivFullWidth\n          }, \"slow\", null, function () {\n            $self.dGrid.resize();\n          });\n        }\n      });\n    };\n    //This function is use to change the form width on zoom in zoom out\n    this.sizeChanged = function (h, w) {\n      selectDivWidth = w - (sideDivWidth + 20);\n      selectDivFullWidth = w - (20 + minSideWidth);\n      if (toggleside == true) {\n        $self.btnSpaceDiv.animate({\n          width: minSideWidth\n        }, \"slow\");\n        $self.recordDiv.animate({\n          width: selectDivFullWidth\n        }, \"slow\");\n        $self.LeftsideDiv.animate({\n          width: minSideWidth\n        }, \"slow\");\n        $self.gridSelectDiv.animate({\n          width: selectDivFullWidth\n        }, \"slow\", null, function () {\n          $self.dGrid.resize();\n        });\n      } else {\n        $self.btnSpaceDiv.animate({\n          width: sideDivWidth\n        }, \"slow\");\n        $self.gridSelectDiv.animate({\n          width: selectDivWidth\n        }, \"slow\");\n        $self.recordDiv.animate({\n          width: selectDivWidth\n        }, \"slow\");\n        $self.LeftsideDiv.animate({\n          width: sideDivWidth\n        }, \"slow\", null, function () {\n          $self.dGrid.resize();\n        });\n      }\n    };\n    /* this function is used to remove the div after generating invoice*/\n    function removeControlsSelectedDiv() {\n      $CustomerSelected.remove();\n      $ResourceSelected.remove();\n    }\n    /* This function is responsible for clearing the variable*/\n    function clearVariables() {\n      gridDataArray = [];\n      PreviewLeftData = [];\n      PreviewFilteredGridData = [];\n      TimeExpenseId = [];\n      RequestId = [];\n      TaskTypeVal = null;\n      TaskTypeAtApply = null;\n      ResourceId = [];\n      TaskId = [];\n      CustomerId = [];\n      ProjectId = [];\n      AppliedProjectData = [];\n      AppliedRequestData = [];\n      AppliedTaskData = [];\n      AppliedTimeExpData = [];\n      TimeExpenseData = [];\n      TaskData = [];\n      RequestData = [];\n      ProjectData = [];\n      BPWithZeroPrice = [];\n      BPWithoutPaymentTerm = [];\n      BPWithoutPaymentMethod = [];\n    }\n    this.display = function () {\n      dynInit(null);\n    };\n    this.getRoot = function () {\n      return this.$root;\n    };\n    this.refreshUI = function () {\n      /*Refresh Grid on Focus*/\n      this.dGrid.resize();\n    };\n    this.disposeComponent = function () {\n      $self = null;\n      this.frame = null;\n      this.windowNo = null;\n      this.arrListColumns = null;\n      this.dGrid = null;\n      whereClause = null;\n      AD_Org_ID = null;\n      C_BPartner_ID = null;\n      toggle = null;\n      toggleGen = null;\n      toggleside = null;\n      this.lblOrg = null;\n      this.lblBPartner = null;\n      this.lblStatusInfo = null;\n      this.tabSelect = null;\n      this.tabGenrate = null;\n      this.cmbOrg = null;\n      this.vSearchBPartner = null;\n      this.$root = null;\n      this.$busyDiv = null;\n      this.topDiv = null;\n      this.sideDiv = null;\n      this.gridSelectDiv = null;\n      this.gridGenerateDiv = null;\n      this.bottumDiv = null;\n      this.okBtn = null;\n      this.cancelBtn = null;\n      this.btnRefresh = null;\n      this.btnToggel = null;\n      this.spnSelect = null;\n      this.spnGenerate = null;\n      ColumnIds = null;\n      ColumnData = null;\n      gridDataArray = [];\n      PreviewLeftData = [];\n      PreviewFilteredGridData = [];\n      TimeExpenseId = [];\n      RequestId = [];\n      ResourceId = [];\n      TaskId = [];\n      CustomerId = [];\n      ProjectId = [];\n      SubTotal = 0;\n      $FromDate = null;\n      $ToDate = null;\n      $CustomerSelected = null;\n      $ResourceSelected = null;\n      $TimeAndExpenseSelected = null;\n      $TaskSelected = null;\n      $ProjectSelected = null;\n      $RequestSelected = null;\n      sideDivWidth = null;\n      selectDivWidth = null;\n      selectDivFullWidth = null;\n      selectDivToggelWidth = null;\n      sideDivHeight = null;\n      this.getRoot = null;\n      this.disposeComponent = null;\n    };\n  }\n  ;\n\n  //Must Implement with same parameter\n  VAS_TimeSheetInvoice.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.windowNo = windowNo;\n    VIS.Env.getCtx().setContext(this.windowNo, \"IsSOTrx\", \"Y\");\n    try {\n      var obj = this.Initialize();\n    } catch (ex) {\n      //log.Log(Level.SEVERE, \"init\", ex);\n    }\n    this.frame.getContentGrid().append(this.getRoot());\n    this.display();\n    this.cmbOrg.getControl().focus();\n  };\n  VAS_TimeSheetInvoice.prototype.refresh = function () {\n    this.refreshUI();\n  };\n\n  //Must implement dispose\n  VAS_TimeSheetInvoice.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VAS.Apps = VAS.Apps || {};\n  VAS.Apps.AForms = VIS.Apps.AForms || {};\n  VAS.Apps.AForms.VAS_TimeSheetInvoice = VAS_TimeSheetInvoice;\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_TimeSheetInvoice.js?\n}")},"./Areas/VAS/Scripts/app/forms/VAS_VendorReturnWidget.js":()=>{eval("{/************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : Get the Vendor RMA   details and create vendor return\r\n * chronological  : Development\r\n * Created Date   : 23 Sep 2024\r\n * Created by     : VAI050\r\n ***********************************************************/\n;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_VendorReturnWidget = function () {\n    this.frame;\n    this.windowNo;\n    this.widgetInfo;\n    var $bsyDiv;\n    var $self = this;\n    var $root = $('<div class=\"h-100 w-100\">'); // Root container\n    this.currentPage = 1;\n    this.totalPages = 0;\n    var widgetID = 0;\n    // Create a map to store child records by document number\n    var childRecordsMap = {};\n    var pageSize = 4;\n    var selectedOrderLineIDs = []; // Array to keep track of selected order line IDs\n    var AD_Window_ID = 0;\n    this.initalize = function () {\n      widgetID = this.widgetInfo.AD_UserHomeWidgetID;\n      const orderContainer = '<div id=\"VAS_DeliveryContainer_' + widgetID + '\" class=\"VAS-vendor-container-pending\">' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + VIS.Msg.getMsg(\"VAS_VendorRMA\") + '</h6>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '        <div class=\"VAS-count-lbl\">' + VIS.Msg.getMsg(\"VAS_VendorRMACount\") + ' <span id=\"VAS_DeliveryCount_' + widgetID + '\">0</span></div>' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading\">' + '        </div>' + '    </div>' + '    <div class=\"VAS-height-container\">' + '        <div id=\"VAS_DeliveryBox_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '        <div id=\"VAS_ProductDetail_' + widgetID + '\" class=\"VAS-deliveries-listing\">' + '        </div>' + '    </div>' + '<div class=\"VAS-pagination-container\"></div>' + '</div>';\n      // Create busy indicator\n      createBusyIndicator();\n      $root.append(orderContainer);\n      //    buildPagination();\n    };\n\n    /* This function will load data in widget */\n    this.intialLoad = function (pageNo) {\n      // Show busy indicator\n      $bsyDiv.css('visibility', 'visible');\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n      $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n      $.ajax({\n        url: VIS.Application.contextUrl + \"Product/GetExpectedDelivery\",\n        data: {\n          pageNo: pageNo,\n          pageSize: pageSize,\n          Type: \"VR\"\n        },\n        dataType: 'json',\n        success: function (response) {\n          var response = JSON.parse(response);\n          $root.find('#VAS_DeliveryBox_' + widgetID).empty();\n          $root.find('#VAS_OrderContainer').remove;\n          if (response != null && response.Orders != null && response.Orders.length > 0) {\n            for (i = 0; i < response.Orders.length; i++) {\n              var boxHtml = '<div id=\"VAS_OrderContainer_' + widgetID + '\" class=\"VAS-delivery-box\" >' + '    <div class=\"VAS-box-heading\">' + '        <div class=\"VAS-icon-w-name\">' + '            <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '            <div id=\"VAS_DocumentNo_' + widgetID + '\" class=\"VAS-doc-no VAS-pointer-cursor\" ' + '                title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\" ' + '                data-doc-no=\"' + response.Orders[i][\"DocumentNo\"] + '\" ' + '                data-customer-name=\"' + response.Orders[i][\"CustomerName\"] + '\" ' + '                data-orderid=\"' + response.Orders[i][\"C_Order_ID\"] + '\">' +\n              // Add data-orderid attribute here\n              '                ' + response.Orders[i][\"DocumentNo\"] + '            </div>' + '        </div>' + '        <div class=\"VAS-total-items-count\" title=\"' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '\">' + response.Orders[i][\"LineCount\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"Vendor\") + '\">' + response.Orders[i][\"CustomerName\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col grid-2-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_VendorLocation\") + '\">' + response.Orders[i][\"DeliveryLocation\"] + '</div>' + '        <div class=\"VAS-lbl-text text-right\" title=\"' + VIS.Msg.getMsg(\"VAS_ProductLocation\") + '\">' + response.Orders[i][\"ProductLocation\"] + '</div>' + '    </div>' + '    <div class=\"VAS-spaceBetween-col\">' + '        <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"TotalAmount\") + '\"><span>' + response.Orders[i][\"Symbol\"] + '</span>' + ' ' + response.Orders[i][\"GrandTotal\"].toLocaleString() + '</div>' + '    </div>' + '</div>';\n              $root.find('#VAS_DeliveryBox_' + widgetID).append(boxHtml);\n            }\n            childRecordsMap = [];\n            // Populate the childRecordsMap with child records\n            response.Orders.forEach(function (order) {\n              if (order.OrderLines && order.OrderLines.length > 0) {\n                childRecordsMap[order.DocumentNo] = order.OrderLines;\n              }\n            });\n            /* Add Pagination div on first tym data load*/\n            if (pageNo == 1) {\n              $root.find('#VAS_DeliveryCount_' + widgetID).text(response.RecordCount);\n              buildPagination(response.RecordCount);\n              AD_Window_ID = response.AD_Window_ID;\n            }\n            $root.find('#VAS_PaginationText_' + widgetID).text($self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages);\n            // Attach click event listener to delivery boxes\n            $root.off('click', '#VAS_DocumentNo_' + widgetID);\n            $root.on('click', '#VAS_DocumentNo_' + widgetID, function () {\n              var docNo = $(this).data('doc-no');\n              var customerName = $(this).data('customer-name');\n              var orderid = $(this).data('orderid');\n              displayOrderDetails(docNo, customerName, orderid);\n            });\n          }\n          //else {\n\n          //    // Display \"No data available\" message\n          //    const message = $('<div class=\"VAS-data-message\">' + VIS.Msg.getMsg(\"VAS_NoDataAvailable\") + '</div>');\n          //    $root.find('.VAS-height-container').append(message);\n          //}\n          $bsyDiv.css('visibility', 'hidden');\n        },\n        error: function (xhr, status, error) {\n          // Handle errors\n          console.log('Failed to fetch data:', status, error);\n          $bsyDiv[0].style.visibility = \"hidden\";\n        }\n      });\n    };\n    function displayOrderDetails(docNo, customerName, orderid) {\n      // Hide and remove existing elements\n      $root.find('#VAS_DeliveryContainer_' + widgetID).hide();\n      $root.find('#VAS_ProductContainer_' + widgetID).remove();\n\n      // Initialize the selected order line IDs array\n      selectedOrderLineIDs = [];\n      var productContainer = '<div id=\"VAS_ProductContainer_' + widgetID + '\" class=\"VAS-vendor-container-pending\">' + '<span class=\"VAS-info-span\" style=\"display:none;\" id=\"VAS_spnErrorMessage_' + widgetID + '\"></span>' + '    <div class=\"VAS-deliveries-heading\">' + '        <h6>' + '            <span id=\"VAS_BackTodelivery_' + widgetID + '\" class=\"vis vis-arrow-left VAS-pointer-cursor\"></span>' + '            ' + VIS.Msg.getMsg(\"VAS_BackToVendorRMA\") + '        </h6>' + '<span id=\"VAS_GenerateDeliveryOrder_' + widgetID + '\" class=\"VAS-generate-delivery-btn\" data-orderid=\"' + orderid + '\" title=\"' + VIS.Msg.getMsg(\"VAS_GenerateVendorReturn\") + '\"><i class=\"fa fa-truck\" aria-hidden=\"true\"></i></span>' + '    </div>' + '    <div class=\"VAS-delivery-count\">' + '    </div>' + '    <div class=\"VAS-delivery-detail\">' + '        <div class=\"VAS-box-heading VAS-orders-text-white\">' + '            <div class=\"VAS-expected-col\">' + '                <div class=\"VAS-icon-w-name\">' + '                    <i class=\"fa fa-file-text VAS-orders-text-white\" aria-hidden=\"true\"></i>' + '                    <div class=\"VAS-doc-no VAS-orders-text-white\" title=\"' + VIS.Msg.getMsg(\"Document_No\") + '\">' + docNo + '</div>' + '                </div>' + '                <div class=\"VAS-expectedTxt\" title=\"' + VIS.Msg.getMsg(\"Vendor\") + '\">' + customerName + '</div>' + '            </div>' + '            <div class=\"VAS-dty-prod\">' + '                <div class=\"VAS-qtyProd-text\">' + VIS.Msg.getMsg(\"VAS_NoOfLines\") + '</div>' + '                <div class=\"VAS-total-items-count VAS-orders-text-white\"><span id=\"VAS_TotalQty_' + widgetID + '\"></span></div>' + '            </div>' + '        </div>' + '    </div>' + '    <div id=\"VAS_ProductDiv_' + widgetID + '\" class=\"VAS-height-container\">' + '        <div id=\"VAS_OrderLine_' + widgetID + '\" class=\"VAS-deliveries-listing\"></div>' + '</div>' + '<div id=\"VAS_OrderLinePagination_' + widgetID + '\" class=\"VAS-pagination-container\"></div>';\n      $root.append(productContainer);\n\n      // Fetch child records based on the clicked document number\n      var childRecords = childRecordsMap[docNo] || [];\n      var itemsPerPage = 6;\n      var totalPages = Math.ceil(childRecords.length / itemsPerPage);\n      var currentPage = 1;\n      function updatePage(page) {\n        // Ensure page is within bounds\n        if (page < 1) {\n          page = 1;\n        }\n        if (page > totalPages) {\n          page = totalPages;\n        }\n        currentPage = page;\n        // Calculate start and end index\n        var startIndex = (currentPage - 1) * itemsPerPage;\n        var endIndex = Math.min(startIndex + itemsPerPage, childRecords.length);\n\n        // Clear previous records\n        $root.find('#VAS_OrderLine_' + widgetID).empty();\n        // Generate HTML for records of the current page\n        for (var i = startIndex; i < endIndex; i++) {\n          var line = childRecords[i];\n          var isChecked = selectedOrderLineIDs.includes(line.C_OrderLine_ID);\n          var hasStock = line.OnHandQty > 0 && line.OnHandQty >= line.QtyOrdered;\n          var boxClass = hasStock ? 'VAS-delivery-box' : 'VAS-delivery-box no-stock';\n          var badgeClass;\n          if (line.OnHandQty >= line.QtyOrdered) {\n            badgeClass = 'badge-green'; //  stock available\n          } else if (line.OnHandQty < line.QtyOrdered && line.OnHandQty > 0) {\n            badgeClass = 'badge-orange'; //stock less tham order \n          } else {\n            badgeClass = 'badge-red'; // Insufficient stock\n          }\n          $root.find('#VAS_OrderLine_' + widgetID).append('            <div class=\"' + boxClass + '\">' + '                <div class=\"VAS-box-heading\">' + '                    <div class=\"VAS-icon-w-name\">' + '                        <input type=\"checkbox\" class=\"VAS-selection-checkbox\" data-orderlineid=\"' + line.C_OrderLine_ID + '\"' + (isChecked ? ' checked' : '') + (hasStock ? '' : ' disabled') + '/> ' + '                        <i class=\"fa fa-file-text\" aria-hidden=\"true\"></i>' + '                        <div class=\"VAS-doc-no\" title=\"' + VIS.Msg.getMsg(\"VAS_Product\") + '\">' + line.ProductName + '</div>' + '                    </div>' + '                    <div class=\"VAS-total-items-count\">' + '                    <span title = \"' + VIS.Msg.getMsg(\"VAS_RemianingQty\") + '\" class=\"badge badge-light ' + badgeClass + '\"> ' + line.QtyEntered + '</span ></div > ' + '                      </div>' + '                <div class=\"VAS-spaceBetween-col\">' + '                    <div class=\"VAS-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Attribute\") + '\">' + line.AttributeName + '</div>' + '                    <div class=\"vas-lbl-text\" title=\"' + VIS.Msg.getMsg(\"VAS_Uom\") + '\"> ' + line.UOM + '</div>' + '                </div>' + '            </div>');\n        }\n        $root.find('#VAS_TotalQty_' + widgetID).text(childRecords.length);\n        /*  Append pagination controls*/\n        $root.find('#VAS_OrderLinePagination_' + widgetID).empty();\n        $root.find('#VAS_OrderLinePagination_' + widgetID).append('        <div class=\"VAS-slider-arrows-order-details VAS-orders-text-white\">' + '            <i class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\" id=\"VAS_PreviousPage_' + widgetID + '\"></i>' + '            <span>' + currentPage + VIS.Msg.getMsg(\"VAS_Of\") + totalPages + '</span>' + '            <i class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\" id=\"VAS_NextPage_' + widgetID + '\"></i>' + '        </div>');\n      }\n\n      // Initialize first page\n      if (childRecords.length > 0) {\n        updatePage(currentPage);\n      }\n\n      // Unbind any previously bound event handlers\n      $root.off('change', '.VAS-selection-checkbox');\n      $root.off('click', '#VAS_PreviousPage_' + widgetID);\n      $root.off('click', '#VAS_NextPage_' + widgetID);\n      $root.off('click', '#VAS_BackTodelivery_' + widgetID);\n      $root.off('click', '#VAS_GenerateDeliveryOrder_' + widgetID);\n\n      // Event listeners for pagination controls\n      $root.on('click', '#VAS_PreviousPage_' + widgetID, function () {\n        updatePage(currentPage - 1);\n      });\n      $root.on('click', '#VAS_NextPage_' + widgetID, function () {\n        updatePage(currentPage + 1);\n      });\n\n      // Back to deliveries\n      $root.on('click', '#VAS_BackTodelivery_' + widgetID, function () {\n        $root.find('#VAS_DeliveryContainer_' + widgetID).show();\n        $root.find('#VAS_ProductContainer_' + widgetID).remove();\n        $root.find('.VAS-error-message').remove();\n      });\n\n      // Event listener for checkbox selection\n      $root.on('change', '.VAS-selection-checkbox', function () {\n        var orderlineID = $(this).data('orderlineid');\n        if ($(this).is(':checked')) {\n          // Add ID to array if checked\n          if (!selectedOrderLineIDs.includes(orderlineID)) {\n            selectedOrderLineIDs.push(orderlineID);\n          }\n        } else {\n          // Remove ID from array if unchecked\n          selectedOrderLineIDs = selectedOrderLineIDs.filter(id => id !== orderlineID);\n        }\n        if (selectedOrderLineIDs.length > 0) {\n          $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).show();\n        } else {\n          $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).hide();\n        }\n        console.log(selectedOrderLineIDs);\n      });\n      $root.on('click', '#VAS_GenerateDeliveryOrder_' + widgetID, function () {\n        var orderId = $(this).data('orderid');\n        generateVendorReturn(orderId);\n      });\n      $root.find('#VAS_GenerateDeliveryOrder_' + widgetID).hide();\n      function generateVendorReturn(orderId) {\n        $bsyDiv.css('visibility', 'visible');\n        var orderLineIDs = selectedOrderLineIDs.join(',');\n        $.ajax({\n          url: VIS.Application.contextUrl + \"Product/CreateShipment\",\n          data: {\n            C_Order_ID: orderId,\n            C_OrderLines_IDs: orderLineIDs\n          },\n          dataType: 'json',\n          success: function (response) {\n            var response = JSON.parse(response);\n            if (response.Shipment_ID > 0) {\n              try {\n                if (AD_Window_ID > 0) {\n                  var windowParam = {\n                    \"TabWhereClause\": \"M_InOut.M_InOut_ID=\" + response.Shipment_ID + \"\",\n                    \"TabLayout\": \"Y\",\n                    // 'N'[Grid],'Y'[Single],'C'[Card]}\t \t \n                    \"TabIndex\": \"0\"\n                  };\n                  $self.widgetFirevalueChanged(windowParam);\n                  $self.currentPage = 1;\n                  $self.intialLoad($self.currentPage);\n                }\n              } catch (e) {\n                console.log(e);\n              }\n            } else {\n              var spnWO = $root.find('#VAS_spnErrorMessage_' + widgetID);\n              var message = \"\";\n              if (response.message != null && response.message != \"\") {\n                message = response.message;\n              } else {\n                message = VIS.Msg.getMsg(\"VAS_VendorReturnNotGenerated\");\n              }\n              spnWO.text(message);\n              spnWO.fadeIn();\n              spnWO.fadeOut(5000);\n            }\n            $bsyDiv.css('visibility', 'hidden');\n          },\n          error: function (xhr, status, error) {\n            // Handle errors\n            console.log('Failed to fetch data:', status, error);\n            $bsyDiv[0].style.visibility = \"hidden\";\n          }\n        });\n      }\n    }\n\n    /* This function is used to create the busy indicator */\n    function createBusyIndicator() {\n      $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis_widgetloader\"></i></div></div>');\n      $root.append($bsyDiv);\n    }\n\n    /* This function builds pagination controls */\n    function buildPagination(recordCount) {\n      var $paginationContainer = $root.find('.VAS-pagination-container');\n      $paginationContainer.empty(); // Clear existing pagination\n      $self.totalPages = Math.ceil(recordCount / pageSize); // Update totalPages\n      var $pagination = $('<div class=\"VAS-slider-arrows VAS-orders-text-white\">' + '        <i id=\"VAS_Prev_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-left\" aria-hidden=\"true\"></i>' + '        <span id=\"VAS_PaginationText_' + widgetID + '\">' + $self.currentPage + VIS.Msg.getMsg(\"VAS_Of\") + $self.totalPages + '</span>' + '        <i id=\"VAS_Next_Page_' + widgetID + '\" class=\"fa fa-arrow-circle-right\" aria-hidden=\"true\"></i>' + '    </div>');\n\n      // Add event listeners for arrows\n      $pagination.find('#VAS_Prev_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage > 1) {\n          $self.currentPage--;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n      $pagination.find('#VAS_Next_Page_' + widgetID + '').on('click', function (e) {\n        e.preventDefault();\n        if ($self.currentPage < $self.totalPages) {\n          $self.currentPage++;\n          $self.intialLoad($self.currentPage);\n        }\n      });\n\n      // Append the pagination controls to the container\n      $paginationContainer.append($pagination);\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /* This function is used to refresh the widget data */\n    this.refreshWidget = function () {\n      chartInstance = null;\n      $self.currentPage = 1;\n      $self.totalPages = 0;\n      $self.intialLoad($self.currentPage);\n    };\n  };\n  VAS.VAS_VendorReturnWidget.prototype.widgetFirevalueChanged = function (value) {\n    if (this.listener) this.listener.widgetFirevalueChanged(value);\n  };\n  VAS.VAS_VendorReturnWidget.prototype.addChangeListener = function (listener) {\n    this.listener = listener;\n  };\n  VAS.VAS_VendorReturnWidget.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.widgetInfo = frame.widgetInfo;\n    this.windowNo = windowNo;\n    this.initalize();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.intialLoad(1);\n    }, 50);\n  };\n  VAS.VAS_VendorReturnWidget.prototype.widgetSizeChange = function (widget) {\n    this.widgetInfo = widget;\n  };\n  VAS.VAS_VendorReturnWidget.prototype.refreshWidget = function () {\n    this.refreshWidget();\n  };\n  VAS.VAS_VendorReturnWidget.prototype.dispose = function () {\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $root = null;\n    $contentContainer = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/VAS_VendorReturnWidget.js?\n}")},"./Areas/VAS/Scripts/app/forms/acctviewer.js":()=>{eval('{;\n(function (VIS, $) {\n  function AcctViewerData(windowNu, ad_Client_ID, ad_Table_ID) {\n    this.windowNo = windowNu;\n    this.AD_Client_ID = ad_Client_ID;\n    this.AD_Org_ID = 0;\n    this.DateFrom = null;\n    this.DateTo = null;\n    var $selfObj = this;\n    this.ASchemas = [];\n    this.ASchema = [];\n    // Create Log\n    this.log = VIS.Logging.VLogger.getVLogger("AccountViewer");\n    //paging variables\n    var divPaging, ulPaging, liFirstPage, liPrevPage, liCurrPage, liNextPage, liLastPage, cmbPage;\n    this.dataByData = null;\n    this._elements = [];\n    this.documentQuery = false;\n    this.C_AcctSchema_ID = 0;\n    this.PostingType = "";\n    this.AD_Table_ID = ad_Table_ID;\n    this.Record_ID = 0;\n    this.whereInfo = [];\n    this.tableInfo = [];\n    this.displayQty = false;\n    this.displaySourceAmt = false;\n    this.displayDocumentInfo = false;\n    this.sortBy1 = "";\n    this.sortBy2 = "";\n    this.sortBy3 = "";\n    this.sortBy4 = "";\n    this.group1 = false;\n    this.group2 = false;\n    this.group3 = false;\n    this.group4 = false;\n    this._leadingColumns = 0;\n    this._ref1 = null;\n    this._ref2 = null;\n    this.TABLE_ALIAS = "zz";\n    this.FUNCTION_COUNT = "Count";\n    this.FUNCTION_SUM = "Sum";\n    this.onLoaded = null;\n    this.HasOrgUnit = null;\n    if (this.AD_Client_ID == 0) {\n      this.AD_Client_ID = VIS.Env.getCtx().getContextAsInt(this.windowNo, "AD_Client_ID");\n    }\n    if (this.AD_Client_ID == 0) {\n      this.AD_Client_ID = VIS.Env.getCtx().ctx["AD_Client_ID"];\n    }\n    if (this.AD_Org_ID == 0) {\n      this.AD_Org_ID = Number(VIS.context.getWindowTabContext(this.windowNo, 0, "AD_Org_ID"));\n    }\n    var elements = ["AmtAcctCr", "AmtAcctDr", "AmtSourceCr", "AmtSourceDr"];\n    VIS.translatedTexts = VIS.Msg.translate(VIS.Env.getCtx(), elements, true);\n    this.ELEMENTTYPE_AD_Reference_ID = 181;\n    this.ELEMENTTYPE_Account = "AC";\n    this.ELEMENTTYPE_Activity = "AY";\n    this.ELEMENTTYPE_BPartner = "BP";\n    this.ELEMENTTYPE_LocationFrom = "LF";\n    this.ELEMENTTYPE_LocationTo = "LT";\n    this.ELEMENTTYPE_Campaign = "MC";\n    this.ELEMENTTYPE_Organization = "OO";\n    this.ELEMENTTYPE_OrgTrx = "OT";\n    this.ELEMENTTYPE_Project = "PJ";\n    this.ELEMENTTYPE_Product = "PR";\n    this.ELEMENTTYPE_SubAccount = "SA";\n    this.ELEMENTTYPE_SalesRegion = "SR";\n    this.ELEMENTTYPE_UserList1 = "U1";\n    this.ELEMENTTYPE_UserList2 = "U2";\n    this.ELEMENTTYPE_UserElement1 = "X1";\n    this.ELEMENTTYPE_UserElement2 = "X2";\n\n    //show posted button or not ("Y" or ""), when "N" - not to show button\n    var notShowPosted;\n\n    // get Accounting Schema\n    this.getClientAcctSchema = function (AD_Client_ID, OrgID) {\n      var obj = [];\n      var that = this;\n      $.ajax({\n        url: VIS.Application.contextUrl + "AcctViewerData/GetClientAcctSchema",\n        type: \'POST\',\n        async: true,\n        data: {\n          ad_client_id: AD_Client_ID,\n          ad_org_id: OrgID\n        },\n        success: function (data) {\n          if (data.result && data.result.AcctSchemas) {\n            var actSch = data.result.AcctSchemas;\n            for (var i = 0; i < actSch.length; i++) {\n              var line = {};\n              c_acctschema_id = actSch[i].Key;\n              line[\'Key\'] = c_acctschema_id;\n              line[\'Name\'] = VIS.Utility.encodeText(actSch[i].Name);\n              obj.push(line);\n            }\n          }\n          if (data.result && data.result.OtherAcctSchemas) {\n            var otheActSch = data.result.OtherAcctSchemas;\n            for (var i = 0; i < otheActSch.length; i++) {\n              var lineObj = {};\n              lineObj[\'Key\'] = otheActSch[i].Key;\n              lineObj[\'Name\'] = VIS.Utility.encodeText(otheActSch[i].Name);\n              obj.push(lineObj);\n            }\n          }\n          that.ASchemas = obj;\n          that.ASchema = obj[0];\n          if (that.onLoaded) that.onLoaded();\n        },\n        error: function (e) {\n          $selfObj.log.info(e);\n          if (that.onLoaded) that.onLoaded();\n        }\n      });\n      return obj;\n    };\n    this.getClientAcctSchema(this.AD_Client_ID, this.AD_Org_ID);\n    //this.ASchemas = this.getClientAcctSchema(this.AD_Client_ID, this.AD_Org_ID);\n    // this.ASchema = this.ASchemas[0];\n    //function getClientAcctSchema(AD_Client_ID, OrgID) {\n    //    var obj = [];\n\n    //    //var sql = "SELECT C_ACCTSCHEMA_ID,NAME FROM C_ACCTSCHEMA WHERE C_ACCTSCHEMA_ID=(SELECT  C_ACCTSCHEMA1_ID   FROM AD_CLIENTINFO WHERE AD_CLIENT_ID=" + AD_Client_ID + ")";\n\n    //    sql = "SELECT C_ACCTSCHEMA_ID,NAME FROM C_AcctSchema WHERE ISACTIVE=\'Y\' AND C_ACCTSCHEMA_ID IN( " +\n    //"SELECT C_ACCTSCHEMA_ID FROM FRPT_AssignedOrg WHERE ISACTIVE=\'Y\' AND AD_CLIENT_ID=" + AD_Client_ID + " AND AD_ORG_ID=" + OrgID + ")" +\n    ////Get default Accounting schema selected on tenant\n    //" OR C_ACCTSCHEMA_ID IN (SELECT C_ACCTSCHEMA1_ID  FROM AD_ClientInfo where  AD_Client_ID=" + AD_Client_ID + ")";\n\n    //    var c_acctschema_id = null;\n    //    var dr = VIS.DB.executeReader(sql.toString(), null, null);\n\n    //    while (dr.read()) {\n    //        var line = {};\n    //        c_acctschema_id = dr.getInt(0);\n    //        line[\'Key\'] = c_acctschema_id;\n    //        line[\'Name\'] = dr.getString(1);\n    //        obj.push(line);\n    //    }\n    //    dr.close();\n\n    //    //\tOther\n    //    sql = "SELECT c_acctschema_id,name FROM C_AcctSchema acs "\n    //        + "WHERE IsActive=\'Y\'"\n    //        + " AND EXISTS (SELECT * FROM C_AcctSchema_GL gl WHERE acs.C_AcctSchema_ID=gl.C_AcctSchema_ID)"\n    //        + " AND EXISTS (SELECT * FROM C_AcctSchema_Default d WHERE acs.C_AcctSchema_ID=d.C_AcctSchema_ID)";\n    //    if (AD_Client_ID != 0) {\n    //        sql += " AND AD_Client_ID=" + AD_Client_ID;\n    //    }\n\n    //    sql += " ORDER BY C_AcctSchema_ID";\n    //    dr = VIS.DB.executeReader(sql.toString(), null, null);\n    //    while (dr.read()) {\n    //        var line = {};\n    //        var id = dr.getInt(0);\n    //        line[\'Key\'] = id;\n    //        line[\'Name\'] = dr.getString(1);\n\n    //        if (id != c_acctschema_id)\t//\talready in _elements\n    //        {\n    //            sql = "SELECT c_acctschema_id,name from C_AcctSchema WHERE C_AcctSchema_ID=" + id;\n    //            var drSch = VIS.DB.executeReader(sql.toString(), null, null);\n    //            if (drSch.read()) {\n    //                var lineObj = {};\n    //                lineObj[\'Key\'] = drSch.getInt(0);\n    //                lineObj[\'Name\'] = drSch.getString(1);\n    //                obj.push(lineObj);\n    //            }\n    //            drSch.close();\n    //        }\n    //    }\n    //    dr.close();\n    //    return obj;\n    //}\n  }\n  AcctViewerData.prototype.getAcctSchema = function () {\n    //for (var i = 0; i < this.ASchemas.length; i++) {\n    //    ctrol.append(" <option value=\'" + this.ASchemas[i].c_acctschema_id + "\'>" + this.ASchemas[i].name + "</option>");\n    //}\n    return this.ASchemas;\n  };\n\n  // Get table dataName\n  AcctViewerData.prototype.getTable = function () {\n    var options = [];\n    var defaultKey = null;\n    /** cached the object of account viewer data to set tables info.  **/\n    var $that = this;\n    $.ajax({\n      url: VIS.Application.contextUrl + "AcctViewerData/AcctViewerGetTabelData",\n      type: \'POST\',\n      async: false,\n      success: function (data) {\n        if (this.tableInfo == undefined || this.tableInfo == null) {\n          this.tableInfo = [];\n        }\n        if (data.result) {\n          options.push({\n            "Key": "",\n            "Name": ""\n          });\n          var res = data.result;\n          for (var i = 0; i < res.length; i++) {\n            var id = res[i].AD_Table_ID;\n            var tableName = VIS.Utility.encodeText(res[i].TableName);\n            var name = "";\n            // Change done to show order instead of purchase order in selection \n            if (tableName == "C_Order") {\n              name = VIS.Msg.getMsg("Order");\n            } else {\n              name = VIS.Msg.translate(VIS.Env.getCtx(), tableName + "_ID");\n            }\n            options.push({\n              "Key": tableName,\n              "Name": name\n            });\n            $that.tableInfo.push({\n              "Key": id,\n              "Name": tableName\n            });\n            if (id == this.AD_Table_ID) {\n              defaultKey = tableName;\n            }\n          }\n        }\n      },\n      error: function (e) {\n        $selfObj.log.info(e);\n      }\n    });\n    return options;\n  };\n\n  //AcctViewerData.prototype.getTable = function () {\n  //    var options = [];\n  //    var defaultKey = null;\n\n  //    var sql = "SELECT AD_Table_ID, TableName FROM AD_Table t "\n  //        + "WHERE EXISTS (SELECT * FROM AD_Column c"\n  //        + " WHERE t.AD_Table_ID=c.AD_Table_ID AND c.ColumnName=\'Posted\')"\n  //        + " AND IsView=\'N\'";\n\n  //    try {\n\n  //        var dr = VIS.DB.executeReader(sql.toString(), null, null);\n  //        while (dr.read()) {\n  //            var id = dr.getInt(0);\n  //            var tableName = dr.getString(1);\n  //            var name = VIS.Msg.translate(VIS.Env.getCtx(), tableName + "_ID");\n\n  //            options.push({ "Key": tableName, "Name": name });\n\n  //            this.tableInfo.push({ "Key": id, "Name": tableName });\n\n  //            if (id == this.AD_Table_ID) {\n  //                defaultKey = tableName;\n  //            }\n  //        }\n  //        dr.close();\n  //    }\n  //    catch (e) {\n\n  //    }\n  //    return options;\n  //}\n\n  //Get Organization\n  AcctViewerData.prototype.getOrg = function () {\n    var obj = [];\n    var cID = this.AD_Client_ID;\n    $.ajax({\n      url: VIS.Application.contextUrl + "AcctViewerData/AcctViewerGetOrgData",\n      type: \'POST\',\n      async: false,\n      data: {\n        client_id: cID\n      },\n      success: function (data) {\n        var res = data.result;\n        if (res) {\n          obj.push({\n            \'Key\': 0,\n            \'Name\': ""\n          });\n          for (var i = 0; i < res.length; i++) {\n            obj.push({\n              \'Key\': res[i].AD_Org_ID,\n              \'Name\': VIS.Utility.encodeText(res[i].OrgName)\n            });\n          }\n        }\n      },\n      error: function (e) {\n        $selfObj.log.info(e);\n      }\n    });\n    return obj;\n  };\n\n  //AcctViewerData.prototype.getOrg = function () {\n  //    var obj = [];\n  //    var sql = "SELECT AD_Org_ID, Name FROM AD_Org WHERE AD_Client_ID=" + this.AD_Client_ID + " ORDER BY Value";\n  //    var dr = VIS.DB.executeReader(sql.toString(), null, null);\n  //    obj.push({ \'Key\': 0, \'Name\': "" });\n  //    while (dr.read()) {\n  //        obj.push({ \'Key\': dr.getInt(0), \'Name\': dr.getString(1) });\n  //    }\n  //    dr.close();\n  //    return obj;\n  //}\n\n  // Get posting Data  \n  AcctViewerData.prototype.getPostingType = function () {\n    var AD_Reference_ID = 125;\n    var obj = [];\n    $.ajax({\n      url: VIS.Application.contextUrl + "AcctViewerData/AcctViewerGetPostingType",\n      type: \'POST\',\n      async: false,\n      data: {\n        reference_id: AD_Reference_ID\n      },\n      success: function (data) {\n        var res = data.result;\n        if (res) {\n          obj.push({\n            \'Key\': 0,\n            \'Name\': ""\n          });\n          for (var i = 0; i < res.length; i++) {\n            obj.push({\n              \'Key\': res[i].PostingValue,\n              \'Name\': VIS.Utility.encodeText(res[i].PostingName)\n            });\n          }\n        }\n      },\n      error: function (e) {\n        $selfObj.log.info(e);\n      }\n    });\n    return obj;\n  };\n\n  //AcctViewerData.prototype.getPostingType = function () {\n  //    var AD_Reference_ID = 125;\n  //    var obj = [];\n\n  //    var sql = " SELECT Value, Name FROM AD_Ref_List "\n  //        + "WHERE AD_Reference_ID=" + AD_Reference_ID + " AND IsActive=\'Y\' ORDER BY 1";\n\n  //    var dr = VIS.DB.executeReader(sql.toString(), null, null);\n  //    obj.push({ \'Key\': 0, \'Name\': "" });\n  //    while (dr.read()) {\n  //        obj.push({ \'Key\': dr.getString(0), \'Name\': dr.getString(1) });\n  //    }\n  //    dr.close();\n  //    return obj;\n  //}\n\n  // Get Accounting Schema Elements\n  AcctViewerData.prototype.getAcctSchemaElements = function (C_AcctSchema_ID) {\n    this._elements = [];\n    var currentThis = this._elements;\n    $.ajax({\n      url: VIS.Application.contextUrl + "AcctViewerData/AcctViewerGetAcctSchElements",\n      type: \'POST\',\n      async: true,\n      data: {\n        keys: C_AcctSchema_ID\n      },\n      success: function (data) {\n        var res = data.result;\n        if (res) {\n          for (var i = 0; i < res.length; i++) {\n            var ase = [];\n            ase.push({\n              \'c_acctschema_element_id\': res[i].C_AcctSchema_Element_ID,\n              \'name\': VIS.Utility.encodeText(res[i].ElementName),\n              \'elementtype\': res[i].ElementType,\n              \'c_elementvalue_id\': res[i].C_ElementValue_ID,\n              \'seqno\': res[i].SeqNo,\n              \'detail\': res[i].Detail,\n              \'c_element_id\': res[i].C_Element_ID\n            });\n            currentThis.push(ase);\n          }\n        }\n      },\n      error: function (e) {\n        $selfObj.log.info(e);\n      }\n    });\n    return currentThis;\n  };\n\n  //AcctViewerData.prototype.getAcctSchemaElements = function (C_AcctSchema_ID) {\n\n  //    //working on this function\n  //    var key = C_AcctSchema_ID;\n  //    this._elements = [];\n\n  //    var sql = "SELECT c_acctschema_element_id,name,elementtype,c_elementvalue_id,seqno," +\n  //    "\'AcctSchemaElement[\'||c_acctschema_element_id||\'-\'||name||\'(\'||elementtype||\')=\'||c_elementvalue_id||\',Pos=\'||seqno||\']\' as detail,c_element_id FROM C_AcctSchema_Element "\n  //        + "WHERE C_AcctSchema_ID=" + key + " AND IsActive=\'Y\' ORDER BY SeqNo";\n\n  //    try {\n  //        var dr = VIS.DB.executeReader(sql.toString(), null, null);\n  //        while (dr.read()) {\n  //            var ase = [];\n  //            ase.push({ \'c_acctschema_element_id\': dr.getInt(0), \'name\': dr.getString(1), \'elementtype\': dr.getString(2), \'c_elementvalue_id\': dr.getInt(3), \'seqno\': dr.getString(4), \'detail\': dr.getString(5), \'c_element_id\': dr.getInt(6) });\n\n  //            this._elements.push(ase);\n  //        }\n  //        dr.close();\n  //    }\n  //    catch (e) {\n  //    }\n\n  //    return this._elements;\n  //}\n\n  AcctViewerData.prototype.getAcctSchemaElement = function (elementType) {\n    if (this._elements == null) {\n      this.getAcctSchemaElements();\n    }\n    for (var i = 0; i < this._elements.length; i++) {\n      var ase = this._elements[i][0];\n      if (ase.elementtype.equals(elementType)) {\n        return ase;\n      }\n    }\n    return null;\n  };\n  AcctViewerData.prototype.getColumnName = function (elementType) {\n    if (elementType.equals(this.ELEMENTTYPE_Organization)) return "AD_Org_ID";else if (elementType.equals(this.ELEMENTTYPE_Account)) return "Account_ID";else if (elementType.equals(this.ELEMENTTYPE_BPartner)) return "C_BPartner_ID";else if (elementType.equals(this.ELEMENTTYPE_Product)) return "M_Product_ID";else if (elementType.equals(this.ELEMENTTYPE_Activity)) return "C_Activity_ID";else if (elementType.equals(this.ELEMENTTYPE_LocationFrom)) return "C_LocFrom_ID";else if (elementType.equals(this.ELEMENTTYPE_LocationTo)) return "C_LocTo_ID";else if (elementType.equals(this.ELEMENTTYPE_Campaign)) return "C_Campaign_ID";else if (elementType.equals(this.ELEMENTTYPE_OrgTrx)) return "AD_OrgTrx_ID";else if (elementType.equals(this.ELEMENTTYPE_Project)) return "C_Project_ID";else if (elementType.equals(this.ELEMENTTYPE_SalesRegion)) return "C_SalesRegion_ID";else if (elementType.equals(this.ELEMENTTYPE_UserList1)) return "User1_ID";else if (elementType.equals(this.ELEMENTTYPE_UserList2)) return "User2_ID";else if (elementType.equals(this.ELEMENTTYPE_UserElement1)) return "UserElement1_ID";else if (elementType.equals(this.ELEMENTTYPE_UserElement2)) return "UserElement2_ID";\n    //\n    return "";\n  };\n\n  // Get the value from the info window.\n  AcctViewerData.prototype.getButtonText = function (tableName, columnName, selectSQL) {\n    var language = VIS.Env.getAD_Language(VIS.Env.getCtx());\n    var retValue = "<" + selectSQL + ">";\n    $.ajax({\n      url: VIS.Application.contextUrl + "AcctViewerData/AcctViewerGetButtonText",\n      type: \'POST\',\n      async: false,\n      data: {\n        lookupDirEmbeded: null,\n        tName: tableName,\n        wheres: " avd WHERE avd.",\n        selectSQLs: selectSQL,\n        language: language,\n        ColumnName: columnName\n      },\n      success: function (data) {\n        var res = data.result;\n        if (res != "") {\n          retValue = res;\n        }\n      },\n      error: function (e) {\n        $selfObj.log.info(e);\n      }\n    });\n    return retValue;\n  };\n\n  //AcctViewerData.prototype.getButtonText = function (tableName, columnName, selectSQL) {\n  //    var sql = "SELECT (";\n  //    var language = VIS.Env.getAD_Language(VIS.Env.getCtx());\n\n  //    sql = sql.concat(VIS.MLookupFactory.getLookup_TableDirEmbed(language, columnName, "avd", columnName))\n  //        .concat(") FROM ").concat(tableName).concat(" avd WHERE avd.").concat(selectSQL);\n\n  //    var retValue = "<" + selectSQL + ">";\n  //    try {\n  //        var dr = VIS.DB.executeReader(sql.toString(), null, null);\n  //        if (dr.read()) {\n  //            retValue = dr.getString(0);\n  //        }\n  //        dr.close();\n  //    }\n  //    catch (e) {\n  //    }\n  //    return retValue;\n  //}\n\n  AcctViewerData.prototype.Query = function (AD_Client_ID, callbackGetDataModel, resetPageCtrls, pNo) {\n    //  Set Where Clause\n    var whereClause = "";\n    //  Add Organization\n    if (this.C_AcctSchema_ID != 0) {\n      whereClause = whereClause.concat(this.TABLE_ALIAS).concat(".C_AcctSchema_ID=").concat(this.C_AcctSchema_ID);\n    }\n\n    //\tPosting Type Selected\n    if (this.PostingType != null && this.PostingType.length > 0) {\n      if (whereClause.length > 0) {\n        whereClause = whereClause.concat(" AND ");\n      }\n      whereClause = whereClause.concat(this.TABLE_ALIAS).concat(".PostingType=\'").concat(this.PostingType).concat("\'");\n    }\n    if (this.documentQuery) {\n      if (whereClause.length > 0) {\n        whereClause = whereClause.concat(" AND ");\n      }\n      whereClause = whereClause.concat(this.TABLE_ALIAS).concat(".AD_Table_ID=").concat(this.AD_Table_ID).concat(" AND ").concat(this.TABLE_ALIAS).concat(".Record_ID=").concat(this.Record_ID);\n    } else {\n      //  get values (Queries)\n      var it = this.whereInfo; //.Values.GetEnumerator();\n      if (it != null) {\n        for (var i = 0; i < it.length; i++) {\n          var where = it[i].Value;\n          if (where != null && where.length > 0)\n            //  add only if not empty\n            {\n              if (whereClause.length > 0) {\n                whereClause = whereClause.concat(" AND ");\n              }\n              whereClause = whereClause.concat(this.TABLE_ALIAS).concat(".").concat(where);\n            }\n        }\n      }\n      if (!this.DateFrom != null || this.DateTo != null) {\n        if (whereClause.length > 0 && (this.DateFrom != "" || this.DateTo != "")) {\n          whereClause = whereClause.concat(" AND ");\n        }\n        if (this.DateFrom != "" && this.DateTo != "") {\n          whereClause = whereClause.concat("TRUNC(").concat(this.TABLE_ALIAS).concat(".DateAcct,\'DD\') BETWEEN ").concat(VIS.DB.to_date(this.DateFrom)).concat(" AND ").concat(VIS.DB.to_date(this.DateTo));\n        } else if (this.DateFrom != "") {\n          whereClause = whereClause.concat("TRUNC(").concat(this.TABLE_ALIAS).concat(".DateAcct,\'DD\') >= ").concat(VIS.DB.to_date(this.DateFrom));\n        } else if (this.DateTo != "") {\n          whereClause = whereClause.concat("TRUNC(").concat(this.TABLE_ALIAS).concat(".DateAcct,\'DD\') <= ").concat(VIS.DB.to_date(this.DateTo));\n        }\n      }\n\n      //  Add Organization\n      if (this.AD_Org_ID != 0) {\n        if (whereClause.length > 0) {\n          whereClause = whereClause.concat(" AND ");\n        }\n        whereClause = whereClause.concat(this.TABLE_ALIAS).concat(".AD_Org_ID=").concat(this.AD_Org_ID);\n      }\n    }\n\n    //  Set Order By Clause\n    var orderClause = "";\n    if (this.sortBy1.length > 0) {\n      orderClause = orderClause.concat(this.TABLE_ALIAS).concat(".").concat(this.sortBy1);\n    }\n    if (this.sortBy2.length > 0) {\n      if (orderClause.length > 0) {\n        orderClause = orderClause.concat(",");\n      }\n      orderClause = orderClause.concat(this.TABLE_ALIAS).concat(".").concat(this.sortBy2);\n    }\n    if (this.sortBy3.length > 0) {\n      if (orderClause.length > 0) {\n        orderClause = orderClause.concat(",");\n      }\n      orderClause = orderClause.concat(this.TABLE_ALIAS).concat(".").concat(this.sortBy3);\n    }\n    if (this.sortBy4.length > 0) {\n      if (orderClause.length > 0) {\n        orderClause = orderClause.concat(",");\n      }\n      orderClause = orderClause.concat(this.TABLE_ALIAS).concat(".").concat(this.sortBy4);\n    }\n    if (orderClause.length == 0) {\n      orderClause = orderClause.concat(this.TABLE_ALIAS).concat(".Fact_Acct_ID");\n    }\n    if (!pNo) {\n      pNo = 1;\n    }\n    this.getDataModel(AD_Client_ID, whereClause, orderClause, this.group1, this.group2, this.group3, this.group4, this.sortBy1, this.sortBy2, this.sortBy3, this.sortBy4, this.displayDocumentInfo, this.displaySourceAmt, this.displayQty, callbackGetDataModel, resetPageCtrls, pNo);\n    //var val = this.dataByData;\n    //return val;\n  };\n  AcctViewerData.prototype.getDataModel = function (AD_Client_ID, whereClause, orderClause, gr1, gr2, gr3, gr4, sort1, sort2, sort3, sort4, displayDocInfo, displaySrcAmt, displayqty, callbackGetDataModel, resetPageCtrls, pNo) {\n    var obj = this;\n    $.ajax({\n      url: VIS.Application.contextUrl + "Common/GetDataQuery",\n      async: true,\n      dataType: "json",\n      type: "POST",\n      data: {\n        AD_Client_ID: AD_Client_ID,\n        whereClause: whereClause,\n        orderClause: orderClause,\n        gr1: gr1,\n        gr2: gr2,\n        gr3: gr3,\n        gr4: gr4,\n        sort1: sort1,\n        sort2: sort2,\n        sort3: sort3,\n        sort4: sort4,\n        displayDocInfo: displayDocInfo,\n        displaySrcAmt: displaySrcAmt,\n        displayqty: displayqty,\n        pageNo: pNo\n      },\n      success: function (data) {\n        /**VIS_045: DevOps Task ID: 2075 -> Handle date in UTC */\n        data = JSON.parse(data);\n        obj.dataByData = data;\n        resetPageCtrls(data.pSetting);\n        callbackGetDataModel(data);\n        //return data.result;\n      }\n    });\n  };\n\n  //form declaretion\n  function AcctViewer(AD_Client_ID, AD_Table_ID, Record_ID, windowNum, AD_Window_ID) {\n    var $root = $("<div style=\'position:relative;\'>");\n    var $busyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n    var $self = this;\n    var _AD_Client_ID = AD_Client_ID;\n    var _AD_Table_ID = AD_Table_ID;\n    var _Record_ID = Record_ID;\n    var windowNo = windowNum;\n    var _AD_Window_ID = AD_Window_ID;\n    this.arrListColumns = [];\n    this.dGrid = null;\n    this.menuForm = false;\n    var Load = false;\n    var ACCT_SCHEMA = "C_AcctSchema_ID";\n    var DOC_TYPE = "DocumentType";\n    var POSTING_TYPE = "PostingType";\n    var ORG = "AD_Org_ID";\n    var TRXORG = "AD_OrgTrx_ID";\n    var ACCT = "Account_ID";\n    var SELECT_DOCUMENT = "SelectDocument";\n    var ACCT_DATE = "AcctDateFrom"; //DateAcct\n\n    var PROD = "M_Product_ID";\n    var BPARTNER = "C_BPartner_ID";\n    var PROJECT = "C_Project_ID";\n    var CAMPAIGN = "C_Campaign_ID";\n    var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/Find24.gif";\n    var srcz = VIS.Application.contextUrl + "Areas/VIS/Images/cancel-18.png";\n    var srcRefresh = VIS.Application.contextUrl + "Areas/VIS/Images/base/Refresh24.png";\n    var srcPrint = VIS.Application.contextUrl + "Areas/VIS/Images/base/Print24.PNG";\n    var btnRefresh = $("<button id=\'" + "btnRefresh_" + windowNo + "\'style=\'margin-top: 0;\' class=\'VIS_Pref_btn-2\'><i class=\'vis vis-refresh\'></i></button>");\n    var btnPrint = $("<button class=\'VIS_Pref_btn-2\' id=\'" + "btnPrint_" + windowNo + "\' style=\'margin-top: 0px; margin-left: 10px;\'><i class=\'vis vis-print\'></button>");\n    var btnRePost = $("<button class=\'VIS_Pref_btn-2\' id=\'" + "btnRePost_" + windowNo + "\' style=\'margin-top: 10px;\'><img src=\'" + src + "\'/></button>");\n    var btnSelctDoc = $("<button class=\'input-group-text\' Name=\'btnSelctDoc\' id=\'" + "btnSelctDoc_" + windowNo + "\'><i class=\'vis vis-find\'></i></button>");\n    var btnAccount = $("<button class=\'input-group-text\' Name=\'btnAccount\' id=\'" + "btnAccount_" + windowNo + "\'><i class=\'vis vis-find\'></i></button>");\n    var btnProduct = $("<button class=\'input-group-text\' Name=\'btnProduct\' id=\'" + "btnProduct_" + windowNo + "\'><i class=\'vis vis-find\'></i></button>");\n    var btnBPartner = $("<button class=\'input-group-text\' Name=\'btnBPartner\' id=\'" + "btnBPartner_" + windowNo + "\'><i class=\'vis vis-find\'></i></button>");\n    var btnProject = $("<button class=\'input-group-text\'Name=\'btnProject\' id=\'" + "btnProject_" + windowNo + "\'><i class=\'vis vis-find\'></i></button>");\n    var btnCampaning = $("<button class=\'input-group-text\' Name=\'btnCampaning\' id=\'" + "btnCampaning_" + windowNo + "\'><i class=\'vis vis-find\'></i></button>");\n    var btnOrgUnit = $("<button class=\'input-group-text\' Name=\'btnOrgUnit\' id=\'" + "btnOrgUnit_" + windowNo + "\'><i class=\'vis vis-find\'></i></button>");\n    var btnSelctDocClear = $("<button Name=\'btnSelctDocClear\' id=\'" + "btnSelctDocClear_" + windowNo + "\' class=\'input-group-text\'><i class=\'vis vis-mark\'></i></button>");\n    var btnAccountClear = $("<button  Name=\'btnAccountClear\' id=\'" + "btnAccountClear_" + windowNo + "\'   class=\'input-group-text\'><i class=\'vis vis-mark\'></i></button>");\n    var btnProductClear = $("<button  Name=\'btnProductClear\' id=\'" + "btnProductClear_" + windowNo + "\'   class=\'input-group-text\'><i class=\'vis vis-mark\'></i></button>");\n    var btnBPartnerClear = $("<button Name=\'btnBPartnerClear\' id=\'" + "btnBPartnerClear_" + windowNo + "\' class=\'input-group-text\'><i class=\'vis vis-mark\'></i></button>");\n    var btnProjectClear = $("<button  Name=\'btnProjectClear\' id=\'" + "btnProjectClear_" + windowNo + "\'   class=\'input-group-text\'><i class=\'vis vis-mark\'></i></button>");\n    var btnCampaningClear = $("<button Name=\'btnCampaningClear\' id=\'" + "btnCampaningClear_" + windowNo + "\' class=\'input-group-text\'><i class=\'vis vis-mark\'></i></button>");\n    var btnOrgUnitClear = $("<button Name=\'btnOrgUnitClear\' id=\'" + "btnOrgUnitClear_" + windowNo + "\' class=\'input-group-text\'><i class=\'vis vis-mark\'></i></button>");\n    var cmbAccSchema = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbAccSchemaFilter = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbPostType = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbOrg = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbSelectDoc = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbSort1 = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbSort2 = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbSort3 = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbSort4 = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var lblAccSchema = new VIS.Controls.VLabel();\n    var lblAccSchemaFilter = new VIS.Controls.VLabel();\n    var lblPostType = new VIS.Controls.VLabel();\n    var lblAccDate = new VIS.Controls.VLabel();\n    var lblAccDateTo = new VIS.Controls.VLabel();\n    var lblOrg = new VIS.Controls.VLabel();\n    var lblAcc = new VIS.Controls.VLabel();\n    var lblProduct = new VIS.Controls.VLabel();\n    var lblBP = new VIS.Controls.VLabel();\n    var lblProject = new VIS.Controls.VLabel();\n    var lblCompaning = new VIS.Controls.VLabel();\n    var lblSort = new VIS.Controls.VLabel();\n    var lblSumrise = new VIS.Controls.VLabel();\n    var lblSel5 = new VIS.Controls.VLabel();\n    var lblSel6 = new VIS.Controls.VLabel();\n    var lblSel7 = new VIS.Controls.VLabel();\n    var lblSel8 = new VIS.Controls.VLabel();\n    var lblOrgUnit = new VIS.Controls.VLabel();\n    var btnSel5 = $("<button id=\'" + "btnSel5_" + windowNo + "\' style=\'border: 0px;background-color: transparent; padding: 0px;\'><img src=\'" + src + "\' /><span></span></button>");\n    var btnSel6 = $("<button id=\'" + "btnSel6_" + windowNo + "\' style=\'border: 0px;background-color: transparent; padding: 0px;\'><img src=\'" + src + "\' /><span></span></button>");\n    var btnSel7 = $("<button id=\'" + "btnSel7_" + windowNo + "\' style=\'border: 0px;background-color: transparent; padding: 0px;\'><img src=\'" + src + "\' /><span></span></button>");\n    var btnSel8 = $("<button id=\'" + "btnSel8_" + windowNo + "\' style=\'border: 0px;background-color: transparent; padding: 0px;\'><img src=\'" + src + "\' /><span></span></button>");\n    var lblstatusLine = new VIS.Controls.VLabel();\n    var groupBox1 = new VIS.Controls.VLabel();\n    var groupBox2 = new VIS.Controls.VLabel();\n    var tabT1 = null;\n    var tabT2 = null;\n    var chkSelectDoc = $("<label id=\'" + "lblSelectDoc_" + windowNo + "\' class=\'VIS_Pref_Label_Font vis-ec-col-lblchkbox\'><input id=\'" + "chkSelectDoc_" + windowNo + "\' type=\'checkbox\' checked class=\'VIS_Pref_automatic\'>" + "SelectDoc</label>");\n    var chkQty = $("<input id=\'" + "chkQty_" + windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>" + "<span><label id=\'" + "lblQty_" + windowNo + "\' class=\'VIS_Pref_Label_Font\'>chkQty</label></span>");\n    var chkforcePost = $("<input id=\'" + "chkforcePost_" + windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\' style=\'display: inline-block;margin-left: 20px; margin-top: 0;\'>" + "<span><label id=\'" + "lblforcePost_" + windowNo + "\' class=\'VIS_Pref_Label_Font\'>chkforcePost</label></span>");\n    var DrAndCr = $("<span style=\'margin-left: 20px;\'><label id=\'" + "lblDrAndCR_" + windowNo + "\' class=\'VIS_Pref_Label_Font\'></label></span>");\n    var chkDisDocinfo = $("<input id=\'" + "chkDisDocinfo_" + windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>" + "<span><label id=\'" + "lblDisDocinfo_" + windowNo + "\' class=\'VIS_Pref_Label_Font\'>chkDisDocinfo</label></span>");\n    var chkDisSouce = $("<input id=\'" + "chkDisSouce_" + windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>" + "<span><label id=\'" + "lblDisSouce_" + windowNo + "\' class=\'VIS_Pref_Label_Font\'>chkDisSouce</label></span>");\n    var chkSumriz1 = $("<input id=\'" + "chkSumriz1_" + windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>");\n    //"<span><label id=\'" + "lblSumriz1_" + windowNo + "\' class=\'VIS_Pref_Label_Font\'>chkSumriz1</label></span>");\n\n    var chkSumriz2 = $("<input id=\'" + "chkSumriz2_" + windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>");\n    //"<span><label id=\'" + "lblSumriz2_" + windowNo + "\' class=\'VIS_Pref_Label_Font\'>chkSumriz2</label></span>");\n\n    var chkSumriz3 = $("<input id=\'" + "chkSumriz3_" + windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>");\n    //"<span><label id=\'" + "lblSumriz3_" + windowNo + "\' class=\'VIS_Pref_Label_Font\'>chkSumriz3</label></span>");\n\n    var chkSumriz4 = $("<input id=\'" + "chkSumriz4_" + windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>");\n    //"<span><label id=\'" + "lblSumriz4_" + windowNo + "\' class=\'VIS_Pref_Label_Font\'>chkSumriz4</label></span>");\n\n    var vdtpkAccDateFrom = $("<input id=\'" + "vdtpkAccDateFrom_" + windowNo + "\' type=\'date\' name=\'DateOrdered\'>");\n    var vdtpkAccDateTo = $("<input id=\'" + "vdtpkAccDateTo_" + windowNo + "\' type=\'date\' name=\'DateOrdered\'>");\n    var topDiv = null;\n    var leftSideDiv = null;\n    var rightSideDiv = null;\n    var div = null;\n    var bottumDiv = null;\n    var resultDiv = null;\n    var leftSideDivWidth = $(window).width() / 2;\n    var rightSideDivWidth = $(window).width() / 2;\n    var selectDivHeight = $(window).height() - 200;\n    var _data = null;\n    //_data = new AcctViewerData(windowNo, AD_Client_ID, AD_Table_ID);;\n\n    function jbInit() {\n      //Selection\n      groupBox1.getControl().text(VIS.Msg.getMsg("Selection"));\n      lblAccSchema.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), ACCT_SCHEMA));\n      lblAccSchemaFilter.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), ACCT_SCHEMA));\n      lblPostType.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), POSTING_TYPE));\n      chkSelectDoc.find("label").text(VIS.Msg.getMsg(SELECT_DOCUMENT));\n      lblOrg.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), ORG));\n      lblAcc.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), ACCT));\n      lblAccDate.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), ACCT_DATE));\n      lblAccDateTo.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "AcctDateTo"));\n      // Mohit- added labels\n      lblProduct.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), PROD));\n      lblBP.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), BPARTNER));\n      lblProject.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "Project"));\n      lblCompaning.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), CAMPAIGN));\n      lblOrgUnit.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "OrganizationUnit"));\n\n      //Display\n      groupBox2.getControl().text(VIS.Msg.getMsg("Display"));\n      chkQty.find("label").text(VIS.Msg.getMsg("DisplayQty"));\n      chkDisSouce.find("label").text(VIS.Msg.getMsg("DisplaySourceInfo"));\n      chkDisDocinfo.find("label").text(VIS.Msg.getMsg("DisplayDocumentInfo"));\n      lblSort.getControl().text(VIS.Msg.getMsg("SortBy"));\n      lblSumrise.getControl().text(VIS.Msg.getMsg("GroupBy"));\n      // \n      // South\n      lblstatusLine.getControl().css("color", "rgba(var(--v-c-primary), 1)"); //css("font-size", "28px").\n      btnRePost.text(VIS.Msg.getMsg("RePost"));\n      if (notShowPosted) {\n        btnRePost.hide();\n        chkforcePost.find("label").text(VIS.Msg.getMsg("Force"));\n        chkforcePost.hide();\n      } else {\n        btnRePost.show();\n        chkforcePost.find("label").text(VIS.Msg.getMsg("Force"));\n        chkforcePost.show();\n      }\n    }\n    function tab1Select() {\n      tabT2.css("color", "rgba(var(--v-c-on-secondary), 1)");\n      tabT1.css("font-size", "1rem").css("color", "rgba(var(--v-c-primary), 1)");\n      rightSideDiv.show();\n      leftSideDiv.show();\n      ulPaging.css("display", "none");\n      divPaging.css("display", "none");\n      resultDiv.css("display", "none");\n      btnRePost.hide();\n      btnExportExcel.hide();\n      chkforcePost.hide();\n      btnRefresh.show();\n      lblstatusLine.getControl().show();\n      DrAndCr.hide();\n      lblAccSchemaFilter.getControl().hide();\n      cmbAccSchemaFilter.getControl().hide();\n      leftSideDiv.find("#btnSelctDoc_" + windowNo).attr("name", leftSideDiv.find("#btnSelctDoc_" + windowNo).parent().find("select").val() + "_ID");\n      leftSideDiv.find("#btnSelctDocClear_" + windowNo).attr("name", leftSideDiv.find("#btnSelctDocClear_" + windowNo).parent().find("select").val() + "_ID");\n    }\n    function tab2Select() {\n      tabT1.css("color", "rgba(var(--v-c-on-secondary), 1)");\n      tabT2.css("font-size", "1rem").css("color", "rgba(var(--v-c-primary), 1)");\n      rightSideDiv.hide();\n      leftSideDiv.hide();\n      ulPaging.css("display", "block");\n      divPaging.css("display", "block");\n      DrAndCr.show();\n      btnRefresh.hide();\n      lblstatusLine.getControl().hide();\n      divPaging.append(ulPaging);\n      bottumDiv.append(divPaging);\n      resultDiv.css("display", "block");\n      if (notShowPosted) {\n        btnRePost.hide();\n        chkforcePost.hide();\n      } else {\n        btnRePost.show();\n        chkforcePost.show();\n        btnExportExcel.show();\n      }\n      lblAccSchemaFilter.getControl().show();\n      cmbAccSchemaFilter.getControl().show();\n    }\n    createPageSettings();\n    //bottumDiv.append(ulPaging);\n    //Paging UI\n    function createPageSettings() {\n      divPaging = $("<div class=\'d-flex align-items-center ml-auto\'><button id=\'btnExportExcel_" + $self.windowNo + "\' class=\'vis-btnExcelExport mr-2\'><span class=\'vis vis-doc-excel\'> " + VIS.Msg.getMsg("ExcelExportData") + "</span></button><div class=\'vis-info-pagingwrp\' style=\'text-align: right; flex: 1;\'\'></div>");\n      ulPaging = $(\'<ul class="vis-statusbar-ul">\');\n      liFirstPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-shiftleft" title="\' + VIS.Msg.getMsg("FirstPage") + \'" style="opacity: 0.6;"></i></div></li>\');\n      liPrevPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-pageup" title="\' + VIS.Msg.getMsg("PageUp") + \'" style="opacity: 0.6;"></i></div></li>\');\n      cmbPage = $("<select>");\n      liCurrPage = $(\'<li>\').append(cmbPage);\n      liNextPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-pagedown" title="\' + VIS.Msg.getMsg("PageDown") + \'" style="opacity: 0.6;"></i></div></li>\');\n      liLastPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-shiftright" title="\' + VIS.Msg.getMsg("LastPage") + \'" style="opacity: 0.6;"></i></div></li>\');\n      ulPaging.append(liFirstPage).append(liPrevPage).append(liCurrPage).append(liNextPage).append(liLastPage);\n      pageEvents();\n    }\n    btnExportExcel = divPaging.find("#btnExportExcel_" + $self.windowNo + "");\n\n    //Paging events\n    function pageEvents() {\n      liFirstPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          setBusy(true);\n          _data.Query(AD_Client_ID, callbackGetDataModel, resetPageCtrls, 1);\n        }\n      });\n      liPrevPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          setBusy(true);\n          _data.Query(AD_Client_ID, callbackGetDataModel, resetPageCtrls, parseInt(cmbPage.val()) - 1);\n        }\n      });\n      liNextPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          setBusy(true);\n          _data.Query(AD_Client_ID, callbackGetDataModel, resetPageCtrls, parseInt(cmbPage.val()) + 1);\n        }\n      });\n      liLastPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          setBusy(true);\n          _data.Query(AD_Client_ID, callbackGetDataModel, resetPageCtrls, parseInt(cmbPage.find("Option:last").val()));\n        }\n      });\n      cmbPage.on("change", function () {\n        setBusy(true);\n        _data.Query(AD_Client_ID, callbackGetDataModel, resetPageCtrls, cmbPage.val());\n      });\n    }\n    function setBusy(isBusy) {\n      $busyDiv.css("display", isBusy ? \'block\' : \'none\');\n    }\n    ;\n    function setModel(dataObj) {\n      if ($self.dGrid != null) {\n        $self.dGrid.destroy();\n        $self.dGrid = null;\n      }\n      $self.arrListColumns = [];\n      //Create Data Array\n      var data = [];\n      var count = 1;\n      for (var i = 0; i < dataObj.Data.length; i++) {\n        var row = dataObj.Data[i];\n        DrAndCr.text(dataObj.DebitandCredit);\n        var line = {};\n        for (var j = 0; j < dataObj.Columns.length; j++) {\n          if ($self.arrListColumns.length != dataObj.Columns.length) {\n            // alignment of Credit and Debit field\n            if (row[j] != null && typeof row[j] == "number" && (VIS.translatedTexts.AmtAcctCr == dataObj.Columns[j] || VIS.translatedTexts.AmtAcctDr == dataObj.Columns[j] || VIS.translatedTexts.AmtSourceCr == dataObj.Columns[j] || VIS.translatedTexts.AmtSourceDr == dataObj.Columns[j])) {\n              $self.arrListColumns.push({\n                field: dataObj.Columns[j],\n                caption: VIS.Msg.translate(VIS.Env.getCtx(), dataObj.Columns[j]),\n                sortable: true,\n                size: \'16%\',\n                hidden: false,\n                style: \'text-align: right\'\n              });\n            } else {\n              $self.arrListColumns.push({\n                field: dataObj.Columns[j],\n                caption: VIS.Msg.translate(VIS.Env.getCtx(), dataObj.Columns[j]),\n                sortable: true,\n                size: \'16%\',\n                hidden: false\n              });\n            }\n          }\n          if (row[j] != null && typeof row[j] == "object") {\n            line[dataObj.Columns[j]] = row[j].Name;\n          } else {\n            /* VIS:0045 - DevOps ID - 5931, handle Date Issue on Account Viewer form\r\n             * Previously, Date column check with its Name rather then DataType */\n            if (row[j] != null && dataObj.DataType[j].indexOf("Date") >= 0) {\n              if (row[j] != "") {\n                //var date = new Date(parseInt(row[j].substr(6)));\n                /**VIS_045: DevOps Task ID: 2075 -> Handle date in UTC */\n                var date = new Date(row[j]);\n                if (data != null) line[dataObj.Columns[j]] = date.toLocaleDateString();\n              }\n            } else if (row[j] != null && typeof row[j] == "number" && (VIS.translatedTexts.AmtAcctCr == dataObj.Columns[j] || VIS.translatedTexts.AmtAcctDr == dataObj.Columns[j] || VIS.translatedTexts.AmtSourceCr == dataObj.Columns[j] || VIS.translatedTexts.AmtSourceDr == dataObj.Columns[j])) {\n              line[dataObj.Columns[j]] = parseFloat(row[j]).toLocaleString(window.navigator.language, {\n                minimumFractionDigits: dataObj.Precision,\n                maximumFractionDigits: dataObj.Precision\n              });\n            } else {\n              line[dataObj.Columns[j]] = row[j];\n            }\n          }\n        }\n        line[\'recid\'] = count;\n        count++;\n        data.push(line);\n      }\n      setTimeout(10);\n      w2utils.encodeTags(data);\n      $self.dGrid = $(resultDiv).w2grid({\n        name: "gridAccViewer" + windowNo,\n        recordHeight: 37,\n        //show: {\n        //    lineNumbers: true  // indicates if line numbers column is visible\n        //},\n        columns: $self.arrListColumns,\n        records: data\n      });\n    }\n    function cleardata(button) {\n      var keyColumn = button.attr(\'name\');\n      button.find(\'span\').text(" ");\n      //used to clear controls based on id attribute\n      $(\'#txt\' + button.attr(\'id\').substring(3)).val("");\n      if (_data.whereInfo.length > 0) {\n        var index = _data.whereInfo.map(function (item) {\n          return item.Key == keyColumn;\n        }).indexOf(true);\n        _data.whereInfo.splice(index, 1);\n      }\n      button.width = 44;\n      return 0;\n    }\n    function events() {\n      //  $root.find("lblquery_1\n\n      if (tabT1 != null) tabT1.on(VIS.Events.onTouchStartOrClick, function () {\n        tab1Select();\n      });\n      if (tabT2 != null) tabT2.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.dGrid.refresh();\n        tab2Select();\n      });\n      if (cmbAccSchema != null) {\n        cmbAccSchema.getControl().change(function () {\n          actionAcctSchema();\n        });\n      }\n      if (cmbAccSchemaFilter != null) {\n        cmbAccSchemaFilter.getControl().change(function () {\n          setBusy(true);\n          _data.C_AcctSchema_ID = cmbAccSchemaFilter.getControl().find(\'option:selected\').val();\n          setTimeout(function () {\n            //var dataValue = _data.Query(AD_Client_ID , callbackGetDataModel);\n            var pNo = 1;\n            _data.Query(AD_Client_ID, callbackGetDataModel, resetPageCtrls, pNo);\n            //if (dataValues != null) {\n            //    setModel(dataValues);\n            //}\n          }, 2);\n        });\n      }\n      if (btnRefresh != null) {\n        btnRefresh.on("click", function () {\n          setBusy(true);\n          cmbAccSchemaFilter.setValue(cmbAccSchema.getControl().find(\'option:selected\').val());\n          actionQuery();\n          setBusy(false);\n        });\n      }\n      if (chkSelectDoc != null) {\n        chkSelectDoc.change(function () {\n          actionDocument();\n        });\n      }\n      if (cmbSelectDoc != null) {\n        cmbSelectDoc.getControl().change(function () {\n          actionTable();\n          _data.Record_ID = Record_ID;\n          _data.AD_Table_ID;\n        });\n      }\n      if (btnRePost != null) {\n        //btnRePost.on("click", function () {\n        //    setBusy(true);                \n        //    var invoiceID = "(SELECT ca.c_invoice_id FROM c_allocationline ca" +\n        //         " inner join c_invoice ci on ci.c_invoice_id= ca.c_invoice_id" +\n        //         " WHERE ci.issotrx=\'Y\' and ca.c_allocationhdr_id=" + _data.Record_ID;\n\n        //    var postValue = "SELECT (SELECT SUM(al.amount) FROM c_allocationline al INNER JOIN" +\n        //        " c_allocationhdr alh ON al.c_allocationhdr_id=alh.c_allocationhdr_id  WHERE " +\n        //        " alh.posted   =\'Y\' and c_invoice_id=" + invoiceID + ")) as aloc  ," +\n        //        "(SELECT SUM(cl.linenetamt)  FROM c_invoiceline cl WHERE " +\n        //        " c_invoice_id     =" + invoiceID + ")) as adj  from dual";\n\n        //    setTimeout(function () {\n        //        var dr = VIS.DB.executeReader(postValue.toString(), null, null);\n        //        if (dr.read()) {\n        //            if (dr.getInt(0) - dr.getInt(1) == 0) {\n        //                //reposting\n        //                var sql = "update c_allocationhdr alh set alh.posted =\'N\' where alh.c_allocationhdr_id in (select c_allocationhdr_id from c_allocationline where c_invoice_id=" + invoiceID + "))";\n        //                VIS.DB.executeQuery(sql);\n        //            }\n        //        }\n        //        dr.close();\n        //        dr = null;\n        //    }, 5);\n        //    actionRePost();\n        //});\n\n        btnRePost.on("click", function () {\n          setBusy(true);\n          var postedDemands = actionRePost();\n          setTimeout(function () {\n            if (postedDemands) {\n              rePostClick(_data.Record_ID);\n            } else {\n              setBusy(false);\n            }\n          }, 5);\n        });\n\n        //This function is used to Export file in Excel\n        btnExportExcel.on("click", function () {\n          $.ajax({\n            url: VIS.Application.contextUrl + "Posting/DownloadExcel",\n            dataType: "json",\n            data: {\n              AD_Table_ID: AD_Table_ID,\n              Record_ID: Record_ID\n            },\n            error: function (e) {\n              setBusy(false);\n              VIS.ADialog.info(VIS.Msg.getMsg(\'ERRORGettingPostingServer\'));\n            },\n            success: function (response) {\n              if (response != null && response.FileContents.length > 0) {\n                var bytes = new Uint8Array(response.FileContents);\n                var blob = new Blob([bytes], {\n                  type: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"\n                });\n                var link = document.createElement(\'a\');\n                link.href = window.URL.createObjectURL(blob);\n                link.download = response.FileDownloadName;\n                link.click();\n              } else {\n                VIS.ADialog.info(VIS.Msg.getMsg(\'ExcelError\'));\n              }\n            }\n          });\n        });\n      }\n      if (btnSelctDoc != null) {\n        btnSelctDoc.on("click", function () {\n          actionButton(btnSelctDoc);\n        });\n      }\n      if (btnAccount != null) {\n        btnAccount.on("click", function () {\n          actionButton(btnAccount);\n        });\n      }\n      if (btnProduct != null) {\n        btnProduct.on("click", function () {\n          actionButton(btnProduct);\n        });\n      }\n      if (btnBPartner != null) {\n        btnBPartner.on("click", function () {\n          actionButton(btnBPartner);\n        });\n      }\n      if (btnProject != null) {\n        btnProject.on("click", function () {\n          actionButton(btnProject);\n        });\n      }\n      if (btnCampaning != null) {\n        btnCampaning.on("click", function () {\n          actionButton(btnCampaning);\n        });\n      }\n      if (btnOrgUnit != null) {\n        btnOrgUnit.on("click", function () {\n          /** Open the info window according to the button clicked. **/\n          actionButton(btnOrgUnit);\n        });\n      }\n      if (btnSelctDocClear != null) {\n        btnSelctDocClear.on("click", function () {\n          cleardata(btnSelctDoc);\n        });\n      }\n      if (btnAccountClear != null) {\n        btnAccountClear.on("click", function () {\n          cleardata(btnAccount);\n        });\n      }\n      if (btnProductClear != null) {\n        btnProductClear.on("click", function () {\n          cleardata(btnProduct);\n        });\n      }\n      if (btnBPartnerClear != null) {\n        btnBPartnerClear.on("click", function () {\n          cleardata(btnBPartner);\n        });\n      }\n      if (btnProjectClear != null) {\n        btnProjectClear.on("click", function () {\n          cleardata(btnProject);\n        });\n      }\n      if (btnCampaningClear != null) {\n        btnCampaningClear.on("click", function () {\n          cleardata(btnCampaning);\n        });\n      }\n      if (btnOrgUnitClear != null) {\n        btnOrgUnitClear.on("click", function () {\n          /** Clear data from info button and the from the array maintained at backend. **/\n          cleardata(btnOrgUnit);\n        });\n      }\n    }\n    function rePostClick(_dataRecord_IDs) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "AcctViewerData/AcctViewerRePost",\n        type: \'POST\',\n        async: true,\n        data: {\n          dataRecID: _dataRecord_IDs\n        },\n        success: function (data) {\n          //  var res = data.result;\n          //setBusy(false);\n        },\n        error: function (e) {\n          $selfObj.log.info(e);\n          setBusy(false);\n        }\n      });\n    }\n    function initializeComponent() {\n      notShowPosted = VIS.Env.getCtx().getContext(\'#SHOW_REPOST\').equals("N");\n      topDiv = $("<div id=\'" + "topDiv_" + windowNo + "\' style=\'float: left; width: 100%;\'>" + "<div id=\'" + "queryDiv_" + windowNo + "\'style=\'display: inline-block; margin-right: 15px; margin-top: 5px\' >" + "<label id=\'" + "lblquery_" + windowNo + "\' class=\'VIS_Pref_Label_Font\' style=\'cursor: pointer;font-size: 1rem;color: rgba(var(--v-c-primary), 1);\'>" + VIS.Msg.getMsg("ViewerQuery") + "</label></div>" + "<div id=\'" + "resulttopDiv_" + windowNo + "\' style=\'display: inline-block; width: 160px;\'>" + "<label id=\'" + "lblresult_" + windowNo + "\' class=\'VIS_Pref_Label_Font\' style=\'vertical-align: middle; cursor: pointer;\'>" + VIS.Msg.getMsg("ViewerResult") + "</label></div></div>" + "</div>");\n      var localdiv = $("<div id=\'" + "resultTopFilterDiv_" + windowNo + "\' style=\'float: right;width: 50%;\'>");\n      var $DivInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $DivControlWrap = $(\'<div class="vis-control-wrap">\');\n      localdiv.append($DivInputWrap);\n      $DivInputWrap.append($DivControlWrap);\n      $DivControlWrap.append(cmbAccSchemaFilter.getControl()).append(lblAccSchemaFilter.getControl());\n      topDiv.append(localdiv);\n\n      //Left side Div designing\n      leftSideDiv = $("<div class=\'vis-leftsidebarouterwrap\' id=\'" + "leftSideDiv_" + windowNo + "\' style=\'float: left;background-color: rgba(var(--v-c-secondary), 1);overflow: auto;padding: 10px;\'>");\n      if (VIS.Application.isRTL) {\n        leftSideDiv.css("float", "right");\n        //btnRefresh.css("float", "left");\n        //btnRePost.css("float", "right");\n      }\n      leftSideDiv.css("width", "50%"); // leftSideDivWidth);\n      leftSideDiv.css("height", selectDivHeight);\n      div = $("<div style=\'float: left;width: 100%;height: 100%;\' id=\'" + "parameterLeftDiv_" + windowNo + "\'>");\n      leftSideDiv.append(div);\n      var tble = $("<table style=\'width: 100%;height: 100%;\'>");\n\n      //line1\n      var tr = $("<tr>");\n      var td = $("<td>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      div.append(tble);\n      tble.append(tr);\n      //tr.append(td);\n      //td.append(lblAccSchema.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      ////line2\n      //tr = $("<tr>");\n      //td = $("<td>");//width: 236px;\n      //tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmControlWrap.append(cmbAccSchema.getControl()).append(lblAccSchema.getControl());\n\n      //line3\n      tr = $("<tr>");\n      //td = $("<td style=\'padding: 4px 2px 2px;\'>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      //tr.append(td);\n      //td.append(lblPostType.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line4\n      //tr = $("<tr>");\n      td = $("<td>");\n      // tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmControlWrap.append(cmbPostType.getControl()).append(lblPostType.getControl());\n\n      //line5\n      tr = $("<tr>");\n      td = $("<td>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmControlWrap.append(chkSelectDoc);\n      tr = $("<tr>");\n      td = $("<td>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      var $FrmCtrlBtnWrap = $(\'<div class="input-group-append">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmInputWrap.append($FrmCtrlBtnWrap);\n      $FrmControlWrap.append(cmbSelectDoc.getControl().attr(\'placeholder\', \' \').attr(\'data-placeholder\', \'\').attr(\'data-hasbtn\', \' \'));\n\n      //// tr = $("<tr>");\n      //td = $("<td>");//style=\'padding: 0px 15px 0px;\'\n      //// tble.append(tr);\n      //tr.append(td);\n      $FrmCtrlBtnWrap.append(btnSelctDoc).append(btnSelctDocClear);\n\n      //line6\n      tr = $("<tr>");\n      //td = $("<td style=\'padding: 4px 2px 2px;\'>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      //tr.append(td);\n      //td.append(lblAccDate.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line7\n      // tr = $("<tr>");\n      td = $("<td>");\n      // tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmControlWrap.append(vdtpkAccDateFrom).append(lblAccDate.getControl());\n\n      //line8\n      tr = $("<tr>");\n      //td = $("<td style=\'padding: 4px 2px 2px;\'>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      //tr.append(td);\n      //td.append(lblAccDateTo.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line9\n      // tr = $("<tr>");\n      td = $("<td>");\n      //  tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmControlWrap.append(vdtpkAccDateTo).append(lblAccDateTo.getControl());\n\n      //line10\n      tr = $("<tr>");\n      //td = $("<td style=\'padding: 4px 2px 2px;\'>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      //tr.append(td);\n      //td.append(lblOrg.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line11\n      // tr = $("<tr>");\n      td = $("<td>");\n      // tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmControlWrap.append(cmbOrg.getControl()).append(lblOrg.getControl());\n\n      //line12\n      tr = $("<tr>");\n      //td = $("<td style=\'padding: 4px 2px 2px;\'>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      var $FrmCtrlBtnWrap = $(\'<div class="input-group-append">\');\n      var $FrmInputRO = $(\'<input type="text" id="txtAccount_\' + windowNo + \'" readonly data-hasbtn=" ">\');\n      tble.append(tr);\n      //tr.append(td);\n      //td.append(lblAcc.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line13\n      //  tr = $("<tr>");\n      td = $("<td>");\n      // tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmInputWrap.append($FrmCtrlBtnWrap);\n      $FrmControlWrap.append($FrmInputRO).append(lblAcc.getControl());\n      $FrmCtrlBtnWrap.append(btnAccount).append(btnAccountClear);\n\n      //line20\n      tr = $("<tr>");\n      //td = $("<td style=\'padding: 4px 2px 2px;\'>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      var $FrmCtrlBtnWrap = $(\'<div class="input-group-append">\');\n      var $FrmInputRO = $(\'<input type="text" id="txtOrgUnit_\' + windowNo + \'" readonly data-hasbtn=" ">\');\n      tble.append(tr);\n      //tr.append(td);\n      //td.append(lblOrgUnit.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line21\n      // tr = $("<tr>");\n      td = $("<td>");\n      //  tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmInputWrap.append($FrmCtrlBtnWrap);\n      $FrmControlWrap.append($FrmInputRO).append(lblOrgUnit.getControl());\n      $FrmCtrlBtnWrap.append(btnOrgUnit).append(btnOrgUnitClear);\n\n      //line14\n      tr = $("<tr>");\n      //td = $("<td style=\'padding: 4px 2px 2px;\'>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      var $FrmCtrlBtnWrap = $(\'<div class="input-group-append">\');\n      var $FrmInputRO = $(\'<input type="text" id="txtProduct_\' + windowNo + \'" readonly data-hasbtn=" ">\');\n      tble.append(tr);\n      //tr.append(td);\n      //td.append(lblProduct.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line15\n      // tr = $("<tr>");\n      td = $("<td>");\n      // tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmInputWrap.append($FrmCtrlBtnWrap);\n      $FrmControlWrap.append($FrmInputRO).append(lblProduct.getControl());\n      $FrmCtrlBtnWrap.append(btnProduct).append(btnProductClear);\n\n      //line16\n      tr = $("<tr>");\n      //td = $("<td style=\'padding: 4px 2px 2px;\'>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      var $FrmCtrlBtnWrap = $(\'<div class="input-group-append">\');\n      var $FrmInputRO = $(\'<input type="text" id="txtBPartner_\' + windowNo + \'" readonly data-hasbtn=" ">\');\n      tble.append(tr);\n      //tr.append(td);\n      //td.append(lblBP.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line17\n      // tr = $("<tr>");\n      td = $("<td>");\n      // tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmInputWrap.append($FrmCtrlBtnWrap);\n      $FrmControlWrap.append($FrmInputRO).append(lblBP.getControl());\n      $FrmCtrlBtnWrap.append(btnBPartner).append(btnBPartnerClear);\n\n      //line18\n      tr = $("<tr>");\n      //td = $("<td style=\'padding: 4px 2px 2px;\'>");\n      var $FrmInputWrap = $(\'<div class="input-group vis-input-wrap">\');\n      var $FrmControlWrap = $(\'<div class="vis-control-wrap">\');\n      var $FrmCtrlBtnWrap = $(\'<div class="input-group-append">\');\n      var $FrmInputRO = $(\'<input type="text" id="txtProject_\' + windowNo + \'" readonly data-hasbtn=" ">\');\n      tble.append(tr);\n      //tr.append(td);\n      //td.append(lblProject.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line19\n      // tr = $("<tr>");\n      td = $("<td>");\n      // tble.append(tr);\n      tr.append(td);\n      td.append($FrmInputWrap);\n      $FrmInputWrap.append($FrmControlWrap);\n      $FrmInputWrap.append($FrmCtrlBtnWrap);\n      $FrmControlWrap.append($FrmInputRO).append(lblProject.getControl());\n      $FrmCtrlBtnWrap.append(btnProject).append(btnProjectClear);\n\n      //Right side Div designing\n      rightSideDiv = $("<div id=\'" + "rightSideDiv_" + windowNo + "\' style=\'float: right;margin-bottom: 3px; margin-right: 0px; \'>");\n      rightSideDiv.css("width", "50%"); // rightSideDivWidth);\n      rightSideDiv.css("height", selectDivHeight);\n      div = $("<div style=\'float: left;width: 100%;height: 100%;\' id=\'" + "parameterRightDiv_" + windowNo + "\'>");\n      rightSideDiv.append(div);\n      tble = $("<table style=\'width: 100%;height: 100%;\'>");\n\n      //line1\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      div.append(tble);\n      tble.append(tr);\n      tr.append(td);\n      td.append(chkDisDocinfo);\n\n      //line2\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tble.append(tr);\n      tr.append(td);\n      td.append(chkDisSouce);\n\n      //line3\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tble.append(tr);\n      tr.append(td);\n      td.append(chkQty);\n\n      //line4\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tble.append(tr);\n      tr.append(td);\n      td.append(lblSort.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tr.append(td);\n      td.append(lblSumrise.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line5\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tble.append(tr);\n      tr.append(td);\n      td.append(cmbSort1.getControl().css("display", "inline-block").css("width", "100%").css("height", "32px"));\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tr.append(td);\n      td.append(chkSumriz1);\n\n      //line6\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tble.append(tr);\n      tr.append(td);\n      td.append(cmbSort2.getControl().css("display", "inline-block").css("width", "100%").css("height", "32px"));\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tr.append(td);\n      td.append(chkSumriz2);\n\n      //line7\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tble.append(tr);\n      tr.append(td);\n      td.append(cmbSort3.getControl().css("display", "inline-block").css("width", "100%").css("height", "32px"));\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tr.append(td);\n      td.append(chkSumriz3);\n\n      //line8\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tble.append(tr);\n      tr.append(td);\n      td.append(cmbSort4.getControl().css("display", "inline-block").css("width", "100%").css("height", "32px"));\n      td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      tr.append(td);\n      td.append(chkSumriz4);\n\n      //Bottum Div\n\n      bottumDiv = $("<div class=\'vis-acctviewerbottdiv\'>");\n      //createPageSettings();\n      //bottumDiv.append(ulPaging);\n      //bottumDiv.css("height", 50);\n      /** dont show repost butoon if form is opened from menu. **/\n      if (!$self.getIsMenu()) {\n        bottumDiv.append(btnRePost);\n        bottumDiv.append(chkforcePost).append(DrAndCr);\n      }\n      bottumDiv.append(lblstatusLine.getControl().addClass("VIS_Pref_Label_Font"));\n      bottumDiv.append(btnRefresh);\n      bottumDiv.append(btnPrint);\n      resultDiv = $("<div id=\'" + "resultDiv_" + windowNo + "\' style=\'float: left; width: 100%; display: none;\'>");\n      //resultDiv.css("width", $(window).width() - 30);\n      resultDiv.css("height", selectDivHeight);\n\n      //Add to root\n\n      $root.append(topDiv).append(leftSideDiv).append(rightSideDiv).append(resultDiv).append(bottumDiv);\n      $root.append($busyDiv);\n    }\n    function dynInit(AD_Table_ID, Record_ID) {\n      //if (!_data) {\n      _data = new AcctViewerData(windowNo, AD_Client_ID, AD_Table_ID);\n      _data.onLoaded = function () {\n        // }\n        //setTimeout(10);\n        // setTimeout(function () {\n        fillComboBox(cmbAccSchema.getControl(), _data.getAcctSchema());\n        cmbAccSchemaFilter.getControl().append("<option value=\'-1\' ></option>");\n        fillComboBox(cmbAccSchemaFilter.getControl(), _data.getAcctSchema());\n        actionAcctSchema();\n        fillComboBox(cmbSelectDoc.getControl(), _data.getTable());\n        fillComboBox(cmbPostType.getControl(), _data.getPostingType());\n        fillComboBox(cmbOrg.getControl(), _data.getOrg());\n\n        // }, 2);\n\n        btnSelctDoc.find(\'span\').text(\'\');\n        btnAccount.attr("Name", ACCT);\n        btnAccountClear.attr("Name", ACCT);\n        btnAccount.find(\'span\').text(\'\');\n\n        // Change done to resolve the issue of dimentions control not opening.\n        btnProduct.attr("Name", PROD);\n        btnProductClear.attr("Name", PROD);\n        btnProduct.find(\'span\').text(\'\');\n        btnBPartner.attr("Name", BPARTNER);\n        btnBPartnerClear.attr("Name", BPARTNER);\n        btnBPartner.find(\'span\').text(\'\');\n        btnProject.attr("Name", PROJECT);\n        btnProjectClear.attr("Name", PROJECT);\n        btnProject.find(\'span\').text(\'\');\n        btnCampaning.attr("Name", CAMPAIGN);\n        btnCampaningClear.attr("Name", CAMPAIGN);\n        btnCampaning.find(\'span\').text(\'\');\n        btnOrgUnit.attr("Name", TRXORG);\n        btnOrgUnitClear.attr("Name", TRXORG);\n        btnOrgUnit.find(\'span\').text(\'\');\n\n        //  Document Select\n        var haveDoc = AD_Table_ID != 0 && Record_ID != 0;\n        if (haveDoc) {\n          chkSelectDoc.find(\'input\').prop("checked", true);\n        }\n        actionDocument();\n        actionTable();\n        lblstatusLine.getControl().text(VIS.Msg.getMsg("VIS_EnterSelctionAndDisplayToQueryFind"));\n        lblstatusLine.getControl().css("color", "rgba(var(--v-c-primary), 1)"); //css("font-size", "28px").\n        ////  Initial Query\n        if (haveDoc) {\n          _data.AD_Table_ID = AD_Table_ID;\n          _data.Record_ID = Record_ID;\n        }\n        actionQuery();\n      };\n    }\n    function actionAcctSchema() {\n      var kp = cmbAccSchema.getControl().find(\'option:selected\').val();\n      if (kp == null) {\n        return;\n      }\n      _data.C_AcctSchema_ID = kp;\n      // _data.ASchema = MAcctSchema.Get(Env.GetCtx(), _data.C_AcctSchema_ID);//---\x3e\n      var elements = _data.getAcctSchemaElements(_data.C_AcctSchema_ID); //---\x3e\n\n      //  Sort Options\n      cmbSort1.getControl().empty();\n      cmbSort2.getControl().empty();\n      cmbSort3.getControl().empty();\n      cmbSort4.getControl().empty();\n      sortAddItem({\n        \'Key\': "",\n        \'Name\': ""\n      });\n      sortAddItem({\n        \'Key\': "DateAcct",\n        \'Name\': VIS.Msg.translate(VIS.Env.getCtx(), "DateAcct")\n      });\n      sortAddItem({\n        \'Key\': "DateTrx",\n        \'Name\': VIS.Msg.translate(VIS.Env.getCtx(), "DateTrx")\n      });\n      sortAddItem({\n        \'Key\': "C_Period_ID",\n        \'Name\': VIS.Msg.translate(VIS.Env.getCtx(), "C_Period_ID")\n      });\n      var labels = [];\n      labels.push(lblSel5);\n      labels.push(lblSel6);\n      labels.push(lblSel7);\n      labels.push(lblSel8);\n      var buttons = [];\n      buttons.push(btnProduct);\n      buttons.push(btnBPartner);\n      buttons.push(btnProject);\n      buttons.push(btnCampaning);\n      buttons.push(btnProductClear);\n      buttons.push(btnBPartnerClear);\n      buttons.push(btnProjectClear);\n      buttons.push(btnCampaningClear);\n      buttons.push(btnSel5);\n      buttons.push(btnSel6);\n      buttons.push(btnSel7);\n      buttons.push(btnSel8);\n      buttons.push(btnOrgUnit);\n      buttons.push(btnOrgUnitClear);\n      var selectionIndex = 0;\n      for (var i = 0; i < elements.length && selectionIndex < labels.length; i++) {\n        var ase = elements[i][0];\n        var columnName = _data.getColumnName(ase.elementtype); //GetColumnName();\n        var displayColumnName = _data.getColumnName(ase.elementtype); //ase.GetDisplayColumnName();\n        //  Add Sort Option\n        sortAddItem({\n          \'Key\': columnName,\n          \'Name\': VIS.Msg.translate(VIS.Env.getCtx(), displayColumnName)\n        });\n        //  Additional Elements\n        if (!(ase.elementtype == "OO") && !(ase.elementtype == "AC")) {\n          labels[selectionIndex].getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), displayColumnName));\n          labels[selectionIndex].getControl().show();\n          buttons[selectionIndex].attr("Name", columnName);\n          buttons[selectionIndex].find(\'span\').text(\'\');\n          buttons[selectionIndex].show();\n          selectionIndex++;\n        }\n      }\n\n      //\tdon\'t show remaining\n      while (selectionIndex < labels.length) {\n        labels[selectionIndex].getControl().hide();\n        // buttons[selectionIndex++].hide();\n        selectionIndex++;\n      }\n      cmbSort1.getControl().prop(\'selectedIndex\', 0);\n      cmbSort2.getControl().prop(\'selectedIndex\', 0);\n      cmbSort3.getControl().prop(\'selectedIndex\', 0);\n      cmbSort4.getControl().prop(\'selectedIndex\', 0);\n    }\n    function sortAddItem(vo) {\n      cmbSort1.getControl().append(" <option selected value=\'" + vo.Key + "\' >" + vo.Name + "</option>");\n      cmbSort2.getControl().append(" <option selected value=\'" + vo.Key + "\' >" + vo.Name + "</option>");\n      cmbSort3.getControl().append(" <option selected value=\'" + vo.Key + "\' >" + vo.Name + "</option>");\n      cmbSort4.getControl().append(" <option selected value=\'" + vo.Key + "\' >" + vo.Name + "</option>");\n    }\n    function actionQuery() {\n      //  Parameter Info\n      var para = "";\n      //  Reset Selection Data\n      _data.C_AcctSchema_ID = 0;\n      _data.AD_Org_ID = 0;\n\n      //  Save Selection Choices\n      var kp = cmbAccSchema.getControl().find(\'option:selected\').val();\n      if (kp != null) {\n        _data.C_AcctSchema_ID = kp;\n      }\n      para = para.concat("C_AcctSchema_ID=").concat(_data.C_AcctSchema_ID);\n      //\n      kp = cmbPostType.getControl().find(\'option:selected\').val();\n      if (kp != null && kp != "0") {\n        _data.PostingType = kp;\n      }\n      para = para.concat(", PostingType=").concat(_data.PostingType);\n\n      //  Document\n      _data.documentQuery = chkSelectDoc.find(\'input\').prop("checked");\n      para = para.concat(", DocumentQuery=").concat(_data.documentQuery);\n      if (chkSelectDoc.find(\'input\').prop("checked")) {\n        if (_data.AD_Table_ID == 0 || _data.Record_ID == 0) {\n          return;\n        }\n        para = para.concat(", AD_Table_ID=").concat(_data.AD_Table_ID).concat(", Record_ID=").concat(_data.Record_ID);\n      } else {\n        _data.DateFrom = vdtpkAccDateFrom.val();\n        if (_data.DateFrom != "") para = para.concat(", DateFrom=").concat(_data.DateFrom);\n        _data.DateTo = vdtpkAccDateTo.val();\n        if (_data.DateTo != "") para = para.concat(", DateTo=").concat(_data.DateTo);\n        kp = cmbOrg.getControl().find(\'option:selected\').val();\n        if (kp != null) {\n          _data.AD_Org_ID = kp;\n        }\n        para = para.concat(", AD_Org_ID=").concat(_data.AD_Org_ID);\n        var it = _data.whereInfo; //.Values.GetEnumerator();\n        if (it != null) {\n          for (var i = 0; i < it.length; i++) {\n            para = para.concat(", ").concat(it[i].Value);\n          }\n        }\n      }\n\n      //  Save Display Choices\n      _data.displayQty = chkQty.prop("checked");\n      para = para.concat(", - Display Qty=").concat(_data.displayQty);\n      _data.displaySourceAmt = chkDisSouce.prop("checked");\n      para = para.concat(", Source=").concat(_data.displaySourceAmt);\n      _data.displayDocumentInfo = chkDisDocinfo.prop("checked");\n      para = para.concat(", Doc=").concat(_data.displayDocumentInfo);\n      if (cmbSort1.getControl().find(\'option:selected\').val() != null) {\n        _data.sortBy1 = cmbSort1.getControl().find(\'option:selected\').val();\n      }\n      _data.group1 = chkSumriz1.prop("checked");\n      para = para.concat(" - Sorting: ").concat(_data.sortBy1).concat("/").concat(_data.group1);\n      if (cmbSort2.getControl().find(\'option:selected\').val() != null) {\n        _data.sortBy2 = cmbSort2.getControl().find(\'option:selected\').val();\n      }\n      _data.group2 = chkSumriz2.prop("checked");\n      para = para.concat(", ").concat(_data.sortBy2).concat("/").concat(_data.group2);\n      if (cmbSort3.getControl().find(\'option:selected\').val() != null) {\n        _data.sortBy3 = cmbSort3.getControl().find(\'option:selected\').val();\n      }\n      _data.group3 = chkSumriz3.prop("checked");\n      para = para.concat(", ").concat(_data.sortBy3).concat("/").concat(_data.group3);\n      if (cmbSort4.getControl().find(\'option:selected\').val() != null) {\n        _data.sortBy4 = cmbSort4.getControl().find(\'option:selected\').val();\n      }\n      _data.group4 = chkSumriz4.prop("checked");\n      para = para.concat(", ").concat(_data.sortBy4).concat("/").concat(_data.group4);\n\n      //pfreshT2.Enabled = false;\n      btnRefresh.Enabled = false;\n\n      //***********************************Set line text\n      lblstatusLine.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "Processing"));\n      /** show first tab in casde the form is opened from menu.  **/\n      if (!$self.getIsMenu()) {\n        tab2Select();\n      } else {\n        if (!Load) {\n          tab1Select();\n        } else {\n          $self.dGrid.refresh();\n          tab2Select();\n        }\n      }\n      Load = true;\n      //log.Config(para.ToString());\n      //Causes the currently executing thread object to temporarily pause \n      //and allow other threads to execute. \n      //setModel(_data.Query(VIS.Env.getCtx()));\n\n      //setTimeout(function () {\n      // var dataValue = _data.Query(AD_Client_ID);\n      var pNo = 1;\n      _data.Query(AD_Client_ID, callbackGetDataModel, resetPageCtrls, pNo);\n      //if (dataValues != null) {\n      if (_data.C_AcctSchema_ID > 0) {\n        //Here set the null to filter if old value and new value of control is same\n        if (_data.C_AcctSchema_ID == cmbAccSchemaFilter.oldValue) {\n          cmbAccSchemaFilter.setValue(null);\n        }\n        cmbAccSchemaFilter.setValue(_data.C_AcctSchema_ID);\n      }\n      //setModel(dataValues);\n      //    setBusy(false);\n      //};\n      //}, 2);\n      btnRefresh.Enabled = true;\n      //2nd tab status line text\n      lblstatusLine.getControl().text(VIS.Msg.getMsg("VIS_EnterSelctionAndDisplayToQueryFind"));\n    }\n    function callbackGetDataModel(dataValues) {\n      if (dataValues != null) {\n        setModel(dataValues);\n      }\n      ;\n      setBusy(false);\n    }\n    ;\n    //reset Page controls\n    function resetPageCtrls(psetting) {\n      cmbPage.empty();\n      if (psetting.TotalPage > 0) {\n        for (var i = 0; i < psetting.TotalPage; i++) {\n          cmbPage.append($("<option value=" + (i + 1) + ">" + (i + 1) + "</option>"));\n        }\n        cmbPage.val(psetting.CurrentPage);\n        if (psetting.TotalPage > psetting.CurrentPage) {\n          liNextPage.css("opacity", "1");\n          liLastPage.css("opacity", "1");\n        } else {\n          liNextPage.css("opacity", "0.6");\n          liLastPage.css("opacity", "0.6");\n        }\n        if (psetting.CurrentPage > 1) {\n          liFirstPage.css("opacity", "1");\n          liPrevPage.css("opacity", "1");\n        } else {\n          liFirstPage.css("opacity", "0.6");\n          liPrevPage.css("opacity", "0.6");\n        }\n        if (psetting.TotalPage == 1) {\n          liFirstPage.css("opacity", "0.6");\n          liPrevPage.css("opacity", "0.6");\n          liNextPage.css("opacity", "0.6");\n          liLastPage.css("opacity", "0.6");\n        }\n      } else {\n        liFirstPage.css("opacity", "0.6");\n        liPrevPage.css("opacity", "0.6");\n        liNextPage.css("opacity", "0.6");\n        liLastPage.css("opacity", "0.6");\n      }\n    }\n    function actionDocument() {\n      var doc = chkSelectDoc.find(\'input\').prop("checked");\n      if (doc) {\n        cmbSelectDoc.getControl().removeAttr("disabled");\n        btnSelctDoc.removeAttr("disabled");\n        btnSelctDocClear.removeAttr("disabled");\n        vdtpkAccDateFrom.attr(\'disabled\', \'disabled\');\n        vdtpkAccDateTo.attr(\'disabled\', \'disabled\');\n        cmbOrg.getControl().attr(\'disabled\', \'disabled\');\n        btnAccount.attr(\'disabled\', \'disabled\');\n        btnProduct.attr(\'disabled\', \'disabled\');\n        btnBPartner.attr(\'disabled\', \'disabled\');\n        btnProject.attr(\'disabled\', \'disabled\');\n        btnCampaning.attr(\'disabled\', \'disabled\');\n        btnOrgUnit.attr(\'disabled\', \'disabled\');\n        btnAccountClear.attr(\'disabled\', \'disabled\');\n        btnProductClear.attr(\'disabled\', \'disabled\');\n        btnBPartnerClear.attr(\'disabled\', \'disabled\');\n        btnProjectClear.attr(\'disabled\', \'disabled\');\n        btnCampaningClear.attr(\'disabled\', \'disabled\');\n        btnOrgUnitClear.attr(\'disabled\', \'disabled\');\n        btnSel5.attr(\'disabled\', \'disabled\');\n        btnSel6.attr(\'disabled\', \'disabled\');\n        btnSel7.attr(\'disabled\', \'disabled\');\n        btnSel8.attr(\'disabled\', \'disabled\');\n      } else {\n        cmbSelectDoc.getControl().attr(\'disabled\', \'disabled\');\n        btnSelctDoc.attr(\'disabled\', \'disabled\');\n        btnSelctDocClear.attr(\'disabled\', \'disabled\');\n        vdtpkAccDateFrom.removeAttr("disabled");\n        vdtpkAccDateTo.removeAttr("disabled");\n        cmbOrg.getControl().removeAttr("disabled");\n        btnAccount.removeAttr("disabled");\n        btnProduct.removeAttr("disabled");\n        btnBPartner.removeAttr("disabled");\n        btnProject.removeAttr("disabled");\n        btnCampaning.removeAttr("disabled");\n        btnOrgUnit.removeAttr("disabled");\n        btnAccountClear.removeAttr("disabled");\n        btnProductClear.removeAttr("disabled");\n        btnBPartnerClear.removeAttr("disabled");\n        btnProjectClear.removeAttr("disabled");\n        btnCampaningClear.removeAttr("disabled");\n        btnOrgUnitClear.removeAttr("disabled");\n        btnSel5.removeAttr("disabled");\n        btnSel6.removeAttr("disabled");\n        btnSel7.removeAttr("disabled");\n        btnSel8.removeAttr("disabled");\n      }\n    }\n    function actionTable() {\n      var vp = cmbSelectDoc.getControl().find(\'option:selected\').val();\n      if (vp != null) {\n        //_data.AD_Table_ID = _data.tableInfo[vp];\n        if (jQuery.grep(_data.tableInfo, function (person) {\n          return person.Name == vp;\n        })[0] != null) {\n          _data.AD_Table_ID = jQuery.grep(_data.tableInfo, function (person) {\n            return person.Name == vp;\n          })[0].Key;\n        }\n      }\n\n      //log.Config(vp + " = " + _data.AD_Table_ID);\n      //  Reset Record\n      // _data.Record_ID = 0;\n\n      btnSelctDoc.find(\'span\').text(\'\');\n      //btnSelctDoc.Name = vp + "_ID";\n      btnSelctDoc.attr("Name", vp + "_ID");\n      btnSelctDocClear.attr("Name", vp + "_ID");\n    }\n    function actionButton(button) {\n      /** Check if organization unit window is available or not on target DB. **/\n      if (_data.HasOrgUnit == null) {\n        checkHasOrgUnit();\n      }\n      var keyColumn = button.attr(\'name\'); //.name;\n      //log.Info(keyColumn);\n      var whereClause = "IsSummary=\'N\'";\n      var lookupColumn = keyColumn;\n      if (keyColumn.equals("Account_ID")) {\n        lookupColumn = "C_ElementValue_ID";\n        var ase = _data.getAcctSchemaElement("AC");\n        if (ase != null) {\n          whereClause += " AND C_Element_ID=" + ase.c_element_id;\n        }\n      } else if (keyColumn.equals("User1_ID")) {\n        lookupColumn = "C_ElementValue_ID";\n        var ase = _data.getAcctSchemaElement("U1");\n        if (ase != null) {\n          whereClause += " AND C_Element_ID=" + ase.c_element_id;\n        }\n      } else if (keyColumn.equals("User2_ID")) {\n        lookupColumn = "C_ElementValue_ID";\n        var ase = _data.getAcctSchemaElement("U2");\n        if (ase != null) {\n          whereClause += " AND C_Element_ID=" + ase.c_element_id;\n        }\n      } else if (chkSelectDoc.find(\'input\').prop("checked")) {\n        whereClause = "";\n      }\n      var tableName = lookupColumn.substring(0, lookupColumn.length - 3);\n      var info;\n      if (keyColumn == "M_Product_ID") {\n        info = new VIS.InfoWindow(101, "", _data.windowNo, "", false);\n      } else if (keyColumn == "C_BPartner_ID") {\n        info = new VIS.InfoWindow(100, "", _data.windowNo, "", false);\n      } else {\n        /** Check applied if to show the records from organization unit  **/\n        if (keyColumn == TRXORG) {\n          lookupColumn = ORG;\n          tableName = lookupColumn.substring(0, lookupColumn.length - 3);\n          if (_data.HasOrgUnit) {\n            whereClause += " AND (IsCostCenter=\'Y\' OR IsProfitCenter=\'Y\')";\n          }\n          info = new VIS.infoGeneral(true, _data.windowNo, "", tableName, lookupColumn, false, whereClause);\n        } else {\n          info = new VIS.infoGeneral(true, _data.windowNo, "", tableName, lookupColumn, false, whereClause);\n        }\n      }\n      info.onClose = function () {\n        //button.Text = "";\n        //_data.whereInfo.Add(keyColumn, "");\n        //return 0;\n\n        var selectSQL = null;\n        var key = info.getSelectedValues();\n        if (key != null && key.length > 0) {\n          selectSQL = lookupColumn + "=" + key.toString();\n        }\n        info = null;\n        if (selectSQL == null || selectSQL.length == 0 || key.length == 0) {\n          /** clear previous selection in case no selection is made from info window.  **/\n          cleardata(button);\n          return 0;\n        }\n\n        //  Save for query\n        if (button == btnSelctDoc)\n          //  Record_ID\n          {\n            _data.Record_ID = key;\n          } else {\n          /** clear previous selection in case a new selection is made from info window.  **/\n          cleardata(button);\n          _data.whereInfo.push({\n            \'Key\': keyColumn,\n            \'Value\': keyColumn + "=" + key\n          });\n        }\n        //VIS323 DevOpsID:1901 bind selected data on input controls\n        if (button.attr(\'id\') == "btnAccount_" + windowNo) {\n          $(\'#txtAccount_\' + windowNo).val(_data.getButtonText(tableName, lookupColumn, selectSQL));\n        }\n        if (button.attr(\'id\') == "btnOrgUnit_" + windowNo) {\n          $(\'#txtOrgUnit_\' + windowNo).val(_data.getButtonText(tableName, lookupColumn, selectSQL));\n        }\n        if (button.attr(\'id\') == "btnProduct_" + windowNo) {\n          $(\'#txtProduct_\' + windowNo).val(_data.getButtonText(tableName, lookupColumn, selectSQL));\n        }\n        if (button.attr(\'id\') == "btnBPartner_" + windowNo) {\n          $(\'#txtBPartner_\' + windowNo).val(_data.getButtonText(tableName, lookupColumn, selectSQL));\n        }\n        if (button.attr(\'id\') == "btnProject_" + windowNo) {\n          $(\'#txtProject_\' + windowNo).val(_data.getButtonText(tableName, lookupColumn, selectSQL));\n        }\n        //  Display Selection and resize\n        button.find(\'span\').text(_data.getButtonText(tableName, lookupColumn, selectSQL));\n        if (button.find(\'span\').text() != "") {\n          button.AutoSize = true;\n        } else {\n          button.Width = 44;\n        }\n        //pack();\n        return key;\n      };\n      info.show();\n    }\n    function actionRePost() {\n      VIS.ADialog.confirm("PostImmediate?", true, "", "Confirm", function (result) {\n        if (result) {\n          setBusy(true);\n          if (_data.documentQuery && _data.AD_Table_ID != 0 && _data.Record_ID != 0) {\n            var force = chkforcePost.prop("checked");\n\n            //check for old and new posting logic\n            checkPostingByNewLogic(function (result) {\n              var postingByNewLogic = false;\n              if (result == "Yes") {\n                postingByNewLogic = true;\n              }\n              if (window.FRPT && postingByNewLogic) {\n                var orgID = Number(VIS.context.getWindowTabContext(windowNo, 0, "AD_Org_ID"));\n                var docTypeID = Number(VIS.context.getWindowTabContext(windowNo, 0, "C_DocType_ID"));\n                $.ajax({\n                  url: VIS.Application.contextUrl + "FRPT/PostingLogicFRPT/PostImediateFRPT",\n                  dataType: "json",\n                  async: true,\n                  data: {\n                    \'AD_Client_ID\': _data.AD_Client_ID,\n                    \'AD_Table_ID\': _data.AD_Table_ID,\n                    \'Record_ID\': _data.Record_ID,\n                    \'force\': force,\n                    \'OrgID\': orgID,\n                    \'AD_Window_ID\': _AD_Window_ID,\n                    \'DocTypeID\': docTypeID\n                  },\n                  error: function (e) {\n                    setBusy(false);\n                    VIS.ADialog.info(VIS.Msg.getMsg(\'ERRORGettingPostingServer\'));\n                  },\n                  success: function (data) {\n                    if (data.result) {\n                      /*VIS_0045: Display Message on UI during Re-Post Document*/\n                      VIS.ADialog.info("", true, data.result, null);\n                      actionQuery();\n                    }\n                    setBusy(false);\n                  }\n                });\n              } else {\n                $.ajax({\n                  url: VIS.Application.contextUrl + "Posting/PostImmediate",\n                  dataType: "json",\n                  data: {\n                    AD_Client_ID: _data.AD_Client_ID,\n                    AD_Table_ID: _data.AD_Table_ID,\n                    Record_ID: _data.Record_ID,\n                    force: force\n                  },\n                  error: function (e) {\n                    setBusy(false);\n                    VIS.ADialog.info(VIS.Msg.getMsg(\'ERRORGettingPostingServer\'));\n                  },\n                  success: function (data) {\n                    if (data.result == "OK") {\n                      actionQuery();\n                    }\n                    setBusy(false);\n                  }\n                });\n              }\n            });\n          }\n          return true;\n        } else {\n          setBusy(false);\n          return false;\n        }\n      });\n    }\n    function checkPostingByNewLogic(callback) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "Posting/PostByNewLogic",\n        dataType: "json",\n        async: true,\n        data: {\n          AD_Client_ID: VIS.context.getAD_Client_ID()\n        },\n        error: function (e) {\n          alert(VIS.Msg.getMsg(\'ERRORGettingPostingServer\'));\n        },\n        success: function (data) {\n          if (callback) {\n            callback(data.result);\n          }\n        }\n      });\n    }\n    /** check if organization unit window available or not on the target DB. **/\n    function checkHasOrgUnit() {\n      $.ajax({\n        url: VIS.Application.contextUrl + "AcctViewerData/HasOrganizationUnit",\n        dataType: "json",\n        async: false,\n        error: function (e) {\n          alert(VIS.Msg.getMsg(\'ERROR\'));\n        },\n        success: function (data) {\n          if (data != null) {\n            _data.HasOrgUnit = data.result;\n          }\n        }\n      });\n    }\n    function fillComboBox(cntrl, vo) {\n      for (var i = 0; i < vo.length; i++) {\n        cntrl.append(" <option selected value=\'" + vo[i].Key + "\' >" + VIS.Utility.decodeText(vo[i].Name) + "</option>");\n      }\n      cntrl.prop(\'selectedIndex\', 0);\n\n      //if (vo.GetDefaultKey() != null)\n      //{\n      //    cb.SelectedItem = vo.GetDefaultKey();\n      //}\n    }\n    this.showDialog = function () {\n      initializeComponent();\n      setBusy(true);\n      tabT1 = $root.find("#lblquery_" + windowNo);\n      tabT2 = $root.find("#lblresult_" + windowNo);\n      /** load first tab in case form is opened from menu. **/\n      if (!$self.getIsMenu()) {\n        tab2Select();\n      } else {\n        tab1Select();\n      }\n      btnRePost.hide();\n      chkforcePost.hide();\n      btnPrint.hide();\n\n      /// setTimeout(function () {\n      jbInit();\n      events();\n      ///}, 2);\n\n      dynInit(_AD_Table_ID, _Record_ID);\n      $root.dialog({\n        modal: true,\n        resizable: false,\n        title: VIS.Msg.getMsg("AcctViewer"),\n        width: $(window).width() / 2 + $(window).width() / 2 / 2,\n        //height: $(window).height() - 200,\n        position: {\n          at: "center top",\n          of: window\n        },\n        close: function () {\n          if ($self.dGrid != null) {\n            $self.dGrid.destroy();\n            $self.dGrid = null;\n          }\n          $self.dispose();\n          $self = null;\n          $root.dialog("destroy");\n          $root = null;\n        }\n      });\n      // actionQuery();\n      //setBusy(false);\n    };\n    this.disposeComponent = function () {\n      if (btnRefresh) btnRefresh.off("click");\n      if (btnPrint) btnPrint.off("click");\n      if (btnRePost) btnRePost.off("click");\n      if (btnSelctDoc) btnSelctDoc.off("click");\n      if (btnAccount) btnAccount.off("click");\n      if (btnProduct) btnProduct.off("click");\n      if (btnBPartner) btnBPartner.off("click");\n      if (btnProject) btnProject.off("click");\n      if (btnCampaning) btnCampaning.off("click");\n      if (btnSelctDocClear) btnSelctDocClear.off("click");\n      if (btnAccountClear) btnAccountClear.off("click");\n      if (btnProductClear) btnProductClear.off("click");\n      if (btnBPartnerClear) btnBPartnerClear.off("click");\n      if (btnProjectClear) btnProjectClear.off("click");\n      if (btnCampaningClear) btnCampaningClear.off("click");\n      if (btnOrgUnitClear) btnOrgUnitClear.off("click");\n      if (btnOrgUnit) btnOrgUnit.off("click");\n      _AD_Client_ID = null;\n      _AD_Table_ID = null;\n      _Record_ID = null;\n      ;\n      windowNo = null;\n      ;\n      this.arrListColumns = null;\n      this.dGrid = null;\n      ACCT_SCHEMA = null;\n      DOC_TYPE = null;\n      POSTING_TYPE = null;\n      ORG = null;\n      ACCT = null;\n      SELECT_DOCUMENT = null;\n      ACCT_DATE = null;\n      src = null;\n      srcRefresh = null;\n      srcPrint = null;\n      btnRefresh = null;\n      btnPrint = null;\n      btnRePost = null;\n      btnExportExcel = null;\n      btnSelctDoc = null;\n      btnAccount = null;\n      btnProduct = null;\n      btnBPartner = null;\n      btnProject = null;\n      btnCampaning = null;\n      btnSelctDocClear = null;\n      btnAccountClear = null;\n      btnProductClear = null;\n      btnBPartnerClear = null;\n      btnProjectClear = null;\n      btnCampaningClear = null;\n      cmbAccSchema = null;\n      cmbAccSchemaFilter = null;\n      cmbPostType = null;\n      cmbOrg = null;\n      cmbSelectDoc = null;\n      cmbSort1 = null;\n      cmbSort2 = null;\n      cmbSort3 = null;\n      cmbSort4 = null;\n      lblAccSchema = null;\n      lblAccSchemaFilter = null;\n      lblPostType = null;\n      lblAccDate = null;\n      ;\n      lblAccDateTo = null;\n      lblOrg = null;\n      lblAcc = null;\n      lblProduct = null;\n      lblBP = null;\n      lblProject = null;\n      lblCompaning = null;\n      lblSort = null;\n      lblSumrise = null;\n      lblSel5 = null;\n      lblSel6 = null;\n      lblSel7 = null;\n      lblSel8 = null;\n      btnSel5 = null;\n      btnSel6 = null;\n      btnSel7 = null;\n      btnSel8 = null;\n      lblstatusLine = null;\n      groupBox1 = null;\n      groupBox2 = null;\n      tabT1 = null;\n      tabT2 = null;\n      chkSelectDoc = null;\n      chkQty = null;\n      chkforcePost = null;\n      chkDisDocinfo = null;\n      chkDisSouce = null;\n      chkSumriz1 = null;\n      chkSumriz2 = null;\n      chkSumriz3 = null;\n      chkSumriz4 = null;\n      vdtpkAccDateFrom = null;\n      vdtpkAccDateTo = null;\n      topDiv = null;\n      leftSideDiv = null;\n      rightSideDiv = null;\n      div = null;\n      bottumDiv = null;\n      resultDiv = null;\n      leftSideDivWidth = null;\n      rightSideDivWidth = null;\n      selectDivHeight = null;\n      _data = null;\n      $busyDiv = null;\n      this.disposeComponent = null;\n    };\n  }\n  ;\n  AcctViewer.prototype.dispose = function () {\n    this.disposeComponent();\n  };\n  /** Set proprty if form opened from menu **/\n  AcctViewer.prototype.setIsMenu = function (isMenuForm) {\n    if (isMenuForm != null && isMenuForm != undefined) {\n      this.menuForm = isMenuForm;\n    }\n  };\n  AcctViewer.prototype.getIsMenu = function () {\n    return this.menuForm;\n  };\n\n  //Load form into VIS\n  VIS.AcctViewer = AcctViewer;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/acctviewer.js?\n}')},"./Areas/VAS/Scripts/app/forms/acctviewermenu.js":()=>{eval('{;\nVIS = window.VIS || {};\n;\n(function (VIS, $) {\n  VIS.AcctViewerMenu = function () {\n    this.frame;\n    this.windowNo;\n    var $bsyDiv;\n    var $selfObject = this; //scoped self pointer\n    var _btnResult = "";\n    var $root = $(\'<div>\');\n\n    /** Initialize the structure of form. **/\n    this.initalize = function () {\n      // Added button to trigger click event to close the dailog\n      $root.append(\'<a id="VIS_btnResult_\' + $selfObject.windowNo + \'">button</a>\');\n      _btnResult = $root.find("#VIS_btnResult_" + $selfObject.windowNo);\n      bindEvents();\n    };\n\n    /** Method to open the account viewer form called on init. **/\n    this.openAccountViewer = function () {\n      // Open account viewer form \n      //_btnResult.trigger("click");\n\n      var obj = new VIS.AcctViewer(VIS.context.getAD_Client_ID(), 1, 1, this.windowNo, 1);\n      if (obj != null) {\n        obj.setIsMenu(true);\n        obj.showDialog();\n      }\n      //obj = null;\n\n      //Click event for button\n      //window.setTimeout(function () {\n      _btnResult.trigger("click");\n      //  }, 10);\n    };\n\n    /** Create busy indicator **/\n    function createBusyIndicator() {\n      $bsyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n      //$bsyDiv.css({\n      //    "position": "absolute", "width": "98%", "height": "97%", \'text-align\': \'center\', \'z-index\': \'999\'\n      //});\n    }\n    ;\n\n    /** Initialize events of controls **/\n    function bindEvents() {\n      _btnResult.on("click", function () {\n        $selfObject.frame.dispose();\n      });\n    }\n    this.getRoot = function () {\n      return $root;\n    };\n  };\n  VIS.AcctViewerMenu.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    //$($(this.frame.parent.getContentGrid()).parent()).parent().css("display", "none");\n    this.windowNo = windowNo;\n    this.initalize();\n    this.openAccountViewer();\n    this.frame.getContentGrid().append(this.getRoot());\n  };\n  VIS.AcctViewerMenu.prototype.dispose = function () {\n    this.disposeComponent();\n    this.frame = null;\n  };\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/acctviewermenu.js?\n}')},"./Areas/VAS/Scripts/app/forms/createforecast.js":()=>{eval("{/********************************************************\r\n * Module Name    :     Application\r\n * Purpose        :     Create Forecast Line (On Team Master / master Forecast )\r\n * Author         :     Amit Bansal\r\n * Date           :     03-Oct-2021\r\n  ******************************************************/\n;\n(function (VIS, $) {\n  VIS.AForms = VIS.AForms || {};\n  function createforecast() {\n    this.frame;\n    this.windowNo;\n    var $self = this;\n    var $root = $(\"<div style='height:100%;background-color:white;' class='vis-forms-container' >\");\n    var $bsyDiv = $('<div class=\"vis-busyindicatorouterwrap\"><div class=\"vis-busyindicatorinnerwrap\"><i class=\"vis-busyindicatordiv\"></i></div></div>');\n    var ctx = VIS.Env.getCtx();\n    var $mainpageContent = null;\n    var $formWrap = null;\n    var $formDataRow = null;\n    var $formData = null;\n\n    // controls of fields\n    var divOrganizationCtrl;\n    var _OrganizationLookUp;\n    var _OrganizationCtrl;\n    var divPeriodCtrl;\n    var _PeriodLookUp;\n    var _PeriodCtrl;\n    var divIncludeSOCtrl;\n    var _IncludeSOCtrl;\n    var divDocumentTypeCtrl;\n    var _DocumentTypeLookUp;\n    var _DocumentTypeCtrl;\n    var divIncludeOpenSalesOrderCtrl;\n    var _IncludeOpenSalesOrderCtrl;\n    var divOpenSalesOrderCtrl;\n    var _OpenSalesOrderLookUp;\n    var _OpenSalesOrderCtrl;\n    var divIncludeOpportunityCtrl;\n    var _IncludeOpportunityCtrl;\n    var divOpportunityCtrl;\n    var _OpportunityLookUp;\n    var _OpportunityCtrl;\n    var divTeamForecastCtrl;\n    var _TeamForecastLookUp;\n    var _TeamForecastCtrl;\n    var _TeamForecast_ID = 0;\n    var divBudgetForecastCtrl;\n    var _BudgetForecastLookUp;\n    var _BudgetForecastCtrl;\n    var _budgetForecast_ID = 0;\n    var divProductCategoryCtrl;\n    var _ProductCategoryLookUp;\n    var _ProductCategoryCtrl;\n    var divSalesPriceListCtrl;\n    var _SalesPriceListLookUp;\n    var _SalesPriceListCtrl;\n    var divBudgetQuantityCtrl;\n    var _BudgetQuantityCtrl;\n    var divGenerateLines;\n    var _GenerateLines;\n    var $actionPanel = null;\n    var $buttons = null;\n    var $btnOk = null;\n    var $btnCancel = null;\n    var $btnApply = null;\n    this.ad_table_ID;\n    this.ad_window_ID;\n    this.record_ID;\n    var AD_Org_ID = VIS.context.getWindowContextAsInt($self.windowNo, \"AD_Org_ID\", false);\n    var AD_Client_ID = VIS.context.getWindowContextAsInt($self.windowNo, \"AD_Client_ID\", false);\n    var isMasterForecast = false;\n    var isBudgetForecast = false;\n    var elements = [\"AD_Org_ID\", \"C_Period_ID\", \"C_DocType_ID\", \"M_Product_Category_ID\", \"TeamForecast\", \"MasterForecast\", \"M_PriceList_ID\"];\n    VIS.translatedTexts = VIS.Msg.translate(VIS.Env.getCtx(), elements, true);\n    this.Initialize = function () {\n      busyDiv(true);\n      loadWindowAndRecordInfo();\n      createMainView();\n      GetControls();\n      loadControls();\n      bindEvents();\n      busyDiv(false);\n    };\n\n    /** Set Height of Form */\n    this.setHeight = function () {\n      if (isMasterForecast) {\n        367;\n      } else if (isBudgetForecast) {\n        402;\n      } else {\n        352;\n      }\n    };\n\n    /** set width of form */\n    this.setWidth = function () {\n      return 635;\n    };\n\n    /**Load org value and check window (Either team forecast and master Forecast) and Team Forecast reference  */\n    function loadWindowAndRecordInfo() {\n      var data = VIS.dataContext.getJSONData(VIS.Application.contextUrl + \"ForecastForm/GetTableAndRecordInfo\", {\n        \"AD_Table_ID\": $self.ad_table_ID,\n        \"AD_Record_ID\": $self.record_ID\n      });\n      if (data != null) {\n        AD_Org_ID = VIS.Utility.Util.getValueOfInt(data[\"AD_Org_ID\"]);\n        isMasterForecast = VIS.Utility.Util.getValueOfString(data[\"Table_Name\"]) == \"C_MasterForecast\" ? true : false;\n        isBudgetForecast = VIS.Utility.Util.getValueOfString(data[\"Table_Name\"]) == \"VA073_SalesForecast\" ? true : false;\n        _TeamForecast_ID = VIS.Utility.Util.getValueOfInt(data[\"TeamColumn_ID\"]);\n        _budgetForecast_ID = VIS.Utility.Util.getValueOfInt(data[\"BudgetColumn_ID\"]);\n      }\n    }\n    ;\n\n    /** Is used to design Forecast Form */\n    function createMainView() {\n      $mainpageContent = $('<div class=\"vis-budget-main-wrap vis-formouterwrpdiv\">');\n\n      // Row 1\n      $formWrap = $('<div class=\"vis-budget-form-wrap\">');\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_Organization_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      // Row 2\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_Period_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      // Row 3\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_IncludeSO_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      // Row 4\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_DocumentType_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      // Row 5\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_IncludeOpenSalesOrder_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      // Row 6\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_OpenSalesOrder_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      // Row 7\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_IncludeOpportunity_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      // Row 8\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_Opportunity_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      // Row 8.1\n      if (isMasterForecast) {\n        $formDataRow = $('<div class=\"vis-budget-form-row\">');\n        $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_TeamForecast_' + $self.windowNo + '\">');\n        $formDataRow.append($formData);\n        $formWrap.append($formDataRow);\n      }\n      // Row 8.2\n      if (isBudgetForecast) {\n        $formDataRow = $('<div class=\"vis-budget-form-row\">');\n        $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_BudgetForecast_' + $self.windowNo + '\">');\n        $formDataRow.append($formData);\n        $formWrap.append($formDataRow);\n      }\n\n      // Row 9\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_ProductCategory_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      // Row 9.2\n      if (isBudgetForecast) {\n        $formDataRow = $('<div class=\"vis-budget-form-row\">');\n        $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_PriceList_' + $self.windowNo + '\">');\n        $formDataRow.append($formData);\n        $formWrap.append($formDataRow);\n      }\n\n      // Row 10\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_BudgetQuantity_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      // Row 11\n      $formDataRow = $('<div class=\"vis-budget-form-row\">');\n      $formData = $('<div class=\"input-group vis-input-wrap\" id=\"VIS_GenerateLines_' + $self.windowNo + '\">');\n      $formDataRow.append($formData);\n      $formWrap.append($formDataRow);\n\n      //Action \n      $actionPanel = $('<div class=\"VIS_buttons-wrap .vis-budget-buttons-wrap\">');\n      $buttons = $('<div class=\"pull-right\">');\n      $btnOk = $('<span class=\"btn vis-budget-buttons-wrap-span\">' + VIS.Msg.translate(ctx, \"VIS_OK\") + '</span>');\n      $btnCancel = $('<span class=\"btn vis-budget-buttons-wrap-span\">' + VIS.Msg.translate(ctx, \"Cancel\") + '</span>');\n      $btnApply = $('<span class=\"btn vis-budget-buttons-wrap-span\">' + VIS.Msg.translate(ctx, \"Apply\") + '</span>');\n      $buttons.append($btnOk).append($btnApply).append($btnCancel);\n      $actionPanel.append($buttons);\n      $mainpageContent.append($formWrap).append($actionPanel);\n      $root.append($mainpageContent).append($bsyDiv);\n    }\n    ;\n\n    /**Get Controls  */\n    function GetControls() {\n      divOrganizationCtrl = $root.find(\"#VIS_Organization_\" + $self.windowNo);\n      divPeriodCtrl = $root.find(\"#VIS_Period_\" + $self.windowNo);\n      divIncludeSOCtrl = $root.find(\"#VIS_IncludeSO_\" + $self.windowNo);\n      divDocumentTypeCtrl = $root.find(\"#VIS_DocumentType_\" + $self.windowNo);\n      divIncludeOpenSalesOrderCtrl = $root.find(\"#VIS_IncludeOpenSalesOrder_\" + $self.windowNo);\n      divOpenSalesOrderCtrl = $root.find(\"#VIS_OpenSalesOrder_\" + $self.windowNo);\n      divIncludeOpportunityCtrl = $root.find(\"#VIS_IncludeOpportunity_\" + $self.windowNo);\n      divOpportunityCtrl = $root.find(\"#VIS_Opportunity_\" + $self.windowNo);\n      if (isMasterForecast) {\n        divTeamForecastCtrl = $root.find(\"#VIS_TeamForecast_\" + $self.windowNo);\n      }\n      if (isBudgetForecast) {\n        divBudgetForecastCtrl = $root.find(\"#VIS_BudgetForecast_\" + $self.windowNo);\n        divSalesPriceListCtrl = $root.find(\"#VIS_PriceList_\" + $self.windowNo);\n      }\n      divProductCategoryCtrl = $root.find(\"#VIS_ProductCategory_\" + $self.windowNo);\n      divBudgetQuantityCtrl = $root.find(\"#VIS_BudgetQuantity_\" + $self.windowNo);\n      divGenerateLines = $root.find(\"#VIS_GenerateLines_\" + $self.windowNo);\n    }\n    ;\n\n    /**Load Controls */\n    function loadControls() {\n      // Organization\n      //ctx, windowNo, column_ID, AD_Reference_ID, columnName, AD_Reference_Value_ID, isParent, validationCode\n      _OrganizationLookUp = VIS.MLookupFactory.get(ctx, $self.windowNo, AD_Org_ID, VIS.DisplayType.Search, \"AD_Org_ID\", 0, false, \"AD_Org_ID.IsActive = 'Y'\");\n      // columnname, Mandatory, ReadOnly, Updateable, DisplayType, lookup\n      _OrganizationCtrl = new VIS.Controls.VTextBoxButton(\"AD_Org_ID\", true, false, false, VIS.DisplayType.Search, _OrganizationLookUp);\n      var _OrgCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      var _OrgBtnWrap = $('<div class=\"input-group-append\">');\n      divOrganizationCtrl.append(_OrgCtrlWrap);\n      _OrgCtrlWrap.append(_OrganizationCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.translatedTexts.AD_Org_ID + '</label>');\n      divOrganizationCtrl.append(_OrgBtnWrap);\n      _OrgBtnWrap.append(_OrganizationCtrl.getBtn(0));\n      var validation = \"C_Period.IsActive='Y' AND C_Period.C_Year_ID  IN \" + \" (Select C_Year_ID FROM C_Year WHERE C_Calendar_ID = \" + \" ((SELECT AD_OrgInfo.C_Calendar_ID FROM AD_OrgInfo WHERE AD_OrgInfo.AD_Org_ID = \" + AD_Org_ID + \")) \" + \" OR (EXISTS(SELECT 1 FROM AD_OrgInfo WHERE AD_OrgInfo.AD_Org_ID = \" + AD_Org_ID + \" AND AD_OrgInfo.C_Calendar_ID IS NULL) AND \" + \" (C_Calendar_ID = (SELECT AD_ClientInfo.C_Calendar_ID FROM AD_ClientInfo WHERE AD_ClientInfo.AD_Client_ID = \" + AD_Client_ID + \"))) \" + \" AND C_year.IsActive = 'Y') and C_Period.Startdate < SYSDATE ORDER BY C_Period.C_Period_ID\";\n      _PeriodLookUp = VIS.MLookupFactory.get(ctx, $self.windowNo, 1004891, VIS.DisplayType.Search, \"C_Period_ID\", 0, false, validation);\n      _PeriodCtrl = new VIS.Controls.VTextBoxButton(\"C_Period_ID\", true, false, true, VIS.DisplayType.Search, _PeriodLookUp);\n      var _PeriodCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      var _PeriodBtnWrap = $('<div class=\"input-group-append\">');\n      divPeriodCtrl.append(_PeriodCtrlWrap);\n      _PeriodCtrlWrap.append(_PeriodCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.translatedTexts.C_Period_ID + '</label>');\n      divPeriodCtrl.append(_PeriodBtnWrap);\n      _PeriodBtnWrap.append(_PeriodCtrl.getBtn(0));\n      _PeriodBtnWrap.append(_PeriodCtrl.getBtn(1));\n      _PeriodCtrl.getControl().prop('disabled', true);\n      _PeriodCtrl.getBtn(0).prop('disabled', true);\n      _PeriodCtrl.getBtn(1).prop('disabled', true);\n\n      ////columnName, mandatory, isReadOnly, isUpdateable, text, description, tableEditor\n      _IncludeSOCtrl = new VIS.Controls.VCheckBox(\"IncludeSO\", false, false, true, VIS.Msg.getMsg(\"IncludeSO\"), null);\n      var _IncludeSOCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      divIncludeSOCtrl.append(_IncludeSOCtrlWrap);\n      _IncludeSOCtrlWrap.append(_IncludeSOCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' '));\n      validation = \"C_DocType.IsActive = 'Y' AND C_DocType.DocBaseType IN ('SOO', 'POO', 'BOO') AND C_DocType.IsSOTrx = 'Y' AND \" + \" C_DocType.IsReturnTrx = 'N' AND  C_DocType.IsSalesQuotation = 'N' AND C_DocType.IsBlanketTrx = 'N' \" + \" AND C_DocType.AD_Org_ID IN (0, \" + AD_Org_ID + \") \";\n      _DocumentTypeLookUp = VIS.MLookupFactory.get(ctx, $self.windowNo, 2173, VIS.DisplayType.TableDir, \"C_DocType_ID\", 0, false, validation);\n      _DocumentTypeCtrl = new VIS.Controls.VComboBox(\"C_DocType_ID\", false, false, true, _DocumentTypeLookUp, 50);\n      _DocumentTypeCtrl.getControl().prop('disabled', true);\n      var _DocTypeCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      divDocumentTypeCtrl.append(_DocTypeCtrlWrap);\n      _DocTypeCtrlWrap.append(_DocumentTypeCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.translatedTexts.C_DocType_ID + '</label>');\n      _IncludeOpenSalesOrderCtrl = new VIS.Controls.VCheckBox(\"IncludeOpenSO\", false, false, true, VIS.Msg.getMsg(\"IncludeOpenSO\"), null);\n      var _IncludeOpenSOCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      divIncludeOpenSalesOrderCtrl.append(_IncludeOpenSOCtrlWrap);\n      _IncludeOpenSOCtrlWrap.append(_IncludeOpenSalesOrderCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' '));\n      validation = \"C_Order.DocStatus IN ('CO') AND C_Order.IsSOTrx = 'Y' AND \" + \" C_Order.IsReturnTrx = 'N' AND  C_Order.IsSalesQuotation = 'N' AND C_Order.IsBlanketTrx = 'N' AND C_Order.AD_Org_ID IN (0, \" + AD_Org_ID + \")\";\n      _OpenSalesOrderLookUp = VIS.MLookupFactory.get(ctx, $self.windowNo, 2213, VIS.DisplayType.MultiKey, \"C_Order_ID\", 0, false, validation);\n      _OpenSalesOrderCtrl = new VIS.Controls.VTextBoxButton(\"C_Order_ID\", true, false, true, VIS.DisplayType.MultiKey, _OpenSalesOrderLookUp);\n      _OpenSalesOrderCtrl.getControl().prop('disabled', true);\n      _OpenSalesOrderCtrl.getBtn(0).prop('disabled', true);\n      _OpenSalesOrderCtrl.getBtn(1).prop('disabled', true);\n      _OpenSalesOrderCtrl.setCustomInfo('Budget_OpenSalesOrder');\n      var _OpenSOCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      var _openSOBtnWrap = $('<div class=\"input-group-append\">');\n      divOpenSalesOrderCtrl.append(_OpenSOCtrlWrap);\n      _OpenSOCtrlWrap.append(_OpenSalesOrderCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.Msg.getMsg(\"OpenSO\") + '</label>');\n      divOpenSalesOrderCtrl.append(_openSOBtnWrap);\n      _openSOBtnWrap.append(_OpenSalesOrderCtrl.getBtn(0));\n      _openSOBtnWrap.append(_OpenSalesOrderCtrl.getBtn(1));\n      _IncludeOpportunityCtrl = new VIS.Controls.VCheckBox(\"IncludeOpportunity\", false, false, true, VIS.Msg.getMsg(\"IncludeOpportunity\"), null);\n      var _IncludeOpportunityCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      divIncludeOpportunityCtrl.append(_IncludeOpportunityCtrlWrap);\n      _IncludeOpportunityCtrlWrap.append(_IncludeOpportunityCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' '));\n      validation = \"C_Project.IsActive = 'Y' AND C_Project.IsOpportunity = 'Y' AND C_Project.AD_Org_ID IN (0, \" + AD_Org_ID + \")\";\n      _OpportunityLookUp = VIS.MLookupFactory.get(ctx, $self.windowNo, 5766, VIS.DisplayType.MultiKey, \"C_Project_ID\", 0, false, validation);\n      _OpportunityCtrl = new VIS.Controls.VTextBoxButton(\"C_Project_ID\", true, false, true, VIS.DisplayType.MultiKey, _OpportunityLookUp);\n      _OpportunityCtrl.getControl().prop('disabled', true);\n      _OpportunityCtrl.getBtn(0).prop('disabled', true);\n      _OpportunityCtrl.getBtn(1).prop('disabled', true);\n      _OpportunityCtrl.setCustomInfo('Budget_Opportunity');\n      var _OpportunityCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      var _OpportunityBtnWrap = $('<div class=\"input-group-append\">');\n      divOpportunityCtrl.append(_OpportunityCtrlWrap);\n      _OpportunityCtrlWrap.append(_OpportunityCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.Msg.getMsg(\"Opportunity\") + '</label>');\n      divOpportunityCtrl.append(_OpportunityBtnWrap);\n      _OpportunityBtnWrap.append(_OpportunityCtrl.getBtn(0));\n      _OpportunityBtnWrap.append(_OpportunityCtrl.getBtn(1));\n      if (isMasterForecast) {\n        validation = \" C_Forecast.AD_Org_ID IN (0, \" + AD_Org_ID + \") AND C_Forecast.DocStatus IN ('CO', 'CL')\";\n        _TeamForecastLookUp = VIS.MLookupFactory.get(ctx, $self.windowNo, _TeamForecast_ID, VIS.DisplayType.MultiKey, \"C_Forecast_ID\", 0, false, validation);\n        ;\n        _TeamForecastCtrl = new VIS.Controls.VTextBoxButton(\"C_Forecast_ID\", true, false, true, VIS.DisplayType.MultiKey, _TeamForecastLookUp);\n        _TeamForecastCtrl.setCustomInfo('Budget_TeamForecast');\n        var _TeamForecastCtrlWrap = $('<div class=\"vis-control-wrap\">');\n        var _TeamForecastBtnWrap = $('<div class=\"input-group-append\">');\n        divTeamForecastCtrl.append(_TeamForecastCtrlWrap);\n        _TeamForecastCtrlWrap.append(_TeamForecastCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.translatedTexts.TeamForecast + '</label>');\n        divTeamForecastCtrl.append(_TeamForecastBtnWrap);\n        _TeamForecastBtnWrap.append(_TeamForecastCtrl.getBtn(0));\n        _TeamForecastBtnWrap.append(_TeamForecastCtrl.getBtn(1));\n      }\n      if (isBudgetForecast) {\n        validation = \" C_MasterForecast.AD_Org_ID IN (0, \" + AD_Org_ID + \") AND C_MasterForecast.DocStatus IN ('CO', 'CL')\";\n        _BudgetForecastLookUp = VIS.MLookupFactory.get(ctx, $self.windowNo, _budgetForecast_ID, VIS.DisplayType.MultiKey, \"C_MasterForecast_ID\", 0, false, validation);\n        ;\n        _BudgetForecastCtrl = new VIS.Controls.VTextBoxButton(\"C_MasterForecast_ID\", true, false, true, VIS.DisplayType.MultiKey, _BudgetForecastLookUp);\n        var _BudgetForecastCtrlWrap = $('<div class=\"vis-control-wrap\">');\n        var _BudgetForecastBtnWrap = $('<div class=\"input-group-append\">');\n        divBudgetForecastCtrl.append(_BudgetForecastCtrlWrap);\n        _BudgetForecastCtrlWrap.append(_BudgetForecastCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.translatedTexts.MasterForecast + '</label>');\n        divBudgetForecastCtrl.append(_BudgetForecastBtnWrap);\n        _BudgetForecastBtnWrap.append(_BudgetForecastCtrl.getBtn(0));\n        _BudgetForecastBtnWrap.append(_BudgetForecastCtrl.getBtn(1));\n      }\n      validation = \"M_Product_Category.IsActive = 'Y' AND M_Product_Category.AD_Org_ID IN (0, \" + AD_Org_ID + \")\";\n      _ProductCategoryLookUp = VIS.MLookupFactory.get(ctx, $self.windowNo, 2012, VIS.DisplayType.MultiKey, \"M_Product_Category_ID\", 0, false, validation);\n      ;\n      _ProductCategoryCtrl = new VIS.Controls.VTextBoxButton(\"M_Product_Category_ID\", true, false, true, VIS.DisplayType.MultiKey, _ProductCategoryLookUp);\n      var _ProductCategoryCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      var _ProductCategoryBtnWrap = $('<div class=\"input-group-append\">');\n      divProductCategoryCtrl.append(_ProductCategoryCtrlWrap);\n      _ProductCategoryCtrlWrap.append(_ProductCategoryCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.translatedTexts.M_Product_Category_ID + '</label>');\n      divProductCategoryCtrl.append(_ProductCategoryBtnWrap);\n      _ProductCategoryBtnWrap.append(_ProductCategoryCtrl.getBtn(0));\n      _ProductCategoryBtnWrap.append(_ProductCategoryCtrl.getBtn(1));\n      _ProductCategoryCtrl.fireValueChanged = function () {\n        _ProductCategoryCtrl.getControl().trigger(\"change\");\n      };\n      if (isBudgetForecast) {\n        //Price list  Control\n        validation = \"M_PriceList.IsActive = 'Y' AND M_PriceList.IsSOPriceList='Y' AND M_PriceList.AD_Org_ID IN (0, \" + AD_Org_ID + \")\";\n        _SalesPriceListLookUp = VIS.MLookupFactory.get(ctx, $self.windowNo, 2100, VIS.DisplayType.Search, \"M_PriceList_ID\", 0, false, validation);\n        ;\n        _SalesPriceListCtrl = new VIS.Controls.VTextBoxButton(\"M_PriceList_ID\", true, false, true, VIS.DisplayType.Search, _SalesPriceListLookUp);\n        var SalesPriceListCtrlWrap = $('<div class=\"vis-control-wrap\">');\n        var _SalesPriceListBtnWrap = $('<div class=\"input-group-append\">');\n        divSalesPriceListCtrl.append(SalesPriceListCtrlWrap);\n        SalesPriceListCtrlWrap.append(_SalesPriceListCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.translatedTexts.M_PriceList_ID + '</label>');\n        divSalesPriceListCtrl.append(_SalesPriceListBtnWrap);\n        _SalesPriceListBtnWrap.append(_SalesPriceListCtrl.getBtn(0));\n        _SalesPriceListBtnWrap.append(_SalesPriceListCtrl.getBtn(1));\n        _SalesPriceListCtrl.getControl().prop('disabled', true);\n      }\n      _BudgetQuantityCtrl = new VIS.Controls.VAmountTextBox(\"BudgetQuantity\", false, false, true, 50, 100, VIS.DisplayType.Quantity);\n      _BudgetQuantityCtrl.getControl().prop('disabled', true);\n      var _BudgetQuantityCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      divBudgetQuantityCtrl.append(_BudgetQuantityCtrlWrap);\n      _BudgetQuantityCtrlWrap.append(_BudgetQuantityCtrl.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' ')).append('<label>' + VIS.Msg.getMsg(\"BudgetQuantity\") + '</label>');\n\n      //$formDataR = $('<div class=\"vis-budget-form-col2\">');\n      _GenerateLines = new VIS.Controls.VCheckBox(\"GenerateLines\", false, false, true, VIS.Msg.getMsg(\"GenerateLines\"), null);\n      var _GenerateLinesCtrlWrap = $('<div class=\"vis-control-wrap\">');\n      divGenerateLines.append(_GenerateLinesCtrlWrap);\n      _GenerateLinesCtrlWrap.append(_GenerateLines.getControl().attr('placeholder', ' ').attr('data-placeholder', '').attr('data-hasbtn', ' '));\n    }\n    ;\n\n    /** Events handling*/\n    function bindEvents() {\n      // set value on Organization control, if value is defined there\n      _OrganizationCtrl.setValue(AD_Org_ID);\n      _IncludeSOCtrl.getControl().on(\"click\", function (ev) {\n        // when Include Sales Order True, then make the document type as selectable\n        _DocumentTypeCtrl.getControl().prop('disabled', _IncludeSOCtrl.getValue() ? false : true);\n        _PeriodCtrl.getControl().prop('disabled', _IncludeSOCtrl.getValue() ? false : true);\n        _PeriodCtrl.getBtn(0).prop('disabled', _IncludeSOCtrl.getValue() ? false : true);\n        _PeriodCtrl.getBtn(1).prop('disabled', _IncludeSOCtrl.getValue() ? false : true);\n        // when document type contain values, but user mark Include SO false after selection, then make it as null\n        if (!_IncludeSOCtrl.getValue()) {\n          _DocumentTypeCtrl.setValue();\n          _PeriodCtrl.setValue();\n        }\n\n        // Disable Product Category, if include open SO selected as true and vice versa\n        _ProductCategoryCtrl.getControl().trigger(\"change\");\n      });\n      _IncludeOpenSalesOrderCtrl.getControl().on(\"click\", function (ev) {\n        // when Include Open Sales Order True, then make the Open Sales Order as selectable\n        _OpenSalesOrderCtrl.getControl().prop('disabled', _IncludeOpenSalesOrderCtrl.getValue() ? false : true);\n        _OpenSalesOrderCtrl.getBtn(0).prop('disabled', _IncludeOpenSalesOrderCtrl.getValue() ? false : true);\n        _OpenSalesOrderCtrl.getBtn(1).prop('disabled', _IncludeOpenSalesOrderCtrl.getValue() ? false : true);\n\n        // when Open Sales Order contain values, but user mark Include Open SO false after selection, then make it as null\n        if (!_IncludeOpenSalesOrderCtrl.getValue()) {\n          _OpenSalesOrderCtrl.setValue();\n        }\n\n        // Disable Product Category, if include open SO selected as true and vice versa\n        _ProductCategoryCtrl.getControl().trigger(\"change\");\n      });\n      _IncludeOpportunityCtrl.getControl().on(\"click\", function (ev) {\n        // when Include Opportunity True, then make the Opportunity as selectable\n        _OpportunityCtrl.getControl().prop('disabled', _IncludeOpportunityCtrl.getValue() ? false : true);\n        _OpportunityCtrl.getBtn(0).prop('disabled', _IncludeOpportunityCtrl.getValue() ? false : true);\n        _OpportunityCtrl.getBtn(1).prop('disabled', _IncludeOpportunityCtrl.getValue() ? false : true);\n\n        // when Opportunity contain values, but user mark Include Opportunity false after selection, then make it as null\n        if (!_IncludeOpportunityCtrl.getValue()) {\n          _OpportunityCtrl.setValue();\n        }\n\n        // Disable Product Category, if include open SO selected as true and vice versa\n        _ProductCategoryCtrl.getControl().trigger(\"change\");\n      });\n      _ProductCategoryCtrl.getControl().on(\"change\", function (ev) {\n        // Disable Product Category, if any checbox as true and vice versa\n        _ProductCategoryCtrl.getControl().prop('disabled', _IncludeOpenSalesOrderCtrl.getValue() || _IncludeOpportunityCtrl.getValue() || _IncludeSOCtrl.getValue() ? true : false);\n        _ProductCategoryCtrl.getBtn(0).prop('disabled', _IncludeOpenSalesOrderCtrl.getValue() || _IncludeOpportunityCtrl.getValue() || _IncludeSOCtrl.getValue() ? true : false);\n        _ProductCategoryCtrl.getBtn(1).prop('disabled', _IncludeOpenSalesOrderCtrl.getValue() || _IncludeOpportunityCtrl.getValue() || _IncludeSOCtrl.getValue() ? true : false);\n\n        // clear Product Category Control if satisfied\n        _IncludeOpenSalesOrderCtrl.getValue() || _IncludeOpportunityCtrl.getValue() || _IncludeSOCtrl.getValue() ? _ProductCategoryCtrl.setValue() : \"\";\n\n        // when product category contains value then make the budget field as editabled and vice versa\n        if (_ProductCategoryCtrl.getValue() != undefined || VIS.Utility.Util.getValueOfString(_ProductCategoryCtrl.getValue()) != \"\") {\n          _BudgetQuantityCtrl.getControl().prop('disabled', false);\n          _SalesPriceListCtrl.getControl().prop('disabled', false);\n        } else {\n          _BudgetQuantityCtrl.getControl().prop('disabled', true);\n          _BudgetQuantityCtrl.getControl().val(0);\n          _SalesPriceListCtrl.getControl().prop('disabled', true);\n        }\n      });\n\n      // Create Lines and close the form \n      $btnOk.on(\"click\", function () {\n        busyDiv(true);\n        var TeamForecast_ID = 0;\n        var MasterForecast_ID = 0;\n        var SalesPriceList_ID = 0;\n        if (isMasterForecast) {\n          TeamForecast_ID = _TeamForecastCtrl.getValue();\n        }\n        if (isBudgetForecast) {\n          MasterForecast_ID = _BudgetForecastCtrl.getValue();\n          SalesPriceList_ID = _SalesPriceListCtrl.getValue();\n        }\n        // Incase of Product category BudgetQuantity should be \n        if (_ProductCategoryCtrl.getValue() != undefined || VIS.Utility.Util.getValueOfString(_ProductCategoryCtrl.getValue()) != \"\") {\n          if (VIS.Utility.Util.getValueOfDecimal(_BudgetQuantityCtrl.getValue()) == 0) {\n            VIS.ADialog.info(\"SelectBudgetQunatity\");\n            busyDiv(false);\n            return false;\n          }\n          if (isBudgetForecast && VIS.Utility.Util.getValueOfDecimal(_SalesPriceListCtrl.getValue()) == 0) {\n            VIS.ADialog.info(\"SelectPriceList\");\n            busyDiv(false);\n            return false;\n          }\n        }\n        GenerateForecastLines(TeamForecast_ID, MasterForecast_ID, SalesPriceList_ID, function (result) {\n          VIS.ADialog.info(\"\", \"\", JSON.parse(result));\n          busyDiv(false);\n          // close Form\n          $self.frame.close();\n        });\n      });\n\n      //Create Lines but donot close form \n      $btnApply.on(\"click\", function () {\n        busyDiv(true);\n        var TeamForecast_ID = 0;\n        var MasterForecast_ID = 0;\n        var SalesPriceList_ID = 0;\n        if (isMasterForecast) {\n          TeamForecast_ID = _TeamForecastCtrl.getValue();\n        }\n        if (isBudgetForecast) {\n          MasterForecast_ID = _BudgetForecastCtrl.getValue();\n          SalesPriceList_ID = _SalesPriceListCtrl.getValue();\n        }\n        // Incase of Product category BudgetQuantity should be \n        if (_ProductCategoryCtrl.getValue() != undefined || VIS.Utility.Util.getValueOfString(_ProductCategoryCtrl.getValue()) != \"\") {\n          if (VIS.Utility.Util.getValueOfDecimal(_BudgetQuantityCtrl.getValue()) == 0) {\n            VIS.ADialog.info(\"SelectBudgetQunatity\");\n            busyDiv(false);\n            return false;\n          }\n          if (isBudgetForecast && VIS.Utility.Util.getValueOfDecimal(_SalesPriceListCtrl.getValue()) == 0) {\n            VIS.ADialog.info(\"SelectPriceList\");\n            busyDiv(false);\n            return false;\n          }\n        }\n        GenerateForecastLines(TeamForecast_ID, MasterForecast_ID, SalesPriceList_ID, function (result) {\n          VIS.ADialog.info(\"\", \"\", JSON.parse(result));\n          busyDiv(false);\n        });\n      });\n      // Close Form\n      $btnCancel.on(\"click\", function () {\n        $self.frame.close();\n      });\n    }\n    ;\n\n    /** Generate Team forecast lines */\n    function GenerateForecastLines(TeamForecast_ID, MasterForecast_ID, SalesPriceList_ID, callback) {\n      $.ajax({\n        url: VIS.Application.contextUrl + \"ForecastForm/CreateForecastLine\",\n        type: \"POST\",\n        dataType: \"json\",\n        async: true,\n        //  contentType: \"application/json; charset=utf-8\",\n        data: {\n          Org_ID: _OrganizationCtrl.getValue(),\n          Period_ID: _PeriodCtrl.getValue(),\n          IncludeSO: _IncludeSOCtrl.getValue(),\n          DocType: _DocumentTypeCtrl.getValue(),\n          IncludeOpenSO: _IncludeOpenSalesOrderCtrl.getValue(),\n          OpenOrders: _OpenSalesOrderCtrl.getValue(),\n          IncludeOpportunity: _IncludeOpportunityCtrl.getValue(),\n          Opportunity: _OpportunityCtrl.getValue(),\n          ProductCategory: _ProductCategoryCtrl.getValue(),\n          BudgetQunatity: _BudgetQuantityCtrl.getValue(),\n          DeleteAndGenerateLines: _GenerateLines.getValue(),\n          Forecast_ID: $self.record_ID,\n          TeamForecast_IDS: TeamForecast_ID,\n          Table_ID: $self.ad_table_ID,\n          IsMasterForecast: isMasterForecast,\n          IsBudgetForecast: isBudgetForecast,\n          MasterForecast_IDs: MasterForecast_ID,\n          SalesPriceList_ID: SalesPriceList_ID\n        },\n        success: function (result) {\n          callback(result);\n        },\n        error: function (ex) {\n          console.log(ex);\n          busyDiv(false);\n          VIS.ADialog.error(\"Error\");\n        }\n      });\n    }\n\n    /** Busy Indicator */\n    function busyDiv(Value) {\n      if (Value) {\n        $bsyDiv[0].style.visibility = 'visible';\n      } else {\n        $bsyDiv[0].style.visibility = 'hidden';\n      }\n    }\n    ;\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /** Dispose Components/Variables */\n    this.disposeComponent = function () {\n      $self = null;\n      $root = null;\n      $bsyDiv = null;\n      $mainpageContent = null;\n      $formWrap = null;\n      $formDataRow = null;\n      $formData = null;\n      $actionPanel = null;\n      $buttons = null;\n      $btnOk = null;\n      $btnCancel = null;\n      divOrganizationCtrl = null;\n      _OrganizationLookUp = null;\n      _OrganizationCtrl = null;\n      divPeriodCtrl = null;\n      _PeriodLookUp = null;\n      _PeriodCtrl = null;\n      divIncludeSOCtrl = null;\n      _IncludeSOCtrl = null;\n      divDocumentTypeCtrl = null;\n      _DocumentTypeLookUp = null;\n      _DocumentTypeCtrl = null;\n      divIncludeOpenSalesOrderCtrl = null;\n      _IncludeOpenSalesOrderCtrl = null;\n      divOpenSalesOrderCtrl = null;\n      _OpenSalesOrderLookUp = null;\n      _OpenSalesOrderCtrl = null;\n      divIncludeOpportunityCtrl = null;\n      _IncludeOpportunityCtrl = null;\n      divOpportunityCtrl = null;\n      _OpportunityLookUp = null;\n      _OpportunityCtrl = null;\n      divTeamForecastCtrl = null;\n      _TeamForecastLookUp = null;\n      _TeamForecastCtrl = null;\n      divProductCategoryCtrl = null;\n      _ProductCategoryLookUp = null;\n      _ProductCategoryCtrl = null;\n      divBudgetQuantityCtrl = null;\n      _BudgetQuantityCtrl = null;\n      divGenerateLines = null;\n      _GenerateLines = null;\n    };\n\n    /** Intialize Form\r\n     * @param {any} windowNo\r\n     * @param {any} frame\r\n     */\n    createforecast.prototype.init = function (windowNo, frame) {\n      this.frame = frame;\n      this.windowNo = windowNo;\n      this.ad_table_ID = this.frame.getAD_Table_ID();\n      this.ad_window_ID = this.frame.getAD_Window_ID();\n      this.record_ID = this.frame.getRecord_ID();\n      this.Initialize();\n      this.frame.getContentGrid().append(this.getRoot());\n    };\n\n    /** Must implement dispose */\n    createforecast.prototype.dispose = function () {\n      /*CleanUp Code */\n      //dispose this component\n      this.disposeComponent();\n\n      //call frame dispose function\n      this.frame = null;\n    };\n  }\n  ;\n  VIS.AForms.createforecast = createforecast;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/createforecast.js?\n}")},"./Areas/VAS/Scripts/app/forms/glDimensionValue.js":()=>{eval('{/********************************************************\r\n * Module Name    :     Application\r\n * Purpose        :     GL Dimension Value.\r\n * Author         :     Amit Bansal\r\n * Date           :     03-Oct-2019\r\n  ******************************************************/\n;\n(function (VIS, $) {\n  VIS.AForms = VIS.AForms || {};\n  function glDimensionValue() {\n    this.frame;\n    this.windowNo;\n    var $self = this;\n    var $root = $("<div style=\'height:100%;background-color:white;\' class=\'vis-forms-container\' >");\n    //var $bsyDiv = $("<div class=\'vis-apanel-busy\' style=\'height:100%;position:relative;z-index: 2\'>");\n    var $bsyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n    var ctx = VIS.Env.getCtx();\n    var $mainpageContent = null;\n    var $formWrap = null;\n    var $formDataRow = null;\n    var $formData = null;\n\n    // label value of user element column\n    var $lblUserElement = null;\n    // dimension value of user element\n    var $infoUserElement = null;\n    var $actionPanel = null;\n    var $buttons = null;\n    var $btnOk = null;\n    var $btnCancel = null;\n    this.Initialize = function () {\n      busyDiv(true);\n      createMainView();\n      bindEvents();\n      busyDiv(false);\n    };\n\n    /** Set Height of Form */\n    this.setHeight = function () {\n      return 235;\n    };\n\n    /** set width of form */\n    this.setWidth = function () {\n      return 368;\n    };\n\n    /** Is used to design GL Dimension Value Form */\n    function createMainView() {\n      $mainpageContent = $(\'<div class="vis-gl-main-wrap">\');\n\n      // get User Element Column ID\n      var paramStr = VIS.context.getWindowContext($self.windowNo, "AD_Column_ID", true);\n      if (paramStr == "") {\n        VIS.ADialog.error("VIS_DimensionColNotSelected", true, "", "");\n        return false;\n      }\n\n      // get User Element Column Name\n      var columnName = VIS.dataContext.getJSONRecord("GlJournall/ColumnName", paramStr);\n\n      // Row 1\n      $formWrap = $(\'<div class="vis-gl-form-wrap">\');\n      $formDataRow = $(\'<div class="vis-gl-form-row">\');\n      $formData = $(\'<div class="vis-gl-form-col">\');\n      $lblUserElement = $(\'<label>\' + VIS.Msg.translate(ctx, columnName) + \'</label>\');\n      $formData.append($lblUserElement);\n      $formDataR = $(\'<div class="vis-gl-form-col2">\');\n      var valueInfo = VIS.MLookupFactory.getMLookUp(ctx, $self.windowNo, VIS.Utility.Util.getValueOfString(paramStr), VIS.DisplayType.Search);\n      $infoUserElement = new VIS.Controls.VTextBoxButton(columnName, false, false, true, VIS.DisplayType.Search, valueInfo);\n      $formDataR.append($(\'<div>\').append($infoUserElement).append($infoUserElement.getControl()).append($infoUserElement.getBtn(0)));\n      $formDataRow.append($formData).append($formDataR);\n      $formWrap.append($formDataRow);\n\n      //Action \n      $actionPanel = $(\'<div class="VIS_buttons-wrap .vis-gl-buttons-wrap">\');\n      $buttons = $(\'<div class="pull-right">\');\n      $btnOk = $(\'<span class="btn vis-gl-buttons-wrap-span">\' + VIS.Msg.translate(ctx, "VIS_OK") + \'</span>\');\n      $btnCancel = $(\'<span class="btn vis-gl-buttons-wrap-span">\' + VIS.Msg.translate(ctx, "Cancel") + \'</span>\');\n      $buttons.append($btnOk).append($btnCancel);\n      $actionPanel.append($buttons);\n      $mainpageContent.append($formWrap).append($actionPanel);\n      $root.append($mainpageContent).append($bsyDiv);\n    }\n    ;\n\n    /** Events handling*/\n    function bindEvents() {\n      // set value on Dimenssion control, if value is defined there\n      var DimensionId = VIS.context.getWindowContextAsInt($self.windowNo, "DimensionValue", true);\n      if (DimensionId > 0) {\n        $infoUserElement.setValue(DimensionId);\n      }\n\n      // Set Dimenssion value\n      $btnOk.on("click", function () {\n        busyDiv(true);\n        if ($infoUserElement.getValue() == null) {\n          busyDiv(false);\n          VIS.ADialog.error("VIS_DimensionNotSelected", true, "", "");\n          return false;\n        }\n        ;\n\n        // Get Record Id\n        var recordId = VIS.context.getWindowContext($self.windowNo, "GL_LineDimension_ID", true);\n\n        // Get Selecetd Dimenssion value\n        var paramStr = recordId.toString().concat(",", $infoUserElement.getValue().toString());\n\n        // Update record with Dimenssion Value\n        var result = VIS.dataContext.getJSONRecord("GlJournall/SaveDimensionReference", paramStr);\n        if (result <= 0) {\n          busyDiv(false);\n          VIS.ADialog.error("VIS_NotSaved", true, "", "");\n          return false;\n        } else {\n          VIS.ADialog.info("VIS_Saved", true, "", "");\n        }\n        busyDiv(false);\n\n        // close Form\n        $self.frame.close();\n      });\n\n      // Close Form\n      $btnCancel.on("click", function () {\n        $self.frame.close();\n      });\n    }\n    ;\n\n    /** Busy Indicator */\n    function busyDiv(Value) {\n      if (Value) {\n        $bsyDiv[0].style.visibility = \'visible\';\n      } else {\n        $bsyDiv[0].style.visibility = \'hidden\';\n      }\n    }\n    ;\n    this.getRoot = function () {\n      return $root;\n    };\n\n    /** Dispose Components/Variables */\n    this.disposeComponent = function () {\n      $self = null;\n      $root = null;\n      $bsyDiv = null;\n      $mainpageContent = null;\n      $formWrap = null;\n      $formDataRow = null;\n      $formData = null;\n      $lblUserElement = null;\n      $infoUserElement = null;\n      $actionPanel = null;\n      $buttons = null;\n      $btnOk = null;\n      $btnCancel = null;\n    };\n  }\n  ;\n\n  /** Intialize Form\r\n   * @param {any} windowNo\r\n   * @param {any} frame\r\n   */\n  glDimensionValue.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.Initialize();\n    this.frame.getContentGrid().append(this.getRoot());\n  };\n\n  /** Must implement dispose */\n  glDimensionValue.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    this.frame = null;\n  };\n  VIS.AForms.glDimensionValue = glDimensionValue;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/glDimensionValue.js?\n}')},"./Areas/VAS/Scripts/app/forms/vBOMdrop.js":()=>{eval('{/********************************************************\r\n * Module Name    : VIS\r\n * Purpose        : Create BOM Drop Form\r\n * Class Used     : \r\n * Chronological Development\r\n * Sarbjit Kaur     14 May 2015\r\n ******************************************************/\n;\nVIS = window.VIS || {};\n;\n(function (VIS, $) {\n  VIS.Apps.AForms = VIS.Apps.AForms || {};\n  function VBOMDrop() {\n    this.windowNo = null;\n    var $root = $("<div style=\'width: 100%; height: 100%; background-color: white;\'>");\n    var $self = this;\n    var $divContainer = null;\n    var $divPInfo = null;\n    var $divBOMLines = null;\n    var $divProduct = null;\n    var $divInvoice = null;\n    var $divOrder = null;\n    var $divOpportunity = null;\n    var $divQuantity = null;\n    var $divProcessBOM = null;\n    var $cmbProduct = null;\n    var $cmbInvoice = null;\n    var $cmbOrder = null;\n    var $cmbOpportunity = null;\n    var $txtQuantity = null;\n    var $btnOK = null;\n    var $btnCancel = null;\n    var $divBusy = null;\n    var BOMLinesData = [];\n    var $btnRequery = null;\n    this.initialize = function () {\n      busyIndicator();\n      isBusy(true);\n      window.setTimeout(function () {\n        customDesign();\n      }, 20);\n    };\n    //*****************\n    //Load BusyDiv\n    //*****************\n    function busyIndicator() {\n      $divBusy = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n      //$divBusy.css({\n      //    "position": "absolute", "bottom": "0", "background": "url(\'" + VIS.Application.contextUrl + "Areas/VIS/Images/busy.gif\') no-repeat", "background-position": "center center",\n      //    "width": "98%", "height": "98%", \'text-align\': \'center\', \'opacity\': \'.1\', \'z-index\': \'9999999\'\n      //});\n      $divBusy[0].style.visibility = "hidden";\n      $root.append($divBusy);\n    }\n    ;\n    //*****************\n    //Show/Hide Busy Indicator\n    //*****************\n    function isBusy(show) {\n      if (show) {\n        $divBusy[0].style.visibility = "visible";\n      } else {\n        $divBusy[0].style.visibility = "hidden";\n      }\n    }\n    ;\n    //******************\n    //Custom Design of BOM Drop Form\n    //******************\n    function customDesign() {\n      var height = $(window).height() * (92 / 100);\n      $divContainer = $("<div class=\'vis-mainContainer\'>");\n      var designPInfo = " <div class=\'vis-pSelectInfo vis-leftsidebarouterwrap\'>" // div pSelectInfo starts here\n      + "<div class=\'vis-pSelectInner\'>" + " <div class=\'vis-paymentselect-field\'>" // div Product starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <select id=\'VIS_cmbProduct_" + $self.windowNo + "\'></select>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "M_Product_ID") + " </label>" + "</div></div>" + " </div>" // div Product ends here \n      + " <div class=\'vis-paymentselect-field\'>" // div Invoice starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <select id=\'VIS_cmbinvoice_" + $self.windowNo + "\'></select>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "C_Invoice_ID") + " </label>" + "</div></div>" + " </div>" // div Invoice ends here \n      + " <div class=\'vis-paymentselect-field\'>" // div Order starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <select id=\'VIS_cmbOrder_" + $self.windowNo + "\'></select>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "C_Order_ID") + " </label>" + "</div></div>" + " </div>" // div Order ends here \n      + " <div class=\'vis-paymentselect-field\'>" // div Project/Opportunity starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <select id=\'VIS_cmbOpportunity_" + $self.windowNo + "\'></select>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "C_Project_ID") + " </label>" + "</div></div>" + " </div>" // div Project/Opportunity ends here                             \n      + " <div class=\'vis-paymentselect-field\'>" // div Quantity starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <input data-placeholder=\'\' placeholder=\' \' type=\'number\' id=\'VIS_txtQuantity_" + $self.windowNo + "\' min=\'0\' MaxLength=\'50\'>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "Qty") + "</label>" + "</div></div>" + " </div>" // div Quantity ends here \n      + " </div>" // div vis-pSelectInner ends here\n      + " <div class=\'vis-paymentselect-field\'>" // div btnRefresh starts here\n      + " <button class=\'VIS_Pref_btn-2\'  id=\'VIS_btnRefresh_" + $self.windowNo + "\' style=\'margin-top: 0px;\'><i class=\'vis vis-refresh\'></i></button>" + " </div>" // div btnRefresh ends here \n      + " </div>"; // div pSelectInfo ends here \n      $divBOMLines = $("<div class=\'vis-pSelectIionGrid\'>");\n      var designPProcess = " <div class=\'vis-pSelectProcess\'>" // div pSelectProcess starts here\n      + " <div class=\'vis-paymentselect-field\'>" // div starts here    \n      + " <input id=\'VIS_btnCancel_" + $self.windowNo + "\' class=\'vis-frm-btn\' type=\'submit\' value=\'" + VIS.Msg.getMsg("Cancel") + "\' ></input>" + " <input id=\'VIS_btnOK_" + $self.windowNo + "\' disabled class=\'vis-frm-btn\' type=\'submit\' value=\'" + VIS.Msg.getMsg("OK") + "\' ></input>" + " </div>" // div pSelectButtons ends here \n      + " </div>"; // div pSelectProcess ends here \n      $divContainer.append($(designPInfo)).append($divBOMLines).append($(designPProcess));\n      $root.append($divContainer);\n      findControls();\n    }\n    ;\n    //******************\n    //Find Controls through ID\n    //******************\n    function findControls() {\n      $cmbProduct = $(\'#VIS_cmbProduct_\' + $self.windowNo);\n      $cmbInvoice = $(\'#VIS_cmbinvoice_\' + $self.windowNo);\n      $cmbOrder = $(\'#VIS_cmbOrder_\' + $self.windowNo);\n      $cmbOpportunity = $(\'#VIS_cmbOpportunity_\' + $self.windowNo);\n      $txtQuantity = $(\'#VIS_txtQuantity_\' + $self.windowNo);\n      $btnCancel = $(\'#VIS_btnCancel_\' + $self.windowNo);\n      $btnOK = $(\'#VIS_btnOK_\' + $self.windowNo);\n      $btnRequery = $(\'#VIS_btnRefresh_\' + $self.windowNo);\n      loadFormData();\n      eventHandling();\n    }\n    ;\n    //******************\n    //EventHandling\n    //******************\n    function eventHandling() {\n      //**On click of Requery Button**//\n      $btnRequery.on("click", function () {\n        isBusy(true);\n        $divBOMLines.empty();\n        window.setTimeout(function () {\n          loadFormData();\n          isBusy(false);\n        }, 20);\n      });\n\n      //**On click of OK Button**//\n      $btnOK.on("click", function () {\n        //isBusy(true);\n        //window.setTimeout(function () {\n        saveBOMLines();\n        //    isBusy(false);\n        //}, 20);\n      });\n\n      //**On click of Cancel Button**//\n      $btnCancel.on("click", function () {\n        $self.dispose();\n      });\n\n      //**On change of Product($cmbProduct) **//\n      $cmbProduct.on("change", function () {\n        if ($cmbProduct.val() > 0) {\n          $btnOK.removeAttr("disabled");\n        } else {\n          $btnOK.attr("disabled", true);\n        }\n        isBusy(true);\n        window.setTimeout(function () {\n          getBOMLines();\n        }, 20);\n      });\n\n      //**On change of Invoice($cmbProduct) **//\n      $cmbInvoice.on("change", function () {\n        if ($cmbInvoice.val() > 0) {\n          if ($cmbProduct.val() > 0) {\n            $btnOK.removeAttr("disabled");\n          }\n          $cmbOrder.attr("disabled", true);\n          $cmbOpportunity.attr("disabled", true);\n        } else {\n          $btnOK.attr("disabled", true);\n          $cmbOrder.removeAttr("disabled");\n          $cmbOpportunity.removeAttr("disabled");\n        }\n      });\n\n      //**On change of Order($cmbOrder) **//\n      $cmbOrder.on("change", function () {\n        if ($cmbOrder.val() > 0) {\n          if ($cmbProduct.val() > 0) {\n            $btnOK.removeAttr("disabled");\n          }\n          $cmbInvoice.attr("disabled", true);\n          $cmbOpportunity.attr("disabled", true);\n        } else {\n          $btnOK.attr("disabled", true);\n          $cmbInvoice.removeAttr("disabled");\n          $cmbOpportunity.removeAttr("disabled");\n        }\n      });\n\n      //**On change of Opportunity($cmbOpportunity) **//\n      $cmbOpportunity.on("change", function () {\n        if ($cmbOpportunity.val() > 0) {\n          if ($cmbProduct.val() > 0) {\n            $btnOK.removeAttr("disabled");\n          }\n          $cmbOrder.attr("disabled", true);\n          $cmbInvoice.attr("disabled", true);\n        } else {\n          $btnOK.attr("disabled", true);\n          $cmbOrder.removeAttr("disabled");\n          $cmbInvoice.removeAttr("disabled");\n        }\n      });\n\n      //** On text changed of Quantity\n      $txtQuantity.on("change", function () {\n        for (var i = 0; i < $($divBOMLines[0]).children().length; i++) {\n          var prevValue = BOMLinesData[i].BOMQty;\n          $($($($($divBOMLines[0]).children()[i]).children()[0]).children()[1]).attr("Value", prevValue * $txtQuantity.val());\n        }\n      });\n    }\n    ;\n    //******************\n    //Load Data on Form Load\n    //******************\n    function loadFormData() {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VBOMDrop/GetDetail",\n        async: false,\n        datatype: "Json",\n        type: "GET",\n        cache: false,\n        success: function (jsonResult) {\n          var data = JSON.parse(jsonResult);\n          controlsData = data;\n          if (data != null || data != undefined) {\n            fillData(data);\n          }\n          isBusy(false);\n        },\n        error: function (e) {\n          console.log(e);\n          isBusy(false);\n        }\n      });\n    }\n    ;\n    //******************\n    //Fill Data in Controls\n    //******************\n    function fillData(data) {\n      //* Load Product\n      if (data.Product != null || data.Product.length > 0) {\n        $cmbProduct.empty();\n        $cmbProduct.append($(\'<Option value="-1"></option>\'));\n        for (var i in data.Product) {\n          $cmbProduct.append($(\'<Option value="\' + data.Product[i].ID + \'">\' + data.Product[i].Value + \'</option>\'));\n        }\n      }\n\n      //* Load Invoice\n      if (data.Invoice != null || data.Invoice.length > 0) {\n        $cmbInvoice.empty();\n        $cmbInvoice.append($(\'<Option value="-1"></option>\'));\n        for (var i in data.Invoice) {\n          $cmbInvoice.append($(\'<Option value="\' + data.Invoice[i].ID + \'">\' + data.Invoice[i].Value + \'</option>\'));\n        }\n      }\n\n      //* Load Order\n      if (data.Order != null || data.Order.length > 0) {\n        $cmbOrder.empty();\n        $cmbOrder.append($(\'<Option value="-1"></option>\'));\n        for (var i in data.Order) {\n          $cmbOrder.append($(\'<Option value="\' + data.Order[i].ID + \'">\' + data.Order[i].Value + \'</option>\'));\n        }\n      }\n\n      //* Load Opportunity\n      if (data.Opportunity != null || data.Opportunity.length > 0) {\n        $cmbOpportunity.empty();\n        $cmbOpportunity.append($(\'<Option value="-1"></option>\'));\n        for (var i in data.Opportunity) {\n          $cmbOpportunity.append($(\'<Option value="\' + data.Opportunity[i].ID + \'">\' + data.Opportunity[i].Value + \'</option>\'));\n        }\n      }\n      isBusy(false);\n    }\n    ;\n    //******************\n    //Get BOM Lines\n    //******************\n    function getBOMLines() {\n      $txtQuantity.val("");\n      $.ajax({\n        url: VIS.Application.contextUrl + "VBOMDrop/GetBOMLines",\n        async: false,\n        datatype: "Json",\n        type: "GET",\n        cache: false,\n        data: {\n          productID: parseInt($cmbProduct.val())\n        },\n        success: function (jsonResult) {\n          var data = JSON.parse(jsonResult);\n          controlsData = data;\n          if (data != null || data != undefined) {\n            debugger;\n            createBOMLines(data);\n          } else {\n            $divBOMLines.empty();\n          }\n          isBusy(false);\n        },\n        error: function (e) {\n          console.log(e);\n          isBusy(false);\n        }\n      });\n    }\n    ;\n    //******************\n    //Create BOM Lines\n    //******************\n    function createBOMLines(data) {\n      var BOMlines = "";\n      $divBOMLines.empty();\n      var chkbox = "";\n      var txtqty = "";\n      var isAlternate = false;\n      BOMLinesData = data;\n      for (var i = 0; i < data.length; i++) {\n        BOMlines = "";\n        if (data[i].BOMType == \'P\') {\n          chkbox = "<input type=\'checkbox\' checked disabled id=\'VIS_chkBOMLine_" + i + "\' style=\'height: 15px;width: auto;\'></input>";\n          txtqty = "<input type=\'number\' id=\'VIS_qtyBOMLine_" + i + "\' style=\'background: pink;width:200%;\' min=\'0\' value=\'" + data[i].BOMQty + "\'></input>";\n        } else if (data[i].BOMType == \'O\') {\n          chkbox = "<input type=\'checkbox\' id=\'VIS_chkBOMLine_" + i + "\' style=\'height: 15px;width: auto;\'></input>";\n          txtqty = "<input type=\'number\' disabled id=\'VIS_qtyBOMLine_" + i + "\' style=\'background: #FFF5FF;width:200%;\'  min=\'0\' value=\'" + data[i].BOMQty + "\'></input>";\n        } else {\n          if (!isAlternate) {\n            chkbox = " <input type=\'radio\' name=\'vis-radiolist\' checked id=\'VIS_chkBOMLine_" + i + "\' style=\'height: 15px;width: auto;\'></input>";\n            txtqty = "<input type=\'number\' id=\'VIS_qtyBOMLine_" + i + "\' style=\'background: pink;width:200%;\' min=\'0\' value=\'" + data[i].BOMQty + "\'></input>";\n          } else {\n            chkbox = " <input type=\'radio\' name=\'vis-radiolist\' id=\'VIS_chkBOMLine_" + i + "\' style=\'height: 15px;width: auto;\'></input>";\n            txtqty = "<input type=\'number\' disabled id=\'VIS_qtyBOMLine_" + i + "\' style=\'background: #FFF5FF;width:200%;\' min=\'0\' value=\'" + data[i].BOMQty + "\'></input>";\n          }\n        }\n        BOMlines += "<div class=\'vis-bomlinesdata\'>" + " <div style=\'float:left;width: 50%;\'>" + " <label style=\'margin: 5px;width:100%;\'>" + data[i].ProductName + "</label>" + txtqty + " </div>" + " <div style=\'float:right;\'>" + chkbox + " <label style=\'margin-right:5px;\'>" + data[i].BOMTypeName + "</label>" + " </div>" + " </div>";\n        $divBOMLines.append($(BOMlines));\n        $("#VIS_chkBOMLine_" + i).on("click", function (e) {\n          var $txtbxQty = $($($($(this).parent()).parent().children()[0]).children()[1]);\n          if ($(this).prop("checked")) {\n            $txtbxQty.css("background", "pink");\n            $txtbxQty.removeAttr("disabled");\n          } else {\n            $txtbxQty.css("background", "#FFF5FF");\n            $txtbxQty.attr("disabled", true);\n          }\n        });\n      }\n    }\n    ;\n    //*******************\n    //Save BOM Lines in DB\n    //*******************\n    function saveBOMLines() {\n      var param = [];\n      param.push($cmbProduct.val());\n      param.push($cmbInvoice.val());\n      param.push($cmbOrder.val());\n      param.push($cmbOpportunity.val());\n      for (var i = 0; i < $($divBOMLines[0]).children().length; i++) {\n        var isselected = $($($($($divBOMLines[0]).children()[i]).children()[1]).children()[0]).prop("checked");\n        if (isselected) {\n          BOMLinesData[i].IsSelected = true;\n          BOMLinesData[i].BOMQty = $($($($($divBOMLines[0]).children()[i]).children()[0]).children()[1]).val();\n        } else {\n          BOMLinesData[i].IsSelected = false;\n        }\n      }\n      param.push(JSON.stringify(BOMLinesData));\n      $.ajax({\n        url: VIS.Application.contextUrl + "VBOMDrop/SaveRecord",\n        async: false,\n        datatype: "Json",\n        type: "POST",\n        cache: false,\n        contentType: \'application/json; charset=utf-8\',\n        data: JSON.stringify(param),\n        success: function (jsonResult) {\n          if (JSON.parse(jsonResult)) {\n            $self.dispose();\n          } else {\n            VIS.ADialog.info("RecordNotSaved");\n          }\n        },\n        error: function (e) {\n          console.log(e);\n          isBusy(false);\n        }\n      });\n    }\n    ;\n    //*******************\n    //Get Root\n    //*******************\n    this.getRoot = function () {\n      return $root;\n    };\n    //********************\n    //Dispose Component\n    //********************\n    this.disposeComponent = function () {\n      $root = null;\n      $self = null;\n      $divContainer = null;\n      $divPInfo = null;\n      $divBOMLines = null;\n      $divProduct = null;\n      $divInvoice = null;\n      $divOrder = null;\n      $divOpportunity = null;\n      $divQuantity = null;\n      $divProcessBOM = null;\n      $cmbProduct = null;\n      $cmbInvoice = null;\n      $cmbOrder = null;\n      $cmbOpportunity = null;\n      $txtQuantity = null;\n      $btnOK = null;\n      $btnCancel = null;\n      $divBusy = null;\n      BOMLinesData = null;\n    };\n  }\n  ;\n\n  //Must Implement with same parameter\n  VBOMDrop.prototype.init = function (windowNo, frame) {\n    //Assign to this Varable\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.frame.getContentGrid().append(this.getRoot());\n    this.initialize();\n  };\n\n  //Must implement dispose\n  VBOMDrop.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VIS.Apps.AForms.VBOMDrop = VBOMDrop;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vBOMdrop.js?\n}')},"./Areas/VAS/Scripts/app/forms/vallocation.js":()=>{eval('{;\n(function (VIS, $) {\n  function VAllocation() {\n    this.frame = null;\n    this.windowNo = 0;\n    var ctx = VIS.Env.getCtx();\n    var $self = this;\n    var $root = $(\'<div class="vis-allocate-root vis-forms-container">\');\n    var $row1 = $(\'<div class="vis-leftpanel-wrapper vis-pad-0 vis-leftsidebarouterwrap">\');\n    //set height of filters div and Process Button div\n    var $innerRow = $(\'<div class="vis-leftpanel-inn-wrap">\');\n    var rowContiner = $(\'<div class="vis-allocation-rightContainer vis-formouterwrpdiv">\');\n    var $row2 = $(\'<div class="vis-allocate-paymentdiv" >\');\n    var $row3 = $(\'<div class="vis-allocate-cashdiv" >\');\n    var $row4 = $(\'<div class="vis-allocate-invoicediv" >\');\n    //added GL Grid for GL Allocation\n    var $row5 = $(\'<div class="vis-allocate-gldiv" style = "height:49%" >\');\n    var $row6 = $(\'<div >\');\n    var summation = "Σ";\n    var $OrgFilter = null;\n    var $vSearchBPartner = null;\n    //VIS_0045: control for conversion type in left panel\n    var $vConversionType = null;\n    //Search Filter for Invoice and Payment Grid\n    var $vInvPayMethod = null;\n    var $vPayMethod = null;\n    var $cmbCurrency = $(\'<select class="vis-allocation-currencycmb" ></select>\');\n    var $cmbOrg = null;\n    //Declare variables\n    var $cmbDocType = $(\'<select class="sel-allocation"></select>\');\n    var $payDocType = $(\'<select class="sel-allocation"></select>\');\n    var $cashPayType = $(\'<select class="sel-allocation"></select>\');\n    var $invDocbaseType = $(\'<select class="sel-allocation"></select>\');\n    var $payDocbaseType = $(\'<select class="sel-allocation"></select>\');\n    var $txtDocNo,\n      fromDate,\n      toDate,\n      docNo,\n      c_docType_ID,\n      payMethod_ID = null;\n    var $fromDate = $(\'<input class="date-allocation" type="date" max="9999-12-31"></input>\');\n    var $toDate = $(\'<input class="date-allocation" type="date" max="9999-12-31"></input>\');\n    var $pfromDate = $(\'<input class="date-allocation" type="date" max="9999-12-31"></input>\');\n    var $ptoDate = $(\'<input class="date-allocation" type="date" max="9999-12-31"></input>\');\n    var $cfromDate = $(\'<input class="date-allocation" type="date" max="9999-12-31"></input>\');\n    var $ctoDate = $(\'<input class="date-allocation" type="date" max="9999-12-31"></input>\');\n    var $gfromDate = $(\'<input class="date-allocation" type="date" max="9999-12-31"></input>\');\n    var $gtoDate = $(\'<input class="date-allocation" type="date" max="9999-12-31"></input>\');\n    var $srchInv = $(\'<input value = "" placeholder = "Search..." type = "text" id = _SrchTxtbx_"\' + $self.windowNo + \'>\');\n    var docType,\n      c_DocType_ID = null;\n    //---------------------\n    var $divPayment = null;\n    var $divCashline = null;\n    var $divInvoice = null;\n\n    //Declared variables for gl-allocation\n    var $divGl = null;\n    var $allocationFrom = $(\'<select class="vis-allocation-currencycmb" ></select>\');\n    var $allocationTo = $(\'<select class="vis-allocation-currencycmb" ></select>\');\n    var $vchkGlVoucher = null;\n    var $vchkGlInvoice = null;\n    // var $divChkGLInvoice = null;\n    var $lblglSum = null;\n    var $glSelectAll = null;\n    var _noGL = 0;\n    var $glLineGrid = null;\n    var $DivGllineGrid;\n    var readOnlyGL = true;\n    var glTotal = 0;\n    var colGlCheck = false;\n    var prevAmt = 0;\n    var presAmt = 0;\n    var getGLChanges = [];\n    //End\n\n    var $gridPayment = null;\n    var $gridCashline = null;\n    var $gridInvoice = null;\n\n    //Added for Select All Functionality by Manjot assigned by Mukesh sir and Savita\n    var $invSelectAll = null;\n    var $paymentSelctAll = null;\n    var $cashSelctAll = null;\n    var maxDate = null;\n    var $vchkMultiCurrency = null;\n    var $vchkAllocation = null;\n\n    //Added for inter-business partner work assigned by puneet and mukesh sir\n    var $vchkBPAllocation = null;\n    // inter-company \n    var $vchICompanyAllocation = null;\n    var _isInterBPartner = false;\n    var _isInterCompany = false;\n    var $dateAcct = null;\n    var $date = null;\n    var conversionDate = "";\n    var $conversionDate = null;\n    var $conversionDiv = null;\n    var _C_BPartner_ID = 0;\n    var _C_Currency_ID = 0;\n    var _payment = 10;\n    var _paymentCash = 8;\n    var date = null;\n    var _open = 7;\n    var _openPay = 8;\n    var _openInv = 9;\n    var _discount = 8;\n    var _writeOff = 11;\n    var _applied = 12;\n    var $lblPaymentSum = null;\n    var $lblCashSum = null;\n    var $lblInvoiceSum = null;\n    var _noInvoices = 0;\n    var _noPayments = 0;\n    var _noCashLines = 0;\n\n    //search for each grid\n    var $srchPayment = null;\n    var $srchInvoice = null;\n    var $srchCashJournal = null;\n    var $srchGL = null;\n    var $srchbtnPayment = null;\n    var $srchbtnInvoice = null;\n    var $srchbtnCashJournal = null;\n    var $srchbtnGL = null;\n\n    // array for selected GL Journal\n    var SelectedGL = [];\n    var totalselectedgl = 0;\n    var $glclrbtn = null;\n\n    // array for selected Cash Journal\n    var selectedCashlines = [];\n    var totalselectedcash = 0;\n    var $cashclrbtn = null;\n\n    // array for selected payements\n    var selectedPayments = [];\n    var totalselectedpay = 0;\n    var $payclrbtn = null;\n    // array for selected invoices\n    var selectedInvoices = [];\n    var totalselectedinv = 0;\n    var $clrbtn = null;\n    var colInvCheck = false;\n    var colPayCheck = false;\n    var colCashCheck = false;\n\n    //for set isBusyIndicatorHidden() as true\n    var setallgridsLoaded = false;\n    var $vtxtDifference = null;\n    var $vbtnAllocate = null;\n    //added new search button for search in left panel\n    var $vbtnSearch = null;\n    var $vlblAllocCurrency = null;\n    //var $vchkAutoWriteOff = null;\n\n    var selection = null;\n    var $bsyDiv = null;\n    var self = this;\n    var readOnlyCash = true;\n    var readOnlyPayment = false;\n    var paymentTotal = 0;\n    var invoiceTotal = 0;\n    var countVA009 = 0;\n    var stdPrecision = 0;\n\n    //Culture seperator object\n    var format = VIS.DisplayType.GetNumberFormat(VIS.DisplayType.Amount);\n    var dotFormatter = VIS.Env.isDecimalPoint();\n\n    /* Variable for Paging*/\n    var PAGESIZE = 50;\n    var pageNoInvoice = 1,\n      gridPgnoInvoice = 1,\n      invoiceRecord = 0;\n    var pageNoCashJournal = 1,\n      gridPgnoCashJounal = 1,\n      CashRecord = 0;\n    var pageNoPayment = 1,\n      gridPgnoPayment = 1,\n      paymentRecord = 0;\n    var pageNoGL = 1,\n      gridPgnoGL = 1,\n      glRecord = 0;\n    var isPaymentGridLoaded = false,\n      isCashGridLoaded = false,\n      isInvoiceGridLoaded = false,\n      isGLGridLoaded = false;\n    var C_ConversionType_ID = 0;\n\n    //array to get all the date of selected grid records\n    var _allDates = [];\n\n    // is used to compare org of payment / invoice / cash journal with org of selecetd dropdown\n    var isOrgMatched = true;\n    //Culture seperator object\n    var culture = new VIS.CultureSeparator();\n    var baseUrl = VIS.Application.contextUrl;\n    var dataSetUrl = baseUrl + "JsonData/JDataSetWithCode";\n    var executeScalar = function (sql, params, callback) {\n      var async = callback ? true : false;\n      var dataIn = {\n        sql: sql,\n        page: 1,\n        pageSize: 0\n      };\n      var value = null;\n      getDataSetJString(dataIn, async, function (jString) {\n        dataSet = new VIS.DB.DataSet().toJson(jString);\n        var dataSet = new VIS.DB.DataSet().toJson(jString);\n        if (dataSet.getTable(0).getRows().length > 0) {\n          value = dataSet.getTable(0).getRow(0).getCell(0);\n        } else {\n          value = null;\n        }\n        dataSet.dispose();\n        dataSet = null;\n        if (async) {\n          callback(value);\n        }\n      });\n      return value;\n    };\n    var elements = ["AD_Org_ID", "C_BPartner_ID", "C_Currency_ID", "C_Payment_ID ", "C_CashLine_ID", "C_Cash_ID", "C_Invoice_ID ", "Date", "DocumentNo", "TrxCurrency", "C_ConversionType_ID", "Amount", "ConvertedAmount", "OpenAmount", "multiplierap", "AppliedAmount", "C_ConversionType_ID", "RECEIPTNO", "PaymentType", "ccashlineid", "ScheduleDate", "cinvoiceid", "DiscountAmt", "DocBaseType", "WriteOffAmount", "C_InvoicePaySchedule_ID", "DateAcct", "GL_JOURNALLINE_ID", "GL_Journal_ID", "DocType", "Doc_Base_Type", "FromDate", "Payment_Type", "CreditOrDebit", "Account", "VIS_Check", "AD_OrgTrx_ID", "PaymentMethod"];\n    VIS.translatedTexts = VIS.Msg.translate(VIS.Env.getCtx(), elements, true);\n\n    //DataSet String\n    function getDataSetJString(data, async, callback) {\n      var result = null;\n      // data.sql = VIS.secureEngine.encrypt(data.sql);\n      $.ajax({\n        url: dataSetUrl,\n        type: "POST",\n        datatype: "json",\n        contentType: "application/json; charset=utf-8",\n        async: async,\n        data: JSON.stringify(data)\n      }).done(function (json) {\n        result = json;\n        if (callback) {\n          callback(json);\n        }\n        //return result;\n      });\n      return result;\n    }\n    ;\n\n    //initialize();\n\n    this.Initialize = function () {\n      _C_Currency_ID = ctx.getContextAsInt("$C_Currency_ID"); //  default\n      countVA009 = executeScalar("VIS_131");\n      fillLookups();\n      loadDocType();\n      loadPaymentType();\n      loadpayDocType();\n      loadinvDocbaseType();\n      loadpayDocbaseType();\n      loadOrg(); // load Organization\n      loadCurrencyPrecision();\n      loadOrganization();\n      //load allocation combo\n      loadAllocationCmb();\n      //end\n      createRow1();\n      createRow2();\n      createRow3();\n      createRow4();\n      //added for gl-allocation\n      createRow5();\n      rowContiner.append($row2).append($row3).append($row4).append($row5).append($row6);\n      //---Set Business Partner Mandatory---Neha\n      //$vSearchBPartner.getControl().next().addClass(\'vis-ev-col-mandatory\');\n      //---Resize the Parameter div and Display and hide Payment and Cash div----Neha-----\n      //$row1.resizable({\n      //    handles: \'e\',\n      //    minWidth: 226,\n      //    maxWidth: 600,\n      //    resize: function (event, ui) {\n      //        var width = ui.size.width;\n      //        if (width > 197) {\n      //            rowContiner.width($(document).width() - (width + 40));\n      //        }\n      //    }\n      //});\n      $row2.css(\'display\', \'\');\n      $row3.css(\'display\', \'none\');\n      //------------------------------\n      $root.append($row1.append($innerRow)).append(rowContiner);\n      // to set process button static in design it will not scroll with other filters\n      var $LeftPanelBottomWrap = $(\'<div class="vis-allocation-leftpanel-bottomDiv">\');\n      var $DiffernceWrapDiv = $(\'<div class="vis-DiffernceWrapDiv">\');\n      $LeftPanelBottomWrap.append($DiffernceWrapDiv);\n      $DiffernceWrapDiv.append(\'<div class="vis-allocation-leftControls">\' + \'<span class="vis-allocation-inputLabels">\' + VIS.Msg.getMsg("Difference") + \'</span>\');\n      $DiffernceWrapDiv.append(\'<div class="vis-allocation-leftControls">\' + \'<span class="vis-allocation-lblCurrnecy" style=" padding: 0 5px; "></span>\' + \'<span class="vis-allocation-lbldifferenceAmt">\' + \'</span>\');\n      var $divProcess = $(\'<div style="padding-right: 15px;float: right; margin-top: 10px;">\');\n      $divProcess.append(\' <a class="vis-group-btn vis-group-create vis-group-grayBtn" style="float: right;">\' + VIS.Msg.getMsg(\'Process\') + \'</a>\');\n      //$row1.append($divProcess);\n      var $divSearch = $(\'<div style="padding-right: 15px;float: right; margin-top: 10px;">\');\n      $divSearch.append(\' <a class="vis-group-create vis-group-grayBtn" id="vis_srchbtn_\' + $self.windowNo + \'" style="float: left;">\' + VIS.Msg.getMsg(\'Search\') + \'</a>\');\n      $row1.append($LeftPanelBottomWrap);\n      $LeftPanelBottomWrap.append($divProcess);\n      $LeftPanelBottomWrap.append($divSearch);\n      $root.append($row1.append($innerRow).append($LeftPanelBottomWrap)).append(rowContiner);\n      $vbtnAllocate = $root.find(\'.vis-group-btn\');\n      $vbtnAllocate.css({\n        "pointer-events": "none",\n        "opacity": "0.5"\n      });\n      $vbtnSearch = $root.find(\'#vis_srchbtn_\' + $self.windowNo + \'\');\n      createBusyIndicator();\n      eventHandling();\n      //added to load all blank grids\n      blankAllGrids();\n      //added for gl-allocation\n      $row5.css(\'display\', \'none\');\n      //end\n\n      $vtxtDifference = $DiffernceWrapDiv.find(\'.vis-allocation-lbldifferenceAmt\');\n      $vlblAllocCurrency = $DiffernceWrapDiv.find(\'.vis-allocation-lblCurrnecy\');\n      $root.find(".vis-allocation-resultdiv").css({\n        "width": "100%",\n        "margin": "0",\n        "bottom": "0",\n        "position": "inherit"\n      });\n      $bsyDiv[0].style.visibility = "hidden";\n    };\n    function eventHandling() {\n      //Organization \n      $OrgFilter.on("change", function (e) {\n        ctx.setContext($self.windowNo, "OrgID", VIS.Utility.Util.getValueOfInt($OrgFilter.val()));\n        // Clear conversion type on Org Change\n        $vConversionType.getControl().val(\'\');\n        //when select MultiCurrency without selecting conversionDate it will clear the grids\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        //clear the girds based on which grid is active (true).\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          // Commented because we need to search on button click suggested by ashish\n          //if ($allocationFrom.val() != 0 && $allocationTo.val() != 0) {\n          //    if (allgridsLoaded()) {\n          //        if ($gridInvoice) {\n          //            clrInvoice(e);\n          //        }\n          //        if ($glLineGrid) {\n          //            clrGLLine(e);\n          //        }\n          //        if ($gridPayment) {\n          //            clrPayment(e);\n          //        }\n          //        if ($gridCashline) {\n          //            clrCashLine(e);\n          //        }\n          //    }\n          //    else {\n          //        //VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n          //        blankAllGrids();\n          //    }\n          //}\n        } else {\n          $vSearchBPartner.getControl().addClass(\'vis-ev-col-mandatory\'); //highlight the field\n          blankAllGrids();\n        }\n      });\n      $vSearchBPartner.fireValueChanged = bpValueChanged;\n\n      //VIS_0045: event when we change conversion type in left panel\n      $vConversionType.fireValueChanged = conversionTypeChanged;\n      $cmbCurrency.on("change", function (e) {\n        vetoableChange("C_Currency_ID", $cmbCurrency.val());\n        //when select MultiCurrency without selecting conversionDate it will clear the grid\'s\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          // Commented because we need to search on button click suggested by ashish\n          //if ($allocationFrom.val() != 0 && $allocationTo.val() != 0) {\n          //    if (allgridsLoaded()) {\n          //        if ($gridInvoice) {\n          //            clrInvoice(e);\n          //        }\n          //        if ($glLineGrid) {\n          //            clrGLLine(e);\n          //        }\n          //        if ($gridPayment) {\n          //            clrPayment(e);\n          //        }\n          //        if ($gridCashline) {\n          //            clrCashLine(e);\n          //        }\n          //    }\n          //    else {\n          //        //VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n          //        blankAllGrids();\n          //    }\n          //}\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          blankAllGrids();\n        }\n        //if ($cmbCurrency.val() > 0) {\n        //    $cmbCurrency.removeClass(\'vis-ev-col-mandatory\');\n        //}\n        //else {\n        //    $cmbCurrency.addClass(\'vis-ev-col-mandatory\');\n        //}\n        //Commetd code because now we want to search data on search button not on every control\'s event\n        //////loadBPartner();\n        //loadCurrencyPrecision(parseInt($cmbCurrency.val()));\n      });\n      $vchkMultiCurrency.on("change", function (e) {\n        vetoableChange("Date", $vchkMultiCurrency.is(\':checked\'));\n        //when select MultiCurrency without selecting conversionDate it will clear the grid\'s \n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          // Commented because we need to search on button click suggested by ashish\n          // blankAllGrids();\n          // clearRightPanelFilters(); //clear right side  filters and selected records\n          $conversionDate.val(\'\');\n          return;\n        }\n        //clear the grids which is true\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          // Commented because we need to search on button click suggested by ashish\n          //if ($allocationFrom.val() != 0 && $allocationTo.val() != 0) {\n          //    if (allgridsLoaded()) {\n          //        if ($gridInvoice) {\n          //            clrInvoice(e);\n          //        }\n          //        if ($glLineGrid) {\n          //            clrGLLine(e);\n          //        }\n          //        if ($gridPayment) {\n          //            clrPayment(e);\n          //        }\n          //        if ($gridCashline) {\n          //            clrCashLine(e);\n          //        }\n          //    }\n          //}\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          blankAllGrids();\n        }\n        if (!$vchkMultiCurrency.is(\':checked\')) {\n          $conversionDate.val(\'\');\n        }\n        //Commetd code because now we want to search data on search button not on every control\'s event\n        //////loadBPartner();\n      });\n      $vchkAllocation.on("change", function (e) {\n        if ($vchkGlVoucher.is(\':checked\')) {\n          $(".vis-allocate-invoicediv").insertBefore(".vis-allocate-gldiv");\n          $row2.css(\'display\', \'none\'); // Payment Grid\n          $row3.css(\'display\', \'none\'); // Cash Grid\n          $row5.css(\'display\', \'block\'); // GL journal grid\n          $row4.css(\'display\', \'block\'); // Invoice Grid\n          if ($gridInvoice) $gridInvoice.refresh();\n          if ($glLineGrid) $glLineGrid.refresh();\n        }\n        vchkapplocationChange();\n      });\n      $vbtnSearch.on("click", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        //VIS_0045: Conversion type message thorw only when Inv to Inv or Inv to Pay allocation\n\n        blankAllGrids();\n        if ($vchkMultiCurrency.is(\':checked\') && ($conversionDate.val() == "" || $vConversionType.getValue() == null && ($allocationFrom.val() == "I" && $allocationTo.val() == "P" || $allocationFrom.val() == "P" && $allocationTo.val() == "I" || $allocationFrom.val() == "I" && $allocationTo.val() == "I"))) {\n          if ($conversionDate.val() == "") {\n            VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          } else if ($vConversionType.getValue() == null) {\n            VIS.ADialog.warn("VIS_SlctcnvrsnType");\n          }\n\n          // blankAllGrids();\n\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            clearRightPanelFilters(); //clear right side  filters and selected records\n            searchbyParameters();\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $vSearchBPartner.getControl().addClass(\'vis-ev-col-mandatory\'); //highlight the field\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          //  blankAllGrids(); // clear the records from selected grids\n        }\n      });\n\n      //added for gl-allocation\n      $vchkGlVoucher.on("change", function (e) {\n        $vchkAllocation.prop(\'checked\', false);\n        if ($vchkGlVoucher.is(\':checked\')) {\n          $(".vis-allocate-invoicediv").insertBefore(".vis-allocate-gldiv");\n          $row4.css(\'display\', \'block\'); // Invoice Grid\n          $row5.css(\'display\', \'block\'); // GL journal grid\n          $row2.css(\'display\', \'none\'); // Payment Grid\n          $row3.css(\'display\', \'none\'); // Cash Grid\n          if ($gridInvoice) $gridInvoice.refresh();\n          if ($glLineGrid) $glLineGrid.refresh();\n        } else {\n          $(".vis-allocate-invoicediv").insertBefore(".vis-allocate-paymentdiv");\n          $row4.css(\'display\', \'block\'); // Invoice Grid\n          $row5.css(\'display\', \'none\'); // GL journal grid\n          $row2.css(\'display\', \'block\'); // Payment Grid\n          $row3.css(\'display\', \'none\'); // Cash Grid\n          if ($gridInvoice) $gridInvoice.refresh();\n          if ($gridPayment) $gridPayment.refresh();\n        }\n        //////loadGLDataGrid(e);\n      });\n      $vchkGlInvoice.on("change", function (e) {});\n      //end\n\n      $date.on("change", function (e) {\n        /** Commented because we need to stop the load business partner on selection of date\r\n        //vetoableChange("Date", $date.val());\r\n        //loadBPartner();\r\n        */\n        if (getSelectedRecordsCount()) {\n          if (new Date($date.val()) < maxDate) {\n            VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectMaxDate") + Globalize.format(new Date(maxDate), "yyyy-MM-dd"), "");\n            $date.val(Globalize.format(new Date(maxDate), "yyyy-MM-dd"));\n            return false;\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("PleaseSelectRecord"), "");\n        }\n      });\n      $vbtnAllocate.on("click", function (e) {\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) == 0) {\n          //it returns Message if not selected Business Partner.\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $vSearchBPartner.getControl().addClass(\'vis-ev-col-mandatory\'); //highlight the field\n          clearRightPanelFilters(); //clear all selected filters from right Panel\n          blankAllGrids(); //clear records from all grids\n          return false;\n        }\n        if (getSelectedRecordsCount()) {\n          if ($date.val().trim() == "") {\n            VIS.ADialog.info("", true, VIS.Msg.getMsg("InvalidDateFormat"), "");\n            return false;\n          }\n          //Handled in Central America Time Zone.\n          //if (new Date($date.val()) < maxDate) {\n          if ($date.val() < Globalize.format(new Date(maxDate), "yyyy-MM-dd")) {\n            VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectMaxDate") + Globalize.format(new Date(maxDate), "yyyy-MM-dd"), "");\n            $date.val(Globalize.format(new Date(maxDate), "yyyy-MM-dd"));\n            return false;\n          }\n          if (isOrgMatched) {\n            //Org Manadatory because system will create view allocation in the selected org.\n            if (parseInt($cmbOrg.val()) > 0) allocate();else VIS.ADialog.info("", true, VIS.Msg.getMsg("ValidateOrg"), "");\n          } else {\n            /*Selected records are having a different organization than parameter organization. Do you want to proceed?*/\n            VIS.ADialog.confirm("ConfirmForDiffOrg", true, "", "Confirm", function (result) {\n              if (result) {\n                //Org Manadatory because system will create view allocation in the selected org.\n                if (parseInt($cmbOrg.val()) > 0) allocate();else VIS.ADialog.info("", true, VIS.Msg.getMsg("ValidateOrg"), "");\n              } else {\n                return;\n              }\n            });\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("PleaseSelectRecord"), "");\n        }\n      });\n      //hide the AutoWriteOff Checkbox \n      //$vchkAutoWriteOff.on("click", function (e) {\n      //    autoWriteOff();\n      //    calculate();\n      //});\n      //-----Controls events and load Invoice Grid--Neha\n      //$txtDocNo.on("change", function (e) {\n      //    //Commetd code because now we want to search data on search button not on every control\'s event\n      //    //////loadInvoice();\n      //});\n      //filter the records based on Payment Method in Invocie grid\n      $vInvPayMethod.fireValueChanged = invPayMethodChanged;\n      //filter the records based on Doctype in Invocie grid\n      $cmbDocType.on("change", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadInvoice();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $cmbDocType.val(0);\n            }\n          } else {\n            $cmbDocType.val(0);\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $cmbDocType.val(0);\n        }\n      });\n\n      //filter the records based on Payment Method in Payment grid\n      $vPayMethod.fireValueChanged = payMethodChanged;\n      //filter the records based on Doctype in Payment grid\n      $payDocType.on("change", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadUnallocatedPayments();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $payDocType.val(0);\n            }\n          } else {\n            $payDocType.val(0);\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $payDocType.val(0);\n        }\n      });\n\n      //filter the records based on DocBaseType in Payment grid\n      $payDocbaseType.on("change", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadUnallocatedPayments();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $payDocbaseType.val(0);\n            }\n          } else {\n            $payDocbaseType.val(0);\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $payDocbaseType.val(0);\n        }\n      });\n\n      //filter the records based on DocBaseType in Invoice grid\n      $invDocbaseType.on("change", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadInvoice();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $invDocbaseType.val(0);\n            }\n          } else {\n            $invDocbaseType.val(0);\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $invDocbaseType.val(0);\n        }\n      });\n\n      //filter the records based on paymentType in Cash Journal Line grid\n      $cashPayType.on("change", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadUnallocatedCashLines();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $cashPayType.val(0);\n            }\n          } else {\n            $cashPayType.val(0);\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $cashPayType.val(0);\n        }\n      });\n\n      // filteration based on from and toDates for Invoice Grid\n      $fromDate.on("blur", function (e) {\n        var dateVal = Date.parse($fromDate.val());\n        var currentTime = new Date(parseInt(dateVal));\n        //check if date is valid\n        //this check will work for 01/01/1970 on words\n        if (!isNaN(currentTime.getTime()) && currentTime.getTime() < 0) {\n          VIS.ADialog.warn("VIS_InvalidDate");\n          return;\n        }\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadInvoice();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $fromDate.val(\'\');\n            }\n          } else {\n            $fromDate.val(\'\');\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $fromDate.val(\'\');\n        }\n      });\n      $toDate.on("blur", function (e) {\n        var dateVal = Date.parse($toDate.val());\n        var currentTime = new Date(parseInt(dateVal));\n        //check if date is valid\n        //this check will work for 01/01/1970 on words\n        if (!isNaN(currentTime.getTime()) && currentTime.getTime() < 0) {\n          VIS.ADialog.warn("VIS_InvalidDate");\n          return;\n        }\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadInvoice();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $toDate.val(\'\');\n            }\n          } else {\n            $toDate.val(\'\');\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $toDate.val(\'\');\n        }\n      });\n\n      // filteration based on from and toDates for Payment Grid\n      $pfromDate.on("blur", function (e) {\n        var dateVal = Date.parse($pfromDate.val());\n        var currentTime = new Date(parseInt(dateVal));\n        //check if date is valid\n        //this check will work for 01/01/1970 on words\n        if (!isNaN(currentTime.getTime()) && currentTime.getTime() < 0) {\n          VIS.ADialog.warn("VIS_InvalidDate");\n          return;\n        }\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadUnallocatedPayments();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $pfromDate.val(\'\');\n            }\n          } else {\n            $pfromDate.val(\'\');\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $pfromDate.val(\'\');\n        }\n      });\n      $ptoDate.on("blur", function (e) {\n        var dateVal = Date.parse($ptoDate.val());\n        var currentTime = new Date(parseInt(dateVal));\n        //check if date is valid\n        //this check will work for 01/01/1970 on words\n        if (!isNaN(currentTime.getTime()) && currentTime.getTime() < 0) {\n          VIS.ADialog.warn("VIS_InvalidDate");\n          return;\n        }\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadUnallocatedPayments();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $ptoDate.val(\'\');\n            }\n          } else {\n            $ptoDate.val(\'\');\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $ptoDate.val(\'\');\n        }\n      });\n\n      //filteration based on from and toDates for cash journal Grid\n      $cfromDate.on("blur", function (e) {\n        var dateVal = Date.parse($cfromDate.val());\n        var currentTime = new Date(parseInt(dateVal));\n        //check if date is valid\n        //this check will work for 01/01/1970 on words\n        if (!isNaN(currentTime.getTime()) && currentTime.getTime() < 0) {\n          VIS.ADialog.warn("VIS_InvalidDate");\n          return;\n        }\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadUnallocatedCashLines();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $cfromDate.val(\'\');\n            }\n          } else {\n            $cfromDate.val(\'\');\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $cfromDate.val(\'\');\n        }\n      });\n      $ctoDate.on("blur", function (e) {\n        var dateVal = Date.parse($ctoDate.val());\n        var currentTime = new Date(parseInt(dateVal));\n        //check if date is valid\n        //this check will work for 01/01/1970 on words\n        if (!isNaN(currentTime.getTime()) && currentTime.getTime() < 0) {\n          VIS.ADialog.warn("VIS_InvalidDate");\n          return;\n        }\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadUnallocatedCashLines();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $ctoDate.val(\'\');\n            }\n          } else {\n            $ctoDate.val(\'\');\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $ctoDate.val(\'\');\n        }\n      });\n\n      // filteration based on from and toDates for GL journal Grid\n      $gfromDate.on("blur", function (e) {\n        var dateVal = Date.parse($gfromDate.val());\n        var currentTime = new Date(parseInt(dateVal));\n        //check if date is valid\n        //this check will work for 01/01/1970 on words\n        if (!isNaN(currentTime.getTime()) && currentTime.getTime() < 0) {\n          VIS.ADialog.warn("VIS_InvalidDate");\n          return;\n        }\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadGLVoucher();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $gfromDate.val(\'\');\n            }\n          } else {\n            $gfromDate.val(\'\');\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $gfromDate.val(\'\');\n        }\n      });\n      $gtoDate.on("blur", function (e) {\n        var dateVal = Date.parse($gtoDate.val());\n        var currentTime = new Date(parseInt(dateVal));\n        //check if date is valid\n        //this check will work for 01/01/1970 on words\n        if (!isNaN(currentTime.getTime()) && currentTime.getTime() < 0) {\n          VIS.ADialog.warn("VIS_InvalidDate");\n          return;\n        }\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadGLVoucher();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $gtoDate.val(\'\');\n            }\n          } else {\n            $gtoDate.val(\'\');\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $gtoDate.val(\'\');\n        }\n      });\n\n      //click event for search Invoice records which is based on Document No\n      $srchInvoice.on("keypress", function (e) {\n        if (e.keyCode == 13) {\n          //when select MultiCurrency without selecting conversionDate it will return a Message\n          if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n            VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n            blankAllGrids();\n            clearRightPanelFilters(); //clear right side  filters and selected records\n            return;\n          }\n          if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n            if (checkisSelectedAllocationFromAndTo()) {\n              if (allgridsLoaded()) {\n                gridPgnoInvoice = 1;\n                loadInvoice();\n              } else {\n                VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              }\n            }\n          } else {\n            VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          }\n          // $srchInvoice.val(\'\');\n        }\n      });\n      $srchbtnInvoice.on("click", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              gridPgnoInvoice = 1;\n              loadInvoice();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n            }\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n        }\n        //$srchInvoice.val(\'\');\n      });\n\n      //click event for search Payment records which is based on Document No\n      $srchPayment.on("keypress", function (e) {\n        if (e.keyCode == 13) {\n          //when select MultiCurrency without selecting conversionDate it will return a Message\n          if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n            VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n            blankAllGrids();\n            clearRightPanelFilters(); //clear right side  filters and selected records\n            return;\n          }\n          if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n            if (checkisSelectedAllocationFromAndTo()) {\n              if (allgridsLoaded()) {\n                gridPgnoPayment = 1;\n                loadUnallocatedPayments();\n              } else {\n                VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              }\n            }\n          } else {\n            VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          }\n          //  $srchPayment.val(\'\');\n        }\n      });\n      $srchbtnPayment.on("click", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              gridPgnoPayment = 1;\n              loadUnallocatedPayments();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n            }\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n        }\n        // $srchPayment.val(\'\');\n      });\n\n      //click event for search Cash Journal line records which is based on Document No\n      $srchCashJournal.on("keypress", function (e) {\n        if (e.keyCode == 13) {\n          //when select MultiCurrency without selecting conversionDate it will return a Message\n          if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n            VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n            blankAllGrids();\n            clearRightPanelFilters(); //clear right side  filters and selected records\n            return;\n          }\n          if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n            if (checkisSelectedAllocationFromAndTo()) {\n              if (allgridsLoaded()) {\n                gridPgnoCashJounal = 1;\n                loadUnallocatedCashLines();\n              } else {\n                VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              }\n            }\n          } else {\n            VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          }\n          // $srchCashJournal.val(\'\');\n        }\n      });\n      $srchbtnCashJournal.on("click", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              gridPgnoCashJounal = 1;\n              loadUnallocatedCashLines();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n            }\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n        }\n        // $srchCashJournal.val(\'\');\n      });\n\n      //click event for search GL Journal line records which is based on Document No\n      $srchGL.on("keypress", function (e) {\n        if (e.keyCode == 13) {\n          //when select MultiCurrency without selecting conversionDate it will return a Message\n          if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n            VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n            blankAllGrids();\n            clearRightPanelFilters(); //clear right side  filters and selected records\n            return;\n          }\n          if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n            if (checkisSelectedAllocationFromAndTo()) {\n              if (allgridsLoaded()) {\n                gridPgnoGL = 1;\n                loadGLVoucher();\n              } else {\n                VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              }\n            }\n          } else {\n            VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          }\n          //$srchGL.val(\'\');\n        }\n      });\n      $srchbtnGL.on("click", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              gridPgnoGL = 1;\n              loadGLVoucher();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n            }\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n        }\n        //$srchGL.val(\'\');\n      });\n      //-----For Select All buttons on grid by Manjot assigned by Mukesh sir and Savita\n      $invSelectAll.on("change", function (e) {\n        //window.setTimeout(function () {\n        $bsyDiv[0].style.visibility = "visible";\n        var chk = $(\'#grid_\' + $gridInvoice.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n        for (var i = 0; i < chk.length; i++) {\n          $(chk[i]).prop(\'checked\', $invSelectAll.prop("checked"));\n\n          //VA228:Break statement when max limit 50 reached\n          if (!checkCheckedLimitOnSelectAllCheckBox(chk[i], true, false, false, false)) break;\n\n          //$(chk[i]).change(e);\n          $gridInvoice.editChange.call($gridInvoice, chk[i], i, 0, e);\n          //trigger the event based on recid\n          var recid = $gridInvoice.records[i].recid;\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": recid,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $gridInvoice.trigger(eData);\n        }\n\n        // Clear Selected invoices array when we de-select the select all checkbox. work done for to hold all the selected invoices\n        if ($invSelectAll.prop("checked") == false) selectedInvoices = [];\n        $bsyDiv[0].style.visibility = "hidden";\n        //}, 300);\n      });\n\n      //change event for checkbox to select/unselet all for Payment grid\n      $paymentSelctAll.on("change", function (e) {\n        $bsyDiv[0].style.visibility = "visible";\n        var chk = $(\'#grid_\' + $gridPayment.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n        for (var i = 0; i < chk.length; i++) {\n          $(chk[i]).prop(\'checked\', $paymentSelctAll.prop("checked"));\n          if (!checkCheckedLimitOnSelectAllCheckBox(chk[i], false, true, false, false)) break;\n\n          //$(chk[i]).change(e);\n          $gridPayment.editChange.call($gridPayment, chk[i], i, 0, e);\n          //trigger the event based on recid\n          var recid = $gridPayment.records[i].recid;\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": recid,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $gridPayment.trigger(eData);\n        }\n        if ($paymentSelctAll.prop("checked") == false) selectedPayments = [];\n        $bsyDiv[0].style.visibility = "hidden";\n      });\n\n      //change event forf checkbox to select/unselect all for Cash Journal line\n      $cashSelctAll.on("change", function (e) {\n        $bsyDiv[0].style.visibility = "visible";\n        var chk = $(\'#grid_\' + $gridCashline.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n        for (var i = 0; i < chk.length; i++) {\n          $(chk[i]).prop(\'checked\', $cashSelctAll.prop("checked"));\n          if (!checkCheckedLimitOnSelectAllCheckBox(chk[i], false, false, true, false)) break;\n\n          //$(chk[i]).change(e);\n          $gridCashline.editChange.call($gridCashline, chk[i], i, 0, e);\n          //trigger the event based on recid                     \n          var recid = $gridCashline.records[i].recid;\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": recid,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $gridCashline.trigger(eData);\n        }\n        if ($cashSelctAll.prop("checked") == false) selectedCashlines = [];\n        $bsyDiv[0].style.visibility = "hidden";\n      });\n\n      //check all grids are loaded or not\n      // return true or false based on condition\n      function allgridsLoaded() {\n        if (isPaymentGridLoaded == true && isCashGridLoaded == true && isInvoiceGridLoaded == true && isGLGridLoaded == true) {\n          return true;\n        }\n        return false;\n      }\n\n      //validation for allocationFrom and allocationTo Dropdowns are selected or not.\n      // return true or false based on condition\n      function checkisSelectedAllocationFromAndTo() {\n        if ($allocationTo.val() == 0 && $allocationFrom.val() == 0) {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("allocationFrom_And_allocationTo"), "");\n          $allocationFrom.addClass(\'vis-ev-col-mandatory\');\n          $allocationTo.addClass(\'vis-ev-col-mandatory\');\n          return false;\n        } else if ($allocationFrom.val() == 0) {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("selectAllocationFrom"), "");\n          $allocationTo.val(0);\n          $allocationFrom.addClass(\'vis-ev-col-mandatory\');\n          $allocationTo.addClass(\'vis-ev-col-mandatory\');\n          return false;\n        } else if ($allocationTo.val() == 0) {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("selectAllocationTo"), "");\n          $allocationTo.addClass(\'vis-ev-col-mandatory\');\n          return false;\n        }\n        return true;\n      }\n\n      //change event for checkbox to select/unselect all for gl-allocation grid\n      $glSelectAll.on("change", function (e) {\n        $bsyDiv[0].style.visibility = "visible";\n        if ($glSelectAll.prop("checked") == false) {\n          getGLChanges = [];\n        }\n        var chk = $(\'#grid_\' + $glLineGrid.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n        for (var i = 0; i < chk.length; i++) {\n          $(chk[i]).prop(\'checked\', $glSelectAll.prop("checked"));\n          if (!checkCheckedLimitOnSelectAllCheckBox(chk[i], false, false, false, true)) break;\n\n          //$(chk[i]).change(e);\n          $glLineGrid.editChange.call($glLineGrid, chk[i], i, 0, e);\n          //trigger the event based on recid\n          var recid = $glLineGrid.records[i].recid;\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": recid,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $glLineGrid.trigger(eData);\n        }\n        if ($glSelectAll.prop("checked") == false) SelectedGL = [];\n        $bsyDiv[0].style.visibility = "hidden";\n      });\n      //end \n      //set/reset the background-color change event\n      $cmbOrg.on("change", function (e) {\n        if (parseInt($cmbOrg.val()) > 0) $cmbOrg.removeClass(\'vis-ev-col-mandatory\');else $cmbOrg.addClass(\'vis-ev-col-mandatory\');\n      });\n      //Currency Conversion Date change event\n      $conversionDate.on("blur", function (e) {\n        var dateVal = Date.parse($conversionDate.val());\n        var currentTime = new Date(parseInt(dateVal));\n        //check if date is valid\n        //this check will work for 01/01/1970 on words\n        if (!isNaN(currentTime.getTime()) && currentTime.getTime() < 0) {\n          VIS.ADialog.warn("VIS_InvalidDate");\n          return;\n        }\n        conversionDate = $conversionDate.val();\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        //clear and refresh the grids which is true for selected BusinessPartner and Currency based on ConversionDate\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          // Commented because we need to search on button click suggested by ashish\n          //if ($allocationFrom.val() != 0 && $allocationTo.val() != 0) {\n          //    if (allgridsLoaded()) {\n          //        if ($gridInvoice) {\n          //            clrInvoice(e);\n          //        }\n          //        if ($glLineGrid) {\n          //            clrGLLine(e);\n          //        }\n          //        if ($gridPayment) {\n          //            clrPayment(e);\n          //        }\n          //        if ($gridCashline) {\n          //            clrCashLine(e);\n          //        }\n          //    }\n          //}\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          blankAllGrids();\n        }\n        //Commetd code because now we want to search data on search button not on every control\'s event\n        //////loadBPartner();\n      });\n      //---For inter-business Partner data load in all grids\n      $vchkBPAllocation.on("change", function (e) {\n        vetoableChange("Date", $vchkBPAllocation.is(\':checked\'));\n        _isInterBPartner = $vchkBPAllocation.is(\':checked\');\n        // Commented because we need to search on button click suggested by ashish\n        // loadBPartner();\n      });\n      //filter based on inter company checkbox to get  records\n      $vchICompanyAllocation.on("change", function (e) {\n        vetoableChange("Date", $vchICompanyAllocation.is(\':checked\'));\n        _isInterCompany = $vchICompanyAllocation.is(\':checked\');\n        // loadBPartner();\n      });\n      //clear selected invoices records from Invoice grid \n      $clrbtn.on("click", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              if ($gridInvoice) {\n                clrInvoice(e);\n              }\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n            }\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n        }\n      });\n\n      //clear selected journal records from GL journal grid\n      $glclrbtn.on("click", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              if ($glLineGrid) {\n                clrGLLine(e);\n              }\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n            }\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n        }\n      });\n      //clear selected cash journals records from Cash Journal grid\n      $cashclrbtn.on("click", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              if ($gridCashline) {\n                clrCashLine(e);\n              }\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n            }\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n        }\n      });\n      //clear selected payment records from Payment grid  \n      $payclrbtn.on("click", function (e) {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              if ($gridPayment) {\n                clrPayment(e);\n              }\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n            }\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n        }\n      });\n\n      //allocation From combo event\n      $allocationFrom.on("change", function (e) {\n        if ($allocationFrom.val() == 0) {\n          $allocationFrom.addClass(\'vis-ev-col-mandatory\');\n        } else $allocationFrom.removeClass(\'vis-ev-col-mandatory\');\n        //if allocation from is change then we have to clear the selection of invoices\n        clearInvoiceArrays(e);\n        if ($allocationFrom.val() == "P") {\n          // In case of Payment Cash Option must be visible\n          /*VIS_427 30/01/2024 Devops Id 4680 Hide cash journal if Payment is selected on Allocationfrom field*/\n          $allocationTo.find("option[value=C]").hide();\n          $allocationTo.find("option[value=P]").show();\n          $allocationTo.find("option[value=G]").show();\n        } else if ($allocationFrom.val() == "C") {\n          // In case of Cash Payment Option must be visible\n          /*VIS_427 30/01/2024 Devops Id 4680 Hide Payment if cash journal is selected on Allocationfrom field*/\n          $allocationTo.find("option[value=P]").hide();\n          $allocationTo.find("option[value=C]").show(); // for Cash2Cash\n          $allocationTo.find("option[value=G]").show();\n        } else if ($allocationFrom.val() == "G") {\n          // In case of GL Journal GL Journal Option must be Hide\n          $allocationTo.find("option[value=P]").show();\n          $allocationTo.find("option[value=C]").show();\n          $allocationTo.find("option[value=G]").hide();\n        } else {\n          //we need to show all option\n          $allocationTo.find("option[value=C]").show();\n          $allocationTo.find("option[value=P]").show();\n          $allocationTo.find("option[value=G]").show();\n        }\n        $allocationTo.val(0);\n        $allocationTo.addClass(\'vis-ev-col-mandatory\');\n        loadGrids($allocationFrom.val());\n        displayGrids($allocationFrom.val(), $allocationTo.val());\n        //whenever change the allocationTo then the rightpanel filters will be cleared!\n        clearRightPanelFilters();\n      });\n      //both allocationTo and From must be a value then only display the grids.\n      $allocationTo.on("change", function (e) {\n        if (parseInt($allocationTo.val()) == 0) {\n          $allocationTo.css("background-color", SetMandatory(true));\n        } else $allocationTo.css("background-color", SetMandatory(false));\n        //if allocation from is change then we have to clear the selection of invoices\n        clearInvoiceArrays(e);\n        if ($allocationFrom.val() == "P" && $allocationTo.val() == "C" || $allocationFrom.val() == "C" && $allocationTo.val() == "P") {\n          //$divCu.css(\'display\', \'none\');\n          $vConversionType.getControl().val(\'\');\n          //$conversionDiv.css(\'display\', \'none\');\n          $conversionDate.val(\'\');\n          $vchkMultiCurrency.prop(\'checked\', false);\n          $vchkMultiCurrency.attr(\'checked\', false);\n          $vchkMultiCurrency.prop(\'disabled\', true);\n        } else {\n          $vchkMultiCurrency.prop(\'disabled\', false);\n        }\n        var allocfrm = $allocationFrom.val();\n        var allocto = $allocationTo.val();\n        clearRightPanelFilters();\n        loadGrids($allocationTo.val());\n        displayGrids(allocfrm, allocto);\n        displayConvertionType();\n      });\n      function payMethodChanged() {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadUnallocatedPayments();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $vPayMethod.setValue(null);\n            }\n          } else {\n            $vPayMethod.setValue(null);\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $vPayMethod.setValue(null);\n        }\n      }\n      ;\n      function invPayMethodChanged() {\n        //when select MultiCurrency without selecting conversionDate it will return a Message\n        if ($vchkMultiCurrency.is(\':checked\') && $conversionDate.val() == "") {\n          VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n          blankAllGrids();\n          clearRightPanelFilters(); //clear right side  filters and selected records\n          return;\n        }\n        if (VIS.Utility.Util.getValueOfInt($vSearchBPartner.value) > 0) {\n          if (checkisSelectedAllocationFromAndTo()) {\n            if (allgridsLoaded()) {\n              loadInvoice();\n            } else {\n              VIS.ADialog.info("", true, VIS.Msg.getMsg("VIS_Search_Btn"), "");\n              $vInvPayMethod.setValue(null);\n            }\n          } else {\n            $vInvPayMethod.setValue(null);\n          }\n        } else {\n          VIS.ADialog.info("", true, VIS.Msg.getMsg("SelectBusinessPartnerFirst"), "");\n          $vInvPayMethod.setValue(null);\n        }\n      }\n    }\n    ;\n\n    //refresh all filters from right Panel\n    function clearRightPanelFilters() {\n      $cashPayType.val(0);\n      $invDocbaseType.val(0);\n      $payDocbaseType.val(0);\n      $payDocType.val(0);\n      $cmbDocType.val(0);\n      $vInvPayMethod.setValue(null);\n      $vPayMethod.setValue(null);\n      $fromDate.val(\'\');\n      $toDate.val(\'\');\n      $pfromDate.val(\'\');\n      $ptoDate.val(\'\');\n      $cfromDate.val(\'\');\n      $ctoDate.val(\'\');\n      $gfromDate.val(\'\');\n      $gtoDate.val(\'\');\n      //clear the search fields\n      $srchPayment.val(\'\');\n      $srchInvoice.val(\'\');\n      $srchGL.val(\'\');\n      $srchCashJournal.val(\'\');\n      selectedCashlines = [];\n      selectedInvoices = [];\n      selectedPayments = [];\n      SelectedGL = [];\n      //refresh AccountDate\n      $dateAcct.val(Globalize.format(new Date(), "yyyy-MM-dd"));\n      refreshLabel();\n    }\n\n    ////to load GL Grid and define events of Gl Grid\n    //function loadGLGrid() {\n    //    if (glLineGrid != undefined && glLineGrid != null) {\n    //        glLineGrid.destroy();\n    //        glLineGrid = null;\n    //    }\n    //    glLineGrid = $divGl.w2grid({\n    //        name: "VIS_GLLineGrid_" + $self.windowNo,\n    //        //show: {\n    //        //    toolbar: true,\n    //        //    toolbarSearch: false,\n    //        //    toolbarInput: false,\n    //        //    searchAll: false\n    //        //},\n    //        multiSelect: true,\n    //        columns: [\n    //            { field: "SelectRow", caption: \'check\', size: \'50px\', editable: { type: \'checkbox\' } },\n    //            { field: "AD_Org_ID", caption: VIS.translatedTexts.AD_Org_ID, size: \'85px\', hidden: true },\n    //            { field: "OrgName", caption: VIS.translatedTexts.AD_Org_ID, size: \'105px\', hidden: false, sortable: false },\n    //            {\n    //                field: "DATEACCT", caption: VIS.translatedTexts.DateAcct, render: function (record, index, col_index) {\n    //                    var val = record["DATEACCT"];\n    //                    return new Date(val).toLocaleDateString();\n    //                }, size: \'105px\', hidden: false, sortable: false\n    //            },\n    //            { field: "DOCUMENTNO", caption: VIS.translatedTexts.DocumentNo, size: \'120px\', hidden: false, sortable: false },\n    //            { field: "Isocode", caption: VIS.translatedTexts.TrxCurrency, size: \'105px\', hidden: false },\n    //            { field: "ConversionName", caption: VIS.translatedTexts.C_ConversionType_ID, size: \'105px\', hidden: false, sortable: false },\n    //            {\n    //                field: "ConvertedAmount", caption: VIS.Msg.getMsg("Amount"), size: \'150px\', hidden: false, sortable: false, render: function (record, index, col_index) {\n    //                    var val = record["ConvertedAmount"];\n    //                    return parseFloat(val).toLocaleString(navigator.language, { maximumFractionDigits: stdPrecision, minimumFractionDigits: stdPrecision });\n    //                }\n    //            },\n    //            {\n    //                field: "OpenAmount", caption: VIS.translatedTexts.OpenAmount, size: \'150px\', hidden: false, sortable: false, render: function (record, index, col_index) {\n    //                    var val = record["OpenAmount"];\n    //                    return parseFloat(val).toLocaleString(navigator.language, { maximumFractionDigits: stdPrecision, minimumFractionDigits: stdPrecision });\n    //                }\n    //            },\n    //            {\n    //                field: "AppliedAmt", caption: VIS.translatedTexts.AppliedAmount, size: \'150px\', hidden: false, sortable: false, render: function (record, index, col_index) {\n    //                    var val = record["AppliedAmt"];\n    //                    return parseFloat(val).toLocaleString(navigator.language, { maximumFractionDigits: stdPrecision, minimumFractionDigits: stdPrecision });\n    //                }\n    //            },\n    //            {\n    //                field: "DATEDOC", caption: VIS.translatedTexts.Date, render: function (record, index, col_index) {\n    //                    var val = record["DATEDOC"];\n    //                    return new Date(val).toLocaleDateString();\n    //                }, size: \'80px\', hidden: true\n    //            },\n    //            { field: "GL_JOURNALLINE_ID", caption: VIS.translatedTexts.GL_JOURNALLINE_ID, size: \'150px\', hidden: true },\n    //            { field: "C_ConversionType_ID", caption: VIS.translatedTexts.C_ConversionType_ID, size: \'85px\', hidden: true },\n    //            { field: "GL_Journal_ID", caption: VIS.translatedTexts.C_ConversionType_ID, size: \'85px\', hidden: true }\n    //        ],\n    //        onClick: function (event) {\n    //            glCellClicked(event);\n    //            getMaxDate();\n    //        },\n    //        onChange: function (event) {\n    //            // glCellChanged(event);\n    //            glCellChanged(event);\n    //            //alert("onChange");\n    //        },\n    //        //onDblClick: function (event) {\n    //        //    glDoubleClicked(event);\n    //        //},\n    //        onSelect: function (event) {\n    //            if (event.all) {\n    //                event.onComplete = function () {\n    //                    //alert("eventall");\n    //                    //$divPayment.find(\'#grid_openformatgrid_records\').on(\'scroll\', cartPaymentScroll);\n    //                }\n    //            }\n    //            //else\n    //            //  alert("eventSingle");\n    //        },\n    //        //on edit grid columns need to prevent dot or comma according to culture\n    //        onEditField: function (event) {\n    //            event.onComplete = function (event) {\n    //                id = event.recid;\n    //                if (event.column == 14 || event.column == 13 || event.column == 10) {\n    //                    $(\'#grid_openformatgrid_rec_\' + $self.windowNo + \'_edit_\' + id + \'_\' + event.column).keydown(function (event) {\n    //                        var isDotSeparator = culture.isDecimalSeparatorDot(window.navigator.language);\n\n    //                        if (!isDotSeparator && (event.keyCode == 190 || event.keyCode == 110)) {// , separator\n    //                            return false;\n    //                        }\n    //                        else if (isDotSeparator && event.keyCode == 188) { // . separator\n    //                            return false;\n    //                        }\n    //                        if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n    //                            this.value = this.value.replace(\'.\', \'\');\n    //                        }\n    //                        if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n    //                            this.value = this.value.replace(\',\', \'\');\n    //                        }\n    //                        if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) &&\n    //                            (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105)\n    //                            && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110\n    //                            && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n    //                            return false;\n    //                        }\n    //                    });\n    //                }\n    //            };\n    //        }\n    //    });\n    //};\n\n    //to clear the Invoice Grid\n    function clrInvoice(e) {\n      var chk = $(\'#grid_\' + $gridInvoice.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n      for (var i = 0; i < chk.length; i++) {\n        $(chk[i]).prop(\'checked\', false);\n        //$(chk[i]).change(e);\n        $gridInvoice.editChange.call($gridInvoice, chk[i], i, 0, e);\n        var eData = {\n          "type": "click",\n          "phase": "before",\n          "target": "grid",\n          "recid": i,\n          "index": i,\n          "isStopped": false,\n          "isCan//celled": false,\n          "onComplete": null\n        };\n        $gridInvoice.trigger(eData);\n      }\n      selectedInvoices = [];\n      $invSelectAll.prop(\'checked\', false);\n      $cmbDocType.val(0);\n      $invDocbaseType.val(0);\n      $vInvPayMethod.setValue(null);\n      $srchInvoice.val(\'\');\n      $fromDate.val(\'\');\n      $toDate.val(\'\');\n      loadInvoice();\n    }\n    //to clear the GLLine Grid\n    function clrGLLine(e) {\n      var chk = $(\'#grid_\' + $glLineGrid.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n      for (var i = 0; i < chk.length; i++) {\n        $(chk[i]).prop(\'checked\', false);\n        //$(chk[i]).change(e);\n        $glLineGrid.editChange.call($glLineGrid, chk[i], i, 0, e);\n        var eData = {\n          "type": "click",\n          "phase": "before",\n          "target": "grid",\n          "recid": i,\n          "index": i,\n          "isStopped": false,\n          "isCan//celled": false,\n          "onComplete": null\n        };\n        $glLineGrid.trigger(eData);\n      }\n      SelectedGL = [];\n      $glSelectAll.prop(\'checked\', false);\n      $srchGL.val(\'\');\n      $gfromDate.val(\'\');\n      $gtoDate.val(\'\');\n      loadGLVoucher();\n    }\n    //to clear the Cash Grid\n    function clrCashLine(e) {\n      var chk = $(\'#grid_\' + $gridCashline.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n      for (var i = 0; i < chk.length; i++) {\n        $(chk[i]).prop(\'checked\', false);\n        //$(chk[i]).change(e);\n        $gridCashline.editChange.call($gridCashline, chk[i], i, 0, e);\n        var eData = {\n          "type": "click",\n          "phase": "before",\n          "target": "grid",\n          "recid": i,\n          "index": i,\n          "isStopped": false,\n          "isCan//celled": false,\n          "onComplete": null\n        };\n        $gridCashline.trigger(eData);\n      }\n      selectedCashlines = [];\n      $cashSelctAll.prop(\'checked\', false);\n      $srchCashJournal.val(\'\');\n      $cashPayType.val(0);\n      $cfromDate.val(\'\');\n      $ctoDate.val(\'\');\n      loadUnallocatedCashLines();\n    }\n    //to clear the Payment Grid\n    function clrPayment(e) {\n      var chk = $(\'#grid_\' + $gridPayment.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n      for (var i = 0; i < chk.length; i++) {\n        $(chk[i]).prop(\'checked\', false);\n        //$(chk[i]).change(e);\n        $gridPayment.editChange.call($gridPayment, chk[i], i, 0, e);\n        var eData = {\n          "type": "click",\n          "phase": "before",\n          "target": "grid",\n          "recid": i,\n          "index": i,\n          "isStopped": false,\n          "isCan//celled": false,\n          "onComplete": null\n        };\n        $gridPayment.trigger(eData);\n      }\n      selectedPayments = [];\n      $paymentSelctAll.prop(\'checked\', false);\n      $payDocbaseType.val(0);\n      $payDocType.val(0);\n      $vPayMethod.setValue(null);\n      $srchPayment.val(\'\');\n      $pfromDate.val(\'\');\n      $ptoDate.val(\'\');\n      loadUnallocatedPayments();\n    }\n\n    //to load Data in GL Grid\n    function loadGLDataGrid(e) {\n      if (!$glLineGrid) {\n        loadGLGrid();\n        $($($glLineGrid.box)[0]).find(\'.w2ui-search-down\').css(\'margin-top\', \'4px\');\n        $($($glLineGrid.box)[0]).find(\'.w2ui-search-clear\').css(\'margin-top\', \'4px\');\n        $(\'.vis-allocate-glSum\').css(\'text-align\', \'right\');\n        $(\'.vis-allocate-glSum\').css(\'margin-right\', \'10px\');\n      }\n      if (!$gridInvoice) {\n        loadInvoice();\n      }\n      if ($vchkGlVoucher.is(\':checked\')) {\n        $bsyDiv[0].style.visibility = "visible";\n        readOnlyGL = false;\n        //Set False to select all \n        $glSelectAll.prop(\'checked\', false);\n        $invSelectAll.prop(\'checked\', false);\n        $glLineGrid.refresh();\n        loadGLVoucher();\n      } else {\n        $vchkAllocation.prop(\'checked\', false);\n        $vchkGlInvoice.prop(\'checked\', false);\n        $glLineGrid.clear();\n        //$divChkGLInvoice.css(\'display\', \'none\');\n        readOnlyGL = true;\n        $glSelectAll.prop(\'checked\', false);\n        $invSelectAll.prop(\'checked\', false);\n        vchkapplocationChange();\n        if ($gridInvoice) {\n          $gridInvoice.refresh();\n        }\n      }\n      if ($gridInvoice) {\n        var chk = $(\'#grid_\' + $gridInvoice.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n        for (var i = 0; i < chk.length; i++) {\n          $(chk[i]).prop(\'checked\', $invSelectAll.prop("checked"));\n          //$(chk[i]).change(e);\n          $gridInvoice.editChange.call($gridInvoice, chk[i], i, 0, e);\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": i,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $gridInvoice.trigger(eData);\n        }\n      }\n      displayGrids($allocationFrom.val(), $allocationTo.val());\n    }\n    ;\n    //to load all grids \n    function loadGrids(value) {\n      if (value == "P") {\n        if ($gridPayment) {\n          $gridPayment.refresh();\n        }\n      } else if (value == "C") {\n        if ($gridCashline) {\n          $gridCashline.refresh();\n        }\n      } else if (value == "I") {\n        if ($gridInvoice) {\n          $gridInvoice.refresh();\n        }\n      } else if (value == "G") {\n        if ($glLineGrid) {\n          $glLineGrid.refresh();\n        }\n      }\n    }\n    ;\n    // to display grids based on selected allocation From and TO\n    function displayGrids(allocFrm, allocTo) {\n      $row2.css(\'display\', \'none\'); // Payment Grid\n      $row3.css(\'display\', \'none\'); // Cash Grid\n      $row4.css(\'display\', \'none\'); // Invoice Grid\n      $row5.css(\'display\', \'none\'); // GL journal grid\n      readOnlyCash = true;\n      readOnlyPayment = true;\n      readOnlyGL = true;\n      if (allocFrm == "P") {\n        readOnlyPayment = false;\n        $row2.css(\'display\', \'block\'); // Payment Grid\n        if ($gridPayment) {\n          $gridPayment.clear();\n        }\n        //////loadUnallocatedPayments();\n      } else if (allocFrm == "C") {\n        readOnlyCash = false;\n        $row3.css(\'display\', \'block\'); // Cash Grid\n        if ($gridCashline) {\n          $gridCashline.clear();\n        }\n        //////loadUnallocatedCashLines();\n      } else if (allocFrm == "I") {\n        $row4.css(\'display\', \'block\'); // Invoice Grid\n        if ($gridInvoice) {\n          $gridInvoice.clear();\n        }\n        //////if ($gridInvoice) {\n        //////    loadInvoice();\n        //////}\n      } else if (allocFrm == "G") {\n        $row5.css(\'display\', \'block\'); // GL journal grid\n        //$bsyDiv[0].style.visibility = "visible";\n        readOnlyGL = false;\n        if ($glLineGrid) {\n          $glLineGrid.clear();\n        }\n        //////loadGLVoucher();\n      }\n      if (allocTo == "P") {\n        readOnlyPayment = false;\n        $row2.css(\'display\', \'block\'); // Payment Grid\n        if ($gridPayment) {\n          $gridPayment.clear();\n        }\n        //////loadUnallocatedPayments();\n      } else if (allocTo == "C") {\n        readOnlyCash = false;\n        $row3.css(\'display\', \'block\'); // Cash Grid\n        if ($gridCashline) {\n          $gridCashline.clear();\n        }\n        //////loadUnallocatedCashLines();\n      } else if (allocTo == "I") {\n        $row4.css(\'display\', \'block\'); // Invoice Grid\n        if ($gridInvoice) {\n          $gridInvoice.clear();\n        }\n        ////////if ($gridInvoice) {\n        ////////    loadInvoice();\n        ////////}\n      } else if (allocTo == "G") {\n        $row5.css(\'display\', \'block\'); // GL journal grid\n        //$bsyDiv[0].style.visibility = "visible";\n        readOnlyGL = false;\n        if ($glLineGrid) {\n          $glLineGrid.clear();\n        }\n        ////////loadGLVoucher();\n      }\n    }\n    ;\n    //function to clear the selection of invoices\n    function clearInvoiceArrays(e) {\n      if ($gridInvoice != null) {\n        var chk = $(\'#grid_\' + $gridInvoice.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n        for (var i = 0; i < chk.length; i++) {\n          $(chk[i]).prop(\'checked\', false);\n          //$(chk[i]).change(e);\n          $gridInvoice.editChange.call($gridInvoice, chk[i], i, 0, e);\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": i,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $gridInvoice.trigger(eData);\n        }\n        selectedInvoices = [];\n      }\n    }\n    ;\n    //end\n\n    function fillLookups() {\n      var data = null;\n      //var value = VIS.MLookupFactory.getMLookUp(ctx, self.windowNo, 3505, VIS.DisplayType.TableDir);\n      var value = VIS.MLookupFactory.get(ctx, self.windowNo, 0, VIS.DisplayType.TableDir, "C_Currency_ID", 0, false, "IsMyCurrency=\'Y\'"); //shown the records only IsMycurrency is true.\n      data = value.getData(true, true, false, false);\n      var flag = 0;\n      if (data != null && data != undefined && data.length > 0) {\n        for (var i = 0; i < data.length; i++) {\n          $cmbCurrency.append(\'<option value=\' + data[i].Key + \'>\' + data[i].Name + \'</option>\');\n          if (data[i].Key == _C_Currency_ID) {\n            $cmbCurrency.val(_C_Currency_ID);\n            flag = 1;\n          }\n        }\n        if (flag == 0) {\n          $cmbCurrency.val(0);\n          $cmbCurrency.addClass(\'vis-ev-col-mandatory\');\n        }\n      }\n      //VIS_045 DevOps TaskID:2351 Date: 29 Aug, 2023 - Filter Business Partner according to MRole\n      value = VIS.MLookupFactory.get(ctx, self.windowNo, 2758, VIS.DisplayType.Search, "C_BPartner_ID", 0, false, "C_BPartner.IsActive =\'Y\' And C_Bpartner.IsSummary =\'N\' ");\n      //value = VIS.MLookupFactory.getMLookUp(ctx, self.windowNo, 2754, VIS.DisplayType.Search);\n      $vSearchBPartner = new VIS.Controls.VTextBoxButton("C_BPartner_ID", true, false, true, VIS.DisplayType.Search, value);\n\n      //VIS_0045: create and assin control to conversion type\n      value = VIS.MLookupFactory.get(ctx, self.windowNo, 10294, VIS.DisplayType.TableDir, "C_ConversionType_ID", 0, false, "C_ConversionType.IsActive = \'Y\' AND C_ConversionType.AD_Org_ID IN (0, @OrgID@)");\n      $vConversionType = new VIS.Controls.VComboBox("C_ConversionType_ID", false, false, true, value, 50);\n      value = VIS.MLookupFactory.get(ctx, self.windowNo, 0, VIS.DisplayType.TableDir, "VA009_PaymentMethod_ID", 0, false, "VA009_PAYMENTMETHOD.VA009_PAYMENTMETHOD_ID IN (SELECT VA009_PAYMENTMETHOD_ID FROM VA009_PAYMENTMETHOD WHERE VA009_PAYMENTBASETYPE NOT IN (\'B\',\'C\',\'P\') )");\n      $vPayMethod = new VIS.Controls.VComboBox("VA009_PaymentMethod_ID", false, false, true, value, 50);\n      value = VIS.MLookupFactory.get(ctx, self.windowNo, 0, VIS.DisplayType.TableDir, "VA009_PaymentMethod_ID", 0, false, "VA009_PAYMENTMETHOD.IsActive=\'Y\' AND VA009_PAYMENTMETHOD.AD_Client_ID = @AD_Client_ID@");\n      $vInvPayMethod = new VIS.Controls.VComboBox("VA009_PaymentMethod_ID", false, false, true, value, 50);\n    }\n    ;\n\n    // Set Mandatory and non mandatory---Neha\n    function SetMandatory(Value) {\n      if (Value) return \'#FFB6C1\';else return \'White\';\n    }\n    ;\n\n    //load PaymentType Dropdown for filter the records in Cash Journal Line.\n    function loadPaymentType() {\n      $.ajax({\n        type: "POST",\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetPaymentType",\n        dataType: "json",\n        success: function (data) {\n          var result = JSON.parse(data);\n          if (result) {\n            $cashPayType.empty();\n            //removed static text suggested by ashish\n            $cashPayType.append("<option value=\'0\'></option>");\n            for (var i = 0; i < result.length; i++) {\n              paymentType = VIS.Utility.Util.getValueOfString(result[i].Name);\n              paymentType_ID = VIS.Utility.Util.getValueOfString(result[i].Value);\n              $cashPayType.append(" <option value=" + paymentType_ID + ">" + paymentType + "</option>");\n            }\n          } else {\n            //removed static text suggested by ashsih\n            $cashPayType.append("<option value= \'0\'></option>");\n          }\n          $cashPayType.prop(\'selectedIndex\', 0);\n        },\n        error: function (er) {\n          console.log(er);\n        }\n      });\n    }\n    ;\n\n    //load payDocbaseType to filter the records in the invoice grid\n    function loadinvDocbaseType() {\n      $.ajax({\n        type: "POST",\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetDocbaseType",\n        dataType: "json",\n        success: function (data) {\n          var result = JSON.parse(data);\n          if (result) {\n            $invDocbaseType.empty();\n            $invDocbaseType.append("<option value=\'0\'></option>");\n            for (var i = 0; i < result.length; i++) {\n              docBaseType = VIS.Utility.Util.getValueOfString(result[i].DocbaseType);\n              docBaseName = VIS.Utility.Util.getValueOfString(result[i].Name);\n              $invDocbaseType.append(" <option value=" + docBaseType + ">" + docBaseName + "</option>");\n            }\n          } else {\n            $invDocbaseType.append("<option value= \'0\'></option>");\n          }\n          $invDocbaseType.prop(\'selectedIndex\', 0);\n        },\n        error: function (er) {\n          console.log(er);\n        }\n      });\n    }\n    ;\n    //load payDocbaseType to filter the records in the Payment grid\n    function loadpayDocbaseType() {\n      $.ajax({\n        type: "POST",\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetpayDocbaseType",\n        dataType: "json",\n        success: function (data) {\n          var result = JSON.parse(data);\n          if (result) {\n            $payDocbaseType.empty();\n            $payDocbaseType.append("<option value=\'0\'></option>");\n            for (var i = 0; i < result.length; i++) {\n              docbaseType = VIS.Utility.Util.getValueOfString(result[i].DocbaseType);\n              docBaseName = VIS.Utility.Util.getValueOfString(result[i].Name);\n              $payDocbaseType.append(" <option value=" + docbaseType + ">" + docBaseName + "</option>");\n            }\n          } else {\n            $payDocbaseType.append("<option value=\'0\'></option>");\n          }\n          $payDocbaseType.prop(\'selectedIndex\', 0);\n        },\n        error: function (er) {\n          console.log(er);\n        }\n      });\n    }\n    ;\n    //load payDocType for payment grid to filter the records.\n    function loadpayDocType() {\n      $.ajax({\n        type: "POST",\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetpayDocType",\n        dataType: "json",\n        success: function (data) {\n          var result = JSON.parse(data);\n          if (result) {\n            $payDocType.empty();\n            $payDocType.append("<option value=\'0\'></option>");\n            for (var i = 0; i < result.length; i++) {\n              docType = VIS.Utility.Util.getValueOfString(result[i].DocType);\n              c_DocType_ID = VIS.Utility.Util.getValueOfInt(result[i].C_DocType_ID);\n              $payDocType.append(" <option value=" + c_DocType_ID + ">" + docType + "</option>");\n            }\n          } else {\n            $payDocType.append("<option value= 0></option>");\n          }\n          $payDocType.prop(\'selectedIndex\', 0);\n        },\n        error: function (er) {\n          console.log(er);\n        }\n      });\n    }\n    ;\n    //-------Load Document Type Grid-----------Neha------------\n\n    function loadDocType() {\n      $.ajax({\n        type: "POST",\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetDocType",\n        dataType: "json",\n        success: function (data) {\n          var result = JSON.parse(data);\n          if (result) {\n            $cmbDocType.empty();\n            $cmbDocType.append("<option value= 0></option>");\n            for (var i = 0; i < result.length; i++) {\n              docType = VIS.Utility.Util.getValueOfString(result[i].DocType);\n              c_DocType_ID = VIS.Utility.Util.getValueOfInt(result[i].C_DocType_ID);\n              $cmbDocType.append(" <option value=" + c_DocType_ID + ">" + docType + "</option>");\n            }\n          } else {\n            $cmbDocType.append("<option value= 0 ></option>");\n          }\n          $cmbDocType.prop(\'selectedIndex\', 0);\n        },\n        error: function (er) {\n          console.log(er);\n        }\n      });\n    }\n    ;\n\n    //-----Load Invoice Grid----Neha\n    function loadInvoice() {\n      if (_C_BPartner_ID > 0) {\n        AD_Org_ID = $OrgFilter.val();\n        _C_Currency_ID = $cmbCurrency.val();\n        if (_C_Currency_ID == 0) {\n          return VIS.ADialog.info("Message", true, "select currency", "");\n        }\n        fromDate = $fromDate.val();\n        toDate = $toDate.val();\n        //---If ToDate is less than From Date--Display error message-----Neha\n        if (toDate != "") {\n          if (fromDate > toDate) {\n            $toDate.val(\'\');\n            return VIS.ADialog.info("Message", true, VIS.Msg.getMsg("VIS_FromDateGreater"), "");\n          }\n        }\n        $bsyDiv[0].style.visibility = "visible";\n        pageNoInvoice = 1, gridPgnoInvoice = 1, invoiceRecord = 0;\n        isInvoiceGridLoaded = false;\n        C_ConversionType_ID = 0;\n        var chk = $vchkMultiCurrency.is(\':checked\');\n        var getDate = null;\n        date = $date.val();\n        if (date != null && date != undefined && date != "") {\n          getDate = VIS.DB.to_date(date);\n        } else getDate = VIS.DB.to_date(new Date());\n        //---Get values and pass values to the controller----Neha\n        docNo = $txtDocNo.val();\n        c_docType_ID = $cmbDocType.val();\n        docBaseType = $invDocbaseType.val();\n        payMethod_ID = VIS.Utility.Util.getValueOfInt($vInvPayMethod.getValue());\n        srchText = $srchInvoice.val();\n        if (fromDate != null && fromDate != undefined && fromDate != "") {\n          VIS.DB.to_date(fromDate);\n        }\n        if (toDate != null && toDate != undefined && toDate != "") {\n          VIS.DB.to_date(toDate);\n        }\n        $.ajax({\n          url: VIS.Application.contextUrl + "PaymentAllocation/GetInvoice",\n          data: {\n            AD_Org_ID: AD_Org_ID,\n            _C_Currency_ID: _C_Currency_ID,\n            _C_BPartner_ID: _C_BPartner_ID,\n            isInterBPartner: _isInterBPartner,\n            chk: chk,\n            date: getDate,\n            page: pageNoInvoice,\n            size: PAGESIZE,\n            docNo: docNo,\n            c_docType_ID: c_docType_ID,\n            docBaseType: docBaseType,\n            PaymentMethod_ID: payMethod_ID,\n            fromDate: fromDate,\n            toDate: toDate,\n            conversionDate: conversionDate,\n            srchText: srchText,\n            isInterComp: _isInterCompany,\n            conversionType_ID: $vConversionType.getValue()\n          },\n          async: true,\n          success: function (result) {\n            var data = JSON.parse(result);\n            if (data) {\n              if (pageNoInvoice == 1 && data.length > 0) {\n                invoiceRecord = data[0].InvoiceRecord;\n                gridPgnoInvoice = Math.ceil(invoiceRecord / PAGESIZE);\n              }\n\n              //if any invoice is selected and we load another invoice from db than we have to check weather that invoice is already selected or not. if already selected tha skip that.\n              if (selectedInvoices.length > 0) {\n                totalselectedinv = selectedInvoices.length;\n                for (var i = 0; i < data.length; i++) {\n                  var filterObj = selectedInvoices.filter(function (e) {\n                    return e.C_InvoicePaySchedule_ID == data[i]["C_InvoicePaySchedule_ID"];\n                  });\n                  if (filterObj.length == 0) {\n                    data[i]["recid"] = selectedInvoices.length + i;\n                    selectedInvoices.push(data[i]);\n                  }\n                }\n                data = selectedInvoices;\n                // Clear Selected invoices array when we de-select the select all checkbox. work done for to hold all the selected invoices\n                selectedInvoices = [];\n              }\n              //end\n\n              bindInvoiceGrid(data, chk);\n              //Amount\n              _openInv = 9;\n              // _discount = chk ? 7 : 5;\n              _discount = 10;\n              _writeOff = 13;\n              _applied = 14;\n              //added window no to find grid to implement scroll  issue : scroll was not working properly\n              $divInvoice.find(\'#grid_openformatgridinvoice_\' + $self.windowNo + \'_records\').on(\'scroll\', cartInvoiceScroll);\n              isInvoiceGridLoaded = true;\n              isBusyIndicatorHidden();\n            }\n          },\n          error: function (err) {\n            $bsyDiv[0].style.visibility = "hidden";\n          }\n        });\n      }\n    }\n    ;\n\n    //----Laod Comobo Allocation From and Allocation To\n    function loadAllocationCmb() {\n      $allocationFrom.empty();\n      $allocationTo.empty();\n      $allocationFrom.append("<option value=0></option>");\n      $allocationTo.append("<option value=0></option>");\n      $allocationFrom.append(\'<option value="C">\' + VIS.translatedTexts.C_Cash_ID + \'</option>\');\n      $allocationTo.append(\'<option value="C">\' + VIS.translatedTexts.C_Cash_ID + \'</option>\');\n      $allocationFrom.append(\'<option value="I">\' + VIS.translatedTexts.C_Invoice_ID + \'</option>\');\n      $allocationTo.append(\'<option value="I">\' + VIS.translatedTexts.C_Invoice_ID + \'</option>\');\n      $allocationFrom.append(\'<option value="G">\' + VIS.translatedTexts.GL_Journal_ID + \'</option>\');\n      $allocationTo.append(\'<option value="G">\' + VIS.translatedTexts.GL_Journal_ID + \'</option>\');\n      $allocationFrom.append(\'<option value="P">\' + VIS.translatedTexts.C_Payment_ID + \'</option>\');\n      $allocationTo.append(\'<option value="P">\' + VIS.translatedTexts.C_Payment_ID + \'</option>\');\n    }\n    ;\n    function createRow1() {\n      //to do design\n      var $divOrg = $(\'<div class="vis-allocation-leftControls">\');\n      $divOrg.append(\'<div class="input-group vis-input-wrap"><div class="vis-control-wrap"><select class="vis-allocation-currencycmb" id=VIS_Org_\' + $self.windowNo + \'></select><label title="View organization" >\' + VIS.translatedTexts.AD_Org_ID + \'</label>\');\n      var $divBp = $(\'<div class="vis-allocation-leftControls">\');\n      var $Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var $Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      var $Leftformfieldbtnwrap = $(\'<div class="input-group-append">\');\n      $divBp.append($Leftformfieldwrp);\n      $Leftformfieldwrp.append($Leftformfieldctrlwrp);\n      $Leftformfieldwrp.append($Leftformfieldbtnwrap);\n      $Leftformfieldctrlwrp.append($vSearchBPartner.getControl().addClass("vis-allocation-bpartner").attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \')).append(\'<label>\' + VIS.translatedTexts.C_BPartner_ID + \'</label>\');\n      $Leftformfieldbtnwrap.append($vSearchBPartner.getBtn(0));\n      var $divCu = $(\'<div class="vis-allocation-leftControls">\');\n      var $Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var $Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      $divCu.append($Leftformfieldwrp);\n      $Leftformfieldwrp.append($Leftformfieldctrlwrp);\n      $Leftformfieldctrlwrp.append($cmbCurrency).append(\'<label>\' + VIS.translatedTexts.C_Currency_ID + \'</label>\');\n      $innerRow.append($divOrg).append($divBp).append($divCu);\n\n      //added for sequence of multicurrency checkbox\n      var $multiCurr = $(\'<div class="vis-allocation-leftControls">\' + \'<div class="input-group vis-input-wrap">\' + \'<div class="vis-control-wrap">\' + \'<label class="vis-ec-col-lblchkbox">\' + \'<input name="vchkMultiCurrency" class="vis-allocation-multicheckbox" type="checkbox">\' + VIS.Msg.getMsg("MultiCurrency") + \'</label>\' + \'</div></div></div>\' + \'<div class="vis-allocation-leftControls" id = VIS_cnvrDateDiv_\' + $self.windowNo + \' >\' + \'<div class="input-group vis-input-wrap">\' + \'<div class="vis-control-wrap">\' + \'<input  class="vis-allocation-date" style="display:block;" id=VIS_cmbConversionDate_\' + $self.windowNo + \' type="date" max="9999-12-31">\' + \'<label title="View allocation will be created on this date" type="date" >\' + VIS.Msg.getMsg("ConversionDate") + \'</label>\' + \'</div></div></div>\');\n      $innerRow.append($multiCurr);\n\n      // VIS_0045: Add Currency Type\n      $divCu = $(\'<div class="vis-allocation-leftControls vis-conversionType" style="display:none">\');\n      $Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      $Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      $divCu.append($Leftformfieldwrp);\n      $Leftformfieldwrp.append($Leftformfieldctrlwrp);\n      $Leftformfieldctrlwrp.append($vConversionType.getControl()).append(\'<label>\' + VIS.translatedTexts.C_ConversionType_ID + \'</label>\');\n      $innerRow.append($divCu);\n      //end\n\n      //added for enhancement of new combo regarding allocation from and to\n      var $divallocFrom = $(\'<div class="vis-allocation-leftControls">\');\n      var $Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var $Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      $divallocFrom.append($Leftformfieldwrp);\n      $Leftformfieldwrp.append($Leftformfieldctrlwrp);\n      $Leftformfieldctrlwrp.append($allocationFrom).append(\'<label> \' + VIS.Msg.getMsg("AllocationFrom") + \'</label>\');\n      var $divallocTo = $(\'<div class="vis-allocation-leftControls">\');\n      var $Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var $Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      $divallocTo.append($Leftformfieldwrp);\n      $Leftformfieldwrp.append($Leftformfieldctrlwrp);\n      $Leftformfieldctrlwrp.append($allocationTo).append(\'<label> \' + VIS.Msg.getMsg("AllocationTo") + \'</label>\');\n      $innerRow.append($divallocFrom).append($divallocTo);\n      //end\n\n      var $rowOne = $(\'<div class="vis-allocation-leftControls" id="cashMaindiv"  style="display: none !important;">\' + \'<input  class="vis-allocation-cashbox"  type="checkbox">\' + \'<label>\' + VIS.Msg.getMsg("Cash") + \'</label>\' + \'</div>\'\n      //Added checkbox for gl-allocation\n      + \'<div class="vis-allocation-leftControls" id="glMaindiv" style="display: none !important;">\' + \'<input  class="vis-allocation-glvoucher"  type="checkbox">\' + \'<label>\' + VIS.Msg.getMsg("GL Voucher") + \'</label>\' + \'</div>\'\n      // + \'<div class="vis-allocation-leftControls vis-allocation-glinvoiceDiv" style="display: none !important;">\'\n\n      // + \'<input  class="vis-allocation-glinvoice"  type="checkbox">\'\n      // + \'<label>\' + VIS.translatedTexts.C_Invoice_ID + \'</label>\'\n      // + \'</div>\'\n\n      //end\n      //+ \'<div class="vis-allocation-leftControls">\'\n      //+ \'<input  class="vis-allocation-autowriteoff"  type="checkbox">\'\n      //+ \'<label>\' + VIS.Msg.getMsg("AutoWriteOff") + \'</label>\'\n      //+ \'</div>\'\n      //inter company checkbox and label added \n      + \'<div class="vis-allocation-leftControls"> <div class= "input-group vis-input-wrap" > <div class="vis-control-wrap"> \' + \'<label class="vis-ec-col-lblchkbox">\' + \'<input id=VIS_chkbxICompanyAllocation_\' + $self.windowNo + \' class="vis-allocation-interComp" type="checkbox">\' + VIS.Msg.getMsg("InterCompanyAllocation") + \'</label>\' + \'</div> </div> </div>\' + \'<div class="vis-allocation-leftControls"> <div class= "input-group vis-input-wrap" > <div class="vis-control-wrap">\' + \'<label class="vis-ec-col-lblchkbox">\' + \'<input id=VIS_chkbxBPAllocation_\' + $self.windowNo + \' class="vis-allocation-interBP" type="checkbox">\' + VIS.Msg.getMsg("BPAllocation") + \'</label>\' + \'</div></div> </div>\'\n      //---------------------------Added new parameters----Neha----3 August 2018---Asked by Amit\n      //+ \'<div class="vis-allocation-leftControls">\'\n      //+ \'<div class="panel-group" style="margin: 0px;" id="accordion" role="tablist" aria-multiselectable="true">\'\n      //+ \'<div class="panel panel-default">\'\n      //+ \'<div class="panel-heading" role="tab" id="headingOne">\'\n      //+ \'<h4 class="panel-title">\'\n      //+ \'<a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne" class="VIS-Accordion-head collapsed"><span>\' + VIS.Msg.getMsg("InvoiceFilter")\n      //+ \'</span><i class="glyphicon glyphicon-chevron-down pull-right"></i>\'\n      //+ \'</a>\'\n      //+ \'</h4>\'\n      //+ \'</div>\'\n      //+ \'<div id="collapseOne" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne" style="height: 0px;">\'\n      //+ \'<div class="panel-body" style=" overflow: auto; height: 140px !important; ">\'\n      //+ \'<div class="vis-allocation-leftControls">\'\n      //+ \'<span class="vis-allocation-inputLabels">\' + VIS.Utility.encodeText(VIS.Msg.getMsg("Document_No")) + \'</span>\'\n      //+ \' <input class="vis-allocation-docNo" type="textbox"></input>\'\n      //+ \'</div>\'\n      //+ \'<div class="vis-allocation-leftControls vis-allocation-cmbdoctype">\'\n      //+ \'<span class="vis-allocation-inputLabels">\' + VIS.Msg.getMsg("DocType") + \'</span>\'\n      //+ \'</div>\'\n      //+ \'</div>\'\n      //+ \'</div>\'\n      //+ \'</div>\'\n      //+ \'</div>\'\n      //+ \'</div>\'\n      //+ \'</div>\'\n      );\n      $innerRow.append($rowOne);\n      //$rowOne.find(".vis-allocation-cmbdoctype .vis-control-wrap").append($cmbDocType).append(\'<label>\' + VIS.Msg.getMsg("DocType") + \'</label>\');\n      $rowOne.find(".panel-body").append(\'<div class="vis-allocation-leftControls">\' + \'<div class="input-group vis-input-wrap">\' + \'<div class="vis-control-wrap">\' + \'<input  class="vis-allocation-fromDate"  type="date">\' + \'<label>\' + VIS.Msg.getMsg("VIS_FromDate") + \'</label>\' + \'</div></div></div>\' + \'<div class="vis-allocation-leftControls">\' + \'<div class="input-group vis-input-wrap">\' + \'<div class="vis-control-wrap">\' + \'<input  class="vis-allocation-toDate"  type="date">\' + \'<label>\' + VIS.Msg.getMsg("VIS_ToDate") + \'</label>\' + \'</div></div></div>\');\n      //$divBp.find(".vis-allocation-bpartner").css(\'width\', \'calc(100% - 30px)\');\n      //-----------Neha-----------------\n      $vchkMultiCurrency = $innerRow.find(\'.vis-allocation-multicheckbox\');\n      $vchkAllocation = $innerRow.find(\'.vis-allocation-cashbox\');\n      //Added for gl-allocation\n      $vchkGlVoucher = $innerRow.find(\'.vis-allocation-glvoucher\');\n      $vchkGlInvoice = $innerRow.find(\'.vis-allocation-glinvoice\');\n      //$divChkGLInvoice = $innerRow.find(\'.vis-allocation-glinvoiceDiv\');\n      //end\n      //$vchkAutoWriteOff = $innerRow.find(\'.vis-allocation-autowriteoff\');\n\n      //-----get controls values------------------\n      $txtDocNo = $innerRow.find(\'.vis-allocation-docNo\');\n      //$fromDate = $innerRow.find(\'.vis-allocation-fromDate\');\n      //$toDate = $innerRow.find(\'.vis-allocation-toDate\');\n      //------------------------------------------\n      var $resultDiv = $(\'<div class="vis-allocation-resultdiv">\');\n      $resultDiv.append(\'<div class="vis-allocation-leftControls">\' + \'<span class="vis-allocation-inputLabels">\' + VIS.Msg.getMsg("Difference") + \'</span>\');\n      $resultDiv.append(\'<div class="vis-allocation-leftControls" style=" margin-bottom: 10px; ">\' + \'<span class="vis-allocation-lblCurrnecy"></span>\' + \'<span class="vis-allocation-lbldifferenceAmt" style="float:right;">\' + \'</span>\');\n      $resultDiv.append(\'<div class="vis-allocation-leftControls"><div class="input-group vis-input-wrap"><div class="vis-control-wrap"> <select class="vis-allocation-currencycmb" id=VIS_cmbOrg_\' + $self.windowNo + \'></select><label title=\' + VIS.Msg.getMsg("VIS_AllocOrgTitle") + \'>\' + VIS.Msg.getMsg("VIS_AllocOrg") + \'</label>\');\n      $resultDiv.append(\'<div class="vis-allocation-leftControls">\' + \'<div class="input-group vis-input-wrap">\' + \'<div class="vis-control-wrap">\' + \'<input  class="vis-allocation-date" disabled  id=VIS_cmbDate_\' + $self.windowNo + \' type="date">\' + \'<label title="View allocation will be created on this date" type="date" >\' + VIS.Msg.getMsg("TransactionDate") + \'</label>\' + \'</div></div></div>\');\n      $resultDiv.append(\'<div class="vis-allocation-leftControls">\' + \'<div class="input-group vis-input-wrap">\' + \'<div class="vis-control-wrap">\' + \'<input  class="vis-allocation-date" disabled id=VIS_cmbAcctDate_\' + $self.windowNo + \' type="date">\' + \'<label title="View allocation will be created on this date" type="date" >\' + VIS.Msg.getMsg("DateAcct") + \'</label>\' + \'</div></div></div>\');\n      $innerRow.append($resultDiv);\n      $date = $innerRow.find(\'#VIS_cmbDate_\' + $self.windowNo);\n      $date.val(Globalize.format(new Date(), "yyyy-MM-dd"));\n      $dateAcct = $innerRow.find(\'#VIS_cmbAcctDate_\' + $self.windowNo);\n      $dateAcct.val(Globalize.format(new Date(), "yyyy-MM-dd"));\n      $conversionDate = $innerRow.find(\'#VIS_cmbConversionDate_\' + $self.windowNo);\n      $conversionDiv = $innerRow.find(\'#VIS_cnvrDateDiv_\' + $self.windowNo);\n      $conversionDiv.css(\'display\', \'none\');\n      $cmbOrg = $innerRow.find(\'#VIS_cmbOrg_\' + $self.windowNo);\n      $OrgFilter = $innerRow.find(\'#VIS_Org_\' + $self.windowNo);\n      $vchkBPAllocation = $innerRow.find(\'#VIS_chkbxBPAllocation_\' + $self.windowNo);\n      $vchICompanyAllocation = $innerRow.find(\'#VIS_chkbxICompanyAllocation_\' + $self.windowNo);\n    }\n    ;\n    function createRow2() {\n      $row2.append(\'<div class="d-flex doc-allocation"><div class="vis-doc-AllocOuter-wrap"><div><p>\' + VIS.translatedTexts.C_Payment_ID + \'</p>  <input type="checkbox" id="paymentselectall" /><p style="margin: 0 4px;"></p> <span id="pclrbutton_\' + $self.windowNo + \'" style="cursor: pointer;margin: 2px 0 0;" class="glyphicon glyphicon-refresh" title=\' + VIS.Msg.getMsg("Reset") + \'></span></div><p class="vis-allocate-paymentSum"> 0 \' + VIS.Msg.getMsg("SelectedLines") + \' - \' + summation + \' 0.00</p></div> <div class="vis-allocation-topFields-wrap"><div class="input-group vis-input-wrap"><div class="vis-control-wrap"><input placeholder="\' + VIS.Msg.getMsg("SearchResults") + \'" data-hasbtn=" " type="text" id="paySrch\' + $self.windowNo + \'" /><label>\' + VIS.Msg.getMsg("SearchResults") + \'</label></div><div class="input-group-append"><a class="input-group-text" id="_SrchpBtn_\' + $self.windowNo + \'"><span class="glyphicon glyphicon-search"></span></a></div></div><div class="input-group vis-input-wrap" id="docType_\' + $self.windowNo + \'"></div><div class="payBaseType input-group vis-input-wrap" id="docbaseType_\' + $self.windowNo + \'"></div>\' + \'<div class="payMethod input-group vis-input-wrap" id="payPayMethod_\' + $self.windowNo + \'"></div>\' + \'<div class="vis-fdate-allocation input-group vis-input-wrap"></div><div class="vis-tdate-allocation input-group vis-input-wrap"></div></div></div> \').append(\' <div class= "vis-allocation-payment-grid" ></div> \'); //.append(\' < p class= "vis-allocate-paymentSum" > 0 - Sum 0.00</p > \');\n      $divPayment = $row2.find(\'.vis-allocation-payment-grid\');\n      $lblPaymentSum = $row2.find(\'.vis-allocate-paymentSum\');\n      $paymentSelctAll = $row2.find(\'#paymentselectall\');\n      $srchPayment = $row2.find("#paySrch" + $self.windowNo + \'\');\n      $srchbtnPayment = $row2.find("#_SrchpBtn_" + $self.windowNo + \'\');\n      $row2.find("#docType_" + $self.windowNo + \'\').append($(\'<div class="vis-control-wrap">\').append($payDocType).append(\'<label>\' + VIS.translatedTexts.DocType + \'</label>\'));\n      $row2.find("#docbaseType_" + $self.windowNo + \'\').append($(\'<div class="vis-control-wrap">\').append($payDocbaseType).append(\'<label>\' + VIS.translatedTexts.DocBaseType + \'</label>\'));\n      $row2.find("#payPayMethod_" + $self.windowNo + \'\').append($(\'<div class="vis-control-wrap">\').append($vPayMethod.getControl()).append(\'<label>\' + VIS.translatedTexts.PaymentMethod + \'</label>\'));\n      $row2.find(".vis-fdate-allocation").append($(\'<div class="vis-control-wrap">\').append($pfromDate).append(\'<label>\' + VIS.translatedTexts.FromDate + \'</label>\'));\n      $row2.find(".vis-tdate-allocation").append($(\'<div class="vis-control-wrap">\').append($ptoDate).append(\'<label>\' + VIS.Msg.getMsg("ToDate") + \'</label>\'));\n      //get control of clear button\n      $payclrbtn = $row2.find(\'#pclrbutton_\' + $self.windowNo);\n    }\n    ;\n    function createRow3() {\n      $row3.append(\'<div class="d-flex cash-allocation"><div class="vis-doc-AllocOuter-wrap"><div><p>\' + VIS.translatedTexts.C_CashLine_ID + \'</p> <input type="checkbox" id="cashselectall" /><p style="margin: 0 4px;"></p> <span id="cclrbutton_\' + $self.windowNo + \'" style="cursor: pointer;margin: 2px 0 0;" class="glyphicon glyphicon-refresh"  title=\' + VIS.Msg.getMsg("Reset") + \'></span></div><p class="vis-allocate-cashSum"> 0 \' + VIS.Msg.getMsg("SelectedLines") + \' - \' + summation + \' 0.00</p></div><div class="vis-allocation-topFields-wrap"><div class="input-group vis-input-wrap"><div class="vis-control-wrap"><input placeholder="\' + VIS.Msg.getMsg("SearchResults") + \'" data-hasbtn=" " type="text" id="cashSrch\' + $self.windowNo + \'" /><label>\' + VIS.Msg.getMsg("SearchResults") + \'</label></div><div class="input-group-append"><a class="input-group-text" id="_SrchcBtn_\' + $self.windowNo + \'"><span class="glyphicon glyphicon-search"></span></a></div></div><div class="input-group vis-input-wrap payType" id="_paymentType\' + $self.windowNo + \'"></div><div class="input-group vis-input-wrap vis-fdate-allocation"></div><div class="input-group vis-input-wrap vis-tdate-allocation"></div></div></div>\').append(\'<div  class="vis-allocation-cashLine-grid"></div>\'); //.append(\'<p class="vis-allocate-cashSum">0-Sum 0.00</p>\');\n      $divCashline = $row3.find(\'.vis-allocation-cashLine-grid\');\n      $lblCashSum = $row3.find(\'.vis-allocate-cashSum\');\n      $cashSelctAll = $row3.find(\'#cashselectall\');\n      $srchCashJournal = $row3.find("#cashSrch" + $self.windowNo + \'\');\n      $srchbtnCashJournal = $row3.find("#_SrchcBtn_" + $self.windowNo + \'\');\n      $row3.find("#_paymentType" + $self.windowNo + \'\').append($(\'<div class="vis-control-wrap">\').append($cashPayType).append(\'<label>\' + VIS.translatedTexts.Payment_Type + \'</label>\'));\n      $row3.find(".vis-fdate-allocation").append($(\'<div class="vis-control-wrap">\').append($cfromDate).append(\'<label>\' + VIS.translatedTexts.FromDate + \'</label>\'));\n      $row3.find(".vis-tdate-allocation").append($(\'<div class="vis-control-wrap">\').append($ctoDate).append(\'<label>\' + VIS.Msg.getMsg("ToDate") + \'</label>\'));\n      //get control of clear button\n      $cashclrbtn = $row3.find(\'#cclrbutton_\' + $self.windowNo);\n    }\n    ;\n    function createRow4() {\n      //\n      $row4.append(\'<div class="d-flex in-allocation"><div class="vis-doc-AllocOuter-wrap"><div><span>\' + VIS.translatedTexts.C_Invoice_ID + \'</span> <input type="checkbox" id="invoiceselectall" /><span style="margin: 0 4px;"></span> <span id="clrbutton_\' + $self.windowNo + \'" style="cursor: pointer;margin: 2px 0 0;" class="glyphicon glyphicon-refresh"  title=\' + VIS.Msg.getMsg("Reset") + \'></span></div><p class="vis-allocate-invoiceSum"> 0\' + VIS.Msg.getMsg("SelectedLines") + \' - \' + summation + \' 0.00</p></div><div class="vis-allocation-topFields-wrap"><div class="input-group vis-input-wrap"><div class="vis-control-wrap"><input placeholder="\' + VIS.Msg.getMsg("SearchResults") + \'" data-hasbtn=" " type="text" id="invSrch\' + $self.windowNo + \'" /><label>\' + VIS.Msg.getMsg("SearchResults") + \'</label></div><div class="input-group-append"><a class="input-group-text" id="_SrchBtn_\' + $self.windowNo + \'"><span class="glyphicon glyphicon-search"></span></a></div></div><div class="input-group vis-input-wrap" id="docType\' + $self.windowNo + \'"></div><div class="invBaseType input-group vis-input-wrap" id="invbaseType_\' + $self.windowNo + \'"></div>\' + \'<div class="payMethod input-group vis-input-wrap" id="invPayMethod_\' + $self.windowNo + \'"></div>\' + \'<div class="vis-fdate-allocation input-group vis-input-wrap"></div><div class="vis-tdate-allocation input-group vis-input-wrap"></div></div></div>\').append(\'<div  class="vis-allocation-invoice-grid"></div>\'); //.append(\'<p class="vis-allocate-invoiceSum">0-Sum 0.00</p>\');\n      $divInvoice = $row4.find(\'.vis-allocation-invoice-grid\');\n      $lblInvoiceSum = $row4.find(\'.vis-allocate-invoiceSum\');\n      $invSelectAll = $row4.find(\'#invoiceselectall\');\n      $srchInvoice = $row4.find("#invSrch" + $self.windowNo + \'\');\n      $srchbtnInvoice = $row4.find("#_SrchBtn_" + $self.windowNo + \'\');\n      $row4.find("#docType" + $self.windowNo + \'\').append($(\'<div class="vis-control-wrap">\').append($cmbDocType).append(\'<label>\' + VIS.translatedTexts.DocType + \'</label>\'));\n      $row4.find("#invbaseType_" + $self.windowNo + \'\').append($(\'<div class="vis-control-wrap">\').append($invDocbaseType).append(\'<label>\' + VIS.translatedTexts.DocBaseType + \'</label>\'));\n      $row4.find("#invPayMethod_" + $self.windowNo + \'\').append($(\'<div class="vis-control-wrap">\').append($vInvPayMethod.getControl()).append(\'<label>\' + VIS.translatedTexts.PaymentMethod + \'</label>\'));\n      $row4.find(".vis-fdate-allocation").append($(\'<div class="vis-control-wrap">\').append($fromDate).append(\'<label>\' + VIS.translatedTexts.FromDate + \'</label>\'));\n      $row4.find(".vis-tdate-allocation").append($(\'<div class="vis-control-wrap">\').append($toDate).append(\'<label>\' + VIS.Msg.getMsg("ToDate") + \'</label>\'));\n      //get control of clear button\n      $clrbtn = $row4.find(\'#clrbutton_\' + $self.windowNo);\n    }\n    ;\n\n    //added grid design for gl-allocation\n    function createRow5() {\n      $row5.append(\'<div class="d-flex  gl-allocation"><div class="vis-doc-AllocOuter-wrap"><div><span>\' + VIS.translatedTexts.GL_Journal_ID + \'</span> <input type="checkbox" id="glselectall" /><span style="margin: 0 4px;"></span> <span id="gclrbutton_\' + $self.windowNo + \'" style="cursor: pointer;margin: 2px 0 0;" class="glyphicon glyphicon-refresh"  title=\' + VIS.Msg.getMsg("Reset") + \'></span></div><p class="vis-allocate-glSum"> 0\' + VIS.Msg.getMsg("SelectedLines") + \' - \' + summation + \' 0.00</p></div><div class="vis-allocation-topFields-wrap"><div class="input-group vis-input-wrap"><div class="vis-control-wrap"><input placeholder="\' + VIS.Msg.getMsg("SearchResults") + \'" data-hasbtn=" " type="text" id="glSrch\' + $self.windowNo + \'" /><label>\' + VIS.Msg.getMsg("SearchResults") + \'</label></div><div class="input-group-append"><a class="input-group-text" id="_SrchglBtn_\' + $self.windowNo + \'"><span class="glyphicon glyphicon-search"></span></a></div></div><div class="input-group vis-input-wrap vis-fdate-allocation"></div><div class="input-group vis-input-wrap vis-tdate-allocation"></div></div></div>\').append(\'<div  class="vis-allocation-gl-grid"></div>\');\n      $divGl = $row5.find(\'.vis-allocation-gl-grid\');\n      $lblglSum = $row5.find(\'.vis-allocate-glSum\');\n      $glSelectAll = $row5.find(\'#glselectall\');\n      $srchGL = $row5.find("#glSrch" + $self.windowNo + \'\');\n      $srchbtnGL = $row5.find("#_SrchglBtn_" + $self.windowNo + \'\');\n      $row5.find(".vis-fdate-allocation").append($(\'<div class="vis-control-wrap">\').append($gfromDate).append(\'<label>\' + VIS.translatedTexts.FromDate + \'</label>\'));\n      $row5.find(".vis-tdate-allocation").append($(\'<div class="vis-control-wrap">\').append($gtoDate).append(\'<label>\' + VIS.Msg.getMsg("ToDate") + \'</label>\'));\n      //get control of clear button\n      $glclrbtn = $row5.find(\'#gclrbutton_\' + $self.windowNo);\n    }\n    ;\n    //end\n\n    //get Organization Filter in left panel\n    function loadOrg() {\n      $.ajax({\n        type: "POST",\n        url: VIS.Application.contextUrl + "VIS/PaymentAllocation/GetOrg",\n        dataType: "json",\n        success: function (data) {\n          var result = JSON.parse(data);\n          if (result) {\n            $OrgFilter.empty();\n            //$OrgFilter.addClass(\'vis-ev-col-mandatory\');\n            //$OrgFilter.addClass(\'vis-ev-col-mandatory\');\n            //VIS_427 Added the condition of name not equal to null so that null dont set in organization field\n            if (VIS.Env.getCtx().getAD_Org_ID() != 0 && VIS.Env.getCtx().ctx["#AD_Org_Name"] != null) {\n              $OrgFilter.append("<option value=" + VIS.Env.getCtx().getAD_Org_ID() + ">" + VIS.Env.getCtx().ctx["#AD_Org_Name"] + "</option>");\n            }\n            for (var i = 0; i < result.length; i++) {\n              /*Added  condition if value organization id in context and from server side is same/not same and name from serverside and context \r\n              not equal then set organization field*/\n              if (result[i].Value != VIS.Env.getCtx().getAD_Org_ID() && VIS.Env.getCtx().ctx["#AD_Org_Name"] != result[i].Name || result[i].Value == VIS.Env.getCtx().getAD_Org_ID() && VIS.Env.getCtx().ctx["#AD_Org_Name"] != result[i].Name) {\n                OrgName = VIS.Utility.Util.getValueOfString(result[i].Name);\n                AD_Org_ID = VIS.Utility.Util.getValueOfInt(result[i].Value);\n                $OrgFilter.append(" <option value=" + AD_Org_ID + ">" + OrgName + "</option>");\n              }\n            }\n          } else {\n            $OrgFilter.append("<option value=0></option>");\n          }\n          if (VIS.context.getContextAsInt("#AD_Org_ID") > 0) {\n            $OrgFilter.val(VIS.context.getContextAsInt("#AD_Org_ID"));\n            //Task_1455\n            //VIS_317 Set the value of Organization in Context.\n            ctx.setContext($self.windowNo, "OrgID", VIS.context.getContextAsInt("#AD_Org_ID"));\n            //$OrgFilter.removeClass(\'vis-ev-col-mandatory\');\n            $OrgFilter.removeClass(\'vis-ev-col-mandatory\');\n          } else $OrgFilter.prop(\'selectedIndex\', 0);\n        },\n        error: function (er) {\n          console.log(er);\n        }\n      });\n    }\n    ;\n    /**\r\n    *To get all the  Organization which are accessable by login user\r\n    *@alias    loadCurrency\r\n    *@return {list} list of Organization Name and ID.\r\n    */\n    function loadOrganization() {\n      $.ajax({\n        type: "POST",\n        url: VIS.Application.contextUrl + "VIS/PaymentAllocation/GetOrganization",\n        dataType: "json",\n        success: function (data) {\n          var result = JSON.parse(data);\n          if (result) {\n            $cmbOrg.empty();\n            $cmbOrg.addClass(\'vis-ev-col-mandatory\');\n            $cmbOrg.append("<option value=0></option>");\n            for (var i = 0; i < result.length; i++) {\n              OrgName = VIS.Utility.Util.getValueOfString(result[i].Name);\n              AD_Org_ID = VIS.Utility.Util.getValueOfInt(result[i].Value);\n              $cmbOrg.append(" <option value=" + AD_Org_ID + ">" + OrgName + "</option>");\n            }\n          } else {\n            $cmbOrg.append("<option value=0></option>");\n          }\n          if (VIS.context.getContextAsInt("#AD_Org_ID") > 0) {\n            $cmbOrg.val(VIS.context.getContextAsInt("#AD_Org_ID"));\n            $cmbOrg.removeClass(\'vis-ev-col-mandatory\');\n          } else $cmbOrg.prop(\'selectedIndex\', 0);\n        },\n        error: function (er) {\n          console.log(er);\n        }\n      });\n    }\n    ;\n\n    /*\r\n    Create busyIndicator\r\n    */\n    function createBusyIndicator() {\n      $bsyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n      $bsyDiv[0].style.visibility = "hidden";\n      $root.append($bsyDiv);\n    }\n    ;\n\n    /// <summary>\n    ///  Load Business Partner Info\n    ///  - Payments\n    ///  - Invoices\n    /// </summary>\n    function loadBPartner() {\n      if (_C_BPartner_ID == 0 || _C_Currency_ID == 0) {\n        return;\n      }\n      // If BP is selected then  set mandatory false---Neha\n      $vSearchBPartner.getControl().removeClass(\'vis-ev-col-mandatory\');\n      $bsyDiv[0].style.visibility = "visible";\n      // initialize Pageno as 1 when we change BP\n      pageNoInvoice = 1, gridPgnoInvoice = 1, invoiceRecord = 0;\n      pageNoCashJournal = 1, gridPgnoCashJounal = 1, CashRecord = 0;\n      pageNoPayment = 1, gridPgnoPayment = 1, paymentRecord = 0;\n      pageNoGL = 1, gridPgnoGL = 1, glRecord = 0;\n      //when we save data at facing with busy indicator is visible so, to avoid that set all the grids loaded as true\n      if (setallgridsLoaded == true) {\n        isPaymentGridLoaded == true, isCashGridLoaded == true, isInvoiceGridLoaded == true, isGLGridLoaded == true;\n        setallgridsLoaded = false;\n      } else {\n        isPaymentGridLoaded = false, isCashGridLoaded = false, isInvoiceGridLoaded = false, isGLGridLoaded = false;\n      }\n      C_ConversionType_ID = 0;\n      var getDate = null;\n      date = $date.val();\n      if (date != null && date != undefined && date != "") {\n        getDate = VIS.DB.to_date(date);\n      } else getDate = VIS.DB.to_date(new Date());\n      var chk = $vchkMultiCurrency.is(\':checked\');\n      var AD_Role_ID = ctx.getAD_Role_ID();\n      var AD_User_ID = ctx.getAD_User_ID();\n      var role = VIS.MRole.getDefault();\n      //  Need to have both values\n      //\tAsync BPartner Test\n      var key = _C_BPartner_ID;\n      /********************************\r\n      *  Load unallocated Payments\r\n      *      1-TrxDate, 2-DocumentNo, (3-Currency, 4-PayAmt,)\r\n      *      5-ConvAmt, 6-ConvOpen, 7-Allocated\r\n      */\n      loadUnallocatedPayments();\n\n      /********************************\r\n      *  Load unallocated Cash lines\r\n      *      1-TrxDate, 2-DocumentNo, (3-Currency, 4-PayAmt,)\r\n      *      5-ConvAmt, 6-ConvOpen, 7-Allocated\r\n      */\n      loadUnallocatedCashLines();\n      loadInvoice(); //Neha\n      // refresh label on load\n      refreshLabel();\n      //after allocation Show the Payment grid for avoid the validation added set allocationTo value as P.\n      $allocationFrom.val("P");\n      $allocationFrom.trigger("change");\n      $allocationTo.val("P");\n      $allocationTo.trigger("change");\n      if ($allocationFrom.val() == 0 && $allocationFrom.val() == 0) {\n        blankAllGrids();\n      } else {\n        displayGrids($allocationFrom.val(), $allocationTo.val());\n      }\n      //$bsyDiv[0].style.visibility = "hidden";\n    }\n    ;\n\n    /********************************\r\n    *  Load unallocated Payments\r\n    *      1-TrxDate, 2-DocumentNo, (3-Currency, 4-PayAmt,)\r\n    *      5-ConvAmt, 6-ConvOpen, 7-Allocated\r\n    */\n    function loadUnallocatedPayments() {\n      AD_Org_ID = $OrgFilter.val();\n      _C_Currency_ID = $cmbCurrency.val();\n      if (_C_BPartner_ID == 0 || _C_Currency_ID == 0) {\n        return;\n      }\n      fromDate = $pfromDate.val();\n      toDate = $ptoDate.val();\n      //---If ToDate is less than From Date--Display error message-----\n      if (toDate != "") {\n        if (fromDate > toDate) {\n          $ptoDate.val(\'\');\n          return VIS.ADialog.info("Message", true, VIS.Msg.getMsg("VIS_FromDateGreater"), "");\n        }\n      }\n      pageNoPayment = 1, gridPgnoPayment = 1, paymentRecord = 0;\n      isPaymentGridLoaded = false;\n      var chk = $vchkMultiCurrency.is(\':checked\');\n      c_docType_ID = $payDocType.val();\n      docBaseType = $payDocbaseType.val();\n      payMethod_ID = VIS.Utility.Util.getValueOfInt($vPayMethod.getValue());\n      srchText = $srchPayment.val();\n      $bsyDiv[0].style.visibility = "visible";\n      //---Get values and pass values to the controller----\n      if (fromDate != null && fromDate != undefined && fromDate != "") {\n        VIS.DB.to_date(fromDate);\n      }\n      if (toDate != null && toDate != undefined && toDate != "") {\n        VIS.DB.to_date(toDate);\n      }\n      $.ajax({\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetPayments",\n        data: {\n          AD_Org_ID: AD_Org_ID,\n          _C_Currency_ID: _C_Currency_ID,\n          _C_BPartner_ID: _C_BPartner_ID,\n          isInterBPartner: _isInterBPartner,\n          chk: chk,\n          page: pageNoPayment,\n          size: PAGESIZE,\n          c_docType_ID: c_docType_ID,\n          docBaseType: docBaseType,\n          PaymentMethod_ID: payMethod_ID,\n          fromDate: fromDate,\n          toDate: toDate,\n          srchText: srchText,\n          isInterComp: _isInterCompany\n        },\n        async: true,\n        success: function (result) {\n          var data = JSON.parse(result);\n          if (data) {\n            if (pageNoPayment == 1 && data.length > 0) {\n              paymentRecord = data[0].PaymentRecord;\n              gridPgnoPayment = Math.ceil(paymentRecord / PAGESIZE);\n            }\n            //if any payment is selected and we load another payement from db than we have to check weather that invoice is already selected or not. if already selected tha skip that.\n            if (selectedPayments.length > 0) {\n              totalselectedpay = selectedPayments.length;\n              for (var i = 0; i < data.length; i++) {\n                var filterObj = selectedPayments.filter(function (e) {\n                  return e.CpaymentID == data[i]["CpaymentID"];\n                });\n                if (filterObj.length == 0) {\n                  data[i]["recid"] = selectedPayments.length + i;\n                  selectedPayments.push(data[i]);\n                }\n              }\n              data = selectedPayments;\n              // Clear Selected payments array when we de-select the select all checkbox. work done for to hold all the selected payements\n              selectedPayments = [];\n            }\n            //end\n            bindPaymentGrid(data, chk);\n            //added window no to find grid to implement scroll  issue : scroll was not working properly\n            $divPayment.find(\'#grid_openformatgrid_\' + $self.windowNo + \'_records\').on(\'scroll\', cartPaymentScroll);\n            isPaymentGridLoaded = true;\n            isBusyIndicatorHidden();\n          }\n        },\n        error: function (err) {\n          $bsyDiv[0].style.visibility = "hidden";\n        }\n      });\n    }\n    ;\n\n    /********************************\r\n    *  Load unallocated Cash lines\r\n    *      1-TrxDate, 2-DocumentNo, (3-Currency, 4-PayAmt,)\r\n    *      5-ConvAmt, 6-ConvOpen, 7-Allocated\r\n    */\n    function loadUnallocatedCashLines() {\n      _C_Currency_ID = $cmbCurrency.val();\n      if (_C_BPartner_ID == 0 || _C_Currency_ID == 0) {\n        return;\n      }\n      pageNoCashJournal = 1, gridPgnoCashJounal = 1, CashRecord = 0;\n      isCashGridLoaded = false;\n      AD_Org_ID = $OrgFilter.val();\n      fromDate = $cfromDate.val();\n      toDate = $ctoDate.val();\n      paymentType = $cashPayType.val();\n      srchText = $srchCashJournal.val();\n      //---If ToDate is less than From Date--Display error message-----\n      if (toDate != "") {\n        if (fromDate > toDate) {\n          $ctoDate.val(\'\');\n          return VIS.ADialog.info("Message", true, VIS.Msg.getMsg("VIS_FromDateGreater"), "");\n        }\n      }\n      var chk = $vchkMultiCurrency.is(\':checked\');\n      if (fromDate != null && fromDate != undefined && fromDate != "") {\n        VIS.DB.to_date(fromDate);\n      }\n      if (toDate != null && toDate != undefined && toDate != "") {\n        VIS.DB.to_date(toDate);\n      }\n      $bsyDiv[0].style.visibility = "visible";\n      $.ajax({\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetCashJounral",\n        data: {\n          AD_Org_ID: AD_Org_ID,\n          _C_Currency_ID: _C_Currency_ID,\n          _C_BPartner_ID: _C_BPartner_ID,\n          isInterBPartner: _isInterBPartner,\n          chk: chk,\n          page: pageNoCashJournal,\n          size: PAGESIZE,\n          fromDate: fromDate,\n          toDate: toDate,\n          paymentType_ID: paymentType,\n          srchText: srchText,\n          isInterComp: _isInterCompany\n        },\n        async: true,\n        success: function (result) {\n          var data = JSON.parse(result);\n          if (data) {\n            if (pageNoCashJournal == 1 && data.length > 0) {\n              CashRecord = data[0].CashRecord;\n              gridPgnoCashJounal = Math.ceil(CashRecord / PAGESIZE);\n            }\n            //if any invoice is selected and we load another cash lines from db than we have to check weather that cash lines is already selected or not. if already selected tha skip that.\n            if (selectedCashlines.length > 0) {\n              totalselectedcash = selectedCashlines.length;\n              for (var i = 0; i < data.length; i++) {\n                var filterObj = selectedCashlines.filter(function (e) {\n                  return e.CcashlineiID == data[i]["CcashlineiID"];\n                });\n                if (filterObj.length == 0) {\n                  data[i]["recid"] = selectedCashlines.length + i;\n                  selectedCashlines.push(data[i]);\n                }\n              }\n              data = selectedCashlines;\n              // Clear Selected cash lines array when we de-select the select all checkbox. work done for to hold all the selected cash lines\n              selectedCashlines = [];\n            }\n            //end\n            bindCashline(data, chk);\n            //added window no to find grid to implement scroll  issue : scroll was not working properly\n            $divCashline.find(\'#grid_openformatgridcash_\' + $self.windowNo + \'_records\').on(\'scroll\', cartCashScroll);\n            isCashGridLoaded = true;\n            isBusyIndicatorHidden();\n            //_payment = 7;\n          }\n        },\n        error: function (err) {\n          $bsyDiv[0].style.visibility = "hidden";\n        }\n      });\n    }\n    ;\n    function loadCurrencyPrecision() {\n      $.ajax({\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetCurrencyPrecision",\n        data: {\n          _C_Currency_ID: _C_Currency_ID\n        },\n        async: true,\n        success: function (result) {\n          var data = JSON.parse(result);\n          if (data) {\n            stdPrecision = data;\n          }\n        },\n        error: function (err) {}\n      });\n    }\n    ;\n    // is used to shown busy indicator when we change BP and other parameters\n    function isBusyIndicatorHidden() {\n      if (isPaymentGridLoaded == true && isCashGridLoaded == true && isInvoiceGridLoaded == true && isGLGridLoaded == true) {\n        $bsyDiv[0].style.visibility = "hidden";\n      } else {\n        $bsyDiv[0].style.visibility = "visible";\n      }\n    }\n\n    //scroll implementation for GL grid\n    function cartGLScroll() {\n      if ($(this).scrollTop() > 0) {\n        $bsyDiv[0].style.visibility = "visible";\n        if ($(this).scrollTop() + $(this).innerHeight() >= this.scrollHeight) {\n          if (pageNoGL < gridPgnoGL) {\n            pageNoGL++;\n            getGLDataOnScroll(pageNoGL, PAGESIZE);\n          }\n        }\n        $bsyDiv[0].style.visibility = "hidden";\n      }\n    }\n    ;\n    function getGLDataOnScroll(pageNoGL, PAGESIZE) {\n      var chk = $vchkMultiCurrency.is(\':checked\');\n      _C_Currency_ID = $cmbCurrency.val();\n      if (_C_Currency_ID == 0) {\n        return VIS.ADialog.info("Message", true, "select currency", "");\n      }\n      var getDate = null;\n      date = $date.val();\n      if (date != null && date != undefined && date != "") {\n        getDate = VIS.DB.to_date(date);\n      } else getDate = VIS.DB.to_date(new Date());\n\n      //c_docType_ID = $payDocType.val();\n      //c_docbaseType_ID = $payDocbaseType.name;\n      if (fromDate != null && fromDate != undefined && fromDate != "") {\n        VIS.DB.to_date(fromDate);\n      }\n      if (toDate != null && toDate != undefined && toDate != "") {\n        VIS.DB.to_date(toDate);\n      }\n      $.ajax({\n        url: VIS.Application.contextUrl + "VIS/PaymentAllocation/GetGLData",\n        dataType: "json",\n        data: {\n          AD_Org_ID: AD_Org_ID,\n          _C_Currency_ID: _C_Currency_ID,\n          _C_BPartner_ID: _C_BPartner_ID,\n          page: pageNoGL,\n          size: PAGESIZE,\n          fromDate: fromDate,\n          toDate: toDate,\n          srchText: srchText,\n          chk: chk,\n          isInterComp: _isInterCompany\n        },\n        async: true,\n        success: function (result) {\n          var data = JSON.parse(result);\n          if (data) {\n            //if any GL is selected and we load another GL from db than we have to check weather that Gl is already selected or not. if already selected tha skip that.\n            if (SelectedGL.length > 0) {\n              //debugger;\n              totalselectedgl = SelectedGL.length;\n              for (var i = 0; i < data.length; i++) {\n                var filterObj = SelectedGL.filter(function (e) {\n                  return e.GL_JOURNALLINE_ID == data[i]["GL_JOURNALLINE_ID"];\n                });\n                if (filterObj.length == 0) {\n                  data[i]["recid"] = SelectedGL.length + i;\n                  SelectedGL.push(data[i]);\n                }\n              }\n              data = SelectedGL;\n              // Clear Selected GL array when we de-select the select all checkbox. work done for to hold all the selected GL\'s\n              SelectedGL = [];\n            }\n            //end\n\n            bindGLGridOnScroll(data);\n          }\n        },\n        error: function (err) {}\n      });\n    }\n    ;\n    //scroll implementation for payment grid\n    function cartPaymentScroll() {\n      if ($(this).scrollTop() > 0) {\n        $bsyDiv[0].style.visibility = "visible";\n        if ($(this).scrollTop() + $(this).innerHeight() >= this.scrollHeight) {\n          if (pageNoPayment < gridPgnoPayment) {\n            pageNoPayment++;\n            getPaymentDataOnScroll(pageNoPayment, PAGESIZE);\n          }\n        }\n        $bsyDiv[0].style.visibility = "hidden";\n      }\n    }\n    ;\n    function getPaymentDataOnScroll(pageNoPayment, PAGESIZE) {\n      _C_Currency_ID = $cmbCurrency.val();\n      if (_C_Currency_ID == 0) {\n        return VIS.ADialog.info("Message", true, "select currency", "");\n      }\n      var chk = $vchkMultiCurrency.is(\':checked\');\n      var getDate = null;\n      date = $date.val();\n      if (date != null && date != undefined && date != "") {\n        getDate = VIS.DB.to_date(date);\n      } else getDate = VIS.DB.to_date(new Date());\n      c_docType_ID = $payDocType.val();\n      docBaseType = $payDocbaseType.val();\n      payMethod_ID = VIS.Utility.Util.getValueOfInt($vPayMethod.getValue());\n      srchText = $srchPayment.val();\n      if (fromDate != null && fromDate != undefined && fromDate != "") {\n        VIS.DB.to_date(fromDate);\n      }\n      if (toDate != null && toDate != undefined && toDate != "") {\n        VIS.DB.to_date(toDate);\n      }\n      $.ajax({\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetPayments",\n        data: {\n          AD_Org_ID: AD_Org_ID,\n          _C_Currency_ID: _C_Currency_ID,\n          _C_BPartner_ID: _C_BPartner_ID,\n          isInterBPartner: _isInterBPartner,\n          chk: chk,\n          page: pageNoPayment,\n          size: PAGESIZE,\n          c_docType_ID: c_docType_ID,\n          docBaseType: docBaseType,\n          PaymentMethod_ID: payMethod_ID,\n          fromDate: fromDate,\n          toDate: toDate,\n          srchText: srchText,\n          isInterComp: _isInterCompany\n        },\n        async: true,\n        success: function (result) {\n          var data = JSON.parse(result);\n          if (data) {\n            var count = $gridPayment.records.length;\n            var newData = [];\n            //if any payment is selected and we load another payment from db than we have to check weather that payment is already selected or not. if already selected tha skip that.\n            if (selectedPayments.length > 0) {\n              totalselectedpay = selectedPayments.length;\n              for (var i = 0; i < data.length; i++) {\n                var filterObj = selectedPayments.filter(function (e) {\n                  return e.CpaymentID == data[i]["CpaymentID"];\n                });\n                if (filterObj.length == 0) {\n                  data[i]["recid"] = count + i;\n                  newData.push(data[i]);\n                }\n              }\n              data = newData;\n              // Clear Selected payments array when we de-select the select all checkbox. work done for to hold all the selected payments\n              selectedPayments = [];\n              newData = [];\n            }\n            //end\n            bindPaymentGridOnScroll(data);\n          }\n        },\n        error: function (err) {}\n      });\n    }\n    ;\n\n    // scroll implementation for cash grid\n    function cartCashScroll() {\n      if ($(this).scrollTop() > 0) {\n        $bsyDiv[0].style.visibility = "visible";\n        if ($(this).scrollTop() + $(this).innerHeight() >= this.scrollHeight) {\n          if (pageNoCashJournal < gridPgnoCashJounal) {\n            pageNoCashJournal++;\n            getCashDataOnScroll(pageNoCashJournal, PAGESIZE);\n          }\n        }\n        $bsyDiv[0].style.visibility = "hidden";\n      }\n    }\n    ;\n    function getCashDataOnScroll(pageNoCashJournal, PAGESIZE) {\n      _C_Currency_ID = $cmbCurrency.val();\n      if (_C_Currency_ID == 0) {\n        return VIS.ADialog.info("Message", true, "select currency", "");\n      }\n      var chk = $vchkMultiCurrency.is(\':checked\');\n      var getDate = null;\n      date = $date.val();\n      paymentType = $cashPayType.val();\n      srchText = $srchCashJournal.val();\n      if (date != null && date != undefined && date != "") {\n        getDate = VIS.DB.to_date(date);\n      } else getDate = VIS.DB.to_date(new Date());\n      if (fromDate != null && fromDate != undefined && fromDate != "") {\n        VIS.DB.to_date(fromDate);\n      }\n      if (toDate != null && toDate != undefined && toDate != "") {\n        VIS.DB.to_date(toDate);\n      }\n      $.ajax({\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetCashJounral",\n        data: {\n          AD_Org_ID: AD_Org_ID,\n          _C_Currency_ID: _C_Currency_ID,\n          _C_BPartner_ID: _C_BPartner_ID,\n          isInterBPartner: _isInterBPartner,\n          chk: chk,\n          page: pageNoCashJournal,\n          size: PAGESIZE,\n          fromDate: fromDate,\n          toDate: toDate,\n          paymentType_ID: paymentType,\n          srchText: srchText,\n          isInterComp: _isInterCompany\n        },\n        async: true,\n        success: function (result) {\n          var data = JSON.parse(result);\n          if (data) {\n            var count = $gridCashline.records.length;\n            var newData = [];\n            if (selectedCashlines.length > 0) {\n              totalselectedcash = selectedCashlines.length;\n              for (var i = 0; i < data.length; i++) {\n                var filterObj = selectedCashlines.filter(function (e) {\n                  return e.CcashlineiID == data[i]["CcashlineiID"];\n                });\n                if (filterObj.length == 0) {\n                  data[i]["recid"] = count + i;\n                  newData.push(data[i]);\n                }\n              }\n              data = newData;\n              // Clear Selected invoices array when we de-select the select all checkbox. work done for to hold all the selected invoices\n              selectedCashlines = [];\n              newData = [];\n            }\n            //end\n            bindCashlineGridOnScroll(data);\n          }\n        },\n        error: function (err) {}\n      });\n    }\n    ;\n\n    // scroll implementation for invoice grid\n    function cartInvoiceScroll() {\n      if ($(this).scrollTop() > 0) {\n        $bsyDiv[0].style.visibility = "visible";\n        if ($(this).scrollTop() + $(this).innerHeight() >= this.scrollHeight) {\n          if (pageNoInvoice < gridPgnoInvoice) {\n            pageNoInvoice++;\n            getInvoiceDataOnScroll(pageNoInvoice, PAGESIZE);\n          }\n        }\n        $bsyDiv[0].style.visibility = "hidden";\n      }\n    }\n    ;\n    function getInvoiceDataOnScroll(pageNoInvoice, PAGESIZE) {\n      var chk = $vchkMultiCurrency.is(\':checked\');\n      var getDate = null;\n      date = $date.val();\n      if (date != null && date != undefined && date != "") {\n        getDate = VIS.DB.to_date(date);\n      } else getDate = VIS.DB.to_date(new Date());\n\n      //---Get values and pass values to the controller----Neha\n      docNo = $txtDocNo.val();\n      _C_Currency_ID = $cmbCurrency.val();\n      if (_C_Currency_ID == 0) {\n        return VIS.ADialog.info("Message", true, "select currency", "");\n      }\n      c_docType_ID = $cmbDocType.val();\n      docBaseType = $invDocbaseType.val();\n      payMethod_ID = VIS.Utility.Util.getValueOfInt($vInvPayMethod.getValue());\n      srchText = $srchInvoice.val();\n      if (fromDate != null && fromDate != undefined && fromDate != "") {\n        VIS.DB.to_date(fromDate);\n      }\n      if (toDate != null && toDate != undefined && toDate != "") {\n        VIS.DB.to_date(toDate);\n      }\n      $.ajax({\n        url: VIS.Application.contextUrl + "PaymentAllocation/GetInvoice",\n        data: {\n          AD_Org_ID: AD_Org_ID,\n          _C_Currency_ID: _C_Currency_ID,\n          _C_BPartner_ID: _C_BPartner_ID,\n          isInterBPartner: _isInterBPartner,\n          chk: chk,\n          date: getDate,\n          page: pageNoInvoice,\n          size: PAGESIZE,\n          docNo: docNo,\n          c_docType_ID: c_docType_ID,\n          docBaseType: docBaseType,\n          PaymentMethod_ID: payMethod_ID,\n          fromDate: fromDate,\n          toDate: toDate,\n          conversionDate: conversionDate,\n          srchText: srchText,\n          isInterComp: _isInterCompany,\n          conversionType_ID: $vConversionType.getValue()\n        },\n        async: true,\n        success: function (result) {\n          var data = JSON.parse(result);\n          if (data) {\n            //if any invoice is selected and we load another invoice from db than we have to check weather that invoice is already selected or not. if already selected tha skip that.\n            var newData = []; /* contain on scroll data */\n            var count = $gridInvoice.records.length;\n            if (selectedInvoices.length > 0) {\n              totalselectedinv = selectedInvoices.length;\n              for (var i = 0; i < data.length; i++) {\n                var filterObj = selectedInvoices.filter(function (e) {\n                  return e.C_InvoicePaySchedule_ID == data[i]["C_InvoicePaySchedule_ID"];\n                });\n                if (filterObj.length == 0) {\n                  data[i]["recid"] = count + i;\n                  newData.push(data[i]);\n                }\n              }\n              data = newData;\n              // Clear Selected invoices array when we de-select the select all checkbox. work done for to hold all the selected invoices\n              selectedInvoices = [];\n              newData = [];\n            }\n            //end\n            bindInvoiceGridOnScroll(data);\n            //Amount\n            _openInv = 9;\n            _discount = 10;\n            _writeOff = 13;\n            _applied = 14;\n          }\n        },\n        error: function (err) {}\n      });\n    }\n    ;\n\n    //GL grid bind\n    //render to culture format\n    function bindGLGridOnScroll(data) {\n      var rows = [];\n      var colkeys = [];\n      if (data.length > 0) {\n        colkeys = Object.keys(data[0]);\n      }\n\n      // check records exist in grid or not\n      // for updating record id \n      var count = 0;\n      if ($glLineGrid.records.length > 0) {\n        count = $glLineGrid.records.length;\n      }\n      ;\n      for (var r = 0; r < data.length; r++) {\n        var singleRow = {};\n        singleRow[\'recid\'] = count + r;\n        for (var c = 0; c < colkeys.length; c++) {\n          var colna = colkeys[c];\n          if (colna == "SelectRow") {\n            singleRow[colna] = false;\n          } else {\n            singleRow[colna] = VIS.Utility.encodeText(data[r][colna]);\n          }\n        }\n        rows.push(singleRow);\n      }\n\n      // bind rows with grid\n      w2utils.encodeTags(rows);\n      $glLineGrid.add(rows);\n\n      // when we load new payment either after filter or directly and if any payment is selected already than we need to trigger it\'s click event.\n      if (totalselectedgl > 0) {\n        for (var i = 0; i < totalselectedgl; i++) {\n          var chk = $(\'#grid_\' + $glLineGrid.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n          $(chk[i]).prop(\'checked\', true);\n          $glLineGrid.editChange.call($glLineGrid, chk[i], i, 0, event);\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": i,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $glLineGrid.trigger(eData);\n        }\n      }\n      totalselectedgl = 0;\n      //end\n\n      rows = [];\n      colkeys = [];\n      //added window no to find grid to implement scroll  issue : scroll was not working properly\n      $divGl.find(\'#grid_openformatglgrid_\' + $self.windowNo + \'_records\').on(\'scroll\', cartGLScroll);\n    }\n    ;\n\n    //binding GL Grid \n    function bindGLGrid(data, chk) {\n      var columns = [];\n      columns.push({\n        field: "SelectRow",\n        columnName: "SelectRow",\n        caption: VIS.translatedTexts.VIS_Check,\n        size: \'50px\',\n        editable: {\n          type: \'checkbox\'\n        },\n        sortable: true\n      });\n      columns.push({\n        field: "AD_Org_ID",\n        columnName: "AD_Org_ID",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      columns.push({\n        field: "OrgName",\n        columnName: "OrgName",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'105px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "DATEACCT",\n        columnName: "DATEACCT",\n        caption: VIS.translatedTexts.DateAcct,\n        render: function (record, index, col_index) {\n          var val = record["DATEACCT"];\n          return new Date(val).toLocaleDateString();\n        },\n        size: \'105px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "DOCUMENTNO",\n        columnName: "DOCUMENTNO",\n        caption: VIS.translatedTexts.DocumentNo,\n        size: \'120px\',\n        hidden: false,\n        sortable: true\n      });\n      //added new Column Account - on 24/09/2020\n      columns.push({\n        field: "Account",\n        columnName: "Account",\n        caption: VIS.translatedTexts.Account,\n        size: \'150px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "Isocode",\n        columnName: "Isocode",\n        caption: VIS.translatedTexts.TrxCurrency,\n        size: \'105px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "ConversionName",\n        columnName: "ConversionName",\n        caption: VIS.translatedTexts.C_ConversionType_ID,\n        size: \'105px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "ConvertedAmount",\n        columnName: "ConvertedAmount",\n        caption: VIS.Msg.getMsg("Amount"),\n        attr: \'align=right\',\n        size: \'150px\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["ConvertedAmount"];\n          return parseFloat(val).toLocaleString(navigator.language, {\n            maximumFractionDigits: stdPrecision,\n            minimumFractionDigits: stdPrecision\n          });\n        }\n      });\n      columns.push({\n        field: "OpenAmount",\n        columnName: "OpenAmount",\n        caption: VIS.translatedTexts.OpenAmount,\n        attr: \'align=right\',\n        size: \'150px\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["OpenAmount"];\n          return parseFloat(val).toLocaleString(navigator.language, {\n            maximumFractionDigits: stdPrecision,\n            minimumFractionDigits: stdPrecision\n          });\n        }\n      });\n      columns.push({\n        field: "AppliedAmt",\n        columnName: "AppliedAmt",\n        caption: VIS.translatedTexts.AppliedAmount,\n        size: \'150px\',\n        attr: \'align=right\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["AppliedAmt"];\n          return parseFloat(val).toLocaleString(navigator.language, {\n            maximumFractionDigits: stdPrecision,\n            minimumFractionDigits: stdPrecision\n          });\n        }\n      });\n      columns.push({\n        field: "DATEDOC",\n        columnName: "DATEDOC",\n        caption: VIS.translatedTexts.Date,\n        render: function (record, index, col_index) {\n          var val = record["DATEDOC"];\n          return new Date(val).toLocaleDateString();\n        },\n        size: \'80px\',\n        hidden: true\n      });\n      columns.push({\n        field: "GL_JOURNALLINE_ID",\n        columnName: "GL_JOURNALLINE_ID",\n        caption: VIS.translatedTexts.GL_JOURNALLINE_ID,\n        size: \'150px\',\n        hidden: true\n      });\n      columns.push({\n        field: "C_ConversionType_ID",\n        columnName: "C_ConversionType_ID",\n        caption: VIS.translatedTexts.C_ConversionType_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      columns.push({\n        field: "GL_Journal_ID",\n        columnName: "GL_Journal_ID",\n        caption: VIS.translatedTexts.C_ConversionType_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      var rows = [];\n      var colkeys = [];\n      if (data.length > 0) {\n        colkeys = Object.keys(data[0]);\n      }\n      for (var r = 0; r < data.length; r++) {\n        var singleRow = {};\n        singleRow[\'recid\'] = r;\n        for (var c = 0; c < colkeys.length; c++) {\n          var colna = colkeys[c];\n          if (colna == "SelectRow") {\n            singleRow[colna] = false;\n          } else {\n            singleRow[colna] = VIS.Utility.encodeText(data[r][colna]);\n          }\n        }\n        rows.push(singleRow);\n      }\n      if ($glLineGrid != undefined && $glLineGrid != null) {\n        $glLineGrid.destroy();\n        $glLineGrid = null;\n      }\n      $glLineGrid = $divGl.w2grid({\n        name: \'openformatglgrid_\' + $self.windowNo,\n        //show: {\n        //    toolbar: true,\n        //    toolbarSearch: false,\n        //    toolbarInput: false,\n        //    searchAll: false\n        //},\n        multiSelect: true,\n        columns: columns,\n        records: rows,\n        onChange: function (event) {\n          if (checkCheckedLimitOnCellCheckboxClick(event, false, false, false, true)) {\n            glCellChanged(event);\n            //getMaxDate();\n          }\n        },\n        onClick: function (event) {\n          glCellClicked(event);\n          getMaxDate();\n        },\n        onDblClick: function (event) {\n          //glDoubleClicked(event);\n          event.preventDefault();\n          return;\n        },\n        onSelect: function (event) {\n          if (event.all) {\n            event.onComplete = function () {\n              //added window no to find grid to implement scroll  issue : scroll was not working properly\n              $divGl.find(\'#grid_openformatglgrid_\' + $self.windowNo + \'_records\').on(\'scroll\', cartGLScroll);\n            };\n          }\n        },\n        //on edit grid columns need to prevent dot or comma according to culture\n        onEditField: function (event) {\n          event.onComplete = function (event) {\n            id = event.recid;\n            $(\'#grid_openformatglgrid_\' + $self.windowNo + \'_edit_\' + id + \'_10\').keydown(function (event) {\n              var isDotSeparator = culture.isDecimalSeparatorDot(window.navigator.language);\n              if (!isDotSeparator && (event.keyCode == 190 || event.keyCode == 110)) {\n                // , separator\n                return false;\n              } else if (isDotSeparator && event.keyCode == 188) {\n                // . separator\n                return false;\n              }\n              if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                this.value = this.value.replace(\'.\', \'\');\n              }\n              if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                this.value = this.value.replace(\',\', \'\');\n              }\n              if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n                return false;\n              }\n            });\n          };\n        }\n      });\n      // when we load new payment either after filter or directly and if any payment is selected already than we need to trigger it\'s click event.\n      if (totalselectedgl > 0) {\n        for (var i = 0; i < totalselectedgl; i++) {\n          var chk = $(\'#grid_\' + $glLineGrid.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n          $(chk[i]).prop(\'checked\', true);\n          $glLineGrid.editChange.call($glLineGrid, chk[i], i, 0, event);\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": i,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $glLineGrid.trigger(eData);\n        }\n      }\n      totalselectedgl = 0;\n      //end\n      $glLineGrid.autoLoad = true;\n      $($($glLineGrid.box)[0]).find(\'.w2ui-search-down\').css(\'margin-top\', \'4px\');\n      $($($glLineGrid.box)[0]).find(\'.w2ui-search-clear\').css(\'margin-top\', \'4px\');\n    }\n    ;\n\n    //payment grid bind\n    //render to culture format\n    function bindPaymentGrid(data, chk) {\n      var columns = [];\n      columns.push({\n        field: \'SelectRow\',\n        columnName: "SelectRow",\n        caption: VIS.translatedTexts.VIS_Check,\n        size: \'50px\',\n        editable: {\n          type: \'checkbox\'\n        },\n        sortable: true\n      });\n      columns.push({\n        field: "AD_Org_ID",\n        columnName: "AD_Org_ID",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      columns.push({\n        field: "OrgName",\n        columnName: "OrgName",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'85px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "DATEACCT",\n        columnName: "DATEACCT",\n        caption: VIS.translatedTexts.DateAcct,\n        size: \'85px\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["DATEACCT"];\n          return new Date(val).toLocaleDateString();\n        }\n      });\n      columns.push({\n        field: "Documentno",\n        columnName: "Documentno",\n        caption: VIS.translatedTexts.DocumentNo,\n        size: \'120px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "DocBaseType",\n        columnName: "DocBaseType",\n        caption: VIS.translatedTexts.DocBaseType,\n        size: \'120px\',\n        hidden: false,\n        sortable: true\n      });\n      //new column payment menthod name added into grid\n      columns.push({\n        field: "PayName",\n        columnName: "PayName",\n        caption: VIS.translatedTexts.PaymentMethod,\n        size: \'120px\',\n        hidden: false,\n        sortable: true\n      });\n      //if (chk) {\n      //    columns.push({ field: "Isocode", caption: VIS.translatedTexts.TrxCurrency, size: \'85px\', hidden: false });\n      //}\n      //else {\n      columns.push({\n        field: "Isocode",\n        columnName: "Isocode",\n        caption: VIS.translatedTexts.TrxCurrency,\n        size: \'85px\',\n        hidden: false,\n        sortable: true\n      });\n      //}\n      columns.push({\n        field: "ConversionName",\n        columnName: "ConversionName",\n        caption: VIS.translatedTexts.C_ConversionType_ID,\n        size: \'85px\',\n        hidden: false,\n        sortable: true\n      });\n      if (chk) {\n        //render column into float with culture format\n        columns.push({\n          field: "Payment",\n          columnName: "Payment",\n          caption: VIS.translatedTexts.Amount,\n          size: \'150px\',\n          attr: \'align=right\',\n          hidden: false,\n          sortable: true,\n          render: function (record, index, col_index) {\n            var val = record["Payment"];\n            return parseFloat(val).toLocaleString(navigator.language, {\n              minimumFractionDigits: stdPrecision,\n              maximumFractionDigits: stdPrecision\n            });\n          }\n        });\n      } else {\n        columns.push({\n          field: "Payment",\n          columnName: "Payment",\n          caption: VIS.translatedTexts.Amount,\n          size: \'150px\',\n          hidden: true\n        });\n      }\n      //render column into float with culture format\n      columns.push({\n        field: "ConvertedAmount",\n        columnName: "ConvertedAmount",\n        caption: VIS.translatedTexts.ConvertedAmount,\n        size: \'150px\',\n        attr: \'align=right\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["ConvertedAmount"];\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        }\n      });\n      //render column into float with culture format\n      columns.push({\n        field: "OpenAmt",\n        columnName: "OpenAmt",\n        caption: VIS.translatedTexts.OpenAmount,\n        size: \'150px\',\n        attr: \'align=right\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["OpenAmt"];\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        }\n      });\n      columns.push({\n        field: "Multiplierap",\n        columnName: "Multiplierap",\n        caption: VIS.translatedTexts.multiplierap,\n        size: \'150px\',\n        hidden: true\n      });\n      //render column into float with culture format\n      columns.push({\n        field: "AppliedAmt",\n        columnName: "AppliedAmt",\n        caption: VIS.translatedTexts.AppliedAmount,\n        size: \'150px\',\n        attr: \'align=right\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["AppliedAmt"];\n          val = checkcommaordot(event, val, val);\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        },\n        editable: {\n          type: \'number\'\n        }\n      });\n      columns.push({\n        field: "Date1",\n        columnName: "Date1",\n        caption: VIS.translatedTexts.Date,\n        size: \'80px\',\n        hidden: true,\n        render: function (record, index, col_index) {\n          var val = record["Date1"];\n          return new Date(val).toLocaleDateString();\n        }\n      });\n      columns.push({\n        field: "CpaymentID",\n        columnName: "CpaymentID",\n        caption: VIS.translatedTexts.c_payment_id,\n        size: \'150px\',\n        hidden: true\n      });\n      columns.push({\n        field: "C_ConversionType_ID",\n        columnName: "C_ConversionType_ID",\n        caption: VIS.translatedTexts.C_ConversionType_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      var rows = [];\n      var colkeys = [];\n      if (data.length > 0) {\n        colkeys = Object.keys(data[0]);\n      }\n      for (var r = 0; r < data.length; r++) {\n        var singleRow = {};\n        singleRow[\'recid\'] = r;\n        for (var c = 0; c < colkeys.length; c++) {\n          var colna = colkeys[c];\n          if (colna == "SelectRow") {\n            singleRow[colna] = false;\n          } else {\n            singleRow[colna] = VIS.Utility.encodeText(data[r][colna]);\n          }\n        }\n        rows.push(singleRow);\n      }\n      if ($gridPayment != undefined && $gridPayment != null) {\n        $gridPayment.destroy();\n        $gridPayment = null;\n      }\n      $gridPayment = $divPayment.w2grid({\n        name: \'openformatgrid_\' + $self.windowNo,\n        //show: { toolbar: true },\n        multiSelect: true,\n        columns: columns,\n        records: rows,\n        onClick: function (event) {\n          paymentCellClicked(event);\n          getMaxDate();\n        },\n        onChange: function (event) {\n          if (checkCheckedLimitOnCellCheckboxClick(event, false, true, false, false)) {\n            paymentCellChanged(event);\n          }\n        },\n        onDblClick: function (event) {\n          paymentDoubleClicked(event);\n        },\n        onSelect: function (event) {\n          if (event.all) {\n            event.onComplete = function () {\n              //added window no to find grid to implement scroll  issue : scroll was not working properly\n              $divPayment.find(\'#grid_openformatgrid_\' + $self.windowNo + \'_records\').on(\'scroll\', cartPaymentScroll);\n            };\n          }\n        },\n        //on edit grid columns need to prevent dot or comma according to culture\n        onEditField: function (event) {\n          event.onComplete = function (event) {\n            id = event.recid;\n            //event.column is a AppliedAmt column sequence No\n            /*VIS_427 Bug id - 5667 Handled issue when user enter Dot in german culture it allows user to enter the same\r\n            But now user can enter it*/\n            $(\'#grid_openformatgrid_\' + $self.windowNo + \'_edit_\' + id + \'_\' + event.column).keydown(function (event) {\n              var isDotSeparator = culture.isDecimalSeparatorDot(window.navigator.language);\n              if (!isDotSeparator && (event.keyCode == 190 || event.keyCode == 110)) {\n                // , separator\n                return false;\n              } else if (isDotSeparator && event.keyCode == 188) {\n                // . separator\n                return false;\n              }\n              if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                this.value = this.value.replace(\'.\', \'\');\n              }\n              if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                this.value = this.value.replace(\',\', \'\');\n              }\n              if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n                return false;\n              }\n            });\n          };\n        }\n      });\n      // when we load new payment either after filter or directly and if any payment is selected already than we need to trigger it\'s click event.\n      if (totalselectedpay > 0) {\n        for (var i = 0; i < totalselectedpay; i++) {\n          var chk = $(\'#grid_\' + $gridPayment.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n          $(chk[i]).prop(\'checked\', true);\n          $gridPayment.editChange.call($gridPayment, chk[i], i, 0, event);\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": i,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $gridPayment.trigger(eData);\n        }\n      }\n      totalselectedpay = 0;\n      //end\n      $gridPayment.autoLoad = true;\n      $($($gridPayment.box)[0]).find(\'.w2ui-search-down\').css(\'margin-top\', \'4px\');\n      $($($gridPayment.box)[0]).find(\'.w2ui-search-clear\').css(\'margin-top\', \'4px\');\n    }\n    ;\n    function bindPaymentGridOnScroll(data) {\n      var rows = [];\n      var colkeys = [];\n      if (data.length > 0) {\n        colkeys = Object.keys(data[0]);\n      }\n\n      // check records exist in grid or not\n      // for updating record id \n      var count = 0;\n      if ($gridPayment.records.length > 0) {\n        count = $gridPayment.records.length;\n      }\n      ;\n      for (var r = 0; r < data.length; r++) {\n        var singleRow = {};\n        singleRow[\'recid\'] = count + r;\n        for (var c = 0; c < colkeys.length; c++) {\n          var colna = colkeys[c];\n          if (colna == "SelectRow") {\n            singleRow[colna] = false;\n          } else {\n            singleRow[colna] = VIS.Utility.encodeText(data[r][colna]);\n          }\n        }\n        rows.push(singleRow);\n      }\n\n      // bind rows with grid\n      w2utils.encodeTags(rows);\n      $gridPayment.add(rows);\n\n      // when we load new payment either after filter or directly and if any payment is selected already than we need to trigger it\'s click event.\n      if (totalselectedpay > 0) {\n        for (var i = 0; i < totalselectedpay; i++) {\n          var chk = $(\'#grid_\' + $gridPayment.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n          $(chk[i]).prop(\'checked\', true);\n          $gridPayment.editChange.call($gridPayment, chk[i], i, 0, event);\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": i,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $gridPayment.trigger(eData);\n        }\n      }\n      totalselectedpay = 0;\n      //end\n      rows = [];\n      colkeys = [];\n      //added window no to find grid to implement scroll  issue : scroll was not working properly\n      $divPayment.find(\'#grid_openformatgrid_\' + $self.windowNo + \'_records\').on(\'scroll\', cartPaymentScroll);\n    }\n    ;\n\n    //Cash line grid bind\n    //culture work\n    function bindCashline(data, chk) {\n      var columns = [];\n      columns.push({\n        field: \'SelectRow\',\n        columnName: "SelectRow",\n        caption: VIS.translatedTexts.VIS_Check,\n        size: \'50px\',\n        editable: {\n          type: \'checkbox\'\n        },\n        sortable: true\n      });\n      columns.push({\n        field: "AD_Org_ID",\n        columnName: "AD_Org_ID",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'85px\',\n        hidden: true,\n        sortable: true\n      });\n      columns.push({\n        field: "OrgName",\n        columnName: "OrgName",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'105px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "DATEACCT",\n        columnName: "DATEACCT",\n        caption: VIS.translatedTexts.DateAcct,\n        size: \'105px\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["DATEACCT"];\n          return new Date(val).toLocaleDateString();\n        }\n      });\n      columns.push({\n        field: "ReceiptNo",\n        columnName: "ReceiptNo",\n        caption: VIS.translatedTexts.RECEIPTNO,\n        size: \'120px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "VSS_paymenttype",\n        columnName: "VSS_paymenttype",\n        caption: "Payment ID",\n        size: \'120px\',\n        hidden: true\n      });\n      columns.push({\n        field: "Payment",\n        columnName: "Payment",\n        caption: "Payment Type",\n        size: \'120px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "Isocode",\n        columnName: "Isocode",\n        caption: VIS.Msg.getMsg("TrxCurrency"),\n        size: \'105px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "ConversionName",\n        columnName: "ConversionName",\n        caption: VIS.translatedTexts.C_ConversionType_ID,\n        size: \'105px\',\n        hidden: false,\n        sortable: true\n      });\n      if (chk) {\n        //render column into float with culture format\n        columns.push({\n          field: "Amount",\n          columnName: "Amount",\n          caption: VIS.translatedTexts.Amount,\n          size: \'150px\',\n          attr: \'align=right\',\n          hidden: false,\n          sortable: true,\n          render: function (record, index, col_index) {\n            var val = record["Amount"];\n            return parseFloat(val).toLocaleString(navigator.language, {\n              minimumFractionDigits: stdPrecision,\n              maximumFractionDigits: stdPrecision\n            });\n          }\n        });\n      } else {\n        columns.push({\n          field: "Amount",\n          columnName: "Amount",\n          caption: VIS.translatedTexts.Amount,\n          size: \'150px\',\n          hidden: true\n        });\n      }\n      //render column into float with culture format\n      columns.push({\n        field: "ConvertedAmount",\n        columnName: "ConvertedAmount",\n        caption: VIS.Msg.getMsg("ConvertedAmount"),\n        size: \'150px\',\n        attr: \'align=right\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["ConvertedAmount"];\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        }\n      });\n      //render column into float with culture format\n      columns.push({\n        field: "OpenAmt",\n        columnName: "OpenAmt",\n        caption: VIS.translatedTexts.OpenAmount,\n        size: \'150px\',\n        hidden: false,\n        attr: \'align=right\',\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["OpenAmt"];\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        }\n      });\n      //render column into float with culture format\n      columns.push({\n        field: "AppliedAmt",\n        columnName: "AppliedAmt",\n        caption: VIS.translatedTexts.AppliedAmount,\n        size: \'150px\',\n        attr: \'align=right\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["AppliedAmt"];\n          val = checkcommaordot(event, val, val);\n          return parseFloat(val).toLocaleString(navigator.language, {\n            maximumFractionDigits: stdPrecision,\n            minimumFractionDigits: stdPrecision\n          });\n        },\n        editable: {\n          type: \'number\'\n        }\n      });\n      columns.push({\n        field: "Created",\n        columnName: "Created",\n        caption: VIS.translatedTexts.Date,\n        size: \'80px\',\n        hidden: true,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["Created"];\n          return new Date(val).toLocaleDateString();\n        }\n      });\n      //if (chk == true) {\n      //    columns.push({ field: "Isocode", caption: VIS.Msg.getMsg("TrxCurrency"), size: \'85px\', hidden: false });\n      //}\n      //else {\n      //    columns.push({ field: "Isocode", caption: VIS.Msg.getMsg("TrxCurrency"), size: \'85px\', hidden: true });\n      //}\n      //if (chk == true) {\n      //    //render column into float with culture format\n      //    columns.push({\n      //        field: "Amount", caption: VIS.translatedTexts.Amount, size: \'150px\', hidden: false, render: function (record, index, col_index) {\n      //            var val = record["Amount"];\n      //            return parseFloat(val).toLocaleString(navigator.language, { minimumFractionDigits: stdPrecision, maximumFractionDigits: stdPrecision });\n      //        }\n      //    });\n      //}\n      //else {\n      //    columns.push({ field: "Amount", caption: VIS.translatedTexts.Amount, size: \'150px\', hidden: true });\n      //}\n      columns.push({\n        field: "CcashlineiID",\n        columnName: "CcashlineiID",\n        caption: VIS.translatedTexts.ccashlineid,\n        size: \'150px\',\n        hidden: true\n      });\n      columns.push({\n        field: "Multiplierap",\n        columnName: "Multiplierap",\n        caption: VIS.translatedTexts.multiplierap,\n        hidden: true\n      });\n      columns.push({\n        field: "C_ConversionType_ID",\n        columnName: "C_ConversionType_ID",\n        caption: VIS.translatedTexts.C_ConversionType_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      columns.push({\n        field: "DATEACCT",\n        columnName: "DATEACCT",\n        caption: VIS.translatedTexts.DateAcct,\n        size: \'85px\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["DATEACCT"];\n          return new Date(val).toLocaleString();\n        },\n        hidden: true\n      });\n      columns.push({\n        field: "AD_Org_ID",\n        columnName: "AD_Org_ID",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      columns.push({\n        field: "OrgName",\n        columnName: "OrgName",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      var rows = [];\n      var colkeys = [];\n      if (data.length > 0) {\n        colkeys = Object.keys(data[0]);\n      }\n      for (var r = 0; r < data.length; r++) {\n        var singleRow = {};\n        singleRow[\'recid\'] = r;\n        for (var c = 0; c < colkeys.length; c++) {\n          var colna = colkeys[c];\n          if (colna.toLower() == "selectrow") {\n            singleRow[colna] = false;\n          } else {\n            singleRow[colna] = VIS.Utility.encodeText(data[r][colna]);\n          }\n        }\n        rows.push(singleRow);\n      }\n      if ($gridCashline != undefined && $gridCashline != null) {\n        $gridCashline.destroy();\n        $gridCashline = null;\n      }\n      $gridCashline = $divCashline.w2grid({\n        name: \'openformatgridcash_\' + $self.windowNo,\n        multiSelect: true,\n        //show: { toolbar: true },\n        columns: columns,\n        records: rows,\n        onChange: function (event) {\n          if (checkCheckedLimitOnCellCheckboxClick(event, false, false, true, false)) {\n            cashCellChanged(event);\n          }\n        },\n        onClick: function (event) {\n          cashCellClicked(event);\n          getMaxDate();\n        },\n        onDblClick: function (event) {\n          cashDoubleClicked(event);\n        },\n        onSelect: function (event) {\n          if (event.all) {\n            event.onComplete = function () {\n              //added window no to find grid to implement scroll  issue : scroll was not working properly\n              $divCashline.find(\'#grid_openformatgridcash_\' + $self.windowNo + \'_records\').on(\'scroll\', cartCashScroll);\n            };\n          }\n        },\n        //on edit grid columns need to prevent dot or comma according to culture\n        onEditField: function (event) {\n          event.onComplete = function (event) {\n            id = event.recid;\n            //event.column is a AppliedAmt column sequence No\n            /*VIS_427 Bug id - 5667 Handled issue when user enter Dot in german culture it allows user to enter the same\r\n            But now user can enter it*/\n            $(\'#grid_openformatgridcash_\' + $self.windowNo + \'_edit_\' + id + \'_\' + event.column).keydown(function (event) {\n              var isDotSeparator = culture.isDecimalSeparatorDot(window.navigator.language);\n              if (!isDotSeparator && (event.keyCode == 190 || event.keyCode == 110)) {\n                // , separator\n                return false;\n              } else if (isDotSeparator && event.keyCode == 188) {\n                // . separator\n                return false;\n              }\n              if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                this.value = this.value.replace(\'.\', \'\');\n              }\n              if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                this.value = this.value.replace(\',\', \'\');\n              }\n              if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n                return false;\n              }\n            });\n          };\n        }\n      });\n\n      // when we load new cashJournal either after filter or directly and if any cashJournal is selected already than we need to trigger it\'s click event.\n      if (totalselectedcash > 0) {\n        for (var i = 0; i < totalselectedcash; i++) {\n          var chk = $(\'#grid_\' + $gridCashline.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n          $(chk[i]).prop(\'checked\', true);\n          $gridCashline.editChange.call($gridCashline, chk[i], i, 0, event);\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": i,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $gridCashline.trigger(eData);\n        }\n      }\n      totalselectedcash = 0;\n      //end\n      $gridCashline.autoLoad = true;\n      $($($gridCashline.box)[0]).find(\'.w2ui-search-down\').css(\'margin-top\', \'4px\');\n      $($($gridCashline.box)[0]).find(\'.w2ui-search-clear\').css(\'margin-top\', \'4px\');\n    }\n    ;\n    function bindCashlineGridOnScroll(data) {\n      var rows = [];\n      var colkeys = [];\n      if (data.length > 0) {\n        colkeys = Object.keys(data[0]);\n      }\n\n      // check records exist in grid or not\n      // for updating record id \n      var count = 0;\n      if ($gridCashline.records.length > 0) {\n        count = $gridCashline.records.length;\n      }\n      ;\n      for (var r = 0; r < data.length; r++) {\n        var singleRow = {};\n        singleRow[\'recid\'] = count + r;\n        for (var c = 0; c < colkeys.length; c++) {\n          var colna = colkeys[c];\n          if (colna.toLower() == "selectrow") {\n            singleRow[colna] = false;\n          } else {\n            singleRow[colna] = VIS.Utility.encodeText(data[r][colna]);\n          }\n        }\n        rows.push(singleRow);\n      }\n\n      // bind rows with grid\n      w2utils.encodeTags(rows);\n      $gridCashline.add(rows);\n      rows = [];\n      colkeys = [];\n      //added window no to find grid to implement scroll  issue : scroll was not working properly\n      $divCashline.find(\'#grid_openformatgridcash_\' + $self.windowNo + \'_records\').on(\'scroll\', cartCashScroll);\n    }\n    ;\n\n    /**\r\n     * check checkbox checked limit when click on select all checkbox max 50 records are allow to select\r\n     * @param {any} chk\r\n     * @param {any} isInv\r\n     * @param {any} isPayment\r\n     * @param {any} isCash\r\n     * @param {any} isGl\r\n     */\n    function checkCheckedLimitOnSelectAllCheckBox(chk, isInv, isPayment, isCash, isGl) {\n      var result = true;\n      var checked = null;\n      if (isInv) checked = $(\'#grid_\' + $gridInvoice.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]:checked\');else if (isPayment) checked = $(\'#grid_\' + $gridPayment.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]:checked\');else if (isCash) checked = $(\'#grid_\' + $gridCashline.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]:checked\');else if (isGl) checked = $(\'#grid_\' + $glLineGrid.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]:checked\');\n\n      //VA228:User can select maximum 50 records assigned by amit\n      if (checked != null && checked.length > 50) {\n        $(chk).prop(\'checked\', false);\n        result = false;\n      }\n      return result;\n    }\n    /**\r\n     * check checked checkbox on click checkbox inside grid max 50 records are allow to select\r\n     * @param {any} event\r\n     * @param {any} isInv\r\n     * @param {any} isPayment\r\n     * @param {any} isCash\r\n     * @param {any} isGl\r\n     */\n    function checkCheckedLimitOnCellCheckboxClick(event, isInv, isPayment, isCash, isGl) {\n      var result = true;\n      var gridId = null;\n      if (isInv) gridId = $gridInvoice.name;else if (isPayment) gridId = $gridPayment.name;else if (isCash) gridId = $gridCashline.name;else if (isGl) gridId = $glLineGrid.name;\n      var checked = $(\'#grid_\' + gridId + \'_records td[col="0"]\').find(\'input[type="checkbox"]:checked\');\n      //VA228:User can select maximum 50 records assigned by amit\n      if (checked != null && checked.length > 50) {\n        var chk = $(\'#grid_\' + gridId + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n        $(chk[event.recid]).prop(\'checked\', false);\n        VIS.ADialog.warn("VIS_MaxLimitReached");\n        event.preventDefault();\n        result = false;\n      }\n      return result;\n    }\n\n    //Invoice grid bind\n    function bindInvoiceGrid(data, chk) {\n      var columns = [];\n      columns.push({\n        field: \'SelectRow\',\n        columnName: "SelectRow",\n        caption: VIS.translatedTexts.VIS_Check,\n        size: \'50px\',\n        editable: {\n          type: \'checkbox\'\n        },\n        sortable: true\n      });\n      columns.push({\n        field: "AD_Org_ID",\n        columnName: "AD_Org_ID",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      columns.push({\n        field: "OrgName",\n        columnName: "OrgName",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'105px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "DATEACCT",\n        columnName: "DATEACCT",\n        caption: VIS.translatedTexts.DateAcct,\n        size: \'105px\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["DATEACCT"];\n          return new Date(val).toLocaleDateString();\n        }\n      });\n      columns.push({\n        field: "Documentno",\n        columnName: "Documentno",\n        caption: VIS.translatedTexts.DocumentNo,\n        size: \'120px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "InvoiceScheduleDate",\n        columnName: "InvoiceScheduleDate",\n        caption: VIS.translatedTexts.ScheduleDate,\n        size: \'100px\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["InvoiceScheduleDate"];\n          return new Date(val).toLocaleDateString();\n        }\n      });\n      columns.push({\n        field: "DocBaseType",\n        columnName: "DocBaseType",\n        caption: VIS.translatedTexts.DocBaseType,\n        size: \'120px\',\n        hidden: false,\n        sortable: true\n      });\n      //new column payment method name added into grid\n      columns.push({\n        field: "PayName",\n        columnName: "PayName",\n        caption: VIS.translatedTexts.PaymentMethod,\n        size: \'120px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "Isocode",\n        columnName: "Isocode",\n        caption: VIS.Msg.getMsg("TrxCurrency"),\n        size: \'85px\',\n        hidden: false,\n        sortable: true\n      });\n      columns.push({\n        field: "ConversionName",\n        columnName: "ConversionName",\n        caption: VIS.translatedTexts.C_ConversionType_ID,\n        size: \'85px\',\n        hidden: false,\n        sortable: true\n      });\n      if (chk) {\n        //render column into float with culture format\n        columns.push({\n          field: "Currency",\n          columnName: "Currency",\n          caption: VIS.translatedTexts.Amount,\n          size: \'100px\',\n          attr: \'align=right\',\n          hidden: false,\n          sortable: true,\n          render: function (record, index, col_index) {\n            var val = record["Currency"];\n            return parseFloat(val).toLocaleString(navigator.language, {\n              minimumFractionDigits: stdPrecision,\n              maximumFractionDigits: stdPrecision\n            });\n          }\n        });\n      } else {\n        columns.push({\n          field: "Currency",\n          columnName: "Currency",\n          caption: VIS.translatedTexts.Amount,\n          size: \'100px\',\n          hidden: true\n        });\n      }\n      //render column into float with culture format\n      columns.push({\n        field: "Converted",\n        columnName: "Converted",\n        caption: VIS.Msg.getMsg("ConvertedAmount"),\n        size: \'100px\',\n        hidden: false,\n        sortable: true,\n        attr: \'align=right\',\n        render: function (record, index, col_index) {\n          var val = record["Converted"];\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        }\n      });\n      //render column into float with culture format\n      columns.push({\n        field: "Amount",\n        columnName: "Amount",\n        caption: VIS.translatedTexts.OpenAmount,\n        size: \'100px\',\n        hidden: false,\n        sortable: true,\n        attr: \'align=right\',\n        render: function (record, index, col_index) {\n          var val = record["Amount"];\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        }\n      });\n      //render column into float with culture format\n      columns.push({\n        field: "Discount",\n        columnName: "Discount",\n        caption: VIS.translatedTexts.DiscountAmt,\n        size: \'100px\',\n        hidden: false,\n        sortable: true,\n        attr: \'align=right\',\n        render: function (record, index, col_index) {\n          var val = record["Discount"];\n          val = checkcommaordot(event, val, val);\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        },\n        editable: {\n          type: \'number\'\n        }\n      });\n      columns.push({\n        field: "Date1",\n        columnName: "Date1",\n        caption: VIS.translatedTexts.Date,\n        size: \'80px\',\n        hidden: true,\n        render: function (record, index, col_index) {\n          var val = record["Date1"];\n          return new Date(val).toLocaleDateString();\n        }\n      });\n      columns.push({\n        field: "CinvoiceID",\n        columnName: "AD_Org_ID",\n        caption: VIS.translatedTexts.cinvoiceid,\n        size: \'150px\',\n        hidden: true\n      });\n      //if (chk) {\n      //    columns.push({ field: "Isocode", caption: VIS.Msg.getMsg("TrxCurrency"), size: \'85px\', hidden: false });\n      //}\n      //else {\n      //    columns.push({ field: "Isocode", caption: VIS.Msg.getMsg("TrxCurrency"), size: \'85px\', hidden: true });\n      //}\n      columns.push({\n        field: "Multiplierap",\n        columnName: "Multiplierap",\n        caption: VIS.translatedTexts.multiplierap,\n        hidden: true\n      });\n      //render column into float with culture format\n      columns.push({\n        field: "Writeoff",\n        columnName: "Writeoff",\n        caption: VIS.translatedTexts.WriteOffAmount,\n        size: \'100px\',\n        attr: \'align=right\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["Writeoff"];\n          val = checkcommaordot(event, val, val);\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        },\n        editable: {\n          type: \'number\'\n        }\n      });\n      //render column into float with culture format\n      columns.push({\n        field: "AppliedAmt",\n        columnName: "AppliedAmt",\n        caption: VIS.translatedTexts.AppliedAmount,\n        size: \'100px\',\n        hidden: false,\n        sortable: true,\n        attr: \'align=right\',\n        render: function (record, index, col_index) {\n          var val = record["AppliedAmt"];\n          val = checkcommaordot(event, val, val);\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        },\n        editable: {\n          type: \'number\'\n        }\n      });\n      if (countVA009 > 0) {\n        columns.push({\n          field: "C_InvoicePaySchedule_ID",\n          columnName: "C_InvoicePaySchedule_ID",\n          caption: VIS.translatedTexts.C_InvoicePaySchedule_ID,\n          size: \'100px\',\n          hidden: true\n        });\n      }\n      columns.push({\n        field: "C_ConversionType_ID",\n        columnName: "C_ConversionType_ID",\n        caption: VIS.translatedTexts.C_ConversionType_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      columns.push({\n        field: "DATEACCT",\n        columnName: "DATEACCT",\n        caption: VIS.translatedTexts.DateAcct,\n        size: \'85px\',\n        hidden: false,\n        sortable: true,\n        render: function (record, index, col_index) {\n          var val = record["DATEACCT"];\n          return new Date(val).toLocaleString();\n        },\n        hidden: true\n      });\n      columns.push({\n        field: "AD_Org_ID",\n        columnName: "AD_Org_ID",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      columns.push({\n        field: "OrgName",\n        columnName: "OrgName",\n        caption: VIS.translatedTexts.AD_Org_ID,\n        size: \'85px\',\n        hidden: true\n      });\n      var rows = [];\n      var colkeys = [];\n      if (data.length > 0) {\n        colkeys = Object.keys(data[0]);\n      }\n      for (var r = 0; r < data.length; r++) {\n        var singleRow = {};\n        singleRow[\'recid\'] = r;\n        for (var c = 0; c < colkeys.length; c++) {\n          var colna = colkeys[c];\n          if (colna.toLower() == "selectrow") {\n            singleRow[colna] = false;\n          } else {\n            singleRow[colna] = VIS.Utility.encodeText(data[r][colna]);\n          }\n        }\n        rows.push(singleRow);\n      }\n      if ($gridInvoice != undefined && $gridInvoice != null) {\n        $gridInvoice.destroy();\n        $gridInvoice = null;\n      }\n      $gridInvoice = $divInvoice.w2grid({\n        name: \'openformatgridinvoice_\' + $self.windowNo,\n        //show: { toolbar: true },\n        multiSelect: true,\n        columns: columns,\n        records: rows,\n        onChange: function (event) {\n          if (checkCheckedLimitOnCellCheckboxClick(event, true, false, false, false)) {\n            invoiceCellChanged(event);\n            getMaxDate();\n          }\n        },\n        onClick: function (event) {\n          invoiceCellClicked(event);\n          getMaxDate();\n        },\n        onDblClick: function (event) {\n          invoiceDoubleClicked(event);\n        },\n        onSelect: function (event) {\n          if (event.all) {\n            event.onComplete = function () {\n              //added window no to find grid to implement scroll  issue : scroll was not working properly\n              $divInvoice.find(\'#grid_openformatgridinvoice_\' + $self.windowNo + \'_records\').on(\'scroll\', cartInvoiceScroll);\n            };\n          }\n        },\n        //on edit grid columns need to prevent dot or comma according to culture\n        onEditField: function (event) {\n          event.onComplete = function (event) {\n            id = event.recid;\n            /*VIS_427 Bug id - 5667 Handled issue when user enter Dot in german culture it allows user to enter the same\r\n            But now user can enter it*/\n            $(\'#grid_openformatgridinvoice_\' + $self.windowNo + \'_edit_\' + id + \'_\' + event.column).keydown(function (event) {\n              var isDotSeparator = culture.isDecimalSeparatorDot(window.navigator.language);\n              if (!isDotSeparator && (event.keyCode == 190 || event.keyCode == 110)) {\n                // , separator\n                return false;\n              } else if (isDotSeparator && event.keyCode == 188) {\n                // . separator\n                return false;\n              }\n              if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                this.value = this.value.replace(\'.\', \'\');\n              }\n              if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                this.value = this.value.replace(\',\', \'\');\n              }\n              if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n                return false;\n              }\n            });\n          };\n        }\n      });\n      // when we load new invoice schedules either after filter or directly and if any invoice schedule is selected already than we need to trigger it\'s click event.\n      if (totalselectedinv > 0) {\n        for (var i = 0; i < totalselectedinv; i++) {\n          var chk = $(\'#grid_\' + $gridInvoice.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n          $(chk[i]).prop(\'checked\', true);\n          $gridInvoice.editChange.call($gridInvoice, chk[i], i, 0, event);\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": i,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $gridInvoice.trigger(eData);\n        }\n      }\n      totalselectedinv = 0;\n      //end\n      $gridInvoice.autoLoad = true;\n      $($($gridInvoice.box)[0]).find(\'.w2ui-search-down\').css(\'margin-top\', \'4px\');\n      $($($gridInvoice.box)[0]).find(\'.w2ui-search-clear\').css(\'margin-top\', \'4px\');\n    }\n    ;\n    function bindInvoiceGridOnScroll(data) {\n      var rows = [];\n      var colkeys = [];\n      if (data.length > 0) {\n        colkeys = Object.keys(data[0]);\n      }\n\n      // check records exist in grid or not\n      // for updating record id \n      var count = 0;\n      if ($gridInvoice.records.length > 0) {\n        count = $gridInvoice.records.length;\n      }\n      ;\n      for (var r = 0; r < data.length; r++) {\n        var singleRow = {};\n        singleRow[\'recid\'] = count + r;\n        for (var c = 0; c < colkeys.length; c++) {\n          var colna = colkeys[c];\n          if (colna.toLower() == "selectrow") {\n            singleRow[colna] = false;\n          } else {\n            singleRow[colna] = VIS.Utility.encodeText(data[r][colna]);\n          }\n        }\n        rows.push(singleRow);\n      }\n\n      // bind rows with grid\n      w2utils.encodeTags(rows);\n      $gridInvoice.add(rows);\n\n      // when we load new invoice schedules either after filter or directly and if any invoice schedule is selected already than we need to trigger it\'s click event.\n      if (totalselectedinv > 0) {\n        for (var i = 0; i < totalselectedinv; i++) {\n          var chk = $(\'#grid_\' + $gridInvoice.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n          $(chk[i]).prop(\'checked\', true);\n          $gridInvoice.editChange.call($gridInvoice, chk[i], i, 0, event);\n          var eData = {\n            "type": "click",\n            "phase": "before",\n            "target": "grid",\n            "recid": i,\n            "index": i,\n            "isStopped": false,\n            "isCan//celled": false,\n            "onComplete": null\n          };\n          $gridInvoice.trigger(eData);\n        }\n      }\n      totalselectedinv = 0;\n      //end\n\n      rows = [];\n      colkeys = [];\n      //added window no to find grid to implement scroll  issue : scroll was not working properly\n      $divInvoice.find(\'#grid_openformatgridinvoice_\' + $self.windowNo + \'_records\').on(\'scroll\', cartInvoiceScroll);\n    }\n    ;\n    function paymentDoubleClicked(event) {\n      if ($gridPayment.columns[event.column] == undefined) {\n        event.preventDefault();\n        return;\n      }\n      if ($gridPayment.columns[event.column].field == "AppliedAmt") {\n        var getChanges = $gridPayment.getChanges();\n        if (getChanges == undefined || getChanges.length == 0) {\n          $gridPayment.columns[event.column].editable = false;\n          return;\n        }\n        var element = $.grep(getChanges, function (ele, index) {\n          return parseInt(ele.recid) == parseInt(event.recid);\n        });\n        if (element == null || element[0] == undefined || element[0].SelectRow == undefined) {\n          $gridPayment.columns[event.column].editable = false;\n          return;\n        }\n        //changed column type from text to number on edit event\n        $gridPayment.columns[event.column].editable = {\n          type: \'number\'\n        };\n        $gridPayment.columns[event.column].render = function (record, index, col_index) {\n          var val = 0;\n          if ($gridPayment.columns[event.column].field == "AppliedAmt") {\n            if (record.changes == undefined || record.changes.AppliedAmt == undefined || record.changes.SelectRow == undefined) {\n              if (record.changes != undefined && record.changes.SelectRow != undefined && record.changes.SelectRow == true && record.changes.AppliedAmt == undefined) {\n                //record.changes.AppliedAmt = checkcommaordot(event, record.OpenAmt);\n                //val = record.changes.AppliedAmt;\n                record.changes.AppliedAmt = record.OpenAmt;\n                val = convertAppliedAmtculture(record.changes.AppliedAmt.toString(), dotFormatter);\n              } else {\n                val = 0;\n              }\n            } else {\n              if (record.changes != undefined && record.changes.SelectRow != undefined && record.changes.SelectRow == true && record.changes.AppliedAmt == undefined) {\n                //record.changes.AppliedAmt = checkcommaordot(event, record.OpenAmt);\n                //val = record.changes.AppliedAmt;\n                record.changes.AppliedAmt = record.OpenAmt;\n                val = convertAppliedAmtculture(record.changes.AppliedAmt.toString(), dotFormatter);\n              } else {\n                val = convertAppliedAmtculture(record.changes.AppliedAmt.toString(), dotFormatter);\n                ;\n              }\n            }\n          }\n          //if ($gridPayment.columns[event.column].field == "Writeoff") {\n          //    if (record.changes == undefined || record.changes.Writeoff == undefined || record.changes.SelectRow == undefined) {\n          //        if ((record.changes != undefined) && (record.changes.SelectRow != undefined) && (record.changes.SelectRow == true && record.changes.Writeoff == undefined)) {\n          //            record.changes.Writeoff = checkcommaordot(event, record.Writeoff, record.Writeoff);\n          //            val = record.changes.Writeoff;\n          //        }\n          //        else {\n          //            val = 0;\n          //        }\n          //    }\n          //    else {\n          //        if ((record.changes != undefined) && (record.changes.SelectRow != undefined) && (record.changes.SelectRow == true && record.changes.Writeoff == undefined)) {\n          //            record.changes.Writeoff = checkcommaordot(event, record.Writeoff, record.Writeoff);\n          //            val = record.changes.Writeoff;\n          //        }\n          //        else {\n          //            record.changes.Writeoff = checkcommaordot(event, record.changes.Writeoff, record.Writeoff);\n          //            val = record.changes.Writeoff;\n          //        }\n          //    }\n          //}\n          //if ($gridPayment.columns[event.column].field == "Discount") {\n          //    if (record.changes == undefined || record.changes.Discount == undefined || record.changes.SelectRow == undefined) {\n          //        if ((record.changes != undefined) && (record.changes.SelectRow != undefined) && (record.changes.SelectRow == true && record.changes.Discount == undefined)) {\n          //            record.changes.Discount = checkcommaordot(event, record.Discount, record.Discount);\n          //            val = record.changes.Discount;\n          //        }\n          //        else {\n          //            val = 0;\n          //        }\n          //    }\n          //    else {\n          //        if ((record.changes != undefined) && (record.changes.SelectRow != undefined) && (record.changes.SelectRow == true && record.changes.Discount == undefined)) {\n          //            record.changes.Discount = checkcommaordot(event, record.Discount, record.Discount);\n          //            val = record.changes.Discount;\n          //        }\n          //        else {\n          //            record.changes.Discount = checkcommaordot(event, record.changes.Discount, record.Discount);\n          //            val = record.changes.Discount;\n          //        }\n          //    }\n          //}\n          //else if ($gridPayment.columns[event.column].field == "Writeoff") {\n          //    if (record.changes == undefined || record.changes.Writeoff == undefined) {\n          //        val = 0;\n          //    }\n          //    else {\n          //        record.changes.Writeoff = checkcommaordot(event, record.changes.Writeoff, record.Writeoff);\n          //        val = record.changes.Writeoff;\n          //    }\n          //}\n          //else if ($gridPayment.columns[event.column].field == "Discount") {\n          //    if (record.changes == undefined || record.changes.Discount == undefined) {\n          //        val = 0;\n          //    }\n          //    else {\n          //        record.changes.Writeoff = checkcommaordot(event, record.changes.Writeoff, record.Discount);\n          //        val = record.changes.Discount;\n          //    }\n          //}\n\n          if (parseFloat(val) > 0 && parseFloat(val) > parseFloat(record.OpenAmt)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            val = parseFloat(record.OpenAmt);\n          } else if (parseFloat(record.OpenAmt) < 0 && parseFloat(val) < parseFloat(record.OpenAmt)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            val = parseFloat(record.OpenAmt);\n          } else if (parseFloat(record.OpenAmt) > 0 && parseFloat(val) < 0) {\n            VIS.ADialog.warn("VIS_AppliedAmtleszero");\n            val = parseFloat(record.OpenAmt);\n          }\n          //when the OpenAmt is Equal to AppliedAmt\n          if (record.OpenAmt != 0 && record.AppliedAmt != 0 && record.OpenAmt != "" && record.AppliedAmt != "" && record.changes != undefined && record.changes.SelectRow == true) {\n            if (record.OpenAmt == record.AppliedAmt && parseFloat(record.changes.AppliedAmt) == record.AppliedAmt) {\n              calculate();\n            }\n          }\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        };\n      }\n      //End\n    }\n    ;\n    function cashDoubleClicked(event) {\n      if ($gridCashline.columns[event.column] == undefined) {\n        event.preventDefault();\n        return;\n      }\n      if ($gridCashline.columns[event.column].field == "AppliedAmt") {\n        var getChanges = $gridCashline.getChanges();\n        if (getChanges == undefined || getChanges.length == 0) {\n          $gridCashline.columns[event.column].editable = false;\n          return;\n        }\n        var element = $.grep(getChanges, function (ele, index) {\n          return parseInt(ele.recid) == parseInt(event.recid);\n        });\n        if (element == null || element[0] == undefined || element[0].SelectRow == undefined) {\n          $gridCashline.columns[event.column].editable = false;\n          return;\n        }\n        //changed column type from text to number on edit event\n        $gridCashline.columns[event.column].editable = {\n          type: \'number\'\n        };\n        $gridCashline.columns[event.column].render = function (record, index, col_index) {\n          var val = 0;\n          if ($gridCashline.columns[event.column].field == "AppliedAmt") {\n            if (record.changes == undefined || record.changes.AppliedAmt == undefined || record.changes.SelectRow == undefined) {\n              if (record.changes != undefined && record.changes.SelectRow != undefined && record.changes.SelectRow == true && record.changes.AppliedAmt == undefined) {\n                //record.changes.AppliedAmt = checkcommaordot(event, record.OpenAmt);\n                //val = record.changes.AppliedAmt;\n                record.changes.AppliedAmt = record.OpenAmt;\n                val = convertAppliedAmtculture(record.changes.AppliedAmt.toString(), dotFormatter);\n              } else {\n                val = 0;\n              }\n            } else {\n              if (record.changes != undefined && record.changes.SelectRow != undefined && record.changes.SelectRow == true && record.changes.AppliedAmt == undefined) {\n                record.changes.AppliedAmt = checkcommaordot(event, record.OpenAmt, record.OpenAmt);\n                // val = record.changes.AppliedAmt;\n                val = convertAppliedAmtculture(record.changes.AppliedAmt.toString(), dotFormatter);\n              } else {\n                /*VIS383: Bug ID-5667 06/05/24:-Comment this code for handle issue, when user clicking on Applied amount of Cash Journal then \r\n                 system is displaying amount in dot(.) format instead of comma(,) for German and Slovenian culture*/\n                //record.changes.AppliedAmt = checkcommaordot(event, record.changes.AppliedAmt, record.OpenAmt); \n                //val = record.changes.AppliedAmt;\n                val = convertAppliedAmtculture(record.changes.AppliedAmt.toString(), dotFormatter);\n              }\n            }\n          }\n          //if ($gridCashline.columns[event.column].field == "Writeoff") {\n          //    if (record.changes == undefined || record.changes.Writeoff == undefined || record.changes.SelectRow == undefined) {\n          //        if ((record.changes != undefined) && (record.changes.SelectRow != undefined) && (record.changes.SelectRow == true && record.changes.Writeoff == undefined)) {\n          //            record.changes.Writeoff = checkcommaordot(event, record.Writeoff, record.Writeoff);\n          //            val = record.changes.Writeoff;\n          //        }\n          //        else {\n          //            val = 0;\n          //        }\n          //    }\n          //    else {\n          //        if ((record.changes != undefined) && (record.changes.SelectRow != undefined) && (record.changes.SelectRow == true && record.changes.Writeoff == undefined)) {\n          //            record.changes.Writeoff = checkcommaordot(event, record.Writeoff, record.Writeoff);\n          //            val = record.changes.Writeoff;\n          //        }\n          //        else {\n          //            record.changes.Writeoff = checkcommaordot(event, record.changes.Writeoff, record.Writeoff);\n          //            val = record.changes.Writeoff;\n          //        }\n          //    }\n          //}\n          //if ($gridCashline.columns[event.column].field == "Discount") {\n          //    if (record.changes == undefined || record.changes.Discount == undefined || record.changes.SelectRow == undefined) {\n          //        if ((record.changes != undefined) && (record.changes.SelectRow != undefined) && (record.changes.SelectRow == true && record.changes.Discount == undefined)) {\n          //            record.changes.Discount = checkcommaordot(event, record.Discount, record.Discount);\n          //            val = record.changes.Discount;\n          //        }\n          //        else {\n          //            val = 0;\n          //        }\n          //    }\n          //    else {\n          //        if ((record.changes != undefined) && (record.changes.SelectRow != undefined) && (record.changes.SelectRow == true && record.changes.Discount == undefined)) {\n          //            record.changes.Discount = checkcommaordot(event, record.Discount, record.Discount);\n          //            val = record.changes.Discount;\n          //        }\n          //        else {\n          //            record.changes.Discount = checkcommaordot(event, record.changes.Discount, record.Discount);\n          //            val = record.changes.Discount;\n          //        }\n          //    }\n          //}\n          //else if ($gridCashline.columns[event.column].field == "Writeoff") {\n          //    if (record.changes == undefined || record.changes.Writeoff == undefined) {\n          //        val = 0;\n          //    }\n          //    else {\n          //        record.changes.Writeoff = checkcommaordot(event, record.changes.Writeoff, record.Writeoff);\n          //        val = record.changes.Writeoff;\n          //    }\n          //}\n          //else if ($gridCashline.columns[event.column].field == "Discount") {\n          //    if (record.changes == undefined || record.changes.Discount == undefined) {\n          //        val = 0;\n          //    }\n          //    else {\n          //        record.changes.Discount = checkcommaordot(event, record.changes.Discount, record.Discount);\n          //        val = record.changes.Discount;\n          //    }\n          //}\n\n          if (parseFloat(val) > 0 && parseFloat(val) > parseFloat(record.OpenAmt)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            val = parseFloat(record.OpenAmt);\n          } else if (parseFloat(record.OpenAmt) < 0 && parseFloat(val) < parseFloat(record.OpenAmt)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            val = parseFloat(record.OpenAmt);\n          } else if (parseFloat(record.OpenAmt) > 0 && parseFloat(val) < 0) {\n            VIS.ADialog.warn("VIS_AppliedAmtleszero");\n            val = parseFloat(record.OpenAmt);\n          }\n          //when the OpenAmt is Equal to AppliedAmt\n          if (record.OpenAmt != 0 && record.AppliedAmt != 0 && record.OpenAmt != "" && record.AppliedAmt != "" && record.changes != undefined && record.changes.SelectRow == true) {\n            if (record.OpenAmt == record.AppliedAmt && parseFloat(record.changes.AppliedAmt) == record.AppliedAmt) {\n              calculate();\n            }\n          }\n          /*VIS383: Bug ID-5667 06/05/24:-Handle issue, when user clicking on Applied amount of Cash Journal then system is displaying "NaN" in in slovenian culture*/\n          if (val.contains(\'−\')) {\n            val = val.replace(\'−\', \'-\');\n          }\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        };\n        //End\n      }\n    }\n    ;\n    function invoiceDoubleClicked(event) {\n      if ($gridInvoice.columns[event.column] == undefined) {\n        event.preventDefault();\n        return;\n      }\n      if ($gridInvoice.columns[event.column].field == "AppliedAmt" || $gridInvoice.columns[event.column].field == "Writeoff" || $gridInvoice.columns[event.column].field == "Discount") {\n        var getChanges = $gridInvoice.getChanges();\n        if (getChanges == undefined || getChanges.length == 0) {\n          $gridInvoice.columns[event.column].editable = false;\n          return;\n        }\n        var element = $.grep(getChanges, function (ele, index) {\n          return parseInt(ele.recid) == parseInt(event.recid);\n        });\n        if (element == null || element[0] == undefined || element[0].SelectRow == undefined) {\n          $gridInvoice.columns[event.column].editable = false;\n          return;\n        }\n        //changed column type from text to number on edit event\n        $gridInvoice.columns[event.column].editable = {\n          type: \'number\'\n        };\n        $gridInvoice.columns[event.column].render = function (record, index, col_index) {\n          var val = 0;\n          if ($gridInvoice.columns[event.column].field == "AppliedAmt") {\n            if (record.changes == undefined || record.changes.AppliedAmt == undefined || record.changes.SelectRow == undefined) {\n              if (record.changes != undefined && record.changes.SelectRow != undefined && record.changes.SelectRow == true && record.changes.AppliedAmt == undefined) {\n                //record.changes.AppliedAmt = checkcommaordot(event, record.Amount, record.Amount);\n                //val = record.changes.AppliedAmt;\n                record.changes.AppliedAmt = record.Amount;\n                val = convertAppliedAmtculture(record.changes.AppliedAmt.toString(), dotFormatter);\n              } else {\n                val = 0;\n              }\n            } else {\n              if (record.changes != undefined && record.changes.SelectRow != undefined && record.changes.SelectRow == true && record.changes.AppliedAmt == undefined) {\n                //record.changes.AppliedAmt = checkcommaordot(event, record.Amount, record.Amount);\n                //val = record.changes.AppliedAmt;\n                record.changes.AppliedAmt = record.Amount;\n                val = convertAppliedAmtculture(record.changes.AppliedAmt.toString(), dotFormatter);\n              } else {\n                //record.changes.AppliedAmt = checkcommaordot(event, record.changes.AppliedAmt, record.Amount);\n                //val = record.changes.AppliedAmt;\n                //record.changes.AppliedAmt = record.Amount;\n                val = convertAppliedAmtculture(record.changes.AppliedAmt.toString(), dotFormatter);\n              }\n            }\n          } else if ($gridInvoice.columns[event.column].field == "Writeoff") {\n            if (record.changes == undefined || record.changes.Writeoff == undefined || record.changes.SelectRow == undefined) {\n              if (record.changes != undefined && record.changes.SelectRow != undefined && record.changes.SelectRow == true && record.changes.Writeoff == undefined) {\n                //record.changes.Writeoff = checkcommaordot(event, record.Writeoff, record.Writeoff);\n                //val = record.changes.Writeoff;\n                record.changes.Writeoff = record.Writeoff;\n                val = convertAppliedAmtculture(record.changes.Writeoff.toString(), dotFormatter);\n              } else {\n                val = 0;\n              }\n            } else {\n              if (record.changes != undefined && record.changes.SelectRow != undefined && record.changes.SelectRow == true && record.changes.Writeoff == undefined) {\n                //record.changes.Writeoff = checkcommaordot(event, record.Writeoff, record.Writeoff);\n                //val = record.changes.Writeoff;\n                record.changes.Writeoff = record.Writeoff;\n                val = convertAppliedAmtculture(record.changes.Writeoff.toString(), dotFormatter);\n              } else {\n                //record.changes.Writeoff = checkcommaordot(event, record.changes.Writeoff, record.Writeoff);\n                //val = record.changes.Writeoff;\n                //record.changes.Writeoff = record.Writeoff;\n                val = convertAppliedAmtculture(record.changes.Writeoff.toString(), dotFormatter);\n              }\n            }\n          } else if ($gridInvoice.columns[event.column].field == "Discount") {\n            if (record.changes == undefined || record.changes.Discount == undefined || record.changes.SelectRow == undefined) {\n              if (record.changes != undefined && record.changes.SelectRow != undefined && record.changes.SelectRow == true && record.changes.Discount == undefined) {\n                //record.changes.Discount = checkcommaordot(event, record.Discount, record.Discount);\n                //val = record.changes.Discount;\n                record.changes.Discount = record.Discount;\n                val = convertAppliedAmtculture(record.changes.Discount.toString(), dotFormatter);\n              } else {\n                val = 0;\n              }\n            } else {\n              if (record.changes != undefined && record.changes.SelectRow != undefined && record.changes.SelectRow == true && record.changes.Discount == undefined) {\n                //record.changes.Discount = checkcommaordot(event, record.Discount, record.Discount);\n                //val = record.changes.Discount;\n                record.changes.Discount = record.Discount;\n                val = convertAppliedAmtculture(record.changes.Discount.toString(), dotFormatter);\n              } else {\n                val = convertAppliedAmtculture(record.changes.Discount.toString(), dotFormatter);\n              }\n            }\n          }\n          if (parseFloat(val) > 0 && parseFloat(val) > parseFloat(record.Amount)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            val = parseFloat(record.Amount);\n          } else if (parseFloat(record.Amount) < 0 && parseFloat(val) < parseFloat(record.Amount)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            val = parseFloat(record.Amount);\n          } else if (parseFloat(record.Amount) > 0 && parseFloat(val) < 0) {\n            VIS.ADialog.warn("VIS_AppliedAmtleszero");\n            val = parseFloat(record.Amount);\n          }\n          //when the OpenAmt is Equal to AppliedAmt\n          if (record.Amount != 0 && record.AppliedAmt != 0 && record.OpenAmt != "" && record.AppliedAmt != "" && record.changes != undefined && record.changes.SelectRow == true) {\n            if (parseFloat(record.Amount) === record.AppliedAmt && parseFloat(record.changes.AppliedAmt) == record.AppliedAmt) {\n              if (record.changes.Discount != 0 || record.changes.Writeoff != 0) {\n                var totAmt = parseFloat(record.changes.Discount) + parseFloat(record.changes.Writeoff) + parseFloat(record.changes.AppliedAmt);\n                if (Math.abs(totAmt) > Math.abs(parseFloat(record.Amount))) {\n                  VIS.ADialog.warn("AppliedAmtgrtr");\n                  if ($gridInvoice.columns[event.column].field == "Discount") {\n                    record.changes.Discount = 0;\n                    val = record.changes.Discount;\n                  } else if ($gridInvoice.columns[event.column].field == "Writeoff") {\n                    record.changes.Writeoff = 0;\n                    val = record.changes.Writeoff;\n                  } else if ($gridInvoice.columns[event.column].field == "AppliedAmt") {\n                    record.changes.AppliedAmt = 0;\n                    val = record.changes.AppliedAmt;\n                  }\n                }\n              }\n              calculate();\n            }\n          }\n          return parseFloat(val).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          });\n        };\n      }\n      //End\n    }\n    ;\n    //handle culture for AppliedAmt, writeOffAmt and DiscountAmt\n    function convertAppliedAmtculture(appliedAmount, dotFormatter) {\n      var val = 0;\n      typeof appliedAmount === "string" ? appliedAmount : appliedAmount = appliedAmount.toString();\n      if (!dotFormatter) {\n        if (appliedAmount.contains("−") && !appliedAmount.contains(".")) {\n          appliedAmount = (-1 * format.GetConvertedNumber(appliedAmount, dotFormatter)).toString();\n        } else if (appliedAmount.contains(",")) {\n          appliedAmount = format.GetConvertedNumber(appliedAmount, dotFormatter).toString();\n        }\n        val = appliedAmount != "" ? appliedAmount : val;\n      } else {\n        if (appliedAmount.contains("−")) {\n          appliedAmount = (-1 * format.GetConvertedNumber(appliedAmount, dotFormatter)).toString();\n        } else if (appliedAmount.contains(".")) {\n          appliedAmount = format.GetConvertedNumber(appliedAmount, dotFormatter).toString();\n        }\n        val = appliedAmount != "" ? appliedAmount : val;\n      }\n      return val;\n    }\n    // function to check comma or dot from given value and return new value\n    function checkcommaordot(event, val, amt) {\n      var foundComma = false;\n      event.value_new = VIS.Utility.Util.getValueOfString(val);\n      if (event.value_new.contains(".")) {\n        foundComma = true;\n        var indices = [];\n        for (var i = 0; i < event.value_new.length; i++) {\n          if (event.value_new[i] === ".") indices.push(i);\n        }\n        if (indices.length > 1) {\n          event.value_new = removeAllButLast(event.value_new, \'.\');\n        }\n      }\n      if (event.value_new.contains(",")) {\n        if (foundComma) {\n          event.value_new = removeAllButLast(event.value_new, \',\');\n        } else {\n          var indices = [];\n          for (var i = 0; i < event.value_new.length; i++) {\n            if (event.value_new[i] === ",") indices.push(i);\n          }\n          if (indices.length > 1) {\n            event.value_new = removeAllButLast(event.value_new, \',\');\n          } else {\n            event.value_new = event.value_new.replace(",", ".");\n          }\n        }\n      }\n      if (event.value_new == "") {\n        event.value_new = "0";\n      }\n      return event.value_new;\n    }\n    ;\n    // Remove all seperator but only bring last seperator\n    function removeAllButLast(amt, seprator) {\n      var parts = amt.split(seprator);\n      amt = parts.slice(0, -1).join(\'\') + \'.\' + parts.slice(-1);\n      if (amt.indexOf(\'.\') == amt.length - 1) {\n        amt = amt.replace(".", "");\n      }\n      return amt;\n    }\n    ;\n\n    // Remove all seperator but only bring last seperator\n    function removeAllButLast1(amt, seprator) {\n      var parts = amt.split(seprator);\n      amt = parts.slice(0, -1).join(\'\') + parts.slice(-1);\n      if (amt.indexOf(seprator == \'.\' ? \',\' : \'.\') == amt.length - 1) {\n        amt = amt.replace(seprator == \'.\' ? \',\' : \'.\', "");\n      }\n      return amt;\n    }\n    ;\n    //added for gl-allocation\n    //function glDoubleClicked(event) {\n    //    if (glLineGrid.columns[event.column].field == "AppliedAmt") {\n    //        var getChanges = glLineGrid.getChanges();\n    //        if (getChanges == undefined || getChanges.length == 0) {\n    //            return;\n    //        }\n\n    //        var element = $.grep(getChanges, function (ele, index) {\n    //            return parseInt(ele.recid) == parseInt(event.recid);\n    //        });\n    //        if (element == null || element == undefined || element[0].SelectRow == undefined) {\n    //            glLineGrid.columns[event.column].editable = false;\n    //            return;\n    //        }\n\n    //        /*** after discussion with ashish we finalized that gl journal applied amount will not be editable because we can not split gl \n    //             journal and we can not use gl journal partialy **/\n\n    //        //if (element[0].SelectRow == true) {\n    //        //    glLineGrid.columns[event.column].editable = { type: \'text\' };\n    //        //}\n    //        //else {\n    //        glLineGrid.columns[event.column].editable = false;\n    //        //    return;\n    //        //}\n    //    }\n    //};\n    //end\n\n    function invoiceCellClicked(event) {\n      var colIndex = $gridInvoice.getColumn(\'AppliedAmt\', true);\n      //get the index of SelectRow Column checkbox from grid\n      var selectColIndex = $gridInvoice.getColumn(\'SelectRow\', true);\n      if (event.column == 0 || event.column == null) {\n        var getChanges = $gridInvoice.getChanges();\n        var element = $.grep(getChanges, function (ele, index) {\n          return parseInt(ele.recid) == parseInt(event.recid);\n        });\n        if (element == null || element[0] == undefined || element.length == 0 || element[0].SelectRow == undefined) {\n          //Set value to 0 when element is null\n          $gridInvoice.get(event.recid)["AppliedAmt"] = 0;\n          $gridInvoice.get(event.recid)["Writeoff"] = 0;\n          $gridInvoice.get(event.recid)["Discount"] = 0;\n          $gridInvoice.refreshCell(event.recid, "AppliedAmt");\n          $gridInvoice.refreshCell(event.recid, "Writeoff");\n          $gridInvoice.refreshCell(event.recid, "Discount");\n          getMaxDate();\n        } else {\n          if (element[0].SelectRow == true) {\n            // when we select a record, check conversion type is same or not.\n            // if not then not to select this record\n            if (VIS.Utility.Util.getValueOfInt(C_ConversionType_ID) == 0) {\n              C_ConversionType_ID = $gridInvoice.get(event.recid).C_ConversionType_ID;\n            }\n            /*VIS_0045: conversion type matched when allocate with GL and Cash*/else if ((!readOnlyCash || !readOnlyGL) && C_ConversionType_ID != $gridInvoice.get(event.recid).C_ConversionType_ID) {\n              var $x = document.getElementsByName(event.target);\n              if ($x.length > 0) $x = $x[0];\n              var $z = $($x).find("#grid_openformatgridinvoice_rec_" + event.recid + "");\n              if ($z.length > 0) $z = $z[0];\n              if ($($z).find("input:checked").prop(\'checked\')) {\n                $($z).find("input:checked").prop(\'checked\', false);\n              }\n              //changed 0 to event.recid because we need to refresh selected row before it was working only for 1st row.\n              $gridInvoice.get(event.recid).changes = false;\n              $gridInvoice.columns[colIndex].editable = false;\n              $gridInvoice.get(event.recid).changes.AppliedAmt = "0";\n              $gridInvoice.refreshCell(event.recid, "AppliedAmt");\n              $gridInvoice.get(event.recid).changes.Discount = "0";\n              $gridInvoice.refreshCell(event.recid, "Discount");\n              $gridInvoice.get(event.recid).changes.Writeoff = "0";\n              $gridInvoice.refreshCell(event.recid, "Writeoff");\n              VIS.ADialog.warn("VIS_ConversionNotMatched");\n            }\n            if ($vchkMultiCurrency.is(\':checked\')) {\n              if ($conversionDate.val() == "") {\n                VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n                $gridInvoice.get(event.recid).changes = false;\n                $gridInvoice.unselect(event.recid);\n                $gridInvoice.columns[colIndex].editable = false;\n                $gridInvoice.get(event.recid).changes.AppliedAmt = "0";\n                $gridInvoice.refreshCell(event.recid, "AppliedAmt");\n                var chk = $(\'#grid_\' + $gridInvoice.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n                $(chk[event.index]).prop(\'checked\', false);\n                $gridInvoice.editChange.call($gridInvoice, chk[event.index], event.index, 0, event);\n                var eData = {\n                  "type": "click",\n                  "phase": "before",\n                  "target": "grid",\n                  "recid": event.recid,\n                  "index": event.index,\n                  "isStopped": false,\n                  "isCan//celled": false,\n                  "onComplete": null\n                };\n                $gridInvoice.trigger(eData);\n                return false;\n              }\n              var ConversnDate = Globalize.format(new Date($conversionDate.val()), "yyyy-MM-dd");\n              $dateAcct.val(Globalize.format(new Date(ConversnDate), "yyyy-MM-dd"));\n            } else {\n              getMaxDate();\n            }\n          } else {\n            $gridInvoice.unselect(event.recid);\n            $gridInvoice.columns[colIndex].editable = false;\n            //changed 0 to event.recid because we need to refresh selected row before it was working only for 1st row.\n            $gridInvoice.get(event.recid).changes.AppliedAmt = "0";\n            $gridInvoice.refreshCell(event.recid, "AppliedAmt");\n            $gridInvoice.get(event.recid).changes.Discount = "0";\n            $gridInvoice.refreshCell(event.recid, "Discount");\n            $gridInvoice.get(event.recid).changes.Writeoff = "0";\n            $gridInvoice.refreshCell(event.recid, "Writeoff");\n          }\n        }\n        //check weather someone clicked on select column checkbox in grid\n        if ((selectColIndex == event.column || event.column == null) && element[0] != undefined && !(element[0].SelectRow == undefined)) {\n          $gridInvoice.get(event.recid)["AppliedAmt"] = VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount);\n        }\n        tableChanged(event.recid, event.column, true, false);\n      }\n    }\n    ;\n    function paymentCellClicked(event) {\n      if (readOnlyPayment) {\n        event.preventDefault();\n        return;\n      }\n      var colIndex = $gridPayment.getColumn(\'AppliedAmt\', true);\n      //get the index of SelectRow Column checkbox from grid\n      var selectColIndex = $gridPayment.getColumn(\'SelectRow\', true);\n      if (event.column == 0 || event.column == null) {\n        var getChanges = $gridPayment.getChanges();\n        var element = $.grep(getChanges, function (ele, index) {\n          return parseInt(ele.recid) == parseInt(event.recid);\n        });\n        if (element == null || element[0] == undefined || element.length == 0 || element[0].SelectRow == undefined) {\n          //Set value to 0 when element is null\n          $gridPayment.get(event.recid)["AppliedAmt"] = 0;\n          //$gridPayment.records[event.recid]["Writeoff"] = 0;\n          //$gridPayment.records[event.recid]["Discount"] = 0;\n          $gridPayment.refreshCell(event.recid, "AppliedAmt");\n          getMaxDate();\n        } else {\n          if (element[0].SelectRow == true) {\n            // Get conversion type of selected record\n            let elementConversion = $.grep(getChanges, function (ele, index) {\n              return ele.SelectRow == true;\n            });\n            // when multicurrency true, then get conversion type from parameter\n            if ($vchkMultiCurrency.is(\':checked\')) {\n              C_ConversionType_ID = $vConversionType.getValue();\n            } else if (readOnlyGL && elementConversion != null && elementConversion.length > 0) {\n              /* when not allocated with GL, and first payment selected then overwrite conversion type with payment record */\n              C_ConversionType_ID = $gridPayment.get(elementConversion[0].recid).C_ConversionType_ID;\n            }\n            // when we select a record, check conversion type is same or not.\n            // if not then not to select this record\n            if (VIS.Utility.Util.getValueOfInt(C_ConversionType_ID) == 0) {\n              C_ConversionType_ID = $gridPayment.get(event.recid).C_ConversionType_ID;\n            } else if (C_ConversionType_ID != $gridPayment.get(event.recid).C_ConversionType_ID) {\n              var $x = document.getElementsByName(event.target);\n              if ($x.length > 0) $x = $x[0];\n              var $z = $($x).find("#grid_openformatgrid_rec_" + event.recid + "");\n              if ($z.length > 0) $z = $z[0];\n              if ($($z).find("input:checked").prop(\'checked\')) {\n                $($z).find("input:checked").prop(\'checked\', false);\n              }\n              $gridPayment.get(event.recid).changes = false;\n              $gridPayment.unselect(event.recid);\n              $gridPayment.columns[colIndex].editable = false;\n              $gridPayment.get(event.recid).changes.AppliedAmt = "0";\n              $gridPayment.refreshCell(event.recid, "AppliedAmt");\n              VIS.ADialog.warn("VIS_ConversionNotMatched");\n            }\n            if ($vchkMultiCurrency.is(\':checked\')) {\n              if ($conversionDate.val() == "") {\n                VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n                $gridPayment.get(event.recid).changes = false;\n                $gridPayment.unselect(event.recid);\n                $gridPayment.columns[colIndex].editable = false;\n                $gridPayment.get(event.recid).changes.AppliedAmt = "0";\n                $gridPayment.refreshCell(event.recid, "AppliedAmt");\n                var chk = $(\'#grid_\' + $gridPayment.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n                $(chk[event.index]).prop(\'checked\', false);\n                $gridPayment.editChange.call($gridPayment, chk[event.index], event.index, 0, event);\n                var eData = {\n                  "type": "click",\n                  "phase": "before",\n                  "target": "grid",\n                  "recid": event.index,\n                  "index": event.recid,\n                  "isStopped": false,\n                  "isCan//celled": false,\n                  "onComplete": null\n                };\n                $gridPayment.trigger(eData);\n                return false;\n              }\n              var DATEACCT = $gridPayment.get(event.recid).DATEACCT;\n              var ConversnDate = Globalize.format(new Date($conversionDate.val()), "yyyy-MM-dd");\n              DATEACCT = Globalize.format(new Date(DATEACCT), "yyyy-MM-dd");\n              if (ConversnDate != DATEACCT) {\n                VIS.ADialog.warn("VIS_SelectSameDate");\n                var colIndex = $gridPayment.getColumn(\'DATEACCT\', true);\n                $gridPayment.get(event.recid).changes = false;\n                $gridPayment.unselect(event.recid);\n                $gridPayment.columns[colIndex].editable = false;\n                $gridPayment.get(event.recid).changes.AppliedAmt = "0";\n                $gridPayment.refreshCell(event.recid, "AppliedAmt");\n                var chk = $(\'#grid_\' + $gridPayment.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n                $(chk[event.index]).prop(\'checked\', false);\n                $gridPayment.editChange.call($gridPayment, chk[event.index], event.index, 0, event);\n                var eData = {\n                  "type": "click",\n                  "phase": "before",\n                  "target": "grid",\n                  "recid": event.recid,\n                  "index": event.index,\n                  "isStopped": false,\n                  "isCan//celled": false,\n                  "onComplete": null\n                };\n                $gridPayment.trigger(eData);\n                return false;\n              }\n            }\n          } else {\n            $gridPayment.unselect(event.recid);\n            $gridPayment.columns[colIndex].editable = false;\n            $gridPayment.get(event.recid).changes.AppliedAmt = "0";\n            $gridPayment.refreshCell(event.recid, "AppliedAmt");\n          }\n        }\n        //check weather someone clicked on select column checkbox in grid\n        if ((selectColIndex == event.column || event.column == null) && element[0] != undefined && !(element[0].SelectRow == undefined)) {\n          $gridPayment.get(event.recid)["AppliedAmt"] = VIS.Utility.Util.getValueOfDecimal($gridPayment.get(event.recid).OpenAmt);\n        }\n        tableChanged(event.recid, event.column, false, false);\n      }\n    }\n    ;\n    function cashCellClicked(event) {\n      if (readOnlyCash) {\n        event.preventDefault();\n        return;\n      }\n      var colIndex = $gridCashline.getColumn(\'AppliedAmt\', true);\n      //get the index of SelectRow Column checkbox from grid\n      var selectColIndex = $gridCashline.getColumn(\'SelectRow\', true);\n      if (event.column == 0 || event.column == null) {\n        var getChanges = $gridCashline.getChanges();\n        var element = $.grep(getChanges, function (ele, index) {\n          return parseInt(ele.recid) == parseInt(event.recid);\n        });\n        if (element == null || element[0] == undefined || element.length == 0 || element[0].SelectRow == undefined) {\n          //Set value to 0 when element is null\n          $gridCashline.get(event.recid)["AppliedAmt"] = 0;\n          //$gridCashline.records[event.recid]["Writeoff"] = 0;\n          //$gridCashline.records[event.recid]["Discount"] = 0;\n          $gridCashline.refreshCell(0, "AppliedAmt");\n        } else {\n          if (element[0].SelectRow == true) {\n            // when we select a record, check conversion type is same or not.\n            // if not then not to select this record\n            if (VIS.Utility.Util.getValueOfInt(C_ConversionType_ID) == 0) {\n              C_ConversionType_ID = $gridCashline.get(event.recid).C_ConversionType_ID;\n            } else if (C_ConversionType_ID != $gridCashline.get(event.recid).C_ConversionType_ID) {\n              var $x = document.getElementsByName(event.target);\n              if ($x.length > 0) $x = $x[0];\n              var $z = $($x).find("#grid_openformatgridcash_rec_" + event.recid + "");\n              if ($z.length > 0) $z = $z[0];\n              if ($($z).find("input:checked").prop(\'checked\')) {\n                $($z).find("input:checked").prop(\'checked\', false);\n              }\n              $gridCashline.get(event.recid).changes = false;\n              $gridCashline.unselect(event.recid);\n              $gridCashline.columns[colIndex].editable = false;\n              $gridCashline.refreshCell(0, "AppliedAmt");\n              VIS.ADialog.warn("VIS_ConversionNotMatched");\n            }\n            if ($vchkMultiCurrency.is(\':checked\')) {\n              if ($conversionDate.val() == "") {\n                VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n                $gridCashline.get(event.recid).changes = false;\n                $gridCashline.unselect(event.recid);\n                $gridCashline.columns[colIndex].editable = false;\n                $gridCashline.refreshCell(event.recid, "AppliedAmt");\n                var chk = $(\'#grid_\' + $gridCashline.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n                $(chk[event.index]).prop(\'checked\', false);\n                $gridCashline.editChange.call($gridCashline, chk[event.index], event.index, 0, event);\n                var eData = {\n                  "type": "click",\n                  "phase": "before",\n                  "target": "grid",\n                  "recid": event.recid,\n                  "index": event.index,\n                  "isStopped": false,\n                  "isCan//celled": false,\n                  "onComplete": null\n                };\n                $gridCashline.trigger(eData);\n                return false;\n              }\n              var DATEACCT = $gridCashline.get(event.recid).DATEACCT;\n              var ConversnDate = Globalize.format(new Date($conversionDate.val()), "yyyy-MM-dd");\n              DATEACCT = Globalize.format(new Date(DATEACCT), "yyyy-MM-dd");\n              if (ConversnDate != DATEACCT) {\n                VIS.ADialog.warn("VIS_SelectSameDate");\n                var colIndex = $gridCashline.getColumn(\'DATEACCT\', true);\n                $gridCashline.get(event.recid).changes = false;\n                $gridCashline.unselect(event.recid);\n                $gridCashline.columns[colIndex].editable = false;\n                $gridCashline.refreshCell(event.recid, "AppliedAmt");\n                var chk = $(\'#grid_\' + $gridCashline.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n                $(chk[event.index]).prop(\'checked\', false);\n                $gridCashline.editChange.call($gridCashline, chk[event.index], event.index, 0, event);\n                var eData = {\n                  "type": "click",\n                  "phase": "before",\n                  "target": "grid",\n                  "recid": event.recid,\n                  "index": event.index,\n                  "isStopped": false,\n                  "isCan//celled": false,\n                  "onComplete": null\n                };\n                $gridCashline.trigger(eData);\n                return false;\n              }\n            }\n          } else {\n            $gridCashline.unselect(event.recid);\n            $gridCashline.columns[colIndex].editable = false;\n            $gridCashline.get(0).changes.AppliedAmt = "0";\n            $gridCashline.refreshCell(0, "AppliedAmt");\n          }\n        }\n        //check weather someone clicked on select column checkbox in grid\n        if ((selectColIndex == event.column || event.column == null) && element[0] != undefined && !(element[0].SelectRow == undefined)) {\n          //$gridCashline.records[event.recid]["AppliedAmt"] = VIS.Utility.Util.getValueOfDecimal($gridCashline.get(event.recid).Amount);\n          $gridCashline.get(event.recid)["AppliedAmt"] = VIS.Utility.Util.getValueOfDecimal($gridCashline.get(event.recid).OpenAmt);\n        }\n        tableChanged(event.recid, event.column, false, true);\n      }\n    }\n    ;\n\n    // whenever click event will fire in GL Line grid this function will execute\n    function glCellClicked(event) {\n      if (readOnlyGL) {\n        event.preventDefault();\n        return;\n      }\n      var colIndex = $glLineGrid.getColumn(\'AppliedAmt\', true);\n      //get the index of SelectRow Column checkbox from grid\n      var selectColIndex = $glLineGrid.getColumn(\'SelectRow\', true);\n      if (event.column == 0 || event.column == null) {\n        var getChanges = $glLineGrid.getChanges();\n        var element = $.grep(getChanges, function (ele, index) {\n          return parseInt(ele.recid) == parseInt(event.recid);\n        });\n        if (element == null || element[0] == undefined || element.length == 0 || element[0].SelectRow == undefined) {\n          //Set value to 0 when element is null\n          $glLineGrid.get(event.recid)["AppliedAmt"] = 0;\n          $glLineGrid.refreshCell(event.recid, "AppliedAmt");\n          getMaxDate();\n          //when unselect the record it will remove that record in getGLChanges list.\n          for (var x = 0; x < getGLChanges.length; x++) {\n            if (getGLChanges[x].recid == event.recid) {\n              getGLChanges.splice(x, 1);\n            }\n          }\n        } else {\n          if (element[0].SelectRow == true) {\n            // when we select a record, check conversion type is same or not.\n            // if not then not to select this record\n            if (VIS.Utility.Util.getValueOfInt(C_ConversionType_ID) == 0) {\n              C_ConversionType_ID = $glLineGrid.get(event.recid).C_ConversionType_ID;\n            } else if (C_ConversionType_ID != $glLineGrid.get(event.recid).C_ConversionType_ID) {\n              var $x = document.getElementsByName(event.target);\n              if ($x.length > 0) $x = $x[0];\n              var $z = $($x).find("#grid_openformatglgrid_rec_" + event.recid + "");\n              if ($z.length > 0) $z = $z[0];\n              if ($($z).find("input:checked").prop(\'checked\')) {\n                $($z).find("input:checked").prop(\'checked\', false);\n              }\n              $glLineGrid.get(event.recid).changes = false;\n              $glLineGrid.unselect(event.recid);\n              $glLineGrid.columns[colIndex].editable = false;\n              $glLineGrid.get(event.recid).changes.AppliedAmt = "0";\n              $glLineGrid.refreshCell(event.recid, "AppliedAmt");\n              VIS.ADialog.warn("VIS_ConversionNotMatched");\n            }\n            if ($vchkMultiCurrency.is(\':checked\')) {\n              if ($conversionDate.val() == "") {\n                VIS.ADialog.warn("VIS_SlctcnvrsnDate");\n                $glLineGrid.get(event.recid).changes = false;\n                $glLineGrid.unselect(event.recid);\n                $glLineGrid.columns[colIndex].editable = false;\n                $glLineGrid.get(event.recid).changes.AppliedAmt = "0";\n                $glLineGrid.refreshCell(event.recid, "AppliedAmt");\n                var chk = $(\'#grid_\' + $glLineGrid.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n                $(chk[event.index]).prop(\'checked\', false);\n                $glLineGrid.editChange.call($glLineGrid, chk[event.index], event.index, 0, event);\n                var eData = {\n                  "type": "click",\n                  "phase": "before",\n                  "target": "grid",\n                  "recid": event.recid,\n                  "index": event.index,\n                  "isStopped": false,\n                  "isCan//celled": false,\n                  "onComplete": null\n                };\n                $glLineGrid.trigger(eData);\n                return false;\n              }\n              var DATEACCT = $glLineGrid.get(event.recid).DATEACCT;\n              var ConversnDate = Globalize.format(new Date($conversionDate.val()), "yyyy-MM-dd");\n              DATEACCT = Globalize.format(new Date(DATEACCT), "yyyy-MM-dd");\n              if (ConversnDate != DATEACCT) {\n                VIS.ADialog.warn("VIS_SelectSameDate");\n                var colIndex = $glLineGrid.getColumn(\'DATEACCT\', true);\n                $glLineGrid.get(event.recid).changes = false;\n                $glLineGrid.unselect(event.recid);\n                $glLineGrid.columns[colIndex].editable = false;\n                $glLineGrid.get(event.recid).changes.AppliedAmt = "0";\n                $glLineGrid.refreshCell(event.recid, "AppliedAmt");\n                var chk = $(\'#grid_\' + $glLineGrid.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n                $(chk[event.index]).prop(\'checked\', false);\n                $glLineGrid.editChange.call($glLineGrid, chk[event.index], event.index, 0, event);\n                var eData = {\n                  "type": "click",\n                  "phase": "before",\n                  "target": "grid",\n                  "recid": event.recid,\n                  "index": event.index,\n                  "isStopped": false,\n                  "isCan//celled": false,\n                  "onComplete": null\n                };\n                $glLineGrid.trigger(eData);\n                return false;\n              }\n            }\n\n            //Restricting to Select both Credit and Debit Amount\'s in GL Journal gird\n            getGLChanges.push(element[0]);\n            if (getGLChanges.length == 1) {\n              prevAmt = $glLineGrid.get(event.recid).OpenAmount;\n            } else if (getGLChanges.length > 1) {\n              presAmt = $glLineGrid.get(event.recid).OpenAmount;\n              if (!(parseFloat(prevAmt) > 0 && parseFloat(presAmt) > 0) && !(parseFloat(prevAmt) < 0 && parseFloat(presAmt) < 0)) {\n                if (!$glSelectAll.is(\':checked\')) {\n                  VIS.ADialog.info("", true, VIS.translatedTexts.CreditOrDebit);\n                }\n                $glLineGrid.get(event.recid).changes = false;\n                $glLineGrid.unselect(event.recid);\n                $glLineGrid.columns[colIndex].editable = false;\n                $glLineGrid.get(event.recid).changes.AppliedAmt = "0";\n                $glLineGrid.refreshCell(event.recid, "AppliedAmt");\n                var chk = $(\'#grid_\' + $glLineGrid.name + \'_records td[col="0"]\').find(\'input[type="checkbox"]\');\n                $(chk[event.index]).prop(\'checked\', false);\n                $glLineGrid.editChange.call($glLineGrid, chk[event.index], event.index, 0, event);\n                var eData = {\n                  "type": "click",\n                  "phase": "before",\n                  "target": "grid",\n                  "recid": event.recid,\n                  "index": event.index,\n                  "isStopped": false,\n                  "isCan//celled": false,\n                  "onComplete": null\n                };\n                $glLineGrid.trigger(eData);\n                for (var x = 0; x < getGLChanges.length; x++) {\n                  if (getGLChanges[x].recid == event.recid) {\n                    getGLChanges.splice(x, 1);\n                  }\n                }\n                if (!$glSelectAll.is(\':checked\')) {\n                  return false;\n                }\n              }\n            }\n          } else {\n            $glLineGrid.unselect(event.recid);\n            $glLineGrid.columns[colIndex].editable = false;\n            $glLineGrid.get(event.recid).changes.AppliedAmt = "0";\n            $glLineGrid.refreshCell(event.recid, "AppliedAmt");\n          }\n        }\n        //check weather someone clicked on select column checkbox in grid\n        if ((selectColIndex == event.column || event.column == null) && element[0] != undefined && !(element[0].SelectRow == undefined)) {\n          $glLineGrid.get(event.recid)["AppliedAmt"] = VIS.Utility.Util.getValueOfDecimal($glLineGrid.get(event.recid).OpenAmount);\n        }\n        glTableChanged(event.recid, event.column);\n      }\n    }\n    ;\n    function paymentCellChanged(event) {\n      if (readOnlyPayment) {\n        event.preventDefault();\n        return;\n      }\n      var colIndex = $gridPayment.getColumn(\'AppliedAmt\', true);\n      var selectColIndex = $gridPayment.getColumn(\'SelectRow\', true);\n      var changedValue = 0;\n      if ($gridPayment.columns[colIndex].editable == undefined) {\n        return;\n      }\n\n      // when Applied amount cell changed \n      changedValue = event.value_new != "" ? event.value_new : changedValue;\n      if (event.column == colIndex) {\n        if (!dotFormatter) {\n          if (!changedValue.toString().contains("−") && !changedValue.toString().contains(",")) {\n            if (!isNaN(changedValue)) changedValue = format.GetFormatedValue(changedValue, "init", dotFormatter).toString();\n          } else if (changedValue.toString().contains("−")) {\n            changedValue = (-1 * format.GetConvertedNumber(changedValue, dotFormatter)).toString();\n          } else {\n            changedValue = format.GetConvertedNumber(changedValue, dotFormatter).toString();\n          }\n        } else {\n          if (changedValue.toString().contains("−")) {\n            changedValue = (-1 * format.GetConvertedNumber(changedValue, dotFormatter)).toString();\n          }\n        }\n        //validate changed Amount is valid number or not\n        if (isNaN(changedValue)) {\n          VIS.ADialog.warn("VIS_ValidAmount");\n          event.preventDefault();\n          return;\n        }\n      }\n      if ($gridPayment.getChanges(event.recid) != undefined && $gridPayment.getChanges(event.recid).length > 0 && $gridPayment.get(event.recid).changes) {\n        // if changes are there like  checkbox is cheked, then we have to set value in changes becoz textbox in grid show data from changes...\n        if (VIS.Utility.Util.getValueOfDecimal(changedValue) > 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) > VIS.Utility.Util.getValueOfDecimal($gridPayment.get(event.recid).OpenAmt)) {\n          VIS.ADialog.warn("AppliedAmtgrtr");\n          event.preventDefault();\n          return;\n        } else if (VIS.Utility.Util.getValueOfDecimal($gridPayment.get(event.recid).OpenAmt) < 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) < VIS.Utility.Util.getValueOfDecimal($gridPayment.get(event.recid).OpenAmt)) {\n          VIS.ADialog.warn("AppliedAmtgrtr");\n          event.preventDefault();\n          return;\n        }\n        //added for gl-allocation\n        else if (VIS.Utility.Util.getValueOfDecimal($gridPayment.get(event.recid).OpenAmt) > 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) < 0) {\n          $gridPayment.set(0, {\n            "AppliedAmt": VIS.Utility.Util.getValueOfDecimal($gridPayment.get(event.recid).OpenAmt)\n          });\n          VIS.ADialog.warn("AppliedAmtgrtr");\n          event.preventDefault();\n          return;\n        }\n        $gridPayment.get(event.recid).changes.AppliedAmt = event.value_new != "" ? event.value_new : changedValue;\n        $gridPayment.refreshCell(event.recid, "AppliedAmt");\n      } else {\n        if (event.column > 0) {\n          $gridPayment.set(event.recid, {\n            AppliedAmt: event.value_new != "" ? event.value_new : changedValue\n          });\n        }\n      }\n      if (event.column == selectColIndex || event.column == null) {\n        if ($vchkMultiCurrency.is(\':checked\')) {\n          if (VIS.Utility.Util.getValueOfDecimal($gridPayment.get(event.recid).OpenAmt) == 0) {\n            VIS.ADialog.warn("NotFoundCurrencyRate");\n            event.preventDefault();\n            return;\n          }\n          ////logic to not set greater appliedAmount then open amount\n          //else if (parseFloat($gridPayment.get(event.index).OpenAmt) > parseFloat($gridPayment.get(event.index).AppliedAmt)) {\n\n          //}\n          //else {\n          //    $gridPayment.set(0, { "AppliedAmt": $gridPayment.get(event.index).OpenAmt });\n          //}\n        }\n        //else {\n        //    //logic to not set greater appliedAmount then open amount\n        //    if (parseFloat($gridPayment.get(event.index).OpenAmt) > parseFloat($gridPayment.get(event.index).AppliedAmt)) {\n\n        //    }\n        //    else {\n        //        $gridPayment.set(0, { "AppliedAmt": $gridPayment.get(event.index).OpenAmt });\n        //    }\n        //}\n      }\n      //when AppliedAmt cell changed then only this function will call\n      if (colIndex == event.column) {\n        tableChanged(event.recid, event.column, false, false);\n      }\n    }\n    ;\n\n    //added for gl-allocation\n    function glCellChanged(event) {\n      if (readOnlyGL) {\n        event.preventDefault();\n        return;\n      }\n      var colIndex = $glLineGrid.getColumn(\'AppliedAmt\', true);\n      if ($glLineGrid.columns[colIndex].editable == undefined) {\n        return;\n      }\n      if ($glLineGrid.getChanges(event.recid) != undefined && $glLineGrid.getChanges(event.recid).length > 0 && $glLineGrid.get(event.recid).changes) {\n        // if changes are there like  checkbox is cheked, then we have to set value in changes becoz textbox in grid show data from changes...\n        if (VIS.Utility.Util.getValueOfDecimal(event.value_new) > 0 && VIS.Utility.Util.getValueOfDecimal(event.value_new) > VIS.Utility.Util.getValueOfDecimal($glLineGrid.get(event.recid).OpenAmount)) {\n          $glLineGrid.set(0, {\n            "AppliedAmt": VIS.Utility.Util.getValueOfDecimal($glLineGrid.get(event.recid).OpenAmount)\n          });\n          VIS.ADialog.warn("AppliedAmtgrtr");\n          event.preventDefault();\n          return;\n        } else if (VIS.Utility.Util.getValueOfDecimal($glLineGrid.get(event.recid).OpenAmount) < 0 && VIS.Utility.Util.getValueOfDecimal(event.value_new) < VIS.Utility.Util.getValueOfDecimal($glLineGrid.get(event.recid).OpenAmount)) {\n          $glLineGrid.set(0, {\n            "AppliedAmt": VIS.Utility.Util.getValueOfDecimal($glLineGrid.get(event.recid).OpenAmount)\n          });\n          VIS.ADialog.warn("AppliedAmtgrtr");\n          event.preventDefault();\n          return;\n        }\n        if (colIndex == event.column) $glLineGrid.get(event.recid).changes.AppliedAmt = event.value_new;\n        $glLineGrid.refreshCell(event.recid, "AppliedAmt");\n      } else {\n        if (event.column > 0) {\n          $glLineGrid.set(event.recid, {\n            AppliedAmt: event.value_new\n          });\n        }\n      }\n      if (event.column == colIndex) {\n        //logic to not set greater appliedAmount then open amount\n        if (parseFloat($glLineGrid.get(event.recid).OpenAmount) > parseFloat($glLineGrid.get(event.recid).AppliedAmt)) {} else {\n          $glLineGrid.set(0, {\n            "AppliedAmt": $glLineGrid.get(event.recid).OpenAmount\n          });\n        }\n        glTableChanged(event.recid, event.column);\n      }\n      //calculate();\n    }\n    ;\n    //end\n\n    function cashCellChanged(event) {\n      if (readOnlyCash) {\n        event.preventDefault();\n        return;\n      }\n      var colIndex = $gridCashline.getColumn(\'AppliedAmt\', true);\n      var selectColIndex = $gridCashline.getColumn(\'SelectRow\', true);\n      var changedValue = 0;\n      if ($gridCashline.columns[colIndex].editable == undefined) {\n        return;\n      }\n\n      // when Applied amount cell changed \n      changedValue = event.value_new != "" ? event.value_new : changedValue;\n      if (event.column == colIndex) {\n        if (!dotFormatter) {\n          if (!changedValue.toString().contains("−") && !changedValue.toString().contains(",")) {\n            if (!isNaN(changedValue)) changedValue = format.GetFormatedValue(changedValue, "init", dotFormatter).toString();\n          } else if (changedValue.toString().contains("−")) {\n            changedValue = (-1 * format.GetConvertedNumber(changedValue, dotFormatter)).toString();\n          } else {\n            changedValue = format.GetConvertedNumber(changedValue, dotFormatter).toString();\n          }\n        } else {\n          if (changedValue.toString().contains("−")) {\n            changedValue = (-1 * format.GetConvertedNumber(changedValue, dotFormatter)).toString();\n          }\n        }\n        //validate changed Amount is valid number or not\n        if (isNaN(changedValue)) {\n          VIS.ADialog.warn("VIS_ValidAmount");\n          event.preventDefault();\n          return;\n        }\n      }\n      if ($gridCashline.getChanges(event.recid) != undefined && $gridCashline.getChanges(event.recid).length > 0 && $gridCashline.get(event.recid).changes) {\n        // if changes are there like  checkbox is cheked, then we have to set value in changes becoz textbox in grid show data from changes...\n        if (VIS.Utility.Util.getValueOfDecimal(changedValue) > 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) > VIS.Utility.Util.getValueOfDecimal($gridCashline.get(event.recid).OpenAmt)) {\n          VIS.ADialog.warn("AppliedAmtgrtr");\n          //$gridCashline.get(event.recid).changes.AppliedAmt = $gridCashline.get(event.recid).OpenAmt;\n          event.preventDefault();\n          return;\n        } else if (VIS.Utility.Util.getValueOfDecimal($gridCashline.get(event.recid).OpenAmt) < 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) < VIS.Utility.Util.getValueOfDecimal($gridCashline.get(event.recid).OpenAmt)) {\n          VIS.ADialog.warn("AppliedAmtgrtr");\n          //$gridCashline.get(event.recid).changes.AppliedAmt = $gridCashline.get(event.recid).OpenAmt;\n          event.preventDefault();\n          return;\n        }\n        //added for gl-allocation\n        else if (VIS.Utility.Util.getValueOfDecimal($gridCashline.get(event.recid).OpenAmt) > 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) < 0) {\n          //$gridCashline.set(0, { "AppliedAmt": VIS.Utility.Util.getValueOfDecimal($gridCashline.get(event.recid).OpenAmt) });\n          VIS.ADialog.warn("AppliedAmtgrtr");\n          event.preventDefault();\n          return;\n        }\n        $gridCashline.get(event.recid).changes.AppliedAmt = event.value_new != "" ? event.value_new : changedValue;\n        $gridCashline.refreshCell(event.recid, "AppliedAmt");\n      } else {\n        if (event.column > 0) {\n          $gridCashline.set(event.recid, {\n            AppliedAmt: event.value_new != "" ? event.value_new : changedValue\n          });\n        }\n      }\n      if (event.column == selectColIndex || event.column == null) {\n        if ($vchkMultiCurrency.is(\':checked\')) {\n          if (VIS.Utility.Util.getValueOfDecimal($gridCashline.get(event.recid).OpenAmt) == 0) {\n            VIS.ADialog.warn("NotFoundCurrencyRate");\n            event.preventDefault();\n            return;\n          }\n        }\n      }\n      //when AppliedAmt cell changed then only this function will call\n      if (colIndex == event.column) {\n        tableChanged(event.recid, event.column, false, true);\n      }\n    }\n    ;\n    function invoiceCellChanged(event) {\n      var colIndex = $gridInvoice.getColumn(\'AppliedAmt\', true);\n      var wcolIndex = $gridInvoice.getColumn(\'Writeoff\', true);\n      var dcolIndex = $gridInvoice.getColumn(\'Discount\', true);\n      var selectColIndex = $gridInvoice.getColumn(\'SelectRow\', true);\n      var discountchng = 0;\n      var appliedAmt = 0;\n      var writeOff = 0;\n      var changedValue = 0;\n      if ($gridInvoice.columns[colIndex].editable == undefined && $gridInvoice.columns[wcolIndex].editable == undefined && $gridInvoice.columns[dcolIndex].editable == undefined) {\n        return;\n      }\n\n      // when Applied amount cell changed \n      changedValue = event.value_new != "" ? event.value_new : changedValue;\n      if (event.column == colIndex || event.column == wcolIndex || event.column == dcolIndex) {\n        if (!dotFormatter) {\n          if (!changedValue.toString().contains("−") && !changedValue.toString().contains(",")) {\n            if (!isNaN(changedValue)) changedValue = format.GetFormatedValue(changedValue, "init", dotFormatter).toString();\n          } else if (changedValue.toString().contains("−")) {\n            changedValue = (-1 * format.GetConvertedNumber(changedValue, dotFormatter)).toString();\n          } else {\n            changedValue = format.GetConvertedNumber(changedValue, dotFormatter).toString();\n          }\n        } else {\n          if (changedValue.toString().contains("−")) {\n            changedValue = (-1 * format.GetConvertedNumber(changedValue, dotFormatter)).toString();\n          }\n        }\n        //validate changed Amount is valid number or not\n        if (isNaN(changedValue)) {\n          VIS.ADialog.warn("VIS_ValidAmount");\n          event.preventDefault();\n          return;\n        }\n        //get the changes and converting amount into standard culture.\n        if ($gridInvoice.get(event.recid).changes.AppliedAmt != undefined && event.column != colIndex) {\n          appliedAmt = convertAppliedAmtculture($gridInvoice.get(event.recid).changes.AppliedAmt, dotFormatter);\n        } else {\n          appliedAmt = changedValue;\n        }\n        if ($gridInvoice.get(event.recid).changes.Discount != undefined && event.column != dcolIndex) {\n          discountchng = convertAppliedAmtculture($gridInvoice.get(event.recid).changes.Discount, dotFormatter);\n        } else {\n          discountchng = changedValue;\n        }\n        if ($gridInvoice.get(event.recid).changes.Writeoff != undefined && event.column != wcolIndex) {\n          writeOff = convertAppliedAmtculture($gridInvoice.get(event.recid).changes.Writeoff, dotFormatter);\n        } else {\n          writeOff = changedValue;\n        }\n      }\n      if ($gridInvoice.getChanges(event.recid) != undefined && $gridInvoice.getChanges(event.recid).length > 0 && $gridInvoice.get(event.recid).changes) {\n        // if changes are there like  checkbox is cheked, then we have to set value in changes becoz textbox in grid show data from changes...\n        if (VIS.Utility.Util.getValueOfDecimal(changedValue) > 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) > VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount)) {\n          VIS.ADialog.warn("AppliedAmtgrtr");\n          //$gridInvoice.get(event.recid).changes.AppliedAmt = (event.value_previous != undefined ? event.value_previous : $gridInvoice.get(event.recid).Amount);\n          //$gridInvoice.refreshCell(event.recid, "AppliedAmt");\n          event.preventDefault();\n          return;\n        } else if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) < 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) < VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount)) {\n          VIS.ADialog.warn("AppliedAmtgrtr");\n          //$gridInvoice.get(event.recid).changes.AppliedAmt = (event.value_previous != undefined ? event.value_previous : $gridInvoice.get(event.recid).Amount);\n          //$gridInvoice.refreshCell(event.recid, "AppliedAmt");\n          event.preventDefault();\n          return;\n        }\n        //Restrict the negative value when OpenAmt is positive Value\n        else if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) > 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) < 0) {\n          VIS.ADialog.warn("VIS_AppliedAmtleszero");\n          event.preventDefault();\n          return;\n        }\n        //if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).changes.Discount) > 0) {\n        //    discountchng = VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).changes.Discount);\n        //}\n        //else\n        //    discountchng = VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Discount);\n        // check if applied amt is greater than open amount added by vivek on 06/01/2018                \n        if (colIndex == event.column) {\n          // check if discount+writeoff + applied is gretaer than open amount added by vivek on 06/01/2018\n          if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) < 0 && VIS.Utility.Util.getValueOfDecimal((VIS.Utility.Util.getValueOfDecimal(changedValue) + VIS.Utility.Util.getValueOfDecimal(writeOff) + VIS.Utility.Util.getValueOfDecimal(discountchng)).toFixed(stdPrecision)) < VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            //$gridInvoice.get(event.recid).changes.AppliedAmt = (event.value_previous != undefined ? event.value_previous : $gridInvoice.get(event.recid).Amount);\n            //$gridInvoice.refreshCell(event.recid, "AppliedAmt");\n            event.preventDefault();\n            return;\n          } else if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) > 0 && VIS.Utility.Util.getValueOfDecimal((VIS.Utility.Util.getValueOfDecimal(changedValue) + VIS.Utility.Util.getValueOfDecimal(writeOff) + VIS.Utility.Util.getValueOfDecimal(discountchng)).toFixed(stdPrecision)) > VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            //$gridInvoice.get(event.recid).changes.AppliedAmt = (event.value_previous != undefined ? event.value_previous : $gridInvoice.get(event.recid).Amount);\n            //$gridInvoice.refreshCell(event.recid, "AppliedAmt");\n            event.preventDefault();\n            return;\n          }\n          //when the AppliedAmt will not be allow -Ve Value when OpenAmt have +Ve Value\n          else if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) > 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) < 0) {\n            VIS.ADialog.warn("VIS_AppliedAmtleszero");\n            event.preventDefault();\n            return;\n          }\n          $gridInvoice.get(event.recid).changes.AppliedAmt = event.value_new != "" ? event.value_new : changedValue;\n          $gridInvoice.refreshCell(event.recid, "AppliedAmt");\n        } else if (wcolIndex == event.column) {\n          if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) < 0 && VIS.Utility.Util.getValueOfDecimal((VIS.Utility.Util.getValueOfDecimal(changedValue) + VIS.Utility.Util.getValueOfDecimal(appliedAmt) + VIS.Utility.Util.getValueOfDecimal(discountchng)).toFixed(stdPrecision)) < VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            event.preventDefault();\n            return;\n          } else if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) > 0 && VIS.Utility.Util.getValueOfDecimal((VIS.Utility.Util.getValueOfDecimal(changedValue) + VIS.Utility.Util.getValueOfDecimal(appliedAmt) + VIS.Utility.Util.getValueOfDecimal(discountchng)).toFixed(stdPrecision)) > VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            event.preventDefault();\n            return;\n          }\n          // WriteOffAmt will not be allow -Ve Value when OpenAmt have +Ve Value\n          else if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) > 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) < 0) {\n            VIS.ADialog.warn("VIS_AppliedAmtleszero");\n            event.preventDefault();\n            return;\n          }\n          $gridInvoice.get(event.recid).changes.Writeoff = event.value_new != "" ? event.value_new : changedValue;\n          $gridInvoice.refreshCell(event.recid, "Writeoff");\n        } else if (dcolIndex == event.column) {\n          if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) < 0 && VIS.Utility.Util.getValueOfDecimal((VIS.Utility.Util.getValueOfDecimal(changedValue) + VIS.Utility.Util.getValueOfDecimal(appliedAmt) + VIS.Utility.Util.getValueOfDecimal(writeOff)).toFixed(stdPrecision)) < VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            event.preventDefault();\n            return;\n          } else if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) > 0 && VIS.Utility.Util.getValueOfDecimal((VIS.Utility.Util.getValueOfDecimal(changedValue) + VIS.Utility.Util.getValueOfDecimal(appliedAmt) + VIS.Utility.Util.getValueOfDecimal(writeOff)).toFixed(stdPrecision)) > VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount)) {\n            VIS.ADialog.warn("AppliedAmtgrtr");\n            event.preventDefault();\n            return;\n          }\n          //DiscountAmt will not be allow -Ve Value when OpenAmt have +Ve Value\n          else if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) > 0 && VIS.Utility.Util.getValueOfDecimal(changedValue) < 0) {\n            VIS.ADialog.warn("VIS_AppliedAmtleszero");\n            event.preventDefault();\n            return;\n          }\n          $gridInvoice.get(event.recid).changes.Discount = event.value_new != "" ? event.value_new : changedValue;\n          $gridInvoice.refreshCell(event.recid, "Discount");\n        }\n      } else {\n        if (event.column > 0) {\n          if (colIndex == event.column) {\n            $gridInvoice.set(event.recid, {\n              AppliedAmt: event.value_new != "" ? event.value_new : changedValue\n            });\n          } else if (wcolIndex == event.column) {\n            $gridInvoice.set(event.recid, {\n              Writeoff: event.value_new != "" ? event.value_new : changedValue\n            });\n          } else if (dcolIndex == event.column) {\n            $gridInvoice.set(event.recid, {\n              Discount: event.value_new != "" ? event.value_new : changedValue\n            });\n          }\n        }\n      }\n\n      //if we click on select column checkbox in grid\n      if (selectColIndex == event.column || event.column == null) {\n        if ($vchkMultiCurrency.is(\':checked\')) {\n          if (VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount) == 0) {\n            VIS.ADialog.warn("NotFoundCurrencyRate");\n            event.preventDefault();\n            return;\n          } else {\n            $gridInvoice.get(event.recid)["AppliedAmt"] = VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount);\n          }\n        } else {\n          $gridInvoice.get(event.recid)["AppliedAmt"] = VIS.Utility.Util.getValueOfDecimal($gridInvoice.get(event.recid).Amount);\n        }\n      }\n      if (event.column == $gridInvoice.getColumn(\'Discount\', true) || event.column == $gridInvoice.getColumn(\'Writeoff\', true) || event.column == $gridInvoice.getColumn(\'AppliedAmt\', true)) {\n        tableChanged(event.recid, event.column, true, false);\n      }\n    }\n    ;\n    function tableChanged(rowIndex, colIndex, isInvoice, cash) {\n      var row = rowIndex;\n      var col = colIndex;\n      if (col == null || col == undefined) {\n        col = 0;\n      }\n      var AllocationDate = null;\n      //  Payments\n      if (!isInvoice && !cash) {\n        //TableModel payment = vdgvInvoice.getModel();\n        if (col == 0) {\n          var columns = $gridPayment.columns;\n          colPayCheck = getBoolValue($gridPayment.getChanges(), row);\n\n          //AppliedAmt---//get column index from grid\n          _payment = getIndexFromArray(columns, "AppliedAmt");\n          var payemntCol = columns[_payment].field;\n          //  selected - set payment amount\n          var changes = $gridPayment.get(row).changes;\n          if (colPayCheck) {\n            // prepared same array for grid when we select any payment from payment grid and push that object into selected payment array.\n            var record = $gridPayment.get(row);\n            var rcdRow = {\n              SelectRow: record.SelectRow,\n              //InvoiceRecord: changes.InvoiceRecord,\n              Date1: record.Date1,\n              Documentno: record.Documentno,\n              CpaymentID: record.CpaymentID,\n              Isocode: record.Isocode,\n              //Currency: record.Currency,\n              ConvertedAmount: record.ConvertedAmount,\n              OpenAmt: record.OpenAmt,\n              Payment: record.Payment,\n              Multiplierap: record.Multiplierap,\n              DocBaseType: record.DocBaseType,\n              //Writeoff: record.Writeoff,\n              AppliedAmt: record.AppliedAmt,\n              //C_InvoicePaySchedule_ID: record.C_InvoicePaySchedule_ID,\n              //InvoiceScheduleDate: record.InvoiceScheduleDate,\n              C_ConversionType_ID: record.C_ConversionType_ID,\n              ConversionName: record.ConversionName,\n              DATEACCT: record.DATEACCT,\n              AD_Org_ID: record.AD_Org_ID,\n              OrgName: record.OrgName,\n              PayName: record.PayName\n            };\n            selectedPayments.push(rcdRow);\n\n            //OpenAmt--//get column index from grid\n            _openPay = getIndexFromArray(columns, "OpenAmt");\n            var amount = parseFloat($gridPayment.get(row)[columns[_openPay].field]);\n            _value = removeAllButLast1(parseFloat(amount).toLocaleString(navigator.language, {\n              minimumFractionDigits: stdPrecision,\n              maximumFractionDigits: stdPrecision\n            }), dotFormatter ? "," : ".");\n            //Date1--//get column index from grid\n            var _date1 = getIndexFromArray(columns, "Date1");\n            AllocationDate = new Date($gridPayment.get(row)[columns[_date1].field]);\n            if (payemntCol == "AppliedAmt") {\n              if (changes != null && changes != undefined) {\n                changes.AppliedAmt = _value;\n                $gridPayment.refreshCell(row, "AppliedAmt");\n              } else {\n                $gridPayment.set(row, {\n                  "AppliedAmt": _value\n                });\n              }\n            }\n          } else\n            //  de-selected\n            {\n              //if (payemntCol == "AppliedAmt") {\n              //    if (changes != null && changes != undefined) {\n              //        changes.AppliedAmt = 0;\n              //        $gridPayment.refreshCell(row, "AppliedAmt");\n              //    }\n              //    else {\n              //        $gridPayment.set(row, { "AppliedAmt": 0 });\n              //    }\n              //}\n              for (var x = 0; x < selectedPayments.length; x++) {\n                if (selectedPayments[x].CpaymentID == $gridPayment.get(row).CpaymentID) {\n                  selectedPayments.splice(x, 1);\n                }\n              }\n              if (payemntCol == "AppliedAmt") {\n                if (changes != null && changes != undefined) {\n                  changes.AppliedAmt = amount;\n                  $gridPayment.get(row)["AppliedAmt"] = 0;\n                  $gridPayment.refreshCell(row, "AppliedAmt");\n                } else {\n                  $gridPayment.set(row, {\n                    "AppliedAmt": 0\n                  });\n                }\n              }\n              var isAllUncheckedInvoice = false;\n              for (var i = 0; i < $gridInvoice.getChanges().length; i++) {\n                if (!($gridInvoice.getChanges()[i].SelectRow == undefined || $gridInvoice.getChanges()[i].SelectRow == false)) isAllUncheckedInvoice = true;\n              }\n              var isAllUncheckedCash = false;\n              for (var i = 0; i < $gridCashline.getChanges().length; i++) {\n                if (!($gridCashline.getChanges()[i].SelectRow == undefined || $gridCashline.getChanges()[i].SelectRow == false)) isAllUncheckedCash = true;\n              }\n              var isAllUncheckedPayment = false;\n              for (var i = 0; i < $gridPayment.getChanges().length; i++) {\n                if (!($gridPayment.getChanges()[i].SelectRow == undefined || $gridPayment.getChanges()[i].SelectRow == false)) isAllUncheckedPayment = true;\n              }\n              //added for GL grid to validate ConversionType\n              var isAllUncheckedGL = false;\n              for (var i = 0; i < $glLineGrid.getChanges().length; i++) {\n                if (!($glLineGrid.getChanges()[i].SelectRow == undefined || $glLineGrid.getChanges()[i].SelectRow == false)) isAllUncheckedGL = true;\n              }\n              if (!isAllUncheckedGL && !isAllUncheckedInvoice && !isAllUncheckedCash && !isAllUncheckedPayment) C_ConversionType_ID = 0;\n              $gridPayment.columns[_payment].editable = false;\n            }\n        }\n      }\n      //Cash Lines\n      else if (cash) {\n        if (col == 0) {\n          var columns = $gridCashline.columns;\n          colCashCheck = getBoolValue($gridCashline.getChanges(), row);\n\n          //AppliedAmt--- //get column index from grid\n          _paymentCash = getIndexFromArray(columns, "AppliedAmt");\n          var payemntCol = columns[_paymentCash].field;\n          //  selected - set payment amount\n          var changes = $gridCashline.get(row).changes;\n          //  selected - set payment amount\n          if (colCashCheck) {\n            // prepared same array for grid when we select any cash line from cash line grid and push that object into selected cash line array.\n            var record = $gridCashline.get(row);\n            //debugger;\n            var rcdRow = {\n              SelectRow: record.SelectRow,\n              //InvoiceRecord: changes.InvoiceRecord,\n              Date1: record.Date1,\n              ReceiptNo: record.ReceiptNo,\n              VSS_paymenttype: record.VSS_paymenttype,\n              Isocode: record.Isocode,\n              CcashlineiID: record.CcashlineiID,\n              Amount: record.Amount,\n              OpenAmt: record.OpenAmt,\n              Payment: record.Payment,\n              Multiplierap: record.Multiplierap,\n              DocBaseType: record.DocBaseType,\n              ConvertedAmount: record.ConvertedAmount,\n              AppliedAmt: record.AppliedAmt,\n              //C_InvoicePaySchedule_ID: record.C_InvoicePaySchedule_ID,\n              //InvoiceScheduleDate: record.InvoiceScheduleDate,\n              C_ConversionType_ID: record.C_ConversionType_ID,\n              ConversionName: record.ConversionName,\n              DATEACCT: record.DATEACCT,\n              AD_Org_ID: record.AD_Org_ID,\n              OrgName: record.OrgName\n            };\n            selectedCashlines.push(rcdRow);\n            //OpenAmt--//get column index from grid\n            _open = getIndexFromArray(columns, "OpenAmt");\n            var amount = parseFloat($gridCashline.get(row)[columns[_open].field]);\n            //remove the thousand separator from the value\n            _value = removeAllButLast1(parseFloat(amount).toLocaleString(navigator.language, {\n              minimumFractionDigits: stdPrecision,\n              maximumFractionDigits: stdPrecision\n            }), dotFormatter ? "," : ".");\n            if (payemntCol == "AppliedAmt") {\n              if (changes != null && changes != undefined) {\n                changes.AppliedAmt = _value;\n                $gridCashline.refreshCell(row, "AppliedAmt");\n              } else {\n                $gridCashline.set(row, {\n                  "AppliedAmt": _value\n                });\n              }\n            }\n            //************************************** Changed\n          } else\n            //  de-selected\n            {\n              //************************************** Changed\n              //if (payemntCol == "AppliedAmt") {\n              //    if (changes != null && changes != undefined) {\n              //        changes.AppliedAmt = 0;\n              //        $gridCashline.refreshCell(row, "AppliedAmt");\n              //    }\n              //    else {\n              //        $gridCashline.set(row, { "AppliedAmt": 0 });\n              //    }\n              //}\n              for (var x = 0; x < selectedCashlines.length; x++) {\n                if (selectedCashlines[x].CcashlineiID == $gridCashline.get(row).CcashlineiID) {\n                  selectedCashlines.splice(x, 1);\n                }\n              }\n              if (payemntCol == "AppliedAmt") {\n                if (changes != null && changes != undefined) {\n                  changes.AppliedAmt = amount;\n                  $gridCashline.get(row)["AppliedAmt"] = 0;\n                  $gridCashline.refreshCell(row, "AppliedAmt");\n                } else {\n                  $gridCashline.set(row, {\n                    "AppliedAmt": 0\n                  });\n                }\n              }\n              var isAllUncheckedInvoice = false;\n              for (var i = 0; i < $gridInvoice.getChanges().length; i++) {\n                if (!($gridInvoice.getChanges()[i].SelectRow == undefined || $gridInvoice.getChanges()[i].SelectRow == false)) isAllUncheckedInvoice = true;\n              }\n              var isAllUncheckedCash = false;\n              for (var i = 0; i < $gridCashline.getChanges().length; i++) {\n                if (!($gridCashline.getChanges()[i].SelectRow == undefined || $gridCashline.getChanges()[i].SelectRow == false)) isAllUncheckedCash = true;\n              }\n              var isAllUncheckedPayment = false;\n              for (var i = 0; i < $gridPayment.getChanges().length; i++) {\n                if (!($gridPayment.getChanges()[i].SelectRow == undefined || $gridPayment.getChanges()[i].SelectRow == false)) isAllUncheckedPayment = true;\n              }\n\n              //added for GL grid to validate ConversionType\n              var isAllUncheckedGL = false;\n              for (var i = 0; i < $glLineGrid.getChanges().length; i++) {\n                if (!($glLineGrid.getChanges()[i].SelectRow == undefined || $glLineGrid.getChanges()[i].SelectRow == false)) isAllUncheckedGL = true;\n              }\n              if (!isAllUncheckedGL && !isAllUncheckedInvoice && !isAllUncheckedCash && !isAllUncheckedPayment) C_ConversionType_ID = 0;\n              $gridCashline.columns[_paymentCash].editable = false;\n            }\n        }\n      }\n      //  Invoice Selection\n      else if (col == 0) {\n        var columns = $gridInvoice.columns;\n        colInvCheck = getBoolValue($gridInvoice.getChanges(), row);\n        //  selected - set payment amount\n        var changes = $gridInvoice.get(row).changes;\n        //Writeoff--//get column index from grid\n        _writeOff = getIndexFromArray(columns, "Writeoff");\n        var writeOff = columns[_writeOff].field;\n        //AppliedAmt-- //get column index from grid\n        _applied = getIndexFromArray(columns, "AppliedAmt");\n        var applied = columns[_applied].field;\n        //  selected - set applied amount\n        if (colInvCheck) {\n          // prepared same array for grid when we select any invoice from invoice grid and push that object into selected invoice array.\n\n          var record = $gridInvoice.get(row);\n          var rcdRow = {\n            SelectRow: record.SelectRow,\n            InvoiceRecord: record.InvoiceRecord,\n            Date1: record.Date1,\n            Documentno: record.Documentno,\n            CinvoiceID: record.CinvoiceID,\n            Isocode: record.Isocode,\n            Currency: record.Currency,\n            Converted: record.Converted,\n            Amount: record.Amount,\n            Discount: record.Discount,\n            Multiplierap: record.Multiplierap,\n            DocBaseType: record.DocBaseType,\n            Writeoff: record.Writeoff,\n            AppliedAmt: record.AppliedAmt,\n            C_InvoicePaySchedule_ID: record.C_InvoicePaySchedule_ID,\n            InvoiceScheduleDate: record.InvoiceScheduleDate,\n            C_ConversionType_ID: record.C_ConversionType_ID,\n            ConversionName: record.ConversionName,\n            DATEACCT: record.DATEACCT,\n            AD_Org_ID: record.AD_Org_ID,\n            OrgName: record.OrgName,\n            PayName: record.PayName\n          };\n          selectedInvoices.push(rcdRow);\n\n          //Amount-- //get column index from grid\n          _openInv = getIndexFromArray(columns, "Amount");\n          var amount = parseFloat($gridInvoice.get(row)[columns[_openInv].field]);\n          //Discount  //get column index from grid\n          _discount = getIndexFromArray(columns, "Discount");\n          amount = amount - parseFloat($gridInvoice.get(row)[columns[_discount].field]);\n          //remove the thousand separator form the value\n          _value = removeAllButLast1(parseFloat(amount).toLocaleString(navigator.language, {\n            minimumFractionDigits: stdPrecision,\n            maximumFractionDigits: stdPrecision\n          }), dotFormatter ? "," : ".");\n          if (applied == "AppliedAmt") {\n            if (changes != null && changes != undefined) {\n              changes.Writeoff = 0;\n              changes.AppliedAmt = _value;\n              //get column index from grid\n              _discount = getIndexFromArray(columns, "Discount");\n              changes.Discount = removeAllButLast1(parseFloat($gridInvoice.get(row)[columns[_discount].field]).toLocaleString(navigator.language, {\n                minimumFractionDigits: stdPrecision,\n                maximumFractionDigits: stdPrecision\n              }), dotFormatter ? "," : ".");\n              $gridInvoice.refreshCell(row, "Writeoff");\n              $gridInvoice.refreshCell(row, "AppliedAmt");\n              $gridInvoice.refreshCell(row, "Discount");\n            } else {\n              $gridInvoice.set(row, {\n                "Writeoff": 0\n              });\n              $gridInvoice.set(row, {\n                "AppliedAmt": _value\n              });\n            }\n          }\n          //************************************** Changed\n        } else\n          //  de-selected\n          {\n            // remove invoice schedule from array when we de-select any schedule from invoice grid.\n            for (var x = 0; x < selectedInvoices.length; x++) {\n              if (selectedInvoices[x].C_InvoicePaySchedule_ID == $gridInvoice.get(row).C_InvoicePaySchedule_ID) {\n                selectedInvoices.splice(x, 1);\n              }\n            }\n            if (applied == "AppliedAmt") {\n              if (changes != null && changes != undefined) {\n                changes.Writeoff = amount;\n                changes.AppliedAmt = amount;\n                changes.Discount = amount; //Discount---//get column index from grid\n                _discount = getIndexFromArray(columns, "Discount");\n                //changes.Discount = parseFloat($gridInvoice.get(row)[columns[_discount].field]);\n                $gridInvoice.get(row)["AppliedAmt"] = 0;\n                $gridInvoice.refreshCell(row, "Writeoff");\n                $gridInvoice.refreshCell(row, "AppliedAmt");\n                $gridInvoice.refreshCell(row, "Discount");\n              } else {\n                //$gridInvoice.set(row, { "Writeoff": 0 });\n                //$gridInvoice.set(row, { "AppliedAmt": amount });\n              }\n            }\n            var isAllUncheckedInvoice = false;\n            for (var i = 0; i < $gridInvoice.getChanges().length; i++) {\n              if (!($gridInvoice.getChanges()[i].SelectRow == undefined || $gridInvoice.getChanges()[i].SelectRow == false)) isAllUncheckedInvoice = true;\n            }\n            var isAllUncheckedCash = false;\n            for (var i = 0; i < $gridCashline.getChanges().length; i++) {\n              if (!($gridCashline.getChanges()[i].SelectRow == undefined || $gridCashline.getChanges()[i].SelectRow == false)) isAllUncheckedCash = true;\n            }\n            var isAllUncheckedPayment = false;\n            for (var i = 0; i < $gridPayment.getChanges().length; i++) {\n              if (!($gridPayment.getChanges()[i].SelectRow == undefined || $gridPayment.getChanges()[i].SelectRow == false)) isAllUncheckedPayment = true;\n            }\n\n            //added for GL grid to validate ConversionType\n            var isAllUncheckedGL = false;\n            for (var i = 0; i < $glLineGrid.getChanges().length; i++) {\n              if (!($glLineGrid.getChanges()[i].SelectRow == undefined || $glLineGrid.getChanges()[i].SelectRow == false)) isAllUncheckedGL = true;\n            }\n            if (!isAllUncheckedGL && !isAllUncheckedInvoice && !isAllUncheckedCash && !isAllUncheckedPayment) C_ConversionType_ID = 0;\n            $gridInvoice.columns[_applied].editable = false;\n          }\n      }\n\n      //  Invoice - Try to balance entry\n      //if ($vchkAutoWriteOff.is(\':checked\')) {\n      //    autoWriteOff();\n      //}\n      calculate();\n    }\n    ;\n\n    //to get index of column from array\n    function getIndexFromArray(columns, name) {\n      var index = 0;\n      for (var i = 0; i < columns.length; i++) {\n        if (columns[i].field == name) {\n          index = i;\n          break;\n        }\n      }\n      return index;\n    }\n    ;\n\n    //added for gl-allocation\n    function glTableChanged(rowIndex, colIndex) {\n      var row = rowIndex;\n      var col = colIndex;\n      if (col == null || col == undefined) {\n        col = 0;\n      }\n      var AllocationDate = null;\n      //  GL Allocation\n      if (col == 0) {\n        var columns = $glLineGrid.columns;\n        colGlCheck = getBoolValue($glLineGrid.getChanges(), row);\n        var payemntCol = columns[10].field;\n        //  selected - set payment amount\n        var changes;\n        if (!$glLineGrid.get(row)) {} else changes = $glLineGrid.get(row).changes;\n        if (colGlCheck) {\n          var record = null;\n          // prepared same array for grid when we select any payment from payment grid and push that object into selected payment array.\n          for (var j = 0; $glLineGrid.records.length; j++) {\n            if ($glLineGrid.records[j].recid == parseInt(row)) {\n              record = $glLineGrid.records[j];\n              break;\n            }\n          }\n          //var record = glLineGrid.get(row);\n          var rcdRow = {\n            SelectRow: record.SelectRow,\n            GLRecords: changes.GLRecords,\n            Date1: record.Date1,\n            DOCUMENTNO: record.DOCUMENTNO,\n            //added account column\n            Account: record.Account,\n            DATEDOC: record.DATEDOC,\n            Isocode: record.Isocode,\n            GL_JOURNALLINE_ID: record.GL_JOURNALLINE_ID,\n            GL_Journal_ID: record.GL_Journal_ID,\n            OpenAmount: record.OpenAmount,\n            //Payment: record.Payment,\n            //Multiplierap: record.Multiplierap,\n            //DocBaseType: record.DocBaseType,\n            ConvertedAmount: record.ConvertedAmount,\n            AppliedAmt: record.AppliedAmt,\n            //C_InvoicePaySchedule_ID: record.C_InvoicePaySchedule_ID,\n            //InvoiceScheduleDate: record.InvoiceScheduleDate,\n            C_ConversionType_ID: record.C_ConversionType_ID,\n            ConversionName: record.ConversionName,\n            DATEACCT: record.DATEACCT,\n            AD_Org_ID: record.AD_Org_ID,\n            OrgName: record.OrgName\n          };\n          SelectedGL.push(rcdRow);\n          var amount = parseFloat($glLineGrid.get(row)[columns[9].field]);\n          AllocationDate = new Date($glLineGrid.get(row)[columns[11].field]);\n          if (payemntCol == "AppliedAmt") {\n            if (changes != null && changes != undefined) {\n              changes.AppliedAmt = amount;\n              $glLineGrid.set(row, {\n                "AppliedAmt": amount\n              });\n              $glLineGrid.refreshCell(row, "AppliedAmt");\n            }\n            //else {\n            //    //amount = 0;\n            //    glLineGrid.set(row, { "AppliedAmt": amount });\n            //}\n          }\n        } else\n          //  de-selected\n          {\n            //de-select from SelectedGL list.\n            for (var x = 0; x < SelectedGL.length; x++) {\n              if (SelectedGL[x].GL_JOURNALLINE_ID == $glLineGrid.get(row).GL_JOURNALLINE_ID) {\n                SelectedGL.splice(x, 1);\n              }\n            }\n            if (payemntCol == "AppliedAmt") {\n              if (changes != null && changes != undefined) {\n                changes.AppliedAmt = amount;\n                $glLineGrid.get(row)["AppliedAmt"] = 0;\n                $glLineGrid.refreshCell(row, "AppliedAmt");\n              }\n            }\n            //added for Cash Journal, Payment and Invoice grid(s) changes to validate ConversionType\n            var isAllUncheckedInvoice = false;\n            for (var i = 0; i < $gridInvoice.getChanges().length; i++) {\n              if (!($gridInvoice.getChanges()[i].SelectRow == undefined || $gridInvoice.getChanges()[i].SelectRow == false)) isAllUncheckedInvoice = true;\n            }\n            var isAllUncheckedCash = false;\n            for (var i = 0; i < $gridCashline.getChanges().length; i++) {\n              if (!($gridCashline.getChanges()[i].SelectRow == undefined || $gridCashline.getChanges()[i].SelectRow == false)) isAllUncheckedCash = true;\n            }\n            var isAllUncheckedPayment = false;\n            for (var i = 0; i < $gridPayment.getChanges().length; i++) {\n              if (!($gridPayment.getChanges()[i].SelectRow == undefined || $gridPayment.getChanges()[i].SelectRow == false)) isAllUncheckedPayment = true;\n            }\n            var isAllUncheckedGL = false;\n            for (var i = 0; i < $glLineGrid.getChanges().length; i++) {\n              if (!($glLineGrid.getChanges()[i].SelectRow == undefined || $glLineGrid.getChanges()[i].SelectRow == false)) isAllUncheckedGL = true;\n            }\n            if (!isAllUncheckedGL && !isAllUncheckedInvoice && !isAllUncheckedCash && !isAllUncheckedPayment) {\n              C_ConversionType_ID = 0;\n            }\n          }\n      }\n      calculate();\n    }\n    ;\n    //end\n\n    function getBoolValue(changes, row) {\n      if (changes == null || changes.length == 0) {\n        return false;\n      }\n      var element = $.grep(changes, function (ele, index) {\n        return parseInt(ele.recid) == row;\n      });\n      if (element == null || element[0] == undefined || element.length == 0 || element[0].SelectRow == undefined) {\n        return false;\n      } else {\n        return element[0].SelectRow;\n        // removed by dead control flow\n\n      }\n    }\n    ;\n\n    //function autoWriteOff() {\n\n    //    invoiceTotal = 0;\n    //    paymentTotal = 0;\n    //    // if cash record is selected means our cash grid is not readonly\n    //    //if ($vchkAllocation.is(\':checked\')) {\n    //    if (!readOnlyCash) {\n    //        var cashChanges = $gridCashline.getChanges();\n    //        for (var i = 0; i < cashChanges.length; i++) {\n    //            if (cashChanges[i].SelectRow == true) {\n    //                paymentTotal += parseFloat(cashChanges[i].AppliedAmt);\n    //            }\n    //        }\n    //    }\n    //    else {\n    //        var paymentChanges = $gridPayment.getChanges();\n    //        for (var i = 0; i < paymentChanges.length; i++) {\n    //            if (paymentChanges[i].SelectRow == true) {\n    //                paymentTotal += parseFloat(paymentChanges[i].AppliedAmt);\n    //            }\n    //        }\n    //    }\n    //    var invoiceChanges = $gridInvoice.getChanges();\n    //    var lastRow = null;\n    //    var columns = $gridInvoice.columns;\n    //    for (var i = invoiceChanges.length - 1; i >= 0; i--) {\n    //        if (invoiceChanges[i].SelectRow == true) {\n    //            invoiceTotal += parseFloat(invoiceChanges[i].AppliedAmt);\n    //            if (lastRow == null) {\n    //                lastRow = $gridInvoice.get(invoiceChanges[i].recid);\n    //                //Amount\n    //                if (lastRow[columns[_openInv].field] <= 0) {\n    //                    lastRow = null;\n    //                }\n    //            }\n\n    //        }\n    //    }\n\n    //    if (invoiceTotal > paymentTotal) {\n    //        var difference = invoiceTotal - paymentTotal;\n    //        if ((invoiceTotal * .05) >= difference) {\n    //            if (lastRow != null) {\n    //                lastRow.changes.Writeoff = difference;\n    //                lastRow.changes.AppliedAmt = lastRow.changes.AppliedAmt - difference;\n    //                $gridInvoice.refreshCell(lastRow.recid, "Writeoff");\n    //                $gridInvoice.refreshCell(lastRow.recid, "AppliedAmt");\n    //            }\n    //        }\n    //    }\n    //};\n\n    function bpValueChanged() {\n      vetoableChange($vSearchBPartner.getName(), $vSearchBPartner.value);\n      //added for gl-allocation\n      //////loadGLDataGrid($vSearchBPartner.event);\n    }\n    ;\n\n    // Conversion Type Change Event\n    function conversionTypeChanged() {\n      vetoableChange($vConversionType.getName(), $vConversionType.getValue());\n    }\n    ;\n    function getMaxDate() {\n      _allDates = [];\n      _dateAcct = [];\n      for (var i = 0; i < $gridPayment.getChanges().length; i++) {\n        if ($gridPayment.getChanges()[i].SelectRow === undefined) {} else {\n          if ($gridPayment.getChanges()[i].SelectRow == true) {\n            var row = $gridPayment.get($gridPayment.getChanges()[i].recid).DATEACCT;\n            _allDates.push(new Date(row));\n            var DATEACCT = $gridPayment.get($gridPayment.getChanges()[i].recid).DATEACCT;\n            _dateAcct.push(new Date(DATEACCT));\n            $dateAcct.val(Globalize.format(new Date(Math.max.apply(null, _dateAcct)), "yyyy-MM-dd"));\n            //_dateAcct = [];\n          }\n        }\n      }\n      for (var i = 0; i < $gridInvoice.getChanges().length; i++) {\n        if ($gridInvoice.getChanges()[i].SelectRow === undefined) {} else {\n          if ($gridInvoice.getChanges()[i].SelectRow == true) {\n            var row = $gridInvoice.get($gridInvoice.getChanges()[i].recid).Date1; //changed schedule date to invoice date suggested by Mukesh sir, ravi and amit.\n            _allDates.push(new Date(row));\n            if ($gridPayment.getChanges().length == 0 && $gridCashline.getChanges().length == 0 && $glLineGrid.getChanges().length == 0) {\n              var DATEACCT = $gridInvoice.get($gridInvoice.getChanges()[i].recid).DATEACCT;\n              _dateAcct.push(new Date(DATEACCT));\n              $dateAcct.val(Globalize.format(new Date(Math.max.apply(null, _dateAcct)), "yyyy-MM-dd"));\n            }\n          }\n        }\n      }\n      for (var i = 0; i < $gridCashline.getChanges().length; i++) {\n        if ($gridCashline.getChanges()[i].SelectRow === undefined) {} else {\n          if ($gridCashline.getChanges()[i].SelectRow == true) {\n            var row = $gridCashline.get($gridCashline.getChanges()[i].recid).DATEACCT;\n            _allDates.push(new Date(row));\n            if ($gridPayment.getChanges().length == 0 && $gridInvoice.getChanges().length == 0 && $glLineGrid.getChanges().length == 0) {\n              var DATEACCT = $gridCashline.get($gridCashline.getChanges()[i].recid).DATEACCT;\n              _dateAcct.push(new Date(DATEACCT));\n              $dateAcct.val(Globalize.format(new Date(Math.max.apply(null, _dateAcct)), "yyyy-MM-dd"));\n            }\n          }\n        }\n      }\n      for (var i = 0; i < $glLineGrid.getChanges().length; i++) {\n        if ($glLineGrid.getChanges()[i].SelectRow === undefined) {} else {\n          if ($glLineGrid.getChanges()[i].SelectRow == true) {\n            var row = null;\n            for (var j = 0; $glLineGrid.records.length; j++) {\n              if ($glLineGrid.records[j].recid == $glLineGrid.getChanges()[i].recid) {\n                row = $glLineGrid.records[j].DATEACCT;\n                break;\n              }\n            }\n            //var row = $glLineGrid.records[glLineGrid.getChanges()[i].recid].DATEACCT;\n            _allDates.push(new Date(row));\n            if ($gridPayment.getChanges().length == 0 && $gridCashline.getChanges().length == 0 && $gridInvoice.getChanges().length == 0) {\n              var DATEACCT = null;\n              for (var j = 0; $glLineGrid.records.length; j++) {\n                if ($glLineGrid.records[j].recid == $glLineGrid.getChanges()[i].recid) {\n                  DATEACCT = $glLineGrid.records[j].DATEACCT;\n                  break;\n                }\n              }\n              //var DATEACCT = glLineGrid.records[glLineGrid.getChanges()[i].recid].DATEACCT;\n              _dateAcct.push(new Date(DATEACCT));\n              $dateAcct.val(Globalize.format(new Date(Math.max.apply(null, _dateAcct)), "yyyy-MM-dd"));\n            }\n          }\n        }\n      }\n      maxDate = new Date(Math.max.apply(null, _allDates));\n      if (_allDates.length == 0 || _allDates == "Invalid Date") maxDate = new Date();\n      //$date.val(Globalize.format(new Date(maxDate), "yyyy-MM-dd"));\n      //$dateAcct.val(Globalize.format(new Date(maxDate), "yyyy-MM-dd"));\n      $dateAcct.val(Globalize.format(maxDate, "yyyy-MM-dd"));\n    }\n    ;\n\n    //load unallocated GL Journal Lines\n    //added for gl-allocation\n    function loadGLVoucher() {\n      if (_C_BPartner_ID > 0) {\n        var chk = $vchkMultiCurrency.is(\':checked\');\n        _C_Currency_ID = $cmbCurrency.val();\n        if (_C_Currency_ID == 0) {\n          return VIS.ADialog.info("Message", true, "select currency", "");\n        }\n        AD_Org_ID = $OrgFilter.val();\n        fromDate = $gfromDate.val();\n        toDate = $gtoDate.val();\n        srchText = $srchGL.val();\n        $bsyDiv[0].style.visibility = "visible";\n        pageNoGL = 1, gridPgnoGL = 1, glRecord = 0;\n        isGLGridLoaded = false;\n        //---If ToDate is less than From Date--Display error message-----\n        if (toDate != "") {\n          if (fromDate > toDate) {\n            $gtoDate.val(\'\');\n            return VIS.ADialog.info("Message", true, VIS.Msg.getMsg("VIS_FromDateGreater"), "");\n          }\n        }\n        if (fromDate != null && fromDate != undefined && fromDate != "") {\n          VIS.DB.to_date(fromDate);\n        }\n        if (toDate != null && toDate != undefined && toDate != "") {\n          VIS.DB.to_date(toDate);\n        }\n        $.ajax({\n          url: VIS.Application.contextUrl + "VIS/PaymentAllocation/GetGLData",\n          dataType: "json",\n          data: {\n            AD_Org_ID: AD_Org_ID,\n            _C_Currency_ID: _C_Currency_ID,\n            _C_BPartner_ID: _C_BPartner_ID,\n            page: pageNoGL,\n            size: PAGESIZE,\n            fromDate: fromDate,\n            toDate: toDate,\n            srchText: srchText,\n            chk: chk,\n            isInterComp: _isInterCompany\n          },\n          async: true,\n          success: function (result) {\n            //if (result) {\n            //    callbackLoadGlLines(result);\n            //}\n            var data = JSON.parse(result);\n            if (data) {\n              if (pageNoGL == 1 && data.length > 0) {\n                glRecord = data[0].GLRecords;\n                gridPgnoGL = Math.ceil(glRecord / PAGESIZE);\n              }\n              //if any invoice is selected and we load another invoice from db than we have to check weather that invoice is already selected or not. if already selected tha skip that.\n              if (SelectedGL.length > 0) {\n                totalselectedgl = SelectedGL.length;\n                for (var i = 0; i < data.length; i++) {\n                  var filterObj = SelectedGL.filter(function (e) {\n                    return e.GL_JOURNALLINE_ID == data[i]["GL_JOURNALLINE_ID"];\n                  });\n                  if (filterObj.length == 0) {\n                    data[i]["recid"] = SelectedGL.length + i;\n                    SelectedGL.push(data[i]);\n                  }\n                }\n                data = SelectedGL;\n                // Clear Selected gl array when we de-select the select all checkbox. work done for to hold all the selected invoices\n                SelectedGL = [];\n              }\n              //end\n              //callbackLoadGlLines(data);\n              bindGLGrid(data, chk);\n              //added window no to find grid to implement scroll  issue : scroll was not working properly\n              $divGl.find(\'#grid_openformatglgrid_\' + $self.windowNo + \'_records\').on(\'scroll\', cartGLScroll);\n              isGLGridLoaded = true;\n              isBusyIndicatorHidden();\n            }\n          },\n          error: function (err) {\n            $bsyDiv[0].style.visibility = "hidden";\n          }\n        });\n      }\n    }\n    ;\n\n    //function callbackLoadGlLines(data) {\n    //    if (data != null) {\n    //        //var data = JSON.parse(data);\n    //        var rows = [];\n\n    //        var colkeys = [];\n\n    //        if (data.length > 0) {\n    //            colkeys = Object.keys(data[0]);\n    //        }\n    //        // check records exist in grid or not\n    //        // for updating record id \n    //        var count = 0;\n    //        if (glLineGrid.records.length > 0) {\n    //            count = glLineGrid.records.length;\n    //        };\n    //        for (var r = 0; r < data.length; r++) {\n    //            var singleRow = {};\n    //            singleRow[\'recid\'] = count + r;\n    //            for (var c = 0; c < colkeys.length; c++) {\n    //                var colna = colkeys[c];\n    //                if (colna.toLower() == "selectrow") {\n    //                    singleRow[colna] = false;\n    //                }\n    //                else {\n    //                    singleRow[colna] = VIS.Utility.encodeText(data[r][colna]);\n    //                }\n    //            }\n    //            rows.push(singleRow);\n    //        }\n    //        // bind rows with grid\n    //        w2utils.encodeTags(rows);\n    //        //glLineGrid.add(rows);\n    //        glLineGrid.records = rows;\n    //        glLineGrid.refresh();\n    //    }\n    //    $bsyDiv[0].style.visibility = "hidden";\n    //};\n    //end\n\n    function getSelectedRecordsCount() {\n      _allDates = [];\n      isOrgMatched = true;\n      for (var i = 0; i < $gridPayment.getChanges().length; i++) {\n        if ($gridPayment.getChanges()[i].SelectRow === undefined) {} else {\n          if ($gridPayment.getChanges()[i].SelectRow == true) {\n            var row = $gridPayment.get($gridPayment.getChanges()[i].recid).DATEACCT;\n            // check org matched or not \n            if (isOrgMatched && parseInt($cmbOrg.val()) != parseInt($gridPayment.get($gridPayment.getChanges()[i].recid).AD_Org_ID)) {\n              isOrgMatched = false;\n            }\n            _allDates.push(new Date(row));\n          }\n        }\n      }\n      for (var i = 0; i < $gridInvoice.getChanges().length; i++) {\n        if ($gridInvoice.getChanges()[i].SelectRow === undefined) {} else {\n          if ($gridInvoice.getChanges()[i].SelectRow == true) {\n            var row = $gridInvoice.get($gridInvoice.getChanges()[i].recid).Date1; //changed schedule date to invoice date suggested by Mukesh sir, ravi and amit.\n            // check org matched or not \n            if (isOrgMatched && parseInt($cmbOrg.val()) != parseInt($gridInvoice.get($gridInvoice.getChanges()[i].recid).AD_Org_ID)) {\n              isOrgMatched = false;\n            }\n            _allDates.push(new Date(row));\n          }\n        }\n      }\n      for (var i = 0; i < $gridCashline.getChanges().length; i++) {\n        if ($gridCashline.getChanges()[i].SelectRow === undefined) {} else {\n          if ($gridCashline.getChanges()[i].SelectRow == true) {\n            var row = $gridCashline.get($gridCashline.getChanges()[i].recid).DATEACCT;\n            // check org matched or not \n            if (isOrgMatched && parseInt($cmbOrg.val()) != parseInt($gridCashline.get($gridCashline.getChanges()[i].recid).AD_Org_ID)) {\n              isOrgMatched = false;\n            }\n            _allDates.push(new Date(row));\n          }\n        }\n      }\n      //added for gl-allocation\n      for (var i = 0; i < $glLineGrid.getChanges().length; i++) {\n        if ($glLineGrid.getChanges()[i].SelectRow === undefined) {} else {\n          if ($glLineGrid.getChanges()[i].SelectRow == true) {\n            var row = $glLineGrid.get($glLineGrid.getChanges()[i].recid).DATEACCT;\n            _allDates.push(new Date(row));\n          }\n        }\n      }\n      if (_allDates.length == 0) return false;\n      return true;\n    }\n    ;\n    /**\r\n    *  Vetoable Change Listener.\r\n    *  - Business Partner\r\n    *  - Currency\r\n    * \t- Date\r\n    *  @param e event\r\n    */\n    function vetoableChange(name, value) {\n      if (name != "C_BPartner_ID" && value == null) {\n        //clear right side  filters and selected records\n        clearRightPanelFilters();\n        //added to load all blank grids\n        blankAllGrids();\n        return;\n      }\n\n      //  BPartner\n      if (name == "C_BPartner_ID") {\n        //if (_C_BPartner_ID != value) {\n        //    //clear right side  filters and selected records\n        //    clearRightPanelFilters();\n        //    //added to load all blank grids\n        //    blankAllGrids();\n        //}\n        _C_BPartner_ID = value;\n        if (_C_BPartner_ID > 0) {\n          // If BP is selected then  set mandatory false---Neha\n          $vSearchBPartner.getControl().removeClass(\'vis-ev-col-mandatory\');\n        }\n        //////loadBPartner();\n      }\n      //\tCurrency\n      else if (name == "C_Currency_ID") {\n        _C_Currency_ID = parseInt(value);\n        //VIS_427 The function is called in order to get Precision according to currency\n        loadCurrencyPrecision();\n        ////////loadBPartner();\n      }\n      //\tDate for Multi-Currency\n      else if (name == "Date" && $vchkMultiCurrency) {\n        //////loadBPartner();\n        refreshLabel();\n      }\n    }\n    function calculate() {\n      $bsyDiv[0].style.visibility = "visible";\n      var format = VIS.DisplayType.GetNumberFormat(VIS.DisplayType.Amount);\n      var allocDate = new Date();\n      allocDate = null;\n      //  Payment******************\n      var totalPay = parseFloat(0);\n      _noPayments = 0;\n      var rowsPayment = null;\n      var rowsCash = null;\n      var rowsInvoice = null;\n      //added for gl-allocation\n      var rowsGL = null;\n      //end\n      if ($gridPayment) rowsPayment = $gridPayment.getChanges();\n      if ($gridCashline) rowsCash = $gridCashline.getChanges();\n      if ($gridInvoice) rowsInvoice = $gridInvoice.getChanges();\n      if ($glLineGrid) rowsGL = $glLineGrid.getChanges();\n      if (rowsPayment != null) {\n        for (var i = 0; i < rowsPayment.length; i++) {\n          if (rowsPayment[i].SelectRow == true) {\n            var currnetRow = $gridPayment.get(rowsPayment[i].recid);\n            var ts = new Date(currnetRow.Date1);\n            var timeUtil = new VIS.TimeUtil();\n            allocDate = timeUtil.max(allocDate, ts);\n            var keys = Object.keys(currnetRow);\n            //var bd = parseFloat(checkcommaordot(event, rowsPayment[i][keys[keys.indexOf("AppliedAmt")]])).toFixed(stdPrecision);\n            var bd;\n            if (rowsPayment[i][keys[keys.indexOf("AppliedAmt")]] != "" && rowsPayment[i][keys[keys.indexOf("AppliedAmt")]] != undefined) {\n              if (rowsPayment[i][keys[keys.indexOf("AppliedAmt")]].toString().contains("-") || rowsPayment[i][keys[keys.indexOf("AppliedAmt")]].toString().contains("−")) {\n                bd = (-1 * Math.abs(format.GetConvertedNumber(rowsPayment[i][keys[keys.indexOf("AppliedAmt")]].toString(), dotFormatter))).toFixed(stdPrecision);\n              } else {\n                bd = format.GetConvertedNumber(rowsPayment[i][keys[keys.indexOf("AppliedAmt")]].toString(), dotFormatter).toFixed(stdPrecision);\n              }\n              bd = parseFloat(bd);\n            } else {\n              bd = 0;\n              console.log("Payment Row: " + rowsPayment[i][keys[keys.indexOf("AppliedAmt")]] + ", RowNo:-" + i);\n            }\n            totalPay = totalPay + (isNaN(bd) ? 0 : bd); //  Applied Pay\n            _noPayments++;\n          }\n        }\n        //decimal digits as per culture.\n        totalPay = totalPay.toFixed(stdPrecision);\n        totalPay = parseFloat(totalPay);\n      }\n      $lblPaymentSum.text(_noPayments + " " + VIS.Msg.getMsg("SelectedLines") + " - " + summation + " " + parseFloat(totalPay).toLocaleString(navigator.language, {\n        minimumFractionDigits: stdPrecision,\n        maximumFractionDigits: stdPrecision\n      }) + " "); //VIS.Msg.getMsg("SelectedPayments") \n\n      //  Cash******************\n      var totalCash = parseFloat(0);\n      _noCashLines = 0;\n      if (rowsCash != null) {\n        for (var i = 0; i < rowsCash.length; i++) {\n          if (rowsCash[i].SelectRow == true) {\n            var currnetRow = $gridCashline.get(rowsCash[i].recid);\n            var ts = new Date(currnetRow.Created);\n            var timeUtil = new VIS.TimeUtil();\n            allocDate = timeUtil.max(allocDate, ts);\n            //************************************** Changed\n            var keys = Object.keys(currnetRow);\n            var bd;\n            if (rowsCash[i][keys[keys.indexOf("AppliedAmt")]] != "" && rowsCash[i][keys[keys.indexOf("AppliedAmt")]] != undefined) {\n              //var bd = parseFloat(checkcommaordot(event, rowsCash[i][keys[keys.indexOf("AppliedAmt")]])).toFixed(stdPrecision);\n              if (rowsCash[i][keys[keys.indexOf("AppliedAmt")]].toString().contains("-") || rowsCash[i][keys[keys.indexOf("AppliedAmt")]].toString().contains("−")) {\n                bd = (-1 * Math.abs(format.GetConvertedNumber(rowsCash[i][keys[keys.indexOf("AppliedAmt")]].toString(), dotFormatter))).toFixed(stdPrecision);\n              } else {\n                bd = format.GetConvertedNumber(rowsCash[i][keys[keys.indexOf("AppliedAmt")]].toString(), dotFormatter).toFixed(stdPrecision);\n              }\n              bd = parseFloat(bd);\n            } else {\n              bd = 0;\n              console.log("Cash Row: " + rowsCash[i][keys[keys.indexOf("AppliedAmt")]] + ", RowNo:-" + i);\n            }\n            totalCash = totalCash + (isNaN(bd) ? 0 : bd); //  Applied Pay\n            _noCashLines++;\n          }\n        }\n        //decimal digits as per culture.\n        totalCash = totalCash.toFixed(stdPrecision);\n        totalCash = parseFloat(totalCash);\n      }\n      $lblCashSum.text(_noCashLines + " " + VIS.Msg.getMsg("SelectedLines") + " - " + summation + " " + parseFloat(totalCash).toLocaleString(navigator.language, {\n        minimumFractionDigits: stdPrecision,\n        maximumFractionDigits: stdPrecision\n      }) + " "); //VIS.Msg.getMsg("SelectedCashlines") + \n\n      //  Invoices******************\n      var totalInv = parseFloat(0);\n      _noInvoices = 0;\n      if (rowsInvoice != null) {\n        for (var i = 0; i < rowsInvoice.length; i++) {\n          if (rowsInvoice[i].SelectRow == true) {\n            var currnetRow = $gridInvoice.get(rowsInvoice[i].recid);\n            var ts;\n            if (countVA009 > 0) {\n              ts = new Date(currnetRow.InvoiceScheduleDate);\n            } else {\n              ts = new Date(currnetRow.Date1);\n            }\n            //when Invoice Schedule Date is null then ts become Invalid Date\n            if (ts == "Invalid Date") {\n              ts = new Date(currnetRow.Date1);\n            }\n            var timeUtil = new VIS.TimeUtil();\n            allocDate = timeUtil.max(allocDate, ts);\n            var keys = Object.keys(currnetRow);\n            var bd;\n            //VA228:Check applied amount is undefined\n            if (rowsInvoice[i][keys[keys.indexOf("AppliedAmt")]] != "" && rowsInvoice[i][keys[keys.indexOf("AppliedAmt")]] != undefined) {\n              //bd = parseFloat(checkcommaordot(event, rowsInvoice[i][keys[keys.indexOf("AppliedAmt")]])).toFixed(stdPrecision);\n              if (rowsInvoice[i][keys[keys.indexOf("AppliedAmt")]].toString().contains("-") || rowsInvoice[i][keys[keys.indexOf("AppliedAmt")]].toString().contains("−")) {\n                bd = (-1 * Math.abs(format.GetConvertedNumber(rowsInvoice[i][keys[keys.indexOf("AppliedAmt")]].toString(), dotFormatter))).toFixed(stdPrecision);\n              } else {\n                bd = format.GetConvertedNumber(rowsInvoice[i][keys[keys.indexOf("AppliedAmt")]].toString(), dotFormatter).toFixed(stdPrecision);\n              }\n              bd = parseFloat(bd);\n            } else {\n              bd = 0;\n              console.log("Invoice Row: " + rowsInvoice[i][keys[keys.indexOf("AppliedAmt")]] + ", RowNo:-" + i);\n            }\n            totalInv = totalInv + (isNaN(bd) ? 0 : bd); //  Applied Inv\n            _noInvoices++;\n          }\n        }\n        //decimal digits as per culture.\n\n        totalInv = totalInv.toFixed(stdPrecision);\n        totalInv = parseFloat(totalInv);\n      }\n      $lblInvoiceSum.text(_noInvoices + " " + VIS.Msg.getMsg("SelectedLines") + " - " + summation + " " + parseFloat(totalInv).toLocaleString(navigator.language, {\n        minimumFractionDigits: stdPrecision,\n        maximumFractionDigits: stdPrecision\n      }) + " "); //VIS.Msg.getMsg("SelectedInvoices") +\n\n      //added for gl-allocation\n\n      var totalGL = parseFloat(0);\n      _noGL = 0;\n      if (rowsGL != null) {\n        for (var i = 0; i < rowsGL.length; i++) {\n          if (rowsGL[i].SelectRow == true) {\n            var currnetRow = $glLineGrid.get(rowsGL[i].recid);\n            ts = new Date(currnetRow.Date1);\n            var timeUtil = new VIS.TimeUtil();\n            allocDate = timeUtil.max(allocDate, ts);\n            var keys = Object.keys(currnetRow);\n            var bd;\n            if (rowsGL[i][keys[keys.indexOf("AppliedAmt")]] != "" && rowsGL[i][keys[keys.indexOf("AppliedAmt")]] != undefined) {\n              bd = parseFloat(rowsGL[i][keys[keys.indexOf("AppliedAmt")]]).toFixed(stdPrecision);\n              bd = parseFloat(bd);\n            } else {\n              bd = 0;\n              console.log("GL Row: " + rowsGL[i][keys[keys.indexOf("AppliedAmt")]] + ", RowNo:-" + i);\n            }\n            totalGL = totalGL + (isNaN(bd) ? 0 : bd); //  Applied GL\n            _noGL++;\n          }\n        }\n        //decimal digits as per culture.\n        totalGL = totalGL.toFixed(stdPrecision);\n        totalGL = parseFloat(totalGL);\n      }\n      $lblglSum.text(_noGL + " " + VIS.Msg.getMsg("SelectedLines") + " - " + summation + " " + parseFloat(totalGL).toLocaleString(navigator.language, {\n        minimumFractionDigits: stdPrecision,\n        maximumFractionDigits: stdPrecision\n      }) + " "); //VIS.Msg.getMsg("SelectedGL") +\n      //end\n\n      //\tSet AllocationDate\n      // not to update date. now it always shows as current date\n      //  Set Allocation Currency\n      if ($cmbCurrency.children("option").filter(":selected").text() != null) {\n        $vlblAllocCurrency.text($cmbCurrency.children("option").filter(":selected").text());\n      }\n      //  Difference \n      //  Difference --New Logic for Invoice-(cash+payment)-by raghu 18-jan-2011 //  Cash******************\n      //var difference = parseFloat((parseFloat(totalPay) + parseFloat(totalCash)) - (parseFloat(totalInv) + parseFloat(totalGL))).toLocaleString(navigator.language, { minimumFractionDigits: stdPrecision, maximumFractionDigits: stdPrecision });\n      var difference = parseFloat(totalPay + totalCash - (totalInv + totalGL)).toLocaleString(navigator.language, {\n        minimumFractionDigits: stdPrecision,\n        maximumFractionDigits: stdPrecision\n      });\n      $vtxtDifference.text(difference);\n      if (parseFloat(difference) == parseFloat(0)) {\n        $vbtnAllocate.prop("readonly", false);\n        $vbtnAllocate.css({\n          "pointer-events": "auto",\n          "opacity": "1"\n        });\n      } else {\n        $vbtnAllocate.prop("readonly", true);\n        $vbtnAllocate.css({\n          "pointer-events": "none",\n          "opacity": "0.5"\n        });\n      }\n      $bsyDiv[0].style.visibility = "hidden";\n    }\n    ;\n\n    // when we change or load business partner, refresh label\n    function refreshLabel() {\n      //var format = VIS.DisplayType.GetNumberFormat(VIS.DisplayType.Amount); \n      //set the amount as culture format.\n      var totalPay = parseFloat(0).toLocaleString(navigator.language, {\n        minimumFractionDigits: stdPrecision,\n        maximumFractionDigits: stdPrecision\n      });\n      $lblPaymentSum.text(0 + " " + VIS.Msg.getMsg("SelectedLines") + " - " + summation + " " + totalPay + " "); //VIS.Msg.getMsg("SelectedPayments") +\n      $lblCashSum.text(0 + " " + VIS.Msg.getMsg("SelectedLines") + " - " + summation + " " + totalPay + " "); //VIS.Msg.getMsg("SelectedCashlines") +\n      $lblInvoiceSum.text(0 + " " + VIS.Msg.getMsg("SelectedLines") + " - " + summation + " " + totalPay + " "); //VIS.Msg.getMsg("SelectedInvoices") +\n      $lblglSum.text(0 + " " + VIS.Msg.getMsg("SelectedLines") + " - " + summation + " " + totalPay + " "); //VIS.Msg.getMsg("SelectedGL") +\n      $vtxtDifference.text(totalPay);\n      //Set False to select all \n      $invSelectAll.prop(\'checked\', false);\n      $paymentSelctAll.prop(\'checked\', false);\n      $cashSelctAll.prop(\'checked\', false);\n      $glSelectAll.prop(\'checked\', false);\n      //to expand the height of all grids\n      $(\'.vis-allocation-payment-grid, .vis-allocation-cashLine-grid, .vis-allocation-invoice-grid, .vis-allocation-gl-grid\').css(\'height\', \'80%\');\n      //$(\'.vis-allocation-leftControls\').prop(\'style\', \' margin-bottom: 5px\');\n      $(\'#cashMaindiv\').css(\'display\', \'none\');\n      $(\'#glMaindiv\').css(\'display\', \'none\');\n      displayConvertionType();\n    }\n    ;\n    function displayConvertionType() {\n      if ($vchkMultiCurrency.is(\':checked\')) {\n        $conversionDiv.css(\'display\', \'block\');\n        //VIS_0045: Show Conversion Type when either allocaton From/To is Invoice\n        if ($allocationFrom.val() == "I" && $allocationTo.val() == "P" || $allocationFrom.val() == "P" && $allocationTo.val() == "I" || $allocationFrom.val() == "I" && $allocationTo.val() == "I") {\n          $innerRow.find(\'.vis-conversionType\').css(\'display\', \'block\');\n        } else {\n          $innerRow.find(\'.vis-conversionType\').css(\'display\', \'none\');\n          $vConversionType.getControl().val(\'\');\n        }\n      } else {\n        $conversionDiv.css(\'display\', \'none\');\n        //VIS_0045: Hide Conversion Type when either allocaton From/To is Invoice\n        $innerRow.find(\'.vis-conversionType\').css(\'display\', \'none\');\n        $vConversionType.getControl().val(\'\');\n      }\n    }\n    ;\n    function vchkapplocationChange() {\n      var rowsPayment;\n      var rowsCash;\n      if ($gridPayment != undefined) rowsPayment = $gridPayment.getChanges();\n      if ($gridCashline != undefined) rowsCash = $gridCashline.getChanges();\n      //Set False to select all \n      $paymentSelctAll.prop(\'checked\', false);\n      $cashSelctAll.prop(\'checked\', false);\n      //added for gl-allocation\n      $vchkGlInvoice.prop(\'checked\', false);\n      //end\n      // if cash record is selected means our cash grid is not readonly\n      //if ($vchkAllocation.is(\':checked\')) {\n      if (!readOnlyCash) {\n        readOnlyCash = false;\n        readOnlyPayment = true;\n        if (rowsPayment != null) {\n          for (var i = 0; i < rowsPayment.length; i++) {\n            var boolValue = getBoolValue($gridPayment.getChanges(), rowsPayment[i].recid);\n            if (boolValue) {\n              var changes = $gridPayment.get(rowsPayment[i].recid).changes;\n              if (changes != null && changes != undefined) {\n                changes.SelectRow = false;\n                changes.AppliedAmt = 0;\n                $gridPayment.refreshCell(rowsPayment[i].recid, "SelectRow");\n                $gridPayment.refreshCell(rowsPayment[i].recid, "AppliedAmt");\n              }\n            }\n          }\n          if ($gridPayment) $gridPayment.refresh();\n        }\n        //---Display Cash Grid and hide Payment Grid and refresh cash grid-----Neha\n        $row2.css(\'display\', \'none\');\n        $row3.css(\'display\', \'\');\n        if ($gridCashline) $gridCashline.refresh();\n        //------------------------------\n      } else {\n        readOnlyCash = true;\n        readOnlyPayment = false;\n        if (rowsCash != null) {\n          for (var i = 0; i < rowsCash.length; i++) {\n            var boolValue = getBoolValue($gridCashline.getChanges(), rowsCash[i].recid);\n            if (boolValue) {\n              var changes = $gridCashline.get(rowsCash[i].recid).changes;\n              if (changes != null && changes != undefined) {\n                changes.SelectRow = false;\n                changes.AppliedAmt = 0;\n                $gridCashline.refreshCell(rowsCash[i].recid, "SelectRow");\n                $gridCashline.refreshCell(rowsCash[i].recid, "AppliedAmt");\n              }\n            }\n          }\n          if ($gridCashline) $gridCashline.refresh();\n        }\n        //---Display Payment Grid and hide Cash Grid and refresh Payment grid-----Neha\n        $row3.css(\'display\', \'none\');\n        $row2.css(\'display\', \'\');\n        if ($gridPayment) $gridPayment.refresh();\n      }\n      calculate();\n    }\n    ;\n    function allocate() {\n      var canContinue = true;\n      if (invoiceTotal > paymentTotal) {\n        var difference = invoiceTotal - paymentTotal;\n        if (invoiceTotal * .05 <= difference) {\n          canContinue = false;\n          VIS.ADialog.confirm("AllocationWriteOffWarn", true, "", "Confirm", function (result) {\n            if (result) {\n              allocateNow();\n            }\n          });\n        }\n      } else if (paymentTotal > invoiceTotal) {\n        var difference = paymentTotal - invoiceTotal;\n        if (paymentTotal * .05 >= difference) {\n          canContinue = VIS.ADialog.error("AllocationWriteOffWarn");\n        }\n      }\n      if (canContinue) {\n        allocateNow();\n      }\n    }\n    ;\n    function allocateNow() {\n      $bsyDiv[0].style.visibility = "visible";\n      var rowsPayment = $gridPayment.getChanges();\n      var rowsCash = $gridCashline.getChanges();\n      var rowsInvoice = $gridInvoice.getChanges();\n      //added for gl-allocation\n      var rowsGLVoucher = $glLineGrid.getChanges();\n      var DateTrx = $date.val();\n      var DateAcct = $dateAcct.val();\n      //added for gl-allocation\n      if ($allocationFrom.val() == "G" || $allocationTo.val() == "G") {\n        //   needs to check in case of Party JV allocation weather you are allocating payment with JV Or you are allocating CashLine with JV.\n        glData(rowsPayment, rowsInvoice, rowsCash, rowsGLVoucher, DateTrx, DateAcct);\n      } else if ($allocationFrom.val() == "C" || $allocationTo.val() == "C") {\n        saveCashData(rowsPayment, rowsCash, rowsInvoice, DateTrx, DateAcct);\n      } else {\n        savePaymentData(rowsPayment, rowsCash, rowsInvoice, DateTrx, DateAcct);\n      }\n    }\n    ;\n    function saveCashData(rowsPayment, rowsCash, rowsInvoice, DateTrx, DateAcct) {\n      if (_noInvoices + _noCashLines == 0) return "";\n\n      // check period is open or not\n      // also check is Non Business Day?\n      $.ajax({\n        url: VIS.Application.contextUrl + "PaymentAllocation/CheckPeriodState",\n        data: {\n          DateTrx: $dateAcct.val(),\n          AD_Org_ID: $cmbOrg.val()\n        },\n        async: false,\n        success: function (result) {\n          if (result != "") {\n            //alert(result);\n            VIS.ADialog.info("", true, result, "");\n            setallgridsLoaded = true;\n            loadBPartner();\n            $bsyDiv[0].style.visibility = "hidden";\n            return "";\n          } else {\n            var payment = "";\n            var applied = "";\n            var discount = "";\n            var writeOff = "";\n            var open = "";\n            var C_CurrencyType_ID = 0;\n            var paymentData = [];\n            var cashData = [];\n            var invoiceData = [];\n            for (var i = 0; i < rowsPayment.length; i++) {\n              var row = $gridPayment.get(rowsPayment[i].recid);\n              C_CurrencyType_ID = parseInt(row.C_ConversionType_ID);\n              if (rowsPayment[i].AppliedAmt != 0 && rowsPayment[i].AppliedAmt != undefined) {\n                var appliedAmt = rowsPayment[i].AppliedAmt;\n                appliedAmt = convertAppliedAmtculture(appliedAmt, dotFormatter);\n                paymentData.push({\n                  AppliedAmt: appliedAmt,\n                  Date: row.Date1,\n                  Converted: row.ConvertedAmount,\n                  CpaymentID: row.CpaymentID,\n                  Documentno: row.Documentno,\n                  Isocode: row.Isocode,\n                  Multiplierap: row.Multiplierap,\n                  OpenAmt: row.OpenAmt,\n                  Payment: row.Payment,\n                  Org: parseInt($cmbOrg.val()),\n                  IsPaid: false,\n                  paidAmt: 0\n                });\n              }\n            }\n            var chk = $vchkMultiCurrency.is(\':checked\'); // isMultiCurrency\n            if (chk) {\n              var conversionDate = Globalize.format(new Date($conversionDate.val()), "yyyy-MM-dd"); // Conversion Date\n            } else {\n              var conversionDate = Globalize.format(new Date(), "yyyy-MM-dd");\n            }\n            //for (var i = 0; i < rowsPayment.length; i++) {\n            //    var row = $gridPayment.get(rowsPayment[i].recid);\n            //    C_CurrencyType_ID = parseInt(row.C_ConversionType_ID);\n            //    paymentData.push({\n            //        AppliedAmt: rowsPayment[i].AppliedAmt, Date: row.Date1, Converted: row.ConvertedAmount, CpaymentID: row.CpaymentID, Documentno: row.Documentno, Isocode: row.Isocode,\n            //        Multiplierap: row.Multiplierap, OpenAmt: row.OpenAmt, Payment: row.Payment, Org: parseInt($cmbOrg.val())\n            //    });\n            //}\n            if (rowsCash.length > 0) {\n              var keys = Object.keys($gridCashline.get(0));\n              // is uesd to pick applied amount\n              payment = keys[keys.indexOf("AppliedAmt")];\n              applied = keys[keys.indexOf("AppliedAmt")];\n              for (var i = 0; i < rowsCash.length; i++) {\n                var row = $gridCashline.get(rowsCash[i].recid);\n                C_CurrencyType_ID = parseInt(row.C_ConversionType_ID);\n                if (rowsCash[i].AppliedAmt != 0 && rowsCash[i].AppliedAmt != undefined) {\n                  var appliedAmt = rowsCash[i].AppliedAmt;\n                  appliedAmt = convertAppliedAmtculture(appliedAmt, dotFormatter);\n                  cashData.push({\n                    AppliedAmt: appliedAmt,\n                    Date: row.Created,\n                    Amount: row.Amount,\n                    ccashlineid: row.CcashlineiID,\n                    Converted: row.ConvertedAmount,\n                    Isocode: row.Isocode,\n                    Multiplierap: row.Multiplierap,\n                    OpenAmt: row.OpenAmt,\n                    ReceiptNo: row.ReceiptNo,\n                    Org: parseInt($cmbOrg.val()),\n                    IsPaid: false,\n                    paidAmt: 0\n                  });\n                }\n              }\n            }\n            if (rowsInvoice.length > 0) {\n              var keys = Object.keys($gridInvoice.get(0));\n              applied = keys[keys.indexOf("AppliedAmt")];\n              discount = keys[keys.indexOf("Discount")];\n              writeOff = keys[keys.indexOf("Writeoff")];\n              open = keys[keys.indexOf("Amount")];\n              for (var i = 0; i < rowsInvoice.length; i++) {\n                var row = $gridInvoice.get(rowsInvoice[i].recid);\n                C_CurrencyType_ID = parseInt(row.C_ConversionType_ID);\n                var discounts = rowsInvoice[i].Discount;\n                if (discounts == undefined) {\n                  discounts = row.Discount;\n                }\n                var appliedamts = rowsInvoice[i].AppliedAmt;\n                if (appliedamts == undefined) {\n                  appliedamts = row.AppliedAmt;\n                }\n                var writeoffs = rowsInvoice[i].Writeoff;\n                if (writeoffs == undefined) {\n                  writeoffs = row.Writeoff;\n                }\n                if (appliedamts != 0 && appliedamts != undefined) {\n                  appliedamts = convertAppliedAmtculture(appliedamts, dotFormatter);\n                  discounts = convertAppliedAmtculture(discounts, dotFormatter);\n                  writeoffs = convertAppliedAmtculture(writeoffs, dotFormatter);\n                  if (countVA009 <= 0) {\n                    invoiceData.push({\n                      AppliedAmt: appliedamts,\n                      Discount: discounts,\n                      Writeoff: writeoffs,\n                      cinvoiceid: row.CinvoiceID,\n                      Converted: row.Converted,\n                      Currency: row.Currency,\n                      Date: row.Date1,\n                      Docbasetype: row.DocBaseType,\n                      documentno: row.Documentno,\n                      Isocode: row.Isocode,\n                      Multiplierap: row.Multiplierap,\n                      Amount: row.Amount,\n                      Org: parseInt($cmbOrg.val()),\n                      IsPaid: false,\n                      paidAmt: 0\n                    });\n                  } else {\n                    invoiceData.push({\n                      AppliedAmt: appliedamts,\n                      Discount: discounts,\n                      Writeoff: writeoffs,\n                      cinvoiceid: row.CinvoiceID,\n                      Converted: row.Converted,\n                      Currency: row.Currency,\n                      //Date: row.Date1, Docbasetype: row.DocBaseType,\n                      // send invoice schedule date if va009 module is updated\n                      Date: row.InvoiceScheduleDate,\n                      Docbasetype: row.DocBaseType,\n                      documentno: row.Documentno,\n                      Isocode: row.Isocode,\n                      Multiplierap: row.Multiplierap,\n                      Amount: row.Amount,\n                      c_invoicepayschedule_id: row.C_InvoicePaySchedule_ID,\n                      Org: parseInt($cmbOrg.val()),\n                      IsPaid: false,\n                      paidAmt: 0\n                    });\n                  }\n                }\n              }\n            }\n            $.ajax({\n              url: VIS.Application.contextUrl + "PaymentAllocation/SaveCashData",\n              type: \'POST\',\n              data: {\n                paymentData: JSON.stringify(paymentData),\n                cashData: JSON.stringify(cashData),\n                invoiceData: JSON.stringify(invoiceData),\n                currency: $cmbCurrency.val(),\n                isCash: true,\n                _C_BPartner_ID: _C_BPartner_ID,\n                _windowNo: self.windowNo,\n                payment: payment,\n                DateTrx: $date.val(),\n                appliedamt: applied,\n                discount: discount,\n                writeOff: writeOff,\n                open: open,\n                DateAcct: DateAcct,\n                _CurrencyType_ID: C_CurrencyType_ID,\n                isInterBPartner: false,\n                conversionDate: conversionDate,\n                chk: chk\n              },\n              success: function (result) {\n                // Clear Selected invoices array when we de-select the select all checkbox. work done for to hold all the selected invoices\n                selectedInvoices = [];\n                VIS.ADialog.info("", true, result, "");\n                setallgridsLoaded = true;\n                loadBPartner();\n                $bsyDiv[0].style.visibility = "hidden";\n              },\n              error: function (result) {\n                VIS.ADialog.info("", true, result, "");\n                $bsyDiv[0].style.visibility = "hidden";\n              }\n            });\n          }\n        },\n        error: function (result) {\n          VIS.ADialog.info("", true, result, "");\n          $bsyDiv[0].style.visibility = "hidden";\n        }\n      });\n    }\n    ;\n    function savePaymentData(rowsPayment, rowsCash, rowsInvoice, DateTrx, DateAcct) {\n      if (_noInvoices + _payment == 0) return "";\n\n      // check period is open or not\n      // also check is Non Business Day?\n      $.ajax({\n        url: VIS.Application.contextUrl + "PaymentAllocation/CheckPeriodState",\n        data: {\n          DateTrx: $date.val(),\n          AD_Org_ID: $cmbOrg.val()\n        },\n        async: false,\n        success: function (result) {\n          if (result != "") {\n            VIS.ADialog.info("", true, result, "");\n            setallgridsLoaded = true;\n            loadBPartner();\n            $bsyDiv[0].style.visibility = "hidden";\n            return "";\n          } else {\n            var payment = "";\n            var applied = "";\n            var discount = "";\n            var writeOff = "";\n            var open = "";\n            var C_CurrencyType_ID = 0;\n            var paymentData = [];\n            var cashData = [];\n            var invoiceData = [];\n            var chk = $vchkMultiCurrency.is(\':checked\');\n            if (chk) {\n              var conversionDate = Globalize.format(new Date($conversionDate.val()), "yyyy-MM-dd");\n            } else {\n              var conversionDate = Globalize.format(new Date(), "yyyy-MM-dd");\n            }\n            for (var i = 0; i < rowsPayment.length; i++) {\n              var row = $gridPayment.get(rowsPayment[i].recid);\n              var keys = Object.keys($gridPayment.get(0));\n              payment = keys[keys.indexOf("AppliedAmt")];\n              //VIS_0045: In case of Multi-Currency, pass conversion type as selected conversion type\n              if (chk) {\n                C_CurrencyType_ID = $vConversionType.getValue();\n              } else {\n                C_CurrencyType_ID = parseInt(row.C_ConversionType_ID);\n              }\n              //payment = keys[10];\n              if (rowsPayment[i].AppliedAmt != undefined && rowsPayment[i].AppliedAmt != 0) {\n                var appliedAmt = rowsPayment[i].AppliedAmt;\n                appliedAmt = convertAppliedAmtculture(appliedAmt, dotFormatter);\n                paymentData.push({\n                  appliedamt: appliedAmt,\n                  date: row.Date1,\n                  converted: row.ConvertedAmount,\n                  cpaymentid: row.CpaymentID,\n                  documentno: row.Documentno,\n                  isocode: row.Isocode,\n                  multiplierap: row.Multiplierap,\n                  openamt: row.OpenAmt,\n                  payment: row.Payment,\n                  Org: parseInt($cmbOrg.val())\n                });\n              }\n            }\n            if (rowsCash.length > 0) {\n              var keys = Object.keys($gridCashline.get(0));\n              for (var i = 0; i < rowsCash.length; i++) {\n                var row = $gridCashline.get(rowsCash[i].recid);\n                cashData.push({\n                  appliedamt: rowsCash[i].AppliedAmt,\n                  date: row.Created,\n                  amount: row.Amount,\n                  ccashlineid: row.CcashlineiID,\n                  converted: row.ConvertedAmount,\n                  isocode: row.Isocode,\n                  multiplierap: row.Multiplierap,\n                  openamt: row.OpenAmt,\n                  receiptno: row.ReceiptNo,\n                  Org: parseInt($cmbOrg.val())\n                });\n              }\n            }\n            if (rowsInvoice.length > 0) {\n              var keys = Object.keys($gridInvoice.get(0));\n              applied = keys[keys.indexOf("AppliedAmt")];\n              payment = keys[keys.indexOf("AppliedAmt")];\n              discount = keys[keys.indexOf("Discount")];\n              writeOff = keys[keys.indexOf("Writeoff")];\n              open = keys[keys.indexOf("Amount")];\n              for (var i = 0; i < rowsInvoice.length; i++) {\n                var row = $gridInvoice.get(rowsInvoice[i].recid);\n                //VIS_0045: In case of Multi-Currency, pass conversion type as selected conversion type\n                if (chk) {\n                  C_CurrencyType_ID = $vConversionType.getValue();\n                } else {\n                  C_CurrencyType_ID = parseInt(row.C_ConversionType_ID);\n                }\n                var discounts = rowsInvoice[i].Discount;\n                if (discounts == undefined) {\n                  discounts = row.Discount;\n                }\n                var appliedamts = rowsInvoice[i].AppliedAmt;\n                if (appliedamts == undefined) {\n                  appliedamts = row.AppliedAmt;\n                }\n                var writeoffs = rowsInvoice[i].Writeoff;\n                if (writeoffs == undefined) {\n                  writeoffs = row.Writeoff;\n                }\n                if (appliedamts != 0 && appliedamts != undefined) {\n                  appliedamts = convertAppliedAmtculture(appliedamts, dotFormatter);\n                  discounts = convertAppliedAmtculture(discounts, dotFormatter);\n                  writeoffs = convertAppliedAmtculture(writeoffs, dotFormatter);\n                  if (countVA009 <= 0) {\n                    invoiceData.push({\n                      appliedamt: appliedamts,\n                      discount: discounts,\n                      writeoff: writeoffs,\n                      cinvoiceid: row.CinvoiceID,\n                      converted: row.Converted,\n                      currency: row.Currency,\n                      date: row.Date1,\n                      docbasetype: row.DocBaseType,\n                      documentno: row.Documentno,\n                      isocode: row.Isocode,\n                      multiplierap: row.Multiplierap,\n                      amount: row.Amount,\n                      Org: parseInt($cmbOrg.val())\n                    });\n                  } else {\n                    invoiceData.push({\n                      appliedamt: appliedamts,\n                      discount: discounts,\n                      writeoff: writeoffs,\n                      cinvoiceid: row.CinvoiceID,\n                      converted: row.Converted,\n                      currency: row.Currency,\n                      //date: row.Date1, docbasetype: row.DocBaseType,\n                      // send invoice schedule date if va009 module is updated\n                      date: row.InvoiceScheduleDate,\n                      docbasetype: row.DocBaseType,\n                      DocumentNo: row.Documentno,\n                      Isocode: row.Isocode,\n                      Multiplierap: row.Multiplierap,\n                      Amount: row.Amount,\n                      c_invoicepayschedule_id: row.C_InvoicePaySchedule_ID,\n                      Org: parseInt($cmbOrg.val())\n                    });\n                  }\n                }\n              }\n            }\n            // if cash record is selected means our cash grid is not readonly\n            var cashcheck = false;\n            if (!readOnlyCash) {\n              cashcheck = true;\n            }\n            $.ajax({\n              url: VIS.Application.contextUrl + "PaymentAllocation/SavePaymentData",\n              type: \'POST\',\n              data: {\n                paymentData: JSON.stringify(paymentData),\n                cashData: JSON.stringify(cashData),\n                invoiceData: JSON.stringify(invoiceData),\n                currency: $cmbCurrency.val(),\n                isCash: true,\n                _C_BPartner_ID: _C_BPartner_ID,\n                _windowNo: self.windowNo,\n                payment: payment,\n                DateTrx: $date.val(),\n                appliedamt: applied,\n                discount: discount,\n                writeOff: writeOff,\n                open: open,\n                DateAcct: DateAcct,\n                _CurrencyType_ID: C_CurrencyType_ID,\n                isInterBPartner: _isInterBPartner,\n                conversionDate: conversionDate,\n                chk: chk\n              },\n              success: function (result) {\n                // Clear Selected invoices array when we de-select the select all checkbox. work done for to hold all the selected invoices\n                selectedInvoices = [];\n                selectedPayments = [];\n                setallgridsLoaded = true;\n                loadBPartner();\n                VIS.ADialog.info("", true, result, "");\n                $bsyDiv[0].style.visibility = "hidden";\n              },\n              error: function () {\n                VIS.ADialog.info("", true, result, "");\n                $bsyDiv[0].style.visibility = "hidden";\n              }\n            });\n          }\n        },\n        error: function (result) {\n          VIS.ADialog.info("", true, result, "");\n          $bsyDiv[0].style.visibility = "hidden";\n        }\n      });\n    }\n    ;\n\n    //added for gl-allocation\n    function glData(rowsPayment, rowsInvoice, rowsCash, rowsGLVoucher, DateTrx, DateAcct) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VIS/PaymentAllocation/CheckPeriodState",\n        data: {\n          DateTrx: $date.val(),\n          AD_Org_ID: $cmbOrg.val()\n        },\n        async: false,\n        success: function (result) {\n          if (result != "") {\n            var e;\n            VIS.ADialog.info("", true, result, "");\n            setallgridsLoaded = true;\n            loadBPartner();\n            //loadGLDataGrid(e);\n            $bsyDiv[0].style.visibility = "hidden";\n            return "";\n          } else {\n            $bsyDiv[0].style.visibility = "visible";\n            var payment = "";\n            var applied = "";\n            var discount = "";\n            var writeOff = "";\n            var open = "";\n            var C_CurrencyType_ID = 0;\n            var paymentData = [];\n            var cashData = [];\n            var glData = [];\n            var invoiceData = [];\n            var chk = $vchkMultiCurrency.is(\':checked\'); // isMultiCurrency\n            if (chk) {\n              var conversionDate = Globalize.format(new Date($conversionDate.val()), "yyyy-MM-dd"); // Conversion Date\n            } else {\n              var conversionDate = Globalize.format(new Date(), "yyyy-MM-dd");\n            }\n            //Payment Data\n            if (rowsPayment.length > 0) {\n              var keys = Object.keys($gridPayment.get(0));\n              payment = keys[keys.indexOf("AppliedAmt")];\n              for (var i = 0; i < rowsPayment.length; i++) {\n                var row = $gridPayment.get(rowsPayment[i].recid);\n                C_CurrencyType_ID = parseInt(row.C_ConversionType_ID);\n                if (rowsPayment[i].AppliedAmt != undefined && rowsPayment[i].AppliedAmt != 0) {\n                  var appliedAmt = rowsPayment[i].AppliedAmt;\n                  appliedAmt = convertAppliedAmtculture(appliedAmt, dotFormatter);\n                  paymentData.push({\n                    AppliedAmt: appliedAmt,\n                    Date: row.Date1,\n                    Converted: row.ConvertedAmount,\n                    cpaymentid: row.CpaymentID,\n                    Documentno: row.Documentno,\n                    Isocode: row.Isocode,\n                    Multiplierap: row.Multiplierap,\n                    OpenAmt: row.OpenAmt,\n                    Payment: row.Payment,\n                    Org: parseInt($cmbOrg.val()),\n                    IsPaid: false,\n                    paidAmt: 0,\n                    payment: payment\n                  });\n                }\n              }\n            }\n\n            //Cash Data\n            if (rowsCash.length > 0) {\n              var keys = Object.keys($gridCashline.get(0));\n              payment = keys[keys.indexOf("AppliedAmt")];\n              for (var i = 0; i < rowsCash.length; i++) {\n                var row = $gridCashline.get(rowsCash[i].recid);\n                C_CurrencyType_ID = parseInt(row.C_ConversionType_ID);\n                if (rowsCash[i].AppliedAmt != 0 && rowsCash[i].AppliedAmt != undefined) {\n                  var appliedAmt = rowsCash[i].AppliedAmt;\n                  appliedAmt = convertAppliedAmtculture(appliedAmt, dotFormatter);\n                  cashData.push({\n                    AppliedAmt: appliedAmt,\n                    Date: row.Created,\n                    Amount: row.Amount,\n                    ccashlineid: row.CcashlineiID,\n                    Converted: row.ConvertedAmount,\n                    Isocode: row.Isocode,\n                    Multiplierap: row.Multiplierap,\n                    OpenAmt: row.OpenAmt,\n                    ReceiptNo: row.ReceiptNo,\n                    Org: parseInt($cmbOrg.val()),\n                    IsPaid: false,\n                    paidAmt: 0,\n                    payment: payment\n                  });\n                }\n              }\n            }\n            if (rowsInvoice.length > 0) {\n              var keys = Object.keys($gridInvoice.get(0));\n              applied = keys[keys.indexOf("AppliedAmt")];\n              discount = keys[keys.indexOf("Discount")];\n              writeOff = keys[keys.indexOf("Writeoff")];\n              open = keys[keys.indexOf("Amount")];\n              for (var i = 0; i < rowsInvoice.length; i++) {\n                var row = $gridInvoice.get(rowsInvoice[i].recid);\n                C_CurrencyType_ID = parseInt(row.C_ConversionType_ID);\n                var discounts = rowsInvoice[i].Discount;\n                if (discounts == undefined) {\n                  discounts = row.Discount;\n                }\n                var appliedamts = rowsInvoice[i].AppliedAmt;\n                if (appliedamts == undefined) {\n                  appliedamts = row.AppliedAmt;\n                }\n                var writeoffs = rowsInvoice[i].Writeoff;\n                if (writeoffs == undefined) {\n                  writeoffs = row.Writeoff;\n                }\n                if (appliedamts != 0 && appliedamts != undefined) {\n                  appliedamts = convertAppliedAmtculture(appliedamts, dotFormatter);\n                  discounts = convertAppliedAmtculture(discounts, dotFormatter);\n                  writeoffs = convertAppliedAmtculture(writeoffs, dotFormatter);\n                  if (countVA009 <= 0) {\n                    invoiceData.push({\n                      AppliedAmt: appliedamts,\n                      Discount: discounts,\n                      Writeoff: writeoffs,\n                      cinvoiceid: row.CinvoiceID,\n                      Converted: row.Converted,\n                      Currency: row.Currency,\n                      Date: row.Date1,\n                      Docbasetype: row.DocBaseType,\n                      applied: applied,\n                      discount: discount,\n                      open: open,\n                      writeOff: writeOff,\n                      documentno: row.Documentno,\n                      Isocode: row.Isocode,\n                      Multiplierap: row.Multiplierap,\n                      Amount: row.Amount,\n                      Org: parseInt($cmbOrg.val()),\n                      IsPaid: false,\n                      paidAmt: 0\n                    });\n                  } else {\n                    invoiceData.push({\n                      AppliedAmt: appliedamts,\n                      Discount: discounts,\n                      Writeoff: writeoffs,\n                      cinvoiceid: row.CinvoiceID,\n                      Converted: row.Converted,\n                      Currency: row.Currency,\n                      //Date: row.Date1, Docbasetype: row.DocBaseType,\n                      // send invoice schedule date if va009 module is updated\n                      Date: row.InvoiceScheduleDate,\n                      Docbasetype: row.DocBaseType,\n                      applied: applied,\n                      discount: discount,\n                      open: open,\n                      writeOff: writeOff,\n                      documentno: row.Documentno,\n                      Isocode: row.Isocode,\n                      Multiplierap: row.Multiplierap,\n                      Amount: row.Amount,\n                      c_invoicepayschedule_id: row.C_InvoicePaySchedule_ID,\n                      Org: parseInt($cmbOrg.val()),\n                      IsPaid: false,\n                      paidAmt: 0\n                    });\n                  }\n                }\n              }\n            }\n            if (rowsGLVoucher.length > 0) {\n              for (var i = 0; i < rowsGLVoucher.length; i++) {\n                var row = $glLineGrid.get(rowsGLVoucher[i].recid);\n                C_CurrencyType_ID = parseInt(row.C_ConversionType_ID);\n                if (rowsGLVoucher[i].AppliedAmt != undefined && rowsGLVoucher[i].AppliedAmt != 0) {\n                  glData.push({\n                    AppliedAmt: rowsGLVoucher[i].AppliedAmt,\n                    Date: row.DATEACCT,\n                    DateDoc: row.DATEDOC,\n                    DocumentNo: row.DOCUMENTNO,\n                    OpenAmount: row.OpenAmount,\n                    GL_JournalLine_ID: row.GL_JOURNALLINE_ID,\n                    GL_Journal_ID: row.GL_Journal_ID,\n                    ConvertedAmount: row.ConvertedAmount,\n                    Org: parseInt($cmbOrg.val()),\n                    IsPaid: false,\n                    paidAmt: 0\n                  });\n                }\n              }\n            }\n            saveGLData(JSON.stringify(paymentData), JSON.stringify(invoiceData), JSON.stringify(cashData), JSON.stringify(glData), $date.val(), C_CurrencyType_ID, applied, discount, open, payment, writeOff, conversionDate, chk);\n          }\n        },\n        error: function (result) {\n          VIS.ADialog.info("", true, result, "");\n          $bsyDiv[0].style.visibility = "hidden";\n        }\n      });\n    }\n    ;\n    function saveGLData(rowsPayment, rowsInvoice, rowsCash, rowsGLVoucher, DateTrx, C_CurrencyType_ID, applied, discount, open, payment, writeOff, conversionDate, chk) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VIS/PaymentAllocation/saveGLJData",\n        type: \'POST\',\n        data: {\n          paymentData: rowsPayment,\n          invoiceData: rowsInvoice,\n          cashData: rowsCash,\n          glData: rowsGLVoucher,\n          DateTrx: DateTrx,\n          _windowNo: self.windowNo,\n          C_Currency_ID: _C_Currency_ID,\n          C_BPartner_ID: _C_BPartner_ID,\n          AD_Org_ID: $cmbOrg.val(),\n          C_CurrencyType_ID: C_CurrencyType_ID,\n          DateAcct: $dateAcct.val(),\n          applied: applied,\n          discount: discount,\n          open: open,\n          payment: payment,\n          writeOff: writeOff,\n          conversionDate: conversionDate,\n          chk: chk\n        },\n        async: false,\n        success: function (result) {\n          //var e;\n          //VIS.ADialog.info("", true, result, "");\n          selectedInvoices = [];\n          selectedPayments = [];\n          selectedCashlines = [];\n          SelectedGL = [];\n          getGLChanges = []; //clear the array which is holding Credit or Debit Amount records.\n          setallgridsLoaded = true;\n          loadBPartner();\n          //loadGLDataGrid(e);\n          if ($gridCashline) $gridCashline.refresh();\n          if ($glLineGrid) $glLineGrid.refresh();\n          if ($gridInvoice) $gridInvoice.refresh();\n          if ($gridPayment) $gridPayment.refresh();\n          var format = VIS.DisplayType.GetNumberFormat(VIS.DisplayType.Amount);\n          $lblglSum.text(0 + " " + VIS.Msg.getMsg("SelectedLines") + " - " + summation + " " + format.GetFormatedValue(0) + " "); //VIS.Msg.getMsg("SelectedGL") +\n          $vtxtDifference.text(format.GetFormatedValue(0));\n          //$vchkGlVoucher.trigger("click");\n          $bsyDiv[0].style.visibility = "hidden";\n          VIS.ADialog.info("", true, result, "");\n        },\n        error: function (result) {\n          VIS.ADialog.info("", true, result, "");\n          $bsyDiv[0].style.visibility = "hidden";\n        }\n      });\n    }\n    ;\n    //end\n\n    /**Work done for searching from left parameters */\n    function searchbyParameters() {\n      console.info("BPartner Name : " + $vSearchBPartner.getName() + " , Value : " + $vSearchBPartner.value);\n      console.info("Currency ID : " + $cmbCurrency.val());\n      console.info("Allocation From : " + $allocationFrom.val());\n      console.info("Allocation To : " + $allocationTo.val());\n      console.info("MultiCurrency : " + $vchkMultiCurrency.is(\':checked\'));\n      //VIS_0045: Selection Parameter value\n      console.info("Currency Type : " + $vConversionType.getName() + " , Value : " + $vConversionType.getValue());\n      console.info("Organization : " + $cmbOrg.val());\n      console.info("Document Number : " + $txtDocNo.val());\n      console.info("Document Type : " + $cmbDocType.val());\n      console.info("Pay Document Type : " + $payDocType.val());\n      console.info("From Date : " + $fromDate.val());\n      console.info("To Date : " + $toDate.val());\n      console.info("Conversion Date : " + $conversionDate.val());\n      $bsyDiv[0].style.visibility = "visible";\n      // initialize Pageno as 1 when we change BP\n      pageNoInvoice = 1, gridPgnoInvoice = 1, invoiceRecord = 0;\n      pageNoCashJournal = 1, gridPgnoCashJounal = 1, CashRecord = 0;\n      pageNoPayment = 1, gridPgnoPayment = 1, paymentRecord = 0;\n      pageNoGL = 1, gridPgnoGL = 1, glRecord = 0;\n      isPaymentGridLoaded = false, isCashGridLoaded = false, isInvoiceGridLoaded = false, isGLGridLoaded = false;\n      C_ConversionType_ID = 0;\n      /********************************\r\n      *  Load unallocated Payments\r\n      *      1-TrxDate, 2-DocumentNo, (3-Currency, 4-PayAmt,)\r\n      *      5-ConvAmt, 6-ConvOpen, 7-Allocated\r\n      */\n      // did work for send only call to specific controller which is selected \n      if ($allocationFrom.val() == "P" | $allocationTo.val() == "P") loadUnallocatedPayments();else isPaymentGridLoaded = true;\n\n      /********************************\r\n      *  Load unallocated Cash lines\r\n      *      1-TrxDate, 2-DocumentNo, (3-Currency, 4-PayAmt,)\r\n      *      5-ConvAmt, 6-ConvOpen, 7-Allocated\r\n      */\n      // did work for send only call to specific controller which is selected \n      if ($allocationFrom.val() == "C" | $allocationTo.val() == "C") loadUnallocatedCashLines();else isCashGridLoaded = true;\n\n      // did work for send only call to specific controller which is selected \n      if ($allocationFrom.val() == "I" | $allocationTo.val() == "I") loadInvoice();else isInvoiceGridLoaded = true;\n\n      // did work for send only call to specific controller which is selected \n      if ($allocationFrom.val() == "G" | $allocationTo.val() == "G") loadGLVoucher();else isGLGridLoaded = true;\n      //show the selected grids\n      displayGrids($allocationFrom.val(), $allocationTo.val());\n    }\n    ;\n\n    /**Load all grids as blank */\n    function blankAllGrids() {\n      var isMultiCurrency = $vchkMultiCurrency.is(\':checked\');\n      //loadGLGrid();\n      bindInvoiceGrid([], isMultiCurrency);\n      bindPaymentGrid([], isMultiCurrency);\n      bindCashline([], isMultiCurrency);\n      bindGLGrid([], isMultiCurrency);\n      //$($(glLineGrid.box)[0]).find(\'.w2ui-search-down\').css(\'margin-top\', \'4px\');\n      //$($(glLineGrid.box)[0]).find(\'.w2ui-search-clear\').css(\'margin-top\', \'4px\');\n      $(\'.vis-allocate-glSum\').css(\'text-align\', \'right\');\n      $(\'.vis-allocate-glSum\').css(\'margin-right\', \'10px\');\n    }\n    ;\n    this.disposeComponent = function () {\n      if ($gridPayment != undefined && $gridPayment != null) {\n        $gridPayment.destroy();\n        $gridPayment = null;\n      }\n      if ($gridCashline != undefined && $gridCashline != null) {\n        $gridCashline.destroy();\n        $gridCashline = null;\n      }\n      if ($gridInvoice != undefined && $gridInvoice != null) {\n        $gridInvoice.destroy();\n        $gridInvoice = null;\n      }\n      if ($glLineGrid != undefined && $glLineGrid != null) {\n        $glLineGrid.destroy();\n        $glLineGrid = null;\n      }\n      $invSelectAll = null;\n      $paymentSelctAll = null;\n      $cashSelctAll = null;\n      $glLineGrid = null;\n      _allDates = null;\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    this.refreshUI = function () {\n      /*Refresh Grid on Focus*/\n      $gridPayment.resize();\n      $gridCashline.resize();\n      $gridInvoice.resize();\n      $glLineGrid.resize();\n    };\n  }\n  ;\n  VAllocation.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.Initialize();\n    this.frame.getContentGrid().append(this.getRoot());\n  };\n  VAllocation.prototype.refresh = function () {\n    this.refreshUI();\n  };\n  VAllocation.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VIS.Apps = VIS.Apps || {};\n  VIS.Apps.AForms = VIS.Apps.AForms || {};\n  VIS.Apps.AForms.VAllocation = VAllocation;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vallocation.js?\n}')},"./Areas/VAS/Scripts/app/forms/vasattachuser.js":()=>{eval('{/********************************************************\r\n * Module Name: VAS Standard\r\n * Purpose : create existing user With Business Partner \r\n * Employee code: VAI061\r\n * Created Date: 10-01-2024\r\n * Updated Date: 14-02-2024\r\n ********************************************************/\n\n;\nVAS = window.VAS || {};\n//self-invoking function\n;\n(function (VAS, $) {\n  // Form Class function fullnamespace\n  VAS.AttachUserToBP = function () {\n    this.frame;\n    this.windowNo;\n    var _windowNo;\n    var dGrid = null;\n    var pageNo = 1;\n    var pageSize = 10;\n    var ulPaging, liPrevPage, liCurrPage, liNextPage, selectPage;\n    var recordCount = null;\n    var $root;\n    var $self = this;\n    var arrListColumns = [];\n    var $upperDiv = null;\n    var lowerDiv = null;\n    var bottomDiv = null;\n    var $bsyDiv = null;\n    var c_BPartnerID = 0;\n    var userName = [];\n    var $parentdiv = null;\n    var $inputDiv = null;\n    var $okBtn, $cancelBtn, $searchButton;\n    var $employee = null;\n    var $textEmployee = null;\n    var $searchEmployee = null;\n    var $textSearchEmployee = null;\n    var $btnDiv = null;\n    var search = null;\n    var selectedRecord = [];\n    var totalPages = null;\n    var countRecords = 0;\n    var totalRecords = 0;\n    // Initialize UI Elements\n\n    function initializeComponent() {\n      $bsyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n      $parentdiv = $("<div class=\'vas-parent\'>");\n      recordCount = $("<div id=\'vas-recordCount\'><span class=\'vas-recordCount\'></span></div>");\n      $inputDiv = $("<div class=\'vas-businessPartnerInput py-2\'>");\n      $root = $("<div class=\'vas-root\'>");\n      $upperDiv = $("<div>");\n      $btnDiv = $("<div class= \'d-flex\'>");\n      lowerDiv = $("<div class=\'vas-lowerDiv\'>");\n      bottomDiv = $("<div class=\'vas-bottom\'>");\n      $searchButton = $(\'<div class="input-group-append vas-businessPartnerButton"><button class="input-group-text vas-businessPartnerSearch"><i class="fa fa-search" aria-hidden="true"></i></button></div>\');\n      $cancelBtn = $("<button class=\'vas-actionbtn\'> " + VIS.Msg.getMsg("Cancel") + " </button>");\n      $okBtn = $("<button class=\'vas-actionbtn vas-disableBtn \' > " + VIS.Msg.getMsg("Ok") + " </button>");\n      ulPaging = $(\'<ul class="vis-ad-w-p-s-plst"">\');\n      liPage = $(\'<li></li>\');\n      liPrevPage = $(\'<li style="opacity: 0.6;" class ="vas-disablePage" ><div><i class="vis vis-pageup" title="\' + VIS.Msg.getMsg("PageDown") + \'" style="opacity: 0.6;"></i></div></li>\');\n      selectPage = $("<select class = \'vis-statusbar-combo\'></select>");\n      liCurrPage = $(\'<li>\').append(selectPage);\n      liNextPage = $(\'<li style="opacity: 1"><div><i class="vis vis-pagedown " title="\' + VIS.Msg.getMsg(" PageUp") + \'" style = "opacity: 0.6;" ></i ></div ></li> \');\n      ulPaging.append(liPage).append(liPrevPage).append(liCurrPage).append(liNextPage);\n\n      /* Employee textbox*/\n      $employee = $(\'<div class="input-group vis-input-wrap mb-0 vas-inputboxPadding" >\');\n      $textEmployee = $(\'<div class="vis-control-wrap"><input type="text" maxlength="80" disabled /><label>\' + VIS.Msg.getMsg("Employee") + \' </label></div>\');\n      $employee.append($textEmployee);\n      $textEmployee.find(\'input\').val(VIS.context.getContext(_windowNo, "Value"));\n      /* SearchExistingUser textbox*/\n      $searchEmployee = $(\'<div class="input-group vis-input-wrap mb-0 vas-inputboxPadding" >\');\n      $textSearchEmployee = $(\'<div class="vis-control-wrap"><input type="text" maxlength="80"  data-hasbtn=" " /><label>\' + VIS.Msg.getMsg("VAS_SearchExistingUser") + \'</label></div>\');\n      $searchEmployee.append($textSearchEmployee).append($searchButton);\n      $inputDiv.append($employee).append($searchEmployee);\n      $parentdiv.append($inputDiv);\n      $upperDiv.append($parentdiv);\n      $btnDiv.append(ulPaging).append($okBtn).append($cancelBtn);\n      bottomDiv.append(recordCount).append($btnDiv);\n      $root.append($upperDiv).append(lowerDiv).append(bottomDiv);\n      $root.append($bsyDiv);\n      dropDown();\n\n      /* ok button use to call the getRecordID function */\n      $okBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        linkPartnerID();\n      });\n      /* click function on previous div used to call the previous page record*/\n      liPrevPage.on("click", function () {\n        liNextPage.css("opacity", "1");\n        liNextPage.removeClass("vas-disablePage");\n        pageNo = selectPage.val() - 1;\n        if (pageNo >= 1) {\n          loadGrid(pageNo, pageSize, true);\n          selectPage.val(pageNo);\n        }\n        if (pageNo <= 1) {\n          liPrevPage.css("opacity", "0.6");\n          $(liPrevPage).addClass("vas-disablePage");\n        }\n      });\n      /*click function on nextpage div used to call the next page record */\n\n      liNextPage.on("click", function () {\n        liPrevPage.css("opacity", "1");\n        $(liPrevPage).removeClass("vas-disablePage");\n        pageNo = parseInt(selectPage.val()) + 1;\n        if (pageNo <= totalPages) {\n          loadGrid(pageNo, pageSize, true);\n          selectPage.val(pageNo);\n        }\n        if (pageNo >= totalPages) {\n          liNextPage.css("opacity", "0.6");\n          liNextPage.addClass("vas-disablePage");\n        }\n      });\n\n      /* function used to change the value of option when we click on the values on dropdown*/\n      function dropDown() {\n        selectPage.on("change", function () {\n          pageNo = selectPage.val();\n          loadGrid(pageNo, pageSize, true);\n          selectPage.find("option[value=\'" + pageNo + "\']").prop("selected", true);\n          if (pageNo >= totalPages) {\n            liNextPage.css("opacity", "0.6");\n            liNextPage.addClass("vas-disablePage");\n            liPrevPage.css("opacity", "1");\n            $(liPrevPage).removeClass("vas-disablePage");\n          } else {\n            liNextPage.css("opacity", "1");\n            liNextPage.removeClass("vas-disablePage");\n          }\n          if (pageNo <= 1) {\n            liPrevPage.css("opacity", "0.6");\n            $(liPrevPage).addClass("vas-disablePage");\n            liNextPage.css("opacity", "1");\n            liNextPage.removeClass("vas-disablePage");\n          } else {\n            liPrevPage.css("opacity", "1");\n            $(liPrevPage).removeClass("vas-disablePage");\n          }\n        });\n      }\n      ;\n\n      //search button use to \n      //search the records from grid \n\n      $searchButton.on(VIS.Events.onTouchStartOrClick, function () {\n        selectedRecord = [];\n        $($okBtn).addClass("vas-disableBtn");\n        search = $textSearchEmployee.children(\'input\').val();\n        pageNo = 1;\n        countRecords = 0;\n        arrListColumns = [];\n        busyDiv(true);\n        loadGrid(pageNo, pageSize, true);\n        liNextPage.css("opacity", "1");\n        liNextPage.removeClass("vas-disablePage");\n        $textSearchEmployee.children(\'input\').val(\'\');\n      });\n\n      // close the form\n      $cancelBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.frame.close();\n      });\n\n      /* keyup used to search the record after pressing enter */\n      $parentdiv.on("keyup", function (e) {\n        pageNo = 1;\n        countRecords = 0;\n        arrListColumns = [];\n        if (e.keyCode === 13) {\n          search = $textSearchEmployee.children(\'input\').val();\n          selectedRecord = [];\n          $($okBtn).addClass("vas-disableBtn");\n          busyDiv(true);\n          loadGrid(pageNo, pageSize, true);\n          liNextPage.css("opacity", "1");\n          liNextPage.removeClass("vas-disablePage");\n          $textSearchEmployee.children(\'input\').val(\'\');\n        }\n      });\n    }\n\n    /* function used to get the dropdown values acoroding to number of total pages*/\n    function PageCtrls() {\n      selectPage.empty();\n      if (totalPages > 0) {\n        for (var i = 0; i < totalPages; i++) {\n          selectPage.append($("<option>").val(i + 1).text(i + 1));\n        }\n        selectPage.val(pageNo);\n      }\n    }\n    ;\n\n    /*  function used to link the userID against PartnerID*/\n    function linkPartnerID() {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS/VASAttachUserToBP/UpdateUser",\n        type: "POST",\n        data: {\n          userNames: userName,\n          userIds: selectedRecord,\n          c_BPartnerID: c_BPartnerID\n        },\n        success: function (result) {\n          result = JSON.parse(result);\n          if (result.length == 0) {\n            $self.frame.close();\n          } else {\n            var errorHtml = "<ul>";\n            for (var i = 0; i < result.length; i++) {\n              errorHtml += "<li>" + result[i].userName + ":" + result[i].error + "</li>";\n            }\n            errorHtml += "</ul>";\n            var obj = new VAS.AttachError($self.WindowNo, errorHtml);\n            obj.show();\n          }\n        },\n        error: function (eror) {\n          console.log(eror);\n        }\n      });\n    }\n    /* selected row function used to get the selected record data*/\n    function onSelectRow(event) {\n      if (event.recid == undefined) {\n        if (totalRecords == 0) {\n          $okBtn.addClass("vas-disableBtn");\n          return;\n        }\n        var countRecords = w2ui[\'GridDiv\' + $self.windowNo].records.length;\n        var selectedRecordSet = new Set(selectedRecord);\n\n        // Iterate over each record in the grid\n        for (var i = 0; i < countRecords; i++) {\n          var recid = w2ui[\'GridDiv\' + $self.windowNo].records[i].recid;\n\n          // Check if the recid is not already in the selectedRecord array\n          if (!selectedRecordSet.has(recid)) {\n            selectedRecord.push(recid);\n          }\n        }\n\n        // Remove the disabled class from the ok button\n        $($okBtn).removeClass("vas-disableBtn");\n      } else {\n        var recordId = event.recid;\n        if (recordId != undefined && selectedRecord.indexOf(recordId) === -1) {\n          selectedRecord.push(recordId);\n          for (i = 0; i < selectedRecord.length; i++) {\n            selectedRecord[i] = parseInt(selectedRecord[i], 10);\n          }\n        }\n        $($okBtn).removeClass("vas-disableBtn");\n      }\n    }\n    ;\n    /* function used to deselect the record data and also enable and disbale the ok button*/\n    function onUnselectedRow(event) {\n      if (event.recid == undefined) {\n        var currentRecid = [];\n        countRecords = w2ui[\'GridDiv\' + $self.windowNo].records.length;\n        for (i = 0; i < countRecords; i++) {\n          recid = w2ui[\'GridDiv\' + $self.windowNo].records[i].recid;\n          currentRecid.push(recid);\n          selectedRecord = selectedRecord.filter(function (value) {\n            return value != currentRecid[i];\n          });\n        }\n        if (selectedRecord.length == 0) {\n          $($okBtn).addClass("vas-disableBtn");\n        }\n      } else {\n        recordId = event.recid;\n        selectedRecord = selectedRecord.filter(function (value) {\n          return value != recordId;\n        });\n        if (selectedRecord.length == 0) {\n          $($okBtn).addClass("vas-disableBtn");\n        }\n      }\n    }\n    /* function used to get the records via ajax */\n    function loadGrid(pageNo, pageSize, isReload) {\n      var data = [];\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS/VASAttachUserToBP/GetUserList",\n        type: "GET",\n        data: {\n          searchKey: search,\n          pageNo: pageNo,\n          pageSize: pageSize\n        },\n        contentType: "application/json; charset=utf-8",\n        success: function (result) {\n          result = JSON.parse(result);\n          recordCount.find(\'span.vas-recordCount\').text(VIS.Msg.getMsg("VAS_totalRecords") + \': \' + result.RecordCount);\n          if (result.RecordCount == 0) {\n            totalPages = 1;\n          } else {\n            totalPages = Math.ceil(result.RecordCount / pageSize);\n          }\n          if (result != null && result.UserList != null) {\n            countRecords = 0;\n            countRecords = countRecords + result.UserList.length;\n            totalRecords = result.RecordCount;\n            for (var i = 0; i < result.UserList.length; i++) {\n              var line = {};\n              line[\'recid\'] = result.UserList[i].recid;\n              line[\'Image\'] = result.UserList[i].ImageUrl;\n              line[\'Name\'] = result.UserList[i].Name;\n              line[\'Email\'] = result.UserList[i].Email;\n              line[\'Mobile\'] = result.UserList[i].Mobile;\n              line[\'SuperVisor\'] = result.UserList[i].SupervisorName;\n              line[\'User_ID\'] = result.UserList[i].UserID;\n              data.push(line);\n            }\n          }\n          dynInit(data, isReload);\n          busyDiv(false);\n        },\n        error: function (eror) {\n          busyDiv(false);\n          console.log(eror);\n        }\n      });\n    }\n    ;\n\n    /* Function used to display the records on grid */\n    function dynInit(data, isReload) {\n      if (dGrid == null) {\n        arrListColumns = [];\n        if (arrListColumns.length == 0) {\n          arrListColumns.push({\n            field: "recid",\n            caption: "recid",\n            sortable: false,\n            size: \'0%\',\n            hidden: true\n          });\n          arrListColumns.push({\n            field: "Image",\n            caption: VIS.Msg.getMsg("VAS_Image"),\n            sortable: false,\n            size: \'8%\',\n            min: 35,\n            hidden: false,\n            render: function (rec) {\n              var recImage = rec.Image;\n              if (recImage != null) {\n                return \'<div class="vis-grid-row-td-icon-center vis-gridImageicon"><img class="vas-businessPartnerImg" alt=\' + rec.Image + \' src="\' + VIS.Application.contextUrl + rec.Image + \'"></div>\';\n              } else {\n                return \'<div class="vis-grid-row-td-icon-center vis-gridImageicon" ><div class="vis-app-user-img-wrap"><i class="fa fa-user"></i><img src="" alt="profile image"></div></div>\';\n              }\n            }\n          });\n          arrListColumns.push({\n            field: "User_ID",\n            caption: VIS.Msg.getMsg("VAS_UserID"),\n            sortable: false,\n            size: \'14%\',\n            hidden: false\n          });\n          arrListColumns.push({\n            field: "Name",\n            caption: VIS.Msg.getMsg("Name"),\n            sortable: false,\n            size: \'19%\',\n            hidden: false\n          });\n          arrListColumns.push({\n            field: "Email",\n            caption: VIS.Msg.getMsg("VAS_Email"),\n            sortable: false,\n            size: \'27%\',\n            hidden: false\n          });\n          arrListColumns.push({\n            field: "Mobile",\n            caption: VIS.Msg.getMsg("Mobile"),\n            sortable: false,\n            size: \'16%\',\n            hidden: false\n          });\n          arrListColumns.push({\n            field: "SuperVisor",\n            caption: VIS.Msg.getMsg("VAS_SuperVisor"),\n            sortable: false,\n            size: \'16%\',\n            hidden: false\n          });\n\n          /* encode the tags */\n          w2utils.encodeTags(data);\n          dGrid = $(lowerDiv).w2grid({\n            name: "GridDiv" + $self.windowNo,\n            recordHeight: 35,\n            show: {\n              selectColumn: true\n            },\n            multiSelect: true,\n            columns: arrListColumns,\n            records: data,\n            onSelect: onSelectRow,\n            onUnselect: onUnselectedRow\n          });\n        }\n      }\n      /* check applied if reload is true than it clear the dgrid and the updated grid records */\n      if (isReload) {\n        dGrid.clear();\n        dGrid.add(data);\n      } else if (pageNo > 1) {\n        dGrid.add(data);\n      }\n      PageCtrls();\n      reapplySelection();\n    }\n    ;\n\n    // function used to select the already records after calling the grid again \n\n    function reapplySelection() {\n      if (selectedRecord.length > 0) {\n        dGrid.select.apply(dGrid, selectedRecord);\n      }\n    }\n\n    /* display function used to display the grid */\n    this.display = function () {\n      busyDiv(true);\n      loadGrid(pageNo, pageSize, false);\n    };\n    this.Initialize = function () {\n      // load by java script\n      initializeComponent();\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n    /* busy Indicator*/\n    function busyDiv(Value) {\n      if (Value) {\n        $bsyDiv[0].style.visibility = \'visible\';\n      } else {\n        $bsyDiv[0].style.visibility = \'hidden\';\n      }\n    }\n    ;\n    /*function used to deallocate the memory*/\n    this.disposeComponent = function () {\n      if ($root) $root.remove();\n      if (dGrid != null) {\n        dGrid.destroy();\n      }\n      dGrid = null;\n      $root = null;\n      $bsyDiv = null;\n      arrListColumns = null;\n      this.getRoot = null;\n      this.disposeComponent = null;\n      this.lowerDiv = null;\n      this.upperDiv = null;\n      this.frame = null;\n      this.bottomDiv = null;\n      this.parentDiv = null;\n      this.$employee = null;\n      this.$textEmployee = null;\n      this.$searchEmployee = null;\n      this.$textSearchEmployee = null;\n      this.inputDiv = null;\n      userName = null;\n      if ($okBtn) $okBtn.off(VIS.Events.onTouchStartOrClick);\n      if ($cancelBtn) $cancelBtn.off(VIS.Events.onTouchStartOrClick);\n      $okBtn = $cancelBtn = null;\n      selectedRecordIds = null;\n      selectedRecord = null;\n    };\n    VAS.AttachUserToBP.prototype.init = function (windowNo, frame) {\n      //Assign to this Varable\n      this.frame = frame; //\n      c_BPartnerID = frame.getRecord_ID();\n      this.windowNo = windowNo;\n      _windowNo = windowNo;\n      this.Initialize();\n      this.frame.getContentGrid().append(this.getRoot());\n      this.frame.getContentGrid().height();\n      var sself = this;\n      sself.display();\n    };\n\n    // Must implement dispose\n    VAS.AttachUserToBP.prototype.dispose = function () {\n      this.disposeComponent();\n      // call frame dispose function\n      if (this.frame) this.frame.dispose();\n      this.frame = null;\n    };\n\n    /* To set the width of frame */\n    VAS.AttachUserToBP.prototype.setWidth = function () {\n      return 900;\n    };\n    /*  TO set the height of frame*/\n    VAS.AttachUserToBP.prototype.setHeight = function () {\n      return 620;\n    };\n    // Load form into VIS\n    VAS.AttachUserToBP = VAS.AttachUserToBP;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vasattachuser.js?\n}')},"./Areas/VAS/Scripts/app/forms/vasattachusererror.js":()=>{eval('{;\nVAS = window.VAS || {};\n\n//self-invoking function\n;\n(function (VAS, $) {\n  VAS.AttachError = function (WindowNo, errorHtml) {\n    this.frame;\n    var $root;\n    this.WindowNo;\n    var $self = this;\n    var $gridBody = null;\n\n    // Initialize UI Elements\n    function load() {\n      $root = $("<div style=\'width: 100%; height: 100%; background-color: white; padding-right:10px\'>");\n      $gridBody = $("<div class=\'vas-errorBody\'>").html(errorHtml);\n      $root.append($gridBody);\n    }\n    this.show = function () {\n      load();\n      var ch = new VIS.ChildDialog(); //create object of child dialog\n      ch.setHeight($(window).height() - 350);\n      ch.setWidth($(window).width() - 700);\n      ch.setTitle(VIS.Msg.getMsg("VAS_error"));\n      ch.setContent($root); //set the content\n      ch.show();\n      ch.onClose = function () {\n        if ($self.onClose) $self.onClose();\n        $self.dispose();\n      };\n    };\n    /*function used to deallocate the memory*/\n    this.disposeComponent = function () {\n      $root = null;\n      WindowNo = null;\n      $gridBody = null;\n      this.disposeComponent = null;\n    };\n  };\n  VAS.AttachError.prototype.dispose = function () {\n    this.disposeComponent();\n  };\n\n  // Load form into VIS\n  VAS.AttachError = VAS.AttachError;\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vasattachusererror.js?\n}')},"./Areas/VAS/Scripts/app/forms/vattributegrid.js":()=>{eval('{;\n(function (VIS, $) {\n  VIS.Apps.AForms = VIS.Apps.AForms || {};\n  function VAttributeGrid() {\n    this.frame;\n    this.windowNo;\n    var $self = this;\n    var toggle = false;\n    var toggleGen = false;\n    var toggleside = false;\n\n    // Setting Grid\t\t\n    var _setting = false;\n    //\tModes\t\n    var modes = [];\n    var MODE_VIEW = 0;\n    var MODE_PO = 0;\n    var MODE_PRICE = 0;\n    // Price List Version\t\n    var _M_PriceList_Version_ID = 0;\n    // Warehouse\t\t\n    var _M_Warehouse_ID = 0;\n    var _attributes = [];\n    var lblA1 = new VIS.Controls.VLabel(VIS.Msg.getElement(VIS.Env.getCtx(), "M_Attribute_ID"), "M_Attribute_ID", false, true);\n    var lblA2 = new VIS.Controls.VLabel(VIS.Msg.getElement(VIS.Env.getCtx(), "M_Attribute_ID"), "M_Attribute_ID", false, true);\n    var lblPriceList = new VIS.Controls.VLabel(VIS.Msg.getElement(VIS.Env.getCtx(), "M_PriceList_ID"), "M_PriceList_ID", false, true);\n    var lblWareHouse = new VIS.Controls.VLabel(VIS.Msg.getElement(VIS.Env.getCtx(), "M_Warehouse_ID"), "M_Warehouse_ID", false, true);\n    var lblMode = new VIS.Controls.VLabel(VIS.Msg.getMsg("Mode", false, false), "Mode", false, true);\n    var cmbA1 = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbA2 = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbPrice = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbWH = new VIS.Controls.VComboBox(\'\', false, false, true);\n    var cmbMode = new VIS.Controls.VComboBox(\'\', false, false, true);\n    this.log = VIS.Logging.VLogger.getVLogger("VAttributeGrid");\n    var $root = $("<div class=\'vis-forms-container\' style=\'width: 100%; height: 100%; background-color: white; \'>");\n    var $busyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n    var leftsideDiv = null;\n    var rightSideGridDiv = null;\n    var topLeftDiv = null;\n    var paradiv = null;\n    var gridDiv = null;\n    var bottumDiv = null;\n    var btnOk = null;\n    var btnRefresh = null;\n    var btnToggel = null;\n    var sideDivWidth = 260;\n    var minSideWidth = 50;\n    var selectDivWidth = $(window).width() - sideDivWidth;\n    var selectDivFullWidth = $(window).width() - minSideWidth;\n    var selectDivToggelWidth = selectDivWidth + sideDivWidth + 5;\n    var sideDivHeight = $(window).height() - 210;\n    var tblpMain = $("<table style=\'width: 100%;\'>");\n    function initializeComponent() {\n      setBusy(true);\n      var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/arrow-left.png";\n      //left side div\n      leftsideDiv = $("<div id=\'sideDiv_" + $self.windowNo + "\' class=\'vis-archive-left-sidebar\'>"); //" + sideDivHeight + "\n\n      //topLeftSide div\n      topLeftDiv = $("<div id=\'btnSpaceDiv_" + $self.windowNo + "\'  class=\'vis-archive-l-s-head\'>" + "<button id=\'btnSpace_" + $self.windowNo + "\' class=\'vis-archive-sb-t-button\'>" + "<i class=\'vis vis-arrow-left\'></i></button></div>" + "</div>");\n\n      //left side parameter div\n      paradiv = $("<div class=\'vis-archive-l-s-content vis-leftsidebarouterwrap\' id=\'parameterDiv_" + $self.windowNo + "\'>");\n      leftsideDiv.append(topLeftDiv).append(paradiv);\n\n      //Refresh\n      src = VIS.Application.contextUrl + "Areas/VIS/Images/base/Refresh24.png";\n      btnRefresh = $("<button id=\'btnRefresh_" + $self.windowNo + "\' class=\'VIS_Pref_btn-2 vis-frm-button\'><i class=\'vis vis-refresh\'></i></button>");\n      //Cancel button\n      btnOk = $("<input id=\'btnOk_" + $self.windowNo + "\' class=\'VIS_Pref_btn-2 vis-frm-button\' style=\'min-width: 70px;\' type=\'button\' value=\'" + VIS.Msg.getMsg("OK", false, false) + "\'>");\n      var tble = $("<table style=\'width: 100%;\'>");\n      //var tr = $("<tr>");\n      //var td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      paradiv.append(tble);\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append(lblA1.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 10px 10px 0px\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append(cmbA1.getControl().css("display", "inline-block"));\n      Leftformfieldctrlwrp.append(lblA1.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append(lblA2.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append(cmbA2.getControl().css("display", "inline-block"));\n      Leftformfieldctrlwrp.append(lblA2.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append(lblPriceList.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append(cmbPrice.getControl().css("display", "inline-block"));\n      Leftformfieldctrlwrp.append(lblPriceList.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append(lblWareHouse.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append(cmbWH.getControl().css("display", "inline-block"));\n      Leftformfieldctrlwrp.append(lblWareHouse.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n      bottumDiv = $("<div class=\'vis-frm-bot-btn-wrp\'>");\n      var buttonDiv = $("<div class=\'vis-frm-bot-btn-wrp\'>");\n      buttonDiv.append(btnOk);\n      bottumDiv.append(btnRefresh);\n\n      //Right side div\n      rightSideGridDiv = $("<div id=\'rightSideGridDiv_" + $self.windowNo + "\' class=\'vis-frm-grid-wrap\'>");\n      //rightSideGridDiv.css("width", selectDivWidth);\n\n      gridDiv = $("<div id=\'gridDiv_" + $self.windowNo + "\' class=\'vis-frm-grid-inn\'>");\n      gridDiv.append(tblpMain);\n      rightSideGridDiv.append(gridDiv);\n      rightSideGridDiv.append(buttonDiv);\n\n      //Add to root\n      leftsideDiv.append(bottumDiv);\n      $root.append($busyDiv);\n      $root.append(leftsideDiv).append(rightSideGridDiv);\n    }\n    function dynInit() {\n      modes.push({\n        Key: \'0\',\n        Name: VIS.Msg.getMsg("ModeView", false, false)\n      });\n      vAttributeGrid();\n      getAttributeOfClient();\n    }\n    function getAttributeOfClient() {\n      $.ajax({\n        url: VIS.Application.contextUrl + "Common/GetDataQueryAttribute",\n        type: "GET",\n        dataType: "json",\n        async: false,\n        success: function (data) {\n          if (data.lst) {\n            _attributes = data.lst;\n            for (var i = 0; i < _attributes.length; i++) {\n              fillDirectComboBox(cmbA1.getControl(), _attributes[i].GetKeyNamePair, i);\n              fillDirectComboBox(cmbA2.getControl(), _attributes[i].GetKeyNamePair, i);\n            }\n          }\n          if (data.priceList) {\n            fillComboBox(cmbPrice.getControl(), data.priceList);\n          }\n          if (data.whList) {\n            fillComboBox(cmbWH.getControl(), data.whList);\n          }\n          setBusy(false);\n        }\n      });\n    }\n    function vAttributeGrid() {\n      fillComboBox(cmbMode.getControl(), modes);\n    }\n    function fillComboBox(cntrl, vo) {\n      for (var i = 0; i < vo.length; i++) {\n        cntrl.append(" <option selected value=\'" + vo[i].Key + "\' >" + vo[i].Name + "</option>");\n      }\n      cntrl.prop(\'selectedIndex\', 0);\n    }\n    function fillDirectComboBox(cntrl, vo, count) {\n      if (count == 0) {\n        cntrl.append(" <option selected value=\'0\' ></option>");\n      }\n      cntrl.append(" <option selected value=\'" + vo.Key + "\' >" + vo.Name + "</option>");\n      cntrl.prop(\'selectedIndex\', 0);\n    }\n    function createPO() {}\n    function updatePrices() {}\n    function createRowsColumn(rows, cols) {\n      cols = cols < 2 ? 2 : cols;\n      rows += 1;\n      for (row = 0; row < rows; row++) {\n        var tr = $("<tr id=\'row_" + row + "\' >");\n        tblpMain.append(tr);\n        for (col = 0; col < cols; col++) {\n          var td = $("<td id=\'col_" + col + "\'  style=\'padding: 4px 15px 2px;\'>");\n          tr.append(td);\n        }\n      }\n      var lbl = new VIS.Controls.VLabel();\n      lbl.getControl().text("Mode");\n      var rowObj = tblpMain.find("#row_0");\n      if (cols == 2) {\n        var colObj = rowObj.find("#col_" + (cols - 1));\n        colObj.append(cmbMode.getControl().css("display", "inline-block").css("width", "236px").css("height", "30px"));\n        colObj = rowObj.find("#col_" + (cols - 2));\n        colObj.append(lbl.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n      } else {\n        var colObj = rowObj.find("#col_2");\n        colObj.append(cmbMode.getControl().css("display", "inline-block").css("width", "236px").css("height", "30px"));\n        colObj = rowObj.find("#col_1");\n        colObj.append(lbl.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n      }\n    }\n    function getGridElement(xValue, yValue, col, row) {\n      var attributeId = 0;\n      var attributeValueId = 0;\n      var attributeyId = 0;\n      var attributeValueyId = 0;\n      if (xValue) {\n        attributeId = xValue.GetM_Attribute_ID;\n        attributeValueId = xValue.GetM_AttributeValue_ID;\n      }\n      if (yValue) {\n        attributeyId = yValue.GetM_Attribute_ID;\n        attributeValueyId = yValue.GetM_AttributeValue_ID;\n      }\n      $.ajax({\n        url: VIS.Application.contextUrl + "Common/GetGridElement",\n        dataType: "json",\n        data: {\n          xM_Attribute_ID: attributeId,\n          xM_AttributeValue_ID: attributeValueId,\n          yM_Attribute_ID: attributeyId,\n          yM_AttributeValue_ID: attributeValueyId,\n          M_PriceList_Version_ID: _M_PriceList_Version_ID,\n          M_Warehouse_ID: _M_Warehouse_ID,\n          windowNo: $self.windowNo\n        },\n        async: false,\n        success: function (data) {\n          //alert(data.stValue);\n          setBusy(false);\n        }\n      });\n    }\n    function createGrid() {\n      if (cmbA1 == null || _setting) return;\n      var indexAttr1 = cmbA1.getControl()[0].selectedIndex;\n      var indexAttr2 = cmbA2.getControl()[0].selectedIndex;\n      if (indexAttr1 == indexAttr2) {\n        $self.log.warning("Same Attribute Selected");\n        return;\n      }\n      _setting = true;\n      _M_PriceList_Version_ID = cmbPrice.getControl().find(\'option:selected\').val();\n      _M_Warehouse_ID = cmbWH.getControl().find(\'option:selected\').val();\n\n      //\tx dimension\n      var cols = 2;\n      var xValues = [];\n      var yValues = [];\n      var xValue = null;\n      var yValue = null;\n      if (indexAttr1 > 0) {\n        xValues = _attributes[indexAttr1 - 1].GetMAttributeValues;\n      }\n      if (xValues != null) {\n        cols = xValues.length + 1;\n        ;\n        $self.log.info("X - " + _attributes[indexAttr1 - 1].GetName + " #" + xValues.length);\n      }\n\n      //\ty dimension\n      var rows = 2;\n      if (indexAttr2 > 0) {\n        yValues = _attributes[indexAttr2 - 1].GetMAttributeValues;\n      }\n      if (yValues.length > 0) {\n        rows = yValues.length + 1;\n        $self.log.info("Y - " + _attributes[indexAttr2 - 1].GetName + " #" + yValues.length);\n      }\n      $self.log.info("Rows=" + rows + " - Cols=" + cols);\n      createRowsColumn(rows, cols);\n      var rowObj = null;\n      var colObj = null;\n      for (row = 0; row < rows; row++) {\n        for (col = 0; col < cols; col++) {\n          if (xValues != null) {\n            xValue = xValues[col];\n          }\n          if (yValues != null) {\n            yValue = yValues[row];\n          }\n          if (row == 0 && col == 0) {\n            var lbl1 = new VIS.Controls.VLabel();\n            var lbl2 = new VIS.Controls.VLabel();\n            if (xValues != null) {\n              lbl1.getControl().text(_attributes[indexAttr1 - 1].GetName);\n              rowObj = tblpMain.find("#row_1");\n              colObj = rowObj.find("#col_" + col);\n              colObj.append(lbl1.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n            }\n            if (yValues.length > 0) {\n              lbl2.getControl().text(_attributes[indexAttr2 - 1].GetName);\n              rowObj = tblpMain.find("#row_1");\n              colObj = rowObj.find("#col_" + col);\n              colObj.append(lbl2.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n            }\n            if (xValue != null) {\n              lblA1 = new VIS.Controls.VLabel();\n              lblA1.getControl().text(xValue.Name);\n              rowObj = tblpMain.find("#row_1");\n              colObj = rowObj.find("#col_" + (col + 1));\n              colObj.append(lblA1.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n            }\n          } else if (row == 0)\n            //\tcolumn labels\n            {\n              if (xValue != null) {\n                lblA1 = new VIS.Controls.VLabel();\n                lblA1.getControl().text(xValue.Name);\n                rowObj = tblpMain.find("#row_1");\n                colObj = rowObj.find("#col_" + (col + 1));\n                colObj.append(lblA1.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n              } else {\n                // var lbl = new VIS.Controls.VLabel();\n                // tdp.append(lbl.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n              }\n            } else if (col == 0)\n            //\trow labels\n            {\n              if (yValue != null) {\n                lblA1 = new VIS.Controls.VLabel();\n                lblA1.getControl().text(yValue.Name);\n                rowObj = tblpMain.find("#row_" + row + 1);\n                colObj = rowObj.find("#col_" + col);\n                colObj.append(lblA1.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n              } else {\n                //var lbl = new VIS.Controls.VLabel();\n                //tdp.append(lbl.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n              }\n            } else {\n            getGridElement(xValue, yValue, col, row + 1);\n          }\n        }\n      }\n      _setting = false;\n    }\n    function gridOK() {\n      var mode = cmbMode.getControl().find(\'option:selected\').val();\n      //\tCreate PO\n      if (mode == MODE_PO) {\n        // CreatePO();\n        // cmbMode.getControl().prop("SelectedIndex", MODE_VIEW);\n        return;\n      }\n      //\tUpdate Prices\n      else if (mode == MODE_PRICE) {\n        // UpdatePrices();\n        // cmbMode.getControl().prop("SelectedIndex", MODE_VIEW);\n        return;\n      } else if (mode == MODE_VIEW) {\n        ;\n      }\n    }\n    setBusy = function (isBusy) {\n      $busyDiv.css("display", isBusy ? \'block\' : \'none\');\n    };\n    this.Initialize = function () {\n      initializeComponent();\n      btnToggel = $root.find("#btnSpace_" + $self.windowNo);\n\n      //Events\n      if (btnOk != null) btnOk.on(VIS.Events.onTouchStartOrClick, function () {\n        gridOK();\n        $self.dispose();\n      });\n      if (btnRefresh != null) btnRefresh.on(VIS.Events.onTouchStartOrClick, function () {\n        setBusy(true);\n        tblpMain.empty();\n        createGrid();\n        setBusy(false);\n      });\n      if (btnToggel != null) var borderspace = 0;\n      btnToggel.on(VIS.Events.onTouchStartOrClick, function () {\n        if (toggleside) {\n          btnRefresh.show();\n          lblA1.getControl().show();\n          lblA2.getControl().show();\n          if (VIS.Application.isRTL) {\n            borderspace = 180;\n          } else {\n            borderspace = 0;\n          }\n          btnToggel.animate({\n            borderSpacing: borderspace\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = false;\n          // btnToggel.animate({ width: sideDivWidth }, "slow");\n          rightSideGridDiv.animate({\n            width: selectDivWidth\n          }, "slow");\n          paradiv.css("display", "block");\n          topLeftDiv.animate({\n            width: sideDivWidth\n          }, "slow");\n          leftsideDiv.animate({\n            width: sideDivWidth\n          }, "slow");\n          //leftsideDiv.animate({ width: sideDivWidth }, "slow", null, function () {\n          //    dGrid.resize();\n          //});\n        } else {\n          if (VIS.Application.isRTL) {\n            borderspace = 0;\n          } else {\n            borderspace = 180;\n          }\n          btnRefresh.hide();\n          lblA1.getControl().hide();\n          lblA2.getControl().hide();\n          btnToggel.animate({\n            borderSpacing: borderspace\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = true;\n          // btnToggel.animate({ width: minSideWidth }, "slow");\n          rightSideGridDiv.animate({\n            width: selectDivFullWidth\n          }, "slow");\n          leftsideDiv.animate({\n            width: minSideWidth\n          }, "slow");\n          topLeftDiv.animate({\n            width: minSideWidth\n          }, "slow");\n          paradiv.css("display", "none");\n          //rightSideGridDiv.animate({ width: selectDivFullWidth }, "slow", null, function () {\n          //    dGrid.resize();\n          //});\n        }\n      });\n    };\n    this.display = function () {\n      setTimeout(dynInit(), 5);\n    };\n\n    //Privilized function\n    this.getRoot = function () {\n      return $root;\n    };\n    this.disposeComponent = function () {\n      if (btnOk) btnOk.off(VIS.Events.onTouchStartOrClick);\n      if (btnRefresh) btnRefresh.off(VIS.Events.onTouchStartOrClick);\n      if (btnToggel) btnToggel.off(VIS.Events.onTouchStartOrClick);\n      $self.windowNo = null;\n      toggle = null;\n      toggleGen = null;\n      toggleside = null;\n      lblA1 = null;\n      lblA2 = null;\n      $self.log = null;\n      $root = null;\n      $busyDiv = null;\n      leftsideDiv = null;\n      rightSideGridDiv = null;\n      topLeftDiv = null;\n      paradiv = null;\n      gridDiv = null;\n      bottumDiv = null;\n      btnOk = null;\n      btnRefresh = null;\n      btnToggel = null;\n      sideDivWidth = null;\n      minSideWidth = null;\n      selectDivWidth = null;\n      selectDivFullWidth = null;\n      selectDivToggelWidth = null;\n      sideDivHeight = null;\n      $self = null;\n      this.getRoot = null;\n      this.disposeComponent = null;\n    };\n  }\n  ;\n\n  //Must Implement with same parameter\n  VAttributeGrid.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.Initialize();\n    this.frame.getContentGrid().append(this.getRoot());\n    this.display();\n  };\n\n  //Must implement dispose\n  VAttributeGrid.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VIS.Apps.AForms.VAttributeGrid = VAttributeGrid;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vattributegrid.js?\n}')},"./Areas/VAS/Scripts/app/forms/vcharge.js":()=>{eval('{;\n(function (VIS, $) {\n  VIS.Apps.AForms = VIS.Apps.AForms || {};\n  function VCharge() {\n    this.frame;\n    this.windowNo;\n    var $self = this;\n    var arrListColumns = [];\n    var dGrid = null;\n    // Create Log\n    this.log = VIS.Logging.VLogger.getVLogger("VCharge");\n    var toggle = false;\n    var toggleGen = false;\n    var toggleside = false;\n    var lblSearchKey = new VIS.Controls.VLabel(VIS.Msg.getMsg("SearchKey", false, false), "SearchKey", false, true);\n    var lblName = new VIS.Controls.VLabel(VIS.Msg.getMsg("Name", false, false), "Name", false, true);\n    var txtSearchKey = new VIS.Controls.VTextBox("SearchKey", true, false, true, 50, 100, null, null, false);\n    var txtName = new VIS.Controls.VTextBox("Name", false, false, true, 50, 100, null, null, false);\n    var chkExpense = new VIS.Controls.VCheckBox("Expense", false, false, true, VIS.Msg.getMsg("Expense", false, false), null);\n    var chkSelectAll = new VIS.Controls.VCheckBox("SelectAll", false, false, true, VIS.Msg.getMsg("SelectAll", false, false), null);\n    var btnCreateCharge = null;\n    var btnAccount = null;\n    var lblStatusInfo = new VIS.Controls.VLabel();\n    this.log = VIS.Logging.VLogger.getVLogger("VCharge");\n    var $root = $("<div style=\'width: 100%; height: 100%; background-color: white; \'>");\n    var $busyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n    var leftsideDiv = null;\n    var rightSideGridDiv = null;\n    var topLeftDiv = null;\n    var paradiv = null;\n    var gridDiv = null;\n    var bottumDiv = null;\n    var btnCancel = null;\n    var btnRefresh = null;\n    var btnToggel = null;\n    var searchValueText = "";\n    var searchNameText = "";\n    var searchChkProp = true;\n    var sideDivWidth = 260;\n    var minSideWidth = 50;\n    var selectDivWidth = $(window).width() - (sideDivWidth + 20 + 5);\n    var selectDivFullWidth = $(window).width() - (20 + minSideWidth);\n    var selectDivToggelWidth = selectDivWidth + sideDivWidth + 5;\n    var sideDivHeight = $(window).height() - 210;\n\n    /** Account Element     */\n    var m_C_Element_ID = 0;\n    /** AccountSchema       */\n    var m_C_AcctSchema_ID = 0;\n    /** Default Charge Tax Category */\n    var m_C_TaxCategory_ID = 0;\n    var m_AD_Client_ID = 0;\n    var m_AD_Org_ID = 0;\n    function initializeComponent() {\n      setBusy(true);\n      chkExpense.setValue(true);\n      var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/arrow-left.png";\n      //left side div\n      leftsideDiv = $("<div id=\'sideDiv_" + $self.windowNo + "\' class=\'vis-archive-left-sidebar vis-leftsidebarouterwrap\'>"); //" + sideDivHeight + "\n\n      //topLeftSide div\n      topLeftDiv = $("<div id=\'btnSpaceDiv_" + $self.windowNo + "\' class=\'vis-archive-l-s-head\'>" + "<button id=\'btnSpace_" + $self.windowNo + "\' class=\'vis-archive-sb-t-button\'>" + "<i class=\'vis vis-arrow-left\'></i></button></div>" + "</div>");\n\n      //left side parameter div\n      paradiv = $("<div class=\'vis-archive-l-s-content\' id=\'parameterDiv_" + $self.windowNo + "\'>");\n      leftsideDiv.append(topLeftDiv).append(paradiv);\n\n      //Refresh\n      src = VIS.Application.contextUrl + "Areas/VIS/Images/base/Refresh24.png";\n      btnRefresh = $("<button id=\'btnRefresh_" + $self.windowNo + "\' style=\'margin-left: 12px;\' class=\'VIS_Pref_btn-2 vis-frm-button vis-pull-left\'><i class=\'vis vis-refresh\'></i></button>");\n      //JID_0134: Change the button name as "Create New" available at left section.\n      //Create charge\n      btnCreateCharge = $("<input id=\'btnCreateCharge_" + $self.windowNo + "\' class=\'VIS_Pref_btn-2 vis-frm-button\' type=\'button\' value=\'" + VIS.Msg.getMsg("CreateNew", false, false) + "\'>");\n      //Cancel button\n      btnCancel = $("<input id=\'btnCancel_" + $self.windowNo + "\' class=\'VIS_Pref_btn-2 vis-frm-button\' type=\'button\' value=\'" + VIS.Msg.getMsg("Cancel", false, false) + "\'>");\n      //JID_0134: Change the button name as "Create From Account" at right section.\n      //Create charge from Account\n      btnAccount = $("<input id=\'btnAccount_" + $self.windowNo + "\' class=\'VIS_Pref_btn-2 vis-frm-button\' type=\'button\' value=\'" + VIS.Msg.getMsg("ChargeFromAccount", false, false) + "\'>");\n      var tble = $("<table style=\'width: 100%;\'>");\n      var tr = $("<tr>");\n      var td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      paradiv.append(tble);\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append(lblSearchKey.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append(txtSearchKey.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      Leftformfieldctrlwrp.append(lblSearchKey.getControl().addClass("VIS_Pref_Label_Font"));\n\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append(lblName.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append(txtName.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      Leftformfieldctrlwrp.append(lblName.getControl().addClass("VIS_Pref_Label_Font"));\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      tble.append(tr);\n      tr.append(td);\n      td.append(chkExpense.getControl());\n      bottumDiv = $("<div class=\'vis-frm-bot-btn-wrp\'>");\n      var buttonDiv = $("<div class=\'vis-frm-bttsec\'>");\n      buttonDiv.append(btnAccount).append(btnCancel);\n      bottumDiv.append(btnCreateCharge).append(btnRefresh);\n\n      //Right side div\n      rightSideGridDiv = $("<div id=\'rightSideGridDiv_" + $self.windowNo + "\' class=\'vis-frm-grid-wrap\'>");\n      //rightSideGridDiv.css("width", selectDivWidth);\n\n      gridDiv = $("<div id=\'gridDiv_" + $self.windowNo + "\' class=\'vis-frm-grid-inn\'>");\n      rightSideGridDiv.append(gridDiv);\n      rightSideGridDiv.append(buttonDiv);\n      //Add to root\n      leftsideDiv.append(bottumDiv);\n      $root.append($busyDiv);\n      $root.append(leftsideDiv).append(rightSideGridDiv);\n    }\n    function loadGrid(data) {\n      if (dGrid != null) {\n        dGrid.destroy();\n        dGrid = null;\n      }\n      if (arrListColumns.length == 0) {\n        arrListColumns.push({\n          field: "C_ElementValue_ID",\n          caption: VIS.Msg.getMsg("C_ELEMENTVALUE_ID"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: true\n        });\n        // arrListColumns.push({ field: "Select1", caption: VIS.Msg.getMsg("Select"), sortable: true, size: \'25%\', min: 150, hidden: false, editable: { type: \'checkbox\' } });\n        arrListColumns.push({\n          field: "Value",\n          caption: VIS.Msg.getMsg("SearchKey"),\n          sortable: true,\n          size: \'25%\',\n          min: 150,\n          hidden: false\n        });\n        arrListColumns.push({\n          field: "Name",\n          caption: VIS.Msg.getMsg("Name"),\n          sortable: true,\n          size: \'25%\',\n          min: 150,\n          hidden: false\n        });\n        arrListColumns.push({\n          field: "Expense",\n          caption: VIS.Msg.getMsg("Expense"),\n          sortable: true,\n          size: \'25%\',\n          min: 150,\n          hidden: false,\n          editable: {\n            type: \'checkbox\'\n          }\n        });\n      }\n      w2utils.encodeTags(data);\n      dGrid = $(gridDiv).w2grid({\n        name: "gridAccountElement" + $self.windowNo,\n        recordHeight: 40,\n        show: {\n          selectColumn: true\n        },\n        multiSelect: true,\n        columns: arrListColumns,\n        records: data\n      });\n    }\n\n    // Get data from c_elementvalue table\n    function dynInit() {\n      var data = [];\n      m_C_AcctSchema_ID = VIS.Env.getCtx().getContextAsInt("$C_AcctSchema_ID");\n      m_AD_Client_ID = VIS.Env.getCtx().getAD_Client_ID();\n      m_AD_Org_ID = VIS.Env.getCtx().getAD_Org_ID();\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCharge/VChargeLodGrideData",\n        dataType: "json",\n        //async: false,\n        data: {\n          mcAcctSchemaID: m_C_AcctSchema_ID,\n          mADClientId: m_AD_Client_ID\n          //valueSearch: searchValueText,\n          //nameSearch: searchNameText,\n          //chkExpenses: searchChkProp\n        },\n        success: function (results) {\n          if (results.result.meID == 0) {\n            return;\n          }\n          if (results.result && results.result.VchargeMCElemTaxCatID) {\n            var MCElemTaxCatID = results.result.VchargeMCElemTaxCatID;\n            m_C_Element_ID = results.result.VchargeMCElemTaxCatID[0]["mCElementID"];\n            if (m_C_Element_ID == 0) {\n              return;\n            }\n            m_C_TaxCategory_ID = results.result.VchargeMCElemTaxCatID[0]["mCTaxCategoryID"];\n          }\n          if (results.result && results.result.VchargeCElementValue) {\n            var vals = results.result.VchargeCElementValue;\n            var count = 1;\n            for (var i = 0; i < vals.length; i++) {\n              var line = {};\n              line[\'C_ElementValue_ID\'] = vals[i]["C_ElementValue_ID"];\n              line[\'Value\'] = vals[i]["Value"];\n              line[\'Name\'] = vals[i]["Name"];\n              line[\'Expense\'] = vals[i]["Expense"] == "false" ? false : true;\n              line[\'recid\'] = count;\n              count++;\n              data.push(line);\n            }\n            loadGrid(data);\n            setBusy(false);\n          }\n        },\n        error: function (e) {\n          setBusy(false);\n          $self.log.info(e);\n        }\n      });\n\n      //loadGrid(data);\n      //setBusy(false);\n      //return data;\n    }\n\n    //function dynInit() {\n    //    var data = [];\n    //    m_C_AcctSchema_ID = VIS.Env.getCtx().getContextAsInt("$C_AcctSchema_ID");\n    //    m_AD_Client_ID = VIS.Env.getCtx().getAD_Client_ID();\n    //    m_AD_Org_ID = VIS.Env.getCtx().getAD_Org_ID();\n\n    //    var sql = "SELECT C_Element_ID FROM C_AcctSchema_Element "\n    //                   + "WHERE ElementType=\'AC\' AND C_AcctSchema_ID= " + m_C_AcctSchema_ID;\n    //    m_C_Element_ID = VIS.DB.executeScalar(sql, null, null);\n    //    if (m_C_Element_ID == 0)\n    //        return;\n    //    sql = "SELECT C_TaxCategory_ID FROM C_TaxCategory WHERE IsDefault=\'Y\' AND AD_Client_ID=" + m_AD_Client_ID;\n    //    m_C_TaxCategory_ID = VIS.DB.executeScalar(sql, null, null);\n\n    //    //  Create SQL\n    //    sql = "SELECT \'false\' as Select1,C_ElementValue_ID,Value, Name, case when AccountType = \'E\' THEN \'true\' else \'false\' end as Expense"\n    //           + " FROM C_ElementValue "\n    //           + " WHERE AccountType IN (\'R\',\'E\')"\n    //           + " AND IsSummary=\'N\'"\n    //           + " AND C_Element_ID= " + m_C_Element_ID\n    //           + " ORDER BY 2 desc";\n    //    try {\n    //        var dr = VIS.DB.executeReader(sql.toString(), null, null);\n    //        var count = 1;\n    //        while (dr.read()) {\n    //            var line = {};\n    //            // line[\'Select1\'] = false;\n    //            line[\'C_ElementValue_ID\'] = dr.getString(1);\n    //            line[\'Value\'] = dr.getString(2);\n    //            line[\'Name\'] = dr.getString(3);\n    //            line[\'Expense\'] = dr.getString(4) == "false" ? false : true;\n    //            line[\'recid\'] = count;\n    //            count++;\n    //            data.push(line);\n    //        }\n    //    }\n    //    catch (e) {\n    //    }\n    //    loadGrid(data);\n    //    setBusy(false);\n    //    return data;\n    //}\n\n    setBusy = function (isBusy) {\n      $busyDiv.css("display", isBusy ? \'block\' : \'none\');\n    };\n    function createCharge(m_C_AcctSchema_ID, m_C_TaxCategory_ID, name, C_ElementValue_ID, expense) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCharge/CreateCharge",\n        dataType: "json",\n        //async: false,\n        data: {\n          m_C_AcctSchema_ID: m_C_AcctSchema_ID,\n          m_C_TaxCategory_ID: m_C_TaxCategory_ID,\n          name: name,\n          C_ElementValue_ID: C_ElementValue_ID,\n          expense: expense\n        },\n        success: function (data) {\n          if (data.ID == 0) {\n            VIS.ADialog.info("ChargeNotCreated", true, null);\n            setBusy(false);\n            return;\n          } else {\n            // JID_0134:System should refresh the form once charge is created and clear the value in Value, Name and Expense if charge is created succussfully.\n            txtSearchKey.ctrl.val("");\n            txtName.ctrl.val("");\n            var C_Charge_ID = data.ID;\n            VIS.ADialog.info("ChargeCreated", true, null);\n            dynInit();\n          }\n        }\n      });\n    }\n    function createChargeByList(m_C_AcctSchema_ID, m_C_TaxCategory_ID, namelst, C_ElementValue_IDlst, expenselst) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCharge/CreateChargeByList",\n        type: "POST",\n        dataType: "json",\n        contentType: "application/json; charset=utf-8",\n        //async: false,\n        data: JSON.stringify({\n          \'AcctSchemaID\': m_C_AcctSchema_ID,\n          \'TaxCategoryID\': m_C_TaxCategory_ID,\n          \'namepara\': namelst,\n          \'ElementValuID\': C_ElementValue_IDlst,\n          \'expense\': expenselst\n        }),\n        success: function (data) {\n          if (data.listCreatedP) {\n            VIS.ADialog.info("ChargeCreated", true, null);\n          }\n          if (data.listRejectedP) {\n            VIS.ADialog.info("ChargeNotCreated", true, null);\n          }\n          setBusy(false);\n        }\n      });\n    }\n    this.Initialize = function () {\n      initializeComponent();\n      btnToggel = $root.find("#btnSpace_" + $self.windowNo);\n\n      //Events\n\n      if (btnCancel != null) btnCancel.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.dispose();\n      });\n      if (btnRefresh != null) btnRefresh.on(VIS.Events.onTouchStartOrClick, function () {\n        //var getCtrl = $(this).parents().find("#parameterDiv_" + $self.windowNo + "");\n        //searchValueText = getCtrl.find("input").val();\n        //searchNameText = getCtrl.find(\'input[name="Name"]\').val();\n        //searchChkProp = getCtrl.find(\'input[name="Expense"]\').is(":checked");\n\n        // JID_0134:clear the value in Value, Name and Expense if charge is created succussfully.\n        txtSearchKey.ctrl.val("");\n        txtName.ctrl.val("");\n        setBusy(true);\n        dynInit();\n        //setBusy(false);\n      });\n      if (btnToggel != null) btnToggel.on(VIS.Events.onTouchStartOrClick, function () {\n        var borderspace = 0;\n        if (toggleside) {\n          if (VIS.Application.isRTL) {\n            borderspace = 180;\n          } else {\n            borderspace = 0;\n          }\n          btnCreateCharge.show();\n          btnRefresh.show();\n          lblSearchKey.getControl().show();\n          lblName.getControl().show();\n          txtSearchKey.getControl().show();\n          txtName.getControl().show();\n          chkExpense.getControl().show();\n          btnToggel.animate({\n            borderSpacing: borderspace\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = false;\n          // btnToggel.animate({ width: sideDivWidth }, "slow");\n          rightSideGridDiv.animate({\n            width: selectDivWidth\n          }, "slow");\n          paradiv.css("display", "block");\n          //topLeftDiv.animate({ width: sideDivWidth }, "slow");\n          leftsideDiv.animate({\n            width: sideDivWidth\n          }, "slow", null, function () {\n            dGrid.resize();\n          });\n        } else {\n          if (VIS.Application.isRTL) {\n            borderspace = 0;\n          } else {\n            borderspace = 180;\n          }\n          btnCreateCharge.hide();\n          btnRefresh.hide();\n          lblSearchKey.getControl().hide();\n          lblName.getControl().hide();\n          txtSearchKey.getControl().hide();\n          txtName.getControl().hide();\n          chkExpense.getControl().hide();\n          btnToggel.animate({\n            borderSpacing: borderspace\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = true;\n          // btnToggel.animate({ width: minSideWidth }, "slow");\n          //topLeftDiv.animate({ width: minSideWidth }, "slow");\n          leftsideDiv.animate({\n            width: minSideWidth\n          }, "slow");\n          paradiv.css("display", "none");\n          rightSideGridDiv.animate({\n            width: selectDivFullWidth\n          }, "slow", null, function () {\n            dGrid.resize();\n          });\n        }\n      });\n\n      //size chnage \n      this.sizeChanged = function (h, w) {\n        selectDivWidth = w - (sideDivWidth + 1);\n        selectDivFullWidth = w - (minSideWidth + 1);\n        if (toggleside == true) {\n          leftsideDiv.animate({\n            width: minSideWidth\n          }, "slow");\n          rightSideGridDiv.animate({\n            width: selectDivFullWidth\n          }, "slow", null, function () {\n            dGrid.resize();\n          });\n        } else {\n          rightSideGridDiv.animate({\n            width: selectDivWidth\n          }, "slow");\n          leftsideDiv.animate({\n            width: sideDivWidth\n          }, "slow", null, function () {\n            dGrid.resize();\n          });\n        }\n      };\n      if (btnAccount != null) btnAccount.on(VIS.Events.onTouchStartOrClick, function () {\n        setBusy(true);\n        //var eleValue_ID = "";\n        //var eleName = "";\n        //var expense = "";\n        var eleValue_ID = [];\n        var eleName = [];\n        var expense = [];\n        if (!dGrid) {\n          return;\n        }\n        var selectedItems = dGrid.getSelection();\n        if (!selectedItems) {\n          setBusy(false);\n          return;\n        }\n        if (selectedItems.length <= 0) {\n          setBusy(false);\n          return;\n        }\n        var splitValue = selectedItems.toString().split(\',\');\n        //for (var i = 0; i < splitValue.length; i++) {\n        //    eleValue_ID += (dGrid.get(splitValue[i])).C_ElementValue_ID + ",";\n        //    eleName += (dGrid.get(splitValue[i])).Name + ",";\n        //    expense += (dGrid.get(splitValue[i])).Expense + ",";\n        //}\n\n        //if (eleValue_ID.length == 0) {\n        //    return "";\n        //}\n        //eleValue_ID = eleValue_ID.replace(/,\\s*$/, "");\n        //eleName = eleName.replace(/,\\s*$/, "");\n        //expense = expense.replace(/,\\s*$/, "");\n\n        for (var i = 0; i < splitValue.length; i++) {\n          eleValue_ID[i] = dGrid.get(splitValue[i]).C_ElementValue_ID;\n          eleName[i] = dGrid.get(splitValue[i]).Name;\n          expense[i] = dGrid.get(splitValue[i]).Expense;\n        }\n        if (eleValue_ID.length == 0) {\n          setBusy(false);\n          return "";\n        }\n        createChargeByList(m_C_AcctSchema_ID, m_C_TaxCategory_ID, eleName, eleValue_ID, expense);\n      });\n      if (btnCreateCharge != null) btnCreateCharge.on(VIS.Events.onTouchStartOrClick, function () {\n        setBusy(true);\n        var expense = chkExpense.getValue();\n        var value = txtSearchKey.getValue().trim();\n        if (value.length == 0) {\n          VIS.ADialog.warn("SearchKeyMandatory", true, null);\n          setBusy(false);\n          return;\n        }\n        var name = txtName.getValue().trim();\n        if (name.length == 0) {\n          VIS.ADialog.warn("NameMandatory", true, null);\n          setBusy(false);\n          return;\n        }\n\n        //  Create Element\n        $.ajax({\n          url: VIS.Application.contextUrl + "VCharge/CreateElementValue",\n          dataType: "json",\n          //async: false,\n          data: {\n            m_AD_Org_ID: m_AD_Org_ID,\n            value: value,\n            name: name,\n            expense: expense,\n            m_C_Element_ID: m_C_Element_ID\n          },\n          success: function (data) {\n            if (data.ID == 0) {\n              $self.log.saveError("ChargeNotCreated", data.Msg);\n              VIS.ADialog.warn(data.Msg, true, null);\n              setBusy(false);\n              return;\n            } else {\n              createCharge(m_C_AcctSchema_ID, m_C_TaxCategory_ID, name, data.ID, expense);\n            }\n          }\n        });\n      });\n    };\n    this.display = function () {\n      setTimeout(dynInit(), 5);\n    };\n\n    //Privilized function\n    this.getRoot = function () {\n      return $root;\n    };\n    this.refreshUI = function () {\n      /*Refresh Grid on Focus*/\n      if (dGrid) {\n        dGrid.resize();\n      }\n    };\n    this.disposeComponent = function () {\n      if (btnCancel) btnCancel.off(VIS.Events.onTouchStartOrClick);\n      if (btnRefresh) btnRefresh.off(VIS.Events.onTouchStartOrClick);\n      if (btnToggel) btnToggel.off(VIS.Events.onTouchStartOrClick);\n      if (btnAccount) btnAccount.off(VIS.Events.onTouchStartOrClick);\n      $self.windowNo = null;\n      arrListColumns = null;\n      dGrid = null;\n      toggle = null;\n      toggleGen = null;\n      toggleside = null;\n      lblSearchKey = null;\n      lblName = null;\n      txtSearchKey = null;\n      txtName = null;\n      chkExpense = null;\n      chkSelectAll = null;\n      btnCreateCharg = null;\n      btnAccount = null;\n      lblStatusInfo = null;\n      $self.log = null;\n      $root = null;\n      $busyDiv = null;\n      leftsideDiv = null;\n      rightSideGridDiv = null;\n      topLeftDiv = null;\n      paradiv = null;\n      gridDiv = null;\n      bottumDiv = null;\n      btnCancel = null;\n      btnRefresh = null;\n      btnToggel = null;\n      sideDivWidth = null;\n      minSideWidth = null;\n      selectDivWidth = null;\n      selectDivFullWidth = null;\n      selectDivToggelWidth = null;\n      sideDivHeight = null;\n      m_C_Element_ID = null;\n      m_C_AcctSchema_ID = null;\n      m_C_TaxCategory_ID = null;\n      m_AD_Client_ID = null;\n      m_AD_Org_ID = null;\n      $self = null;\n      this.getRoot = null;\n      this.disposeComponent = null;\n    };\n  }\n  ;\n\n  //Must Implement with same parameter\n  VCharge.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.Initialize();\n    this.frame.getContentGrid().append(this.getRoot());\n    this.display();\n  };\n  VCharge.prototype.refresh = function () {\n    this.refreshUI();\n  };\n\n  //Must implement dispose\n  VCharge.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VIS.Apps.AForms.VCharge = VCharge;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vcharge.js?\n}')},"./Areas/VAS/Scripts/app/forms/vcreateformprovisionalinvoice.js":()=>{eval('{;\n(function (VIS, $) {\n  //Provisonal Invoice form declaration\n  function VCreateFormProvisionalInvoice(tab) {\n    var baseObj = this.$super;\n    baseObj.constructor(tab);\n    var selfChild = this;\n    dynInit();\n    baseObj.jbInit();\n    baseObj.initOK = true;\n    var windowNo = tab.getWindowNo();\n\n    // create Log\n    this.log = VIS.Logging.VLogger.getVLogger("VCreateFormProvisionalInvoice");\n\n    /** Intialize Create Line form for Provisonal Invoice */\n    function dynInit() {\n      //DynInit\n      baseObj.title = VIS.Msg.getMsg("ProvisionalInvoice") + " .. " + VIS.Msg.getMsg("CreateFrom");\n      baseObj.relatedToOrg = null;\n      baseObj.fromInvoice = false;\n      baseObj.ProvisionalInvoice = true;\n      if (baseObj.lblInvoice != null) baseObj.lblInvoice.getControl().css(\'display\', \'none\');\n      if (baseObj.cmbInvoice != null) baseObj.cmbInvoice.getControl().css(\'display\', \'none\');\n      if (baseObj.lblLocator != null) baseObj.lblLocator.getControl().css(\'display\', \'none\');\n      if (baseObj.locatorField != null) baseObj.locatorField.getControl().css(\'display\', \'none\');\n      baseObj.deliveryDate = new VIS.Controls.VDate("DeliveryDate", false, false, true, VIS.DisplayType.Date, "DeliveryDate");\n      var lookupProd = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), baseObj.windowNo, 2221, VIS.DisplayType.Search);\n      baseObj.vProduct = new VIS.Controls.VTextBoxButton("M_Product_ID", true, false, true, VIS.DisplayType.Search, lookupProd);\n      var C_BPartner_ID = baseObj.initBPartnerForProvisional();\n      baseObj.vBPartner.setReadOnly(true);\n      initBPDetails(C_BPartner_ID);\n\n      // load grid structure\n      selfChild.getTableFieldVOs();\n      return true;\n    }\n\n    /* Intialize Shipment/Receipt Detail */\n    function initBPDetails(C_BPartner_ID) {\n      //baseObj.cmbShipment.getControl().html("");\n      getShipments(VIS.Env.getCtx(), C_BPartner_ID);\n    }\n\n    /* Load Shipment/Receipt Combo data */\n    function getShipments(ctx, C_BPartner_ID) {\n      //var pairs = [];\n\n      //var display = ("s.DocumentNo||\' - \'||")\n      //    .concat(VIS.DB.to_char("s.MovementDate", VIS.DisplayType.Date, VIS.Env.getAD_Language(VIS.Env.getCtx())));\n\n      var _isdrop = "Y".equals(VIS.Env.getCtx().getWindowContext(selfChild.windowNo, "IsDropShip"));\n      var _isSoTrx = "Y".equals(VIS.Env.getCtx().getWindowContext(selfChild.windowNo, "IsSOTrx"));\n\n      //VA230:Get IsReturnTrx based on document type on provisional invoice\n      var dt = VIS.dataContext.getJSONRecord("MDocType/GetDocType", VIS.Env.getCtx().getContextAsInt(selfChild.windowNo, "C_DocType_ID").toString());\n      var isReturnTrx = VIS.Utility.Util.getValueOfBoolean(dt["IsReturnTrx"]);\n      var sql = " M_InOut_ID IN (SELECT s.M_InOut_ID FROM M_InOut s WHERE s.C_BPartner_ID = " + C_BPartner_ID + " AND s.IsSOTrx = \'" + (_isSoTrx ? "Y" : "N") + "\' AND s.DocStatus IN(\'CL\', \'CO\') AND s.IsDropShip=\'" + (_isdrop ? "Y" : "N") + "\'";\n      if (isReturnTrx != null) {\n        sql += " AND S.IsReturnTrx=\'" + (isReturnTrx == true ? "Y" : "N") + "\'";\n      }\n      sql += " AND s.M_InOut_ID IN (SELECT t.M_InOut_ID FROM (SELECT sl.M_InOut_ID, sl.M_InOutLine_ID, sl.MovementQty, " + " (SELECT SUM(NVL(il.QtyInvoiced, 0)) FROM C_InvoiceLine il INNER JOIN C_Invoice I ON I.C_INVOICE_ID = il.C_INVOICE_ID" + " WHERE i.DocStatus NOT IN (\'VO\', \'RE\') AND sl.M_InOutLine_ID = il.M_InOutLine_ID) AS QtyInvoiced" + " FROM M_InOutLine sl) t" + " GROUP BY t.M_InOut_ID, t.M_InOutLine_ID, t.MovementQty HAVING t.MovementQty > SUM(NVL(t.QtyInvoiced, 0))))";\n      var lookupShipment = VIS.MLookupFactory.get(VIS.Env.getCtx(), baseObj.windowNo, 0, VIS.DisplayType.Search, "M_InOut_ID", 0, false, sql);\n      baseObj.cmbShipment = new VIS.Controls.VTextBoxButton("M_InOut_ID", true, false, true, VIS.DisplayType.Search, lookupShipment);\n\n      //$.ajax({\n      //    url: VIS.Application.contextUrl + "VCreateFrom/GetShipmentsData",\n      //    type: \'POST\',\n      //    //async: false,\n      //    data: {\n      //        displays: display, CBPartnerIDs: C_BPartner_ID, IsDrop: _isdrop, IsSOTrx: _isSoTrx, isReturnTrxs: isReturnTrx, isProvisionlInvoices: true\n      //    },\n      //    success: function (data) {\n      //        var ress = JSON.parse(data);\n      //        if (ress && ress.length > 0) {\n      //            var key, value;\n      //            for (var i = 0; i < ress.length; i++) {\n      //                key = VIS.Utility.Util.getValueOfInt(ress[i]["key"]);\n      //                value = VIS.Utility.encodeText(ress[i]["value"]);\n      //                //pairs.push({ ID: key, value: value });\n\n      //                if (i == 0) {\n      //                    baseObj.cmbShipment.getControl().append(" <option value=0> </option>");\n      //                }\n      //                baseObj.cmbShipment.getControl().append(" <option value=" + key + ">" + value + "</option>");\n      //            }\n      //            baseObj.cmbShipment.getControl().prop(\'selectedIndex\', 0);\n      //        }\n      //    },\n      //    error: function (e) {\n      //        selfChild.log.info(e);\n      //    },\n      //});\n    }\n\n    /* Dispose Components */\n    this.disposeComponent = function () {\n      baseObj = null;\n      selfChild = null;\n      this.disposeComponent = null;\n    };\n  }\n  ;\n  VIS.Utility.inheritPrototype(VCreateFormProvisionalInvoice, VIS.VCreateFrom); //Inherit from VCreateFrom\n\n  /* Create Grid Columsn for Proviosnal Invoice */\n  VCreateFormProvisionalInvoice.prototype.getTableFieldVOs = function () {\n    var baseObj = this.$super;\n    var self = this;\n    baseObj.arrListColumns = [];\n    baseObj.arrListColumns.push({\n      field: "Quantity",\n      caption: VIS.Msg.getMsg("QtyPending"),\n      sortable: false,\n      size: \'150px\',\n      hidden: false,\n      render: function (record, index, col_index) {\n        var val = record["Quantity"];\n        return parseFloat(val).toLocaleString(undefined, {\n          minimumFractionDigits: 4\n        });\n      }\n    });\n    baseObj.arrListColumns.push({\n      field: "QuantityPending",\n      caption: VIS.Msg.getMsg("Quantity"),\n      sortable: false,\n      size: \'150px\',\n      render: \'number:4\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "QuantityEntered",\n      caption: VIS.Msg.getMsg("QtyEntered"),\n      sortable: false,\n      size: \'150px\',\n      hidden: false,\n      render: function (record, index, col_index) {\n        var val = record["QuantityEntered"];\n        val = baseObj.checkcommaordot(event, val);\n        return parseFloat(val).toLocaleString(undefined, {\n          minimumFractionDigits: 4\n        }); /* editable: { type: \'number\' },*/\n      }\n    });\n    baseObj.arrListColumns.push({\n      field: "POPrice",\n      caption: VIS.Msg.getMsg("POPrice"),\n      sortable: false,\n      size: \'150px\',\n      hidden: false,\n      render: function (record, index, col_index) {\n        var val = record["POPrice"];\n        return parseFloat(val).toLocaleString(undefined, {\n          minimumFractionDigits: 4\n        });\n      }\n    });\n    baseObj.arrListColumns.push({\n      field: "ProvisionalPrice",\n      caption: VIS.Msg.getMsg("ProvisionalPrice"),\n      sortable: false,\n      size: \'150px\',\n      hidden: false,\n      render: function (record, index, col_index) {\n        var val = record["ProvisionalPrice"];\n        return parseFloat(val).toLocaleString(undefined, {\n          minimumFractionDigits: 4\n        });\n      }\n    });\n    baseObj.arrListColumns.push({\n      field: "C_UOM_ID",\n      caption: VIS.Msg.getMsg("UomName"),\n      sortable: false,\n      size: \'150px\',\n      hidden: false\n    });\n    baseObj.arrListColumns.push({\n      field: "M_Product_SearchKey",\n      caption: VIS.Msg.getMsg("ProductSearchKey"),\n      sortable: false,\n      size: \'150px\',\n      hidden: false\n    });\n    baseObj.arrListColumns.push({\n      field: "M_Product_ID",\n      caption: VIS.Msg.getMsg("ProductName"),\n      sortable: true,\n      size: \'150px\',\n      hidden: false\n    });\n    baseObj.arrListColumns.push({\n      field: "M_AttributeSetInstance_ID",\n      caption: VIS.Msg.getMsg("ASI"),\n      sortable: false,\n      size: \'150px\',\n      editable: {\n        type: \'custom\',\n        ctrl: self.$productAttribute,\n        showAll: true,\n        style: \'background-color: #f8f8f8;\'\n      },\n      render: function (record, index, col_index) {\n        var l = self.pattrLookup;\n        var val = record["M_AttributeSetInstance_ID"];\n        if (record.changes && typeof record.changes["M_AttributeSetInstance_ID"] != \'undefined\') {\n          val = record.changes["M_AttributeSetInstance_ID"];\n        }\n        var d;\n        if (l) {\n          d = l.getDisplay(val, true);\n        }\n        return d;\n      },\n      style: \'background-color: #d1d1d14a\'\n    });\n    baseObj.arrListColumns.push({\n      field: "C_PaymentTerm_ID",\n      caption: VIS.Msg.getMsg("C_PaymentTerm_ID"),\n      sortable: false,\n      size: \'150px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "PaymentTermName",\n      caption: VIS.Msg.getMsg("PaymentTermName"),\n      sortable: false,\n      size: \'150px\',\n      hidden: false\n    });\n    baseObj.arrListColumns.push({\n      field: "IsAdvance",\n      caption: VIS.Msg.getMsg("IsAdvance"),\n      sortable: false,\n      size: \'150px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "C_InvoicePaymentTerm_ID",\n      caption: VIS.Msg.getMsg("C_InvoicePaymentTerm_ID"),\n      sortable: false,\n      size: \'150px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "IsInvoicePTAdvance",\n      caption: VIS.Msg.getMsg("IsInvoicePTAdvance"),\n      sortable: false,\n      size: \'150px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "C_Order_ID",\n      caption: VIS.Msg.getMsg("OrderLine"),\n      sortable: false,\n      size: \'150px\',\n      hidden: false\n    });\n    baseObj.arrListColumns.push({\n      field: "M_InOut_ID",\n      caption: VIS.Msg.getMsg("Shipment/Receipt"),\n      sortable: false,\n      size: \'150px\',\n      hidden: false\n    });\n    baseObj.arrListColumns.push({\n      field: "C_Invoice_ID",\n      caption: VIS.Msg.getMsg("Invoice"),\n      sortable: false,\n      size: \'150px\',\n      hidden: false\n    });\n    // Hidden -- > true\n    baseObj.arrListColumns.push({\n      field: "C_UOM_ID_K",\n      caption: VIS.Msg.getMsg("UomName"),\n      sortable: false,\n      size: \'150px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "M_Product_ID_K",\n      caption: VIS.Msg.getMsg("ProductName"),\n      sortable: false,\n      size: \'150px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "C_Order_ID_K",\n      caption: VIS.Msg.getMsg("Order"),\n      sortable: false,\n      size: \'150px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "M_InOut_ID_K",\n      caption: VIS.Msg.getMsg("Shipment/Receipt"),\n      sortable: false,\n      size: \'150px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "C_Invoice_ID_K",\n      caption: VIS.Msg.getMsg("Invoice"),\n      sortable: false,\n      size: \'150px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "Select",\n      caption: VIS.Msg.getMsg("Select"),\n      sortable: false,\n      size: \'50px\',\n      hidden: true,\n      render: function () {\n        return \'<div><input type=checkbox disabled="true"></div>\';\n      }\n    });\n  };\n\n  /* Save Provisional Invoice Line */\n  VCreateFormProvisionalInvoice.prototype.saveProvisionalInvoice = function () {\n    if (this.$super.dGrid == null) {\n      return false;\n    }\n    var model = {};\n    var selectedItems = this.$super.multiValues;\n    if (selectedItems == null) {\n      return false;\n    }\n    if (selectedItems.length <= 0) {\n      return false;\n    }\n    for (var i = 0; i < selectedItems.length; i++) {\n      model[i] = selectedItems[i];\n    }\n\n    //\tGet Shipment\n    var C_ProvisionalInvoice_ID = this.$super.mTab.getValue("C_ProvisionalInvoice_ID");\n    var C_Order_ID = VIS.Utility.Util.getValueOfInt(this.$super.cmbOrder.getValue());\n    var M_InOut_ID = VIS.Utility.Util.getValueOfInt(this.$super.cmbShipment.getValue());\n    return this.saveData(model, "", C_Order_ID, M_InOut_ID, C_ProvisionalInvoice_ID);\n  };\n\n  /* Save Provisional Invoice Line */\n  VCreateFormProvisionalInvoice.prototype.saveData = function (model, selectedItems, C_Order_ID, M_inout_id, C_ProvisionalInvoice_ID) {\n    var obj = this;\n    $.ajax({\n      type: "POST",\n      url: VIS.Application.contextUrl + "Common/SaveProvisionalInvoice",\n      dataType: "json",\n      data: {\n        model: model,\n        selectedItems: selectedItems,\n        C_Order_ID: C_Order_ID,\n        C_ProvisionalInvoice_ID: C_ProvisionalInvoice_ID,\n        M_inout_id: M_inout_id\n      },\n      success: function (data) {\n        returnValue = data.result;\n        if (returnValue) {\n          obj.dispose();\n          obj.$super.$root.dialog(\'close\');\n          obj.$super.setBusy(false);\n          return;\n        }\n        obj.$super.setBusy(false);\n        alert(returnValue);\n      },\n      error: function (jqXHR, textStatus, errorThrown) {\n        console.log(textStatus);\n        obj.$super.setBusy(false);\n        alert(errorThrown);\n      }\n    });\n  };\n\n  /* Get Shipment Data for grid*/\n  VCreateFormProvisionalInvoice.prototype.loadShipments = function (M_InOut_ID, M_Product_ID, pNo) {\n    var data = this.getShipmentsData(VIS.Env.getCtx(), M_InOut_ID, M_Product_ID, pNo);\n  };\n\n  /* Get Shipment Data for grid*/\n  VCreateFormProvisionalInvoice.prototype.getShipmentsData = function (ctx, M_InOut_ID, M_Product_ID, pNo) {\n    var data = [];\n    var self = this;\n    this.$super.record_ID = $self.mTab.getValue("C_ProvisionalInvoice_ID");\n    if (self.$super.dGrid != null) {\n      var selection = self.$super.dGrid.getSelection();\n      for (item in selection) {\n        var obj = $.grep(self.$super.multiValues, function (n, i) {\n          return n.M_Product_ID_K == self.$super.dGrid.get(selection[item])["M_Product_ID_K"] && n.M_InOut_ID_K == self.$super.dGrid.get(selection[item])["M_InOut_ID_K"];\n        });\n        if (obj.length > 0) {} else {\n          self.$super.multiValues.push(self.$super.dGrid.get(selection[item]));\n        }\n      }\n    }\n    var isBaseLangage = "";\n    var mProductIDs = "";\n    if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n      isBaseLangage = "FROM C_UOM uom INNER JOIN M_InOutLine l ON (l.C_UOM_ID=uom.C_UOM_ID) ";\n    } else {\n      isBaseLangage = "FROM C_UOM_Trl uom Left join C_UOM uom1 on (uom1.C_UOM_ID=uom.C_UOM_ID)  INNER JOIN M_InOutLine l ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'" + VIS.Env.getAD_Language(ctx) + "\') ";\n    }\n    if (M_Product_ID != null) {\n      mProductIDs = " AND l.M_Product_ID=" + M_Product_ID;\n    }\n    if (!pNo) {\n      pNo = 1;\n    }\n    $.ajax({\n      url: VIS.Application.contextUrl + "VCreateFrom/GetDataVCreateFrom",\n      dataType: "json",\n      type: "POST",\n      data: {\n        keyColumnName: self.$super.mTab.keyColumnName,\n        tableName: "M_InOutLine",\n        recordID: self.$super.record_ID,\n        pageNo: pNo,\n        mInOutId: M_InOut_ID,\n        isBaseLanguages: isBaseLangage,\n        mProductIDD: mProductIDs\n      },\n      error: function (e) {\n        alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n        self.$super.setBusy(false);\n        selfChild.log.info(e);\n        return;\n      },\n      success: function (dyndata) {\n        var res = JSON.parse(dyndata);\n        if (res.Error) {\n          VIS.ADialog.error(res.Error);\n          self.$super.setBusy(false);\n          return;\n        }\n        self.$super.resetPageCtrls(res.pSetting);\n        self.$super.loadGrid(res.data);\n        self.$super.setBusy(false);\n      }\n    });\n    return data;\n  };\n\n  //dispose call\n  VCreateFormProvisionalInvoice.prototype.dispose = function () {\n    if (this.disposeComponent != null) this.disposeComponent();\n  };\n\n  //Load form into VIS\n  VIS.VCreateFormProvisionalInvoice = VCreateFormProvisionalInvoice;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vcreateformprovisionalinvoice.js?\n}')},"./Areas/VAS/Scripts/app/forms/vcreatefrom.js":()=>{eval('{;\n(function (VIS, $) {\n  //form declaretion\n  function VCreateFrom(mTab) {\n    //call parent function on close\n    this.onClose;\n    this.dGrid = null;\n    var SELECT_DESELECT_ALL = "SelectDeselectAll";\n    //select all button status\n    var _checkStatus = true;\n    //To button pic on grid selected records\n    this.arrListColumns = [];\n\n    // create log\n    this.log = VIS.Logging.VLogger.getVLogger("VCreateFrom");\n    this.divPaging = null;\n    this.ulPaging = null;\n    this.liFirstPage = null;\n    this.liPrevPage = null;\n    this.liCurrPage = null;\n    this.liNextPage = null;\n    this.liLastPage = null;\n    this.cmbPage = null;\n    var selectedItems = [];\n    this.multiValues = [];\n    this.editedItems = [];\n    this.NonEditableRecord = [];\n    var $self = this;\n    var baseUrl = VIS.Application.contextUrl;\n    var dataSetUrl = baseUrl + "JsonData/JDataSet";\n    var nonQueryUrl = baseUrl + "JsonData/ExecuteNonQuer";\n    this.$root = $("<div style=\'position:relative\'>");\n    this.log = VIS.Logging.VLogger.getVLogger("VCreateFrom");\n    //this.$busyDiv = $("<div class=\'vis-apanel-busy\' style=\'width:98%;height:98%;position:absolute\'>");\n    this.$busyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n    this.topDiv = $("<div class=\'vis-locatormainwrap vis-formouterwrpdiv\'>");\n    this.middelDiv = $("<div class=\'vis-crtfrm-datawrp\'>");\n    this.bottomDiv = $("<div class=\'vis-ctrfrm-btnwrp\'>");\n    this.divPaging = $(\'<div>\');\n    this.record_ID = 0;\n    this.windowNo = mTab.getWindowNo();\n    this.mTab = mTab;\n    this.initOK = false;\n    this.isApplied = false;\n    var name = "btnOk_" + this.windowNo;\n    this.Okbtn = $("<input id=\'" + name + "\' class=\'VIS_Pref_btn-2\' type=\'button\' value=\'" + VIS.Msg.getMsg("OK") + "\'>");\n    name = "btnCancel_" + this.windowNo;\n    this.cancelbtn = $("<input id=\'" + name + "\' class=\'VIS_Pref_btn-2\' type=\'button\' value=\'" + VIS.Msg.getMsg("Cancel") + "\'>");\n    name = "btnDelete_" + this.windowNo;\n    var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/uncheck-icon.png";\n    this.selectAllButton = $("<button type=\'button\' id=\'" + name + "\' style=\'margin-bottom:0px;margin-top:0px;display: none;float: left;padding: 0px;border: 0px;\' value=\'Ok\' role=\'button\' aria-disabled=\'false\'>" + "<img src=\'" + src + "\'></button>");\n    name = "btnRefresh_" + this.windowNo;\n    src = VIS.Application.contextUrl + "Areas/VIS/Images/base/Refresh24.png";\n    this.btnRefresh = $("<button id=\'" + name + "\' style=\'margin-bottom: 1px; margin-top: 0px;display: none; float: left; margin-left: 0px;height: 38px; \' class=\'VIS_Pref_btn-2\'>" + "<img src=\'" + src + "\'></button>");\n    name = "btnApply_" + this.windowNo;\n    this.Applybtn = $("<input id=\'" + name + "\' class=\'VIS_Pref_btn-2\' style=\'display: none;\' type=\'button\' value=\'" + VIS.Msg.getMsg("Apply") + "\'>");\n\n    //check Arebic Calture\n    //if (VIS.Application.isRTL) {\n    //    this.Okbtn.css("margin-right", "-132px");\n    //    this.Applybtn.css("margin-right", "-365px");\n    //    this.cancelbtn.css("margin-right", "55px");\n    //}\n\n    this.lblBankAccount = new VIS.Controls.VLabel();\n    this.lblBPartner = new VIS.Controls.VLabel();\n    this.lblOrder = new VIS.Controls.VLabel();\n    this.lblInvoice = new VIS.Controls.VLabel();\n    this.lblShipment = new VIS.Controls.VLabel();\n    this.lblLocator = new VIS.Controls.VLabel();\n    this.lblDeliveryDate = new VIS.Controls.VLabel();\n    this.lblProduct = new VIS.Controls.VLabel();\n    // is used to represent document no on Create line form (M_Inout_ID)\n    this.lblDocumentNoRef = new VIS.Controls.VLabel();\n    // Added by Bharat on 05/May/2017 for Seach control on Bank Statement\n    this.lblDocumentNo = new VIS.Controls.VLabel();\n    this.lblDate = new VIS.Controls.VLabel();\n    this.lblAmount = new VIS.Controls.VLabel();\n    this.lblDepositSlip = new VIS.Controls.VLabel();\n    this.lblAuthCode = new VIS.Controls.VLabel();\n    this.lblCheckNo = new VIS.Controls.VLabel();\n    // Added by Manjot on 12/9/18 for combobox of Container on Material Receipt\n    this.lblContainer = null;\n    src = VIS.Application.contextUrl + "Areas/VIS/Images/pallet-icon.png";\n    //this.ContainerTree = $("<img id=\'ContainerTree_" + this.windowNo + "\' style=\'height: 27px;\' class=\'pull-left VIS_buttons-ContainerTree VIS-pallet-icon VIS_Tree-Container-disabled\' src=\'" + src + "\'>");\n    this.ContainerTree = $("<button class=\'input-group-text VIS_Tree-Container-disabled\'><i id=\'ContainerTree_" + this.windowNo + "\' class=\'fa fa-cubes\'></i></button>");\n\n    // create column as Provisional Invoice on Create line on AP Invoice\n    this.lblProvisionalInvoice = new VIS.Controls.VLabel();\n    this.cmbProvisionalInvoice = new VIS.Controls.VComboBox(\'\', false, false, true);\n    this.DocumentNo = null;\n    this.Date = null;\n    this.Amount = null;\n    this.DepositSlip = null;\n    this.AuthCode = null;\n    this.CheckNo = null;\n    this.fromInvoice = false;\n    this.ProvisionalInvoice = false;\n    this.deliveryDate = null;\n    this.cmbOrder = new VIS.Controls.VComboBox(\'\', false, false, true);\n    this.cmbInvoice = new VIS.Controls.VComboBox(\'\', false, false, true);\n    this.cmbShipment = new VIS.Controls.VComboBox(\'\', false, false, true);\n    // Added by Manjot on 12/9/18 for combobox of Container on Material Receipt\n    this.cmbContainer = null;\n    this.DocumentNoRef = null;\n    this.vProduct = null;\n    this.cmbBankAccount = null;\n    this.vBPartner = null;\n    this.locatorField = null;\n    this.child = null;\n    this.relatedToOrg = new VIS.Controls.VCheckBox(\'Related To My Organization\', false, false, true, \'Related To My Organization\', null);\n    this.pattrLookup = new VIS.MPAttributeLookup(VIS.context, $self.windowNo);\n    this.$productAttribute = new VIS.Controls.VPAttribute("M_AttributeSetInstance_ID", false, false, true, VIS.DisplayType.PAttribute, $self.pattrLookup, $self.windowNo, false, false, false, true);\n    this.title = "";\n    this.vetoablechange = function (evt) {\n      if (evt.propertyName == "M_Product_ID") {\n        $self.isApplied = false;\n        $self.setBusy(true);\n        $self.multiValues = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        //var C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n        var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n        var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n        var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n        var C_ProvisionalInvoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbProvisionalInvoice.getValue());\n        var M_Product_ID = $self.vProduct.getValue();\n        var deliveryDate = $self.deliveryDate.getValue();\n        if (C_Order_ID > 0) {\n          if ($self.locatorField != null) {\n            //for shipment haveing locator filed\n            $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, false, 1);\n          } else {\n            //for invoice\n            $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, true, 1);\n          }\n        } else if (C_Invoice_ID > 0) {\n          VIS.VCreateFromShipment.prototype.loadInvoices(C_Invoice_ID, M_Product_ID, 1);\n        } else if (M_InOut_ID > 0) {\n          // call loadshipments from VCreateFormProvisionalInvoice.js for Provisiona Invoice\n          if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n            VIS.VCreateFormProvisionalInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, 1);\n          } else {\n            VIS.VCreateFromInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, 1);\n          }\n        } else if (C_ProvisionalInvoice_ID > 0) {\n          // VA228:Load provisional invoice data in grid from AP invoice window\n          VIS.VCreateFromInvoice.prototype.loadProvisionalInvoices(C_ProvisionalInvoice_ID, M_Product_ID, 1);\n        } else {\n          $self.setBusy(false);\n        }\n      } else if (evt.propertyName == "C_BPartner_ID") {\n        $self.setBusy(true);\n        $self.multiValues = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n        var trxDate = $self.Date.getValue();\n        var C_BPartner_ID = $self.vBPartner.getValue();\n        var DepositSlip = $self.DepositSlip.getValue();\n        var DocumentNo = $self.DocumentNo.getValue();\n        var AuthCode = $self.AuthCode.getValue();\n        var CheckNo = $self.CheckNo.getValue();\n        var Amount = $self.Amount.getValue();\n        VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, 1);\n      } else if (evt.propertyName == "M_InOut_ID") {\n        $self.setBusy(true);\n        $self.editedItems = [];\n        $self.multiValues = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n        var M_Product_ID = $self.vProduct.getValue();\n        //  set Order and Shipment to Null\n        $self.cmbOrder.setValue(-1);\n        $self.cmbInvoice.setValue(-1);\n        $self.cmbProvisionalInvoice.setValue(-1);\n        //$self.lblDate.setVisible = false;\n        //$self.Date.setVisible = false;\n        //$self.lblDocumentNo.setVisible = false;\n        //$self.DocumentNo.setVisible = false;\n        //$self.lblDepositSlip.setVisible = false;\n        //$self.DepositSlip.setVisible = false;\n        //$self.lblAuthCode.setVisible = false;\n        //$self.AuthCode.setVisible = false;\n        $self.lblDeliveryDate.setVisible(false);\n        $self.deliveryDate.setVisible(false);\n        if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n          VIS.VCreateFormProvisionalInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, 1);\n        } else {\n          VIS.VCreateFromInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, 1);\n        }\n        //$self.setBusy(false);               \n      } else if (evt.propertyName == "C_Order_ID") {\n        $self.isApplied = false;\n        $self.setBusy(true);\n        $self.editedItems = [];\n        $self.multiValues = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n        //  set Invoice and Shipment to Null\n        $self.cmbInvoice.setValue(-1);\n        $self.cmbShipment.setValue(-1);\n        $self.cmbProvisionalInvoice.setValue(-1);\n        //$self.lblDate.setVisible = false;\n        //$self.Date.setVisible = false;\n        //$self.lblDocumentNo.setVisible = false;\n        //$self.DocumentNo.setVisible = false;\n        //$self.lblDepositSlip.setVisible = false;\n        //$self.DepositSlip.setVisible = false;\n        //$self.lblAuthCode.setVisible = false;\n        //$self.AuthCode.setVisible = false;\n        $self.lblDeliveryDate.setVisible(true);\n        $self.deliveryDate.setVisible(true);\n        var M_Product_ID = $self.vProduct.getValue();\n        var deliveryDate = $self.deliveryDate.getValue();\n        if ($self.locatorField != null) {\n          //for shipment haveing locator filed\n          //$self.loadOrder(C_Order_ID, false);\n          $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, false, 1);\n        } else {\n          //for invoice\n          //$self.loadOrder(C_Order_ID, true);\n          $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, true, 1);\n        }\n      } else if (evt.propertyName == "C_ProvisionalInvoice_ID") {\n        //Load data into grid on provisional invoice combo change\n        $self.isApplied = false;\n        $self.setBusy(true);\n        $self.editedItems = [];\n        $self.multiValues = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var C_ProvisionalInvoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbProvisionalInvoice.getValue());\n        var M_Product_ID = $self.vProduct.getValue();\n        //  set Order/Invoice and Shipment to Null\n        $self.cmbOrder.setValue(-1);\n        $self.cmbShipment.setValue(-1);\n        $self.cmbInvoice.setValue(-1);\n        $self.lblDeliveryDate.setVisible(false);\n        $self.deliveryDate.setVisible(false);\n        VIS.VCreateFromInvoice.prototype.loadProvisionalInvoices(C_ProvisionalInvoice_ID, M_Product_ID, 1);\n      } else if (evt.propertyName == "C_Invoice_ID") {\n        $self.isApplied = false;\n        $self.setBusy(true);\n        $self.editedItems = [];\n        $self.multiValues = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n        var M_Product_ID = $self.vProduct.getValue();\n        //  set Order and Shipment to Null\n        $self.cmbOrder.setValue(-1);\n        $self.cmbShipment.setValue(-1);\n        $self.cmbProvisionalInvoice.setValue(-1);\n        //$self.lblDate.setVisible = false;\n        //$self.Date.setVisible = false;\n        //$self.lblDocumentNo.setVisible = false;\n        //$self.DocumentNo.setVisible = false;\n        //$self.lblDepositSlip.setVisible = false;\n        //$self.DepositSlip.setVisible = false;\n        //$self.lblAuthCode.setVisible = false;\n        //$self.AuthCode.setVisible = false;\n        $self.lblDeliveryDate.setVisible(false);\n        $self.deliveryDate.setVisible(false);\n        VIS.VCreateFromShipment.prototype.loadInvoices(C_Invoice_ID, M_Product_ID, 1);\n      }\n\n      // Added by Manjot on 12/9/18 for combobox of Container on Material Receipt\n      else if (evt.propertyName == "M_Locator_ID") {\n        if ($self.locatorField != null) {\n          $self.isApplied = false;\n          // load Containers\n          var M_locator_ID = parseInt($self.locatorField.getValue());\n          if (M_locator_ID > 0) VIS.VCreateFromShipment.prototype.initContainerDetails(M_locator_ID);\n        }\n      }\n      //End\n      else {\n        this.locatorField.setBackground("");\n      }\n    };\n    this.createPageSettings = function () {\n      this.ulPaging = $(\'<ul class="vis-statusbar-ul">\');\n      this.liFirstPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-shiftleft" title="First Page" style="opacity: 0.6;"></i></div></li>\');\n      this.liPrevPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-pageup" title="Page Up" style="opacity: 0.6;"></i></div></li>\');\n      this.cmbPage = $(\'<select>\');\n      this.liCurrPage = $(\'<li>\').append(this.cmbPage);\n      this.liNextPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-pagedown" title="Page Down" style="opacity: 0.6;"></i></div></li>\');\n      this.liLastPage = $(\'<li style="opacity: 1;"><div><i class="vis vis-shiftright" title="Last Page" style="opacity: 0.6;"></i></div></li>\');\n      this.ulPaging.append(this.liFirstPage).append(this.liPrevPage).append(this.liCurrPage).append(this.liNextPage).append(this.liLastPage);\n      this.pageEvents();\n    };\n    this.pageEvents = function () {\n      this.liFirstPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          $self.setBusy(true);\n          var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n          var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n          var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n          var C_ProvisionalInvoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbProvisionalInvoice.getValue());\n          var C_BankAccount_ID = null;\n          if ($self.cmbBankAccount != null) {\n            C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n          }\n          var M_Product_ID = null,\n            deliveryDate = null;\n          if ($self.vProduct != null) {\n            M_Product_ID = $self.vProduct.getValue();\n          }\n          if ($self.deliveryDate != null) {\n            deliveryDate = $self.deliveryDate.getValue();\n          }\n          if (C_Order_ID > 0) {\n            if ($self.locatorField != null) {\n              //for shipment haveing locator filed\n              $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, false, 1);\n            } else {\n              //for invoice\n              $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, true, 1);\n            }\n          } else if (C_Invoice_ID > 0) {\n            VIS.VCreateFromShipment.prototype.loadInvoices(C_Invoice_ID, M_Product_ID, 1);\n          } else if (M_InOut_ID > 0) {\n            // call loadshipments from VCreateFormProvisionalInvoice.js for Provisiona Invoice\n            if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n              VIS.VCreateFormProvisionalInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, 1);\n            } else {\n              VIS.VCreateFromInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, 1);\n            }\n          } else if (C_BankAccount_ID != null) {\n            var trxDate = $self.Date.getValue();\n            var C_BPartner_ID = $self.vBPartner.getValue();\n            var DepositSlip = $self.DepositSlip.getValue();\n            var DocumentNo = $self.DocumentNo.getValue();\n            var AuthCode = $self.AuthCode.getValue();\n            var CheckNo = $self.CheckNo.getValue();\n            var Amount = $self.Amount.getValue();\n            VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, 1);\n            //VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, 1);\n          } else if (C_ProvisionalInvoice_ID > 0) {\n            // VA228:Load provisional invoice from AP invoice window\n            VIS.VCreateFromInvoice.prototype.loadProvisionalInvoices(C_ProvisionalInvoice_ID, M_Product_ID, 1);\n          }\n          //$self.setBusy(false);\n        }\n      });\n      this.liPrevPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          //displayData(true, parseInt(this.cmbPage.val()) - 1);\n          $self.setBusy(true);\n          var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n          var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n          var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n          var C_ProvisionalInvoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbProvisionalInvoice.getValue());\n          var C_BankAccount_ID = null;\n          if ($self.cmbBankAccount != null) {\n            C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n          }\n          var M_Product_ID = null,\n            deliveryDate = null;\n          if ($self.vProduct != null) {\n            M_Product_ID = $self.vProduct.getValue();\n          }\n          if ($self.deliveryDate != null) {\n            deliveryDate = $self.deliveryDate.getValue();\n          }\n          if (C_Order_ID > 0) {\n            if ($self.locatorField != null) {\n              //for shipment haveing locator filed\n              $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, false, parseInt($self.cmbPage.val()) - 1);\n            } else {\n              //for invoice\n              $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, true, parseInt($self.cmbPage.val()) - 1);\n            }\n          } else if (C_Invoice_ID > 0) {\n            VIS.VCreateFromShipment.prototype.loadInvoices(C_Invoice_ID, M_Product_ID, parseInt($self.cmbPage.val()) - 1);\n          } else if (M_InOut_ID > 0) {\n            // call loadshipments from VCreateFormProvisionalInvoice.js for Provisiona Invoice\n            if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n              VIS.VCreateFormProvisionalInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, parseInt($self.cmbPage.val()) - 1);\n            } else {\n              VIS.VCreateFromInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, parseInt($self.cmbPage.val()) - 1);\n            }\n          } else if (C_BankAccount_ID != null) {\n            var trxDate = $self.Date.getValue();\n            var C_BPartner_ID = $self.vBPartner.getValue();\n            var DepositSlip = $self.DepositSlip.getValue();\n            var DocumentNo = $self.DocumentNo.getValue();\n            var AuthCode = $self.AuthCode.getValue();\n            var CheckNo = $self.CheckNo.getValue();\n            var Amount = $self.Amount.getValue();\n            VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, parseInt($self.cmbPage.val()) - 1);\n            //VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, parseInt($self.cmbPage.val()) - 1);\n          } else if (C_ProvisionalInvoice_ID > 0) {\n            // VA228:Load provisional invoice from AP invoice window\n            VIS.VCreateFromInvoice.prototype.loadProvisionalInvoices(C_ProvisionalInvoice_ID, M_Product_ID, parseInt($self.cmbPage.val()) - 1);\n          }\n          //$self.setBusy(false);\n        }\n      });\n      this.liNextPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          //displayData(true, parseInt(this.cmbPage.val()) + 1);\n          $self.setBusy(true);\n          var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n          var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n          var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n          var C_ProvisionalInvoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbProvisionalInvoice.getValue());\n          var C_BankAccount_ID = null;\n          if ($self.cmbBankAccount != null) {\n            C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n          }\n          var M_Product_ID = null,\n            deliveryDate = null;\n          if ($self.vProduct != null) {\n            M_Product_ID = $self.vProduct.getValue();\n          }\n          if ($self.deliveryDate != null) {\n            deliveryDate = $self.deliveryDate.getValue();\n          }\n          if (C_Order_ID > 0) {\n            if ($self.locatorField != null) {\n              //for shipment haveing locator filed\n              $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, false, parseInt($self.cmbPage.val()) + 1);\n            } else {\n              //for invoice\n              $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, true, parseInt($self.cmbPage.val()) + 1);\n            }\n          } else if (C_Invoice_ID > 0) {\n            VIS.VCreateFromShipment.prototype.loadInvoices(C_Invoice_ID, M_Product_ID, parseInt($self.cmbPage.val()) + 1);\n          } else if (M_InOut_ID > 0) {\n            // call loadshipments from VCreateFormProvisionalInvoice.js for Provisiona Invoice\n            if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n              VIS.VCreateFormProvisionalInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, parseInt($self.cmbPage.val()) + 1);\n            } else {\n              VIS.VCreateFromInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, parseInt($self.cmbPage.val()) + 1);\n            }\n          } else if (C_BankAccount_ID != null) {\n            var trxDate = $self.Date.getValue();\n            var C_BPartner_ID = $self.vBPartner.getValue();\n            var DepositSlip = $self.DepositSlip.getValue();\n            var DocumentNo = $self.DocumentNo.getValue();\n            var AuthCode = $self.AuthCode.getValue();\n            var CheckNo = $self.CheckNo.getValue();\n            var Amount = $self.Amount.getValue();\n            VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, parseInt($self.cmbPage.val()) + 1);\n            //VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, parseInt($self.cmbPage.val()) + 1);\n          } else if (C_ProvisionalInvoice_ID > 0) {\n            // VA228:Load provisional invoice from AP invoice window\n            VIS.VCreateFromInvoice.prototype.loadProvisionalInvoices(C_ProvisionalInvoice_ID, M_Product_ID, parseInt($self.cmbPage.val()) + 1);\n          }\n          //$self.setBusy(false);\n        }\n      });\n      this.liLastPage.on("click", function () {\n        if ($(this).css("opacity") == "1") {\n          //displayData(true, parseInt(this.cmbPage.find("Option:last").val()));\n          $self.setBusy(true);\n          var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n          var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n          var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n          var C_ProvisionalInvoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbProvisionalInvoice.getValue());\n          var C_BankAccount_ID = null;\n          if ($self.cmbBankAccount != null) {\n            C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n          }\n          var M_Product_ID = null,\n            deliveryDate = null;\n          if ($self.vProduct != null) {\n            M_Product_ID = $self.vProduct.getValue();\n          }\n          if ($self.deliveryDate != null) {\n            deliveryDate = $self.deliveryDate.getValue();\n          }\n          if (C_Order_ID > 0) {\n            if ($self.locatorField != null) {\n              //for shipment haveing locator filed\n              $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, false, parseInt($self.cmbPage.find("Option:last").val()));\n            } else {\n              //for invoice\n              $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, true, parseInt($self.cmbPage.find("Option:last").val()));\n            }\n          } else if (C_Invoice_ID > 0) {\n            VIS.VCreateFromShipment.prototype.loadInvoices(C_Invoice_ID, M_Product_ID, parseInt($self.cmbPage.find("Option:last").val()));\n          } else if (M_InOut_ID > 0) {\n            // call loadshipments from VCreateFormProvisionalInvoice.js for Provisiona Invoice\n            if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n              VIS.VCreateFormProvisionalInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, parseInt($self.cmbPage.find("Option:last").val()));\n            } else {\n              VIS.VCreateFromInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, parseInt($self.cmbPage.find("Option:last").val()));\n            }\n          } else if (C_BankAccount_ID != null) {\n            var trxDate = $self.Date.getValue();\n            var C_BPartner_ID = $self.vBPartner.getValue();\n            var DepositSlip = $self.DepositSlip.getValue();\n            var DocumentNo = $self.DocumentNo.getValue();\n            var AuthCode = $self.AuthCode.getValue();\n            var CheckNo = $self.CheckNo.getValue();\n            var Amount = $self.Amount.getValue();\n            VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, parseInt($self.cmbPage.find("Option:last").val()));\n            //VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, parseInt($self.cmbPage.find("Option:last").val()));\n          } else if (C_ProvisionalInvoice_ID > 0) {\n            // VA228:Load provisional invoice from AP invoice window\n            VIS.VCreateFromInvoice.prototype.loadProvisionalInvoices(C_ProvisionalInvoice_ID, M_Product_ID, parseInt($self.cmbPage.find("Option:last").val()));\n          }\n          //$self.setBusy(false);\n        }\n      });\n      this.cmbPage.on("change", function () {\n        //displayData(true, this.cmbPage.val());\n        $self.setBusy(true);\n        var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n        var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n        var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n        var C_ProvisionalInvoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbProvisionalInvoice.getValue());\n        var C_BankAccount_ID = null;\n        if ($self.cmbBankAccount != null) {\n          C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n        }\n        var M_Product_ID = null,\n          deliveryDate = null;\n        if ($self.vProduct != null) {\n          M_Product_ID = $self.vProduct.getValue();\n        }\n        if ($self.deliveryDate != null) {\n          deliveryDate = $self.deliveryDate.getValue();\n        }\n        if (C_Order_ID > 0) {\n          if ($self.locatorField != null) {\n            //for shipment haveing locator filed\n            $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, false, $self.cmbPage.val());\n          } else {\n            //for invoice\n            $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, true, $self.cmbPage.val());\n          }\n        } else if (C_Invoice_ID > 0) {\n          VIS.VCreateFromShipment.prototype.loadInvoices(C_Invoice_ID, M_Product_ID, $self.cmbPage.val());\n        } else if (M_InOut_ID > 0) {\n          // call loadshipments from VCreateFormProvisionalInvoice.js for Provisiona Invoice\n          if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n            VIS.VCreateFormProvisionalInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, $self.cmbPage.val());\n          } else {\n            VIS.VCreateFromInvoice.prototype.loadShipments(M_InOut_ID, M_Product_ID, $self.cmbPage.val());\n          }\n        } else if (C_BankAccount_ID != null) {\n          var trxDate = $self.Date.getValue();\n          var C_BPartner_ID = $self.vBPartner.getValue();\n          var DepositSlip = $self.DepositSlip.getValue();\n          var DocumentNo = $self.DocumentNo.getValue();\n          var AuthCode = $self.AuthCode.getValue();\n          var CheckNo = $self.CheckNo.getValue();\n          var Amount = $self.Amount.getValue();\n          VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, $self.cmbPage.val());\n          //VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, $self.cmbPage.val());\n        } else if (C_ProvisionalInvoice_ID > 0) {\n          // VA228:Load provisional invoice from AP invoice window\n          VIS.VCreateFromInvoice.prototype.loadProvisionalInvoices(C_ProvisionalInvoice_ID, M_Product_ID, $self.cmbPage.val());\n        }\n        //$self.setBusy(false);\n      });\n    };\n    this.resetPageCtrls = function (psetting) {\n      this.cmbPage.empty();\n      if (psetting.TotalPage > 0) {\n        for (var i = 0; i < psetting.TotalPage; i++) {\n          this.cmbPage.append($("<option value=" + (i + 1) + ">" + (i + 1) + "</option>"));\n        }\n        this.cmbPage.val(psetting.CurrentPage);\n        if (psetting.TotalPage > psetting.CurrentPage) {\n          this.liNextPage.css("opacity", "1");\n          this.liLastPage.css("opacity", "1");\n        } else {\n          this.liNextPage.css("opacity", "0.6");\n          this.liLastPage.css("opacity", "0.6");\n        }\n        if (psetting.CurrentPage > 1) {\n          this.liFirstPage.css("opacity", "1");\n          this.liPrevPage.css("opacity", "1");\n        } else {\n          this.liFirstPage.css("opacity", "0.6");\n          this.liPrevPage.css("opacity", "0.6");\n        }\n        if (psetting.TotalPage == 1) {\n          this.liFirstPage.css("opacity", "0.6");\n          this.liPrevPage.css("opacity", "0.6");\n          this.liNextPage.css("opacity", "0.6");\n          this.liLastPage.css("opacity", "0.6");\n        }\n      } else {\n        this.liFirstPage.css("opacity", "0.6");\n        this.liPrevPage.css("opacity", "0.6");\n        this.liNextPage.css("opacity", "0.6");\n        this.liLastPage.css("opacity", "0.6");\n      }\n    };\n    this.setBusy = function (isBusy) {\n      this.$busyDiv.css("display", isBusy ? \'block\' : \'none\');\n    };\n    // Change By Mohit 30/06/2016\n    this.MergeItemsForSave = function () {\n      var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n      var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n      var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n      if ($self.editedItems.length > 0) {\n        for (var items in $self.editedItems) {\n          var selectprd = $self.editedItems[items]["M_Product_ID_K"];\n          var obj = $.grep($self.multiValues, function (n, i) {\n            if (C_Order_ID > 0) {\n              return n.M_Product_ID_K == selectprd && n.C_Order_ID_K == $self.editedItems[items]["C_Order_ID_K"];\n            } else if (C_Invoice_ID > 0) {\n              return n.M_Product_ID_K == selectprd && n.C_Invoice_ID_K == $self.editedItems[items]["C_Invoice_ID_K"];\n            } else if (M_InOut_ID > 0) {\n              return n.M_Product_ID_K == selectprd && n.M_InOut_ID_K == $self.editedItems[items]["M_InOut_ID_K"];\n            } else {\n              return n.C_Payment_ID_K == $self.editedItems[items]["C_Payment_ID_K"];\n            }\n          });\n          if (obj.length > 0) {} else {\n            $self.multiValues.push($self.editedItems[items]);\n          }\n        }\n      }\n    };\n    this.showDialog = function () {\n      if (this.locatorField) {\n        this.locatorField.setBackground(false);\n        this.locatorField.addVetoableChangeListener(this);\n      }\n      if (this.vProduct) {\n        this.vProduct.addVetoableChangeListener(this);\n      }\n      if (this.vBPartner) {\n        this.vBPartner.addVetoableChangeListener(this);\n      }\n      if (this.cmbShipment) {\n        this.cmbShipment.addVetoableChangeListener(this);\n      }\n      if (this.cmbOrder) {\n        this.cmbOrder.addVetoableChangeListener(this);\n      }\n      if (this.cmbProvisionalInvoice) {\n        this.cmbProvisionalInvoice.addVetoableChangeListener(this);\n      }\n      if (this.cmbInvoice) {\n        this.cmbInvoice.addVetoableChangeListener(this);\n      }\n      var obj = this;\n      this.$root.append(this.$busyDiv);\n      this.setBusy(false);\n      this.$root.dialog({\n        modal: true,\n        title: this.title,\n        width: 900,\n        height: 600,\n        resizable: false,\n        position: {\n          at: "center top",\n          of: window\n        },\n        close: function () {\n          obj.dispose();\n          if (obj.dGrid != null) {\n            obj.dGrid.destroy();\n          }\n          /* VIS_0045: DevOps Bug 6189 -> 08/Oct/2024 -> OnClose function is used to refresh the Grid and to display lines in bottom*/\n          if (obj.onClose) {\n            obj.onClose();\n          }\n          $self = null;\n          obj.$root.dialog("destroy");\n          obj.$root = null;\n        }\n      });\n\n      /*VIS_0060: 13-Nov-2024, Set Order in case of delivery Order*/\n      if ("Y".equals(VIS.Env.getCtx().getWindowContext(obj.windowNo, "IsSOTrx")) || "Y".equals(VIS.Env.getCtx().getWindowContext(obj.windowNo, "IsReturnTrx"))) {\n        if (VIS.Env.getCtx().getContextAsInt(obj.windowNo, "C_Order_ID") > 0) {\n          obj.cmbOrder.setValue(VIS.Env.getCtx().getContextAsInt(obj.windowNo, "C_Order_ID"));\n\n          // Change event for Order\n          var eventnew = {\n            propertyName: "C_Order_ID"\n          };\n          obj.vetoablechange(eventnew);\n        }\n      } else if (obj.locatorField) {\n        obj.locatorField.setValue(VIS.Env.getCtx().getContextAsInt(obj.windowNo, "M_Locator_ID"));\n      }\n    };\n\n    // function to check comma or dot from given value and return new value\n    this.checkcommaordot = function (event, val) {\n      var foundComma = false;\n      event.value_new = VIS.Utility.Util.getValueOfString(val);\n      if (event.value_new.contains(".")) {\n        foundComma = true;\n        var indices = [];\n        for (var i = 0; i < event.value_new.length; i++) {\n          if (event.value_new[i] === ".") indices.push(i);\n        }\n        if (indices.length > 1) {\n          event.value_new = removeAllButLast(event.value_new, \'.\');\n        }\n      }\n      if (event.value_new.contains(",")) {\n        if (foundComma) {\n          event.value_new = removeAllButLast(event.value_new, \',\');\n        } else {\n          var indices = [];\n          for (var i = 0; i < event.value_new.length; i++) {\n            if (event.value_new[i] === ",") indices.push(i);\n          }\n          if (indices.length > 1) {\n            event.value_new = removeAllButLast(event.value_new, \',\');\n          } else {\n            event.value_new = event.value_new.replace(",", ".");\n          }\n        }\n      }\n      if (event.value_new == "") {\n        event.value_new = "0";\n      }\n      return event.value_new;\n    };\n\n    // Remove all seperator but only bring last seperator\n    this.removeAllButLast = function (amt, seprator) {\n      var parts = amt.split(seprator);\n      amt = parts.slice(0, -1).join(\'\') + \'.\' + parts.slice(-1);\n      if (amt.indexOf(\'.\') == amt.length - 1) {\n        amt = amt.replace(".", "");\n      }\n      return amt;\n    };\n    this.disposeComponent = function () {\n      $self = null;\n      if (this.Okbtn) this.Okbtn.off("click");\n      if (this.cancelbtn) this.cancelbtn.off("click");\n      if (this.selectAllButton) this.selectAllButton.off("click");\n      if (this.btnRefresh) this.btnRefresh.off("click");\n      if (this.Applybtn) this.Applybtn.off("click");\n      this.disposeComponent = null;\n    };\n  }\n  ;\n\n  //dispose call\n  VCreateFrom.prototype.dispose = function () {\n    this.disposeComponent();\n  };\n  VCreateFrom.prototype.create = function (mTab) {\n    //\tdynamic init preparation\n    var AD_Table_ID = VIS.Env.getCtx().getContextAsInt(mTab.getWindowNo(), "BaseTable_ID");\n    var retValue = null; // VCreateFrom form object\n    if (AD_Table_ID == 392)\n      //  C_BankStatement\n      {\n        retValue = new VIS.VCreateFromStatement(mTab);\n      } else if (AD_Table_ID == 318)\n      //  C_Invoice\n      {\n        retValue = new VIS.VCreateFromInvoice(mTab);\n      } else if (AD_Table_ID == 319)\n      //  M_InOut\n      {\n        retValue = new VIS.VCreateFromShipment(mTab);\n      } else if (AD_Table_ID == 426)\n      //\tC_PaySelection\n      {\n        return null; //\tignore - will call process C_PaySelection_CreateFrom\n      } else if (mTab.keyColumnName == "C_ProvisionalInvoice_ID")\n      //\tC_ProvisionalInvoice\n      {\n        retValue = new VIS.VCreateFormProvisionalInvoice(mTab);\n      } else\n      //  Not supported CreateFrom\n      {\n        return null;\n      }\n    return retValue;\n  };\n  VCreateFrom.prototype.initBPDetails = function (C_BPartner_ID) {\n    return C_BPartner_ID;\n  };\n  VCreateFrom.prototype.initBPartner = function (forInvoice) {\n    //  load BPartner\n    var AD_Column_ID = 3499; //  C_Invoice.C_BPartner_ID\n    var lookup = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), this.windowNo, AD_Column_ID, VIS.DisplayType.Search);\n    this.vBPartner = new VIS.Controls.VTextBoxButton("C_BPartner_ID", true, false, true, VIS.DisplayType.Search, lookup);\n    var C_BPartner_ID = VIS.Env.getCtx().getContextAsInt(this.windowNo, "C_BPartner_ID");\n    this.vBPartner.setValue(C_BPartner_ID);\n    //  initial loading\n    return this.initBPartnerOIS(C_BPartner_ID, forInvoice);\n  };\n  VCreateFrom.prototype.initBPartnerOIS = function (C_BPartner_ID, forInvoice) {\n    var orcmb = this.cmbOrder;\n    //$(orcmb).empty()\n    $(orcmb).html("");\n    var isReturnTrx = false;\n\n    // Handled the case of Return, show only Return orders\n    if (forInvoice) {\n      var dt = VIS.dataContext.getJSONRecord("MDocType/GetDocType", VIS.Env.getCtx().getContextAsInt(this.windowNo, "C_DocTypeTarget_ID").toString());\n      isReturnTrx = VIS.Utility.Util.getValueOfBoolean(dt["IsReturnTrx"]);\n      var isSoTrx = "Y".equals(VIS.Env.getCtx().getWindowContext(this.windowNo, "IsSOTrx"));\n      // Load Provisional Invoice to combo only when creating AP Invoice\n      if (!isReturnTrx && !isSoTrx) this.getProvisionlInvoices(VIS.Env.getCtx(), C_BPartner_ID, isReturnTrx);\n    } else {\n      isReturnTrx = "Y".equals(VIS.Env.getCtx().getWindowContext(this.windowNo, "IsReturnTrx"));\n    }\n    //var orders =\n    // JID_0350: "When user create MR with refrence to order OR by invoice by using "Create Line From" charge should not shows on grid.\n\n    this.getOrders(VIS.Env.getCtx(), C_BPartner_ID, isReturnTrx, forInvoice);\n\n    //for (var i = 0; i < orders.length; i++) {\n    //    if (i == 0) {\n    //        this.cmbOrder.getControl().append(" <option value=0> </option>");\n    //    }\n    //    this.cmbOrder.getControl().append(" <option value=" + orders[i].ID + ">" + orders[i].value + "</option>");\n    //};\n\n    //this.cmbOrder.getControl().prop(\'selectedIndex\', 0);\n    return this.initBPDetails(C_BPartner_ID);\n  };\n\n  /**Load Order and BP Deatil for Provisional Invoice */\n  VCreateFrom.prototype.initBPartnerForProvisional = function () {\n    //  load BPartner\n    var AD_Column_ID = 3499; //  C_Invoice.C_BPartner_ID\n    var lookup = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), this.windowNo, AD_Column_ID, VIS.DisplayType.Search);\n    this.vBPartner = new VIS.Controls.VTextBoxButton("C_BPartner_ID", true, false, true, VIS.DisplayType.Search, lookup);\n    var C_BPartner_ID = VIS.Env.getCtx().getContextAsInt(this.windowNo, "C_BPartner_ID");\n    this.vBPartner.setValue(C_BPartner_ID);\n\n    //  initial loading\n    var orcmb = this.cmbOrder;\n    $(orcmb).html("");\n    var isReturnTrx = "Y".equals(VIS.Env.getCtx().getWindowContext(this.windowNo, "IsReturnTrx"));\n    this.getOrdersForProvisional(VIS.Env.getCtx(), C_BPartner_ID, isReturnTrx);\n    return this.initBPDetails(C_BPartner_ID);\n  };\n\n  // Get Orders\n  VCreateFrom.prototype.getOrders = function (ctx, C_BPartner_ID, isReturnTrx, forInvoice) {\n    //var display = "o.DocumentNo||\' - \' ||".concat(VIS.DB.to_char("o.DateOrdered", VIS.DisplayType.Date, VIS.Env.getAD_Language(ctx))).concat("||\' - \'||").concat(\n    //    VIS.DB.to_char("o.GrandTotal", VIS.DisplayType.Amount, VIS.Env.getAD_Language(ctx)));\n\n    var column = "m.M_InOutLine_ID";\n    if (forInvoice) {\n      column = "m.C_InvoiceLine_ID";\n    }\n    var OrgId = VIS.Env.getCtx().getContextAsInt(this.windowNo, "AD_Org_ID");\n    // Added by Vivek on 09/10/2017 advised by Pradeep\n    var _isdrop = "Y".equals(VIS.Env.getCtx().getWindowContext(this.windowNo, "IsDropShip"));\n    var _isSoTrx = "Y".equals(VIS.Env.getCtx().getWindowContext(this.windowNo, "IsSOTrx"));\n    //JID_0976\n    var recordId = VIS.context.getWindowContextAsInt(this.windowNo, "C_Invoice_ID", true);\n    var Contract_ID = VIS.context.getWindowContextAsInt(this.windowNo, "VAS_ContractMaster_ID", true);\n    var whereCondition = "";\n    var sql = " C_Order.IsSOTrx =\'" + (_isSoTrx ? "Y" : "N") + "\' AND C_Order.IsBlanketTrx=\'N\' AND C_Order.ISSALESQUOTATION=\'N\' AND C_Order.DocStatus IN (\'CL\', \'CO\')";\n    if (OrgId > 0) {\n      sql += " AND C_Order.AD_Org_ID = " + OrgId;\n    }\n    if (C_BPartner_ID > 0) {\n      if (forInvoice) {\n        sql += " AND (C_Order.C_BPartner_ID = " + C_BPartner_ID + " OR C_Order.Bill_BPartner_ID = " + C_BPartner_ID + ")";\n      } else {\n        sql += " AND C_Order.C_BPartner_ID = " + C_BPartner_ID;\n      }\n    }\n    if (recordId > 0) {\n      whereCondition = VIS.dataContext.getJSONData("VCreateFrom/GetConversionWhere", {\n        "columns": column,\n        "forInvoices": forInvoice,\n        "recordID": recordId,\n        "Table": "C_Order"\n      }, null);\n    }\n    if (whereCondition != null && whereCondition != "") {\n      sql += whereCondition;\n    }\n    //VAI082 12/22/2023 DevOps Task ID:-Order will be filtered on Create lines from when "ContractId" is greater than Zero.\n    if (Contract_ID > 0) {\n      sql += " AND C_Order.VAS_ContractMaster_ID=" + Contract_ID;\n    }\n    if (forInvoice && !_isSoTrx) {\n      sql += " AND C_Order.C_Order_ID NOT IN(SELECT DISTINCT OL.C_Order_ID FROM C_ProvisionalInvoice PI" + " INNER JOIN C_ProvisionalInvoiceLine IL ON IL.C_ProvisionalInvoice_ID = PI.C_ProvisionalInvoice_ID" + " INNER JOIN C_OrderLine OL ON OL.C_OrderLine_ID = IL.C_OrderLine_ID AND OL.C_Order_ID = C_Order.C_Order_ID" + " WHERE  PI.IsActive = \'Y\' AND pi.DocStatus  NOT IN(\'VO\', \'RE\'))";\n    }\n    sql += " AND C_Order.IsReturnTrx=\'" + (isReturnTrx ? "Y" : "N") + "\' AND C_Order.IsDropShip=\'" + (_isdrop ? "Y" : "N") + "\'  AND C_Order.C_Order_ID IN " + "(SELECT C_Order_ID FROM (SELECT ol.C_Order_ID,ol.C_OrderLine_ID,ol.QtyOrdered," + " (SELECT SUM(m.qty) FROM m_matchPO m WHERE ol.C_OrderLine_ID = m.C_OrderLine_ID AND NVL(" + column + ", 0) != 0 AND m.ISACTIVE = \'Y\') AS Qty," + " (SELECT SUM(IL.QtyInvoiced)  FROM C_INVOICELINE IL INNER JOIN C_Invoice I ON I.C_INVOICE_ID = IL.C_INVOICE_ID" + " WHERE il.ISACTIVE = \'Y\' AND I.DOCSTATUS NOT IN(\'VO\', \'RE\') AND OL.C_ORDERLINE_ID = IL.C_ORDERLINE_ID) AS QtyInvoiced," + " (SELECT SUM(IL.QtyInvoiced)  FROM C_ProvisionalInvoiceLine IL INNER JOIN C_ProvisionalInvoice I ON I.C_ProvisionalInvoice_ID = IL.C_ProvisionalInvoice_ID" + " WHERE il.ISACTIVE = \'Y\' AND I.DOCSTATUS NOT IN(\'VO\', \'RE\') AND OL.C_ORDERLINE_ID = IL.C_ORDERLINE_ID) AS QtyProvisional FROM C_OrderLine ol ";\n\n    // Get Orders based on the setting taken on Tenant to allow non item Product\n    if (!forInvoice && VIS.Utility.Util.getValueOfString(VIS.Env.getCtx().getContext("$AllowNonItem")) == "N") {\n      sql += " INNER JOIN M_Product p ON ol.M_Product_ID = p.M_Product_ID AND p.ProductType = \'I\'";\n    }\n    sql += ") t GROUP BY C_Order_ID,C_OrderLine_ID,QtyOrdered " + " HAVING QtyOrdered > SUM(nvl(Qty,0)) AND QtyOrdered > SUM(NVL(QtyInvoiced,0)))";\n    var lookupOrder = VIS.MLookupFactory.get(VIS.Env.getCtx(), VIS.Env.getWindowNo(), 0, VIS.DisplayType.Search, "C_Order_ID", 0, false, sql);\n    this.cmbOrder = new VIS.Controls.VTextBoxButton("C_Order_ID", true, false, true, VIS.DisplayType.Search, lookupOrder);\n\n    //$.ajax({\n    //    url: VIS.Application.contextUrl + "VCreateFrom/VCreateGetOrders",\n    //    type: \'POST\',\n    //    //async: false,\n    //    data: {\n    //        displays: display,\n    //        columns: column,\n    //        C_BPartner_IDs: C_BPartner_ID,\n    //        isReturnTrxs: isReturnTrx,\n    //        OrgIds: OrgId,\n    //        IsDrop: _isdrop,\n    //        IsSOTrx: _isSoTrx,\n    //        forInvoices: forInvoice,\n    //        recordID: recordId,\n    //    },\n    //    success: function (datas) {\n    //        var ress = datas.result;\n    //        if (ress && ress.length > 0) {\n    //            try {\n    //                var key, value;\n    //                for (var i = 0; i < ress.length; i++) {\n    //                    key = VIS.Utility.Util.getValueOfInt(ress[i].key);\n    //                    value = VIS.Utility.encodeText(ress[i].value);\n    //                    //pairs.push({ ID: key, value: value });\n\n    //                    if (i == 0) {\n    //                        $self.cmbOrder.getControl().append(" <option value=0> </option>");\n    //                    }\n    //                    $self.cmbOrder.getControl().append(" <option value=" + key + ">" + value + "</option>");\n    //                }\n    //                $self.cmbOrder.getControl().prop(\'selectedIndex\', 0);\n    //            }\n    //            catch (e) {\n\n    //            }\n    //        }\n    //    },\n    //    error: function (e) {\n    //        $self.log.info(e);\n    //    },\n    //});\n  };\n\n  /**\r\n  * Get Provisional Invoice into provisional invoice combo\r\n  * @param {any} ctx\r\n  * @param {any} C_BPartner_ID\r\n  * @param {any} isReturnTrx\r\n  */\n  VCreateFrom.prototype.getProvisionlInvoices = function (ctx, C_BPartner_ID, isReturnTrx) {\n    //var display = "i.DocumentNo||\' - \' ||".concat(VIS.DB.to_char("i.DateInvoiced", VIS.DisplayType.Date, VIS.Env.getAD_Language(ctx))).concat("||\' - \'||").concat(\n    //    VIS.DB.to_char("i.GrandTotal", VIS.DisplayType.Amount, VIS.Env.getAD_Language(ctx)));\n\n    var OrgId = VIS.Env.getCtx().getContextAsInt(this.windowNo, "AD_Org_ID");\n    var recordId = VIS.context.getWindowContextAsInt(this.windowNo, "C_Invoice_ID", true);\n    var whereCondition = "";\n    var sql = " C_ProvisionalInvoice.C_ProvisionalInvoice_ID IN (SELECT DISTINCT i.C_ProvisionalInvoice_ID FROM C_ProvisionalInvoice i" + " INNER JOIN C_DocType d ON (i.C_DocType_ID = d.C_DocType_ID) INNER JOIN C_ProvisionalInvoiceLine pil" + " ON i.C_ProvisionalInvoice_ID = pil.C_ProvisionalInvoice_ID WHERE i.C_BPartner_ID = " + C_BPartner_ID + " AND i.IsSOTrx = \'N\' AND d.IsReturnTrx = \'" + (isReturnTrx ? "Y" : "N") + "\' AND i.DocStatus IN(\'CL\', \'CO\')" + " AND NVL(pil.C_ProvisionalInvoiceLine_ID, 0) NOT IN (" + "SELECT NVL(C_ProvisionalInvoiceLine_ID, 0) FROM (SELECT NVL(il.C_ProvisionalInvoiceLine_ID, 0) AS C_ProvisionalInvoiceLine_ID" + " FROM C_InvoiceLine il INNER JOIN C_Invoice inv ON inv.C_Invoice_ID = il.C_Invoice_ID WHERE inv.IsActive = \'Y\'" + " AND inv.IsSOTrx=\'N\' AND inv.DocStatus NOT IN (\'VO\', \'RE\') AND inv.C_ProvisionalInvoice_ID=i.C_ProvisionalInvoice_ID" + ") pi) ";\n    if (recordId > 0) {\n      whereCondition = VIS.dataContext.getJSONData("VCreateFrom/GetConversionWhere", {\n        "columns": "",\n        "forInvoices": false,\n        "recordID": recordId,\n        "Table": "i"\n      }, null);\n    }\n    if (whereCondition != null && whereCondition != "") {\n      sql += whereCondition;\n    }\n    sql += ")";\n    var lookupProvInv = VIS.MLookupFactory.get(VIS.Env.getCtx(), this.windowNo, 0, VIS.DisplayType.Search, "C_ProvisionalInvoice_ID", 0, false, sql);\n    this.cmbProvisionalInvoice = new VIS.Controls.VTextBoxButton("C_ProvisionalInvoice_ID", true, false, true, VIS.DisplayType.Search, lookupProvInv);\n\n    //$.ajax({\n    //    url: VIS.Application.contextUrl + "VCreateFrom/VCreateGetProvisionalInvoices",\n    //    type: \'POST\',\n    //    //async: false,\n    //    data: {\n    //        displays: display,\n    //        C_BPartner_IDs: C_BPartner_ID,\n    //        isReturnTrxs: isReturnTrx,\n    //        OrgIds: OrgId,\n    //        recordID: recordId,\n    //    },\n    //    success: function (datas) {\n    //        var ress = datas.result;\n    //        if (ress && ress.length > 0) {\n    //            try {\n    //                var key, value;\n    //                for (var i = 0; i < ress.length; i++) {\n    //                    key = VIS.Utility.Util.getValueOfInt(ress[i].key);\n    //                    value = VIS.Utility.encodeText(ress[i].value);\n\n    //                    if (i == 0) {\n    //                        $self.cmbProvisionalInvoice.getControl().append(" <option value=0> </option>");\n    //                    }\n    //                    $self.cmbProvisionalInvoice.getControl().append(" <option value=" + key + ">" + value + "</option>");\n    //                }\n    //                $self.cmbProvisionalInvoice.getControl().prop(\'selectedIndex\', 0);\n    //            }\n    //            catch (e) {\n\n    //            }\n    //        }\n    //    },\n    //    error: function (e) {\n    //        $self.log.info(e);\n    //    },\n    //});\n  };\n  /**\r\n   * Load Order for Provisional Invoice\r\n   * @param {any} ctx\r\n   * @param {any} C_BPartner_ID\r\n   * @param {any} isReturnTrx\r\n   */\n  VCreateFrom.prototype.getOrdersForProvisional = function (ctx, C_BPartner_ID, isReturnTrx) {\n    //var display = "o.DocumentNo||\' - \' ||".concat(VIS.DB.to_char("o.DateOrdered", VIS.DisplayType.Date, VIS.Env.getAD_Language(ctx))).concat("||\' - \'||").concat(\n    //    VIS.DB.to_char("o.GrandTotal", VIS.DisplayType.Amount, VIS.Env.getAD_Language(ctx)));\n\n    var column = "m.C_InvoiceLine_ID";\n    var OrgId = VIS.Env.getCtx().getContextAsInt(this.windowNo, "AD_Org_ID");\n    var _isdrop = "Y".equals(VIS.Env.getCtx().getWindowContext(this.windowNo, "IsDropShip"));\n    var _isSoTrx = "Y".equals(VIS.Env.getCtx().getWindowContext(this.windowNo, "IsSOTrx"));\n    var recordId = VIS.context.getWindowContextAsInt(this.windowNo, "C_ProvisionalInvoice_ID", true);\n    var whereCondition = "";\n    var sql = " C_Order.IsSOTrx =\'" + (_isSoTrx ? "Y" : "N") + "\' AND C_Order.IsBlanketTrx=\'N\' AND C_Order.ISSALESQUOTATION=\'N\' AND C_Order.DocStatus IN (\'CL\', \'CO\')";\n    if (OrgId > 0) {\n      sql += " AND C_Order.AD_Org_ID = " + OrgId;\n    }\n    if (C_BPartner_ID > 0) {\n      sql += " AND (C_Order.C_BPartner_ID = " + C_BPartner_ID + " OR C_Order.Bill_BPartner_ID = " + C_BPartner_ID + ")";\n    }\n    if (recordId > 0) {\n      whereCondition = VIS.dataContext.getJSONData("VCreateFrom/GetConversionWhere", {\n        "columns": column,\n        "forInvoices": false,\n        "recordID": recordId,\n        "Table": "C_Order"\n      }, null);\n    }\n    if (whereCondition != null && whereCondition != "") {\n      sql += whereCondition;\n    }\n    sql += " AND C_Order.IsReturnTrx=\'" + (isReturnTrx ? "Y" : "N") + "\' AND C_Order.IsDropShip=\'" + (_isdrop ? "Y" : "N") + "\'  AND C_Order.C_Order_ID IN " + "(SELECT C_Order_ID FROM (SELECT ol.C_Order_ID,ol.C_OrderLine_ID,ol.QtyOrdered," + " (SELECT SUM(m.qty) FROM m_matchPO m WHERE ol.C_OrderLine_ID = m.C_OrderLine_ID AND NVL(" + column + ", 0) != 0 AND m.ISACTIVE = \'Y\') AS Qty," + " (SELECT SUM(IL.QtyInvoiced)  FROM C_INVOICELINE IL INNER JOIN C_Invoice I ON I.C_INVOICE_ID = IL.C_INVOICE_ID" + " WHERE il.ISACTIVE = \'Y\' AND I.DOCSTATUS NOT IN(\'VO\', \'RE\') AND OL.C_ORDERLINE_ID = IL.C_ORDERLINE_ID) AS QtyInvoiced," + " (SELECT SUM(IL.QtyInvoiced)  FROM C_ProvisionalInvoiceLine IL INNER JOIN C_ProvisionalInvoice I ON I.C_ProvisionalInvoice_ID = IL.C_ProvisionalInvoice_ID" + " WHERE il.ISACTIVE = \'Y\' AND I.DOCSTATUS NOT IN(\'VO\', \'RE\') AND OL.C_ORDERLINE_ID = IL.C_ORDERLINE_ID) AS QtyProvisional FROM C_OrderLine ol ";\n\n    // Get Orders based on the setting taken on Tenant to allow non item Product\n    if (VIS.Utility.Util.getValueOfString(VIS.Env.getCtx().getContext("$AllowNonItem")) == "N") {\n      sql += " INNER JOIN M_Product p ON ol.M_Product_ID = p.M_Product_ID AND p.ProductType = \'I\'";\n    }\n    sql += ") t GROUP BY C_Order_ID,C_OrderLine_ID,QtyOrdered " + " HAVING QtyOrdered > SUM(nvl(Qty,0)) AND QtyOrdered > SUM(NVL(QtyInvoiced,0)) AND QtyOrdered > SUM(NVL(QtyProvisional, 0)))";\n    var lookupOrder = VIS.MLookupFactory.get(VIS.Env.getCtx(), this.windowNo, 0, VIS.DisplayType.Search, "C_Order_ID", 0, false, sql);\n    this.cmbOrder = new VIS.Controls.VTextBoxButton("C_Order_ID", true, false, true, VIS.DisplayType.Search, lookupOrder);\n\n    //$.ajax({\n    //    url: VIS.Application.contextUrl + "VCreateFrom/VCreateGetOrders",\n    //    type: \'POST\',\n    //    //async: false,\n    //    data: {\n    //        displays: display,\n    //        columns: column,\n    //        C_BPartner_IDs: C_BPartner_ID,\n    //        isReturnTrxs: isReturnTrx,\n    //        OrgIds: OrgId,\n    //        IsDrop: _isdrop,\n    //        IsSOTrx: _isSoTrx,\n    //        forInvoices: false,\n    //        recordID: recordId,\n    //    },\n    //    success: function (datas) {\n    //        var ress = datas.result;\n    //        if (ress && ress.length > 0) {\n    //            try {\n    //                var key, value;\n    //                for (var i = 0; i < ress.length; i++) {\n    //                    key = VIS.Utility.Util.getValueOfInt(ress[i].key);\n    //                    value = VIS.Utility.encodeText(ress[i].value);\n    //                    if (i == 0) {\n    //                        $self.cmbOrder.getControl().append(" <option value=0> </option>");\n    //                    }\n    //                    $self.cmbOrder.getControl().append(" <option value=" + key + ">" + value + "</option>");\n    //                }\n    //                $self.cmbOrder.getControl().prop(\'selectedIndex\', 0);\n    //            }\n    //            catch (e) { }\n    //        }\n    //    },\n    //    error: function (e) {\n    //        $self.log.info(e);\n    //    },\n    //});\n  };\n  VCreateFrom.prototype.jbInit = function () {\n    this.init();\n    this.lblBankAccount.getControl().text(VIS.Msg.getMsg("BankAcctCurrency"));\n    this.lblBPartner.getControl().text(VIS.Msg.getMsg("BusinessPartner"));\n    if ("Y".equals(VIS.Env.getCtx().getWindowContext(this.windowNo, "IsReturnTrx"))) {\n      this.lblOrder.getControl().text(VIS.Msg.getMsg("RMA"));\n    } else {\n      this.lblOrder.getControl().text(VIS.Msg.getMsg("Order"));\n    }\n    this.lblInvoice.getControl().text(VIS.Msg.getMsg("Invoice"));\n    this.lblShipment.getControl().text(VIS.Msg.getMsg("Shipment/Receipt"));\n    this.lblLocator.getControl().text(VIS.Msg.getMsg("M_Locator_ID"));\n    this.lblDeliveryDate.getControl().text(VIS.Msg.getMsg("DeliveryDate"));\n    this.lblProduct.getControl().text(VIS.Msg.getMsg("ProductName"));\n    // informative lable : document no on inout and invoice\n\n    this.lblDocumentNoRef.getControl().text(VIS.Msg.getMsg("DocumentNo"));\n    // Added by Bharat on 05/May/2017 for Seach control on Bank Statement\n    this.lblDocumentNo.getControl().text(VIS.Msg.getMsg("DocumentNo"));\n    this.lblDate.getControl().text(VIS.Msg.getMsg("DateAcct"));\n    this.lblAmount.getControl().text(VIS.Msg.getMsg("Amount"));\n    this.lblDepositSlip.getControl().text(VIS.Msg.getMsg("DepositSlipNo"));\n    this.lblAuthCode.getControl().text(VIS.Msg.getMsg("AuthCode"));\n    this.lblCheckNo.getControl().text(VIS.Msg.getMsg("CheckNo"));\n    this.lblProvisionalInvoice.getControl().text(VIS.Msg.getMsg("ProvisionalInvoice"));\n\n    //First Row\n    /*******************************/\n    var line = $("<div class=\'VIS_Pref_show\'>");\n\n    //First Column\n    /*******************************/\n    var col = $("<div class=\'VIS_Pref_dd\'>");\n    //var label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n\n    //if (VIS.Application.isRTL) {\n    //    label = $("<div style=\'float: right; margin-right: 5px; width: 100%; text-align: left\'>");\n    //}\n\n    //var lableCtrl = $("<h5 style=\'width: 100%\'>");\n    //var ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n    var DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n    var DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n    var DivCtrlBtnWrap = $("<div class=\'input-group-append\'>");\n    this.topDiv.append(line);\n    line.append(col);\n    col.append(DivInputWrap);\n    DivInputWrap.append(DivInputCtrlWrap);\n    DivInputWrap.append(DivCtrlBtnWrap);\n\n    //else {\n    // To append Business Partner Control.. \n    if (this.vBPartner != null) {\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      //col.append(DivInputWrap);\n      //DivInputWrap.append(DivInputCtrlWrap);\n      //DivInputWrap.append(DivCtrlBtnWrap);\n      if (this.cmbBankAccount != null) {\n        DivInputCtrlWrap.append(this.vBPartner.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n        DivCtrlBtnWrap.append(this.vBPartner.getBtn(0));\n        DivCtrlBtnWrap.append(this.vBPartner.getBtn(1));\n      } else {\n        DivInputCtrlWrap.append(this.vBPartner.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n        DivCtrlBtnWrap.append(this.vBPartner.getBtn(0));\n      }\n      DivInputCtrlWrap.append(this.lblBPartner.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n    //End Business Partner Control\n    //}\n    //End First Column\n    /*******************************/\n\n    //Second Column\n    /*******************************/\n    col = $("<div class=\'VIS_Pref_dd\'>");\n    //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n    //if (VIS.Application.isRTL) {\n    //    label = $("<div style=\'float: right; margin-right: 5px; width: 30%; text-align: left\'>");\n    //}\n    //lableCtrl = $("<h5 style=\'width: 100%\'>");\n    //ctrl = $("<div class=\'VIS_Pref_slide-show vis-pref-ctrlwrap\'>");\n    DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n    DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n    DivCtrlBtnWrap = $("<div class=\'input-group-append\'>");\n    line.append(col);\n    col.append(DivInputWrap);\n    DivInputWrap.append(DivInputCtrlWrap);\n    DivInputWrap.append(DivCtrlBtnWrap);\n\n    //if (VIS.Application.isRTL) {\n    //    //reverse controls order            \n    //    if (this.vBPartner != null) {\n    //        //ctrl.removeClass("VIS_Pref_slide-show pp");\n    //        //col.append(DivInputWrap);\n    //        //DivInputWrap.append(DivInputCtrlWrap);\n    //        //DivInputWrap.append(DivCtrlBtnWrap);\n    //        if (this.cmbBankAccount != null) {\n    //            DivInputCtrlWrap.append(this.vBPartner.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n    //            DivCtrlBtnWrap.append(this.vBPartner.getBtn(0));\n    //            DivCtrlBtnWrap.append(this.vBPartner.getBtn(1));\n    //        }\n    //        else {\n    //            DivInputCtrlWrap.append(this.vBPartner.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n    //            DivCtrlBtnWrap.append(this.vBPartner.getBtn(0));\n    //        }\n    //        DivInputCtrlWrap.append(this.lblBPartner.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    //    }\n    //}\n    //else {\n    if (this.cmbBankAccount != null) {\n      //col.append(DivInputWrap);\n      //DivInputWrap.append(DivInputCtrlWrap);\n      DivInputCtrlWrap.append(this.cmbBankAccount.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      DivInputCtrlWrap.append(this.lblBankAccount.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    } else {\n      if (this.DocumentNoRef != null) {\n        //ctrl.removeClass("VIS_Pref_slide-show pp");\n        //col.append(DivInputWrap);\n        //DivInputWrap.append(DivInputCtrlWrap);\n        DivInputCtrlWrap.append(this.DocumentNoRef.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n        DivInputCtrlWrap.append(this.lblDocumentNoRef.getControl().addClass(\'VIS_Pref_Label_Font\'));\n      } else if (this.cmbProvisionalInvoice != null && $self.mTab.keyColumnName == "C_Invoice_ID" && "N".equals(VIS.Env.getCtx().getWindowContext(this.windowNo, "IsSOTrx"))) {\n        // show Provisional Invoice column on AP Invoice\n        DivInputCtrlWrap.append(this.cmbProvisionalInvoice.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n        DivCtrlBtnWrap.append(this.cmbProvisionalInvoice.getBtn(0));\n        DivCtrlBtnWrap.append(this.cmbProvisionalInvoice.getBtn(1));\n        DivInputCtrlWrap.append(this.lblProvisionalInvoice.getControl().addClass(\'VIS_Pref_Label_Font\'));\n      }\n    }\n    //}\n    //End Second Column\n    /*******************************/\n    //End First Row\n    /*******************************/\n\n    //Second Row\n    /*******************************/\n    line = $("<div class=\'VIS_Pref_show\'>");\n    col = $("<div class=\'VIS_Pref_dd\'>");\n    DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n    DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n    DivCtrlBtnWrap = $("<div class=\'input-group-append\'>");\n    if (this.Amount != null) {\n      //DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      //DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 40%; text-align: left\'>");\n      //}\n    } else {\n      //col = $("<div class=\'VIS_Pref_dd\'>");\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      //DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");            \n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 30%; text-align: left\'>");\n      //}\n    }\n    //lableCtrl = $("<h5 style=\'width: 100%\'>");\n\n    this.topDiv.append(line);\n    line.append(col);\n    col.append(DivInputWrap);\n    DivInputWrap.append(DivInputCtrlWrap);\n    DivInputWrap.append(DivCtrlBtnWrap);\n\n    //if (VIS.Application.isRTL) {\n    //    //reverse controls order\n    //    if (this.Date != null) {\n    //        //ctrl.removeClass("VIS_Pref_slide-show pp");\n    //        col.append(DivInputWrap);\n    //        DivInputCtrlWrap.append(this.Date.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n    //        DivInputCtrlWrap.append(this.lblDate.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    //    }\n    //}\n    //else {\n    if (this.DocumentNo != null) {\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      col.append(DivInputWrap);\n      DivInputCtrlWrap.append(this.DocumentNo.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      DivInputCtrlWrap.append(this.lblDocumentNo.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n    //}\n\n    //if (VIS.Application.isRTL) {\n    //    //reverse controls order\n    //    if (this.cmbInvoice != null) {\n    //        col.append(DivInputWrap);\n    //        DivInputCtrlWrap.append(this.cmbInvoice.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n    //        DivInputCtrlWrap.append(this.lblInvoice.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    //    }\n    //    if (this.cmbShipment != null) {\n    //        col.append(DivInputWrap);\n    //        DivInputCtrlWrap.append(this.cmbShipment.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n    //        DivInputCtrlWrap.append(this.lblShipment.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    //    }\n    //}\n    // else {\n\n    if (this.cmbOrder != null) {\n      col.append(DivInputWrap);\n      DivInputCtrlWrap.append(this.cmbOrder.getControl());\n      DivCtrlBtnWrap.append(this.cmbOrder.getBtn(0));\n      DivCtrlBtnWrap.append(this.cmbOrder.getBtn(1));\n      DivInputCtrlWrap.append(this.lblOrder.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n    //}\n\n    // Amount Control\n    if (this.Amount != null) {\n      col = $("<div class=\'VIS_Pref_dd\'>");\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //lableCtrl = $("<h5 style=\'width: 100%\'>");\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n      line.append(col);\n      col.append(DivInputWrap);\n      DivInputWrap.append(DivInputCtrlWrap);\n\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      //col.append(DivInputWrap);\n      DivInputCtrlWrap.append(this.Amount.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      DivInputCtrlWrap.append(this.lblAmount.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n\n    // Reset Column size\n    if (this.Amount != null) {\n      col = $("<div class=\'VIS_Pref_dd\'>");\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 40%; text-align: left\'>");\n      //}\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n      DivCtrlBtnWrap = $("<div class=\'input-group-append\'>");\n    } else {\n      col = $("<div class=\'VIS_Pref_dd\'>");\n\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 30%; text-align: left\'>");\n      //}\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n      DivCtrlBtnWrap = $("<div class=\'input-group-append\'>");\n    }\n    //lableCtrl = $("<h5 style=\'width: 100%\'>");\n\n    line.append(col);\n    col.append(DivInputWrap);\n    DivInputWrap.append(DivInputCtrlWrap);\n    DivInputWrap.append(DivCtrlBtnWrap);\n\n    //if (VIS.Application.isRTL) {\n    //    //reverse controls order\n    //    if (this.cmbOrder != null) {\n    //        //col.append(DivInputWrap);\n    //        DivInputCtrlWrap.append(this.cmbOrder.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n    //        DivInputCtrlWrap.append(this.lblOrder.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    //    }\n\n    //} \n    //else {\n    if (this.cmbInvoice != null) {\n      //col.append(DivInputWrap);\n      DivInputCtrlWrap.append(this.cmbInvoice.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      DivCtrlBtnWrap.append(this.cmbInvoice.getBtn(0));\n      DivCtrlBtnWrap.append(this.cmbInvoice.getBtn(1));\n      DivInputCtrlWrap.append(this.lblInvoice.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n    if (this.cmbShipment != null) {\n      //col.append(DivInputWrap);\n      DivInputCtrlWrap.append(this.cmbShipment.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      DivCtrlBtnWrap.append(this.cmbShipment.getBtn(0));\n      DivCtrlBtnWrap.append(this.cmbShipment.getBtn(1));\n      DivInputCtrlWrap.append(this.lblShipment.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n    // }\n\n    //if (VIS.Application.isRTL) {\n    //    //reverse controls order\n    //    if (this.DocumentNo != null) {\n    //        //ctrl.removeClass("VIS_Pref_slide-show pp");\n    //        //col.append(DivInputWrap);\n    //        DivInputCtrlWrap.append(this.DocumentNo.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n    //        DivInputCtrlWrap.append(this.lblDocumentNo.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    //    }\n    //}\n    //else {\n    if (this.Date != null) {\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      //col.append(DivInputWrap);\n      DivInputCtrlWrap.append(this.Date.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      DivInputCtrlWrap.append(this.lblDate.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n    // }\n\n    //End Second Row\n    /*******************************/\n\n    //Third Row\n    /*******************************/\n    if (this.locatorField != null || this.cmbContainer != null) {\n      this.middelDiv.css(\'height\', \'48.5%\');\n      line = $("<div class=\'VIS_Pref_show\'>");\n      col = $("<div class=\'VIS_Pref_dd\'>");\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 30%; text-align: left\'>");\n      //}\n      //lableCtrl = $("<h5 style=\'width: 100%\'>");\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n      DivCtrlBtnWrap = $("<div class=\'input-group-append\'>");\n      this.topDiv.append(line);\n      line.append(col);\n      col.append(DivInputWrap);\n      DivInputWrap.append(DivInputCtrlWrap);\n      DivInputWrap.append(DivCtrlBtnWrap);\n\n      //if (VIS.Application.isRTL) {\n      //    // Added by Manjot on 12/9/18 for combobox of Container on Material Receipt\n      //    if (this.cmbContainer != null) {\n      //        //var src = VIS.Application.contextUrl + "Areas/VIS/Images/pallet-icon.png";\n      //        col.css(\'visibility\', \'hidden\');\n      //        //.append(ctrl);\n      //        if (VIS.context.ctx["#PRODUCT_CONTAINER_APPLICABLE"] != undefined) {\n      //            if (VIS.context.ctx["#PRODUCT_CONTAINER_APPLICABLE"].equals("Y", true)) {\n      //                col.css(\'visibility\', \'visible\');\n      //                //.append(ctrl);\n      //                this.ContainerTree.removeClass("VIS_Tree-Container-disabled");\n      //            }\n      //        }\n      //        DivInputCtrlWrap.append(this.cmbContainer.getControl().attr("disabled", true).attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      //        DivCtrlBtnWrap.append(this.ContainerTree);\n      //        DivInputCtrlWrap.append(this.lblContainer.getControl().addClass(\'VIS_Pref_Label_Font\'));\n      //    }\n      //}\n      //else {\n\n      if (this.locatorField != null) {\n        //ctrl.removeClass("VIS_Pref_slide-show pp");\n        //col.append(ctrl);\n        DivInputCtrlWrap.append(this.locatorField.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n        DivCtrlBtnWrap.append(this.locatorField.getBtn(0));\n        DivInputCtrlWrap.append(this.lblLocator.getControl().addClass(\'VIS_Pref_Label_Font\'));\n      }\n      //}\n\n      col = $("<div class=\'VIS_Pref_dd\'>");\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 30%; text-align: left\'>");\n      //}\n      //lableCtrl = $("<h5 style=\'width: 100%\'>");\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n      DivCtrlBtnWrap = $("<div class=\'input-group-append\'>");\n      line.append(col);\n      col.append(DivInputWrap);\n      DivInputWrap.append(DivInputCtrlWrap);\n      DivInputWrap.append(DivCtrlBtnWrap);\n\n      //if (VIS.Application.isRTL) {\n      //    if (this.locatorField != null) {\n      //        //ctrl.removeClass("VIS_Pref_slide-show pp");\n      //        //col.append(ctrl);\n      //        DivInputCtrlWrap.append(this.locatorField.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n      //        DivCtrlBtnWrap.append(this.locatorField.getBtn(0));\n      //        DivInputCtrlWrap.append(this.lblLocator.getControl().addClass(\'VIS_Pref_Label_Font\'));\n      //    }\n      //}\n      //else {\n      // Added by Manjot on 12/9/18 for combobox of Container on Material Receipt\n      if (this.cmbContainer != null) {\n        //var src = VIS.Application.contextUrl + "Areas/VIS/Images/pallet-icon.png";\n        col.css(\'visibility\', \'hidden\'); //.append(ctrl);\n        if (VIS.context.ctx["#PRODUCT_CONTAINER_APPLICABLE"] != undefined) {\n          if (VIS.context.ctx["#PRODUCT_CONTAINER_APPLICABLE"].equals("Y", true)) {\n            col.css(\'visibility\', \'visible\'); //.append(ctrl);\n            this.ContainerTree.removeClass("VIS_Tree-Container-disabled");\n          }\n        }\n        DivInputCtrlWrap.append(this.cmbContainer.getControl().attr("disabled", true).attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n        DivCtrlBtnWrap.append(this.ContainerTree);\n        DivInputCtrlWrap.append(this.lblContainer.getControl().addClass(\'VIS_Pref_Label_Font\'));\n      }\n      //}\n    }\n    //End Third Row\n    /*******************************/\n\n    //Forth Row\n    /*******************************/\n\n    line = $("<div class=\'VIS_Pref_show\'>");\n\n    // Reset Size\n    if (this.CheckNo != null) {\n      col = $("<div class=\'VIS_Pref_dd\'>");\n\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 40%; text-align: left\'>");\n      //}\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n      DivCtrlBtnWrap = $("<div class=\'input-group-append\'>");\n    } else {\n      col = $("<div class=\'VIS_Pref_dd\'>");\n\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 30%; text-align: left\'>");\n      //}\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n      DivCtrlBtnWrap = $("<div class=\'input-group-append\'>");\n    }\n    //lableCtrl = $("<h5 style=\'width: 100%\'>");\n\n    // VA228: Increase hegight of middle div when open from Provisional Invoice\n    if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n      this.middelDiv.css(\'height\', \'64%\');\n    } else if ($self.mTab.keyColumnName == "C_Invoice_ID") {\n      this.middelDiv.css(\'height\', \'62%\');\n    } else if ($self.mTab.keyColumnName == "M_InOut_ID") {\n      this.middelDiv.css(\'height\', \'54%\');\n    }\n    this.topDiv.append(line);\n    line.append(col);\n    col.append(DivInputWrap);\n    DivInputWrap.append(DivInputCtrlWrap);\n    DivInputWrap.append(DivCtrlBtnWrap);\n    // Added by Bharat on 05/May/2017\n    //if (VIS.Application.isRTL) {\n    //    //reverse controls order\n    //    if (this.AuthCode != null) {\n    //        //ctrl.removeClass("VIS_Pref_slide-show pp");\n    //        //col.append(ctrl);\n    //        DivInputCtrlWrap.append(this.AuthCode.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n    //        DivInputCtrlWrap.append(this.lblAuthCode.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    //    }\n    //}\n    //else {\n    if (this.DepositSlip != null) {\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      //col.append(ctrl);\n      DivInputCtrlWrap.append(this.DepositSlip.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      DivInputCtrlWrap.append(this.lblDepositSlip.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n    //}\n\n    //if (VIS.Application.isRTL) {\n    //    //reverse controls order\n    //    if (this.vProduct != null) {\n    //        //ctrl.removeClass("VIS_Pref_slide-show pp");\n    //        //col.append(ctrl);\n    //        DivInputCtrlWrap.append(this.vProduct.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n    //        DivCtrlBtnWrap.append(this.vProduct.getBtn(0));\n    //        DivCtrlBtnWrap.append(this.vProduct.getBtn(1));\n    //        DivInputCtrlWrap.append(this.lblProduct.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    //    }\n    //}\n    //else {\n    if (this.deliveryDate != null) {\n      //col.append(ctrl);\n      DivInputCtrlWrap.append(this.deliveryDate.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      DivInputCtrlWrap.append(this.lblDeliveryDate.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n    //}\n\n    // Check No Control\n    if (this.CheckNo != null) {\n      col = $("<div class=\'VIS_Pref_dd\'>");\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //lableCtrl = $("<h5 style=\'width: 100%\'>");\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n      line.append(col);\n      col.append(DivInputWrap);\n      DivInputWrap.append(DivInputCtrlWrap);\n\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      //col.append(ctrl);\n      DivInputCtrlWrap.append(this.CheckNo.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      DivInputCtrlWrap.append(this.lblCheckNo.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n\n    // Reset Column Size\n    if (this.CheckNo != null) {\n      col = $("<div class=\'VIS_Pref_dd\'>");\n\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 40%; text-align: left\'>");\n      //}\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n    } else {\n      col = $("<div class=\'VIS_Pref_dd\'>");\n\n      //label = $("<div class=\'vis-pref-ctrl-lblwrp\'>");\n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 30%; text-align: left\'>");\n      //}\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n      DivCtrlBtnWrap = $("<div class=\'input-group-append\'>");\n    }\n    //lableCtrl = $("<h5 style=\'width: 100%\'>");\n\n    line.append(col);\n    col.append(DivInputWrap);\n    DivInputWrap.append(DivInputCtrlWrap);\n    DivInputWrap.append(DivCtrlBtnWrap);\n\n    //if (VIS.Application.isRTL) {\n    //    //reverse controls order\n    //    if (this.deliveryDate != null) {\n    //        //col.append(ctrl);\n    //        DivInputCtrlWrap.append(this.deliveryDate.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n    //        DivInputCtrlWrap.append(this.lblDeliveryDate.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    //    }\n    //}\n    //else {\n    if (this.vProduct != null) {\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      //col.append(ctrl);\n      DivInputCtrlWrap.append(this.vProduct.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n      DivCtrlBtnWrap.append(this.vProduct.getBtn(0));\n      DivCtrlBtnWrap.append(this.vProduct.getBtn(1));\n      DivInputCtrlWrap.append(this.lblProduct.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n    //}\n\n    //if (VIS.Application.isRTL) {\n    //    //reverse controls order\n    //    if (this.DepositSlip != null) {\n    //        //ctrl.removeClass("VIS_Pref_slide-show pp");\n    //        //col.append(ctrl);\n    //        DivInputCtrlWrap.append(this.DepositSlip.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n    //        DivInputCtrlWrap.append(this.lblDepositSlip.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    //    }\n    //}\n    //else {\n    if (this.AuthCode != null) {\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      //col.append(ctrl);\n      DivInputCtrlWrap.append(this.AuthCode.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \'));\n      DivInputCtrlWrap.append(this.lblAuthCode.getControl().addClass(\'VIS_Pref_Label_Font\'));\n    }\n    //}\n    //End Forth Row\n    /******************************/\n\n    //Fifth Row\n    /******************************/\n    // specific to Batir\n    //if (window.BTR001) {\n    if (this.relatedToOrg != null) {\n      line = $("<div class=\'VIS_Pref_show\'>");\n      col = $("<div class=\'VIS_Pref_dd\'>");\n      //label = $("<div class=\'\'>");\n      //if (VIS.Application.isRTL) {\n      //    label = $("<div style=\'float: right; margin-right: 5px; width: 30%; text-align: left\'>");\n      //}\n      //lableCtrl = $("<h5 style=\'width: 100%\'>");\n      //ctrl = $("<div class=\'VIS_Pref_slide-show pp vis-pref-ctrlwrap\'>");\n      DivInputWrap = $("<div class=\'input-group vis-input-wrap\'></div>");\n      DivInputCtrlWrap = $("<div class=\'vis-control-wrap\'></div>");\n      this.topDiv.append(line);\n      line.append(col);\n      col.append(DivInputWrap);\n      DivInputWrap.append(DivInputCtrlWrap);\n\n      //if (window.DTD001) {\n      DivInputCtrlWrap.append(this.relatedToOrg.getControl());\n\n      /*VIS_045 - 13-Nov-2024, Hide Related to Organization, assign by (Surya)*/\n      line.hide();\n    }\n    //End Fifth Row\n    /******************************/\n  };\n  VCreateFrom.prototype.init = function () {\n    this.createPageSettings();\n    this.divPaging.append(this.ulPaging);\n    this.$root.append(this.topDiv).append(this.middelDiv).append(this.divPaging).append(this.bottomDiv);\n    this.bottomDiv.append(this.selectAllButton);\n    this.bottomDiv.append(this.btnRefresh);\n    this.bottomDiv.append(this.cancelbtn);\n    this.bottomDiv.append(this.Applybtn);\n    this.bottomDiv.append(this.Okbtn);\n    this.bottomDiv.append(this.divPaging);\n    //this.dGrid= VIS.Utility.Util.gridLoad(,,);\n    this.middelDiv.append(this.dGrid);\n    $self = this;\n    this.Okbtn.on("click", function () {\n      //JID_0225: if there is already line inserted through Apply button, form will be closed on OK button.\n      if ($self.isApplied) {\n        $self.$root.dialog(\'close\');\n        return;\n      }\n      $self.setBusy(true);\n      var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n      var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n      var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n      var C_ProvisionalInvoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbProvisionalInvoice.getValue());\n      var selection = null;\n      if ($self.dGrid != null) {\n        selection = $self.dGrid.getSelection();\n      }\n      if (selection == null || selection.length == 0) {\n        VIS.ADialog.info("RecordSelectionRequired");\n        $self.setBusy(false);\n        return;\n      }\n      if ($self.locatorField != null) {\n        // Change By Mohit 30/06/2016\n        //$self.multiValues = [];\n        //for shipment haveing locator filed                \n        if ($self.dGrid != null && C_Order_ID > 0) {\n          //var selection = $self.dGrid.getSelection();\n          for (item in selection) {\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Order_ID_K == $self.dGrid.get(selection[item])["C_Order_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n              //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n              //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n            }\n          }\n        } else if ($self.dGrid != null && C_Invoice_ID > 0) {\n          //var selection = $self.dGrid.getSelection();\n          for (item in selection) {\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Invoice_ID_K == $self.dGrid.get(selection[item])["C_Invoice_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n              //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n              //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n            }\n          }\n        }\n        // Change By Mohit 30/06/2016\n        $self.MergeItemsForSave();\n        VIS.VCreateFromShipment.prototype.saveMInOut(false);\n      } else if ($self.cmbBankAccount != null) {\n        if ($self.dGrid != null) {\n          //var selection = $self.dGrid.getSelection();\n          for (item in selection) {\n            //JID_ 1743 if Account Date is not selected showing message\n            if ($self.dGrid.get(selection[item])["Date"] == "") {\n              VIS.ADialog.error("VIS_PLAccountDate");\n              return false;\n            }\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.C_Payment_ID_K == $self.dGrid.get(selection[item])["C_Payment_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n              //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n              //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n            }\n          }\n        }\n        VIS.VCreateFromStatement.prototype.saveStatment();\n        $self.middelDiv.css("height", "61%");\n      } else {\n        if ($self.dGrid != null && C_Order_ID > 0) {\n          //var selection = $self.dGrid.getSelection();\n          for (item in selection) {\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Order_ID_K == $self.dGrid.get(selection[item])["C_Order_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n              //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n              //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n            }\n          }\n        }\n        if ($self.dGrid != null && M_InOut_ID > 0) {\n          //var selection = $self.dGrid.getSelection();\n          for (item in selection) {\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_InOut_ID_K"] && n.M_InOut_ID_K == $self.dGrid.get(selection[item])["M_InOut_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n              //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n              //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n            }\n          }\n        }\n        // When provisional invoice selected by VA228(Rakesh) 29/July/2021\n        if ($self.dGrid != null && C_ProvisionalInvoice_ID > 0) {\n          for (item in selection) {\n            // Check duplicate key and add value to dictionary object\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Invoice_ID_K == $self.dGrid.get(selection[item])["C_Invoice_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n            }\n          }\n        }\n        if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n          VIS.VCreateFormProvisionalInvoice.prototype.saveProvisionalInvoice();\n        } else {\n          VIS.VCreateFromInvoice.prototype.saveInvoice();\n        }\n      }\n      //$self.setBusy(false);\n      //if (output == false) {\n      //    $self.setBusy(false);\n      //    $self.$root.dialog(\'close\');    \n      //$self.editedItems = [];\n      //}\n    });\n    this.Applybtn.on("click", function () {\n      var output = false;\n      $self.setBusy(true);\n      var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n      var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n      var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n      var selection = null;\n      if ($self.dGrid != null) {\n        selection = $self.dGrid.getSelection();\n      }\n      if (selection == null || selection.length == 0) {\n        VIS.ADialog.info("RecordSelectionRequired");\n        $self.setBusy(false);\n        return;\n      }\n      if ($self.locatorField != null) {\n        // Change By Mohit 30/06/2016\n        //$self.multiValues = [];\n        //for shipment haveing locator filed                \n        if ($self.dGrid != null && C_Order_ID > 0) {\n          //var selection = $self.dGrid.getSelection();\n          for (item in selection) {\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Order_ID_K == $self.dGrid.get(selection[item])["C_Order_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n              //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n              //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n            }\n          }\n        } else if ($self.dGrid != null && C_Invoice_ID > 0) {\n          //var selection = $self.dGrid.getSelection();\n          for (item in selection) {\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Invoice_ID_K == $self.dGrid.get(selection[item])["C_Invoice_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n              //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n              //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n            }\n          }\n        }\n        // Change By Mohit 30/06/2016\n        $self.MergeItemsForSave();\n        VIS.VCreateFromShipment.prototype.saveMInOut(true);\n      } else if ($self.cmbBankAccount != null) {\n        if ($self.dGrid != null) {\n          //var selection = $self.dGrid.getSelection();\n          for (item in selection) {\n            //JID_ 1743 if Account Date is not selected showing message\n            if ($self.dGrid.get(selection[item])["Date"] == "") {\n              VIS.ADialog.error("VIS_PLAccountDate");\n              return false;\n            }\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.C_Payment_ID_K == $self.dGrid.get(selection[item])["C_Payment_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n              //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n              //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n            }\n          }\n        }\n        VIS.VCreateFromStatement.prototype.saveStatment();\n        $self.middelDiv.css("height", "61%");\n      } else {\n        if ($self.dGrid != null && C_Order_ID > 0) {\n          //var selection = $self.dGrid.getSelection();\n          for (item in selection) {\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Order_ID_K == $self.dGrid.get(selection[item])["C_Order_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n              //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n              //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n            }\n          }\n        }\n        if ($self.dGrid != null && M_InOut_ID > 0) {\n          //var selection = $self.dGrid.getSelection();\n          for (item in selection) {\n            var obj = $.grep($self.multiValues, function (n, i) {\n              return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_InOut_ID_K"] && n.M_InOut_ID_K == $self.dGrid.get(selection[item])["M_InOut_ID_K"];\n            });\n            if (obj.length > 0) {} else {\n              $self.multiValues.push($self.dGrid.get(selection[item]));\n              //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n              //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n            }\n          }\n        }\n        VIS.VCreateFromInvoice.prototype.saveInvoice();\n      }\n    });\n    VCreateFrom.prototype.callBackSave = function (output) {\n      if (output == false) {\n        $self.setBusy(false);\n      } else {\n        // Change By Mohit 30/06/2016\n        $self.isApplied = true;\n        VIS.ADialog.info("VIS_SuccessFullyInserted", null, null, null);\n        var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n        var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n        var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n        var M_Product_ID = $self.vProduct.getValue();\n        var deliveryDate = $self.deliveryDate.getValue();\n        if (C_Order_ID > 0 || C_Invoice_ID > 0) {\n          if ($self.locatorField != null) {\n            //for shipment haveing locator filed\n            //$self.loadOrder(C_Order_ID, false);\n            $self.dGrid.selectNone();\n            if (C_Order_ID > 0) {\n              $self.multiValues = [];\n              $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, false, 1);\n            }\n            if (C_Invoice_ID > 0) {\n              $self.multiValues = [];\n              VIS.VCreateFromShipment.prototype.loadInvoices(C_Invoice_ID, M_Product_ID, 1);\n            }\n            $self.dGrid.selectNone();\n            $self.editedItems = [];\n          } else {\n            //for invoice\n            //$self.loadOrder(C_Order_ID, true);\n            $self.dGrid.selectNone();\n            if (C_Order_ID > 0) {\n              $self.multiValues = [];\n              $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, true, 1);\n            }\n            if (C_Invoice_ID > 0) {\n              $self.multiValues = [];\n              VIS.VCreateFromShipment.prototype.loadInvoices(C_Invoice_ID, M_Product_ID, 1);\n            }\n            $self.dGrid.selectNone();\n            $self.editedItems = [];\n          }\n        }\n      }\n    };\n    this.cancelbtn.on("click", function () {\n      $self.setBusy(false);\n      $self.$root.dialog(\'close\');\n    });\n    var toggal = true;\n    this.selectAllButton.on("click", function () {\n      //if ($self.dGrid != null) {\n      //    if (toggal) {\n      //        $(this.children[0]).attr(\'src\', \'./Areas/VIS/Images/base/check-icon.png\');\n      //        w2ui.gridCreateForm.selectAll()\n      //        toggal = false;\n      //    }\n      //    else {\n      //        $(this.children[0]).attr(\'src\', \'./Areas/VIS/Images/base/uncheck-icon.png\');\n      //        w2ui.gridCreateForm.selectNone()\n      //        toggal = true;\n      //    }\n      //}\n    });\n    if (this.relatedToOrg) {\n      this.relatedToOrg.getControl().on("click", function () {\n        $self.isApplied = false;\n        $self.setBusy(true);\n        $self.multiValues = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n        var C_ProvisionalInvoice_Id = VIS.Utility.Util.getValueOfInt($self.cmbProvisionalInvoice.getValue());\n        if (C_Order_ID > 0) {\n          $self.cmbInvoice.setValue(-1);\n          $self.cmbShipment.setValue(-1);\n          //$self.loadOrder(C_Order_ID, false);\n          var M_Product_ID = $self.vProduct.getValue();\n          var deliveryDate = $self.deliveryDate.getValue();\n          $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, false, 1);\n        } else if (C_ProvisionalInvoice_Id > 0) {\n          // VA228:Load provisional invoice data into grid\n          $self.cmbOrder.setValue(-1);\n          $self.cmbInvoice.setValue(-1);\n          $self.cmbShipment.setValue(-1);\n          var M_Product_ID = $self.vProduct.getValue();\n          VIS.VCreateFromInvoice.prototype.loadProvisionalInvoices(C_ProvisionalInvoice_Id, M_Product_ID, 1);\n        } else {\n          $self.setBusy(false);\n        }\n      });\n    }\n    if (this.btnRefresh) {\n      this.btnRefresh.on("click", function () {\n        if ($self.cmbBankAccount != null) {\n          $self.setBusy(true);\n          var C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n          if (C_BankAccount_ID) {\n            var trxDate = $self.Date.getValue();\n            var C_BPartner_ID = $self.vBPartner.getValue();\n            var DepositSlip = $self.DepositSlip.getValue();\n            var DocumentNo = $self.DocumentNo.getValue();\n            var AuthCode = $self.AuthCode.getValue();\n            var CheckNo = $self.CheckNo.getValue();\n            var Amount = $self.Amount.getValue();\n            VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, $self.cmbPage.val());\n            //VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, $self.cmbPage.val());\n          }\n          //$self.setBusy(false);\n        }\n      });\n    }\n    if (this.cmbBankAccount) {\n      this.cmbBankAccount.getControl().change(function () {\n        $self.editedItems = [];\n        $self.setBusy(true);\n        var C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n        if (C_BankAccount_ID) {\n          VIS.VCreateFromStatement.prototype.initBPartner(C_BankAccount_ID);\n          $self.Date.setValue("");\n          $self.DepositSlip.setValue("");\n          $self.DocumentNo.setValue("");\n          $self.AuthCode.setValue("");\n          var C_BPartner_ID = $self.vBPartner.getValue();\n          var trxDate = $self.Date.getValue();\n          var DepositSlip = $self.DepositSlip.getValue();\n          var DocumentNo = $self.DocumentNo.getValue();\n          var AuthCode = $self.AuthCode.getValue();\n          var CheckNo = $self.CheckNo.getValue();\n          var Amount = $self.Amount.getValue();\n          VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, 1);\n\n          //VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, 1);\n        }\n        //$self.setBusy(false);\n      });\n    }\n    if (this.Date) {\n      this.Date.getControl().change(function () {\n        $self.setBusy(true);\n        $self.multiValues = [];\n        $self.editedItems = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var trxDate = $self.Date.getValue();\n        var C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n        var C_BPartner_ID = $self.vBPartner.getValue();\n        var DepositSlip = $self.DepositSlip.getValue();\n        var DocumentNo = $self.DocumentNo.getValue();\n        var AuthCode = $self.AuthCode.getValue();\n        var CheckNo = $self.CheckNo.getValue();\n        var Amount = $self.Amount.getValue();\n        VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, 1);\n      });\n    }\n    if (this.DocumentNo) {\n      this.DocumentNo.getControl().change(function () {\n        $self.setBusy(true);\n        $self.multiValues = [];\n        $self.editedItems = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var trxDate = $self.Date.getValue();\n        var C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n        var C_BPartner_ID = $self.vBPartner.getValue();\n        var DepositSlip = $self.DepositSlip.getValue();\n        var DocumentNo = $self.DocumentNo.getValue();\n        var AuthCode = $self.AuthCode.getValue();\n        var CheckNo = $self.CheckNo.getValue();\n        var Amount = $self.Amount.getValue();\n        VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, 1);\n      });\n    }\n    if (this.DepositSlip) {\n      this.DepositSlip.getControl().change(function () {\n        $self.setBusy(true);\n        $self.multiValues = [];\n        $self.editedItems = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var trxDate = $self.Date.getValue();\n        var C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n        var C_BPartner_ID = $self.vBPartner.getValue();\n        var DepositSlip = $self.DepositSlip.getValue();\n        var DocumentNo = $self.DocumentNo.getValue();\n        var AuthCode = $self.AuthCode.getValue();\n        var CheckNo = $self.CheckNo.getValue();\n        var Amount = $self.Amount.getValue();\n        VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, 1);\n      });\n    }\n    if (this.AuthCode) {\n      this.AuthCode.getControl().change(function () {\n        $self.setBusy(true);\n        $self.multiValues = [];\n        $self.editedItems = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var trxDate = $self.Date.getValue();\n        var C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n        var C_BPartner_ID = $self.vBPartner.getValue();\n        var DepositSlip = $self.DepositSlip.getValue();\n        var DocumentNo = $self.DocumentNo.getValue();\n        var AuthCode = $self.AuthCode.getValue();\n        var CheckNo = $self.CheckNo.getValue();\n        var Amount = $self.Amount.getValue();\n        VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, 1);\n      });\n    }\n\n    // On change of Check No\n    if (this.CheckNo) {\n      this.CheckNo.getControl().change(function () {\n        $self.setBusy(true);\n        $self.multiValues = [];\n        $self.editedItems = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var trxDate = $self.Date.getValue();\n        var C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n        var C_BPartner_ID = $self.vBPartner.getValue();\n        var DepositSlip = $self.DepositSlip.getValue();\n        var DocumentNo = $self.DocumentNo.getValue();\n        var AuthCode = $self.AuthCode.getValue();\n        var CheckNo = $self.CheckNo.getValue();\n        var Amount = $self.Amount.getValue();\n        VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, 1);\n      });\n    }\n\n    // On change of Amount\n    if (this.Amount) {\n      this.Amount.getControl().change(function () {\n        $self.setBusy(true);\n        $self.multiValues = [];\n        $self.editedItems = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var trxDate = $self.Date.getValue();\n        var C_BankAccount_ID = $self.cmbBankAccount.getControl().find(\'option:selected\').val();\n        var C_BPartner_ID = $self.vBPartner.getValue();\n        var DepositSlip = $self.DepositSlip.getValue();\n        var DocumentNo = $self.DocumentNo.getValue();\n        var AuthCode = $self.AuthCode.getValue();\n        var CheckNo = $self.CheckNo.getValue();\n        var Amount = $self.Amount.getValue();\n        VIS.VCreateFromStatement.prototype.loadBankAccounts(C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, 1);\n      });\n    }\n    if (this.deliveryDate) {\n      this.deliveryDate.getControl().change(function () {\n        $self.isApplied = false;\n        $self.setBusy(true);\n        $self.multiValues = [];\n        $self.editedItems = [];\n        if ($self.dGrid != null) {\n          $self.dGrid.destroy();\n          $self.dGrid = null;\n        }\n        var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n        var M_Product_ID = $self.vProduct.getValue();\n        var deliveryDate = $self.deliveryDate.getValue();\n        if ($self.locatorField != null) {\n          //for shipment haveing locator filed\n          $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, false, 1);\n        } else {\n          //for invoice\n          $self.loadOrders(C_Order_ID, M_Product_ID, deliveryDate, true, 1);\n        }\n        //$self.setBusy(false);\n      });\n    }\n\n    // This function is used to open Product container in Tree structure\n    if (this.ContainerTree) {\n      this.ContainerTree.on("click", function () {\n        if (VIS.context.ctx["#PRODUCT_CONTAINER_APPLICABLE"] != undefined) {\n          if (!VIS.context.ctx["#PRODUCT_CONTAINER_APPLICABLE"].equals("Y", true)) {\n            return;\n          }\n        }\n        // get Locator Value - if found then open container else not\n        var locator = $self.locatorField.getValue();\n        if (locator > 0) {\n          var obj = new VIS.productContainerTree(0, locator, 0);\n          if (obj != null) {\n            obj.showDialog();\n            obj.onClosing = function (containerId, containerText) {\n              // set combo value - \n              $self.cmbContainer.getControl().empty();\n              $self.cmbContainer.getControl().append(" <option value=" + containerId + ">" + containerText + "</option>");\n            };\n          }\n          obj = null;\n        }\n        locator = null;\n      });\n    }\n  };\n  VCreateFrom.prototype.isInitOK = function () {\n    return this.initOK;\n  };\n\n  // Changes as per new Fields in search criteria\n  VCreateFrom.prototype.loadOrders = function (C_Order_ID, M_Product_ID, DeliveryDate, forInvoice, pNo) {\n    //_order = new MOrder(Env.getCtx(), C_Order_ID, null);      //  save\n\n    var data = null;\n    data = this.getOrdersData(VIS.Env.getCtx(), C_Order_ID, M_Product_ID, DeliveryDate, forInvoice, pNo);\n    //this.loadGrid(data);\n  };\n\n  // get order\n  VCreateFrom.prototype.getOrdersData = function (ctx, C_Order_ID, M_Product_ID, DeliveryDate, forInvoice, pNo) {\n    var data = [];\n    var sql = "";\n    if ($self.dGrid != null) {\n      var selection = $self.dGrid.getSelection();\n      for (item in selection) {\n        var obj = $.grep($self.multiValues, function (n, i) {\n          return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Order_ID_K == $self.dGrid.get(selection[item])["C_Order_ID_K"];\n        });\n        if (obj.length > 0) {} else {\n          $self.multiValues.push($self.dGrid.get(selection[item]));\n        }\n      }\n    }\n    if ($self.mTab.keyColumnName == "M_InOut_ID") {\n      $self.record_ID = $self.mTab.getValue("M_InOut_ID");\n    } else if ($self.mTab.keyColumnName == "C_Invoice_ID") {\n      $self.record_ID = $self.mTab.getValue("C_Invoice_ID");\n    } else if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n      $self.record_ID = $self.mTab.getValue("C_ProvisionalInvoice_ID");\n    }\n    if ($self.relatedToOrg != null && $self.relatedToOrg.getValue()) {\n      var isBaseLanges = "";\n      var MProductIDs = "";\n      var DelivDate = "";\n      var dateCret = "";\n      if (!pNo) {\n        pNo = 1;\n      }\n      if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n        isBaseLanges = " LEFT OUTER JOIN C_UOM uom ON (l.C_UOM_ID=uom.C_UOM_ID)";\n      } else {\n        isBaseLanges = " LEFT OUTER JOIN C_UOM_Trl uom ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'" + VIS.Env.getAD_Language(ctx).concat("\')");\n      }\n      if (M_Product_ID != null) {\n        MProductIDs = " AND l.M_Product_ID=" + M_Product_ID;\n      }\n      if (DeliveryDate != null) {\n        var date = VIS.DB.to_date(DeliveryDate, true);\n        dateCret = date;\n        DelivDate = " AND l.DatePromised <= " + date;\n      }\n      var adOrgIDS = $self.mTab.getValue("AD_Org_ID");\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCreateFrom/GetOrdersDataCommon",\n        dataType: "json",\n        type: "POST",\n        data: {\n          keyColumnName: $self.mTab.keyColumnName,\n          tableName: "C_OrderLine",\n          recordID: $self.record_ID,\n          pageNo: pNo,\n          forInvoicees: forInvoice,\n          C_Ord_IDs: C_Order_ID,\n          isBaseLangess: isBaseLanges,\n          MProductIDss: MProductIDs,\n          DelivDates: DelivDate,\n          adOrgIDSs: adOrgIDS\n        },\n        error: function (e) {\n          alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n          $self.setBusy(false);\n          $self.log.info(e);\n          return;\n        },\n        success: function (dyndata) {\n          var res = JSON.parse(dyndata);\n          if (res.Error) {\n            VIS.ADialog.error(res.Error);\n            $self.setBusy(false);\n            return;\n          }\n          $self.resetPageCtrls(res.pSetting);\n          $self.loadGrid(res.data);\n          $self.setBusy(false);\n        }\n      });\n    } else {\n      var isBaseLanges = "";\n      var MProductIDs = "";\n      var DelivDate = "";\n      var dateCret = "";\n      if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n        isBaseLanges = " LEFT OUTER JOIN C_UOM uom ON (l.C_UOM_ID=uom.C_UOM_ID)";\n      } else {\n        // JID_1720\n        isBaseLanges = " LEFT OUTER JOIN C_UOM_Trl uom ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'" + VIS.Env.getAD_Language(ctx) + "\') INNER JOIN C_UOM uom1 ON uom1.C_UOM_ID = uom.C_UOM_ID ";\n      }\n      if (M_Product_ID > 0) {\n        MProductIDs = " AND l.M_Product_ID=" + M_Product_ID;\n      }\n      if (DeliveryDate != null) {\n        var date = VIS.DB.to_date(DeliveryDate, true);\n        DelivDate = " AND l.DatePromised <= " + date;\n      }\n      if (!pNo) {\n        pNo = 1;\n      }\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCreateFrom/GetOrdersDataCommonOrg",\n        dataType: "json",\n        type: "POST",\n        data: {\n          keyColumnName: $self.mTab.keyColumnName,\n          tableName: "C_OrderLine",\n          recordID: $self.record_ID,\n          pageNo: pNo,\n          forInvoicees: forInvoice,\n          C_Ord_IDs: C_Order_ID,\n          isBaseLangess: isBaseLanges,\n          MProductIDss: MProductIDs,\n          DelivDates: DelivDate\n        },\n        error: function (e) {\n          alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n          $self.setBusy(false);\n          $self.log.info(e);\n          return;\n        },\n        success: function (dyndata) {\n          var res = JSON.parse(dyndata);\n          if (res.Error) {\n            VIS.ADialog.error(res.Error);\n            $self.setBusy(false);\n            return;\n          }\n          $self.resetPageCtrls(res.pSetting);\n          $self.loadGrid(res.data);\n          $self.setBusy(false);\n        }\n      });\n    }\n    return data;\n  };\n\n  //VCreateFrom.prototype.getOrdersData = function (ctx, C_Order_ID, M_Product_ID, DeliveryDate, forInvoice, pNo) {\n  //    var data = [];\n  //    var sql = "";\n  //    if ($self.dGrid != null) {\n  //        var selection = $self.dGrid.getSelection();\n  //        for (item in selection) {\n  //            var obj = $.grep($self.multiValues, function (n, i) {\n  //                return n.M_Product_ID_K == $self.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Order_ID_K == $self.dGrid.get(selection[item])["C_Order_ID_K"]\n  //            });\n  //            if (obj.length > 0) {\n\n  //            }\n  //            else {\n  //                $self.multiValues.push($self.dGrid.get(selection[item]));\n  //                //if ($self.multiValues.indexOf($self.dGrid.get(selection[item])["M_Product_ID"]) == -1) {\n  //                //    $self.multiValues.push($self.dGrid.get(selection[item])["M_Product_ID"]);\n  //            }\n  //        }\n  //    }\n  //    if ($self.mTab.keyColumnName == "M_InOut_ID") {\n  //        $self.record_ID = $self.mTab.getValue("M_InOut_ID");\n  //    }\n  //    else if ($self.mTab.keyColumnName == "C_Invoice_ID") {\n  //        $self.record_ID = $self.mTab.getValue("C_Invoice_ID");\n  //    }\n  //    // Enable this check\n  //    // if (window.DTD001) {\n  //    if ($self.relatedToOrg.getValue()) {\n  //        sql = ("SELECT "\n  //          + "round((l.QtyOrdered-SUM(COALESCE(m.Qty,0))) * "\t\t\t\t\t//\t1               \n  //          + "(CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END ),2) as QUANTITY,"\t//\t2\n  //          + "round((l.QtyOrdered-SUM(COALESCE(m.Qty,0))) * "\n  //          + "(CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END ),2) as QTYENTER,"\t//\tadded by bharat\n  //          + " l.C_UOM_ID  as C_UOM_ID  ,COALESCE(uom.UOMSymbol,uom.Name) as UOM,"\t\t\t//\t3..4\n  //          + " COALESCE(l.M_Product_ID,0) as M_PRODUCT_ID ,COALESCE(p.Name,c.Name) as PRODUCT,"\t//\t5..6\n  //          + " l.M_AttributeSetInstance_ID AS M_ATTRIBUTESETINSTANCE_ID ,"\n  //          + " ins.description , "\n  //          + " l.C_OrderLine_ID as C_ORDERLINE_ID,l.Line  as LINE,\'false\' as SELECTROW  "\t\t\t\t\t\t\t\t//\t7..8\n  //          + " FROM C_OrderLine l"\n  //           + " LEFT OUTER JOIN M_MatchPO m ON (l.C_OrderLine_ID=m.C_OrderLine_ID AND ");\n\n  //        sql = sql.concat(forInvoice ? "m.C_InvoiceLine_ID" : "m.M_InOutLine_ID");\n  //        sql = sql.concat(" IS NOT NULL)").concat(" LEFT OUTER JOIN M_Product p ON (l.M_Product_ID=p.M_Product_ID)" + " LEFT OUTER JOIN C_Charge c ON (l.C_Charge_ID=c.C_Charge_ID)");\n\n  //        if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n  //            sql = sql.concat(" LEFT OUTER JOIN C_UOM uom ON (l.C_UOM_ID=uom.C_UOM_ID)");\n  //        }\n  //        else {\n  //            sql = sql.concat(" LEFT OUTER JOIN C_UOM_Trl uom ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'").concat(VIS.Env.getAD_Language(ctx)).concat("\')");\n  //        }\n\n  //        sql = sql.concat(" LEFT OUTER JOIN M_AttributeSetInstance ins ON (ins.M_AttributeSetInstance_ID =l.M_AttributeSetInstance_ID) ");\n  //        sql = sql.concat(" WHERE l.C_Order_ID=" + C_Order_ID);\n  //        if (M_Product_ID != null) {\n  //            sql = sql.concat(" AND l.M_Product_ID=" + M_Product_ID);\n  //        }\n  //        if (DeliveryDate != null) {\n  //            var date = VIS.DB.to_date(DeliveryDate, true);\n  //            sql = sql.concat(" AND l.DatePromised <= " + date);\n  //        }\n  //        sql = sql.concat(" AND l.DTD001_Org_ID = " + $self.mTab.getValue($self.windowNo, "AD_Org_ID")\n  //            + " GROUP BY l.QtyOrdered,CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END, "\n  //            + "l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name), "\n  //                + "l.M_Product_ID,COALESCE(p.Name,c.Name),l.M_AttributeSetInstance_ID , l.Line,l.C_OrderLine_ID, ins.description  "\n  //            + "ORDER BY l.Line");\n  //    }\n  //    else {\n  //        sql = ("SELECT "\n  //           + "round((l.QtyOrdered-SUM(COALESCE(m.Qty,0))) * "\t\t\t\t\t//\t1               \n  //           + "(CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END ),2) as QUANTITY,"\t//\t2\n  //           + "round((l.QtyOrdered-SUM(COALESCE(m.Qty,0))) * "\n  //           + "(CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END ),2) as QTYENTER,"\t//\tadded by bharat\n  //           + " l.C_UOM_ID  as C_UOM_ID  ,COALESCE(uom.UOMSymbol,uom.Name) as UOM,"\t\t\t//\t3..4\n  //          // + " COALESCE(l.M_Product_ID,0) as M_PRODUCT_ID ,COALESCE(p.Name,c.Name) as PRODUCT,"\t//\t5..6\n  //           + " COALESCE(l.M_Product_ID,0) as M_PRODUCT_ID ,p.Name as PRODUCT,"\t//\t5..6\n  //           + " l.M_AttributeSetInstance_ID AS M_ATTRIBUTESETINSTANCE_ID ,"\n  //           + " ins.description , "\n  //           + " l.C_OrderLine_ID as C_ORDERLINE_ID,l.Line  as LINE,\'false\' as SELECTROW  "\t\t\t\t\t\t\t\t//\t7..8\n  //           + " FROM C_OrderLine l"\n  //            + " LEFT OUTER JOIN M_MatchPO m ON (l.C_OrderLine_ID=m.C_OrderLine_ID AND ");\n\n  //        sql = sql.concat(forInvoice ? "m.C_InvoiceLine_ID" : "m.M_InOutLine_ID");\n  //        //sql = sql.concat(" IS NOT NULL)").concat(" LEFT OUTER JOIN M_Product p ON (l.M_Product_ID=p.M_Product_ID)" + " LEFT OUTER JOIN C_Charge c ON (l.C_Charge_ID=c.C_Charge_ID)");\n  //        sql = sql.concat(" IS NOT NULL)").concat(" LEFT OUTER JOIN M_Product p ON (l.M_Product_ID=p.M_Product_ID)");\n\n  //        if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n  //            sql = sql.concat(" LEFT OUTER JOIN C_UOM uom ON (l.C_UOM_ID=uom.C_UOM_ID)");\n  //        }\n  //        else {\n  //            sql = sql.concat(" LEFT OUTER JOIN C_UOM_Trl uom ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'").concat(VIS.Env.getAD_Language(ctx)).concat("\')");\n  //        }\n\n  //        sql = sql.concat(" LEFT OUTER JOIN M_AttributeSetInstance ins ON (ins.M_AttributeSetInstance_ID =l.M_AttributeSetInstance_ID) ");\n  //        sql = sql.concat(" WHERE l.C_Order_ID=" + C_Order_ID + " AND L.M_Product_ID>0 "); //Edited By Arpit Rai on 25 March,2017\n  //        if (M_Product_ID > 0) {\n  //            sql = sql.concat(" AND l.M_Product_ID=" + M_Product_ID);\n  //        }\n  //        if (DeliveryDate != null) {\n  //            var date = VIS.DB.to_date(DeliveryDate, true);\n  //            sql = sql.concat(" AND l.DatePromised <= " + date);\n  //        }\n  //        sql = sql.concat(" GROUP BY l.QtyOrdered,CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END, "\n  //                + "l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name), "\n  //                //+ "l.M_Product_ID,COALESCE(p.Name,c.Name), l.M_AttributeSetInstance_ID, l.Line,l.C_OrderLine_ID, ins.description  ");\n  //                + "l.M_Product_ID,p.Name, l.M_AttributeSetInstance_ID, l.Line,l.C_OrderLine_ID, ins.description  ");\n  //        //+ "ORDER BY COALESCE(p.Name,c.Name),ins.description"); //commented by arpit on 25 March,2017\n  //        //Added Arpit\n  //        sql = sql.concat("UNION SELECT "\n  //          + "round((l.QtyOrdered-SUM(COALESCE(m.QtyInvoiced,0))) * "\t\t\t\t\t//\t1               \n  //          + "(CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END ),2) as QUANTITY,"\t//\t2\n  //          + "round((l.QtyOrdered-SUM(COALESCE(m.QtyInvoiced,0))) * "\n  //          + "(CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END ),2) as QTYENTER,"\t//\tadded by bharat\n  //          + " l.C_UOM_ID  as C_UOM_ID  ,COALESCE(uom.UOMSymbol,uom.Name) as UOM,"\t\t\t//\t3..4\n  //          + " 0 as M_PRODUCT_ID , c.Name as PRODUCT,"\t//\t5..6\n  //          + " l.M_AttributeSetInstance_ID AS M_ATTRIBUTESETINSTANCE_ID ,"\n  //          + " ins.description , "\n  //          + " l.C_OrderLine_ID as C_ORDERLINE_ID,l.Line  as LINE,\'false\' as SELECTROW  "\t\t\t\t\t\t\t\t//\t7..8\n  //          + " FROM C_OrderLine l"\n  //           + " LEFT OUTER JOIN C_INVOICELINE M ON(L.C_OrderLine_ID=M.C_OrderLine_ID) AND ");\n\n  //        sql = sql.concat(forInvoice ? "m.C_InvoiceLine_ID" : "m.M_InOutLine_ID");\n  //        sql = sql.concat(" IS NOT NULL").concat(" LEFT OUTER JOIN C_Charge c ON (l.C_Charge_ID=c.C_Charge_ID)");\n\n  //        if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n  //            sql = sql.concat(" LEFT OUTER JOIN C_UOM uom ON (l.C_UOM_ID=uom.C_UOM_ID)");\n  //        }\n  //        else {\n  //            sql = sql.concat(" LEFT OUTER JOIN C_UOM_Trl uom ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'").concat(VIS.Env.getAD_Language(ctx)).concat("\')");\n  //        }\n\n  //        sql = sql.concat(" LEFT OUTER JOIN M_AttributeSetInstance ins ON (ins.M_AttributeSetInstance_ID =l.M_AttributeSetInstance_ID) ");\n  //        sql = sql.concat(" WHERE l.C_Order_ID=" + C_Order_ID + " AND C.C_Charge_ID >0 ");\n  //        if (DeliveryDate != null) {\n  //            var date = VIS.DB.to_date(DeliveryDate, true);\n  //            sql = sql.concat(" AND l.DatePromised <= " + date);\n  //        }\n  //        sql = sql.concat(" GROUP BY l.QtyOrdered,CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END, "\n  //                + "l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name), "\n  //                + "l.M_Product_ID,c.Name, l.M_AttributeSetInstance_ID, l.Line,l.C_OrderLine_ID, ins.description  ");\n  //        //Arpit\n  //    }\n\n  //    var sqlNew = "SELECT * FROM (" + sql.toString() + ") WHERE QUANTITY > 0";\n  //    if (!pNo) {\n  //        pNo = 1;\n  //    }\n  //    $.ajax({\n  //        url: VIS.Application.contextUrl + "Common/GetData",\n  //        dataType: "json",\n  //        type: "POST",\n  //        data: {\n  //            sql: sqlNew,\n  //            keyColumnName: $self.mTab.keyColumnName,\n  //            tableName: "C_OrderLine",\n  //            recordID: $self.record_ID,\n  //            pageNo: pNo\n  //        },\n  //        error: function () {\n  //            alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n  //            $self.setBusy(false);\n  //            return;\n  //        },\n  //        success: function (dyndata) {\n\n  //            var res = JSON.parse(dyndata);\n  //            if (res.Error) {\n  //                VIS.ADialog.error(res.Error);\n  //                $self.setBusy(false);\n  //                return;\n  //            }\n  //            $self.resetPageCtrls(res.pSetting);\n  //            $self.loadGrid(res.data);\n  //            $self.setBusy(false);\n  //        }\n  //    });\n\n  //    //var dr = null;\n  //    //try {\n  //    //    dr = VIS.DB.executeReader(sqlNew.toString(), null, null);\n  //    //    console.log(sqlNew.toString());\n  //    //    var count = 1;\n  //    //while (dr.read()) {\n  //    //    var line = {};\n  //    //    var select = false;\n  //    //    var rec = 0;\n  //    //    if ($self.mTab.keyColumnName == "M_InOut_ID") {\n  //    //        if (dr.getInt("c_orderline_id") > 0) {\n  //    //            sql = "SELECT Count(*) FROM M_InOutLine WHERE M_InOut_ID = " + $self.mTab.getValue("M_InOut_ID") + " AND C_OrderLine_ID = " + dr.getInt("c_orderline_id");\n  //    //            rec = VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(sql));\n  //    //            if (rec > 0) {\n  //    //                select = true;\n  //    //            }\n  //    //        }\n  //    //        else {\n  //    //            sql = "SELECT Count(*) FROM M_InOutLine WHERE M_InOut_ID = " + $self.mTab.getValue("M_InOut_ID") + " AND M_Product_ID = " + dr.getInt("m_product_id") + " AND M_AttributeSetInstance_ID = " + dr.getInt("m_attributesetinstance_id");\n  //    //            rec = VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(sql));\n  //    //            if (rec > 0) {\n  //    //                select = true;\n  //    //            }\n  //    //        }\n  //    //    }\n  //    //    else if ($self.mTab.keyColumnName == "C_Invoice_ID") {\n  //    //        if (dr.getInt("c_orderline_id") > 0) {\n  //    //            sql = "SELECT Count(*) FROM C_InvoiceLine WHERE C_Invoice_ID = " + $self.mTab.getValue("C_Invoice_ID") + " AND C_OrderLine_ID = " + dr.getInt("c_orderline_id");\n  //    //            rec = VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(sql));\n  //    //            if (rec > 0) {\n  //    //                select = true;\n  //    //            }\n  //    //        }\n  //    //        else {\n  //    //            sql = "SELECT Count(*) FROM C_InvoiceLine WHERE C_Invoice_ID = " + $self.mTab.getValue("C_Invoice_ID") + " AND M_Product_ID = " + dr.getInt("m_product_id") + " AND M_AttributeSetInstance_ID = " + dr.getInt("m_attributesetinstance_id");\n  //    //            rec = VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(sql));\n  //    //            if (rec > 0) {\n  //    //                select = true;\n  //    //            }\n  //    //        }\n  //    //    }\n  //    //    line[\'Select\'] = select;\n  //    //    line[\'Quantity\'] = dr.getString("quantity");  //  1-Qty\n  //    //    line[\'QuantityEntered\'] = dr.getString("qtyenter");  //  2-Qty\n  //    //    line[\'C_UOM_ID\'] = dr.getString("uom");    //  3-UOM\n  //    //    line[\'M_Product_ID\'] = dr.getString("product");    //  4-Product\n  //    //    line[\'M_AttributeSetInstance_ID\'] = dr.getString("description");        //  5-Ship -Key\n  //    //    line[\'C_Order_ID\'] = dr.getString("line");      //  4-OrderLine\n  //    //    line[\'M_InOut_ID\'] = null;        //  5-Ship\n  //    //    line[\'C_Invoice_ID\'] = null;        //  6-Invoice\n  //    //    // line[\'Att\'] = dr.getString("description");\n  //    //    line[\'C_UOM_ID_K\'] = dr.getString("c_uom_id");    //  2-UOM -Key\n  //    //    line[\'M_Product_ID_K\'] = dr.getString("m_product_id");      //  3-Product -Key\n  //    //    line[\'M_AttributeSetInstance_ID_K\'] = dr.getString("m_attributesetinstance_id");        //  5-Ship -Key\n  //    //    line[\'C_Order_ID_K\'] = dr.getString("c_orderline_id");      //  4-OrderLine -Key\n  //    //    line[\'M_InOut_ID_K\'] = null;        //  5-Ship -Key\n  //    //    line[\'C_Invoice_ID_K\'] = null;        //  6-Invoice -Key\n  //    //    line[\'recid\'] = count;\n  //    //    count++;\n  //    //    data.push(line);\n  //    //}\n  //    //dr.close();\n  //    //}\n  //    //catch (e) {\n  //    //    // s_log.log(Level.SEVERE, sql.toString(), e);\n  //    //}\n  //    return data;\n  //}\n\n  // end of new changes by Bharat\n\n  VCreateFrom.prototype.loadOrder = function (C_Order_ID, forInvoice) {\n    //_order = new MOrder(Env.getCtx(), C_Order_ID, null);      //  save\n\n    var data = null;\n    data = this.getOrderData(VIS.Env.getCtx(), C_Order_ID, forInvoice);\n    this.loadGrid(data);\n  };\n  VCreateFrom.prototype.getOrderData = function (ctx, C_Order_ID, forInvoice) {\n    var data = [];\n    var sql = "";\n    if ($self.relatedToOrg.getValue()) {\n      var isBaseLang = "";\n      if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n        isBaseLang = " LEFT OUTER JOIN C_UOM uom ON (l.C_UOM_ID=uom.C_UOM_ID)";\n      } else {\n        isBaseLang = " LEFT OUTER JOIN C_UOM_Trl uom ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'" + VIS.Env.getAD_Language(ctx) + "\')";\n      }\n      var orggetVal = $self.mTab.getValue($self.windowNo, "AD_Org_ID");\n      var lang = VIS.Env.getAD_Language(ctx);\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCreateFrom/GetOrderDataCommons",\n        dataType: "json",\n        type: "POST",\n        async: false,\n        data: {\n          forInvoices: forInvoice,\n          isBaseLangs: isBaseLang,\n          C_OrderID: C_Order_ID,\n          orggetVals: orggetVal,\n          langs: lang\n        },\n        error: function (e) {\n          alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n          $self.setBusy(false);\n          $self.log.info(e);\n          return;\n        },\n        success: function (dyndata) {\n          var res = JSON.parse(dyndata);\n          if (res && res != null && res.length > 0) {\n            var count = 1;\n            for (var i = 0; i < res.length; i++) {\n              var line = {};\n              line[\'Quantity\'] = res[i]["quantity"];\n              line[\'QuantityEntered\'] = res[i]["quantityentered"];\n              line[\'C_UOM_ID\'] = res[i]["c_uom_id"];\n              line[\'M_Product_ID\'] = res[i]["m_product_id"];\n              line[\'M_AttributeSetInstance_ID\'] = res[i]["m_attributesetinstance_id"];\n              line[\'C_Order_ID\'] = res[i]["c_order_id"];\n              line[\'M_InOut_ID\'] = null;\n              line[\'C_Invoice_ID\'] = null;\n              line[\'C_UOM_ID_K\'] = res[i]["c_uom_id_k"];\n              line[\'M_Product_ID_K\'] = res[i]["m_product_id_k"];\n              line[\'M_AttributeSetInstance_ID_K\'] = res[i]["m_attributesetinstance_id_k"];\n              line[\'C_Order_ID_K\'] = res[i]["c_order_id_k"];\n              line[\'M_InOut_ID_K\'] = null;\n              line[\'C_Invoice_ID_K\'] = null;\n              line[\'C_PaymentTerm_ID\'] = res[i]["C_PaymentTerm_ID"];\n              line[\'PaymentTermName\'] = res[i]["PaymentTermName"];\n              line[\'IsAdvance\'] = res[i]["IsAdvance"];\n              line[\'C_InvoicePaymentTerm_ID\'] = res[i]["C_InvoicePaymentTerm_ID"];\n              line[\'IsInvoicePTAdvance\'] = res[i]["IsInvoicePTAdvance"];\n              line[\'recid\'] = count;\n              data.push(line);\n            }\n          }\n          $self.setBusy(false);\n        }\n      });\n      return data;\n    } else {\n      var isBaseLang = "";\n      if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n        isBaseLang = " LEFT OUTER JOIN C_UOM uom ON (l.C_UOM_ID=uom.C_UOM_ID)";\n      } else {\n        isBaseLang = " LEFT OUTER JOIN C_UOM_Trl uom ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'" + VIS.Env.getAD_Language(ctx) + "\')";\n      }\n      var lang = VIS.Env.getAD_Language(ctx);\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCreateFrom/GetOrderDataCommonsNotOrg",\n        dataType: "json",\n        type: "POST",\n        async: false,\n        data: {\n          forInvoices: forInvoice,\n          isBaseLangs: isBaseLang,\n          C_OrderID: C_Order_ID,\n          langs: lang\n        },\n        error: function (e) {\n          alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n          $self.setBusy(false);\n          $self.log.info(e);\n          return;\n        },\n        success: function (dyndata) {\n          var res = JSON.parse(dyndata);\n          if (res && res != null && res.length > 0) {\n            var count = 1;\n            for (var i = 0; i < res.length; i++) {\n              var line = {};\n              line[\'Quantity\'] = res[i]["quantity"];\n              line[\'QuantityEntered\'] = res[i]["quantityentered"];\n              line[\'C_UOM_ID\'] = res[i]["c_uom_id"];\n              line[\'M_Product_ID\'] = res[i]["m_product_id"];\n              line[\'M_AttributeSetInstance_ID\'] = res[i]["m_attributesetinstance_id"];\n              line[\'C_Order_ID\'] = res[i]["c_order_id"];\n              line[\'M_InOut_ID\'] = null;\n              line[\'C_Invoice_ID\'] = null;\n              line[\'C_UOM_ID_K\'] = res[i]["c_uom_id_k"];\n              line[\'M_Product_ID_K\'] = res[i]["m_product_id_k"];\n              line[\'M_AttributeSetInstance_ID_K\'] = res[i]["m_attributesetinstance_id_k"];\n              line[\'C_Order_ID_K\'] = res[i]["c_order_id_k"];\n              line[\'M_InOut_ID_K\'] = null;\n              line[\'C_Invoice_ID_K\'] = null;\n              line[\'C_PaymentTerm_ID\'] = res[i]["C_PaymentTerm_ID"];\n              line[\'PaymentTermName\'] = res[i]["PaymentTermName"];\n              line[\'IsAdvance\'] = res[i]["IsAdvance"];\n              line[\'C_InvoicePaymentTerm_ID\'] = res[i]["C_InvoicePaymentTerm_ID"];\n              line[\'IsInvoicePTAdvance\'] = res[i]["IsInvoicePTAdvance"];\n              if ($self.mTab.keyColumnName == "C_ProvisionalInvoice_ID") {\n                line[\'POPrice\'] = res[i]["POPrice"];\n                line[\'ProvisionalPrice\'] = res[i]["ProvisionalPrice"];\n              }\n              line[\'recid\'] = count;\n              data.push(line);\n            }\n          }\n          $self.setBusy(false);\n        }\n      });\n      return data;\n    }\n  };\n\n  //VCreateFrom.prototype.getOrderData = function (ctx, C_Order_ID, forInvoice) {\n  //    /**\n  //     *  Selected        - 0\n  //     *  Qty             - 1\n  //     *  C_UOM_ID        - 2\n  //     *  M_Product_ID    - 3\n  //     *  OrderLine       - 4\n  //     *  ShipmentLine    - 5\n  //     *  InvoiceLine     - 6\n  //     */\n\n  //    var data = [];\n  //    var sql = "";\n\n  //    // Enable this check\n  //    // if (window.DTD001) {\n  //    if ($self.relatedToOrg.getValue()) {\n  //        sql = ("SELECT "\n  //          + "round((l.QtyOrdered-SUM(COALESCE(m.Qty,0))) * "\t\t\t\t\t//\t1               \n  //          + "(CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END ),2) as QUANTITY,"\t//\t2\n  //          + "round((l.QtyOrdered-SUM(COALESCE(m.Qty,0))) * "\n  //          + "(CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END ),2) as QTYENTER,"\t//\tadded by bharat\n  //          + " l.C_UOM_ID  as C_UOM_ID  ,COALESCE(uom.UOMSymbol,uom.Name) as UOM,"\t\t\t//\t3..4\n  //          + " COALESCE(l.M_Product_ID,0) as M_PRODUCT_ID ,COALESCE(p.Name,c.Name) as PRODUCT,"\t//\t5..6\n  //          + " l.M_AttributeSetInstance_ID AS M_ATTRIBUTESETINSTANCE_ID ,"\n  //          + " ins.description , "\n  //          + " l.C_OrderLine_ID as C_ORDERLINE_ID,l.Line  as LINE,\'false\' as SELECTROW  "\t\t\t\t\t\t\t\t//\t7..8\n  //          + " FROM C_OrderLine l"\n  //           + " LEFT OUTER JOIN M_MatchPO m ON (l.C_OrderLine_ID=m.C_OrderLine_ID AND ");\n\n  //        sql = sql.concat(forInvoice ? "m.C_InvoiceLine_ID" : "m.M_InOutLine_ID");\n  //        sql = sql.concat(" IS NOT NULL)").concat(" LEFT OUTER JOIN M_Product p ON (l.M_Product_ID=p.M_Product_ID)" + " LEFT OUTER JOIN C_Charge c ON (l.C_Charge_ID=c.C_Charge_ID)");\n\n  //        if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n  //            sql = sql.concat(" LEFT OUTER JOIN C_UOM uom ON (l.C_UOM_ID=uom.C_UOM_ID)");\n  //        }\n  //        else {\n  //            sql = sql.concat(" LEFT OUTER JOIN C_UOM_Trl uom ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'").concat(VIS.Env.getAD_Language(ctx)).concat("\')");\n  //        }\n\n  //        sql = sql.concat(" LEFT OUTER JOIN M_AttributeSetInstance ins ON (ins.M_AttributeSetInstance_ID =l.M_AttributeSetInstance_ID) ");\n\n  //        sql = sql.concat(" WHERE l.C_Order_ID=" + C_Order_ID + " AND l.DTD001_Org_ID = " + $self.mTab.getValue($self.windowNo, "AD_Org_ID")\n  //            + " GROUP BY l.QtyOrdered,CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END, "\n  //            + "l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name), "\n  //                + "l.M_Product_ID,COALESCE(p.Name,c.Name),l.M_AttributeSetInstance_ID , l.Line,l.C_OrderLine_ID, ins.description  "\n  //            + "ORDER BY l.Line");\n  //    }\n  //    else {\n  //        sql = ("SELECT "\n  //           + "round((l.QtyOrdered-SUM(COALESCE(m.Qty,0))) * "\t\t\t\t\t//\t1               \n  //           + "(CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END ),2) as QUANTITY,"\t//\t2\n  //           + "round((l.QtyOrdered-SUM(COALESCE(m.Qty,0))) * "\n  //           + "(CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END ),2) as QTYENTER,"\t//\tadded by bharat\n  //           + " l.C_UOM_ID  as C_UOM_ID  ,COALESCE(uom.UOMSymbol,uom.Name) as UOM,"\t\t\t//\t3..4\n  //           + " COALESCE(l.M_Product_ID,0) as M_PRODUCT_ID ,COALESCE(p.Name,c.Name) as PRODUCT,"\t//\t5..6\n  //           + " l.M_AttributeSetInstance_ID AS M_ATTRIBUTESETINSTANCE_ID ,"\n  //           + " ins.description , "\n  //           + " l.C_OrderLine_ID as C_ORDERLINE_ID,l.Line  as LINE,\'false\' as SELECTROW  "\t\t\t\t\t\t\t\t//\t7..8\n  //           + " FROM C_OrderLine l"\n  //            + " LEFT OUTER JOIN M_MatchPO m ON (l.C_OrderLine_ID=m.C_OrderLine_ID AND ");\n\n  //        sql = sql.concat(forInvoice ? "m.C_InvoiceLine_ID" : "m.M_InOutLine_ID");\n  //        sql = sql.concat(" IS NOT NULL)").concat(" LEFT OUTER JOIN M_Product p ON (l.M_Product_ID=p.M_Product_ID)" + " LEFT OUTER JOIN C_Charge c ON (l.C_Charge_ID=c.C_Charge_ID)");\n\n  //        if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n  //            sql = sql.concat(" LEFT OUTER JOIN C_UOM uom ON (l.C_UOM_ID=uom.C_UOM_ID)");\n  //        }\n  //        else {\n  //            sql = sql.concat(" LEFT OUTER JOIN C_UOM_Trl uom ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'").concat(VIS.Env.getAD_Language(ctx)).concat("\')");\n  //        }\n\n  //        sql = sql.concat(" LEFT OUTER JOIN M_AttributeSetInstance ins ON (ins.M_AttributeSetInstance_ID =l.M_AttributeSetInstance_ID) ");\n\n  //        sql = sql.concat(" WHERE l.C_Order_ID=" + C_Order_ID\t\t\t//\t#1\n  //            + " GROUP BY l.QtyOrdered,CASE WHEN l.QtyOrdered=0 THEN 0 ELSE l.QtyEntered/l.QtyOrdered END, "\n  //            + "l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name), "\n  //                + "l.M_Product_ID,COALESCE(p.Name,c.Name), l.M_AttributeSetInstance_ID, l.Line,l.C_OrderLine_ID, ins.description  "\n  //            + "ORDER BY l.Line");\n  //    }\n\n  //    var sqlNew = "SELECT * FROM (" + sql.toString() + ") WHERE QUANTITY > 0";\n\n  //    var dr = null;\n  //    try {\n  //        dr = VIS.DB.executeReader(sqlNew.toString(), null, null);\n  //        console.log(sqlNew.toString());\n  //        var count = 1;\n  //        while (dr.read()) {\n  //            var line = {};\n  //            //line.push(false);       //  0-Selection\n\n  //            ////var qtyOrdered = dr.getDecimal(0);\n  //            ////var multiplier = dr.getDecimal(1);\n  //            ////var qtyEntered = qtyOrdered * multiplier;\n  //            //line[\'Quantity\'] = qtyEntered;  //  1-Qty\n  //            //line[\'C_UOM_ID\'] = dr.getString(3);    //  2-UOM\n  //            //line[\'M_Product_ID\'] = dr.getString(5);      //  3-Product\n  //            //line[\'C_Order_ID\'] = dr.getString(7);;      //  4-OrderLine\n  //            //line[\'M_InOut_ID\'] = null;        //  5-Ship\n  //            //line[\'C_Invoice_ID\'] = null;        //  6-Invoice\n  //            //line[\'C_UOM_ID_K\'] = dr.getString(2);    //  2-UOM -Key\n  //            //line[\'M_Product_ID_K\'] = dr.getInt(4);      //  3-Product -Key\n  //            //line[\'C_Order_ID_K\'] = dr.getInt(6);;      //  4-OrderLine -Key\n  //            //line[\'M_InOut_ID_K\'] = null;        //  5-Ship -Key\n  //            //line[\'C_Invoice_ID_K\'] = null;        //  6-Invoice -Key\n\n  //            line[\'Quantity\'] = dr.getString("quantity");  //  1-Qty\n  //            line[\'QuantityEntered\'] = dr.getString("qtyenter");  //  2-Qty\n  //            line[\'C_UOM_ID\'] = dr.getString("uom");    //  3-UOM\n  //            line[\'M_Product_ID\'] = dr.getString("product");    //  4-Product\n  //            line[\'M_AttributeSetInstance_ID\'] = dr.getString("description");        //  5-Ship -Key\n  //            line[\'C_Order_ID\'] = dr.getString("line");      //  4-OrderLine\n  //            line[\'M_InOut_ID\'] = null;        //  5-Ship\n  //            line[\'C_Invoice_ID\'] = null;        //  6-Invoice\n  //            // line[\'Att\'] = dr.getString("description");\n  //            line[\'C_UOM_ID_K\'] = dr.getString("c_uom_id");    //  2-UOM -Key\n  //            line[\'M_Product_ID_K\'] = dr.getString("m_product_id");      //  3-Product -Key\n  //            line[\'M_AttributeSetInstance_ID_K\'] = dr.getString("m_attributesetinstance_id");        //  5-Ship -Key\n  //            line[\'C_Order_ID_K\'] = dr.getString("c_orderline_id");      //  4-OrderLine -Key\n  //            line[\'M_InOut_ID_K\'] = null;        //  5-Ship -Key\n  //            line[\'C_Invoice_ID_K\'] = null;        //  6-Invoice -Key\n\n  //            line[\'recid\'] = count;\n  //            count++;\n  //            data.push(line);\n  //        }\n  //        dr.close();\n  //    }\n  //    catch (e) {\n  //        // s_log.log(Level.SEVERE, sql.toString(), e);\n  //    }\n  //    return data;\n  //}\n\n  VCreateFrom.prototype.loadGrid = function (data) {\n    var format = VIS.DisplayType.GetNumberFormat(VIS.DisplayType.Amount);\n    var dotFormatter = VIS.Env.isDecimalPoint();\n    if (this.dGrid != null) {\n      this.dGrid.destroy();\n      this.dGrid = null;\n    }\n    var isSoTrx = "Y".equals(VIS.Env.getCtx().getWindowContext(this.windowNo, "IsSOTrx"));\n    // VA228:Create new grid header when combo selection changed in case of AP Invoice\n    if (this.arrListColumns.length == 0 || $self.mTab.keyColumnName == "C_Invoice_ID" && !isSoTrx) {\n      this.arrListColumns = [];\n      this.arrListColumns.push({\n        field: "Select",\n        caption: VIS.Msg.getMsg("Select"),\n        sortable: false,\n        size: \'50px\',\n        hidden: false,\n        //editable: { type: \'checkbox\' }\n        render: function () {\n          return \'<div><input type=checkbox disabled="true"></div>\';\n        }\n      });\n      this.arrListColumns.push({\n        field: "Quantity",\n        caption: VIS.Msg.getMsg("QtyPending"),\n        sortable: false,\n        size: \'150px\',\n        hidden: false,\n        render: function (record, index, col_index) {\n          var val = record["Quantity"];\n          return parseFloat(val).toLocaleString(undefined, {\n            minimumFractionDigits: 4\n          });\n        }\n      });\n      this.arrListColumns.push({\n        field: "QuantityPending",\n        caption: VIS.Msg.getMsg("Quantity"),\n        sortable: false,\n        size: \'150px\',\n        render: \'number:4\',\n        hidden: true\n      });\n\n      // VA228: Show AP provisional invoice fields when provisional invice combo selected from AP Invoice window\n      if (VIS.Utility.Util.getValueOfInt($self.cmbProvisionalInvoice.getValue()) > 0 && !isSoTrx) {\n        this.arrListColumns.push({\n          field: "QuantityEntered",\n          caption: VIS.Msg.getMsg("QtyEntered"),\n          sortable: false,\n          size: \'150px\',\n          hidden: false\n        });\n        this.arrListColumns.push({\n          field: "POPrice",\n          caption: VIS.Msg.getMsg("POPrice"),\n          sortable: false,\n          size: \'150px\',\n          hidden: false\n        });\n        this.arrListColumns.push({\n          field: "ProvisionalPrice",\n          caption: VIS.Msg.getMsg("ProvisionalPrice"),\n          sortable: false,\n          size: \'150px\',\n          hidden: false\n        });\n        this.arrListColumns.push({\n          field: "InvoicePrice",\n          caption: VIS.Msg.getMsg("InvoicePrice"),\n          editable: {\n            type: \'number\',\n            style: \'background-color: #f8f8f8;\'\n          },\n          sortable: false,\n          size: \'150px\',\n          hidden: false,\n          render: function (record, index, col_index) {\n            var val = record["InvoicePrice"];\n            val = $self.checkcommaordot(event, val);\n            return parseFloat(val).toLocaleString(undefined, {\n              minimumFractionDigits: 4\n            });\n          },\n          style: \'background-color: #d1d1d14a\'\n        });\n      } else {\n        this.arrListColumns.push({\n          field: "QuantityEntered",\n          caption: VIS.Msg.getMsg("QtyEntered"),\n          editable: {\n            type: \'number\',\n            style: \'background-color: #f8f8f8;\'\n          },\n          sortable: false,\n          size: \'150px\',\n          hidden: false,\n          //Added to get QuantityEntered value acc.to culture\n          render: function (record, index, col_index) {\n            var val = record["QuantityEntered"];\n            val = $self.checkcommaordot(event, val);\n            return parseFloat(val).toLocaleString(undefined, {\n              minimumFractionDigits: 4\n            });\n          },\n          style: \'background-color: #d1d1d14a\'\n        });\n      }\n      this.arrListColumns.push({\n        field: "C_UOM_ID",\n        caption: VIS.Msg.getMsg("UomName"),\n        sortable: false,\n        size: \'150px\',\n        hidden: false\n      });\n      //Add product search key column in Grid \n      this.arrListColumns.push({\n        field: "M_Product_SearchKey",\n        caption: VIS.Msg.getMsg("ProductSearchKey"),\n        sortable: false,\n        size: \'150px\',\n        hidden: false\n      });\n      //Set sortable: true for Product Name in Grid // Pratap : 06/08/2016\n      this.arrListColumns.push({\n        field: "M_Product_ID",\n        caption: VIS.Msg.getMsg("ProductName"),\n        sortable: true,\n        size: \'150px\',\n        hidden: false\n      });\n      this.arrListColumns.push({\n        //field: "M_AttributeSetInstance_ID", caption: VIS.Msg.translate(VIS.Env.getCtx(), "M_AttributeSetInstance_ID"), sortable: false, size: \'150px\', hidden: false,\n        //render: function () {\n        //    return \'<div><input type=text readonly="readonly" style= "width:80%; border:none" ></input><img src="\' + VIS.Application.contextUrl + \'Areas/VIS/Images/base/MultiX16.png" alt="Attribute Set Instance" title="Attribute Set Instance" style="opacity:1;float:right;"></div>\';\n        //}\n        field: "M_AttributeSetInstance_ID",\n        caption: VIS.Msg.getMsg("ASI"),\n        sortable: false,\n        size: \'150px\',\n        editable: {\n          type: \'custom\',\n          ctrl: $self.$productAttribute,\n          showAll: true,\n          style: \'background-color: #f8f8f8;\'\n        },\n        render: function (record, index, col_index) {\n          var l = $self.pattrLookup;\n          var val = record["M_AttributeSetInstance_ID"];\n          if (record.changes && typeof record.changes["M_AttributeSetInstance_ID"] != \'undefined\') {\n            val = record.changes["M_AttributeSetInstance_ID"];\n          }\n          var d;\n          if (l) {\n            d = l.getDisplay(val, true);\n          }\n          return d;\n        },\n        style: \'background-color: #d1d1d14a\'\n      });\n\n      // Issue JID_0564: payment term detail on order \n      this.arrListColumns.push({\n        field: "C_PaymentTerm_ID",\n        caption: VIS.Msg.getMsg("C_PaymentTerm_ID"),\n        sortable: false,\n        size: \'150px\',\n        hidden: true\n      });\n      this.arrListColumns.push({\n        field: "PaymentTermName",\n        caption: VIS.Msg.getMsg("PaymentTermName"),\n        sortable: false,\n        size: \'150px\',\n        hidden: false\n      });\n      this.arrListColumns.push({\n        field: "IsAdvance",\n        caption: VIS.Msg.getMsg("IsAdvance"),\n        sortable: false,\n        size: \'150px\',\n        hidden: true\n      });\n      //Issue JID_0564: invoice header payment term detail\n      this.arrListColumns.push({\n        field: "C_InvoicePaymentTerm_ID",\n        caption: VIS.Msg.getMsg("C_InvoicePaymentTerm_ID"),\n        sortable: false,\n        size: \'150px\',\n        hidden: true\n      });\n      this.arrListColumns.push({\n        field: "IsInvoicePTAdvance",\n        caption: VIS.Msg.getMsg("IsInvoicePTAdvance"),\n        sortable: false,\n        size: \'150px\',\n        hidden: true\n      });\n      this.arrListColumns.push({\n        field: "C_Order_ID",\n        caption: VIS.Msg.getMsg("OrderLine"),\n        sortable: false,\n        size: \'150px\',\n        hidden: false\n      });\n      this.arrListColumns.push({\n        field: "M_InOut_ID",\n        caption: VIS.Msg.getMsg("Shipment/Receipt"),\n        sortable: false,\n        size: \'150px\',\n        hidden: false\n      });\n      this.arrListColumns.push({\n        field: "C_Invoice_ID",\n        caption: VIS.Msg.getMsg("Invoice"),\n        sortable: false,\n        size: \'150px\',\n        hidden: false\n      });\n      //this.arrListColumns.push({ field: "Att", caption: "Att", "type": "button", "value": "Att", sortable: true, size: \'150px\', hidden: false }),\n      // Hidden -- > true\n      this.arrListColumns.push({\n        field: "C_UOM_ID_K",\n        caption: VIS.Msg.getMsg("UomName"),\n        sortable: false,\n        size: \'150px\',\n        hidden: true\n      });\n      this.arrListColumns.push({\n        field: "M_Product_ID_K",\n        caption: VIS.Msg.getMsg("ProductName"),\n        sortable: false,\n        size: \'150px\',\n        hidden: true\n      });\n      this.arrListColumns.push({\n        field: "C_Order_ID_K",\n        caption: VIS.Msg.getMsg("Order"),\n        sortable: false,\n        size: \'150px\',\n        hidden: true\n      });\n      this.arrListColumns.push({\n        field: "M_InOut_ID_K",\n        caption: VIS.Msg.getMsg("Shipment/Receipt"),\n        sortable: false,\n        size: \'150px\',\n        hidden: true\n      });\n      this.arrListColumns.push({\n        field: "C_Invoice_ID_K",\n        caption: VIS.Msg.getMsg("Invoice"),\n        sortable: false,\n        size: \'150px\',\n        hidden: true\n      });\n    }\n    w2utils.encodeTags(data);\n    var grdname = \'gridCreateForm\' + this.windowNo;\n    grdname = grdname.replace(\'.\', \'\');\n    this.dGrid = $(this.middelDiv).w2grid({\n      name: grdname,\n      recordHeight: 30,\n      show: {\n        selectColumn: true\n      },\n      multiSelect: true,\n      columns: this.arrListColumns,\n      records: data,\n      onSelect: function (event) {\n        event.onComplete = function () {\n          // Issue No : JID_0564 : make row non editable\n          CreateNonEditableRecord();\n        };\n      },\n      // Added to get value acc. to culture while editing grid column\n      onEditField: function (event) {\n        id = event.recid;\n        if (event.column == 3) {\n          $self.dGrid.records[event.index]["QuantityEntered"] = $self.checkcommaordot(event, $self.dGrid.records[event.index]["QuantityEntered"]);\n          var _value = format.GetFormatAmount($self.dGrid.records[event.index]["QuantityEntered"], "init", dotFormatter);\n          $self.dGrid.records[event.index]["QuantityEntered"] = format.GetConvertedString(_value, dotFormatter);\n          $("#grid_" + $self.dGrid.name + "_rec_" + id).keydown(function (event) {\n            if (!dotFormatter && (event.keyCode == 190 || event.keyCode == 110)) {\n              // , separator\n              return false;\n            } else if (dotFormatter && event.keyCode == 188) {\n              // . separator\n              return false;\n            }\n            if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n              if (event.target.value.indexOf(\'.\') > -1) {\n                event.target.value = event.target.value.replace(\'.\', \'\');\n              }\n            } else if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n              if (event.target.value.indexOf(\',\') > -1) {\n                event.target.value = event.target.value.replace(\',\', \'\');\n              }\n            }\n            if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n              return false;\n            }\n          });\n        }\n\n        // change event of Provisional Price\n        if (event.column == 4 && $self.dGrid.columns[event.column].field == "ProvisionalPrice") {\n          $self.dGrid.records[event.index]["ProvisionalPrice"] = $self.checkcommaordot(event, $self.dGrid.records[event.index]["ProvisionalPrice"]);\n          var _value = format.GetFormatAmount($self.dGrid.records[event.index]["ProvisionalPrice"], "init", dotFormatter);\n          $self.dGrid.records[event.index]["ProvisionalPrice"] = format.GetConvertedString(_value, dotFormatter);\n          $self.dGrid.refreshRow(event.index + 1); //refresh a row of the grid\n          $("#grid_" + $self.dGrid.name + "_rec_" + id).keydown(function (event) {\n            if (!dotFormatter && (event.keyCode == 190 || event.keyCode == 110)) {\n              // , separator\n              return false;\n            } else if (dotFormatter && event.keyCode == 188) {\n              // . separator\n              return false;\n            }\n            if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n              if (event.target.value.indexOf(\'.\') > -1) {\n                event.target.value = event.target.value.replace(\'.\', \'\');\n              }\n            } else if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n              if (event.target.value.indexOf(\',\') > -1) {\n                event.target.value = event.target.value.replace(\',\', \'\');\n              }\n            }\n            if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n              return false;\n            }\n          });\n        }\n\n        // VA228:change event of Provisional Invoice Price (AP Window)\n        if (event.column == 6 && $self.dGrid.columns[event.column].field == "InvoicePrice") {\n          $self.dGrid.records[event.index]["InvoicePrice"] = $self.checkcommaordot(event, $self.dGrid.records[event.index]["InvoicePrice"]);\n          var _value = format.GetFormatAmount($self.dGrid.records[event.index]["InvoicePrice"], "init", dotFormatter);\n          $self.dGrid.records[event.index]["InvoicePrice"] = format.GetConvertedString(_value, dotFormatter);\n          $self.dGrid.refreshRow(event.index + 1); //refresh a row of the grid\n          $("#grid_" + $self.dGrid.name + "_rec_" + id).keydown(function (event) {\n            if (!dotFormatter && (event.keyCode == 190 || event.keyCode == 110)) {\n              // , separator\n              return false;\n            } else if (dotFormatter && event.keyCode == 188) {\n              // . separator\n              return false;\n            }\n            if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n              if (event.target.value.indexOf(\'.\') > -1) {\n                event.target.value = event.target.value.replace(\'.\', \'\');\n              }\n            } else if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n              if (event.target.value.indexOf(\',\') > -1) {\n                event.target.value = event.target.value.replace(\',\', \'\');\n              }\n            }\n            if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n              return false;\n            }\n          });\n        }\n      },\n      //Implemented for BankStatement window (when click on Create Line From button),\n      //change the Converted Amt according to when change the AcctDate on the grid -added by Koteswararao\n      onChange: function (event) {\n        window.setTimeout(function () {\n          if ($self.dGrid.getChanges(event.recid) != undefined) {\n            if (event.column == 0 && $self.dGrid.columns[event.column].field == "Date") {\n              //AD_Org_ID getting from the window.\n              var _orgId = VIS.context.getContextAsInt($self.windowNo, "AD_Org_ID");\n              //Actual Amount\n              var _amount = $self.dGrid.records[event.index].Amount;\n              //BankStatement C_Currency_ID\n              var _currency_Id = $self.dGrid.records[event.index].C_Currency_ID_K;\n              var _convsionId = $self.dGrid.records[event.index].C_ConversionType_ID;\n              //Account Date\n              var _date = $self.dGrid.records[event.index].Date;\n              //_type differentiate weather it is Payment or Cash Journal Line\n              var _type = $self.dGrid.records[event.index].Type;\n              var _payment_Id = $self.dGrid.records[event.index].C_Payment_ID_K;\n              $.ajax({\n                url: VIS.Application.contextUrl + "VCreateFrom/GetConvertedAmount",\n                dataType: "json",\n                type: "POST",\n                data: {\n                  _paymentId: _payment_Id,\n                  amount: _amount,\n                  currencyId: _currency_Id,\n                  convsion_Id: _convsionId,\n                  date: _date,\n                  paymentType: _type,\n                  _org_id: _orgId\n                },\n                error: function () {\n                  //if through error it will return below message.\n                  VIS.ADialog.info("ErrorWhileGettingData", null, "", "");\n                  self.$super.setBusy(false);\n                  return;\n                },\n                success: function (_list) {\n                  _list = JSON.parse(_list);\n                  if (VIS.Utility.Util.getValueOfString(_list._message) == "Success") {\n                    _convertedAmt = VIS.Utility.Util.getValueOfDecimal(_list.convtAmt);\n                    $self.dGrid.records[event.index].changes.ConvertedAmount = _convertedAmt;\n                    $self.dGrid.records[event.index]["ConvertedAmount"] = _convertedAmt;\n                    $self.dGrid.refreshRow(event.index + 1); //refresh a row of the grid\n                  } else {\n                    VIS.ADialog.info(_list._message, null, "", "");\n                  }\n                }\n              });\n            }\n          }\n        }, 100);\n      }\n    });\n    this.dGrid.selectNone();\n    var C_Order_ID = VIS.Utility.Util.getValueOfInt($self.cmbOrder.getValue());\n    var C_Invoice_ID = VIS.Utility.Util.getValueOfInt($self.cmbInvoice.getValue());\n    var M_InOut_ID = VIS.Utility.Util.getValueOfInt($self.cmbShipment.getValue());\n    for (itm in $self.multiValues) {\n      for (item in $self.dGrid.records) {\n        //if ($self.dGrid.records[item]["M_Product_ID"] == $self.multiValues[itm]) {\n        //    $self.dGrid.select(parseInt(item) + 1);\n        //}\n        var obj = $.grep($self.multiValues, function (n, i) {\n          if (C_Order_ID > 0) {\n            return n.M_Product_ID_K == $self.dGrid.records[item]["M_Product_ID_K"] && n.C_Order_ID_K == $self.dGrid.records[item]["C_Order_ID_K"];\n          } else if (C_Invoice_ID > 0) {\n            return n.M_Product_ID_K == $self.dGrid.records[item]["M_Product_ID_K"] && n.C_Invoice_ID_K == $self.dGrid.records[item]["C_Invoice_ID_K"];\n          } else if (M_InOut_ID > 0) {\n            return n.M_Product_ID_K == $self.dGrid.records[item]["M_Product_ID_K"] && n.M_InOut_ID_K == $self.dGrid.records[item]["M_InOut_ID_K"];\n          } else {\n            return n.C_Payment_ID_K == $self.dGrid.records[item]["C_Payment_ID_K"];\n          }\n        });\n        if (obj.length > 0) {\n          $self.dGrid.select(parseInt(item) + 1);\n        }\n      }\n    }\n    if (this.dGrid.records.length > 0) {\n      $self.NonEditableRecord = [];\n      for (var i = 0; i < $self.dGrid.records.length; i++) {\n        //$("#grid_" + $self.dGrid.name + "_rec_" + (i + 1)).find("input[type=text]").val(data[i].M_AttributeSetInstance_ID);\n        $($("#grid_" + $self.dGrid.name + "_rec_" + (i + 1)).find("input[type=checkbox]")[1]).prop("checked", data[i].Select);\n\n        // Issue No : JID_0564 \n        if ($self.dGrid.records[i]["C_InvoicePaymentTerm_ID"] == $self.dGrid.records[i]["C_PaymentTerm_ID"] || $self.dGrid.records[i]["C_InvoicePaymentTerm_ID"] == 0) {\n          // not to disable record when payment term is same or for M_Inout table\n        } else if (!($self.dGrid.records[i]["C_InvoicePaymentTerm_ID"] != $self.dGrid.records[i]["C_PaymentTerm_ID"] && $self.dGrid.records[i]["IsAdvance"] == false && $self.dGrid.records[i]["IsInvoicePTAdvance"] == false)) {\n          // except payment term not matched and not advance\n          $("#grid_" + $self.dGrid.name + "_rec_" + (i + 1) + \' \' + \' input\').attr(\'disabled\', true);\n          $self.NonEditableRecord.push(i + 1);\n        }\n      }\n    }\n    function CreateNonEditableRecord() {\n      for (var i = 0; i < $self.dGrid.records.length; i++) {\n        // Issue JID_0564 : if index exist in non editable record array, then make that record read only and mark selected checkbox as false \n        if ($self.NonEditableRecord.indexOf(i + 1) >= 0) {\n          $self.dGrid.unselect(i + 1);\n          $("#grid_" + $self.dGrid.name + "_rec_" + (i + 1) + \' \' + \' input\').attr(\'disabled\', true);\n        }\n      }\n    }\n    ;\n    this.dGrid.on("change", function (e) {\n      CreateNonEditableRecord();\n      if ($self.dGrid.columns[e.column].field == "QuantityEntered") {\n        var _val = format.GetConvertedNumber(e.value_new, dotFormatter);\n        if ($self.fromInvoice) {\n          if ($self.dGrid.records[e.index]["QuantityPending"] < _val.toFixed(4)) {\n            VIS.ADialog.error("InvoiceQtyGreater");\n            e.value_new = e.value_original;\n            return;\n          }\n        } // JID_0273: Create line from on material Recipt allow user set qty more than PO qty\n        else {\n          if ($self.dGrid.records[e.index]["QuantityPending"] < _val.toFixed(4)) {\n            VIS.ADialog.error("QtyCanNotbeGreater");\n            e.value_new = e.value_original;\n            return;\n          }\n        }\n        $self.dGrid.records[e.index]["QuantityEntered"] = _val.toFixed(4);\n        if (C_Order_ID > 0 || C_Invoice_ID > 0) {\n          AddEditedLine("QuantityEntered", e.index, _val.toFixed(4));\n        }\n      }\n      if ($self.dGrid.columns[e.column].field == "ProvisionalPrice") {\n        var _val = format.GetConvertedNumber(e.value_new, dotFormatter);\n        if (_val < 0) {\n          VIS.ADialog.error("PriceCantNegative");\n          e.value_new = e.value_original;\n          return;\n        }\n        $self.dGrid.records[e.index]["ProvisionalPrice"] = _val.toFixed(4);\n        AddEditedLine("ProvisionalPrice", e.index, _val.toFixed(4));\n      } else if ($self.dGrid.columns[e.column].field == "InvoicePrice") {\n        //VA228:Check invoice price and apply amount format\n        var _val = format.GetConvertedNumber(e.value_new, dotFormatter);\n        if (_val < 0) {\n          VIS.ADialog.error("PriceCantNegative");\n          e.value_new = e.value_original;\n          return;\n        }\n        $self.dGrid.records[e.index]["InvoicePrice"] = _val.toFixed(4);\n        AddEditedLine("InvoicePrice", e.index, _val.toFixed(4));\n      } else if ($self.dGrid.columns[e.column].field == "M_AttributeSetInstance_ID") {\n        $self.dGrid.records[e.index]["M_AttributeSetInstance_ID"] = e.value_new;\n        if (C_Order_ID > 0 || C_Invoice_ID > 0) {\n          AddEditedLine("M_AttributeSetInstance_ID", e.index, e.value_new);\n        }\n      }\n      // JID_1743: Need to make the Account date as editable on Create lines from Bank Statement.\n      else if ($self.dGrid.columns[e.column].field == "Date") {\n        //handled Invalid Date when user click on Account Date and not \n        //selected Date just Double clicked and exist form that edit field - Added by Koteswararao\n        if (e.value_new != "") {\n          $self.dGrid.records[e.index]["Date"] = e.value_new;\n        } else if (e.value_previous != "") {\n          $self.dGrid.records[e.index]["Date"] = e.value_previous;\n        } else if (e.value_original != "") {\n          $self.dGrid.records[e.index]["Date"] = e.value_original;\n        }\n        if ($self.dGrid.records[e.index]["Date"] != "") {\n          //AddEditedLine("Date", e.index, e.value_new);\n          AddEditedLine("Date", e.index, $self.dGrid.records[e.index]["Date"]);\n        }\n      }\n    });\n    // Change By Mohit 30/06/2016\n    function AddEditedLine(column, index, new_value) {\n      var selectprd = $self.dGrid.records[index]["M_Product_ID_K"];\n\n      //if ($self.multiValues.indexOf(unselectedVal) > -1) {\n      //    $self.multiValues.splice($self.multiValues.indexOf(unselectedVal), 1);\n      //}\n      var obj = $.grep($self.editedItems, function (n, i) {\n        if (C_Order_ID > 0) {\n          return n.M_Product_ID_K == selectprd && n.C_Order_ID_K == $self.dGrid.records[index]["C_Order_ID_K"];\n        } else if (C_Invoice_ID > 0) {\n          return n.M_Product_ID_K == selectprd && n.C_Invoice_ID_K == $self.dGrid.records[index]["C_Invoice_ID_K"];\n        } else if (M_InOut_ID > 0) {\n          return n.M_Product_ID_K == selectprd && n.M_InOut_ID_K == $self.dGrid.records[index]["M_InOut_ID_K"];\n        } else {\n          return n.C_Payment_ID_K == $self.dGrid.records[item]["C_Payment_ID_K"];\n        }\n      });\n      if (obj.length > 0) {\n        $self.editedItems.splice($self.editedItems.indexOf(obj[0]), 1);\n        $self.editedItems.push($self.dGrid.records[index]);\n      } else {\n        //can\'t add duplicate records in editedItems, so that implemented below flag condition\n        var flag = 0;\n        for (var i = 0; i < $self.editedItems.length; i++) {\n          if ($self.editedItems[i].recid == $self.dGrid.records[index].recid) {\n            flag = 1;\n            break;\n          }\n        }\n        if (flag == 0) {\n          $self.editedItems.push($self.dGrid.records[index]);\n        }\n      }\n    }\n    ;\n\n    //this.dGrid.on("click", function (e) {\n    //    e.preventDefault;\n    //    if ($self.dGrid.columns[e.column].field == "M_AttributeSetInstance_ID") {\n    //        var mattsetid = 0;\n\n    //        var mProductidK = $self.dGrid.records[e.recid - 1]["M_Product_ID_K"]\n    //        $.ajax({\n    //            url: VIS.Application.contextUrl + "VCreateFrom/GetMattSetIDCommon",\n    //            dataType: "json",\n    //            type: "POST",\n    //            async: false,\n    //            data: {\n    //                M_Product_ID_Ks: mProductidK,\n    //            },\n    //            error: function () {\n    //                alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n    //                $self.setBusy(false);\n    //                return;\n    //            },\n    //            success: function (dyndata) {\n    //                var res = JSON.parse(dyndata);\n    //                mattsetid = res;\n    //            }\n    //        });\n\n    //        if (mattsetid != 0) {\n    //            VIS.Env.getCtx().setContext($self.windowNo, "M_Product_ID", VIS.Utility.Util.getValueOfInt($self.dGrid.records[e.recid - 1]["M_Product_ID_K"]));\n    //        }\n    //        else {\n    //            return;\n    //        }\n    //    }\n    //});\n\n    this.dGrid.on("click", function (e) {\n      e.preventDefault;\n      CreateNonEditableRecord();\n      // JID_0815 : Removed check to restrict the opening of attribute from in case product is not attribute enabled. Save product in context for every click in grid row.\n      //if ($self.dGrid.columns[e.column].field == "M_AttributeSetInstance_ID") {\n\n      // JID_1278: Should not allow to bind Attribute Set Instance to the Product if the Attribute Set is not mapped with the Product.\n      VIS.Env.getCtx().setContext($self.windowNo, "M_Product_ID", VIS.Utility.Util.getValueOfInt($self.dGrid.records[e.recid - 1]["M_Product_ID_K"]));\n\n      //var AD_Column_ID = 0;\n      //var productWindow = AD_Column_ID == 8418;\t\t//\tHARDCODED\n      //var M_Locator_ID = VIS.context.getContextAsInt($self.windowNo, "M_Locator_ID");\n      //var C_BPartner_ID = VIS.context.getContextAsInt($self.windowNo, "C_BPartner_ID");\n      //var obj = new VIS.PAttributesForm(VIS.Utility.Util.getValueOfInt($self.dGrid.records[e.recid - 1].M_AttributeSetInstance_ID_K), VIS.Utility.Util.getValueOfInt($self.dGrid.records[e.recid - 1].M_Product_ID_K), M_Locator_ID, C_BPartner_ID, productWindow, AD_Column_ID, $self.windowNo);\n      //if (obj.hasAttribute) {\n      //    obj.showDialog();\n      //}\n      //obj.onClose = function (mAttributeSetInstanceId, name, mLocatorId) {\n      //    $("#grid_" + $self.dGrid.name + "_rec_" + (e.recid)).find("input[type=text]").val(name);\n      //    $self.dGrid.records[e.recid - 1].M_AttributeSetInstance_ID_K = mAttributeSetInstanceId;\n      //    $self.dGrid.records[e.recid - 1].M_AttributeSetInstance_ID = name;\n      //};\n\n      //var mattsetid = VIS.Utility.Util.getValueOfInt(executeScalar("SELECT M_AttributeSet_ID FROM M_Product WHERE M_Product_ID = " + $self.dGrid.records[e.recid - 1]["M_Product_ID_K"]));\n      //if (mattsetid != 0) {                    \n      //}\n      //else {\n      //    return;\n      //}\n      //}\n    });\n    var executeScalar = function (sql, params, callback) {\n      var async = callback ? true : false;\n      var dataIn = {\n        sql: sql,\n        page: 1,\n        pageSize: 0\n      };\n      var value = null;\n      getDataSetJString(dataIn, async, function (jString) {\n        dataSet = new VIS.DB.DataSet().toJson(jString);\n        var dataSet = new VIS.DB.DataSet().toJson(jString);\n        if (dataSet.getTable(0).getRows().length > 0) {\n          value = dataSet.getTable(0).getRow(0).getCell(0);\n        } else {\n          value = null;\n        }\n        dataSet.dispose();\n        dataSet = null;\n        if (async) {\n          callback(value);\n        }\n      });\n      return value;\n    };\n    var baseUrl = VIS.Application.contextUrl;\n    var dataSetUrl = baseUrl + "JsonData/JDataSet";\n    var nonQueryUrl = baseUrl + "JsonData/ExecuteNonQuer";\n    function getDataSetJString(data, async, callback) {\n      var result = null;\n      // data.sql = VIS.secureEngine.encrypt(data.sql);\n      $.ajax({\n        url: dataSetUrl,\n        type: "POST",\n        datatype: "json",\n        contentType: "application/json; charset=utf-8",\n        async: async,\n        data: JSON.stringify(data)\n      }).done(function (json) {\n        result = json;\n        if (callback) {\n          callback(json);\n        }\n        //return result;\n      });\n      return result;\n    }\n    ;\n\n    //this.dGrid.on("select", function (event) {\n    //    if (event.all) {\n    //        event.onComplete = function () {\n    //            if ($self.dGrid.records.length > 0) {\n    //                for (var i = 0; i < $self.dGrid.records.length; i++) {\n    //                    $("#grid_" + $self.dGrid.name + "_rec_" + (i + 1)).find("input[type=text]").val(data[i].M_AttributeSetInstance_ID);\n    //                    $($("#grid_" + $self.dGrid.name + "_rec_" + (i + 1)).find("input[type=checkbox]")[1]).prop("checked", data[i].Select);\n    //                }\n    //            }\n    //        }\n    //    }\n    //});\n\n    this.dGrid.on(\'unselect\', function (e) {\n      if (e.all) {\n        e.onComplete = function () {\n          for (item in $self.dGrid.records) {\n            //if ($self.dGrid.records[item]["M_Product_ID"] == $self.multiValues[itm]) {\n            //    $self.dGrid.select(parseInt(item) + 1);\n            //}\n            var obj = $.grep($self.multiValues, function (n, i) {\n              if (C_Order_ID > 0) {\n                return n.M_Product_ID_K == $self.dGrid.records[item]["M_Product_ID_K"] && n.C_Order_ID_K == $self.dGrid.records[item]["C_Order_ID_K"];\n              } else if (C_Invoice_ID > 0) {\n                return n.M_Product_ID_K == $self.dGrid.records[item]["M_Product_ID_K"] && n.C_Invoice_ID_K == $self.dGrid.records[item]["C_Invoice_ID_K"];\n              } else if (M_InOut_ID > 0) {\n                return n.M_Product_ID_K == $self.dGrid.records[item]["M_Product_ID_K"] && n.M_InOut_ID_K == $self.dGrid.records[item]["M_InOut_ID_K"];\n              } else {\n                return n.C_Payment_ID_K == $self.dGrid.records[item]["C_Payment_ID_K"];\n              }\n            });\n            if (obj.length > 0) {\n              $self.multiValues.splice($self.multiValues.indexOf(obj[0]), 1);\n            }\n          }\n        };\n      } else {\n        var unselectprd = w2ui[e.target].records[e.index]["M_Product_ID_K"];\n\n        //if ($self.multiValues.indexOf(unselectedVal) > -1) {\n        //    $self.multiValues.splice($self.multiValues.indexOf(unselectedVal), 1);\n        //}\n        var obj = $.grep($self.multiValues, function (n, i) {\n          if (C_Order_ID > 0) {\n            return n.M_Product_ID_K == unselectprd && n.C_Order_ID_K == w2ui[e.target].records[e.index]["C_Order_ID_K"];\n          } else if (C_Invoice_ID > 0) {\n            return n.M_Product_ID_K == unselectprd && n.C_Invoice_ID_K == w2ui[e.target].records[e.index]["C_Invoice_ID_K"];\n          } else if (M_InOut_ID > 0) {\n            return n.M_Product_ID_K == unselectprd && n.M_InOut_ID_K == w2ui[e.target].records[e.index]["M_InOut_ID_K"];\n          } else {\n            return n.C_Payment_ID_K == $self.dGrid.records[item]["C_Payment_ID_K"];\n          }\n        });\n        if (obj.length > 0) {\n          $self.multiValues.splice($self.multiValues.indexOf(obj[0]), 1);\n        }\n      }\n    });\n  };\n\n  //Load form into VIS\n  VIS.VCreateFrom = VCreateFrom;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vcreatefrom.js?\n}')},"./Areas/VAS/Scripts/app/forms/vcreatefrominvoice.js":()=>{eval('{;\n(function (VIS, $) {\n  //form declaretion\n  function VCreateFromInvoice(tab) {\n    var baseObj = this.$super;\n    baseObj.constructor(tab);\n    var selfChild = this;\n    dynInit();\n    baseObj.jbInit();\n    baseObj.initOK = true;\n    var windowNo = tab.getWindowNo();\n\n    // create Log\n    this.log = VIS.Logging.VLogger.getVLogger("VCreateFromInvoice");\n    function dynInit() {\n      //DynInit\n      baseObj.title = VIS.Msg.getMsg("Invoice") + " .. " + VIS.Msg.getMsg("CreateFrom");\n\n      //baseObj.lblInvoice.visible = false;\n      //baseObj.cmbInvoice.visible = false;\n      //baseObj.lblLocator.visible = false;\n      //baseObj.locatorField.visible = false;\n\n      if (baseObj.lblInvoice != null) baseObj.lblInvoice.getControl().css(\'display\', \'none\');\n      if (baseObj.cmbInvoice != null) baseObj.cmbInvoice.getControl().css(\'display\', \'none\');\n      if (baseObj.lblLocator != null) baseObj.lblLocator.getControl().css(\'display\', \'none\');\n      if (baseObj.locatorField != null) baseObj.locatorField.getControl().css(\'display\', \'none\');\n      baseObj.deliveryDate = new VIS.Controls.VDate("DeliveryDate", false, false, true, VIS.DisplayType.Date, "DeliveryDate");\n      var lookupProd = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), baseObj.windowNo, 2221, VIS.DisplayType.Search);\n      baseObj.vProduct = new VIS.Controls.VTextBoxButton("M_Product_ID", true, false, true, VIS.DisplayType.Search, lookupProd);\n      var C_BPartner_ID = baseObj.initBPartner(true);\n      baseObj.vBPartner.setReadOnly(true);\n      initBPDetails(C_BPartner_ID);\n      baseObj.fromInvoice = true;\n      return true;\n    }\n\n    // Checked\n    function getShipments(ctx, C_BPartner_ID) {\n      //var pairs = [];\n\n      //var display = ("s.DocumentNo||\' - \'||")\n      //    .concat(VIS.DB.to_char("s.MovementDate", VIS.DisplayType.Date, VIS.Env.getAD_Language(VIS.Env.getCtx())));\n      // New column added to fill invoice which drop ship is true\n      // Added by Vivek on 09/10/2017 advised by Pradeep\n      var _isdrop = "Y".equals(VIS.Env.getCtx().getWindowContext(selfChild.windowNo, "IsDropShip"));\n      var _isSoTrx = "Y".equals(VIS.Env.getCtx().getWindowContext(selfChild.windowNo, "IsSOTrx"));\n      //VA230:Get IsReturnTrx based on document type on invoice\n      var dt = VIS.dataContext.getJSONRecord("MDocType/GetDocType", VIS.Env.getCtx().getContextAsInt(selfChild.windowNo, "C_DocTypeTarget_ID").toString());\n      var isReturnTrx = VIS.Utility.Util.getValueOfBoolean(dt["IsReturnTrx"]);\n      var sql = " M_InOut_ID IN (SELECT s.M_InOut_ID FROM M_InOut s WHERE s.C_BPartner_ID = " + C_BPartner_ID + " AND s.IsSOTrx = \'" + (_isSoTrx ? "Y" : "N") + "\' AND s.DocStatus IN(\'CL\', \'CO\') AND s.IsDropShip=\'" + (_isdrop ? "Y" : "N") + "\'";\n      if (isReturnTrx != null) {\n        sql += " AND S.IsReturnTrx=\'" + (isReturnTrx == true ? "Y" : "N") + "\'";\n      }\n      //execute in case AP Invoice\n      if (!_isSoTrx) {\n        sql += " AND s.M_InOut_ID NOT IN (SELECT DISTINCT OL.M_InOut_ID FROM C_ProvisionalInvoice PI" + " INNER JOIN C_ProvisionalInvoiceLine IL ON IL.C_ProvisionalInvoice_ID = PI.C_ProvisionalInvoice_ID" + " INNER JOIN M_InOutLine OL ON OL.M_InOutLine_ID = IL.M_InOutLine_ID AND S.M_InOut_ID = OL.M_InOut_ID" + " WHERE  PI.IsActive = \'Y\' AND pi.DocStatus NOT IN(\'VO\', \'RE\')) ";\n      }\n      sql += " AND s.M_InOut_ID IN (SELECT t.M_InOut_ID FROM (SELECT sl.M_InOut_ID, sl.M_InOutLine_ID, sl.MovementQty, " + " (SELECT SUM(NVL(il.QtyInvoiced, 0)) FROM C_InvoiceLine il INNER JOIN C_Invoice I ON I.C_INVOICE_ID = il.C_INVOICE_ID" + " WHERE i.DocStatus NOT IN (\'VO\', \'RE\') AND sl.M_InOutLine_ID = il.M_InOutLine_ID) AS QtyInvoiced" + " FROM M_InOutLine sl) t" + " GROUP BY t.M_InOut_ID, t.M_InOutLine_ID, t.MovementQty HAVING t.MovementQty > SUM(NVL(t.QtyInvoiced, 0))))";\n      var lookupShipment = VIS.MLookupFactory.get(VIS.Env.getCtx(), baseObj.windowNo, 0, VIS.DisplayType.Search, "M_InOut_ID", 0, false, sql);\n      baseObj.cmbShipment = new VIS.Controls.VTextBoxButton("M_InOut_ID", true, false, true, VIS.DisplayType.Search, lookupShipment);\n\n      //$.ajax({\n      //    url: VIS.Application.contextUrl + "VCreateFrom/GetShipmentsData",\n      //    type: \'POST\',\n      //    data: {\n      //        displays: display, CBPartnerIDs: C_BPartner_ID, IsDrop: _isdrop, IsSOTrx: _isSoTrx, isReturnTrxs: isReturnTrx, isProvisionlInvoices: false\n      //    },\n      //    success: function (data) {\n      //        var ress = JSON.parse(data);\n      //        if (ress && ress.length > 0) {\n      //            var key, value;\n      //            for (var i = 0; i < ress.length; i++) {\n      //                key = VIS.Utility.Util.getValueOfInt(ress[i]["key"]);\n      //                value = VIS.Utility.encodeText(ress[i]["value"]);\n      //                //pairs.push({ ID: key, value: value });\n\n      //                if (i == 0) {\n      //                    baseObj.cmbShipment.getControl().append(" <option value=0> </option>");\n      //                }\n      //                baseObj.cmbShipment.getControl().append(" <option value=" + key + ">" + value + "</option>");\n      //            }\n      //            baseObj.cmbShipment.getControl().prop(\'selectedIndex\', 0);\n      //        }\n      //    },\n      //    error: function (e) {\n      //        selfChild.log.info(e);\n      //    },\n      //});            \n    }\n\n    //function getShipments(ctx, C_BPartner_ID) {\n    //    var pairs = [];\n\n    //    //\tDisplay\n    //    var display = ("s.DocumentNo||\' - \'||")\n    //        .concat(VIS.DB.to_char("s.MovementDate", VIS.DisplayType.Date, VIS.Env.getAD_Language(VIS.Env.getCtx())));\n\n    //    //var sql = ("SELECT s.M_InOut_ID,").concat(display)\n    //    //    .concat(" FROM M_InOut s "\n    //    //    + "WHERE s.C_BPartner_ID=" + C_BPartner_ID + " AND s.IsSOTrx=\'N\' AND s.DocStatus IN (\'CL\',\'CO\')"\n    //    //    + " AND s.M_InOut_ID IN "\n    //    //        + "(SELECT sl.M_InOut_ID FROM M_InOutLine sl"\n    //    //        + " LEFT OUTER JOIN M_MatchInv mi ON (sl.M_InOutLine_ID=mi.M_InOutLine_ID) "\n    //    //        + "GROUP BY sl.M_InOut_ID,mi.M_InOutLine_ID,sl.MovementQty "\n    //    //        + "HAVING (sl.MovementQty<>SUM(mi.Qty) AND mi.M_InOutLine_ID IS NOT NULL)"\n    //    //        + " OR mi.M_InOutLine_ID IS NULL) "\n    //    //    + "ORDER BY s.MovementDate");\n    //    //Added by Arpit Rai on 30th March,2017\n    //    //Purpose -changed in query to pic only those shipment whose invoice not in completed /closed / drafted mode\n    //    //code commented\n    //    //var sql = ("SELECT s.M_InOut_ID,").concat(display).concat(" FROM M_InOut s "\n    //    //    + "WHERE s.C_BPartner_ID=" + C_BPartner_ID + " AND s.IsSOTrx=\'N\' AND s.DocStatus IN (\'CL\',\'CO\')"\n    //    //    + " AND s.M_InOut_ID IN "\n    //    //    + "(SELECT M_InOut_ID FROM (SELECT sl.M_InOut_ID,sl.M_InOutLine_ID,sl.MovementQty,mi.Qty FROM M_InOutLine sl "\n    //    //    + "LEFT OUTER JOIN M_MatchInv mi ON (sl.M_InOutLine_ID=mi.M_InOutLine_ID) WHERE (sl.MovementQty <> nvl(mi.Qty,0) "\n    //    //    + "AND mi.M_InOutLine_ID IS NOT NULL) OR mi.M_InOutLine_ID IS NULL ) GROUP BY M_InOut_ID,M_InOutLine_ID,MovementQty "\n    //    //    + "HAVING MovementQty > SUM(nvl(Qty,0))) ORDER BY s.MovementDate");\n    //    //code added here\n    //    var sql = ("SELECT s.M_InOut_ID,").concat(display).concat(" FROM M_InOut s "\n    //       + "WHERE s.C_BPartner_ID=" + C_BPartner_ID + " AND s.IsSOTrx=\'N\' AND s.DocStatus IN (\'CL\',\'CO\')"\n    //       + " AND s.M_InOut_ID IN "\n    //       + "(SELECT M_InOut_ID FROM (SELECT sl.M_InOut_ID,sl.M_InOutLine_ID,sl.MovementQty,mi.Qty,IL.QtyInvoiced FROM M_InOutLine sl "\n    //       + "LEFT OUTER JOIN M_MatchInv mi ON (sl.M_InOutLine_ID=mi.M_InOutLine_ID) "\n    //       + " LEFT OUTER JOIN C_INVOICELINE IL    ON (sl.C_ORDERLINE_ID =IL.C_ORDERLINE_ID)"\n    //       + " LEFT OUTER JOIN C_Invoice I   ON I.C_INVOICE_ID      =IL.C_INVOICE_ID "\n    //       + " AND I.DOCSTATUS NOT   IN (\'VO\',\'RE\') "\n    //       + " WHERE (sl.MovementQty <> nvl(mi.Qty,0) OR SL.MovementQty     <> NVL(IL.QtyInvoiced,0)"\n    //       + "AND mi.M_InOutLine_ID IS NOT NULL) OR mi.M_InOutLine_ID IS NULL ) GROUP BY M_InOut_ID,M_InOutLine_ID,MovementQty "\n    //       + "HAVING MovementQty > SUM(nvl(Qty,0)) OR MovementQty    > SUM(NVL(QtyInvoiced,0)) ) ORDER BY s.MovementDate");\n    //    //End here\n    //    try {\n    //        var dr = VIS.DB.executeReader(sql.toString(), null);\n    //        var key, value;\n    //        while (dr.read()) {\n    //            key = VIS.Utility.Util.getValueOfInt(dr.getString(0));\n    //            value = dr.getString(1);\n    //            pairs.push({ ID: key, value: value });\n    //        }\n    //        dr.close();\n    //    }\n    //    catch (e) {\n    //        //s_log.log(Level.SEVERE, sql.toString(), e);\n    //    }\n    //    return pairs;\n    //}\n\n    function initBPDetails(C_BPartner_ID) {\n      //baseObj.cmbShipment.getControl().html("");            \n      getShipments(VIS.Env.getCtx(), C_BPartner_ID);\n\n      //for (var i = 0; i < shipments.length; i++) {\n      //    if (i == 0) {\n      //        baseObj.cmbShipment.getControl().append(" <option value=0> </option>");\n      //    }\n      //    baseObj.cmbShipment.getControl().append(" <option value=" + shipments[i].ID + ">" + shipments[i].value + "</option>");\n      //};\n      //baseObj.cmbShipment.getControl().prop(\'selectedIndex\', 0);\n    }\n    this.disposeComponent = function () {\n      baseObj = null;\n      selfChild = null;\n      this.disposeComponent = null;\n    };\n  }\n  ;\n  VIS.Utility.inheritPrototype(VCreateFromInvoice, VIS.VCreateFrom); //Inherit from VCreateFrom\n\n  VCreateFromInvoice.prototype.saveInvoice = function () {\n    if (this.$super.dGrid == null) {\n      return false;\n    }\n    var model = {}; //this.$super.dGrid.records;\n    var selectedItems = this.$super.multiValues;\n    if (selectedItems == null) {\n      return false;\n    }\n    if (selectedItems.length <= 0) {\n      return false;\n    }\n    //var splitValue = selectedItems.toString().split(\',\');\n    for (var i = 0; i < selectedItems.length; i++) {\n      model[i] = selectedItems[i];\n    }\n\n    //\tGet Shipment\n    var C_Invoice_ID = this.$super.mTab.getValue("C_Invoice_ID");\n    var C_Order_ID = VIS.Utility.Util.getValueOfInt(this.$super.cmbOrder.getValue());\n    var M_InOut_ID = VIS.Utility.Util.getValueOfInt(this.$super.cmbShipment.getValue());\n    var C_ProvisionalInvoice_ID = VIS.Utility.Util.getValueOfInt(this.$super.cmbProvisionalInvoice.getValue());\n    if (C_ProvisionalInvoice_ID == undefined || C_ProvisionalInvoice_ID == "") C_ProvisionalInvoice_ID = 0;\n    return this.saveData(model, "", C_Order_ID, M_InOut_ID, C_Invoice_ID, C_ProvisionalInvoice_ID);\n  };\n\n  //Added by Bharat for new search filters\n\n  VCreateFromInvoice.prototype.loadShipments = function (M_InOut_ID, M_Product_ID, pNo) {\n    var data = this.getShipmentsData(VIS.Env.getCtx(), M_InOut_ID, M_Product_ID, pNo);\n    //this.$super.loadGrid(data);\n  };\n\n  // Create \n  VCreateFromInvoice.prototype.getShipmentsData = function (ctx, M_InOut_ID, M_Product_ID, pNo) {\n    var data = [];\n    var self = this;\n    this.$super.record_ID = $self.mTab.getValue("C_Invoice_ID");\n    if (self.$super.dGrid != null) {\n      var selection = self.$super.dGrid.getSelection();\n      for (item in selection) {\n        var obj = $.grep(self.$super.multiValues, function (n, i) {\n          return n.M_Product_ID_K == self.$super.dGrid.get(selection[item])["M_Product_ID_K"] && n.M_InOut_ID_K == self.$super.dGrid.get(selection[item])["M_InOut_ID_K"];\n        });\n        if (obj.length > 0) {} else {\n          self.$super.multiValues.push(self.$super.dGrid.get(selection[item]));\n        }\n      }\n    }\n    var isBaseLangage = "";\n    var mProductIDs = "";\n    if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n      isBaseLangage = "FROM C_UOM uom INNER JOIN M_InOutLine l ON (l.C_UOM_ID=uom.C_UOM_ID) ";\n    } else {\n      isBaseLangage = "FROM C_UOM_Trl uom Left join C_UOM uom1 on (uom1.C_UOM_ID=uom.C_UOM_ID)  INNER JOIN M_InOutLine l ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'" + VIS.Env.getAD_Language(ctx) + "\') ";\n    }\n    if (M_Product_ID != null) {\n      mProductIDs = " AND l.M_Product_ID=" + M_Product_ID;\n    }\n    if (!pNo) {\n      pNo = 1;\n    }\n    $.ajax({\n      url: VIS.Application.contextUrl + "VCreateFrom/GetDataVCreateFrom",\n      dataType: "json",\n      type: "POST",\n      data: {\n        keyColumnName: self.$super.mTab.keyColumnName,\n        tableName: "M_InOutLine",\n        recordID: self.$super.record_ID,\n        pageNo: pNo,\n        mInOutId: M_InOut_ID,\n        isBaseLanguages: isBaseLangage,\n        mProductIDD: mProductIDs\n      },\n      error: function (e) {\n        alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n        self.$super.setBusy(false);\n        selfChild.log.info(e);\n        return;\n      },\n      success: function (dyndata) {\n        var res = JSON.parse(dyndata);\n        if (res.Error) {\n          VIS.ADialog.error(res.Error);\n          self.$super.setBusy(false);\n          return;\n        }\n        self.$super.resetPageCtrls(res.pSetting);\n        self.$super.loadGrid(res.data);\n        self.$super.setBusy(false);\n      }\n    });\n    return data;\n  };\n\n  //VCreateFromInvoice.prototype.getShipmentsData = function (ctx, M_InOut_ID, M_Product_ID, pNo) {\n\n  //    var data = [];\n  //    var self = this;\n  //    this.$super.record_ID = $self.mTab.getValue("C_Invoice_ID");\n  //    if (self.$super.dGrid != null) {\n  //        var selection = self.$super.dGrid.getSelection();\n  //        for (item in selection) {\n  //            var obj = $.grep(self.$super.multiValues, function (n, i) {\n  //                return n.M_Product_ID_K == self.$super.dGrid.get(selection[item])["M_Product_ID_K"] && n.M_InOut_ID_K == self.$super.dGrid.get(selection[item])["M_InOut_ID_K"]\n  //            });\n  //            if (obj.length > 0) {\n\n  //            }\n  //            else {\n  //                self.$super.multiValues.push(self.$super.dGrid.get(selection[item]));\n  //            }\n  //        }\n  //    }\n  //    var sql = ("SELECT " // QtyEntered                \n  //            //+ "l.MovementQty-SUM(NVL(mi.Qty,0)),round(l.QtyEntered/l.MovementQty,6),"\n  //            + "round((l.MovementQty-SUM(COALESCE(mi.Qty,0))) * "\t\t\t\t\t//\t1               \n  //            + "(CASE WHEN l.MovementQty=0 THEN 0 ELSE l.QtyEntered/l.MovementQty END ),2) as QUANTITY,"\t//\t2\n  //            + "round((l.MovementQty-SUM(COALESCE(mi.Qty,0))) * "\t\t\t\t\t//\t1               \n  //            + "(CASE WHEN l.MovementQty=0 THEN 0 ELSE l.QtyEntered/l.MovementQty END ),2) as QTYENTER,"\t//\t2\n  //            + " l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name) as UOM," // 3..4\n  //            + " l.M_Product_ID,p.Name as Product, l.M_InOutLine_ID,l.Line," // 5..8\n  //            + " l.C_OrderLine_ID, " // 9\n  //            + " l.M_AttributeSetInstance_ID AS M_ATTRIBUTESETINSTANCE_ID,"\n  //            + " ins.description ");\n  //    if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n  //        sql = sql.concat("FROM C_UOM uom ").concat("INNER JOIN M_InOutLine l ON (l.C_UOM_ID=uom.C_UOM_ID) ");\n  //    }\n  //    else {\n  //        sql = sql.concat("FROM C_UOM_Trl uom ").concat("INNER JOIN M_InOutLine l ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'").concat(VIS.Env.getAD_Language(ctx)).concat("\') ");\n  //    }\n  //    sql = sql.concat("INNER JOIN M_Product p ON (l.M_Product_ID=p.M_Product_ID) ")\n  //        .concat("LEFT OUTER JOIN M_MatchInv mi ON (l.M_InOutLine_ID=mi.M_InOutLine_ID) ")\n  //        .concat("LEFT OUTER JOIN M_AttributeSetInstance ins ON (ins.M_AttributeSetInstance_ID =l.M_AttributeSetInstance_ID) ")\n  //        .concat("WHERE l.M_InOut_ID=" + M_InOut_ID); // #1\n  //    if (M_Product_ID != null) {\n  //        sql = sql.concat(" AND l.M_Product_ID=" + M_Product_ID);\n  //    }\n  //    sql = sql.concat(" GROUP BY l.MovementQty, l.QtyEntered," + "l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name),"\n  //        + "l.M_Product_ID,p.Name, l.M_InOutLine_ID,l.Line,l.C_OrderLine_ID,l.M_AttributeSetInstance_ID,ins.description ").concat("ORDER BY l.Line");\n  //    if (!pNo) {\n  //        pNo = 1;\n  //    }\n\n  //    $.ajax({\n  //        url: VIS.Application.contextUrl + "Common/GetData",\n  //        dataType: "json",\n  //        type: "POST",\n  //        data: {\n  //            sql: sql,\n  //            keyColumnName: self.$super.mTab.keyColumnName,\n  //            tableName: "M_InOutLine",\n  //            recordID: self.$super.record_ID,\n  //            pageNo: pNo\n  //        },\n  //        error: function () {\n  //            alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n  //            self.$super.setBusy(false);\n  //            return;\n  //        },\n  //        success: function (dyndata) {\n\n  //            var res = JSON.parse(dyndata);\n  //            if (res.Error) {\n  //                VIS.ADialog.error(res.Error);\n  //                self.$super.setBusy(false);\n  //                return;\n  //            }\n  //            self.$super.resetPageCtrls(res.pSetting);\n  //            self.$super.loadGrid(res.data);\n  //            self.$super.setBusy(false);\n  //        }\n  //    });\n\n  //    //try {\n\n  //    //    dr = VIS.DB.executeReader(sql.toString(), null, null);\n  //    //    var count = 1;\n  //    //    while (dr.read()) {\n  //    //        var line = {};\n\n  //    //        //line.Add(false);           //  0-Selection\n  //    //        var qtyMovement = dr.getDecimal(0);\n  //    //        //var multiplier = dr.getDecimal(1);\n  //    //        //var qtyEntered = qtyMovement * multiplier;\n  //    //        var qtyEntered = dr.getDecimal(1);\n  //    //        var select = false;\n  //    //        var rec = 0;\n  //    //        if (dr.getInt("m_inoutline_id") > 0) {\n  //    //            sql = "SELECT Count(*) FROM C_InvoiceLine WHERE C_Invoice_ID = " + this.$super.mTab.getValue("C_Invoice_ID") + " AND M_InOutLine_ID = " + dr.getInt("m_inoutline_id");\n  //    //            rec = VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(sql));\n  //    //            if (rec > 0) {\n  //    //                select = true;\n  //    //            }\n  //    //        }\n  //    //        else {\n  //    //            sql = "SELECT Count(*) FROM C_InvoiceLine WHERE C_Invoice_ID = " + this.$super.mTab.getValue("C_Invoice_ID") + " AND M_Product_ID = " + dr.getInt("m_product_id");\n  //    //            rec = VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(sql));\n  //    //            if (rec > 0) {\n  //    //                select = true;\n  //    //            }\n  //    //        }\n  //    //        line[\'Select\'] = select;\n  //    //        line[\'Quantity\'] = qtyMovement;        //  1-Qty\n  //    //        line[\'QuantityEntered\'] = qtyEntered;  //  2-Qty Entered\n  //    //        line[\'C_UOM_ID\'] = dr.getString(3);     //  2-UOM\n  //    //        line[\'M_Product_ID\'] = dr.getString(5); //  3-Product\n  //    //        line[\'M_AttributeSetInstance_ID\'] = dr.getString("description");\n  //    //        line[\'C_Order_ID\'] = ".";               //  4-Order\n  //    //        line[\'M_InOut_ID\'] = dr.getString(7);   //  5-Ship\n  //    //        line[\'C_Invoice_ID\'] = null;            //  6-Invoice\n\n  //    //        line[\'C_UOM_ID_K\'] = dr.getString(2);   //  2-UOM -Key\n  //    //        line[\'M_Product_ID_K\'] = dr.getInt(4);  //  3-Product -Key\n  //    //        line[\'M_AttributeSetInstance_ID_K\'] = dr.getString("m_attributesetinstance_id");\n  //    //        line[\'C_Order_ID_K\'] = dr.getInt(8);;   //  4-OrderLine -Key\n  //    //        line[\'M_InOut_ID_K\'] = dr.getInt(6);    //  5-Ship -Key\n  //    //        line[\'C_Invoice_ID_K\'] = null;          //  6-Invoice -Key\n\n  //    //        line[\'recid\'] = count;\n  //    //        count++;\n  //    //        data.push(line);\n  //    //    }\n  //    //    dr.close();\n  //    //}\n  //    //catch (e) {\n  //    //    //s_log.log( Level.SEVERE, sql.toString(), e );\n  //    //}\n  //    return data;\n  //}\n\n  //End\n\n  VCreateFromInvoice.prototype.loadShipment = function (M_InOut_ID) {\n    var data = this.getShipmentData(VIS.Env.getCtx(), M_InOut_ID);\n    this.$super.loadGrid(data);\n  };\n\n  /// Unused Function\n  VCreateFromInvoice.prototype.getShipmentData = function (ctx, M_InOut_ID) {\n    var data = [];\n    var isBaseLanguageUmo = "";\n    if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n      isBaseLanguageUmo = "FROM C_UOM uom INNER JOIN M_InOutLine l ON (l.C_UOM_ID=uom.C_UOM_ID) ";\n    } else {\n      isBaseLanguageUmo = "FROM C_UOM_Trl uom INNER JOIN M_InOutLine l ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'" + VIS.Env.getAD_Language(ctx) + "\') ";\n    }\n    $.ajax({\n      url: VIS.Application.contextUrl + "VCreateFrom/GetShipmentDatas",\n      type: \'POST\',\n      async: false,\n      data: {\n        MInOutIDs: M_InOut_ID,\n        isBaseLanguageUmos: isBaseLanguageUmo\n      },\n      success: function (data) {\n        var ress = JSON.parse(data);\n        if (ress && ress.length > 0) {\n          var count = 1;\n          for (var i = 0; i < ress.length; i++) {\n            var line = {};\n            var qtyMovement = dr.getDecimal(0);\n            var qtyEntered = dr.getDecimal(1);\n            line[\'Quantity\'] = qtyMovement;\n            line[\'QuantityEntered\'] = qtyEntered;\n            line[\'C_UOM_ID\'] = dr.getString(3);\n            line[\'M_Product_ID\'] = dr.getString(5);\n            line[\'C_Order_ID\'] = ".";\n            line[\'M_InOut_ID\'] = dr.getString(7);\n            line[\'C_Invoice_ID\'] = null;\n            line[\'C_UOM_ID_K\'] = dr.getString(2);\n            line[\'M_Product_ID_K\'] = dr.getInt(4);\n            line[\'C_Order_ID_K\'] = dr.getInt(8);\n            ;\n            line[\'M_InOut_ID_K\'] = dr.getInt(6);\n            line[\'C_Invoice_ID_K\'] = null;\n            line[\'recid\'] = count;\n            count++;\n            data.push(line);\n          }\n        }\n      },\n      error: function (e) {}\n    });\n    return data;\n  };\n\n  // Start Provisional Invoice\n  VCreateFromInvoice.prototype.loadProvisionalInvoices = function (C_Invoice_ID, M_Product_ID, pNo) {\n    var data = this.getProvisionalInvoicesData(VIS.Env.getCtx(), C_Invoice_ID, M_Product_ID, pNo);\n  };\n  VCreateFromInvoice.prototype.getProvisionalInvoicesData = function (ctx, C_Invoice_ID, M_Product_ID, pNo) {\n    var data = [];\n    var self = this;\n    this.$super.record_ID = $self.mTab.getValue("C_Invoice_ID");\n    if (self.$super.dGrid != null) {\n      var selection = self.$super.dGrid.getSelection();\n      for (item in selection) {\n        var obj = $.grep(self.$super.multiValues, function (n, i) {\n          return n.M_Product_ID_K == self.$super.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Invoice_ID_K == self.$super.dGrid.get(selection[item])["C_Invoice_ID_K"];\n        });\n        if (obj.length > 0) {} else {\n          self.$super.multiValues.push(self.$super.dGrid.get(selection[item]));\n        }\n      }\n    }\n    var isBaseLangs = "";\n    var mProductID = "";\n    if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n      isBaseLangs = "FROM C_UOM uom INNER JOIN C_ProvisionalInvoiceLine l ON (l.C_UOM_ID=uom.C_UOM_ID) ";\n    } else {\n      isBaseLangs = "FROM C_UOM_Trl uom Left join C_UOM uom1 on (uom1.C_UOM_ID=uom.C_UOM_ID) INNER JOIN C_ProvisionalInvoiceLine l ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'" + VIS.Env.getAD_Language(ctx) + "\') ";\n    }\n    if (M_Product_ID != null) {\n      mProductID = " AND l.M_Product_ID = " + M_Product_ID;\n    }\n    if (!pNo) {\n      pNo = 1;\n    }\n    var orgId = null;\n    if (self.$super.relatedToOrg != null && self.$super.relatedToOrg.getValue()) {\n      orgId = self.$super.mTab.getValue("AD_Org_ID");\n    }\n    $.ajax({\n      url: VIS.Application.contextUrl + "VCreateFrom/GetProvisionalInvoicesDataVCreate",\n      dataType: "json",\n      type: "POST",\n      data: {\n        keyColumnName: self.$super.mTab.keyColumnName,\n        tableName: "C_ProvisionalInvoiceLine",\n        recordID: self.$super.record_ID,\n        pageNo: pNo,\n        isBaseLangss: isBaseLangs,\n        cInvoiceID: C_Invoice_ID,\n        mProductIDs: mProductID,\n        orgId: orgId\n      },\n      error: function (e) {\n        alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n        selfChild.log.info(e);\n        self.$super.setBusy(false);\n        return;\n      },\n      success: function (dyndata) {\n        var res = JSON.parse(dyndata);\n        if (res.Error) {\n          VIS.ADialog.error(res.Error);\n          self.$super.setBusy(false);\n          return;\n        }\n        self.$super.resetPageCtrls(res.pSetting);\n        self.$super.loadGrid(res.data);\n        self.$super.setBusy(false);\n      }\n    });\n    return data;\n  };\n\n  //VCreateFromInvoice.prototype.getShipmentData = function (ctx, M_InOut_ID) {\n\n  //    var data = [];\n  //    var sql = ("SELECT " // QtyEntered                \n  //            //+ "l.MovementQty-SUM(NVL(mi.Qty,0)),round(l.QtyEntered/l.MovementQty,6),"\n  //            + "round((l.MovementQty-SUM(COALESCE(mi.Qty,0))) * "\t\t\t\t\t//\t1               \n  //            + "(CASE WHEN l.MovementQty=0 THEN 0 ELSE l.QtyEntered/l.MovementQty END ),2) as QUANTITY,"\t//\t2\n  //            + "round((l.MovementQty-SUM(COALESCE(mi.Qty,0))) * "\t\t\t\t\t//\t1               \n  //            + "(CASE WHEN l.MovementQty=0 THEN 0 ELSE l.QtyEntered/l.MovementQty END ),2) as QTYENTER,"\t//\t2\n  //            + " l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name)," // 3..4\n  //            + " l.M_Product_ID,p.Name, l.M_InOutLine_ID,l.Line," // 5..8\n  //            + " l.C_OrderLine_ID "); // 9\n\n  //    if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n  //        sql = sql.concat("FROM C_UOM uom ").concat("INNER JOIN M_InOutLine l ON (l.C_UOM_ID=uom.C_UOM_ID) ");\n  //    }\n  //    else {\n  //        sql = sql.concat("FROM C_UOM_Trl uom ").concat("INNER JOIN M_InOutLine l ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'").concat(VIS.Env.getAD_Language(ctx)).concat("\') ");\n  //    }\n  //    sql = sql.concat("INNER JOIN M_Product p ON (l.M_Product_ID=p.M_Product_ID) ").concat(\n  //            "LEFT OUTER JOIN M_MatchInv mi ON (l.M_InOutLine_ID=mi.M_InOutLine_ID) ").concat("WHERE l.M_InOut_ID=" + M_InOut_ID) // #1\n  //            .concat(\n  //                    " GROUP BY l.MovementQty, l.QtyEntered," + "l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name),"\n  //                            + "l.M_Product_ID,p.Name, l.M_InOutLine_ID,l.Line,l.C_OrderLine_ID ").concat("ORDER BY l.Line");\n  //    try {\n\n  //        dr = VIS.DB.executeReader(sql.toString(), null, null);\n  //        var count = 1;\n  //        while (dr.read()) {\n  //            var line = {};\n\n  //            //line.Add(false);           //  0-Selection\n  //            var qtyMovement = dr.getDecimal(0);\n  //            //var multiplier = dr.getDecimal(1);\n  //            //var qtyEntered = qtyMovement * multiplier;\n  //            var qtyEntered = dr.getDecimal(1);\n  //            line[\'Quantity\'] = qtyMovement;        //  1-Qty\n  //            line[\'QuantityEntered\'] = qtyEntered;  //  2-Qty Entered\n  //            line[\'C_UOM_ID\'] = dr.getString(3);     //  2-UOM\n  //            line[\'M_Product_ID\'] = dr.getString(5); //  3-Product\n  //            line[\'C_Order_ID\'] = ".";               //  4-Order\n  //            line[\'M_InOut_ID\'] = dr.getString(7);   //  5-Ship\n  //            line[\'C_Invoice_ID\'] = null;            //  6-Invoice\n\n  //            line[\'C_UOM_ID_K\'] = dr.getString(2);   //  2-UOM -Key\n  //            line[\'M_Product_ID_K\'] = dr.getInt(4);  //  3-Product -Key\n  //            line[\'C_Order_ID_K\'] = dr.getInt(8);;   //  4-OrderLine -Key\n  //            line[\'M_InOut_ID_K\'] = dr.getInt(6);    //  5-Ship -Key\n  //            line[\'C_Invoice_ID_K\'] = null;          //  6-Invoice -Key\n\n  //            line[\'recid\'] = count;\n  //            count++;\n  //            data.push(line);\n  //        }\n  //        dr.close();\n  //    }\n  //    catch (e) {\n  //        //s_log.log( Level.SEVERE, sql.toString(), e );\n  //    }\n  //    return data;\n  //}\n\n  VCreateFromInvoice.prototype.saveData = function (model, selectedItems, C_Order_ID, M_inout_id, C_Invoice_ID, C_ProvisionalInvoice_ID) {\n    var obj = this;\n    $.ajax({\n      type: "POST",\n      url: VIS.Application.contextUrl + "Common/SaveInvoice",\n      dataType: "json",\n      data: {\n        model: model,\n        selectedItems: selectedItems,\n        C_Order_ID: C_Order_ID,\n        C_Invoice_ID: C_Invoice_ID,\n        M_inout_id: M_inout_id,\n        C_ProvisionalInvoice_ID: C_ProvisionalInvoice_ID\n      },\n      success: function (data) {\n        returnValue = data.result;\n        if (returnValue) {\n          obj.dispose();\n          obj.$super.$root.dialog(\'close\');\n          obj.$super.setBusy(false);\n          return;\n        }\n        obj.$super.setBusy(false);\n        alert(returnValue);\n      },\n      error: function (jqXHR, textStatus, errorThrown) {\n        debugger;\n        console.log(textStatus);\n        obj.$super.setBusy(false);\n        alert(errorThrown);\n      }\n    });\n  };\n\n  //dispose call\n  VCreateFromInvoice.prototype.dispose = function () {\n    if (this.disposeComponent != null) this.disposeComponent();\n  };\n\n  //Load form into VIS\n  VIS.VCreateFromInvoice = VCreateFromInvoice;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vcreatefrominvoice.js?\n}')},"./Areas/VAS/Scripts/app/forms/vcreatefromrequisition.js":()=>{eval('{;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.CreateLinesRequisition = function () {\n    this.frame;\n    this.windowNo;\n    this.Record_ID;\n    this.Table_ID;\n    var $bsyDiv;\n    var $self = this; //scoped self pointer\n    var $OkBtn;\n    var $ApplyBtn;\n    var $CancelBtn;\n    var $root = $(\'<div>\');\n    var SelectedRecords;\n    var _ProductLookUp;\n    var _ProductCtrl;\n    var _RequisitionCtrl;\n    var lookupRequisition = null;\n    var $RequisitionControl = null;\n    var prdCtrl;\n    var RequisitionGrd;\n    var $DivRequisitionGrid;\n    var product_ID = 0;\n    var requisition_ID = 0;\n    var precision = 2;\n    VAS.translatedTexts = null;\n    var format = VIS.DisplayType.GetNumberFormat(VIS.DisplayType.Amount);\n    var dotFormatter = VIS.Env.isDecimalPoint();\n    this.initalize = function () {\n      var elements = ["M_Product_ID", "M_Requisition_ID", "ASI", "C_UOM_ID", "M_RequisitionLine_ID"];\n      VAS.translatedTexts = VIS.Msg.translate(VIS.Env.getCtx(), elements, true);\n      $root.append(\'<div class="VIS_Pref_show vis-formouterwrpdiv">\' + \'<div class= "VIS_Pref_dd"><div class="input-group vis-input-wrap" id="VAS_Requisition_\' + $self.windowNo + \'"></div></div>\' + \'<div class= "VIS_Pref_dd"><div class="input-group vis-input-wrap" id="VAS_Product_\' + $self.windowNo + \'" ></div></div>\' + \'</div>\');\n      $root.append(\'<div class="vis-crtfrm-datawrp" style="height: 48.5%;"><div id="VAS_RequisitionGrd_\' + $self.windowNo + \'" style="height:350px;" ></div></div>\');\n      $root.append(\'<div class="vis-ctrfrm-btnwrp">\' + \'<input id="VAS_CancelBtn_\' + $self.windowNo + \'" class= "VIS_Pref_btn-2" type = "button" value = "\' + VIS.Msg.getMsg("Cancel") + \'">\' + \'<input id="VAS_ApplyBtn_\' + $self.windowNo + \'" class="VIS_Pref_btn-2" type="button" value="\' + VIS.Msg.getMsg("Apply") + \'">\' + \'<input id="VAS_OKBtn_\' + $self.windowNo + \'" class="VIS_Pref_btn-2" type="button" value="\' + VIS.Msg.getMsg("OK") + \'">\' + \'</div>\');\n      createBusyIndicator();\n      $bsyDiv[0].style.visibility = "visible";\n    };\n\n    // Get controls from design\n    this.intialLoad = function () {\n      $OkBtn = $root.find("#VAS_OKBtn_" + $self.windowNo);\n      $ApplyBtn = $root.find("#VAS_ApplyBtn_" + $self.windowNo);\n      $CancelBtn = $root.find("#VAS_CancelBtn_" + $self.windowNo);\n      _ProductCtrl = $root.find("#VAS_Product_" + $self.windowNo);\n      _RequisitionCtrl = $root.find("#VAS_Requisition_" + $self.windowNo);\n      $DivRequisitionGrid = $root.find("#VAS_RequisitionGrd_" + $self.windowNo);\n      LoadControls();\n      InitEvents();\n      $bsyDiv[0].style.visibility = "hidden";\n    };\n\n    // load dynamic vienna controls\n    function LoadControls() {\n      // Requisition Control\n      var SqlWhere = "M_Requisition.DOcStatus IN (\'CO\') AND M_Requisition.IsActive=\'Y\' AND M_Requisition.AD_Client_ID=@AD_Client_ID@" + " AND M_Requisition_ID IN (SELECT Distinct M_requisition_ID FROM M_requisitionline WHERE M_RequisitionLine_ID IN" + " (SELECT req.M_RequisitionLine_ID FROM M_RequisitionLine req LEFT JOIN C_RfqLine oline ON (req.M_RequisitionLine_ID = oline.M_RequisitionLine_ID)" + " WHERE oline.M_RequisitionLine_ID IS NULL OR req.Qty - req.DTD001_DeliveredQty > (SELECT SUM(rl.Qty) FROM C_RfqLineQty rl INNER JOIN C_RfqLine cl ON rl.C_RfqLine_ID = cl.C_RfqLine_ID" + " WHERE cl.M_RequisitionLine_ID = req.M_RequisitionLine_ID) AND oline.C_Rfq_ID IN (SELECT C_Rfq_ID FROM C_Rfq WHERE C_Rfq_ID IN (oline.C_Rfq_ID) AND DocStatus NOT IN (\'RE\',\'VO\')))) ";\n      lookupRequisition = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 0, VIS.DisplayType.MultiKey, "M_Requisition_ID", 0, false, SqlWhere);\n      $RequisitionControl = new VIS.Controls.VTextBoxButton("M_Requisition_ID", true, false, true, VIS.DisplayType.MultiKey, lookupRequisition);\n      var _RequisitionCtrlWrap = $(\'<div class="vis-control-wrap">\');\n      var _RequisitionBtnWrap = $(\'<div class="input-group-append">\');\n      _RequisitionCtrl.append(_RequisitionCtrlWrap);\n      _RequisitionCtrlWrap.append($RequisitionControl.getControl().attr(\'placeholder\', \' \').attr(\'data-placeholder\', \'\').attr(\'data-hasbtn\', \' \')).append(\'<label>\' + VIS.Msg.getMsg("DTD001_Requisition") + \'</label>\');\n      _RequisitionCtrl.append(_RequisitionBtnWrap);\n      _RequisitionBtnWrap.append($RequisitionControl.getBtn(0));\n      _RequisitionBtnWrap.append($RequisitionControl.getBtn(1));\n\n      // Product Control\n      _ProductLookUp = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 2221, VIS.DisplayType.Search);\n      prdCtrl = new VIS.Controls.VTextBoxButton("M_Product_ID", false, false, true, VIS.DisplayType.Search, _ProductLookUp);\n      var _ProductCtrlWrap = $(\'<div class="vis-control-wrap">\');\n      var _ProductBtnWrap = $(\'<div class="input-group-append">\');\n      _ProductCtrl.append(_ProductCtrlWrap);\n      _ProductCtrlWrap.append(prdCtrl.getControl().attr(\'placeholder\', \' \').attr(\'data-placeholder\', \'\').attr(\'data-hasbtn\', \' \')).append(\'<label>\' + VAS.translatedTexts.M_Product_ID + \'</label>\');\n      _ProductCtrl.append(_ProductBtnWrap);\n      _ProductBtnWrap.append(prdCtrl.getBtn(0));\n      _ProductBtnWrap.append(prdCtrl.getBtn(1));\n    }\n    ;\n\n    // Events\n    function InitEvents() {\n      prdCtrl.fireValueChanged = function () {\n        if (prdCtrl.value != null) {\n          $bsyDiv[0].style.visibility = "visible";\n          product_ID = prdCtrl.value;\n          RequisitionGrd.clear();\n          GetRequisitionLinesData(requisition_ID, product_ID);\n        } else {\n          product_ID = 0;\n          RequisitionGrd.clear();\n          GetRequisitionLinesData(requisition_ID, product_ID);\n        }\n      };\n      $RequisitionControl.fireValueChanged = function (e) {\n        $bsyDiv[0].style.visibility = "visible";\n        requisition_ID = $RequisitionControl.getValue();\n        RequisitionGrd.clear();\n        GetRequisitionLinesData(requisition_ID, product_ID);\n      };\n      $OkBtn.on("click touchstart", function (ev) {\n        if (RequisitionGrd.records.length > 0) {\n          $bsyDiv[0].style.visibility = "visible";\n          GetSelectedRecords();\n          CreateLines(false);\n        } else {\n          VIS.ADialog.error("VIS_PlzSelLines");\n        }\n      });\n      $ApplyBtn.on("click touchstart", function (ev) {\n        if (RequisitionGrd.records.length > 0) {\n          $bsyDiv[0].style.visibility = "visible";\n          GetSelectedRecords();\n          CreateLines(true);\n        } else {\n          VIS.ADialog.error("VIS_PlzSelLines");\n        }\n      });\n      $CancelBtn.on("click touchstart", function (ev) {\n        $self.frame.close();\n      });\n    }\n    ;\n\n    // load related product grid\n    this.LoadRequisitionGrid = function () {\n      RequisitionGrd = null;\n      RequisitionGrd = $DivRequisitionGrid.w2grid({\n        name: "VAS_RequisitionGrid_" + $self.windowNo,\n        recordHeight: 25,\n        show: {\n          toolbar: false,\n          // indicates if toolbar is v isible\n          //columnHeaders: true,   // indicates if columns is visible\n          //lineNumbers: true,  // indicates if line numbers column is visible\n          selectColumn: true,\n          // indicates if select column is visible\n          toolbarReload: false,\n          // indicates if toolbar reload button is visible\n          toolbarColumns: true,\n          // indicates if toolbar columns button is visible\n          toolbarSearch: false,\n          // indicates if toolbar search controls are visible\n          toolbarAdd: false,\n          // indicates if toolbar add new button is visible\n          toolbarDelete: true,\n          // indicates if toolbar delete button is visible\n          toolbarSave: true // indicates if toolbar save button is visible\n        },\n        multiSelect: true,\n        columns: [{\n          field: "M_Product_ID",\n          caption: VAS.translatedTexts.M_Product_ID,\n          sortable: false,\n          size: \'12%\'\n        }, {\n          field: "C_Charge_ID",\n          caption: VAS.translatedTexts.M_Product_ID,\n          sortable: false,\n          size: \'12%\'\n        }, {\n          field: "Product",\n          caption: VAS.translatedTexts.M_Product_ID,\n          sortable: false,\n          size: \'12%\'\n        }, {\n          field: "C_UOM_ID",\n          caption: VAS.translatedTexts.M_Product_ID,\n          sortable: false,\n          size: \'12%\'\n        }, {\n          field: "UOM",\n          caption: VAS.translatedTexts.C_UOM_ID,\n          sortable: false,\n          size: \'12%\'\n        }, {\n          field: "ASI_ID",\n          caption: VAS.translatedTexts.M_Product_ID,\n          sortable: false,\n          size: \'12%\'\n        }, {\n          field: "ReqQty",\n          caption: VIS.Msg.getMsg("VAS_ReqQty"),\n          sortable: false,\n          size: \'12%\'\n        }, {\n          field: "PendingQty",\n          caption: VIS.Msg.getMsg("QtyPending"),\n          sortable: false,\n          size: \'12%\'\n        }, {\n          field: "EnteredQty",\n          caption: VIS.Msg.getMsg("QtyEntered"),\n          sortable: false,\n          size: \'12%\',\n          editable: {\n            type: \'number\'\n          },\n          render: function (record, index, col_index) {\n            var val = record["EnteredQty"];\n            val = checkcommaordot(event, val);\n            return parseFloat(val).toLocaleString();\n          }\n        }, {\n          field: "Price",\n          caption: VIS.Msg.getMsg("Price"),\n          sortable: false,\n          size: \'12%\'\n        }, {\n          field: "M_ReqLine_ID",\n          caption: VAS.translatedTexts.M_RequisitionLine_ID,\n          sortable: false,\n          size: \'80px\',\n          display: false\n        }, {\n          field: "M_Requisition_ID",\n          caption: VAS.translatedTexts.M_Requisition_ID,\n          sortable: false,\n          size: \'80px\',\n          display: false\n        }],\n        records: [],\n        onChange: function (event) {\n          // Entered Qty can not be greater than Requisition Qty\n          if (VIS.Utility.Util.getValueOfInt(event.value_new) > w2ui[\'VAS_RequisitionGrid_\' + $self.windowNo].get(event.recid).ReqQty) {\n            w2ui[\'VAS_RequisitionGrid_\' + $self.windowNo].get(event.recid).EnteredQty = event.value_previous;\n            w2ui[\'VAS_RequisitionGrid_\' + $self.windowNo].refreshCell(event.recid, \'EnteredQty\');\n            event.preventDefault();\n            VIS.ADialog.error("VAS_QtyGrtrReqQty");\n          }\n          // Show warning on Entered Qty if greater than Pending Qty\n          else if (VIS.Utility.Util.getValueOfInt(event.value_new) > w2ui[\'VAS_RequisitionGrid_\' + $self.windowNo].get(event.recid).PendingQty) {\n            //w2ui[\'VAS_RequisitionGrid_\' + $self.windowNo].get(event.recid).EnteredQty = event.value_previous;\n            //w2ui[\'VAS_RequisitionGrid_\' + $self.windowNo].refreshCell(event.recid, \'EnteredQty\');\n            //event.preventDefault();\n            w2ui[\'VAS_RequisitionGrid_\' + $self.windowNo].get(event.recid).EnteredQty = event.value_new;\n            w2ui[\'VAS_RequisitionGrid_\' + $self.windowNo].refreshCell(event.recid, \'EnteredQty\');\n            VIS.ADialog.warn("DTD001_EntQtyGrtrPendQTy");\n          } else {\n            w2ui[\'VAS_RequisitionGrid_\' + $self.windowNo].get(event.recid).EnteredQty = event.value_new;\n            w2ui[\'VAS_RequisitionGrid_\' + $self.windowNo].refreshCell(event.recid, \'EnteredQty\');\n          }\n        },\n        onEditField: function (event) {\n          id = event.recid;\n          RequisitionGrd.records[event.index][RequisitionGrd.columns[event.column].field] = checkcommaordot(event, RequisitionGrd.records[event.index][RequisitionGrd.columns[event.column].field]);\n          var _value = format.GetFormatAmount(RequisitionGrd.records[event.index][RequisitionGrd.columns[event.column].field], "init", dotFormatter);\n          RequisitionGrd.records[event.index][RequisitionGrd.columns[event.column].field] = format.GetConvertedString(_value, dotFormatter);\n          $("#grid_VAS_RequisitionGrid_" + $self.windowNo + "_rec_" + id).keydown(function (event) {\n            if (!dotFormatter && (event.keyCode == 190 || event.keyCode == 110)) {\n              // , separator\n              return false;\n            } else if (dotFormatter && event.keyCode == 188) {\n              // . separator\n              return false;\n            }\n            if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n              if (event.target.value.indexOf(\'.\') > -1) {\n                event.target.value = event.target.value.replace(\'.\', \'\');\n              }\n            } else if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n              if (event.target.value.indexOf(\',\') > -1) {\n                event.target.value = event.target.value.replace(\',\', \'\');\n              }\n            }\n            if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n              return false;\n            }\n          });\n        }\n      });\n      RequisitionGrd.hideColumn(\'M_Product_ID\');\n      RequisitionGrd.hideColumn(\'C_Charge_ID\');\n      RequisitionGrd.hideColumn(\'C_UOM_ID\');\n      RequisitionGrd.hideColumn(\'ASI_ID\');\n      RequisitionGrd.hideColumn(\'Price\');\n      RequisitionGrd.hideColumn(\'M_ReqLine_ID\');\n      RequisitionGrd.hideColumn(\'M_Requisition_ID\');\n    };\n\n    // load Related Products of selected product\n    function GetRequisitionLinesData(requisitionID, product_ID) {\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "VCreateFrom/GetRequisitionLines", {\n        "M_Requisition_ID": requisitionID,\n        "M_Product_ID": product_ID\n      }, CallbacRequisitionData);\n    }\n    ;\n\n    // Callback Related Product\n    function CallbacRequisitionData(data) {\n      if (data != null) {\n        RequisitionGrd.add(data);\n      }\n      $bsyDiv[0].style.visibility = "hidden";\n    }\n    ;\n\n    // Get selected records from Grid\n    function GetSelectedRecords() {\n      SelectedRecords = [];\n      var selection = RequisitionGrd.getSelection();\n      for (var i = 0; i < selection.length; i++) {\n        SelectedRecords.push({\n          M_Product_ID: RequisitionGrd.records[selection[i] - 1].M_Product_ID,\n          C_Charge_ID: RequisitionGrd.records[selection[i] - 1].C_Charge_ID,\n          Product: RequisitionGrd.records[selection[i] - 1].Product,\n          ASI_ID: RequisitionGrd.records[selection[i] - 1].ASI_ID,\n          C_UOM_ID: RequisitionGrd.records[selection[i] - 1].C_UOM_ID,\n          M_ReqLine_ID: RequisitionGrd.records[selection[i] - 1].M_ReqLine_ID,\n          M_Requisition_ID: RequisitionGrd.records[selection[i] - 1].M_Requisition_ID,\n          EnteredQty: RequisitionGrd.records[selection[i] - 1].EnteredQty,\n          Price: RequisitionGrd.records[selection[i] - 1].Price\n        });\n      }\n    }\n    ;\n\n    // function to check comma or dot from given value and return new value\n    function checkcommaordot(event, val) {\n      var foundComma = false;\n      event.value_new = VIS.Utility.Util.getValueOfString(val);\n      if (event.value_new.contains(".")) {\n        foundComma = true;\n        var indices = [];\n        for (var i = 0; i < event.value_new.length; i++) {\n          if (event.value_new[i] === ".") indices.push(i);\n        }\n        if (indices.length > 1) {\n          event.value_new = removeAllButLast(event.value_new, \'.\');\n        }\n      }\n      if (event.value_new.contains(",")) {\n        if (foundComma) {\n          event.value_new = removeAllButLast(event.value_new, \',\');\n        } else {\n          var indices = [];\n          for (var i = 0; i < event.value_new.length; i++) {\n            if (event.value_new[i] === ",") indices.push(i);\n          }\n          if (indices.length > 1) {\n            event.value_new = removeAllButLast(event.value_new, \',\');\n          } else {\n            event.value_new = event.value_new.replace(",", ".");\n          }\n        }\n      }\n      if (event.value_new == "") {\n        event.value_new = "0";\n      }\n      return event.value_new;\n    }\n    ;\n\n    // Remove all seperator but only bring last seperator\n    function removeAllButLast(amt, seprator) {\n      var parts = amt.split(seprator);\n      amt = parts.slice(0, -1).join(\'\') + \'.\' + parts.slice(-1);\n      if (amt.indexOf(\'.\') == amt.length - 1) {\n        amt = amt.replace(".", "");\n      }\n      return amt;\n    }\n    ;\n\n    // Create busy indicator\n    function createBusyIndicator() {\n      $bsyDiv = $("<div class=\'vis-apanel-busy\'>");\n      $bsyDiv.css({\n        "position": "absolute",\n        "width": "98%",\n        "height": "97%",\n        \'text-align\': \'center\',\n        \'z-index\': \'999\'\n      });\n      $bsyDiv[0].style.visibility = "visible";\n      $root.append($bsyDiv);\n    }\n    ;\n\n    // Create Related Products lines\n    CreateLines = function (fromApply) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCreateFrom/SaveRfqLines",\n        type: "POST",\n        dataType: "json",\n        contentType: "application/json; charset=utf-8",\n        data: JSON.stringify({\n          C_RFQ_ID: $self.Record_ID,\n          Data: SelectedRecords\n        }),\n        success: function (data) {\n          if (JSON.parse(data) != "") {\n            $RequisitionControl.setValue(null, false, true);\n            prdCtrl.setValue(null, false, true);\n            RequisitionGrd.clear();\n            VIS.ADialog.info("", true, JSON.parse(data), "");\n          }\n          $bsyDiv[0].style.visibility = "hidden";\n          if (!fromApply) {\n            $self.frame.close();\n          }\n        },\n        error: function () {\n          $bsyDiv[0].style.visibility = "hidden";\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n  };\n  VAS.CreateLinesRequisition.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.Record_ID = this.frame.getRecord_ID();\n    this.Table_ID = this.frame.getAD_Table_ID();\n    this.initalize();\n    this.intialLoad();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.LoadRequisitionGrid();\n    }, 50);\n    window.setTimeout(function () {}, 50);\n  };\n  VAS.CreateLinesRequisition.prototype.setHeight = function () {\n    return "575";\n  };\n  VAS.CreateLinesRequisition.prototype.setWidth = function () {\n    return "1050";\n  };\n  VAS.CreateLinesRequisition.prototype.dispose = function () {\n    w2ui[\'VAS_RequisitionGrid_\' + this.windowNo].destroy();\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $OkBtn = null;\n    $ApplyBtn = null;\n    $root = null;\n    _ProductLookUp = null;\n    _ProductCtrl = null;\n    _RequisitionCtrl = null;\n    lookupRequisition = null;\n    $RequisitionControl = null;\n    SelectedRecords = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vcreatefromrequisition.js?\n}')},"./Areas/VAS/Scripts/app/forms/vcreatefromshipment.js":()=>{eval('{;\n(function (VIS, $) {\n  //form declaretion\n  function VCreateFromShipment(tab) {\n    var baseObj = this.$super;\n    baseObj.constructor(tab);\n    var selfChild = this;\n    dynInit();\n    baseObj.jbInit();\n    baseObj.initOK = true;\n\n    // create log\n    this.log = VIS.Logging.VLogger.getVLogger("VCreateFromShipment");\n    function dynInit() {\n      //DynInit\n      baseObj.title = VIS.Msg.getElement(VIS.Env.getCtx(), "M_InOut_ID", false) + " .. " + VIS.Msg.translate(VIS.Env.getCtx(), "CreateFrom");\n\n      // baseObj.lblShipment.visible = false;\n      // baseObj.cmbShipment.visible = false;\n\n      if (baseObj.lblShipment != null) baseObj.lblShipment.getControl().css(\'display\', \'none\');\n      if (baseObj.cmbShipment != null) baseObj.cmbShipment.getControl().css(\'display\', \'none\');\n      if (baseObj.Applybtn) baseObj.Applybtn.css("display", "block");\n      var AD_Column_ID = 3537; //  M_InOut.M_Locator_ID\n      var lookup = new VIS.MLocatorLookup(VIS.Env.getCtx(), baseObj.windowNo);\n      baseObj.locatorField = new VIS.Controls.VLocator("M_Locator_ID", true, false, true, VIS.DisplayType.Locator, lookup);\n      baseObj.deliveryDate = new VIS.Controls.VDate("DeliveryDate", false, false, true, VIS.DisplayType.Date, "DeliveryDate");\n      var lookupProd = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), baseObj.windowNo, 2221, VIS.DisplayType.Search);\n      baseObj.vProduct = new VIS.Controls.VTextBoxButton("M_Product_ID", true, false, true, VIS.DisplayType.Search, lookupProd);\n      baseObj.DocumentNoRef = new VIS.Controls.VTextBox("DocumentNo", false, true, true, 50, 100, null, null, false);\n      // Added by Manjot on 12/9/18 for combobox of Container on Material Receipt\n      baseObj.lblContainer = new VIS.Controls.VLabel();\n      baseObj.cmbContainer = new VIS.Controls.VComboBox(\'\', false, false, true);\n      baseObj.lblContainer.getControl().text(VIS.Msg.getMsg(\'VIS_Container\'));\n      if (baseObj.lblContainer != null) baseObj.lblContainer.getControl().css(\'display\', \'block\');\n      if (baseObj.cmbContainer != null) baseObj.cmbContainer.getControl().css(\'display\', \'block\');\n\n      //  Set Default\n      // JID_1430 : On create line from form system is not loading the Document no. field showing NAN in field only.\n      var DocumentNos = VIS.Env.getCtx().getContext(baseObj.windowNo, "DocumentNo");\n      baseObj.DocumentNoRef.setValue(DocumentNos);\n      var C_BPartner_ID = baseObj.initBPartner(false);\n      baseObj.vBPartner.setReadOnly(true);\n      initBPDetails(C_BPartner_ID);\n    }\n\n    // Get Invoice Data\n    function getInvoices(ctx, C_BPartner_ID, isReturnTrx) {\n      //var pairs = [];\n\n      //var display = ("i.DocumentNo||\' - \'||").concat(\n      //        VIS.DB.to_char("DateInvoiced", VIS.DisplayType.Date, VIS.Env.getAD_Language(ctx))).concat("|| \' - \' ||")\n      //        .concat(VIS.DB.to_char("GrandTotal", VIS.DisplayType.Amount, VIS.Env.getAD_Language(ctx)));\n      // New column added to fill invoice which drop ship is true\n      // Added by Vivek on 09/10/2017 advised by Pradeep\n      var _isdrop = "Y".equals(VIS.Env.getCtx().getWindowContext(selfChild.windowNo, "IsDropShip"));\n      var sql = " C_Invoice.C_Invoice_ID IN (SELECT i.C_Invoice_ID FROM C_Invoice i INNER JOIN C_DocType d ON (i.C_DocType_ID = d.C_DocType_ID) " + "WHERE i.C_BPartner_ID=" + C_BPartner_ID + " AND i.IsSOTrx=\'N\' AND i.IsDropShip=\'" + (_isdrop ? "Y" : "N") + "\' " + "AND d.IsReturnTrx=\'" + (isReturnTrx ? "Y" : "N") + "\' AND i.DocStatus IN (\'CL\',\'CO\') AND i.TreatAsDiscount = \'N\' AND i.C_Invoice_ID IN " + "(SELECT C_Invoice_ID FROM (SELECT il.C_Invoice_ID,il.C_InvoiceLine_ID,il.QtyInvoiced,mi.Qty FROM C_InvoiceLine il " + " LEFT OUTER JOIN M_MatchInv mi ON (il.C_InvoiceLine_ID=mi.C_InvoiceLine_ID) ";\n\n      // Get Invoices based on the setting taken on Tenant to allow non item Product\n      if (VIS.Utility.Util.getValueOfString(VIS.Env.getCtx().getContext("$AllowNonItem")) == "N") {\n        sql += " INNER JOIN M_Product Mp On Mp.M_Product_ID = il.M_Product_ID WHERE Mp.ProductType = \'I\' AND";\n      } else {\n        sql += " LEFT JOIN M_Product Mp On Mp.M_Product_ID = il.M_Product_ID WHERE";\n      }\n      sql += " (il.QtyInvoiced <> nvl(mi.Qty,0) AND mi.C_InvoiceLine_ID IS NOT NULL And Mp.Iscostadjustmentonlost = \'N\') " + " OR (NVL(Mi.Qty,0) = 0 AND Mi.C_Invoiceline_Id IS NOT NULL AND Mp.Iscostadjustmentonlost = \'Y\') " + " OR mi.C_InvoiceLine_ID IS NULL ) t GROUP BY C_Invoice_ID,C_InvoiceLine_ID,QtyInvoiced " + " HAVING QtyInvoiced > SUM(nvl(Qty,0))))";\n      var lookupInvoice = VIS.MLookupFactory.get(VIS.Env.getCtx(), baseObj.windowNo, 0, VIS.DisplayType.Search, "C_Invoice_ID", 0, false, sql);\n      baseObj.cmbInvoice = new VIS.Controls.VTextBoxButton("C_Invoice_ID", true, false, true, VIS.DisplayType.Search, lookupInvoice);\n\n      //$.ajax({\n      //    url: VIS.Application.contextUrl + "VCreateFrom/GetInvoicesVCreate",\n      //    type: \'POST\',\n      //    //async: false,\n      //    data: {\n      //        displays: display,\n      //        cBPartnerId: C_BPartner_ID,\n      //        isReturnTrxs: isReturnTrx,\n      //        IsDrops: _isdrop\n      //    },\n      //    success: function (data) {\n      //        var ress = JSON.parse(data);\n      //        if (ress && ress.length > 0) {\n      //            try {\n      //                var key, value;\n      //                for (var i = 0; i < ress.length; i++) {\n      //                    key = VIS.Utility.Util.getValueOfInt(ress[i].key);\n      //                    value = VIS.Utility.encodeText(ress[i].value);\n      //                    //pairs.push({ ID: key, value: value });\n\n      //                    if (i == 0) {\n      //                        baseObj.cmbInvoice.getControl().append(" <option value=0> </option>");\n      //                    }\n      //                    baseObj.cmbInvoice.getControl().append(" <option value=" + key + ">" + value + "</option>");\n      //                }\n      //                baseObj.cmbInvoice.getControl().prop(\'selectedIndex\', 0);\n      //            }\n      //            catch (e) {\n\n      //            }\n      //        }\n      //    },\n      //    error: function (e) {\n      //        selfChild.log.info(e);\n      //    },\n      //});\n      //return pairs;\n    }\n\n    //function getInvoices(ctx, C_BPartner_ID, isReturnTrx) {\n    //    var pairs = [];\n\n    //    var display = ("i.DocumentNo||\' - \'||").concat(\n    //            VIS.DB.to_char("DateInvoiced", VIS.DisplayType.Date, VIS.Env.getAD_Language(ctx))).concat("|| \' - \' ||")\n    //            .concat(VIS.DB.to_char("GrandTotal", VIS.DisplayType.Amount, VIS.Env.getAD_Language(ctx)));\n\n    //    //var sql = ("SELECT i.C_Invoice_ID,").concat(display).concat(\n    //    //        " FROM C_Invoice i INNER JOIN C_DocType d ON (i.C_DocType_ID = d.C_DocType_ID) "\n    //    //                + "WHERE i.C_BPartner_ID=" + C_BPartner_ID + " AND i.IsSOTrx=\'N\' "\n    //    //                + "AND d.IsReturnTrx=\'" + (isReturnTrx ? "Y" : "N") + "\' "\n    //    //                + "AND i.DocStatus IN (\'CL\',\'CO\')"\n    //    //                + " AND i.C_Invoice_ID IN " + "(SELECT il.C_Invoice_ID FROM C_InvoiceLine il"\n    //    //                + " LEFT OUTER JOIN M_MatchInv mi ON (il.C_InvoiceLine_ID=mi.C_InvoiceLine_ID) "\n    //    //                + "GROUP BY il.C_Invoice_ID,mi.C_InvoiceLine_ID,il.QtyInvoiced "\n    //    //                + "HAVING (il.QtyInvoiced<>SUM(mi.Qty) AND mi.C_InvoiceLine_ID IS NOT NULL)"\n    //    //                + " OR mi.C_InvoiceLine_ID IS NULL) " + "ORDER BY i.DateInvoiced");\n\n    //    var sql = ("SELECT i.C_Invoice_ID,").concat(display).concat(\n    //        " FROM C_Invoice i INNER JOIN C_DocType d ON (i.C_DocType_ID = d.C_DocType_ID) "\n    //        + "WHERE i.C_BPartner_ID=" + C_BPartner_ID + " AND i.IsSOTrx=\'N\' "\n    //        + "AND d.IsReturnTrx=\'" + (isReturnTrx ? "Y" : "N") + "\' AND i.DocStatus IN (\'CL\',\'CO\')"\n    //        + " AND i.C_Invoice_ID IN "\n    //        + "(SELECT C_Invoice_ID FROM (SELECT il.C_Invoice_ID,il.C_InvoiceLine_ID,il.QtyInvoiced,mi.Qty FROM C_InvoiceLine il "\n    //        + "LEFT OUTER JOIN M_MatchInv mi ON (il.C_InvoiceLine_ID=mi.C_InvoiceLine_ID) WHERE (il.QtyInvoiced <> nvl(mi.Qty,0) "\n    //        + "AND mi.C_InvoiceLine_ID IS NOT NULL) OR mi.C_InvoiceLine_ID IS NULL ) GROUP BY C_Invoice_ID,C_InvoiceLine_ID,QtyInvoiced "\n    //        + "HAVING QtyInvoiced > SUM(nvl(Qty,0))) ORDER BY i.DateInvoiced");\n\n    //    var dr = null;\n    //    try {\n    //        dr = VIS.DB.executeReader(sql.toString(), null, null);\n    //        while (dr.read()) {\n    //            key = VIS.Utility.Util.getValueOfInt(dr.getString(0));\n    //            value = dr.getString(1);\n    //            pairs.push({ ID: key, value: value });\n    //        }\n    //        dr.close();\n    //    }\n    //    catch (e) {\n    //        dr.close();\n    //    }\n    //    return pairs;\n    //}\n\n    function initBPDetails(C_BPartner_ID) {\n      //baseObj.cmbInvoice.getControl().html("")\n      var isReturnTrx = "Y".equals(VIS.Env.getCtx().getWindowContext(baseObj.windowNo, "IsReturnTrx"));\n\n      //// JID_0350: "When user create MR with refrence to order OR by invoice by using "Create Line From" charge should not shows on grid.\n      getInvoices(VIS.Env.getCtx(), C_BPartner_ID, isReturnTrx);\n\n      //for (var i = 0; i < invoices.length; i++) {\n      //    if (i == 0) {\n      //        baseObj.cmbInvoice.getControl().append(" <option value=0> </option>");\n      //    }\n      //    baseObj.cmbInvoice.getControl().append(" <option value=" + invoices[i].ID + ">" + invoices[i].value + "</option>");\n      //};\n      //baseObj.cmbInvoice.getControl().prop(\'selectedIndex\', 0);\n    }\n    ;\n    this.disposeComponent = function () {\n      baseObj = null;\n      selfChild = null;\n      this.disposeComponent = null;\n    };\n  }\n  ;\n  VIS.Utility.inheritPrototype(VCreateFromShipment, VIS.VCreateFrom); //Inherit from VCreateFrom\n\n  VCreateFromShipment.prototype.saveMInOut = function (fromApply) {\n    debugger;\n    if (this.$super.dGrid == null) {\n      this.$super.setBusy(false);\n      return false;\n    }\n    var model = {}; //this.$super.dGrid.records;\n    var selectedItems = this.$super.multiValues;\n    if (selectedItems == null) {\n      this.$super.setBusy(false);\n      return false;\n    }\n    if (selectedItems.length <= 0) {\n      this.$super.setBusy(false);\n      return false;\n    }\n    //var splitValue = selectedItems.toString().split(\',\');\n    for (var i = 0; i < selectedItems.length; i++) {\n      model[i] = selectedItems[i];\n    }\n    var loc = this.$super.locatorField.getValue();\n    if (loc == null || loc == 0) {\n      //alert("Locator Field is Mandatory");\n      VIS.ADialog.info("Error", true, VIS.Msg.translate(VIS.Env.getCtx(), "VIS_locfieldMandatory"), "");\n      this.$super.setBusy(false);\n      return false;\n    }\n    if (model.length == 0) {\n      this.$super.setBusy(false);\n      return false;\n    }\n    var Container_ID = this.$super.cmbContainer.getValue();\n    if (Container_ID === undefined) Container_ID = 0;\n    var M_Locator_ID = loc;\n\n    //\tGet Shipment\n    var M_InOut_ID = this.$super.mTab.getValue("M_InOut_ID");\n    var C_Invoice_ID = VIS.Utility.Util.getValueOfInt(this.$super.cmbInvoice.getValue());\n    var C_Order_ID = VIS.Utility.Util.getValueOfInt(this.$super.cmbOrder.getValue());\n    return this.saveData(model, "", C_Order_ID, C_Invoice_ID, M_Locator_ID, M_InOut_ID, Container_ID, fromApply);\n  };\n\n  // Added by Bharat for new search filters\n  VCreateFromShipment.prototype.loadInvoices = function (C_Invoice_ID, M_Product_ID, pNo) {\n    var data = this.getInvoicesData(VIS.Env.getCtx(), C_Invoice_ID, M_Product_ID, pNo);\n    //this.$super.loadGrid(data);\n  };\n  VCreateFromShipment.prototype.getInvoicesData = function (ctx, C_Invoice_ID, M_Product_ID, pNo) {\n    var data = [];\n    var self = this;\n    this.$super.record_ID = $self.mTab.getValue("M_InOut_ID");\n    if (self.$super.dGrid != null) {\n      var selection = self.$super.dGrid.getSelection();\n      for (item in selection) {\n        var obj = $.grep(self.$super.multiValues, function (n, i) {\n          return n.M_Product_ID_K == self.$super.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Invoice_ID_K == self.$super.dGrid.get(selection[item])["C_Invoice_ID_K"];\n        });\n        if (obj.length > 0) {} else {\n          self.$super.multiValues.push(self.$super.dGrid.get(selection[item]));\n        }\n      }\n    }\n    var isBaseLangs = "";\n    var mProductID = "";\n    if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n      isBaseLangs = "FROM C_UOM uom INNER JOIN C_InvoiceLine l ON (l.C_UOM_ID=uom.C_UOM_ID) ";\n    } else {\n      isBaseLangs = "FROM C_UOM_Trl uom Left join C_UOM uom1 on (uom1.C_UOM_ID=uom.C_UOM_ID) INNER JOIN C_InvoiceLine l ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'" + VIS.Env.getAD_Language(ctx) + "\') ";\n    }\n    if (M_Product_ID != null) {\n      mProductID = " AND l.M_Product_ID = " + M_Product_ID;\n    }\n    if (!pNo) {\n      pNo = 1;\n    }\n    $.ajax({\n      url: VIS.Application.contextUrl + "VCreateFrom/GetInvoicesDataVCreate",\n      dataType: "json",\n      type: "POST",\n      data: {\n        keyColumnName: self.$super.mTab.keyColumnName,\n        tableName: "C_InvoiceLine",\n        recordID: self.$super.record_ID,\n        pageNo: pNo,\n        isBaseLangss: isBaseLangs,\n        cInvoiceID: C_Invoice_ID,\n        mProductIDs: mProductID\n      },\n      error: function (e) {\n        alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n        selfChild.log.info(e);\n        self.$super.setBusy(false);\n        return;\n      },\n      success: function (dyndata) {\n        var res = JSON.parse(dyndata);\n        if (res.Error) {\n          VIS.ADialog.error(res.Error);\n          self.$super.setBusy(false);\n          return;\n        }\n        self.$super.resetPageCtrls(res.pSetting);\n        self.$super.loadGrid(res.data);\n        self.$super.setBusy(false);\n      }\n    });\n    return data;\n  };\n  VCreateFromShipment.prototype.initContainerDetails = function (M_Locator_ID) {\n    this.$super.cmbContainer.getControl().html("");\n  };\n\n  //VCreateFromShipment.prototype.getInvoicesData = function (ctx, C_Invoice_ID, M_Product_ID, pNo) {\n  //    var data = [];\n  //    var self = this;\n  //    this.$super.record_ID = $self.mTab.getValue("M_InOut_ID");\n  //    if (self.$super.dGrid != null) {\n  //        var selection = self.$super.dGrid.getSelection();\n  //        for (item in selection) {\n  //            var obj = $.grep(self.$super.multiValues, function (n, i) {\n  //                return n.M_Product_ID_K == self.$super.dGrid.get(selection[item])["M_Product_ID_K"] && n.C_Invoice_ID_K == self.$super.dGrid.get(selection[item])["C_Invoice_ID_K"]\n  //            });\n  //            if (obj.length > 0) {\n\n  //            }\n  //            else {\n  //                self.$super.multiValues.push(self.$super.dGrid.get(selection[item]));\n  //            }\n  //        }\n  //    }\n  //    var sql = ("SELECT "\t//\tEntered UOM\n  //        //+ "l.QtyInvoiced-SUM(NVL(mi.Qty,0)),round(l.QtyEntered/l.QtyInvoiced,6),"\n  //        + "round((l.QtyInvoiced-SUM(COALESCE(mi.Qty,0))) * "\t\t\t\t\t//\t1               \n  //        + "(CASE WHEN l.QtyInvoiced=0 THEN 0 ELSE l.QtyEntered/l.QtyInvoiced END ),2) as QUANTITY,"\t//\t2\n  //        + "round((l.QtyInvoiced-SUM(COALESCE(mi.Qty,0))) * "\t\t\t\t\t//\t1               \n  //        + "(CASE WHEN l.QtyInvoiced=0 THEN 0 ELSE l.QtyEntered/l.QtyInvoiced END ),2) as QTYENTER,"\t//\t2\n  //        + " l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name) as UOM,"\t\t\t//  3..4\n  //        + " l.M_Product_ID,p.Name as PRODUCT, l.C_InvoiceLine_ID,l.Line,"      //  5..8\n  //        + " l.C_OrderLine_ID,"                   \t\t\t\t\t//  9\n  //        + " l.M_AttributeSetInstance_ID AS M_ATTRIBUTESETINSTANCE_ID,"\n  //        + " ins.description ");\n  //    if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n\n  //        sql = sql.concat("FROM C_UOM uom ").concat("INNER JOIN C_InvoiceLine l ON (l.C_UOM_ID=uom.C_UOM_ID) ");\n  //    }\n  //    else {\n  //        sql = sql.concat("FROM C_UOM_Trl uom ")\n  //           .concat("INNER JOIN C_InvoiceLine l ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'")\n  //           .concat(VIS.Env.getAD_Language(ctx)).concat("\') ");\n  //    }\n  //    sql = sql.concat("INNER JOIN M_Product p ON (l.M_Product_ID=p.M_Product_ID) ")\n  //        .concat("LEFT OUTER JOIN M_MatchInv mi ON (l.C_InvoiceLine_ID=mi.C_InvoiceLine_ID) ")\n  //        .concat("LEFT OUTER JOIN M_AttributeSetInstance ins ON (ins.M_AttributeSetInstance_ID =l.M_AttributeSetInstance_ID) ")\n  //        .concat("WHERE l.C_Invoice_ID=" + C_Invoice_ID); \t\t\t\t\t\t\t\t\t//  #1\n  //    if (M_Product_ID != null) {\n  //        sql = sql.concat(" AND l.M_Product_ID = " + M_Product_ID);\n  //    }\n  //    sql = sql.concat(" GROUP BY l.QtyInvoiced,l.QtyEntered,"\n  //    + "l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name),"\n  //        + "l.M_Product_ID,p.Name, l.C_InvoiceLine_ID,l.Line,l.C_OrderLine_ID,l.M_AttributeSetInstance_ID,ins.description "\n  //    + "ORDER BY l.Line");\n\n  //    if (!pNo) {\n  //        pNo = 1;\n  //    }\n\n  //    $.ajax({\n  //        url: VIS.Application.contextUrl + "Common/GetData",\n  //        dataType: "json",\n  //        type: "POST",\n  //        data: {\n  //            sql: sql,\n  //            keyColumnName: self.$super.mTab.keyColumnName,\n  //            tableName: "C_InvoiceLine",\n  //            recordID: self.$super.record_ID,\n  //            pageNo: pNo\n  //        },\n  //        error: function () {\n  //            alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n  //            self.$super.setBusy(false);\n  //            return;\n  //        },\n  //        success: function (dyndata) {\n\n  //            var res = JSON.parse(dyndata);\n  //            if (res.Error) {\n  //                VIS.ADialog.error(res.Error);\n  //                self.$super.setBusy(false);\n  //                return;\n  //            }\n  //            self.$super.resetPageCtrls(res.pSetting);\n  //            self.$super.loadGrid(res.data);\n  //            self.$super.setBusy(false);\n  //        }\n  //    });\n  //    //var dr = null;\n  //    //try {\n  //    //    dr = VIS.DB.executeReader(sql.toString(), null, null);\n  //    //    var count = 1;\n  //    //    while (dr.read()) {\n  //    //        var line = {};\n  //    //        //line.Add(false);           //  0-Selection\n  //    //        var qtyInvoiced = dr.getDecimal(0);\n  //    //        //var multiplier = dr.getDecimal(1);\n  //    //        var qtyEntered = dr.getDecimal(1);\n  //    //        var select = false;\n  //    //        var rec = 0;\n  //    //        if (dr.getInt("c_orderline_id") > 0) {\n  //    //            sql = "SELECT Count(*) FROM M_InOutLine WHERE M_InOut_ID = " + this.$super.mTab.getValue("M_InOut_ID") + " AND C_OrderLine_ID = " + dr.getInt("c_orderline_id");\n  //    //            rec = VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(sql));\n  //    //            if (rec > 0) {\n  //    //                select = true;\n  //    //            }\n  //    //        }\n  //    //        else {\n  //    //            sql = "SELECT Count(*) FROM M_InOutLine WHERE M_InOut_ID = " + this.$super.mTab.getValue("M_InOut_ID") + " AND M_Product_ID = " + dr.getInt("m_product_id");\n  //    //            rec = VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar(sql));\n  //    //            if (rec > 0) {\n  //    //                select = true;\n  //    //            }\n  //    //        }\n  //    //        line[\'Select\'] = select;\n  //    //        line[\'Quantity\'] = qtyInvoiced;        //  1-Qty\n  //    //        line[\'QuantityEntered\'] = qtyEntered;  //  2-Qty Entered\n  //    //        line[\'C_UOM_ID\'] = dr.getString(3);     //  2-UOM\n  //    //        line[\'M_Product_ID\'] = dr.getString(5); //  3-Product\n  //    //        line[\'M_AttributeSetInstance_ID\'] = dr.getString("description");\n  //    //        line[\'C_Order_ID\'] = ".";      //  4-Order\n  //    //        line[\'M_InOut_ID\'] = null;        //  5-Ship\n  //    //        line[\'C_Invoice_ID\'] = dr.getString(7);        //  6-Invoice\n\n  //    //        line[\'C_UOM_ID_K\'] = dr.getString(2);    //  2-UOM -Key\n  //    //        line[\'M_Product_ID_K\'] = dr.getInt(4);      //  3-Product -Key\n  //    //        line[\'M_AttributeSetInstance_ID_K\'] = dr.getString("m_attributesetinstance_id");\n  //    //        line[\'C_Order_ID_K\'] = dr.getInt(8);;      //  4-OrderLine -Key\n  //    //        line[\'M_InOut_ID_K\'] = null;        //  5-Ship -Key\n  //    //        line[\'C_Invoice_ID_K\'] = dr.getInt(6);        //  6-Invoice -Key\n\n  //    //        line[\'recid\'] = count;\n  //    //        count++;\n  //    //        data.push(line);\n  //    //    }\n  //    //    dr.close();\n  //    //}\n  //    //catch (e) {\n  //    //    //s_log.log(Level.SEVERE, sql.toString(), e);\n  //    //}\n  //    return data;\n  //}\n  // end \n\n  VCreateFromShipment.prototype.loadInvoice = function (C_Invoice_ID) {\n    var data = this.getInvoiceData(VIS.Env.getCtx(), C_Invoice_ID);\n    this.$super.loadGrid(data);\n  };\n  VCreateFromShipment.prototype.getInvoiceData = function (ctx, C_Invoice_ID) {\n    var data = [];\n    var sql = "SELECT " //\tEntered UOM\n    //+ "l.QtyInvoiced-SUM(NVL(mi.Qty,0)),round(l.QtyEntered/l.QtyInvoiced,6),"\n    + "round((l.QtyInvoiced-SUM(COALESCE(mi.Qty,0))) * " //\t1               \n    + "(CASE WHEN l.QtyInvoiced=0 THEN 0 ELSE l.QtyEntered/l.QtyInvoiced END ),2) as QUANTITY," //\t2\n    + "round((l.QtyInvoiced-SUM(COALESCE(mi.Qty,0))) * " //\t1               \n    + "(CASE WHEN l.QtyInvoiced=0 THEN 0 ELSE l.QtyEntered/l.QtyInvoiced END ),2) as QTYENTER," //\t2\n    + " l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name)," //  3..4\n    + " l.M_Product_ID,p.Name, l.C_InvoiceLine_ID,l.Line," //  5..8\n    + " l.C_OrderLine_ID "; //  9\n\n    if (VIS.Env.isBaseLanguage(ctx, "C_UOM")) {\n      sql = sql.concat("FROM C_UOM uom ").concat("INNER JOIN C_InvoiceLine l ON (l.C_UOM_ID=uom.C_UOM_ID) ");\n    } else {\n      sql = sql.concat("FROM C_UOM_Trl uom ").concat("INNER JOIN C_InvoiceLine l ON (l.C_UOM_ID=uom.C_UOM_ID AND uom.AD_Language=\'").concat(VIS.Env.getAD_Language(ctx)).concat("\') ");\n    }\n    sql = sql.concat("INNER JOIN M_Product p ON (l.M_Product_ID=p.M_Product_ID) ").concat("LEFT OUTER JOIN M_MatchInv mi ON (l.C_InvoiceLine_ID=mi.C_InvoiceLine_ID) ").concat("WHERE l.C_Invoice_ID=" + C_Invoice_ID //  #1\n    + " GROUP BY l.QtyInvoiced,l.QtyEntered," + "l.C_UOM_ID,COALESCE(uom.UOMSymbol,uom.Name)," + "l.M_Product_ID,p.Name, l.C_InvoiceLine_ID,l.Line,l.C_OrderLine_ID " + "ORDER BY l.Line");\n    var dr = null;\n    try {\n      dr = VIS.DB.executeReader(sql.toString(), null, null);\n      var count = 1;\n      while (dr.read()) {\n        var line = {};\n\n        //line.Add(false);           //  0-Selection\n        var qtyInvoiced = dr.getDecimal(0);\n        //var multiplier = dr.getDecimal(1);\n        var qtyEntered = dr.getDecimal(1);\n        line[\'Quantity\'] = qtyInvoiced; //  1-Qty\n        line[\'QuantityEntered\'] = qtyEntered; //  2-Qty Entered\n        line[\'C_UOM_ID\'] = dr.getString(3); //  2-UOM\n        line[\'M_Product_ID\'] = dr.getString(5); //  3-Product\n        line[\'C_Order_ID\'] = "."; //  4-Order\n        line[\'M_InOut_ID\'] = null; //  5-Ship\n        line[\'C_Invoice_ID\'] = dr.getString(7); //  6-Invoice\n\n        line[\'C_UOM_ID_K\'] = dr.getString(2); //  2-UOM -Key\n        line[\'M_Product_ID_K\'] = dr.getInt(4); //  3-Product -Key\n        line[\'C_Order_ID_K\'] = dr.getInt(8);\n        ; //  4-OrderLine -Key\n        line[\'M_InOut_ID_K\'] = null; //  5-Ship -Key\n        line[\'C_Invoice_ID_K\'] = dr.getInt(6); //  6-Invoice -Key\n\n        line[\'recid\'] = count;\n        count++;\n        data.push(line);\n      }\n      dr.close();\n    } catch (e) {\n      //s_log.log(Level.SEVERE, sql.toString(), e);\n    }\n    return data;\n  };\n  VCreateFromShipment.prototype.saveData = function (model, selectedItems, C_Order_ID, C_Invoice_ID, m_locator_id, M_inout_id, Container_ID, fromApply) {\n    var obj = this;\n    console.log(m_locator_id);\n    $.ajax({\n      type: "POST",\n      url: VIS.Application.contextUrl + "Common/SaveShipment",\n      dataType: "json",\n      data: {\n        model: model,\n        selectedItems: selectedItems,\n        C_Order_ID: C_Order_ID,\n        C_Invoice_ID: C_Invoice_ID,\n        M_Locator_ID: m_locator_id,\n        M_InOut_ID: M_inout_id,\n        Container_ID: Container_ID\n      },\n      success: function (data) {\n        returnValue = data.result;\n        if (returnValue) {\n          // Change By Mohit 30/06/2016\n          if (!fromApply) {\n            obj.dispose();\n            obj.$super.setBusy(false);\n            //VIS.ADialog.info("VIS_SuccessFullyInserted", null, null, null);\n            obj.$super.$root.dialog(\'close\');\n          } else {\n            obj.$super.callBackSave(returnValue);\n          }\n          return;\n        }\n        //obj.$super.setBusy(false);\n        //alert(returnValue);\n      },\n      error: function (jqXHR, textStatus, errorThrown) {\n        debugger;\n        console.log(textStatus);\n        obj.$super.setBusy(false);\n        alert(errorThrown);\n      }\n    });\n  };\n\n  //dispose call\n  VCreateFromShipment.prototype.dispose = function () {\n    if (this.disposeComponent != null) this.disposeComponent();\n  };\n\n  //Load form into VIS\n  VIS.VCreateFromShipment = VCreateFromShipment;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vcreatefromshipment.js?\n}')},"./Areas/VAS/Scripts/app/forms/vcreatefromstatement.js":()=>{eval('{;\n(function (VIS, $) {\n  //form declaretion\n  function VCreateFromStatement(tab) {\n    var baseObj = this.$super;\n    baseObj.constructor(tab);\n    var localObj = this;\n    var windowNo = tab.getWindowNo();\n    dynInit();\n    baseObj.jbInit();\n    baseObj.initOK = true;\n    baseObj.middelDiv.css("height", "61%");\n    function dynInit() {\n      if (baseObj.mTab.getValue("C_BankStatement_ID") == null) {\n        VIS.ADialog.error(VIS.Msg.getMsg("SaveErrorRowNotFound", true));\n        return false;\n      }\n      baseObj.title = VIS.Msg.getElement(VIS.Env.getCtx(), "C_BankStatement_ID", false) + " .. " + VIS.Msg.getMsg("CreateFrom");\n      baseObj.relatedToOrg = null;\n      if (baseObj.lblOrder != null) baseObj.lblOrder.getControl().css(\'display\', \'none\');\n      if (baseObj.cmbOrder != null) baseObj.cmbOrder.getControl().css(\'display\', \'none\');\n      if (baseObj.lblShipment != null) baseObj.lblShipment.getControl().css(\'display\', \'none\');\n      if (baseObj.cmbShipment != null) baseObj.cmbShipment.getControl().css(\'display\', \'none\');\n      if (baseObj.lblInvoice != null) baseObj.lblInvoice.getControl().css(\'display\', \'none\');\n      if (baseObj.cmbInvoice != null) baseObj.cmbInvoice.getControl().css(\'display\', \'none\');\n      var AD_Column_ID = 4917;\n      var lookup = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), windowNo, AD_Column_ID, VIS.DisplayType.TableDir);\n\n      // JID_0331: System is allowing to change bank in create lines from in bank account window.\n      baseObj.cmbBankAccount = new VIS.Controls.VComboBox("C_BankAccount_ID", true, true, true, lookup, 150, VIS.DisplayType.TableDir, 0);\n      baseObj.Date = new VIS.Controls.VDate("Date", false, false, true, VIS.DisplayType.Date, "Date");\n      baseObj.DocumentNo = new VIS.Controls.VTextBox("DocumentNo", false, false, true, 50, 100, null, null, false);\n      baseObj.Amount = new VIS.Controls.VAmountTextBox("Amount", false, false, true, 50, 100, VIS.DisplayType.Amount, VIS.Msg.getMsg("Amount"));\n      //if (window.VA034) {\n      baseObj.DepositSlip = new VIS.Controls.VTextBox("DepositSlip", false, false, true, 50, 100, null, null, false);\n      //}\n      baseObj.AuthCode = new VIS.Controls.VTextBox("AuthCode", false, false, true, 50, 100, null, null, false);\n      baseObj.CheckNo = new VIS.Controls.VTextBox("CheckNo", false, false, true, 50, 100, null, null, false);\n      baseObj.cmbBankAccount.getControl().prop(\'selectedIndex\', 0);\n\n      //  Set Default\n      var C_BankAccount_ID = VIS.Env.getCtx().getContextAsInt(windowNo, "C_BankAccount_ID");\n      baseObj.cmbBankAccount.setValue(C_BankAccount_ID);\n      localObj.initBPartner(C_BankAccount_ID);\n      localObj.loadBankAccounts(C_BankAccount_ID, 0, "", "", "", "", "", "0", 1);\n      if (baseObj.btnRefresh) baseObj.btnRefresh.css("display", "black");\n      return true;\n    }\n    this.disposeComponent = function () {\n      this.disposeComponent = null;\n    };\n  }\n  ;\n  VIS.Utility.inheritPrototype(VCreateFromStatement, VIS.VCreateFrom); //Inherit from VCreateFrom\n\n  //Added by Bharat on 05/May/2017\n  VCreateFromStatement.prototype.initBPartner = function (C_BankAccount_ID) {\n    //  load BPartner\n    var baseObj = this.$super;\n    var AD_Column_ID = 5398; //  C_Payment.C_BPartner_ID\n    var where = " C_BPartner.C_BPartner_ID IN (SELECT  p.C_BPartner_ID as C_BPartner_ID" + " FROM C_Payment p WHERE p.Processed=\'Y\' AND p.IsReconciled=\'N\'" + " AND p.DocStatus IN (\'CO\',\'CL\',\'RE\',\'VO\') AND p.PayAmt<>0" + " AND p.C_BankAccount_ID = " + C_BankAccount_ID //  #2\n    + " AND NOT EXISTS (SELECT * FROM C_BankStatementLine l " + "WHERE p.C_Payment_ID=l.C_Payment_ID AND l.StmtAmt <> 0) )";\n    var lookup = VIS.MLookupFactory.get(VIS.Env.getCtx(), this.windowNo, AD_Column_ID, VIS.DisplayType.Search, "C_BPartner_ID", 0, false, where);\n    baseObj.vBPartner = new VIS.Controls.VTextBoxButton("C_BPartner_ID", true, false, true, VIS.DisplayType.Search, lookup);\n  };\n  VCreateFromStatement.prototype.getTableFieldVOs = function () {\n    var baseObj = this.$super;\n    baseObj.arrListColumns = [];\n    baseObj.arrListColumns.push({\n      field: "Date",\n      caption: VIS.Msg.getMsg("DateAcct"),\n      sortable: true,\n      size: \'100px\',\n      hidden: false,\n      editable: {\n        type: \'date\'\n      },\n      render: function (record, index, col_index) {\n        var val = record["Date"];\n        return new Date(val).toLocaleDateString();\n      }\n    });\n    baseObj.arrListColumns.push({\n      field: "C_Payment_ID",\n      caption: VIS.Msg.getMsg("Payment"),\n      sortable: true,\n      size: \'100px\',\n      hidden: false\n    });\n    baseObj.arrListColumns.push({\n      field: "C_Currency_ID",\n      caption: VIS.Msg.getMsg("Currency"),\n      sortable: true,\n      size: \'80px\',\n      hidden: false\n    });\n\n    ////Sukhwinder  on 25-08-2016 for Module(VA034) specific\n    var countVA034 = VIS.Utility.Util.getValueOfInt(executeScalar("VIS_145"));\n    if (countVA034 > 0) {\n      baseObj.arrListColumns.push({\n        field: "VA034_DepositSlipNo",\n        caption: VIS.Msg.getMsg("DepositSlipNo"),\n        sortable: true,\n        size: \'100px\',\n        hidden: false\n      });\n    }\n    baseObj.arrListColumns.push({\n      field: "AuthCode",\n      caption: VIS.Msg.getMsg("AuthCode"),\n      sortable: true,\n      size: \'100px\',\n      hidden: false\n    });\n    baseObj.arrListColumns.push({\n      field: "CheckNo",\n      caption: VIS.Msg.getMsg("CheckNo"),\n      sortable: true,\n      size: \'80px\',\n      hidden: false\n    });\n    //\n    baseObj.arrListColumns.push({\n      field: "Amount",\n      caption: VIS.Msg.getMsg("Amount"),\n      sortable: true,\n      size: \'80px\',\n      hidden: false,\n      render: function (record, index, col_index) {\n        var val = VIS.Utility.Util.getValueOfDecimal(record["Amount"]);\n        return val.toLocaleString();\n      }\n    });\n    baseObj.arrListColumns.push({\n      field: "ConvertedAmount",\n      caption: VIS.Msg.getMsg("ConvertedAmount"),\n      sortable: true,\n      size: \'80px\',\n      hidden: false,\n      render: function (record, index, col_index) {\n        var val = VIS.Utility.Util.getValueOfDecimal(record["ConvertedAmount"]);\n        return val.toLocaleString();\n      }\n    });\n    baseObj.arrListColumns.push({\n      field: "Description",\n      caption: VIS.Msg.getMsg("Description"),\n      sortable: true,\n      size: \'250px\',\n      hidden: false\n    });\n    baseObj.arrListColumns.push({\n      field: "C_BPartner_ID",\n      caption: VIS.Msg.getMsg("BusinessPartner"),\n      sortable: true,\n      size: \'150px\',\n      hidden: false\n    });\n    baseObj.arrListColumns.push({\n      field: "Type",\n      caption: VIS.Msg.getMsg("Type"),\n      sortable: true,\n      size: \'80px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "C_Payment_ID_K",\n      caption: VIS.Msg.getMsg("Payment"),\n      sortable: true,\n      size: \'150px\',\n      hidden: true\n    });\n    baseObj.arrListColumns.push({\n      field: "C_Currency_ID_K",\n      caption: VIS.Msg.getMsg("Currency"),\n      sortable: true,\n      size: \'150px\',\n      hidden: true\n    });\n  };\n\n  // Added by Bharat for New search Filters and Apply Paging\n\n  VCreateFromStatement.prototype.loadBankAccounts = function (C_BankAccount_ID, C_BPartner_ID, trxDate, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, pNo) {\n    /**\r\n     *  Selected        - 0\r\n     *  Date            - 1\r\n     *  C_Payment_ID    - 2\r\n     *  C_Currenncy     - 3\r\n     *  Amt             - 4\r\n     */\n    var baseObj = this.$super;\n    //  Get StatementDate\n    var ts = baseObj.mTab.getValue("StatementDate");\n    var data = this.getBankAccountsData(VIS.Env.getCtx(), C_BankAccount_ID, C_BPartner_ID, trxDate, ts, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, pNo);\n    //  Header Info\n    this.getTableFieldVOs();\n    //setTimeout(function () {\n    //    baseObj.loadGrid(data);\n    //}, 10);\n  };\n\n  // get bank account details\n  VCreateFromStatement.prototype.getBankAccountsData = function (ctx, C_BankAccount_ID, C_BPartner_ID, trxDate, ts, DocumentNo, DepositSlip, AuthCode, CheckNo, Amount, pNo) {\n    var data = [];\n    var self = this;\n    if (self.$super.dGrid != null) {\n      var selection = self.$super.dGrid.getSelection();\n      for (item in selection) {\n        var obj = $.grep(self.$super.multiValues, function (n, i) {\n          return n.C_Payment_ID_K == self.$super.dGrid.get(selection[item])["C_Payment_ID_K"];\n        });\n        if (obj.length > 0) {} else {\n          self.$super.multiValues.push(self.$super.dGrid.get(selection[item]));\n        }\n      }\n    }\n    if (ts == null) {\n      ts = DateTime.Today.Date;\n    }\n    var date = VIS.DB.to_date(ts, true);\n    var trxDates = "";\n    var trxDatesUnion = "";\n    var cBPartnerID = "0";\n    var DocumentNum = "";\n    var DocumentNoUnion = "";\n    if (C_BPartner_ID > 0) {\n      cBPartnerID = " AND p.C_BPartner_ID = " + C_BPartner_ID;\n    }\n    if (DocumentNo != "") {\n      DocumentNum = " AND p.DocumentNo LIKE \'" + DocumentNo + "\'";\n    }\n    if (trxDate != "" && trxDate != null) {\n      var dateTrx = VIS.DB.to_date(trxDate, true);\n      trxDates = " AND p.DateAcct = " + dateTrx;\n    }\n    if (DocumentNo != "") {\n      DocumentNoUnion = " AND cs.DocumentNo LIKE \'" + DocumentNo + "\'";\n    }\n    if (trxDate != "" && trxDate != null) {\n      var dateAcct = VIS.DB.to_date(trxDate, true);\n      trxDatesUnion = " AND cs.DateAcct = " + dateAcct;\n    }\n    if (!pNo) {\n      pNo = 1;\n    }\n    $.ajax({\n      url: VIS.Application.contextUrl + "VCreateFrom/GetBankAccountsData",\n      dataType: "json",\n      type: "POST",\n      data: {\n        pageNo: pNo,\n        dates: date,\n        trxDatess: trxDates,\n        trxDatesUnions: trxDatesUnion,\n        cBPartnerIDs: cBPartnerID,\n        DocumentNos: DocumentNum,\n        DocumentNoUnions: DocumentNoUnion,\n        DepositSlips: DepositSlip,\n        AuthCodes: AuthCode,\n        CheckNos: CheckNo,\n        Amounts: Amount,\n        cBankAccountId: C_BankAccount_ID\n      },\n      error: function () {\n        alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n        self.$super.setBusy(false);\n        return;\n      },\n      success: function (dyndata) {\n        var res = JSON.parse(dyndata);\n        if (res.Error) {\n          VIS.ADialog.error(res.Error);\n          self.$super.setBusy(false);\n          return;\n        }\n        self.$super.resetPageCtrls(res.pSetting);\n        self.$super.loadGrid(res.data);\n        self.$super.setBusy(false);\n      }\n    });\n    return data;\n  };\n\n  //VCreateFromStatement.prototype.getBankAccountsData = function (ctx, C_BankAccount_ID, C_BPartner_ID, trxDate, ts, DocumentNo, DepositSlip, AuthCode, pNo) {\n  //    var data = [];\n  //    var self = this;\n\n  //    if (self.$super.dGrid != null) {\n  //        var selection = self.$super.dGrid.getSelection();\n  //        for (item in selection) {\n  //            var obj = $.grep(self.$super.multiValues, function (n, i) {\n  //                return n.C_Payment_ID_K == self.$super.dGrid.get(selection[item])["C_Payment_ID_K"]\n  //            });\n  //            if (obj.length > 0) {\n\n  //            }\n  //            else {\n  //                self.$super.multiValues.push(self.$super.dGrid.get(selection[item]));\n  //            }\n  //        }\n  //    }\n\n  //    if (ts == null) {\n  //        ts = DateTime.Today.Date;\n  //    }\n  //    var countVA034 = VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar("SELECT Count(AD_ModuleInfo_ID) FROM AD_ModuleInfo WHERE PREFIX=\'VA034_\' AND IsActive = \'Y\'"));\n  //    var date = VIS.DB.to_date(ts, true);\n  //    var sql = "SELECT  p.DateTrx,p.C_Payment_ID, p.DocumentNo, ba.C_Currency_ID,c.ISO_Code,p.PayAmt,"\n  //        + "currencyConvert(p.PayAmt,p.C_Currency_ID,ba.C_Currency_ID," + date + ",null,p.AD_Client_ID,p.AD_Org_ID),"   //  #1\n  //        + " bp.Name,\'P\' AS Type ";\n  //    if (countVA034 > 0)\n  //        sql += ", p.va034_depositslipno ";\n\n  //    sql += " , p.TrxNo, p.CheckNo  FROM C_BankAccount ba"\n  //        + " INNER JOIN C_Payment_v p ON (p.C_BankAccount_ID=ba.C_BankAccount_ID)"\n  //        + " INNER JOIN C_Currency c ON (p.C_Currency_ID=c.C_Currency_ID)"\n  //        + " LEFT OUTER JOIN C_BPartner bp ON (p.C_BPartner_ID=bp.C_BPartner_ID) "\n  //        + "WHERE p.Processed=\'Y\' AND p.IsReconciled=\'N\'"\n  //        + " AND p.DocStatus IN (\'CO\',\'CL\',\'RE\',\'VO\') AND p.PayAmt<>0"\n  //        + " AND p.C_BankAccount_ID = " + C_BankAccount_ID;                           \t//  #2\n  //    if (C_BPartner_ID > 0) {\n  //        sql += " AND p.C_BPartner_ID = " + C_BPartner_ID;\n  //    }\n  //    if (DocumentNo != "") {\n  //        sql += " AND p.DocumentNo LIKE \'" + DocumentNo + "\'";\n  //    }\n  //    if (DepositSlip != "") {\n  //        sql += " AND p.va034_depositslipno LIKE \'" + DepositSlip + "\'";\n  //    }\n  //    if (AuthCode != "") {\n  //        sql += " AND p.TrxNo LIKE \'" + AuthCode + "\'";\n  //    }\n  //    if (trxDate != "" && trxDate != null) {\n  //        var dateTrx = VIS.DB.to_date(trxDate, true);\n  //        sql += " AND p.DateTrx = " + dateTrx;\n  //    }\n  //    sql += " AND NOT EXISTS (SELECT * FROM C_BankStatementLine l "        //\tVoided Bank Statements have 0 StmtAmt\n  //        + "WHERE p.C_Payment_ID=l.C_Payment_ID AND l.StmtAmt <> 0)";\n  //    var countVA012 = VIS.Utility.Util.getValueOfInt(VIS.DB.executeScalar("SELECT Count(AD_ModuleInfo_ID) FROM AD_ModuleInfo WHERE PREFIX=\'VA012_\' AND IsActive = \'Y\'"));\n  //    if (countVA012 > 0) {\n\n  //        sql += " UNION SELECT cs.DateAcct AS DateTrx,cl.C_CashLine_ID AS C_Payment_ID,  cs.DocumentNo, ba.C_Currency_ID,c.ISO_Code,cl.Amount AS PayAmt,"\n  //        + "currencyConvert(cl.Amount,cl.C_Currency_ID,ba.C_Currency_ID," + date + ",null,cs.AD_Client_ID,cs.AD_Org_ID),"   //  #1\n  //        + " Null AS Name,\'C\' AS Type"\n\n  //        if (countVA034 > 0)\n  //            sql += ", NULL as va034_depositslipno ";\n\n  //        sql += " , null as TrxNo, null AS CheckNo FROM C_BankAccount ba"\n  //                + " INNER JOIN C_CashLine cl ON (cl.C_BankAccount_ID=ba.C_BankAccount_ID)"\n  //                + " INNER JOIN C_Cash cs ON (cl.C_Cash_ID=cs.C_Cash_ID)"\n  //                + " INNER JOIN C_Charge chrg ON chrg.C_Charge_ID=cl.C_Charge_ID"\n  //                + " INNER JOIN C_Currency c ON (cl.C_Currency_ID=c.C_Currency_ID)"\n  //                + " WHERE cs.Processed=\'Y\' AND cl.VA012_IsReconciled=\'N\'"\n  //                + " AND cl.CashType =\'C\' AND chrg.DTD001_ChargeType =\'CON\'"\n  //                + " AND cs.DocStatus IN (\'CO\',\'CL\',\'RE\',\'VO\') AND cl.Amount<>0"\n  //                + " AND cl.C_BankAccount_ID = " + C_BankAccount_ID;                             \t//  #2            \n  //        if (DocumentNo != "") {\n  //            sql += " AND cs.DocumentNo LIKE \'" + DocumentNo + "\'";\n  //        }\n  //        if (trxDate != "" && trxDate != null) {\n  //            var dateAcct = VIS.DB.to_date(trxDate, true);\n  //            sql += " AND cs.DateAcct = " + dateAcct;\n  //        }\n  //        sql += " AND NOT EXISTS (SELECT * FROM C_BankStatementLine l "            //\tVoided Bank Statements have 0 StmtAmt\n  //                + "WHERE cl.C_CashLine_ID=l.C_CashLine_ID AND l.StmtAmt <> 0)";\n  //    }\n\n  //    if (!pNo) {\n  //        pNo = 1;\n  //    }\n\n  //    $.ajax({\n  //        url: VIS.Application.contextUrl + "Common/GetAccountData",\n  //        dataType: "json",\n  //        type: "POST",\n  //        data: {\n  //            sql: sql,\n  //            pageNo: pNo\n  //        },\n  //        error: function () {\n  //            alert(VIS.Msg.getMsg(\'ErrorWhileGettingData\'));\n  //            self.$super.setBusy(false);\n  //            return;\n  //        },\n  //        success: function (dyndata) {\n\n  //            var res = JSON.parse(dyndata);\n  //            if (res.Error) {\n  //                VIS.ADialog.error(res.Error);\n  //                self.$super.setBusy(false);\n  //                return;\n  //            }\n  //            self.$super.resetPageCtrls(res.pSetting);\n  //            self.$super.loadGrid(res.data);\n  //            self.$super.setBusy(false);\n  //        }\n  //    });\n  //    //try {\n  //    //    if (ts == null) {\n  //    //        ts = DateTime.Today.Date;\n  //    //    }\n\n  //    //    var dr = null;\n  //    //    var param = [];\n\n  //    //    param[0] = new VIS.DB.SqlParam("@t", ts);\n  //    //    param[0].setIsDate(true);\n  //    //    param[1] = new VIS.DB.SqlParam("@C_BankAccount_ID", C_BankAccount_ID);\n\n  //    //    dr = VIS.DB.executeReader(sql, param, null);\n  //    //    var count = 1;\n  //    //    while (dr.read()) {\n  //    //        var line = {};\n  //    //        line[\'Date\'] = dr.getString(0);             //  1-DateTrx\n  //    //        line[\'C_Payment_ID\'] = dr.getString(2);     //  2-C_Payment_ID\n  //    //        line[\'C_Currency_ID\'] = dr.getString(4);    //  3-Currency\n  //    //        line[\'Amount\'] = dr.getDecimal(5);          //  4-PayAmt\n  //    //        line[\'ConvertedAmount\'] = dr.getDecimal(6); //  5-Conv Amt\n  //    //        line[\'C_BPartner_ID\'] = dr.getString(7);    //  6-BParner\n  //    //        line[\'Type\'] = dr.getString(8);\n  //    //        line[\'C_Payment_ID_K\'] = dr.getString(1);   //  2-C_Payment_ID -Key\n  //    //        line[\'C_Currency_ID_K\'] = dr.getInt(3);     //  3-Currency -Key\n\n  //    //        line[\'recid\'] = count;\n  //    //        count++;\n  //    //        data.push(line);\n  //    //    }\n  //    //}\n  //    //catch (e) {\n\n  //    //}\n  //    return data;\n  //}\n\n  // End done by Bharat\n\n  VCreateFromStatement.prototype.loadBankAccount = function (C_BankAccount_ID) {\n    /**\r\n     *  Selected        - 0\r\n     *  Date            - 1\r\n     *  C_Payment_ID    - 2\r\n     *  C_Currenncy     - 3\r\n     *  Amt             - 4\r\n     */\n    var baseObj = this.$super;\n    //  Get StatementDate\n    var ts = baseObj.mTab.getValue("StatementDate");\n    var data = this.getBankAccountData(VIS.Env.getCtx(), C_BankAccount_ID, ts);\n    //  Header Info\n    this.getTableFieldVOs();\n    setTimeout(function () {\n      baseObj.loadGrid(data);\n    }, 10);\n  };\n  VCreateFromStatement.prototype.getBankAccountData = function (ctx, C_BankAccount_ID, ts) {\n    var data = [];\n\n    //var sql = "SELECT p.DateTrx,p.C_Payment_ID,p.DocumentNo, ba.C_Currency_ID,c.ISO_Code,p.PayAmt,"\n    //    + "currencyConvert(p.PayAmt,p.C_Currency_ID,ba.C_Currency_ID,@t,null,p.AD_Client_ID,p.AD_Org_ID),"   //  #1\n    //    + " bp.Name,\'P\' AS Type "\n    //    + "FROM C_BankAccount ba"\n    //    + " INNER JOIN C_Payment_v p ON (p.C_BankAccount_ID=ba.C_BankAccount_ID)"\n    //    + " INNER JOIN C_Currency c ON (p.C_Currency_ID=c.C_Currency_ID)"\n    //    + " LEFT OUTER JOIN C_BPartner bp ON (p.C_BPartner_ID=bp.C_BPartner_ID) "\n    //    + "WHERE p.Processed=\'Y\' AND p.IsReconciled=\'N\'"\n    //    + " AND p.DocStatus IN (\'CO\',\'CL\',\'RE\',\'VO\') AND p.PayAmt<>0"\n    //    + " AND p.C_BankAccount_ID=@C_BankAccount_ID"                              \t//  #2\n    //    + " AND NOT EXISTS (SELECT * FROM C_BankStatementLine l "\n    //    //\tVoided Bank Statements have 0 StmtAmt\n    //        + "WHERE p.C_Payment_ID=l.C_Payment_ID AND l.StmtAmt <> 0)";\n    //var countVA012 = VIS.Utility.Util.getValueOfInt(executeScalar("SELECT Count(AD_ModuleInfo_ID) FROM AD_ModuleInfo WHERE PREFIX=\'VA012_\' AND IsActive = \'Y\'"));\n    //if (countVA012 > 0) {\n\n    //    sql += " UNION SELECT cs.DateAcct AS DateTrx,cl.C_CashLine_ID AS C_Payment_ID,cs.DocumentNo, ba.C_Currency_ID,c.ISO_Code,cl.Amount AS PayAmt,"\n    //    + "currencyConvert(cl.Amount,cl.C_Currency_ID,ba.C_Currency_ID,@t,null,cs.AD_Client_ID,cs.AD_Org_ID),"   //  #1\n    //    + " Null AS Name,\'C\' AS Type FROM C_BankAccount ba"\n    //    + " INNER JOIN C_CashLine cl ON (cl.C_BankAccount_ID=ba.C_BankAccount_ID)"\n    //    + " INNER JOIN C_Cash cs ON (cl.C_Cash_ID=cs.C_Cash_ID)"\n    //    + " INNER JOIN C_Charge chrg ON chrg.C_Charge_ID=cl.C_Charge_ID"\n    //    + " INNER JOIN C_Currency c ON (cl.C_Currency_ID=c.C_Currency_ID)"\n    //    + " WHERE cs.Processed=\'Y\' AND cl.VA012_IsReconciled=\'N\'"\n    //    + " AND cl.CashType =\'C\' AND chrg.DTD001_ChargeType =\'CON\'"\n    //    + " AND cs.DocStatus IN (\'CO\',\'CL\',\'RE\',\'VO\') AND cl.Amount<>0"\n    //    + " AND cl.C_BankAccount_ID=@C_BankAccount_ID"                              \t//  #2\n    //    + " AND NOT EXISTS (SELECT * FROM C_BankStatementLine l "\n    //    //\tVoided Bank Statements have 0 StmtAmt\n    //        + "WHERE cl.C_CashLine_ID=l.C_CashLine_ID AND l.StmtAmt <> 0)";\n    //}\n\n    try {\n      if (ts == null) {\n        ts = DateTime.Today.Date;\n      }\n      var dr = null;\n      //var param = [];\n\n      //param[0] = new VIS.DB.SqlParam("@t", ts);\n      //param[0].setIsDate(true);\n      //param[1] = new VIS.DB.SqlParam("@C_BankAccount_ID", C_BankAccount_ID);\n\n      //dr = executeReader(sql, param, null);\n\n      $.ajax({\n        url: VIS.Application.contextUrl + "Form/GetBankAccontData",\n        async: false,\n        data: {\n          C_BankAccount_ID: C_BankAccount_ID,\n          ts: ts\n        }\n      }).done(function (json) {\n        dr = new VIS.DB.DataReader().toJson(json);\n      });\n      var count = 1;\n      while (dr.read()) {\n        var line = {};\n        line[\'Date\'] = dr.getString(0); //  1-DateTrx\n        line[\'C_Payment_ID\'] = dr.getString(2); //  2-C_Payment_ID\n        line[\'C_Currency_ID\'] = dr.getString(4); //  3-Currency\n        line[\'Amount\'] = dr.getDecimal(5); //  4-PayAmt\n        line[\'ConvertedAmount\'] = dr.getDecimal(6); //  5-Conv Amt\n        line[\'C_BPartner_ID\'] = dr.getString(7); //  6-BParner\n        line[\'Type\'] = dr.getString(8);\n        line[\'C_Payment_ID_K\'] = dr.getString(1); //  2-C_Payment_ID -Key\n        line[\'C_Currency_ID_K\'] = dr.getInt(3); //  3-Currency -Key\n\n        line[\'recid\'] = count;\n        count++;\n        data.push(line);\n      }\n    } catch (e) {}\n    return data;\n  };\n  var baseUrl = VIS.Application.contextUrl;\n  var dataSetUrl = baseUrl + "JsonData/JDataSetWithCode";\n  var nonQueryUrl = baseUrl + "JsonData/ExecuteNonQuer";\n  function getDataSetJString(data, async, callback) {\n    var result = null;\n    // data.sql = VIS.secureEngine.encrypt(data.sql);\n    $.ajax({\n      url: dataSetUrl,\n      type: "POST",\n      datatype: "json",\n      contentType: "application/json; charset=utf-8",\n      async: async,\n      data: JSON.stringify(data)\n    }).done(function (json) {\n      result = json;\n      if (callback) {\n        callback(json);\n      }\n      //return result;\n    });\n    return result;\n  }\n  ;\n  var executeScalar = function (sql, params, callback) {\n    var async = callback ? true : false;\n    var dataIn = {\n      sql: sql,\n      page: 1,\n      pageSize: 0\n    };\n    var value = null;\n    getDataSetJString(dataIn, async, function (jString) {\n      dataSet = new VIS.DB.DataSet().toJson(jString);\n      var dataSet = new VIS.DB.DataSet().toJson(jString);\n      if (dataSet.getTable(0).getRows().length > 0) {\n        value = dataSet.getTable(0).getRow(0).getCell(0);\n      } else {\n        value = null;\n      }\n      dataSet.dispose();\n      dataSet = null;\n      if (async) {\n        callback(value);\n      }\n    });\n    return value;\n  };\n  var executeReader = function (sql, param, callback) {\n    var async = callback ? true : false;\n    var dataIn = {\n      sql: sql,\n      page: 1,\n      pageSize: 0\n    };\n    if (param) {\n      dataIn.param = param;\n    }\n    var dr = null;\n    getDataSetJString(dataIn, async, function (jString) {\n      dr = new VIS.DB.DataReader().toJson(jString);\n      if (callback) {\n        callback(dr);\n      }\n    });\n    return dr;\n  };\n  VCreateFromStatement.prototype.saveStatment = function () {\n    if (this.$super.dGrid == null) {\n      return false;\n    }\n\n    //\tGet Shipment\n    var C_BankStatement_ID = this.$super.mTab.getValue("C_BankStatement_ID");\n    var model = {}; //this.$super.dGrid.records;\n    var selectedItems = this.$super.multiValues;\n    if (selectedItems == null) {\n      return false;\n    }\n    if (selectedItems.length <= 0) {\n      return false;\n    }\n    //var splitValue = selectedItems.toString().split(\',\');\n    for (var i = 0; i < selectedItems.length; i++) {\n      model[i] = selectedItems[i];\n    }\n    return this.saveData(model, "", C_BankStatement_ID);\n  };\n  VCreateFromStatement.prototype.saveData = function (model, selectedItems, C_BankStatement_ID) {\n    var obj = this;\n    $.ajax({\n      type: "POST",\n      url: VIS.Application.contextUrl + "Common/SaveStatment",\n      dataType: "json",\n      data: {\n        model: model,\n        selectedItems: selectedItems,\n        C_BankStatement_ID: C_BankStatement_ID\n      },\n      success: function (data) {\n        returnValue = data.result;\n        if (returnValue) {\n          obj.dispose();\n          obj.$super.$root.dialog(\'close\');\n          obj.$super.setBusy(false);\n          return;\n        }\n        obj.$super.setBusy(false);\n        alert(returnValue);\n      },\n      error: function (jqXHR, textStatus, errorThrown) {\n        debugger;\n        console.log(textStatus);\n        obj.$super.setBusy(false);\n        alert(errorThrown);\n      }\n    });\n  };\n\n  //dispose call\n  VCreateFromStatement.prototype.dispose = function () {\n    if (this.disposeComponent != null) this.disposeComponent();\n  };\n\n  //Load form into VIS\n  VIS.VCreateFromStatement = VCreateFromStatement;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vcreatefromstatement.js?\n}')},"./Areas/VAS/Scripts/app/forms/vcreaterelatedlines.js":()=>{eval('{;\nVIS = window.VIS || {};\n;\n(function (VIS, $) {\n  VIS.CreateRelatedLines = function () {\n    this.frame;\n    this.windowNo;\n    this.Record_ID;\n    this.Table_ID;\n    var $bsyDiv;\n    var $self = this; //scoped self pointer\n    var $OkBtn;\n    var $ApplyBtn;\n    var $CancelBtn;\n    var $root = $(\'<div>\');\n    var SelectedRecords;\n    var _ProductLookUp;\n    var _ProductCtrl;\n    var pattrLookup;\n    var _CmbRelatedType;\n    var lookupRelatedType = null;\n    var ctrlRelatedType = null;\n    var prdCtrl;\n    var puomLookup = null;\n    var pruomLookup = null;\n    var PAttrCtrl;\n    var PRAttrCtrl;\n    var PUomCtrl = null;\n    var PRUomCtrl = null;\n    var ProductGrid;\n    var $DivProductGrid;\n    var RelatedGrid;\n    var $DivRelatedGrid;\n    var product_ID = 0;\n    var relType = "";\n    var BPartner_ID = 0;\n    var isSOTrx;\n    var PriceList_ID = 0;\n    var precision = 2;\n    VIS.translatedTexts = null;\n    var format = VIS.DisplayType.GetNumberFormat(VIS.DisplayType.Amount);\n    var dotFormatter = VIS.Env.isDecimalPoint();\n    this.initalize = function () {\n      var elements = ["RelatedProductType", "M_Product_ID", "SearchKeyValue", "ASI", "C_UOM_ID", "QtyEntered", "PriceActual", "PriceList"];\n      VIS.translatedTexts = VIS.Msg.translate(VIS.Env.getCtx(), elements, true);\n      $root.append(\'<div class="VIS_Pref_show vis-formouterwrpdiv">\' + \'<div class= "VIS_Pref_dd">\' + \'<div class="input-group vis-input-wrap" id="VIS_Product_\' + $self.windowNo + \'" ></div>\' + \'</div>\' + \'<div class= "VIS_Pref_dd"><div class="input-group vis-input-wrap">\' + \'<div class="vis-control-wrap" id="VIS_RelatedType_\' + $self.windowNo + \'"><label class="VIS_Pref_Label_Font" > \' + VIS.translatedTexts.RelatedProductType + \'</label ></div></div>\' + \'</div></div>\');\n      $root.append(\'<div class="vis-crtfrm-datawrp" style="height: 15.5%;"><div id="VIS_ProductGrd_\' + $self.windowNo + \'" style="height:80px;" ></div></div>\');\n      $root.append(\'<div class="vis-crtfrm-datawrp" style="height: 48.5%;"><div id="VIS_RelatedGrd_\' + $self.windowNo + \'" style="height:250px;" ></div></div>\');\n      $root.append(\'<div class="vis-ctrfrm-btnwrp">\' + \'<input id="VIS_CancelBtn_\' + $self.windowNo + \'" class= "VIS_Pref_btn-2" type = "button" value = "\' + VIS.Msg.getMsg("Cancel") + \'">\' + \'<input id="VIS_ApplyBtn_\' + $self.windowNo + \'" class="VIS_Pref_btn-2" type="button" value="\' + VIS.Msg.getMsg("Apply") + \'">\' + \'<input id="VIS_OKBtn_\' + $self.windowNo + \'" class="VIS_Pref_btn-2" type="button" value="\' + VIS.Msg.getMsg("OK") + \'">\' + \'</div>\');\n      createBusyIndicator();\n      $bsyDiv[0].style.visibility = "visible";\n    };\n\n    // Get controls from design\n    this.intialLoad = function () {\n      $OkBtn = $root.find("#VIS_OKBtn_" + $self.windowNo);\n      $ApplyBtn = $root.find("#VIS_ApplyBtn_" + $self.windowNo);\n      $CancelBtn = $root.find("#VIS_CancelBtn_" + $self.windowNo);\n      _ProductCtrl = $root.find("#VIS_Product_" + $self.windowNo);\n      _CmbRelatedType = $root.find("#VIS_RelatedType_" + $self.windowNo);\n      $DivProductGrid = $root.find("#VIS_ProductGrd_" + $self.windowNo);\n      $DivRelatedGrid = $root.find("#VIS_RelatedGrd_" + $self.windowNo);\n      LoadControls();\n      InitEvents();\n      $bsyDiv[0].style.visibility = "hidden";\n    };\n\n    // load dynamic vienna controls\n    function LoadControls() {\n      // Related Type Control\n      lookupRelatedType = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 10853, VIS.DisplayType.List);\n      ctrlRelatedType = new VIS.Controls.VComboBox("RelatedProductType", false, false, true, lookupRelatedType, 50);\n      _CmbRelatedType.prepend(ctrlRelatedType.getControl());\n\n      // Product Control\n      _ProductLookUp = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 2221, VIS.DisplayType.Search);\n      prdCtrl = new VIS.Controls.VTextBoxButton("M_Product_ID", true, false, true, VIS.DisplayType.Search, _ProductLookUp);\n      var _ProductCtrlWrap = $(\'<div class="vis-control-wrap">\');\n      var _ProductBtnWrap = $(\'<div class="input-group-append">\');\n      _ProductCtrl.append(_ProductCtrlWrap);\n      _ProductCtrlWrap.append(prdCtrl.getControl().attr(\'placeholder\', \' \').attr(\'data-placeholder\', \'\').attr(\'data-hasbtn\', \' \')).append(\'<label>\' + VIS.translatedTexts.M_Product_ID + \'</label>\');\n      _ProductCtrl.append(_ProductBtnWrap);\n      _ProductBtnWrap.append(prdCtrl.getBtn(0));\n      _ProductBtnWrap.append(prdCtrl.getBtn(1));\n      VIS.Env.getCtx().setContext($self.windowNo, "M_Product_ID", null);\n      pattrLookup = new VIS.MPAttributeLookup(VIS.context, $self.windowNo);\n      PAttrCtrl = new VIS.Controls.VPAttribute("M_AttributeSetInstance_ID", false, false, true, VIS.DisplayType.PAttribute, pattrLookup, $self.windowNo, false, false, false, true);\n      PRAttrCtrl = new VIS.Controls.VPAttribute("M_AttributeSetInstance_ID", false, false, true, VIS.DisplayType.PAttribute, pattrLookup, $self.windowNo, false, false, false, true);\n\n      // UOM Control\n      puomLookup = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 2222, VIS.DisplayType.TableDir);\n      pruomLookup = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 2222, VIS.DisplayType.TableDir);\n      PUomCtrl = new VIS.Controls.VComboBox("C_UOM_ID", true, false, true, puomLookup, 50);\n      PRUomCtrl = new VIS.Controls.VComboBox("C_UOM_ID", true, false, true, pruomLookup, 50);\n      BPartner_ID = VIS.Env.getCtx().getContextAsInt($self.windowNo, "C_BPartner_ID", false);\n      isSOTrx = VIS.Env.getCtx().getWindowContext($self.windowNo, "IsSOTrx", true) == "Y";\n      PriceList_ID = VIS.Env.getCtx().getContextAsInt($self.windowNo, "M_PriceList_ID", false);\n    }\n    ;\n\n    // load Details of selected Product\n    function GetProductDetails(product_ID, attribute_ID, uom_ID, pricelist_ID) {\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "RelatedProduct/GetProductData", {\n        "M_Product_ID": product_ID,\n        "M_AttributeSetInstance_ID": attribute_ID,\n        "C_UOM_ID": uom_ID,\n        "M_PriceList_ID": pricelist_ID,\n        "Table_ID": $self.Table_ID,\n        "Record_ID": $self.Record_ID\n      }, CallbackProductDetails);\n    }\n    ;\n\n    // Callback Product Details\n    function CallbackProductDetails(data) {\n      if (data != null) {\n        ProductGrid.add(data);\n      }\n      GetRelatedProducts(product_ID, 0, 0, PriceList_ID);\n    }\n    ;\n\n    // load Related Products of selected product\n    function GetRelatedProducts(product_ID, attribute_ID, uom_ID, pricelist_ID) {\n      VIS.dataContext.getJSONData(VIS.Application.contextUrl + "RelatedProduct/GetRelatedProduct", {\n        "M_Product_ID": product_ID,\n        "M_AttributeSetInstance_ID": attribute_ID,\n        "C_UOM_ID": uom_ID,\n        "M_PriceList_ID": pricelist_ID,\n        "RelatedProductType": relType,\n        "Table_ID": $self.Table_ID,\n        "Record_ID": $self.Record_ID\n      }, CallbackRelatedProduct);\n    }\n    ;\n\n    // Callback Related Product\n    function CallbackRelatedProduct(data) {\n      if (data != null) {\n        RelatedGrid.add(data);\n      }\n      if (RelatedGrid.records.length > 0) {\n        for (var i = 0; i < RelatedGrid.records.length; i++) {\n          if (RelatedGrid.records[i].RelatedProductType == \'M\') {\n            $($("#grid_" + RelatedGrid.name + "_rec_" + (i + 1)).find("input[type=checkbox]")).prop("checked", true).attr(\'disabled\', true);\n            //$("#grid_" + RelatedGrid.name + "_rec_" + (i + 1) + \' \' + \' input[type=checkbox]\').attr(\'disabled\', true);\n          }\n        }\n      }\n      $bsyDiv[0].style.visibility = "hidden";\n    }\n    ;\n\n    // Events\n    function InitEvents() {\n      prdCtrl.fireValueChanged = function () {\n        if (prdCtrl.value != null) {\n          $bsyDiv[0].style.visibility = "visible";\n          product_ID = prdCtrl.value;\n          ProductGrid.clear();\n          RelatedGrid.clear();\n          GetProductDetails(product_ID, 0, 0, PriceList_ID);\n        } else {\n          product_ID = 0;\n          ProductGrid.clear();\n          RelatedGrid.clear();\n        }\n      };\n      ctrlRelatedType.fireValueChanged = function (e) {\n        $bsyDiv[0].style.visibility = "visible";\n        relType = ctrlRelatedType.getValue();\n        RelatedGrid.clear();\n        GetRelatedProducts(product_ID, 0, 0, PriceList_ID);\n      };\n      $OkBtn.on("click touchstart", function (ev) {\n        if (RelatedGrid.records.length > 0) {\n          for (var i = 0; i < RelatedGrid.records.length; i++) {\n            if (RelatedGrid.records[i].RelatedProductType == \'M\') {\n              RelatedGrid.select(i + 1);\n            }\n          }\n        }\n        if (ProductGrid.records.length > 0) {\n          $bsyDiv[0].style.visibility = "visible";\n          GetSelectedRecords();\n          CreateLines(false);\n        } else {\n          VIS.ADialog.error("VIS_PlzSelLines");\n        }\n      });\n      $ApplyBtn.on("click touchstart", function (ev) {\n        if (RelatedGrid.records.length > 0) {\n          for (var i = 0; i < RelatedGrid.records.length; i++) {\n            if (RelatedGrid.records[i].RelatedProductType == \'M\') {\n              RelatedGrid.select(i + 1);\n            }\n          }\n        }\n        if (ProductGrid.records.length > 0) {\n          $bsyDiv[0].style.visibility = "visible";\n          GetSelectedRecords();\n          CreateLines(true);\n        } else {\n          VIS.ADialog.error("VIS_PlzSelLines");\n        }\n      });\n      $CancelBtn.on("click touchstart", function (ev) {\n        $self.frame.close();\n      });\n    }\n    ;\n\n    // load Product grid\n    this.LoadProductGrid = function () {\n      ProductGrid = null;\n      ProductGrid = $DivProductGrid.w2grid({\n        name: "VIS_ProductGrid_" + $self.windowNo,\n        recordHeight: 25,\n        show: {\n          toolbar: false,\n          // indicates if toolbar is v isible\n          //columnHeaders: true,   // indicates if columns is visible\n          //lineNumbers: true,  // indicates if line numbers column is visible\n          selectColumn: false,\n          // indicates if select column is visible\n          toolbarReload: false,\n          // indicates if toolbar reload button is visible\n          toolbarColumns: true,\n          // indicates if toolbar columns button is visible\n          toolbarSearch: false,\n          // indicates if toolbar search controls are visible\n          toolbarAdd: false,\n          // indicates if toolbar add new button is visible\n          toolbarDelete: true,\n          // indicates if toolbar delete button is visible\n          toolbarSave: true // indicates if toolbar save button is visible\n        },\n        multiSelect: true,\n        columns: [{\n          field: \'Product_ID\',\n          caption: VIS.translatedTexts.M_Product_ID,\n          size: \'20%\',\n          display: false\n        }, {\n          field: \'Value\',\n          caption: VIS.translatedTexts.SearchKeyValue,\n          size: \'150px\'\n        }, {\n          field: \'Product\',\n          caption: VIS.translatedTexts.M_Product_ID,\n          size: \'200px\'\n        }, {\n          field: "M_AttributeSetInstance_ID",\n          caption: VIS.translatedTexts.ASI,\n          sortable: false,\n          size: \'150px\',\n          editable: {\n            type: \'custom\',\n            ctrl: PAttrCtrl,\n            showAll: true\n          },\n          render: function (record, index, col_index) {\n            var l = pattrLookup;\n            var val = record["M_AttributeSetInstance_ID"];\n            if (record.changes && typeof record.changes["M_AttributeSetInstance_ID"] != \'undefined\') {\n              val = record.changes["M_AttributeSetInstance_ID"];\n            }\n            var d;\n            if (l) {\n              d = l.getDisplay(val, true);\n            }\n            return d;\n          }\n        }, {\n          //field: \'UOM\', caption: VIS.translatedTexts.C_UOM_ID, size: \'120px\'\n          field: "UOM_ID",\n          caption: VIS.translatedTexts.C_UOM_ID,\n          sortable: false,\n          size: \'120px\',\n          editable: {\n            type: \'custom\',\n            ctrl: PUomCtrl,\n            showAll: true\n          },\n          render: function (record, index, col_index) {\n            var l = puomLookup;\n            var val = record["UOM_ID"];\n            if (record.changes && typeof record.changes["UOM_ID"] != \'undefined\') {\n              val = record.changes["UOM_ID"];\n            }\n            var d;\n            if (l) {\n              d = l.getDisplay(val);\n            }\n            return d;\n          }\n        }, {\n          field: \'UOM\',\n          caption: VIS.translatedTexts.C_UOM_ID,\n          size: \'20%\',\n          display: false\n        }, {\n          field: "QtyEntered",\n          caption: \'<div ><span>\' + VIS.translatedTexts.QtyEntered + \'</span></div>\',\n          sortable: false,\n          size: \'120px\',\n          min: 80,\n          hidden: false,\n          editable: {\n            type: \'number\'\n          },\n          render: function (record, index, col_index) {\n            var val = record["QtyEntered"];\n            val = checkcommaordot(event, val);\n            return parseFloat(val).toLocaleString();\n          }\n        }, {\n          field: "PriceStd",\n          caption: \'<div ><span>\' + VIS.translatedTexts.PriceActual + \'</span></div>\',\n          sortable: false,\n          size: \'120px\',\n          min: 80,\n          hidden: false,\n          editable: {\n            type: \'number\'\n          },\n          render: function (record, index, col_index) {\n            var val = record["PriceStd"];\n            val = checkcommaordot(event, val);\n            return parseFloat(val).toLocaleString();\n          }\n        }, {\n          field: "PriceList",\n          caption: \'<div ><span>\' + VIS.translatedTexts.PriceList + \'</span></div>\',\n          sortable: false,\n          size: \'120px\',\n          min: 80,\n          hidden: false,\n          editable: {\n            type: \'number\'\n          },\n          render: function (record, index, col_index) {\n            var val = record["PriceList"];\n            val = checkcommaordot(event, val);\n            return parseFloat(val).toLocaleString();\n          }\n        }],\n        onEditField: function (event) {\n          id = event.recid;\n          if (event.column == 6 || event.column == 7 || event.column == 8) {\n            ProductGrid.records[event.index][ProductGrid.columns[event.column].field] = checkcommaordot(event, ProductGrid.records[event.index][ProductGrid.columns[event.column].field]);\n            var _value = format.GetFormatAmount(ProductGrid.records[event.index][ProductGrid.columns[event.column].field], "init", dotFormatter);\n            ProductGrid.records[event.index][ProductGrid.columns[event.column].field] = format.GetConvertedString(_value, dotFormatter);\n            $("#grid_VIS_ProductGrid_" + $self.windowNo + "_rec_" + id).keydown(function (event) {\n              if (!dotFormatter && (event.keyCode == 190 || event.keyCode == 110)) {\n                // , separator\n                return false;\n              } else if (dotFormatter && event.keyCode == 188) {\n                // . separator\n                return false;\n              }\n              if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                if (event.target.value.indexOf(\'.\') > -1) {\n                  event.target.value = event.target.value.replace(\'.\', \'\');\n                }\n              } else if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                if (event.target.value.indexOf(\',\') > -1) {\n                  event.target.value = event.target.value.replace(\',\', \'\');\n                }\n              }\n              if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n                return false;\n              }\n            });\n          }\n        },\n        onChange: function (event) {\n          if (event.column == 8) {\n            var _val = format.GetConvertedNumber(event.value_new, dotFormatter);\n            ProductGrid.records[event.index]["PriceList"] = _val.toFixed(precision);\n          } else if (event.column == 7) {\n            var _val = format.GetConvertedNumber(event.value_new, dotFormatter);\n            ProductGrid.records[event.index]["PriceStd"] = _val.toFixed(precision);\n          } else if (event.column == 6) {\n            var _val = format.GetConvertedNumber(event.value_new, dotFormatter);\n            ProductGrid.records[event.index]["QtyEntered"] = _val.toFixed(precision);\n          } else if (event.column == 3) {\n            if (event.value_new != null) {\n              ProductGrid.records[event.index]["M_AttributeSetInstance_ID"] = event.value_new;\n              VIS.dataContext.getJSONData(VIS.Application.contextUrl + "RelatedProduct/GetProductData", {\n                "M_Product_ID": product_ID,\n                "M_AttributeSetInstance_ID": event.value_new,\n                "C_UOM_ID": VIS.Utility.Util.getValueOfInt(ProductGrid.records[event.index]["UOM_ID"]),\n                "M_PriceList_ID": PriceList_ID,\n                "Table_ID": $self.Table_ID,\n                "Record_ID": $self.Record_ID\n              }, function (data) {\n                if (data != null) {\n                  ProductGrid.records[event.index]["PriceStd"] = data.PriceStd;\n                  ProductGrid.records[event.index]["PriceList"] = data.PriceList;\n                  ProductGrid.refreshCell(event.recid, "PriceStd");\n                  ProductGrid.refreshCell(event.recid, "PriceList");\n                }\n              });\n            }\n          } else if (event.column == 4) {\n            if (event.value_new != null) {\n              ProductGrid.records[event.index]["UOM_ID"] = event.value_new;\n              VIS.dataContext.getJSONData(VIS.Application.contextUrl + "RelatedProduct/GetProductData", {\n                "M_Product_ID": product_ID,\n                "M_AttributeSetInstance_ID": VIS.Utility.Util.getValueOfInt(ProductGrid.records[event.index]["M_AttributeSetInstance_ID"]),\n                "C_UOM_ID": event.value_new,\n                "M_PriceList_ID": PriceList_ID,\n                "Table_ID": $self.Table_ID,\n                "Record_ID": $self.Record_ID\n              }, function (data) {\n                if (data != null) {\n                  ProductGrid.records[event.index]["PriceStd"] = data.PriceStd;\n                  ProductGrid.records[event.index]["PriceList"] = data.PriceList;\n                  ProductGrid.refreshCell(event.recid, "PriceStd");\n                  ProductGrid.refreshCell(event.recid, "PriceList");\n                }\n              });\n            }\n          }\n        },\n        onClick: function (event) {\n          VIS.Env.getCtx().setContext($self.windowNo, "M_Product_ID", VIS.Utility.Util.getValueOfInt(ProductGrid.records[event.recid - 1]["Product_ID"]));\n        }\n      });\n      ProductGrid.hideColumn(\'Product_ID\');\n      //ProductGrid.hideColumn(\'AttributeSetInstance_ID\');\n      ProductGrid.hideColumn(\'UOM\');\n    };\n\n    // load related product grid\n    this.LoadRelatedGrid = function () {\n      RelatedGrid = null;\n      RelatedGrid = $DivRelatedGrid.w2grid({\n        name: "VIS_RelatedGrid_" + $self.windowNo,\n        recordHeight: 25,\n        show: {\n          toolbar: false,\n          // indicates if toolbar is v isible\n          //columnHeaders: true,   // indicates if columns is visible\n          //lineNumbers: true,  // indicates if line numbers column is visible\n          selectColumn: true,\n          // indicates if select column is visible\n          toolbarReload: false,\n          // indicates if toolbar reload button is visible\n          toolbarColumns: true,\n          // indicates if toolbar columns button is visible\n          toolbarSearch: false,\n          // indicates if toolbar search controls are visible\n          toolbarAdd: false,\n          // indicates if toolbar add new button is visible\n          toolbarDelete: true,\n          // indicates if toolbar delete button is visible\n          toolbarSave: true // indicates if toolbar save button is visible\n        },\n        multiSelect: true,\n        columns: [{\n          field: \'Product_ID\',\n          caption: VIS.translatedTexts.M_Product_ID,\n          size: \'20%\',\n          display: false\n        }, {\n          field: \'Value\',\n          caption: VIS.translatedTexts.SearchKeyValue,\n          size: \'150px\'\n        }, {\n          field: \'Product\',\n          caption: VIS.translatedTexts.M_Product_ID,\n          size: \'200px\'\n        }, {\n          field: \'RelatedProductType\',\n          caption: VIS.translatedTexts.RelatedProductType,\n          size: \'150px\'\n        }, {\n          field: \'RelatedType\',\n          caption: VIS.translatedTexts.RelatedProductType,\n          size: \'150px\'\n        }, {\n          field: "M_AttributeSetInstance_ID",\n          caption: VIS.translatedTexts.ASI,\n          sortable: false,\n          size: \'150px\',\n          editable: {\n            type: \'custom\',\n            ctrl: PRAttrCtrl,\n            showAll: true\n          },\n          render: function (record, index, col_index) {\n            var l = pattrLookup;\n            var val = record["M_AttributeSetInstance_ID"];\n            if (record.changes && typeof record.changes["M_AttributeSetInstance_ID"] != \'undefined\') {\n              val = record.changes["M_AttributeSetInstance_ID"];\n            }\n            var d;\n            if (l) {\n              d = l.getDisplay(val, true);\n            }\n            return d;\n          }\n        }, {\n          //field: \'UOM\', caption: VIS.translatedTexts.C_UOM_ID, size: \'100px\'\n          field: "UOM_ID",\n          caption: VIS.translatedTexts.C_UOM_ID,\n          sortable: false,\n          size: \'100px\',\n          editable: {\n            type: \'custom\',\n            ctrl: PRUomCtrl,\n            showAll: true\n          },\n          render: function (record, index, col_index) {\n            var l = pruomLookup;\n            var val = record["UOM_ID"];\n            if (record.changes && typeof record.changes["UOM_ID"] != \'undefined\') {\n              val = record.changes["UOM_ID"];\n            }\n            var d;\n            if (l) {\n              d = l.getDisplay(val);\n            }\n            return d;\n          }\n        }, {\n          field: \'UOM\',\n          caption: VIS.translatedTexts.C_UOM_ID,\n          size: \'20%\',\n          display: false\n        }, {\n          field: "QtyEntered",\n          caption: \'<div ><span>\' + VIS.translatedTexts.QtyEntered + \'</span></div>\',\n          sortable: false,\n          size: \'100px\',\n          min: 80,\n          hidden: false,\n          editable: {\n            type: \'number\'\n          },\n          render: function (record, index, col_index) {\n            var val = record["QtyEntered"];\n            val = checkcommaordot(event, val);\n            return parseFloat(val).toLocaleString();\n          }\n        }, {\n          field: "PriceStd",\n          caption: \'<div ><span>\' + VIS.translatedTexts.PriceActual + \'</span></div>\',\n          sortable: false,\n          size: \'100px\',\n          min: 80,\n          hidden: false,\n          editable: {\n            type: \'number\'\n          },\n          render: function (record, index, col_index) {\n            var val = record["PriceStd"];\n            val = checkcommaordot(event, val);\n            return parseFloat(val).toLocaleString();\n          }\n        }, {\n          field: "PriceList",\n          caption: \'<div ><span>\' + VIS.translatedTexts.PriceList + \'</span></div>\',\n          sortable: false,\n          size: \'100px\',\n          min: 80,\n          hidden: false,\n          editable: {\n            type: \'number\'\n          },\n          render: function (record, index, col_index) {\n            var val = record["PriceList"];\n            val = checkcommaordot(event, val);\n            return parseFloat(val).toLocaleString();\n          }\n        }],\n        onUnselect: function (event) {\n          if (event.all) {\n            event.onComplete = function () {\n              if (RelatedGrid.records.length > 0) {\n                for (var i = 0; i < RelatedGrid.records.length; i++) {\n                  if (RelatedGrid.records[i].RelatedProductType == \'M\') {\n                    $($("#grid_" + RelatedGrid.name + "_rec_" + (i + 1)).find("input[type=checkbox]")).prop("checked", true).attr(\'disabled\', true);\n                    //$("#grid_" + RelatedGrid.name + "_rec_" + (i + 1) + \' \' + \' input[type=checkbox]\').attr(\'disabled\', true);\n                  }\n                }\n              }\n            };\n          } else {\n            event.onComplete = function () {\n              if (RelatedGrid.records[event.index].RelatedProductType == \'M\') {\n                $($("#grid_" + RelatedGrid.name + "_rec_" + event.recid).find("input[type=checkbox]")).prop("checked", true).attr(\'disabled\', true);\n                //$("#grid_" + RelatedGrid.name + "_rec_" + RelatedGrid 3.records[i].recid + \' \' + \' input[type=checkbox]\').attr(\'disabled\', true);\n              }\n            };\n          }\n        },\n        onEditField: function (event) {\n          id = event.recid;\n          if (event.column == 8 || event.column == 9 || event.column == 10) {\n            RelatedGrid.records[event.index][RelatedGrid.columns[event.column].field] = checkcommaordot(event, RelatedGrid.records[event.index][RelatedGrid.columns[event.column].field]);\n            var _value = format.GetFormatAmount(RelatedGrid.records[event.index][RelatedGrid.columns[event.column].field], "init", dotFormatter);\n            RelatedGrid.records[event.index][RelatedGrid.columns[event.column].field] = format.GetConvertedString(_value, dotFormatter);\n            $("#grid_VIS_RelatedGrid_" + $self.windowNo + "_rec_" + id).keydown(function (event) {\n              if (!dotFormatter && (event.keyCode == 190 || event.keyCode == 110)) {\n                // , separator\n                return false;\n              } else if (dotFormatter && event.keyCode == 188) {\n                // . separator\n                return false;\n              }\n              if (event.target.value.contains(".") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                if (event.target.value.indexOf(\'.\') > -1) {\n                  event.target.value = event.target.value.replace(\'.\', \'\');\n                }\n              } else if (event.target.value.contains(",") && (event.which == 110 || event.which == 190 || event.which == 188)) {\n                if (event.target.value.indexOf(\',\') > -1) {\n                  event.target.value = event.target.value.replace(\',\', \'\');\n                }\n              }\n              if (event.keyCode != 8 && event.keyCode != 9 && (event.keyCode < 37 || event.keyCode > 40) && (event.keyCode < 48 || event.keyCode > 57) && (event.keyCode < 96 || event.keyCode > 105) && event.keyCode != 109 && event.keyCode != 189 && event.keyCode != 110 && event.keyCode != 144 && event.keyCode != 188 && event.keyCode != 190) {\n                return false;\n              }\n            });\n          } else if (event.column == 5) {\n            VIS.Env.getCtx().setContext($self.windowNo, "M_Product_ID", VIS.Utility.Util.getValueOfInt(RelatedGrid.records[event.recid - 1]["Product_ID"]));\n          }\n        },\n        onChange: function (event) {\n          if (event.column == 10) {\n            var _val = format.GetConvertedNumber(event.value_new, dotFormatter);\n            RelatedGrid.records[event.index]["PriceList"] = _val.toFixed(precision);\n          } else if (event.column == 9) {\n            var _val = format.GetConvertedNumber(event.value_new, dotFormatter);\n            RelatedGrid.records[event.index]["PriceStd"] = _val.toFixed(precision);\n          } else if (event.column == 8) {\n            var _val = format.GetConvertedNumber(event.value_new, dotFormatter);\n            RelatedGrid.records[event.index]["QtyEntered"] = _val.toFixed(precision);\n          } else if (event.column == 5) {\n            if (event.value_new != null) {\n              RelatedGrid.records[event.index]["M_AttributeSetInstance_ID"] = event.value_new;\n              VIS.dataContext.getJSONData(VIS.Application.contextUrl + "RelatedProduct/GetProductData", {\n                "M_Product_ID": RelatedGrid.records[event.index]["Product_ID"],\n                "M_AttributeSetInstance_ID": event.value_new,\n                "C_UOM_ID": VIS.Utility.Util.getValueOfInt(RelatedGrid.records[event.index]["UOM_ID"]),\n                "M_PriceList_ID": PriceList_ID,\n                "Table_ID": $self.Table_ID,\n                "Record_ID": $self.Record_ID\n              }, function (data) {\n                if (data != null) {\n                  RelatedGrid.records[event.index]["PriceStd"] = data.PriceStd;\n                  RelatedGrid.records[event.index]["PriceList"] = data.PriceList;\n                  RelatedGrid.refreshCell(event.recid, "PriceStd");\n                  RelatedGrid.refreshCell(event.recid, "PriceList");\n                }\n              });\n            }\n          } else if (event.column == 6) {\n            if (event.value_new != null) {\n              RelatedGrid.records[event.index]["UOM_ID"] = event.value_new;\n              VIS.dataContext.getJSONData(VIS.Application.contextUrl + "RelatedProduct/GetProductData", {\n                "M_Product_ID": RelatedGrid.records[event.index]["Product_ID"],\n                "M_AttributeSetInstance_ID": VIS.Utility.Util.getValueOfInt(RelatedGrid.records[event.index]["M_AttributeSetInstance_ID"]),\n                "C_UOM_ID": event.value_new,\n                "M_PriceList_ID": PriceList_ID,\n                "Table_ID": $self.Table_ID,\n                "Record_ID": $self.Record_ID\n              }, function (data) {\n                if (data != null) {\n                  RelatedGrid.records[event.index]["PriceStd"] = data.PriceStd;\n                  RelatedGrid.records[event.index]["PriceList"] = data.PriceList;\n                  RelatedGrid.refreshCell(event.recid, "PriceStd");\n                  RelatedGrid.refreshCell(event.recid, "PriceList");\n                }\n              });\n            }\n          }\n        },\n        onClick: function (event) {\n          VIS.Env.getCtx().setContext($self.windowNo, "M_Product_ID", VIS.Utility.Util.getValueOfInt(RelatedGrid.records[event.recid - 1]["Product_ID"]));\n        }\n      });\n      RelatedGrid.hideColumn(\'RelatedProductType\');\n      RelatedGrid.hideColumn(\'Product_ID\');\n      RelatedGrid.hideColumn(\'UOM\');\n    };\n\n    // Get selected records from Grid\n    function GetSelectedRecords() {\n      SelectedRecords = [];\n      SelectedRecords.push({\n        Product_ID: ProductGrid.records[0].Product_ID,\n        Product: ProductGrid.records[0].Product,\n        AttributeSetInstance_ID: ProductGrid.records[0].M_AttributeSetInstance_ID,\n        UOM_ID: ProductGrid.records[0].UOM_ID,\n        UOM: ProductGrid.records[0].UOM_ID,\n        RelatedProductType: ProductGrid.records[0].RelatedProductType,\n        RelatedType: ProductGrid.records[0].RelatedType,\n        Value: ProductGrid.records[0].Value,\n        QtyEntered: ProductGrid.records[0].QtyEntered,\n        PriceStd: ProductGrid.records[0].PriceStd,\n        PriceList: ProductGrid.records[0].PriceList\n      });\n      var selection = RelatedGrid.getSelection();\n      for (var i = 0; i < selection.length; i++) {\n        SelectedRecords.push({\n          Product_ID: RelatedGrid.records[selection[i] - 1].Product_ID,\n          Product: RelatedGrid.records[selection[i] - 1].Product,\n          AttributeSetInstance_ID: RelatedGrid.records[selection[i] - 1].M_AttributeSetInstance_ID,\n          UOM_ID: RelatedGrid.records[selection[i] - 1].UOM_ID,\n          UOM: RelatedGrid.records[selection[i] - 1].UOM_ID,\n          RelatedProductType: RelatedGrid.records[selection[i] - 1].RelatedProductType,\n          RelatedType: RelatedGrid.records[selection[i] - 1].RelatedType,\n          Value: RelatedGrid.records[selection[i] - 1].Value,\n          QtyEntered: RelatedGrid.records[selection[i] - 1].QtyEntered,\n          PriceStd: RelatedGrid.records[selection[i] - 1].PriceStd,\n          PriceList: RelatedGrid.records[selection[i] - 1].PriceList\n        });\n      }\n    }\n    ;\n\n    // function to check comma or dot from given value and return new value\n    function checkcommaordot(event, val) {\n      var foundComma = false;\n      event.value_new = VIS.Utility.Util.getValueOfString(val);\n      if (event.value_new.contains(".")) {\n        foundComma = true;\n        var indices = [];\n        for (var i = 0; i < event.value_new.length; i++) {\n          if (event.value_new[i] === ".") indices.push(i);\n        }\n        if (indices.length > 1) {\n          event.value_new = removeAllButLast(event.value_new, \'.\');\n        }\n      }\n      if (event.value_new.contains(",")) {\n        if (foundComma) {\n          event.value_new = removeAllButLast(event.value_new, \',\');\n        } else {\n          var indices = [];\n          for (var i = 0; i < event.value_new.length; i++) {\n            if (event.value_new[i] === ",") indices.push(i);\n          }\n          if (indices.length > 1) {\n            event.value_new = removeAllButLast(event.value_new, \',\');\n          } else {\n            event.value_new = event.value_new.replace(",", ".");\n          }\n        }\n      }\n      if (event.value_new == "") {\n        event.value_new = "0";\n      }\n      return event.value_new;\n    }\n    ;\n\n    // Remove all seperator but only bring last seperator\n    function removeAllButLast(amt, seprator) {\n      var parts = amt.split(seprator);\n      amt = parts.slice(0, -1).join(\'\') + \'.\' + parts.slice(-1);\n      if (amt.indexOf(\'.\') == amt.length - 1) {\n        amt = amt.replace(".", "");\n      }\n      return amt;\n    }\n    ;\n\n    // Create busy indicator\n    function createBusyIndicator() {\n      $bsyDiv = $("<div class=\'vis-apanel-busy\'>");\n      $bsyDiv.css({\n        "position": "absolute",\n        "width": "98%",\n        "height": "97%",\n        \'text-align\': \'center\',\n        \'z-index\': \'999\'\n      });\n      $bsyDiv[0].style.visibility = "visible";\n      $root.append($bsyDiv);\n    }\n    ;\n\n    // Create Related Products lines\n    CreateLines = function (fromApply) {\n      $.ajax({\n        url: VIS.Application.contextUrl + "RelatedProduct/SaveRelatedLines",\n        type: "POST",\n        dataType: "json",\n        contentType: "application/json; charset=utf-8",\n        data: JSON.stringify({\n          Data: SelectedRecords,\n          Table_ID: $self.Table_ID,\n          Record_ID: $self.Record_ID\n        }),\n        success: function (data) {\n          if (JSON.parse(data) != "") {\n            prdCtrl.setValue(null, false, true);\n            ProductGrid.clear();\n            RelatedGrid.clear();\n            VIS.ADialog.info("", true, JSON.parse(data), "");\n          }\n          $bsyDiv[0].style.visibility = "hidden";\n          if (!fromApply) {\n            $self.frame.close();\n          }\n        },\n        error: function () {\n          $bsyDiv[0].style.visibility = "hidden";\n        }\n      });\n    };\n    this.getRoot = function () {\n      return $root;\n    };\n  };\n  VIS.CreateRelatedLines.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.Record_ID = this.frame.getRecord_ID();\n    this.Table_ID = this.frame.getAD_Table_ID();\n    this.initalize();\n    this.intialLoad();\n    this.frame.getContentGrid().append(this.getRoot());\n    var ssef = this;\n    window.setTimeout(function () {\n      ssef.LoadProductGrid();\n      ssef.LoadRelatedGrid();\n    }, 50);\n    window.setTimeout(function () {}, 50);\n  };\n  VIS.CreateRelatedLines.prototype.setHeight = function () {\n    return "575";\n  };\n  VIS.CreateRelatedLines.prototype.setWidth = function () {\n    return "1050";\n  };\n  VIS.CreateRelatedLines.prototype.dispose = function () {\n    w2ui[\'VIS_ProductGrid_\' + this.windowNo].destroy();\n    w2ui[\'VIS_RelatedGrid_\' + this.windowNo].destroy();\n    this.frame = null;\n    this.windowNo = null;\n    $bsyDiv = null;\n    $self = null;\n    $OkBtn = null;\n    $ApplyBtn = null;\n    $root = null;\n    _ProductLookUp = null;\n    pattrLookup = null;\n    puomLookup = null;\n    pruomLookup = null;\n    PUomCtrl = null;\n    PRUomCtrl = null;\n    _ProductCtrl = null;\n    _CmbRelatedType = null;\n    lookupRelatedType = null;\n    ctrlRelatedType = null;\n    PAttrCtrl = null;\n    PRAttrCtrl = null;\n    SelectedRecords = null;\n  };\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vcreaterelatedlines.js?\n}')},"./Areas/VAS/Scripts/app/forms/vinoutgen.js":()=>{eval('{;\n(function (VIS, $) {\n  VIS.Apps.AForms = VIS.Apps.AForms || {};\n  function VInOutGen() {\n    this.frame;\n    this.windowNo;\n    var $self = this;\n    this.arrListColumns = [];\n    this.dGrid = null;\n    var whereClause = null;\n    var M_Warehouse_ID = null;\n    var C_BPartner_ID = null;\n    var toggle = false;\n    var toggleGen = false;\n    var toggleside = false;\n    var imgOrder, txtOrderNo;\n    var C_Order_IDSearch = null;\n    this.lblWarehouse = new VIS.Controls.VLabel();\n    this.lblBPartner = new VIS.Controls.VLabel();\n    this.lblStatusInfo = new VIS.Controls.VLabel();\n    this.tabSelect = new VIS.Controls.VLabel();\n    this.tabGenrate = new VIS.Controls.VLabel();\n    this.cmbWarehouse = new VIS.Controls.VComboBox(\'\', false, false, true);\n    this.vSearchBPartner = null;\n    this.vSearchOrder = null;\n    this.$root = $("<div style=\'width: 100%; height: 100%; background-color: white;\'>");\n    this.$busyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n    this.topDiv = null;\n    this.sideDiv = null;\n    this.gridSelectDiv = null;\n    this.gridGenerateDiv = null;\n    this.bottumDiv = null;\n    this.div = null;\n    this.okBtn = null;\n    this.cancelBtn = null;\n    this.btnRefresh = null;\n    this.btnToggel = null;\n    this.spnSelect = null;\n    this.spnGenerate = null;\n    this.btnSpaceDiv = null;\n    this.lblGenrate = null;\n    this.lblSelect = null;\n    var btnClearBP = null;\n    var btnClearOrd = null;\n    var sideDivWidth = 260;\n    var minSideWidth = 50;\n    //window with-(sidediv with_margin from left+ space)\n    var selectDivWidth = $(window).width() - (sideDivWidth + 20);\n    var selectDivFullWidth = $(window).width() - (20 + minSideWidth);\n    var selectDivToggelWidth = selectDivWidth + sideDivWidth + 5;\n    var sideDivHeight = $(window).height() - 210;\n    function initializeComponent() {\n      var topDivId = "topDiv_" + $self.windowNo;\n      var btnSpaceDivId = "btnSpaceDiv_" + $self.windowNo;\n      var btnSpaceId = "btnSpace_" + $self.windowNo;\n      var spnSelectid = "spnSelect_" + $self.windowNo;\n      var spnGenerateid = "spnGenerate_" + $self.windowNo;\n      var lblGenerateid = "lblGenerate_" + $self.windowNo;\n      var lblSelectid = "lblSelect_" + $self.windowNo;\n\n      // JID_1110: Clear option required on Business partner and Docuemnt No. parameter.\n      //var imgInfo = VIS.Application.contextUrl + "Areas/VIS/Images/clear16.png";\n      //var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/arrow-left.png";\n      btnClearBP = $(\'<div class="input-group-append"><button id = "btnClearBP_\' + $self.windowNo + \'" tabindex="-1" class="vis-controls-txtbtn-table-td2 input-group-text"><i class="fa fa-arrow-left" tabindex="-1" title="\' + VIS.Msg.getMsg("Clear", false, false) + \'"></i></button></div>\');\n      btnClearOrd = $(\'<div class="input-group-append"><button id = "btnClearOrd_\' + $self.windowNo + \'" tabindex="-1" class="vis-controls-txtbtn-table-td2 input-group-text"><i class="fa fa-arrow-left" tabindex="-1" title="\' + VIS.Msg.getMsg("Clear", false, false) + \'"></i></button></div>\');\n      $self.topDiv = $("<div id=\'" + topDivId + "\' class=\'vis-archive-l-s-head vis-frm-ls-top\' style=\'padding: 0;\'>" + "<div id=\'" + btnSpaceDivId + "\' class=\'vis-l-s-headwrp\'>" + "<button id=\'" + btnSpaceId + "\'  class=\'vis-archive-sb-t-button\'>" + "<i class=\'vis vis-arrow-left\'></i></button></div>" + "<div id=\'" + spnSelectid + "\'style=\'display: inline-block;  padding-left: 15px;margin-right: 15px;\' >" + "<label id=\'" + lblSelectid + "\' class=\'VIS_Pref_Label_Font\' style=\'vertical-align: middle;font-size: 28px;color: rgba(var(--v-c-primary), 1);\'>" + VIS.Msg.translate(VIS.Env.getCtx(), "Select") + "</label></div>" + "<div id=\'" + spnGenerateid + "\' style=\'display: inline-block; width: 160px;\'>" + "<label id=\'" + lblGenerateid + "\' class=\'VIS_Pref_Label_Font\' style=\'vertical-align: middle;font-size: 17px;\'>" + VIS.Msg.translate(VIS.Env.getCtx(), "Generate") + "</label></div></div>");\n      var sideDivId = "sideDiv_" + $self.windowNo;\n      var parameterDivId = "parameterDiv_" + $self.windowNo;\n      $self.btnSpaceDiv = $self.topDiv.find("#" + btnSpaceDivId);\n      this.lblGenrate = $self.topDiv.find("#" + lblGenerateid);\n      this.lblSelect = $self.topDiv.find("#" + lblSelectid);\n      $self.sideDiv = $("<div id=\'" + sideDivId + "\' class=\'vis-archive-l-s-content vis-leftsidebarouterwrap\'>");\n      $self.sideDiv.css("width", sideDivWidth);\n      //$self.sideDiv.css("height", sideDivHeight);\n      $self.sideDiv.css("height", "calc(100% - 103px)");\n      $self.div = $("<div class=\'vis-archive-l-s-content-inner\' id=\'" + parameterDivId + "\'>");\n      $self.sideDiv.append($self.div);\n      var tble = $("<table style=\'width: 100%;\'>");\n      var tr = $("<tr>");\n      var td = $("<td style=\'padding: 10px 10px 0px;\'>");\n      $self.div.append(tble);\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.lblWarehouse.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append($self.cmbWarehouse.getControl());\n      Leftformfieldctrlwrp.append($self.lblWarehouse.getControl().addClass("VIS_Pref_Label_Font"));\n\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n\n      //td.append($self.lblBPartner.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      var leftformbtnwrap = $(\'<div class="input-group-append">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n\n      // var ctrl = $("<div style=\'float: left; width: 100%;\' class=\'VIS_Pref_slide-show pp\'>");\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      Leftformfieldctrlwrp.append($self.vSearchBPartner.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n      Leftformfieldctrlwrp.append($self.lblBPartner.getControl().addClass("VIS_Pref_Label_Font"));\n      Leftformfieldwrp.append(leftformbtnwrap);\n      leftformbtnwrap.append($self.vSearchBPartner.getBtn(0));\n      Leftformfieldwrp.append(btnClearBP);\n\n      //============Manish 27/1/16\n      //var OrderNo = VIS.Msg.translate(VIS.Env.getCtx(), "DocumentNo")\n\n      // JID_1138: Document no. rename as Sales order no.\n      var OrderNo = VIS.Msg.translate(VIS.Env.getCtx(), "SalesOrder_No");\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append(OrderNo);\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      var leftformbtnwrap = $(\'<div class="input-group-append">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append($self.vSearchOrder.getControl(0).attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n      Leftformfieldctrlwrp.append(\'<label>\' + OrderNo + \'</label>\');\n      Leftformfieldwrp.append(leftformbtnwrap);\n      leftformbtnwrap.append($self.vSearchOrder.getBtn(0));\n      Leftformfieldwrp.append(btnClearOrd);\n\n      //$self.vSearchBPartner.getBtn(0).css(\'width\', \'30px\').css(\'height\', \'30px\').css(\'padding\', \'0px\').css(\'border-color\', \'#BBBBBB\')\n      //imgOrder = "<span><img style=\'cursor:pointer;height:20px;width:20px;margin:-2px 0 0 4px\' src=\'" + VIS.Application.contextUrl + "Areas/VIS/Images/base/Search24.PNG\' id=\'ordNoSearch\'" + $self.windowNo + "></img></span>";\n      //imgOrder = $self.vSearchBPartner.getBtn(0).css(\'width\', \'30px\').css(\'height\', \'30px\').css(\'padding\', \'0px\').css(\'border-color\', \'#BBBBBB\');\n      //txtOrderNo = $(\'<input type="text" name="orderSearch" style="display: inline-block; width: 206px;">\');\n      //td.append(txtOrderNo).append(imgOrder);\n      ////////////////////////////\n\n      var gridSelectDivId = "gridSelectDiv_" + $self.windowNo;\n      var gridGenerateDivId = "gridGenerateDiv_" + $self.windowNo;\n      $self.gridSelectDiv = $("<div id=\'" + gridSelectDivId + "\' class=\'vis-frm-grid-outerwrp\'>");\n      //$self.gridSelectDiv.css("width", selectDivWidth);\n      //$self.gridSelectDiv.css("height", sideDivHeight);\n\n      $self.gridGenerateDiv = $("<div id=\'" + gridGenerateDivId + "\' style=\'height: 85%; float: right; display: none; background-color: rgba(var(--v-c-secondary), .8); margin-left: 15px;margin-right: 15px;\'>");\n      $self.gridGenerateDiv.css("width", $(window).width() - 30);\n      var name = "btnOk_" + $self.windowNo;\n      $self.okBtn = $("<input id=\'" + name + "\' class=\'VIS_Pref_btn-2\' style=\'margin-top: 0px;width: 70px;height: 38px;\' type=\'button\' value=\'Ok\'>");\n\n      //name = "btnCancel_" + $self.windowNo;\n      //$self.cancelBtn = $("<input id=\'" + name + "\' class=\'VIS_Pref_btn-2\' style=\'margin-bottom: 0px; margin-top: 6px; float: right;margin-right: 4px;\' type=\'button\' value=\'Cancel\'>");\n      debugger;\n      name = "btnRefresh_" + $self.windowNo;\n      //var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/Refresh24.png";\n      $self.btnRefresh = $("<button id=\'" + name + "\' style=\'margin-top: 0px;\' class=\'VIS_Pref_btn-2\'><i class=\'vis vis-refresh\'></i></button>");\n      var discriptionDivId = "discriptionDiv_" + $self.windowNo;\n      $self.bottumDiv = $("<div class=\'vis-info-btmcnt-wrap vis-p-t-10\'>");\n      var mdg = $("<div id=\'" + discriptionDivId + "\' style=\'flex: 1;padding: 0 10px;\'>");\n      mdg.append($self.lblStatusInfo.getControl().addClass("VIS_Pref_Label_Font"));\n      var buttonDiv = $("<div>");\n      //buttonDiv.append($self.cancelBtn);\n      buttonDiv.append($self.okBtn);\n      $self.bottumDiv.append($self.btnRefresh).append(mdg).append(buttonDiv);\n\n      //Add to root\n      $self.$root.append($self.$busyDiv);\n      $self.$busyDiv[0].style.visibility = "hidden";\n      $self.$root.append($self.topDiv).append($self.sideDiv).append($self.gridSelectDiv).append($self.gridGenerateDiv).append($self.bottumDiv);\n    }\n    function jbInit() {\n      $self.lblWarehouse.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "M_Warehouse_ID"));\n      $self.lblBPartner.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "C_BPartner_ID"));\n      $self.tabSelect.getControl().text(VIS.Msg.getMsg("Select", false, false));\n      $self.tabGenrate.getControl().text(VIS.Msg.getMsg("Generate", false, false));\n      //Changed Msg By Pratap - 4/12/15 \n      //$self.lblStatusInfo.getControl().text(VIS.Msg.getMsg("InvGenerateSel", false, false));\n      $self.lblStatusInfo.getControl().text(VIS.Msg.getMsg("VIS_OrderGenShip", false, false));\n    }\n    //debugger;\n    function fillPicks() {\n      //debugger;\n      //var lookup = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 2223, VIS.DisplayType.TableDir);\n\n      // JID_0782: InActive warehouse should not be available to select at Generate Shipment Manual form\n      var lookup = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 2223, VIS.DisplayType.TableDir, "M_Warehouse_ID", 0, false, "M_Warehouse.IsActive=\'Y\'");\n      $self.cmbWarehouse = new VIS.Controls.VComboBox("M_Warehouse_ID", true, false, true, lookup, 150, VIS.DisplayType.TableDir, 0);\n\n      // Handled issue when there is no default Document type, no data was coming in Info.\n      var value = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 2762, VIS.DisplayType.Search, "C_BPartner_ID", 0, false, "C_BPartner.IsActive =\'Y\' And C_Bpartner.Issummary =\'N\'");\n      $self.vSearchBPartner = new VIS.Controls.VTextBoxButton("C_BPartner_ID", true, false, true, VIS.DisplayType.Search, value);\n\n      //var Ordervalue = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 2161, VIS.DisplayType.Search);\n      var Ordervalue = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 2161, VIS.DisplayType.Search, "C_Order_ID", 0, false, "DocStatus=\'CO\'");\n      $self.vSearchOrder = new VIS.Controls.VTextBoxButton("C_Order_ID", true, false, true, VIS.DisplayType.Search, Ordervalue);\n    }\n    function dynInit(data) {\n      if ($self.dGrid != null) {\n        $self.dGrid.destroy();\n        $self.dGrid = null;\n      }\n      if ($self.arrListColumns.length == 0) {\n        // this.arrListColumns.push({ field: "Select", caption: VIS.Msg.getMsg("Select"), sortable: true, size: \'50px\', hidden: false });\n        $self.arrListColumns.push({\n          field: "AD_Org_ID",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "AD_Org_ID"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "C_DocType_ID",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "C_DocType_ID"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "DocumentNo",\n          caption: VIS.Msg.getElement(VIS.Env.getCtx(), "DocumentNo"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "C_BPartner_ID",\n          caption: VIS.Msg.getElement(VIS.Env.getCtx(), "C_BPartner_ID"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "DateOrdered",\n          caption: VIS.Msg.getElement(VIS.Env.getCtx(), "DateOrdered"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: false,\n          render: function (record, index, col_index) {\n            var val;\n            if (record.changes == undefined || record.changes.DateOrdered == undefined) {\n              val = record["DateOrdered"];\n            } else {\n              val = record.changes.DateOrdered;\n            }\n            return new Date(val).toLocaleDateString();\n          }\n        });\n        //$self.arrListColumns.push({ field: "TotalLines", caption: VIS.Msg.getElement(VIS.Env.getCtx(), "TotalLines"), sortable: true, size: \'20%\', min: 150, hidden: false });\n\n        $self.arrListColumns.push({\n          field: "C_Order_ID",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "C_UOM_ID"),\n          sortable: true,\n          size: \'150px\',\n          hidden: true\n        });\n      }\n      setTimeout(10);\n      w2utils.encodeTags(data);\n      $self.dGrid = $($self.gridSelectDiv).w2grid({\n        name: "gridGenShipForm" + $self.windowNo,\n        recordHeight: 40,\n        show: {\n          selectColumn: true\n        },\n        multiSelect: true,\n        columns: $self.arrListColumns,\n        records: data\n      });\n    }\n\n    // Seacrh data\n    function executeQuery() {\n      var data = [];\n      var AD_Client_ID = VIS.Env.getCtx().getAD_Client_ID();\n      var mWarehouseID = "";\n      var cBPartnerID = "";\n      var cOrderIDSearch = "";\n      if (M_Warehouse_ID != null) {\n        if (M_Warehouse_ID.toString() != "-1") {\n          mWarehouseID = " AND ic.M_Warehouse_ID=" + M_Warehouse_ID;\n        }\n      }\n      if (C_BPartner_ID != null) {\n        cBPartnerID = " AND ic.C_BPartner_ID=" + C_BPartner_ID;\n      }\n      if (C_Order_IDSearch != null) {\n        cOrderIDSearch = " AND C_Order_ID=" + C_Order_IDSearch;\n      }\n\n      // set busy indecator\n      $($self.$root[0]).addClass("vis-apanel-busyVInOutGenRoot");\n      $($self.$busyDiv[0]).addClass("vis-apanel-busyVInOutGenBusyDiv");\n      $self.$busyDiv[0].style.visibility = "visible";\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCreateFrom/ExecuteQueryVinoutgen",\n        type: \'POST\',\n        //async: false,\n        data: {\n          adClientID: AD_Client_ID,\n          mWarehouseIDs: mWarehouseID,\n          cBPartnerIDs: cBPartnerID,\n          cOrderIDSearchs: cOrderIDSearch\n        },\n        success: function (res) {\n          var ress = JSON.parse(res);\n          if (ress && ress.length > 0) {\n            try {\n              var count = 1;\n              for (var i = 0; i < ress.length; i++) {\n                var line = {};\n                line[\'C_Order_ID\'] = ress[i].c_order_id, line[\'AD_Org_ID\'] = ress[i].ord, line[\'C_DocType_ID\'] = ress[i].doctype, line[\'DocumentNo\'] = VIS.Utility.encodeText(ress[i].documentno), line[\'C_BPartner_ID\'] = ress[i].bpname, line[\'DateOrdered\'] = ress[i].dateordered, line[\'recid\'] = count;\n                count++;\n                data.push(line);\n              }\n            } catch (e) {}\n          }\n          // JID_1110: done by Bharat on 27 Feb 2019 to disable Ok button when there in no data in the grid and On selection of order which is not shown in grid message "No Document found" should show.\n          else {\n            VIS.ADialog.info("NoDataFound");\n            $self.okBtn.attr(\'disabled\', \'disabled\');\n          }\n          dynInit(data);\n          // set busy indecator\n          $($self.$root[0]).removeClass("vis-apanel-busyVInOutGenRoot");\n          $($self.$busyDiv[0]).removeClass("vis-apanel-busyVInOutGenBusyDiv");\n          $self.$busyDiv[0].style.visibility = "hidden";\n        },\n        error: function (e) {\n          //$self.log.info(e);\n          // set busy indecator\n          $($self.$root[0]).removeClass("vis-apanel-busyVInOutGenRoot");\n          $($self.$busyDiv[0]).removeClass("vis-apanel-busyVInOutGenBusyDiv");\n          $self.$busyDiv[0].style.visibility = "hidden";\n        }\n      });\n    }\n\n    //function executeQuery() {\n    //    var data = [];\n    //    //C_Order_IDSearch = $self.vSearchOrder.getValue();\n    //    var AD_Client_ID = VIS.Env.getCtx().getAD_Client_ID();\n    //    //  Create SQL\n    //    var sql = (\n    //        "SELECT C_Order_ID, o.Name as ord, dt.Name as docType, DocumentNo, bp.Name as bpName, DateOrdered, TotalLines "\n    //        + "FROM M_InOut_Candidate_v ic, AD_Org o, C_BPartner bp, C_DocType dt "\n    //        + "WHERE ic.AD_Org_ID=o.AD_Org_ID"\n    //        + " AND ic.C_BPartner_ID=bp.C_BPartner_ID"\n    //        + " AND ic.C_DocType_ID=dt.C_DocType_ID"\n    //        + " AND ic.AD_Client_ID=" + AD_Client_ID);\n\n    //    if (M_Warehouse_ID != null) {\n    //        if (M_Warehouse_ID.toString() != "-1") {\n    //            sql = sql.concat(" AND ic.M_Warehouse_ID=").concat(M_Warehouse_ID);\n    //        }\n    //    }\n    //    if (C_BPartner_ID != null) {\n    //        sql = sql.concat(" AND ic.C_BPartner_ID=").concat(C_BPartner_ID);\n    //    }\n    //    if (C_Order_IDSearch != null) {\n    //        sql = sql.concat(" AND C_Order_ID=").concat(C_Order_IDSearch);\n    //    }\n    //    sql = sql.concat(" ORDER BY o.Name,bp.Name,DateOrdered");\n\n    //    try {\n    //        var dr = VIS.DB.executeReader(sql.toString(), null, null);\n    //        var count = 1;\n    //        while (dr.read()) {\n    //            var line = {};\n    //            line[\'C_Order_ID\'] = dr.getInt(0);\n    //            line[\'AD_Org_ID\'] = dr.getString(1);\n    //            line[\'C_DocType_ID\'] = dr.getString(2);\n    //            line[\'DocumentNo\'] = dr.getString(3);\n    //            line[\'C_BPartner_ID\'] = dr.getString(4);\n    //            line[\'DateOrdered\'] = dr.getString(5);\n    //            //line[\'TotalLines\'] = dr.getString(6);\n    //            line[\'recid\'] = count;\n    //            count++;\n    //            data.push(line);\n    //        }\n    //    }\n    //    catch (e) {\n    //    }\n    //    dynInit(data);\n\n    //    return data;\n    //}\n\n    function saveSelection() {\n      if ($self.dGrid == null) {\n        return false;\n      }\n      var results = [];\n      var selectedItems = $self.dGrid.getSelection();\n      if (selectedItems == null) {\n        return;\n      }\n      if (selectedItems.length <= 0) {\n        return;\n      }\n\n      //if ($self.cmbWarehouse.getControl().find(\'option:selected\').val() == undefined) {\n      //    VIS.ADialog.error("SelectWarehouseFirst");\n      //    return;\n      //}\n\n      var splitValue = selectedItems.toString().split(\',\');\n      for (var i = 0; i < splitValue.length; i++) {\n        results[i] = $self.dGrid.get(splitValue[i]).C_Order_ID; //($self.dGrid.get(splitValue[i]));// //  ID in column 0\n      }\n      if (results.length == 0) {\n        return "";\n      }\n\n      //\tQuery String\n      var keyColumn = "C_Order_ID";\n      var sb = keyColumn;\n      if (results.length > 1) {\n        sb = sb.concat(" IN (");\n      } else {\n        sb = sb.concat("=");\n      }\n      //\tAdd elements\n      for (var i = 0; i < results.length; i++) {\n        if (i > 0) {\n          sb = sb.concat(",");\n        }\n        if (keyColumn.endsWith("_ID")) {\n          sb = sb.concat(results[i].toString());\n        } else {\n          sb = sb.concat("\'").concat(results[i].toString());\n        }\n      }\n      if (results.length > 1) {\n        sb = sb.concat(")");\n      }\n      return sb.toString();\n    }\n    function generateShipments(whereClause) {\n      var obj = $self;\n      $self.$busyDiv[0].style.visibility = "visible";\n      $.ajax({\n        url: VIS.Application.contextUrl + "Common/GenerateShipments",\n        dataType: "json",\n        data: {\n          whereClause: whereClause,\n          M_Warehouse_ID: M_Warehouse_ID\n        },\n        success: function (data) {\n          if (data.DocumentText != null) {\n            //show Generate table with message\n            generatetab(true);\n            obj.gridGenerateDiv.html(data.DocumentText);\n            obj.lblStatusInfo.getControl().text(data.lblStatusInfo);\n          }\n          if (data.ErrorMsg != null) {\n            //show Message in pop up\n            VIS.ADialog.info("", null, data.ErrorMsg, null);\n          }\n          obj.$busyDiv[0].style.visibility = "hidden";\n          // set busy indecator\n          $($self.$root[0]).removeClass("vis-apanel-busyVInOutGenRoot");\n          $($self.$busyDiv[0]).removeClass("vis-apanel-busyVInOutGenBusyDiv");\n        },\n        error: function (e) {\n          obj.$busyDiv[0].style.visibility = "hidden";\n          // set busy indecator\n          $($self.$root[0]).removeClass("vis-apanel-busyVInOutGenRoot");\n          $($self.$busyDiv[0]).removeClass("vis-apanel-busyVInOutGenBusyDiv");\n        }\n      });\n    }\n    function generatetab(toggleside) {\n      if (toggleside) {\n        $self.btnRefresh.hide();\n        $self.okBtn.hide();\n        $self.btnToggel.animate({\n          borderSpacing: 0\n        }, {\n          step: function (now, fx) {\n            $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n            $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n            $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n          },\n          duration: \'slow\'\n        }, \'linear\');\n        toggleside = false;\n        $self.gridSelectDiv.animate({\n          width: selectDivWidth\n        }, "fast");\n        $self.sideDiv.animate({\n          width: \'toggle\',\n          height: \'toggle\'\n        }, "slow");\n      }\n      $self.gridSelectDiv.css("display", "none");\n      $self.sideDiv.css("display", "none");\n      $self.gridGenerateDiv.css("display", "block");\n      //$self.btnToggel.attr(\'disabled\', \'disabled\');\n      $self.btnToggel.hide();\n      lblSelect.css("font-size", "17px").css("color", "rgba(var(--v-c-on-secondary), 1)");\n      lblGenrate.css("font-size", "28px").css("color", "rgba(var(--v-c-primary), 1)");\n    }\n    this.vetoablechange = function (evt) {\n      C_BPartner_ID = $self.vSearchBPartner.getValue();\n      C_Order_IDSearch = $self.vSearchOrder.getValue();\n      $self.okBtn.removeAttr(\'disabled\');\n      executeQuery();\n    };\n    //size chnage \n    this.sizeChanged = function (h, w) {\n      selectDivWidth = w - (sideDivWidth + 20);\n      selectDivFullWidth = w - (20 + minSideWidth);\n      if (toggleside == true) {\n        $self.btnSpaceDiv.animate({\n          width: minSideWidth\n        }, "slow");\n        $self.sideDiv.animate({\n          width: minSideWidth\n        }, "slow");\n        $self.div.css("display", "none");\n        $self.gridSelectDiv.animate({\n          width: selectDivFullWidth\n        }, "slow", null, function () {\n          $self.dGrid.resize();\n        });\n      } else {\n        $self.btnSpaceDiv.animate({\n          width: sideDivWidth\n        }, "slow");\n        $self.gridSelectDiv.animate({\n          width: selectDivWidth\n        }, "slow");\n        $self.div.css("display", "block");\n        $self.sideDiv.animate({\n          width: sideDivWidth\n        }, "slow", null, function () {\n          $self.dGrid.resize();\n        });\n      }\n    };\n    this.Initialize = function () {\n      fillPicks();\n      jbInit();\n      initializeComponent();\n      this.btnToggel = this.$root.find("#btnSpace_" + $self.windowNo);\n      this.spnSelect = this.$root.find("#spnSelect_" + $self.windowNo);\n      this.spnGenerate = this.$root.find("#spnGenerate_" + $self.windowNo);\n      //display grid\n\n      if (this.okBtn != null) this.okBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        var getSelfOut = $self;\n\n        // JID_1289: Need to show message if warehouse is not selected. Message: "Warehouse is mandatory"\n        if ($self.cmbWarehouse.getControl().find(\'option:selected\').val() == undefined) {\n          VIS.ADialog.error("SelectWarehouseFirst");\n          return;\n        }\n        $self.$busyDiv[0].style.visibility = \'visible\';\n        // set busy indecator\n        $($self.$root[0]).addClass("vis-apanel-busyVInOutGenRoot");\n        $($self.$busyDiv[0]).addClass("vis-apanel-busyVInOutGenBusyDiv");\n        $self.okBtn.attr(\'disabled\', \'disabled\');\n        whereClause = saveSelection();\n        if (whereClause != null && whereClause.length > 0) {\n          generateShipments(whereClause);\n        } else {\n          // 16 May 2018 issue in google sheet having id SI_0611 assigned by puneet resolved by Manjot to stop busy indicator\n          VIS.ADialog.error("PlzSelectatLeast1Inv");\n          $self.$busyDiv[0].style.visibility = \'hidden\';\n        }\n        $self.okBtn.removeAttr(\'disabled\');\n        //  $self.$busyDiv[0].style.visibility = "hidden";\n      });\n      if (this.cancelBtn != null) this.cancelBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.$root.dialog(\'close\');\n      });\n      if (this.btnRefresh != null) this.btnRefresh.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.okBtn.removeAttr(\'disabled\');\n        M_Warehouse_ID = $self.cmbWarehouse.getControl().find(\'option:selected\').val();\n        C_BPartner_ID = $self.vSearchBPartner.getValue();\n        executeQuery();\n      });\n      if (this.btnToggel != null) this.btnToggel.on(VIS.Events.onTouchStartOrClick, function () {\n        var borderspace = 0;\n        if (toggleside) {\n          if (VIS.Application.isRTL) {\n            borderspace = 180;\n          } else {\n            borderspace = 0;\n          }\n          //$self.btnRefresh.hide();\n          $self.btnToggel.animate({\n            borderSpacing: borderspace\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = false;\n          $self.btnSpaceDiv.animate({\n            width: sideDivWidth\n          }, "slow");\n          $self.gridSelectDiv.animate({\n            width: selectDivWidth\n          }, "slow");\n          $self.div.css("display", "block");\n          $self.sideDiv.animate({\n            width: sideDivWidth\n          }, "slow", null, function () {\n            $self.dGrid.resize();\n          });\n        } else {\n          if (VIS.Application.isRTL) {\n            borderspace = 0;\n          } else {\n            borderspace = 180;\n          }\n          $self.btnToggel.animate({\n            borderSpacing: borderspace\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = true;\n          $self.btnSpaceDiv.animate({\n            width: minSideWidth\n          }, "slow");\n          $self.sideDiv.animate({\n            width: minSideWidth\n          }, "slow");\n          $self.div.css("display", "none");\n          $self.gridSelectDiv.animate({\n            width: selectDivFullWidth\n          }, "slow", null, function () {\n            $self.dGrid.resize();\n          });\n        }\n      });\n      if (this.spnGenerate != null) this.spnGenerate.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.btnRefresh.hide();\n        $self.okBtn.hide();\n        if (toggleside) {\n          $self.btnToggel.animate({\n            borderSpacing: 0\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = false;\n          $self.gridSelectDiv.animate({\n            width: selectDivWidth\n          }, "fast");\n          $self.sideDiv.animate({\n            width: sideDivWidth\n          }, "fast");\n          $self.btnSpaceDiv.animate({\n            width: sideDivWidth\n          }, "fast");\n        }\n        $self.gridSelectDiv.css("display", "none");\n        $self.sideDiv.css("display", "none");\n        $self.gridGenerateDiv.css("display", "block");\n        //$self.btnToggel.attr(\'disabled\', \'disabled\');\n        $self.btnToggel.hide();\n        lblSelect.css("font-size", "17px").css("color", "rgba(var(--v-c-on-secondary), 1)");\n        lblGenrate.css("font-size", "28px").css("color", "rgba(var(--v-c-primary), 1)");\n      });\n      if (this.spnSelect != null) this.spnSelect.on(VIS.Events.onTouchStartOrClick, function () {\n        if (!toggleside) {\n          $self.btnRefresh.show();\n          $self.okBtn.show();\n          $self.gridGenerateDiv.css("display", "none");\n          $self.gridSelectDiv.css("display", "block");\n          $self.sideDiv.css("display", "block");\n          $self.div.css("display", "block");\n          $self.gridSelectDiv.animate({\n            width: selectDivWidth\n          }, "fast");\n\n          //$self.btnToggel.removeAttr(\'disabled\');\n          $self.btnToggel.show();\n          lblSelect.css("font-size", "28px").css("color", "rgba(var(--v-c-primary), 1)");\n          lblGenrate.css("font-size", "17px").css("color", "rgba(var(--v-c-on-secondary), 1)");\n        }\n      });\n      if (this.cmbWarehouse != null) this.cmbWarehouse.getControl().change(function () {\n        $self.okBtn.removeAttr(\'disabled\');\n        M_Warehouse_ID = $self.cmbWarehouse.getControl().find(\'option:selected\').val();\n        executeQuery();\n      });\n      if (this.vSearchBPartner != null) this.vSearchBPartner.addVetoableChangeListener(this);\n      if (this.vSearchOrder != null) this.vSearchOrder.addVetoableChangeListener(this);\n      if (btnClearBP != null) {\n        btnClearBP.on(VIS.Events.onTouchStartOrClick, function () {\n          if ($self.vSearchBPartner.isReadOnly) return;\n          $self.vSearchBPartner.setValue(null, false, true);\n        });\n      }\n      if (btnClearOrd != null) {\n        btnClearOrd.on(VIS.Events.onTouchStartOrClick, function () {\n          if ($self.vSearchOrder.isReadOnly) return;\n          $self.vSearchOrder.setValue(null, false, true);\n        });\n      }\n    };\n    this.display = function () {\n      dynInit(null);\n    };\n\n    //Privilized function\n    this.getRoot = function () {\n      return this.$root;\n    };\n    this.refreshUI = function () {\n      /*Refresh Grid on Focus*/\n      this.dGrid.resize();\n    };\n    this.disposeComponent = function () {\n      if (this.okBtn) this.okBtn.off(VIS.Events.onTouchStartOrClick);\n      if (this.cancelBtn) this.cancelBtn.off(VIS.Events.onTouchStartOrClick);\n      if (btnClearBP) btnClearBP.off(VIS.Events.onTouchStartOrClick);\n      if (btnClearOrd) btnClearOrd.off(VIS.Events.onTouchStartOrClick);\n      $self = null;\n      this.frame = null;\n      this.windowNo = null;\n      this.arrListColumns = null;\n      this.dGrid = null;\n      whereClause = null;\n      M_Warehouse_ID = null;\n      C_BPartner_ID = null;\n      toggle = null;\n      toggleGen = null;\n      toggleside = null;\n      this.lblWarehouse = null;\n      this.lblBPartner = null;\n      this.lblStatusInfo = null;\n      this.tabSelect = null;\n      this.tabGenrate = null;\n      this.cmbWarehouse = null;\n      this.vSearchBPartner = null;\n      this.$root = null;\n      this.$busyDiv = null;\n      this.topDiv = null;\n      this.sideDiv = null;\n      this.gridSelectDiv = null;\n      this.gridGenerateDiv = null;\n      this.bottumDiv = null;\n      this.okBtn = null;\n      this.cancelBtn = null;\n      this.btnRefresh = null;\n      this.btnToggel = null;\n      this.spnSelect = null;\n      this.spnGenerate = null;\n      sideDivWidth = null;\n      selectDivWidth = null;\n      selectDivFullWidth = null;\n      selectDivToggelWidth = null;\n      sideDivHeight = null;\n      this.getRoot = null;\n      this.disposeComponent = null;\n    };\n  }\n  ;\n\n  //Must Implement with same parameter\n  VInOutGen.prototype.init = function (windowNo, frame) {\n    //Assign to this Varable\n    this.frame = frame;\n    this.windowNo = windowNo;\n    VIS.Env.getCtx().setContext(this.windowNo, "IsSOTrx", "Y");\n    try {\n      var obj = this.Initialize();\n    } catch (ex) {\n      //log.Log(Level.SEVERE, "init", ex);\n    }\n    this.frame.getContentGrid().append(this.getRoot());\n    this.display();\n    this.cmbWarehouse.getControl().focus();\n  };\n  VInOutGen.prototype.refresh = function () {\n    this.refreshUI();\n  };\n\n  //Must implement dispose\n  VInOutGen.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VIS.Apps.AForms.VInOutGen = VInOutGen;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vinoutgen.js?\n}')},"./Areas/VAS/Scripts/app/forms/vinvoicegen.js":()=>{eval('{;\n(function (VIS, $) {\n  VIS.Apps.AForms = VIS.Apps.AForms || {};\n  function VInvoiceGen() {\n    this.frame;\n    this.windowNo;\n    var $self = this;\n    this.arrListColumns = [];\n    this.dGrid = null;\n    var whereClause = null;\n    var AD_Org_ID = null;\n    var C_BPartner_ID = null;\n    var toggle = false;\n    var toggleGen = false;\n    var toggleside = false;\n    this.lblOrg = new VIS.Controls.VLabel();\n    this.lblBPartner = new VIS.Controls.VLabel();\n    this.lblStatusInfo = new VIS.Controls.VLabel();\n    this.tabSelect = new VIS.Controls.VLabel();\n    this.tabGenrate = new VIS.Controls.VLabel();\n    this.cmbOrg = new VIS.Controls.VComboBox(\'\', false, false, true);\n    this.vSearchBPartner = null;\n    this.vSearchOrderShipment = null;\n    var ordershipment_id = null;\n    this.$root = $("<div style=\'width: 100%; height: 100%; background-color: white;\'>");\n    this.$busyDiv = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n    this.topDiv = null;\n    this.sideDiv = null;\n    this.gridSelectDiv = null;\n    this.gridGenerateDiv = null;\n    this.bottumDiv = null;\n    this.div = null;\n    this.okBtn = null;\n    this.cancelBtn = null;\n    this.btnRefresh = null;\n    this.btnToggel = null;\n    this.spnSelect = null;\n    this.spnGenerate = null;\n    this.btnSpaceDiv = null;\n    this.lblGenrate = null;\n    this.lblSelect = null;\n    var btnClearBP = null;\n    var btnClearOrd = null;\n    var sideDivWidth = 260;\n    var minSideWidth = 50;\n    //window with-(sidediv with_margin from left+ space)\n    var selectDivWidth = $(window).width() - (sideDivWidth + 20 + 5);\n    var selectDivFullWidth = $(window).width() - (20 + minSideWidth);\n    var selectDivToggelWidth = selectDivWidth + sideDivWidth + 5;\n    var sideDivHeight = $(window).height() - 210;\n    function initializeComponent() {\n      var topDivId = "topDiv_" + $self.windowNo;\n      var btnSpaceDivId = "btnSpaceDiv_" + $self.windowNo;\n      var btnSpaceId = "btnSpace_" + $self.windowNo;\n      var spnSelectid = "spnSelect_" + $self.windowNo;\n      var spnGenerateid = "spnGenerate_" + $self.windowNo;\n      var lblGenerateid = "lblGenerate_" + $self.windowNo;\n      var lblSelectid = "lblSelect_" + $self.windowNo;\n\n      // JID_1110: Clear option required on Business partner and Docuemnt No. parameter.\n      //var imgInfo = VIS.Application.contextUrl + "Areas/VIS/Images/clear16.png";\n      btnClearBP = $(\'<button id = "btnClearBP_\' + $self.windowNo + \'" tabindex="-1" class="vis-controls-txtbtn-table-td2 input-group-text"><i class="fa fa-arrow-left" title="\' + VIS.Msg.getMsg("Clear", false, false) + \'"></i></button>\');\n      btnClearOrd = $(\'<button id = "btnClearOrd_\' + $self.windowNo + \'" tabindex="-1" class="vis-controls-txtbtn-table-td2 input-group-text"><i class="fa fa-arrow-left" title="\' + VIS.Msg.getMsg("Clear", false, false) + \'"></i></button>\');\n      var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/arrow-left.png";\n      $self.topDiv = $("<div id=\'" + topDivId + "\' class=\'vis-archive-l-s-head vis-frm-ls-top\' style=\'padding: 0;\'>" + "<div id=\'" + btnSpaceDivId + "\' class=\'vis-l-s-headwrp\'>" + "<button id=\'" + btnSpaceId + "\' class=\'vis-archive-sb-t-button\' ><i class=\'vis vis-arrow-left\'></i></button></div>" + "<div id=\'" + spnSelectid + "\'style=\'display: inline-block;  padding-left: 15px;margin-right: 15px;\' >" + "<label id=\'" + lblSelectid + "\' class=\'VIS_Pref_Label_Font\' style=\'vertical-align: middle;font-size: 28px;color: rgba(var(--v-c-primary), 1);\'>" + VIS.Msg.translate(VIS.Env.getCtx(), "Select") + "</label></div>" + "<div id=\'" + spnGenerateid + "\' style=\'display: inline-block; width: 160px;\'>" + "<label id=\'" + lblGenerateid + "\' class=\'VIS_Pref_Label_Font\' style=\'vertical-align: middle; font-size: 17px;\'>" + VIS.Msg.translate(VIS.Env.getCtx(), "Generate") + "</label></div></div>");\n      var sideDivId = "sideDiv_" + $self.windowNo;\n      var parameterDivId = "parameterDiv_" + $self.windowNo;\n      $self.btnSpaceDiv = $self.topDiv.find("#" + btnSpaceDivId);\n      this.lblGenrate = $self.topDiv.find("#" + lblGenerateid);\n      this.lblSelect = $self.topDiv.find("#" + lblSelectid);\n      $self.sideDiv = $("<div id=\'" + sideDivId + "\' class=\'vis-archive-l-s-content vis-leftsidebarouterwrap\'>");\n      $self.sideDiv.css("width", sideDivWidth);\n      //$self.sideDiv.css("height", sideDivHeight);\n      $self.sideDiv.css("height", "calc(100% - 103px)");\n      $self.div = $("<div class=\'vis-archive-l-s-content-inner\' id=\'" + parameterDivId + "\'>");\n      $self.sideDiv.append($self.div);\n      var tble = $("<table style=\'width: 100%;\'>");\n\n      //var tr = $("<tr>");\n      //var td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      $self.div.append(tble);\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.lblOrg.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 10px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append($self.cmbOrg.getControl());\n      Leftformfieldctrlwrp.append($self.lblOrg.getControl().addClass("VIS_Pref_Label_Font"));\n\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.lblBPartner.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      var Leftformfieldbtnwrap = $(\'<div class="input-group-append">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      // var ctrl = $("<div style=\'float: left; width: 100%;\' class=\'VIS_Pref_slide-show pp\'>");\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      Leftformfieldctrlwrp.append($self.vSearchBPartner.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n      Leftformfieldbtnwrap.append($self.vSearchBPartner.getBtn(0));\n      Leftformfieldbtnwrap.append(btnClearBP);\n      Leftformfieldctrlwrp.append($self.lblBPartner.getControl().addClass("VIS_Pref_Label_Font"));\n      Leftformfieldwrp.append(Leftformfieldbtnwrap);\n\n      //JID_1109: Top tip required on Document No. field ie Sales Order/Customer RMA.\n      var OrderShipmentNo = VIS.Msg.translate(VIS.Env.getCtx(), "DocumentNo");\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\' title=\' " + VIS.Msg.getMsg("SalesOrderNo", false, false) + "\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append(OrderShipmentNo);\n\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      var Leftformfieldbtnwrap = $(\'<div class="input-group-append">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      // var ctrl = $("<div style=\'float: left; width: 100%;\' class=\'VIS_Pref_slide-show pp\'>");\n      //ctrl.removeClass("VIS_Pref_slide-show pp");\n      Leftformfieldctrlwrp.append($self.vSearchOrderShipment.getControl(0).attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n      Leftformfieldbtnwrap.append($self.vSearchOrderShipment.getBtn(0));\n      Leftformfieldbtnwrap.append(btnClearOrd);\n      Leftformfieldctrlwrp.append(\'<label>\' + OrderShipmentNo + \'</label>\');\n      Leftformfieldwrp.append(Leftformfieldbtnwrap);\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;font-size:12px;\'>");\n      tble.append(tr);\n      tr.append(td);\n      td.append("(" + VIS.Msg.getMsg("SalesOrderNo", false, false) + ")");\n\n      //===============================\n\n      var gridSelectDivId = "gridSelectDiv_" + $self.windowNo;\n      var gridGenerateDivId = "gridGenerateDiv_" + $self.windowNo;\n      $self.gridSelectDiv = $("<div id=\'" + gridSelectDivId + "\' class=\'vis-frm-grid-outerwrp\'>");\n      //$self.gridSelectDiv.css("width", selectDivWidth);\n      //$self.gridSelectDiv.css("height", sideDivHeight);\n\n      $self.gridGenerateDiv = $("<div id=\'" + gridGenerateDivId + "\' style=\'height: 85%; float: right; display: none; background-color: #F1F1F1; margin-left: 15px;;margin-right: 15px;\'>");\n      $self.gridGenerateDiv.css("width", $(window).width() - 30);\n      var name = "btnOk_" + $self.windowNo;\n      $self.okBtn = $("<input id=\'" + name + "\' class=\'VIS_Pref_btn-2\' style=\'margin-top: 0px; float: right;width: 70px;height: 38px;\' type=\'button\' value=\'Ok\'>");\n\n      //name = "btnCancel_" + $self.windowNo;\n      //$self.cancelBtn = $("<input id=\'" + name + "\' class=\'VIS_Pref_btn-2\' style=\'margin-bottom: 0px; margin-top: 6px; float: right;margin-right: 4px;\' type=\'button\' value=\'Cancel\'>");\n\n      name = "btnRefresh_" + $self.windowNo;\n      var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/Refresh24.png";\n      $self.btnRefresh = $("<button id=\'" + name + "\' style=\'margin-top: 0px; float: left;height: 38px; \' class=\'VIS_Pref_btn-2\'>" + "<i class=\'vis vis-refresh\'></i></button>");\n      var discriptionDivId = "discriptionDiv_" + $self.windowNo;\n      $self.bottumDiv = $("<div class=\'vis-info-btmcnt-wrap vis-p-t-10\'>");\n      var mdg = $("<div id=\'" + discriptionDivId + "\' style=\'flex: 1;padding: 0 10px;\'>");\n      mdg.append($self.lblStatusInfo.getControl().addClass("VIS_Pref_Label_Font"));\n      var buttonDiv = $("<div>");\n      //buttonDiv.append($self.cancelBtn);\n      buttonDiv.append($self.okBtn);\n      $self.bottumDiv.append($self.btnRefresh).append(mdg).append(buttonDiv);\n\n      //Add to root\n      $self.$root.append($self.$busyDiv);\n      $self.$busyDiv[0].style.visibility = "hidden";\n      $self.$root.append($self.topDiv).append($self.sideDiv).append($self.gridSelectDiv).append($self.gridGenerateDiv).append($self.bottumDiv);\n    }\n    function jbInit() {\n      $self.lblOrg.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "AD_Org_ID"));\n      $self.lblBPartner.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "C_BPartner_ID"));\n      $self.tabSelect.getControl().text(VIS.Msg.getMsg("Select", false, false));\n      $self.tabGenrate.getControl().text(VIS.Msg.getMsg("Generate", false, false));\n      //Changed Msg By Pratap - 4/12/15 \n      //$self.lblStatusInfo.getControl().text(VIS.Msg.getMsg("InvGenerateSel", false, false));\n      $self.lblStatusInfo.getControl().text(VIS.Msg.getMsg("VIS_OrderGenInv", false, false));\n    }\n    function fillPicks() {\n      //var lookup = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 2163, VIS.DisplayType.TableDir);\n\n      // JID_0783: InActive Organizations should not be available to select at Generate Invoice Manual form\n      var lookup = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 2163, VIS.DisplayType.TableDir, "AD_Org_ID", 0, false, "AD_Org.AD_Org_ID <> 0 AND AD_Org.IsSummary=\'N\' AND AD_Org.IsActive=\'Y\' AND AD_Org.IsCostCenter=\'N\' AND AD_Org.IsProfitCenter=\'N\' ");\n      $self.cmbOrg = new VIS.Controls.VComboBox("AD_Org_ID", true, false, true, lookup, 150, VIS.DisplayType.TableDir, 0);\n\n      // VIS0060: Data was not coming in Business Partner Pop Up\n      var value = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 2762, VIS.DisplayType.Search, "C_BPartner_ID", 0, false, "C_BPartner.IsActive =\'Y\' And C_Bpartner.Issummary =\'N\'");\n      $self.vSearchBPartner = new VIS.Controls.VTextBoxButton("C_BPartner_ID", true, false, true, VIS.DisplayType.Search, value, 0);\n\n      // var orderShipmentvalue = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 2161, VIS.DisplayType.Search);\n      var orderShipmentvalue = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 2161, VIS.DisplayType.Search, "C_Order_ID", 0, false, "DocStatus=\'CO\'");\n      $self.vSearchOrderShipment = new VIS.Controls.VTextBoxButton("C_Order_ID", true, false, true, VIS.DisplayType.Search, orderShipmentvalue, 0);\n      //var orderShipmentvalue = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 3521, VIS.DisplayType.Search);\n      //$self.vSearchOrderShipment = new VIS.Controls.VTextBoxButton("M_InOut_ID", true, false, true, VIS.DisplayType.Search, orderShipmentvalue);\n\n      //vSearchOrderShipment\n    }\n    function dynInit(data) {\n      if ($self.dGrid != null) {\n        $self.dGrid.destroy();\n        $self.dGrid = null;\n      }\n      if ($self.arrListColumns.length == 0) {\n        // this.arrListColumns.push({ field: "Select", caption: VIS.Msg.getMsg("Select"), sortable: true, size: \'50px\', hidden: false });\n        $self.arrListColumns.push({\n          field: "AD_Org_ID",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "AD_Org_ID"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "C_DocType_ID",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "C_DocType_ID"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "DocumentNo",\n          caption: VIS.Msg.getElement(VIS.Env.getCtx(), "DocumentNo"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "C_BPartner_ID",\n          caption: VIS.Msg.getElement(VIS.Env.getCtx(), "C_BPartner_ID"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "DateOrdered",\n          caption: VIS.Msg.getElement(VIS.Env.getCtx(), "DateOrdered"),\n          sortable: true,\n          size: \'16%\',\n          min: 150,\n          hidden: false,\n          render: function (record, index, col_index) {\n            var val;\n            if (record.changes == undefined || record.changes.DateOrdered == undefined) {\n              val = record["DateOrdered"];\n            } else {\n              val = record.changes.DateOrdered;\n            }\n            return new Date(val).toLocaleDateString();\n          }\n        });\n        $self.arrListColumns.push({\n          field: "TotalLines",\n          caption: VIS.Msg.getElement(VIS.Env.getCtx(), "TotalLines"),\n          sortable: true,\n          size: \'20%\',\n          min: 150,\n          hidden: false,\n          align: \'right\',\n          render: function (record, index, col_index) {\n            var val = record["TotalLines"];\n            return parseFloat(val).toLocaleString();\n          }\n        });\n        $self.arrListColumns.push({\n          field: "C_Order_ID",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "C_UOM_ID"),\n          sortable: true,\n          size: \'150px\',\n          hidden: true\n        });\n      }\n      w2utils.encodeTags(data);\n      $self.dGrid = $($self.gridSelectDiv).w2grid({\n        name: "gridGenForm" + $self.windowNo,\n        recordHeight: 40,\n        show: {\n          selectColumn: true\n        },\n        multiSelect: true,\n        columns: $self.arrListColumns,\n        records: data\n      });\n    }\n\n    // search data\n    function executeQuery() {\n      var data = [];\n      var AD_Client_ID = VIS.Env.getCtx().getAD_Client_ID();\n      var adOrgID = "";\n      var cBPartnerID = "";\n      var ordShipmentid = "";\n      if (AD_Org_ID != null) {\n        if (AD_Org_ID.toString() != "-1") {\n          adOrgID = " AND ic.AD_Org_ID=" + AD_Org_ID;\n        }\n      }\n      if (C_BPartner_ID != null) {\n        cBPartnerID = " AND ic.C_BPartner_ID=" + C_BPartner_ID;\n      }\n      if (ordershipment_id != null) {\n        ordShipmentid = " AND C_Order_ID=" + ordershipment_id;\n      }\n      // set busy indegator\n      $($self.$root[0]).addClass("vis-apanel-busyVInOutGenRoot");\n      $($self.$busyDiv[0]).addClass("vis-apanel-busyVInOutGenBusyDiv");\n      $self.$busyDiv[0].style.visibility = "visible";\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCreateFrom/ExecuteQueryVInvoiceGen",\n        type: \'POST\',\n        //async: false,\n        data: {\n          adClientID: AD_Client_ID,\n          adOrgIDs: adOrgID,\n          cBPartnerIDs: cBPartnerID,\n          ordShipmentids: ordShipmentid\n        },\n        success: function (res) {\n          var ress = JSON.parse(res);\n          if (ress && ress.length > 0) {\n            try {\n              var count = 1;\n              for (var i = 0; i < ress.length; i++) {\n                var line = {};\n                line[\'C_Order_ID\'] = ress[i].c_order_id, line[\'AD_Org_ID\'] = ress[i].ord, line[\'C_DocType_ID\'] = ress[i].doctype, line[\'DocumentNo\'] = ress[i].documentno, line[\'C_BPartner_ID\'] = ress[i].bpname, line[\'DateOrdered\'] = ress[i].dateordered, line[\'TotalLines\'] = ress[i].tLines, line[\'recid\'] = count;\n                count++;\n                data.push(line);\n              }\n            } catch (e) {}\n          } // JID_1110: done by Bharat on 04 Feb 2019 to disable Ok button when there in no data in the grid\n          else {\n            VIS.ADialog.info("NoDataFound");\n            $self.okBtn.attr(\'disabled\', \'disabled\');\n          }\n          dynInit(data);\n          // set busy indegator\n          $($self.$root[0]).removeClass("vis-apanel-busyVInOutGenRoot");\n          $($self.$busyDiv[0]).removeClass("vis-apanel-busyVInOutGenBusyDiv");\n          $self.$busyDiv[0].style.visibility = "hidden";\n        },\n        error: function (e) {\n          //$self.log.info(e);\n          // set busy indegator\n          $($self.$root[0]).removeClass("vis-apanel-busyVInOutGenRoot");\n          $($self.$busyDiv[0]).removeClass("vis-apanel-busyVInOutGenBusyDiv");\n          $self.$busyDiv[0].style.visibility = "hidden";\n        }\n      });\n\n      //return data;\n    }\n\n    //function executeQuery() {\n    //    var data = [];\n\n    //    var AD_Client_ID = VIS.Env.getCtx().getAD_Client_ID();\n    //    //  Create SQL\n    //    var sql = (\n    //        "SELECT C_Order_ID, o.Name as ord, dt.Name as docType, DocumentNo, bp.Name as bpName, DateOrdered, TotalLines "\n    //        + "FROM C_Invoice_Candidate_v ic, AD_Org o, C_BPartner bp, C_DocType dt "\n    //        + "WHERE ic.AD_Org_ID=o.AD_Org_ID"\n    //        + " AND ic.C_BPartner_ID=bp.C_BPartner_ID"\n    //        + " AND ic.C_DocType_ID=dt.C_DocType_ID"\n    //        + " AND ic.AD_Client_ID=" + AD_Client_ID);\n\n    //    if (AD_Org_ID != null) {\n    //        if (AD_Org_ID.toString() != "-1") {\n    //            sql = sql.concat(" AND ic.AD_Org_ID=").concat(AD_Org_ID);\n    //        }\n    //    }\n    //    if (C_BPartner_ID != null) {\n    //        sql = sql.concat(" AND ic.C_BPartner_ID=").concat(C_BPartner_ID);\n    //    }\n    //    if (ordershipment_id != null)\n    //    {\n    //        sql = sql.concat(" AND C_Order_ID=").concat(ordershipment_id);\n    //    }\n    //    sql = sql.concat(" ORDER BY o.Name,bp.Name,DateOrdered");\n\n    //    try {\n    //        var dr = VIS.DB.executeReader(sql.toString(), null, null);\n    //        var count = 1;\n    //        while (dr.read()) {\n    //            var line = {};\n    //            line[\'C_Order_ID\'] = dr.getInt(0);\n    //            line[\'AD_Org_ID\'] = dr.getString(1);\n    //            line[\'C_DocType_ID\'] = dr.getString(2);\n    //            line[\'DocumentNo\'] = dr.getString(3);\n    //            line[\'C_BPartner_ID\'] = dr.getString(4);\n    //            line[\'DateOrdered\'] = dr.getString(5);\n    //            line[\'TotalLines\'] = dr.getString(6);\n    //            line[\'recid\'] = count;\n    //            count++;\n    //            data.push(line);\n    //        }\n    //    }\n    //    catch (e) {\n    //    }\n    //    dynInit(data);\n\n    //    return data;\n    //}\n\n    function saveSelection() {\n      if ($self.dGrid == null) {\n        return false;\n      }\n      var results = [];\n      var selectedItems = $self.dGrid.getSelection();\n      if (selectedItems == null) {\n        return;\n      }\n      if (selectedItems.length <= 0) {\n        return;\n      }\n      var splitValue = selectedItems.toString().split(\',\');\n      //Changes done for invoice generation when multiple users generate the invoices at the same time. 02-May-18\n      for (var i = 0; i < splitValue.length; i++) {\n        results[i] = $self.dGrid.get(splitValue[i]).C_Order_ID;\n      }\n      if (results.length == 0) {\n        return "";\n      }\n\n      //\tQuery String\n      //var keyColumn = "C_Order_ID";\n      var sb = "";\n      //var sb = keyColumn;\n      //if (results.length > 1) {\n      //    sb = sb.concat(" IN (");\n      //}\n      //else {\n      //    sb = sb.concat("=");\n      //}\n      //\tAdd elements\n      for (var i = 0; i < results.length; i++) {\n        if (i > 0) {\n          sb = sb.concat(",");\n        }\n        //if (keyColumn.endsWith("_ID")) {\n        //    sb = sb.concat(results[i].toString());\n        //}\n        //else {\n        //sb = sb.concat("\'").concat(results[i].toString());\n        sb = sb.concat(results[i].toString());\n        //}\n      }\n\n      //if (results.length > 1) {\n      //    sb = sb.concat(")");\n      //}\n\n      //End Changes done for invoice generation when multiple users generate the invoices at the same time. 02-May-18\n      return sb.toString();\n    }\n    function generateInvoices(whereClause) {\n      var obj = $self;\n      $self.$busyDiv[0].style.visibility = "visible";\n      $.ajax({\n        url: VIS.Application.contextUrl + "Common/GenerateInvoices",\n        dataType: "json",\n        data: {\n          whereClause: whereClause\n        },\n        success: function (data) {\n          if (data.DocumentText != null) {\n            //show Generate table with message\n            generatetab(true);\n            obj.gridGenerateDiv.html(data.DocumentText);\n            obj.lblStatusInfo.getControl().text(data.lblStatusInfo);\n          }\n          if (data.ErrorMsg != null) {\n            //show Message in pop up\n            VIS.ADialog.info("", null, data.ErrorMsg, null);\n          }\n          obj.$busyDiv[0].style.visibility = "hidden";\n\n          // set busy indegator\n          $($self.$root[0]).removeClass("vis-apanel-busyVInOutGenRoot");\n          $($self.$busyDiv[0]).removeClass("vis-apanel-busyVInOutGenBusyDiv");\n        },\n        error: function (e) {\n          obj.$busyDiv[0].style.visibility = "hidden";\n          // set busy indegator\n          $($self.$root[0]).removeClass("vis-apanel-busyVInOutGenRoot");\n          $($self.$busyDiv[0]).removeClass("vis-apanel-busyVInOutGenBusyDiv");\n        }\n      });\n    }\n    function generatetab(toggleside) {\n      if (toggleside) {\n        $self.btnRefresh.hide();\n        $self.okBtn.hide();\n        $self.btnToggel.animate({\n          borderSpacing: 0\n        }, {\n          step: function (now, fx) {\n            $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n            $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n            $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n          },\n          duration: \'slow\'\n        }, \'linear\');\n        toggleside = false;\n        $self.gridSelectDiv.animate({\n          width: selectDivWidth\n        }, "fast");\n        $self.sideDiv.animate({\n          width: \'toggle\',\n          height: \'toggle\'\n        }, "slow");\n      }\n      $self.gridSelectDiv.css("display", "none");\n      $self.sideDiv.css("display", "none");\n      $self.gridGenerateDiv.css("display", "block");\n      //$self.btnToggel.attr(\'disabled\', \'disabled\');\n      $self.btnToggel.hide();\n      lblSelect.css("font-size", "17px").css("color", "rgba(var(--v-c-on-secondary),1)");\n      lblGenrate.css("font-size", "28px").css("color", "rgba(var(--v-c-primary), 1)");\n    }\n    this.vetoablechange = function (evt) {\n      C_BPartner_ID = $self.vSearchBPartner.getValue();\n      ordershipment_id = $self.vSearchOrderShipment.getValue();\n      $self.okBtn.removeAttr(\'disabled\');\n      executeQuery();\n    };\n\n    //size chnage \n    this.sizeChanged = function (h, w) {\n      selectDivWidth = w - (sideDivWidth + 20);\n      selectDivFullWidth = w - (20 + minSideWidth);\n      if (toggleside == true) {\n        $self.btnSpaceDiv.animate({\n          width: minSideWidth\n        }, "slow");\n        $self.sideDiv.animate({\n          width: minSideWidth\n        }, "slow");\n        $self.div.css("display", "none");\n        $self.gridSelectDiv.animate({\n          width: selectDivFullWidth\n        }, "slow", null, function () {\n          $self.dGrid.resize();\n        });\n      } else {\n        $self.btnSpaceDiv.animate({\n          width: sideDivWidth\n        }, "slow");\n        $self.gridSelectDiv.animate({\n          width: selectDivWidth\n        }, "slow");\n        $self.div.css("display", "block");\n        $self.sideDiv.animate({\n          width: sideDivWidth\n        }, "slow", null, function () {\n          $self.dGrid.resize();\n        });\n      }\n    };\n    this.Initialize = function () {\n      fillPicks();\n      jbInit();\n      initializeComponent();\n      this.btnToggel = this.$root.find("#btnSpace_" + $self.windowNo);\n      this.spnSelect = this.$root.find("#spnSelect_" + $self.windowNo);\n      this.spnGenerate = this.$root.find("#spnGenerate_" + $self.windowNo);\n      //display grid\n\n      //Events\n\n      if (this.okBtn != null) this.okBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.$busyDiv[0].style.visibility = \'visible\';\n        // set busy indegator\n        $($self.$root[0]).addClass("vis-apanel-busyVInOutGenRoot");\n        $($self.$busyDiv[0]).addClass("vis-apanel-busyVInOutGenBusyDiv");\n        $self.okBtn.attr(\'disabled\', \'disabled\');\n        whereClause = saveSelection();\n        if (whereClause != null && whereClause.length > 0) {\n          generateInvoices(whereClause);\n        } else {\n          // show msg if user didn\'t selected any order\n          $self.$busyDiv[0].style.visibility = \'hidden\';\n          VIS.ADialog.error("PlzSelectatLeast1Inv");\n        }\n        $self.okBtn.removeAttr(\'disabled\');\n        // $self.$busyDiv[0].style.visibility = "hidden";\n      });\n      if (this.cancelBtn != null) this.cancelBtn.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.$root.dialog(\'close\');\n      });\n      if (this.btnRefresh != null) this.btnRefresh.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.okBtn.removeAttr(\'disabled\');\n        AD_Org_ID = $self.cmbOrg.getControl().find(\'option:selected\').val();\n        C_BPartner_ID = $self.vSearchBPartner.getValue();\n        executeQuery();\n      });\n      if (this.btnToggel != null) var borderspace = 0;\n      this.btnToggel.on(VIS.Events.onTouchStartOrClick, function () {\n        if (toggleside) {\n          if (VIS.Application.isRTL) {\n            borderspace = 180;\n          } else {\n            borderspace = 0;\n          }\n          $self.btnToggel.animate({\n            borderSpacing: borderspace\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = false;\n          $self.btnSpaceDiv.animate({\n            width: sideDivWidth\n          }, "slow");\n          $self.gridSelectDiv.animate({\n            width: selectDivWidth\n          }, "slow");\n          $self.div.css("display", "block");\n          $self.sideDiv.animate({\n            width: sideDivWidth\n          }, "slow", null, function () {\n            $self.dGrid.resize();\n          });\n        } else {\n          if (VIS.Application.isRTL) {\n            borderspace = 0;\n          } else {\n            borderspace = 180;\n          }\n          $self.btnToggel.animate({\n            borderSpacing: borderspace\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = true;\n          $self.btnSpaceDiv.animate({\n            width: minSideWidth\n          }, "slow");\n          $self.sideDiv.animate({\n            width: minSideWidth\n          }, "slow");\n          $self.div.css("display", "none");\n          $self.gridSelectDiv.animate({\n            width: selectDivFullWidth\n          }, "slow", null, function () {\n            $self.dGrid.resize();\n          });\n        }\n      });\n      if (this.spnGenerate != null) this.spnGenerate.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.btnRefresh.hide();\n        $self.okBtn.hide();\n        if (toggleside) {\n          $self.btnToggel.animate({\n            borderSpacing: 0\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = false;\n          $self.gridSelectDiv.animate({\n            width: selectDivWidth\n          }, "fast");\n          $self.sideDiv.animate({\n            width: sideDivWidth\n          }, "fast");\n          $self.btnSpaceDiv.animate({\n            width: sideDivWidth\n          }, "fast");\n        }\n        $self.gridSelectDiv.css("display", "none");\n        $self.sideDiv.css("display", "none");\n        $self.gridGenerateDiv.css("display", "block");\n        //$self.btnToggel.attr(\'disabled\', \'disabled\');\n        $self.btnToggel.hide();\n        lblSelect.css("font-size", "17px").css("color", "rgba(var(--v-c-on-secondary),1)");\n        lblGenrate.css("font-size", "28px").css("color", "rgba(var(--v-c-primary), 1)");\n      });\n      if (this.spnSelect != null) this.spnSelect.on(VIS.Events.onTouchStartOrClick, function () {\n        if (!toggleside) {\n          $self.btnRefresh.show();\n          $self.okBtn.show();\n          $self.gridGenerateDiv.css("display", "none");\n          $self.gridSelectDiv.css("display", "block");\n          $self.sideDiv.css("display", "block");\n          $self.div.css("display", "block");\n          $self.gridSelectDiv.animate({\n            width: selectDivWidth\n          }, "fast");\n\n          //$self.btnToggel.removeAttr(\'disabled\');\n          $self.btnToggel.show();\n          lblSelect.css("font-size", "28px").css("color", "rgba(var(--v-c-primary), 1)");\n          lblGenrate.css("font-size", "17px").css("color", "rgba(var(--v-c-on-secondary),1)");\n        }\n      });\n      if (this.cmbOrg != null) this.cmbOrg.getControl().change(function () {\n        $self.okBtn.removeAttr(\'disabled\');\n        AD_Org_ID = $self.cmbOrg.getControl().find(\'option:selected\').val();\n        executeQuery();\n      });\n      if (this.vSearchBPartner != null) this.vSearchBPartner.addVetoableChangeListener(this);\n      if (this.vSearchOrderShipment != null) this.vSearchOrderShipment.addVetoableChangeListener(this);\n      if (btnClearBP != null) {\n        btnClearBP.on(VIS.Events.onTouchStartOrClick, function () {\n          if ($self.vSearchBPartner.isReadOnly) return;\n          $self.vSearchBPartner.setValue(null, false, true);\n        });\n      }\n      if (btnClearOrd != null) {\n        btnClearOrd.on(VIS.Events.onTouchStartOrClick, function () {\n          if ($self.vSearchOrderShipment.isReadOnly) return;\n          $self.vSearchOrderShipment.setValue(null, false, true);\n        });\n      }\n    };\n    this.display = function () {\n      dynInit(null);\n    };\n\n    //Privilized function\n    this.getRoot = function () {\n      return this.$root;\n    };\n    this.refreshUI = function () {\n      /*Refresh Grid on Focus*/\n      this.dGrid.resize();\n    };\n    this.disposeComponent = function () {\n      if (this.okBtn) this.okBtn.off(VIS.Events.onTouchStartOrClick);\n      if (this.cancelBtn) this.cancelBtn.off(VIS.Events.onTouchStartOrClick);\n      if (btnClearBP) btnClearBP.off(VIS.Events.onTouchStartOrClick);\n      if (btnClearOrd) btnClearOrd.off(VIS.Events.onTouchStartOrClick);\n      $self = null;\n      this.frame = null;\n      this.windowNo = null;\n      this.arrListColumns = null;\n      this.dGrid = null;\n      whereClause = null;\n      AD_Org_ID = null;\n      C_BPartner_ID = null;\n      toggle = null;\n      toggleGen = null;\n      toggleside = null;\n      this.lblOrg = null;\n      this.lblBPartner = null;\n      this.lblStatusInfo = null;\n      this.tabSelect = null;\n      this.tabGenrate = null;\n      this.cmbOrg = null;\n      this.vSearchBPartner = null;\n      this.$root = null;\n      this.$busyDiv = null;\n      this.topDiv = null;\n      this.sideDiv = null;\n      this.gridSelectDiv = null;\n      this.gridGenerateDiv = null;\n      this.bottumDiv = null;\n      this.okBtn = null;\n      this.cancelBtn = null;\n      this.btnRefresh = null;\n      this.btnToggel = null;\n      this.spnSelect = null;\n      this.spnGenerate = null;\n      sideDivWidth = null;\n      selectDivWidth = null;\n      selectDivFullWidth = null;\n      selectDivToggelWidth = null;\n      sideDivHeight = null;\n      this.getRoot = null;\n      this.disposeComponent = null;\n    };\n  }\n  ;\n\n  //Must Implement with same parameter\n  VInvoiceGen.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.windowNo = windowNo;\n    VIS.Env.getCtx().setContext(this.windowNo, "IsSOTrx", "Y");\n    try {\n      var obj = this.Initialize();\n    } catch (ex) {\n      //log.Log(Level.SEVERE, "init", ex);\n    }\n    this.frame.getContentGrid().append(this.getRoot());\n    this.display();\n    this.cmbOrg.getControl().focus();\n  };\n  VInvoiceGen.prototype.refresh = function () {\n    this.refreshUI();\n  };\n\n  //Must implement dispose\n  VInvoiceGen.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VIS.Apps.AForms.VInvoiceGen = VInvoiceGen;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vinvoicegen.js?\n}')},"./Areas/VAS/Scripts/app/forms/vmatch.js":()=>{eval('{;\n(function (VIS, $) {\n  VIS.Apps.AForms = VIS.Apps.AForms || {};\n  function VMatch() {\n    this.frame;\n    this.windowNo;\n    var $self = this;\n    this.arrListColumns = [];\n    this.vdgvInvoice = null;\n    this.vdgvReceipt = null;\n    this.lblMatchFrom = new VIS.Controls.VLabel();\n    this.lblMatchTo = new VIS.Controls.VLabel();\n    this.lblMatchMode = new VIS.Controls.VLabel();\n    this.lblBPartner = new VIS.Controls.VLabel();\n    this.lblProduct = new VIS.Controls.VLabel();\n    this.lblDateFrom = new VIS.Controls.VLabel();\n    this.lblDateTo = new VIS.Controls.VLabel();\n    this.lblInvoice = new VIS.Controls.VLabel();\n    this.lblReceipt = new VIS.Controls.VLabel();\n    this.lblMatched = new VIS.Controls.VLabel();\n    this.lblMatchedTo = new VIS.Controls.VLabel();\n    this.lblDifference = new VIS.Controls.VLabel();\n    this.lblStatusInfo = new VIS.Controls.VLabel();\n    this.lblStatusCount = new VIS.Controls.VLabel();\n    this.lblSearch = new VIS.Controls.VLabel();\n    this.cmbMatchFrom = new VIS.Controls.VComboBox(\'\', false, false, true);\n    this.cmbMatchTo = new VIS.Controls.VComboBox(\'\', false, false, true);\n    this.cmbMatchMode = new VIS.Controls.VComboBox(\'\', false, false, true);\n    this.chkIsReturnTrx = null;\n    this.chkSameBPartner = null;\n    this.chkSameProduct = null;\n    this.chkSameQty = null;\n    this.onlyVendor = null;\n    this.onlyProduct = null;\n    this.dtpFrom = null;\n    this.dtpTo = null;\n    this.btnSearch = null;\n    this.btnProcess = null;\n    this.btnToggel = null;\n    this.txtMatched = new VIS.Controls.VTextBox("", false, true, false);\n    this.txtMatchedTo = new VIS.Controls.VTextBox("", false, true, false);\n    this.txtDifference = new VIS.Controls.VTextBox("", false, true, false);\n    this.$root = $("<div style=\'width: 100%; height: 100%; background-color: white;\'>");\n    this.$busyDiv = $("<div id=\'testBesy\' class=\'vis-busyindicatorouterwrap\'><div class=\'vis-busyindicatorinnerwrap\'><i class=\'vis-busyindicatordiv\'></i></div></div>");\n    this.sideDiv = null;\n    this.gridSelectDiv = null;\n    this.gridInvoiceDiv = null;\n    this.gridReciptDiv = null;\n    this.processlDiv = null;\n    this.bottumDiv = null;\n    this.bottumButtonDiv = null;\n    this.btnSpaceDiv = null;\n    this.topDiv = null;\n    this.div = null;\n    this.divForGrid = null;\n    this.invoicegrd = null;\n    this.reciptgrd = null;\n    this.invoiceTopDiv = null;\n    var toggleside = false;\n    var sideDivWidth = 260;\n    var minSideWidth = 50;\n    //window with-(sidediv with_margin from left+ space)\n    var selectDivWidth = $(window).width() - sideDivWidth;\n    var selectDivFullWidth = $(window).width() - minSideWidth;\n    var selectDivHeight = $(window).height() - 240;\n    var _AD_Client_ID = VIS.Env.getCtx().getAD_Client_ID();\n    var _AD_Org_ID = VIS.Env.getCtx().getAD_Org_ID();\n    var _by = VIS.Env.getCtx().getAD_User_ID();\n    var MATCH_INVOICE = 0;\n    var MATCH_SHIPMENT = 1;\n    var MATCH_ORDER = 2;\n    var MODE_NOTMATCHED = 0;\n    var MODE_MATCHED = 1;\n    var _sql = null;\n    var _dateColumn = "";\n    var _qtyColumn = "";\n    var _groupBy = "";\n    var _xMatched = 0;\n    var _xMatchedTo = 0;\n    var _match_ID = "";\n    var btnClearBP = null;\n    var btnClearPrd = null;\n\n    // Added by Bharat on 20 July 2017 to restrict multiclick issue\n    var isProcess = false;\n    //Match Options  \n    var _matchOptions = [];\n    _matchOptions.push(VIS.Msg.getElement3(VIS.Env.getAD_Language(VIS.Env.getCtx()), "C_Invoice_ID", false));\n    _matchOptions.push(VIS.Msg.getElement3(VIS.Env.getAD_Language(VIS.Env.getCtx()), "M_InOut_ID", false));\n    _matchOptions.push(VIS.Msg.getElement3(VIS.Env.getAD_Language(VIS.Env.getCtx()), "C_Order_ID", false));\n\n    // Match Mode \n    var _matchMode = [];\n    //VIS.Msg.translate(VIS.Env.getCtx(), "NotMatched");\n    //VIS.Msg.translate(VIS.Env.getCtx(), "Matched");\n    _matchMode.push(VIS.Msg.getMsg("NotMatched"));\n    _matchMode.push(VIS.Msg.getMsg("Matched"));\n    function initializeComponent() {\n      var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/arrow-left.png";\n\n      // JID_1250: Clear option required on Business partner and Product parameter.\n      //var imgInfo = VIS.Application.contextUrl + "Areas/VIS/Images/clear16.png";\n      //var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/arrow-left.png";\n      btnClearBP = $(\'<button id = "btnClearBP_\' + $self.windowNo + \'" tabindex="-1" class="vis-controls-txtbtn-table-td2 input-group-text"><i class="fa fa-arrow-left" title="\' + VIS.Msg.getMsg("Clear", false, false) + \'"></i></button>\');\n      btnClearPrd = $(\'<button id = "btnClearOrd_\' + $self.windowNo + \'" tabindex="-1" class="vis-controls-txtbtn-table-td2 input-group-text"><i class="fa fa-arrow-left" title="\' + VIS.Msg.getMsg("Clear", false, false) + \'"></i></button>\');\n\n      //Top Div\n      $self.topDiv = $("<div id=\'" + "topDiv_" + $self.windowNo + "\'  class=\'vis-archive-l-s-head vis-frm-ls-top\' style=\'padding: 0;\'>" + "<div id=\'" + "btnSpaceDiv_" + $self.windowNo + "\' class=\'vis-l-s-headwrp\'>" + "<button id=\'" + "btnToggelDiv_" + $self.windowNo + "\' class=\'vis-archive-sb-t-button\' >" + "<i class=\'vis vis-arrow-left\'></i></button></div></div>");\n      var invoicecol = $("<div class=\'vis-frm-contenthead\'>"); //width: 100%;\n      invoicecol.append($self.lblInvoice.getControl().addClass("VIS_Pref_Label_Font"));\n      invoicecol.append(chkSameBPartnerDiv);\n      invoicecol.append(chkSameProductDiv);\n      invoicecol.append(chkSameQtyDiv);\n      //invoicecol.css("width", selectDivWidth);\n      //invoicecol.css("height", "45px");\n      $self.topDiv.append(invoicecol);\n      $self.invoiceTopDiv = invoicecol;\n      $self.btnSpaceDiv = $self.topDiv.find("#" + "btnSpaceDiv_" + $self.windowNo);\n\n      //Left side Div designing\n      $self.sideDiv = $("<div id=\'" + "sideDiv_" + $self.windowNo + "\' class=\'vis-archive-l-s-content vis-mi-ls-wrp vis-leftsidebarouterwrap\'>"); //background-color: #F1F1F1;\n      $self.sideDiv.css("width", sideDivWidth);\n      //$self.sideDiv.css("height", selectDivHeight - 3);\n\n      $self.div = $("<div class=\'vis-archive-l-s-content-inner\' id=\'" + "parameterDiv_" + $self.windowNo + "\'>");\n      $self.sideDiv.append($self.div);\n      var tble = $("<table style=\'width: 100%;height: 100%;\'>");\n\n      //line1\n      //var tr = $("<tr>");\n      //var td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      $self.div.append(tble);\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.lblMatchFrom.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line2\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 10px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append($self.cmbMatchFrom.getControl());\n      Leftformfieldctrlwrp.append($self.lblMatchFrom.getControl().addClass("VIS_Pref_Label_Font"));\n\n      //line3\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.lblMatchTo.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n      //line4\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append($self.cmbMatchTo.getControl());\n      Leftformfieldctrlwrp.append($self.lblMatchTo.getControl().addClass("VIS_Pref_Label_Font"));\n\n      //line5\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.lblMatchMode.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line6\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append($self.cmbMatchMode.getControl());\n      Leftformfieldctrlwrp.append($self.lblMatchMode.getControl().addClass("VIS_Pref_Label_Font"));\n\n      //line7\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.lblBPartner.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line8\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      var Leftformfieldbtnwrap = $(\'<div class="input-group-append">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append($self.onlyVendor.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n      Leftformfieldctrlwrp.append($self.lblBPartner.getControl().addClass("VIS_Pref_Label_Font"));\n      Leftformfieldbtnwrap.append($self.onlyVendor.getBtn(0));\n      Leftformfieldbtnwrap.append(btnClearBP);\n      Leftformfieldwrp.append(Leftformfieldbtnwrap);\n\n      //line9\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.lblProduct.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line10\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      var Leftformfieldbtnwrap = $(\'<div class="input-group-append">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append($self.onlyProduct.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n      Leftformfieldctrlwrp.append($self.lblProduct.getControl().addClass("VIS_Pref_Label_Font"));\n      Leftformfieldbtnwrap.append($self.onlyProduct.getBtn(0));\n      Leftformfieldbtnwrap.append(btnClearPrd);\n      Leftformfieldwrp.append(Leftformfieldbtnwrap);\n\n      //line11\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.lblDateFrom.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line12\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append($self.dtpFrom);\n      Leftformfieldctrlwrp.append($self.lblDateFrom.getControl().addClass("VIS_Pref_Label_Font"));\n\n      //line13\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.lblDateTo.getControl().css("display", "inline-block").addClass("VIS_Pref_Label_Font"));\n\n      //line14\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      var Leftformfieldwrp = $(\'<div class="input-group vis-input-wrap">\');\n      var Leftformfieldctrlwrp = $(\'<div class="vis-control-wrap">\');\n      tble.append(tr);\n      tr.append(td);\n      td.append(Leftformfieldwrp);\n      Leftformfieldwrp.append(Leftformfieldctrlwrp);\n      Leftformfieldctrlwrp.append($self.dtpTo);\n      Leftformfieldctrlwrp.append($self.lblDateTo.getControl().addClass("VIS_Pref_Label_Font"));\n\n      //line15\n      tr = $("<tr>");\n      td = $("<td style=\'padding: 0px 10px 0px;\'>");\n      tble.append(tr);\n      tr.append(td);\n      td.append(chkIsReturnTrxDiv);\n\n      //line15\n      //tr = $("<tr>");\n      //td = $("<td style=\'padding: 0px 15px 0px;\'>");\n      //tble.append(tr);\n      //tr.append(td);\n      //td.append($self.btnSearch);\n\n      //Right side Div designing\n      $self.divForGrid = $("<div id=\'" + "divForGrid_" + $self.windowNo + "\' class=\'vis-mi-main-contntwrp\'>"); //border: 1px solid darkgray;\n      //$self.divForGrid.css("width", selectDivWidth);\n      //$self.divForGrid.css("height", selectDivHeight - 3);\n\n      //Invoice Div\n      $self.gridInvoiceDiv = $("<div id=\'" + "gridInvoiceDiv_" + $self.windowNo + "\' style=\'width: 100%;flex: 1; \'>");\n      //$self.gridInvoiceDiv.css("height", "47%");\n\n      //var invoicelable = $("<div style=\'float: left; width: 100%; padding-left: 15px;margin-top: 0px;\'>");\n      //invoicelable.append($self.lblInvoice.getControl().css("display", "inline-block").css("color", "rgba(var(--v-c-primary), 1)").addClass("VIS_Pref_Label_Font"));\n      //$self.gridInvoiceDiv.append(invoicelable);\n\n      $self.invoicegrd = $("<div style=\'float: left; width: 100%;height: 100%;\'>");\n      $self.gridInvoiceDiv.append($self.invoicegrd);\n\n      //var invoicecol = $("<div style=\'float: left; width: 100%; padding-left: 15px;margin-top: 5px;\'>");\n      //invoicecol.append(chkSameBPartnerDiv);\n      //invoicecol.append(chkSameProductDiv);\n      //invoicecol.append(chkSameQtyDiv);\n      //$self.gridInvoiceDiv.append(invoicecol);\n\n      //Recipt Div\n      $self.gridReciptDiv = $("<div id=\'" + "gridReciptDiv_" + $self.windowNo + "\' style=\'width: 100%;flex: 1;\'>");\n      //$self.gridReciptDiv.css("height", "46%");\n\n      var recipt = $("<div style=\'float: left; width: 100%; margin-top: 0px;\'>");\n      recipt.append($self.lblReceipt.getControl().css("display", "inline-block").css("font-size", "24px").css("color", "rgba(var(--v-c-primary), 1)").addClass("VIS_Pref_Label_Font"));\n      // $self.gridReciptDiv.append(recipt);\n\n      $self.reciptgrd = $("<div style=\'float: left; width: 100%;height: 100%;\'>");\n      $self.gridReciptDiv.append($self.reciptgrd);\n\n      //var reciptcol = $("<div style=\'float: left; width: 100%; padding-left: 15px;margin-top: 5px;\'>");\n\n      //var divMatched = $("<div style=\'float: left;width: 33%;\'>");\n      //divMatched.append($self.lblMatched.getControl().css("display", "block").addClass("VIS_Pref_Label_Font"));\n      //divMatched.append($self.txtMatched.getControl().css("width", "100%"));\n      //reciptcol.append(divMatched);\n\n      //var divMatching = $("<div style=\'float: left; padding-left: 15px;margin-top: 0px;width: 33%;\'>");\n      //divMatching.append($self.lblMatchedTo.getControl().css("display", "block").addClass("VIS_Pref_Label_Font"));\n      //divMatching.append($self.txtMatchedTo.getControl().css("width", "100%"));\n      //reciptcol.append(divMatching);\n\n      ////var divdiffrence = $("<div style=\'float: left; padding-left: 15px;margin-top: 0px;width: 33.3%; \'>");\n      ////divdiffrence.append($self.lblDifference.getControl().css("display", "block").addClass("VIS_Pref_Label_Font"));\n      ////divdiffrence.append($self.txtDifference.getControl().css("width", "100%"));\n      ////reciptcol.append(divdiffrence);\n      ////$self.gridReciptDiv.append(reciptcol);\n\n      //$self.processlDiv = $("<div id=\'" + "gridReciptDiv_" + $self.windowNo + "\' style=\'width: 100%; padding-right: 6px; \'>");\n      //$self.processlDiv.css("height", "50px");\n      //$self.processlDiv.append($self.btnProcess);\n\n      //Bottum Div\n      var reciptcol = $("<div class=\'vis-info-btnfileds-wrap\'>");\n      var divMatched = $("<div class=\'vis-info-botdatafield\'>");\n      var $divMatchedInputwrap = $("<div class=\'input-group vis-input-wrap\'>");\n      var $divMatchedCtrlwrap = $("<div class=\'vis-control-wrap\'>");\n      divMatched.append($divMatchedInputwrap);\n      $divMatchedInputwrap.append($divMatchedCtrlwrap);\n      $divMatchedCtrlwrap.append($self.txtMatched.getControl());\n      $divMatchedCtrlwrap.append($self.lblMatched.getControl().addClass("VIS_Pref_Label_Font"));\n      reciptcol.append(divMatched);\n      var divMatching = $("<div class=\'vis-info-botdatafield\' style=\'padding-left: 15px;\'>");\n      var $divMatchingInputwrap = $("<div class=\'input-group vis-input-wrap\'>");\n      var $divMatchingCtrlwrap = $("<div class=\'vis-control-wrap\'>");\n      divMatching.append($divMatchingInputwrap);\n      $divMatchingInputwrap.append($divMatchingCtrlwrap);\n      $divMatchingCtrlwrap.append($self.txtMatchedTo.getControl());\n      $divMatchingCtrlwrap.append($self.lblMatchedTo.getControl().addClass("VIS_Pref_Label_Font"));\n      reciptcol.append(divMatching);\n      var divdiffrence = $("<div class=\'vis-info-botdatafield\' style=\'padding-left: 15px;\'>");\n      var $divdiffrenceInputwrap = $("<div class=\'input-group vis-input-wrap\'>");\n      var $divdiffrenceCtrlwrap = $("<div class=\'vis-control-wrap\'>");\n      divdiffrence.append($divdiffrenceInputwrap);\n      $divdiffrenceInputwrap.append($divdiffrenceCtrlwrap);\n      $divdiffrenceCtrlwrap.append($self.txtDifference.getControl());\n      $divdiffrenceCtrlwrap.append($self.lblDifference.getControl().addClass("VIS_Pref_Label_Font"));\n      reciptcol.append(divdiffrence);\n      $self.bottumButtonDiv = $("<div class=\'vis-info-btmcnt-wrap\'>");\n      $self.searchBtnWrap = $("<div class=\'vis-info-searchbtn-wrap\'>");\n      //$self.bottumButtonDiv.css("height", 55);\n      $self.bottumButtonDiv.append($self.searchBtnWrap);\n      $self.searchBtnWrap.append($self.btnSearch);\n      $self.bottumButtonDiv.append(reciptcol);\n      $self.bottumButtonDiv.append($self.btnProcess);\n      $self.bottumDiv = $("<div class=\'vis-mi-bot-div\'>");\n      //$self.bottumDiv.css("height", 30);\n\n      $self.bottumDiv.append($self.lblStatusInfo.getControl().addClass("VIS_Pref_Label_Font"));\n      $self.bottumDiv.append($self.lblStatusCount.getControl().css("float", "right").addClass("VIS_Pref_Label_Font"));\n\n      //Add to root\n\n      $self.divForGrid.append($self.gridInvoiceDiv).append(recipt).append($self.gridReciptDiv);\n      $self.$root.append($self.topDiv).append($self.sideDiv).append($self.divForGrid).append($self.bottumButtonDiv).append($self.bottumDiv);\n      $self.$root.append($self.$busyDiv);\n    }\n    function initDesign() {\n      var src = VIS.Application.contextUrl + "Areas/VIS/Images/base/arrow-left.png";\n      //Date controls initialization\n      $self.dtpFrom = $("<input id=\'" + "dateFrom_" + $self.windowNo + "\' type=\'date\' name=\'DateOrdered\'>");\n      $self.dtpTo = $("<input id=\'" + "dateTo_" + $self.windowNo + "\' type=\'date\' name=\'DateOrdered\'>");\n\n      //chkbox controls initialization\n      this.chkIsReturnTrxDiv = $("<div>");\n      $self.chkIsReturnTrx = $("<input id=\'" + "chkIsReturnTrx_" + $self.windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>" + "<span><label id=\'" + "lblIsReturnTrx_" + $self.windowNo + "\' class=\'VIS_Pref_Label_Font\'>Return Transaction</label></span>");\n      this.chkIsReturnTrxDiv.append($self.chkIsReturnTrx);\n      this.chkSameBPartnerDiv = $("<div class=\'vis-matchpoTopcheckwrap\'>");\n\n      //if (VIS.Application.isRTL) {\n      //    this.chkSameBPartnerDiv = $("<div style=\'float: left; margin-right: 15px;margin-left: 15px;\'>");\n      //}\n\n      $self.chkSameBPartner = $("<input id=\'" + "chkSameBPartner_" + $self.windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>" + "<span><label id=\'" + "lblSameBPartner_" + $self.windowNo + "\' class=\'VIS_Pref_Label_Font\'>Same BPartner</label></span>");\n      this.chkSameBPartnerDiv.append($self.chkSameBPartner);\n      this.chkSameProductDiv = $("<div class=\'vis-matchpoTopcheckwrap\'>");\n      //if (VIS.Application.isRTL) {\n      //    this.chkSameProductDiv = $("<div style=\'float: left; margin-right: 15px;\'>");\n      //}\n      $self.chkSameProduct = $("<input id=\'" + "chkSameProduct_" + $self.windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>" + "<span><label id=\'" + "lblSameProduct_" + $self.windowNo + "\' class=\'VIS_Pref_Label_Font\'>Same Product</label></span>");\n      this.chkSameProductDiv.append($self.chkSameProduct);\n      this.chkSameQtyDiv = $("<div class=\'vis-matchpoTopcheckwrap\'>");\n      //if (VIS.Application.isRTL) {\n      //    this.chkSameQtyDiv = $("<div style=\'float: left; margin-right: 15px;\'>");\n      //}\n      $self.chkSameQty = $("<input id=\'" + "chkSameQty_" + $self.windowNo + "\' type=\'checkbox\' class=\'VIS_Pref_automatic\'>" + "<span><label id=\'" + "lblSameQty_" + $self.windowNo + "\' class=\'VIS_Pref_Label_Font\'>Same Quantity</label></span>");\n      this.chkSameQtyDiv.append($self.chkSameQty);\n\n      //Button controls initialization\n      $self.btnSearch = $("<input id=\'" + "btnSearch_" + $self.windowNo + "\' class=\'VIS_Pref_btn-2\' style=\'margin-top: 0px;\' type=\'button\' value=\'Search\'>");\n      $self.btnProcess = $("<Button id=\'" + "btnProcess_" + $self.windowNo + "\' style=\'margin-top: 0px;\' class=\'VIS_Pref_btn-2\'>" + VIS.Msg.getMsg("Match") + "</Button>");\n      $self.lblInvoice.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "Invoice"));\n      $self.lblReceipt.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "Receipt"));\n      $self.lblMatchFrom.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "MatchFrom"));\n      $self.lblMatchTo.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "MatchTo"));\n      $self.lblMatchMode.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "MatchMode"));\n      $self.lblBPartner.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "C_BPartner_ID"));\n      $self.lblProduct.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "M_Product_ID"));\n      $self.lblDateFrom.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "DateFrom"));\n      $self.lblDateTo.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "DateTo"));\n      $self.lblMatched.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "ToBeMatched"));\n      $self.lblMatchedTo.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "Matching"));\n      $self.lblDifference.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "Difference"));\n      $self.chkIsReturnTrx.prop("checked", false);\n      $self.btnProcess.attr(\'disabled\', \'disabled\');\n      $self.chkSameProduct.prop("checked", true);\n      $self.chkSameBPartner.prop("checked", true);\n      $self.chkSameQty.prop("checked", false);\n      $self.chkIsReturnTrx.next("label").text(VIS.Msg.translate(VIS.Env.getCtx(), "isReturnTrx"));\n      $self.chkSameProduct.next("label").text(VIS.Msg.translate(VIS.Env.getCtx(), "SameProduct"));\n      $self.chkSameBPartner.next("label").text(VIS.Msg.translate(VIS.Env.getCtx(), "SameBPartner"));\n      $self.chkSameQty.next("label").text(VIS.Msg.translate(VIS.Env.getCtx(), "SameQty"));\n      $self.lblSearch.getControl().text(VIS.Msg.translate(VIS.Env.getCtx(), "Search"));\n      $self.btnSearch.text(VIS.Msg.translate(VIS.Env.getCtx(), "Search"));\n    }\n    function dynInit(data) {\n      addColumns();\n      cmd_MatchFrom();\n      $self.lblStatusInfo.getControl().text("");\n      $self.lblStatusCount.getControl().text(0);\n    }\n    function fillPicks() {\n      //BPartners\n      var value = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 3499, VIS.DisplayType.Search);\n      $self.onlyVendor = new VIS.Controls.VTextBoxButton("C_BPartner_ID", true, false, true, VIS.DisplayType.Search, value);\n\n      //Product\n      value = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 3840, VIS.DisplayType.Search);\n      $self.onlyProduct = new VIS.Controls.VTextBoxButton("M_Product_ID", true, false, true, VIS.DisplayType.Search, value);\n\n      //var lookup = VIS.MLookupFactory.getMLookUp(VIS.Env.getCtx(), $self.windowNo, 2163, VIS.DisplayType.TableDir);\n      //$self.cmbMatchFrom = new VIS.Controls.VComboBox("AD_Org_ID", true, false, true, lookup, 150, VIS.DisplayType.TableDir, 0);\n    }\n    function cmd_MatchFrom() {\n      $self.cmbMatchTo.getControl().empty();\n      var selection = null;\n      if ($self.cmbMatchFrom.getControl().find(\'option\').length > 0) {\n        selection = $self.cmbMatchFrom.getControl().find(\'option:selected\').val();\n        if (selection.equals(_matchOptions[MATCH_INVOICE])) {\n          $self.cmbMatchTo.getControl().append(" <option value=\'" + _matchOptions[MATCH_SHIPMENT] + "\'>" + _matchOptions[MATCH_SHIPMENT] + "</option>");\n        } else if (selection.equals(_matchOptions[MATCH_ORDER])) {\n          $self.cmbMatchTo.getControl().append(" <option value=\'" + _matchOptions[MATCH_SHIPMENT] + "\'>" + _matchOptions[MATCH_SHIPMENT] + "</option>");\n        } else\n          //  shipment\n          {\n            $self.cmbMatchTo.getControl().append(" <option value=\'" + _matchOptions[MATCH_INVOICE] + "\'>" + _matchOptions[MATCH_INVOICE] + "</option>");\n            $self.cmbMatchTo.getControl().append(" <option value=\'" + _matchOptions[MATCH_ORDER] + "\'>" + _matchOptions[MATCH_ORDER] + "</option>");\n          }\n        $self.cmbMatchTo.getControl().prop(\'selectedIndex\', 0);\n        //  Set Title\n        $self.lblInvoice.getControl().text(selection);\n      }\n      //  sync To\n      cmd_MatchTo();\n    }\n    function cmd_MatchTo() {\n      // log.Fine("VMatch.cmd_matchTo");\n      selection = $self.cmbMatchTo.getControl().find(\'option:selected\').val();\n      $self.lblReceipt.getControl().text(selection);\n    }\n    function cmd_Search() {\n      //Create SQL \n      var display = $self.cmbMatchFrom.getControl()[0].selectedIndex; // $self.cmbMatchFrom.getControl().find(\'option:selected\').val();\n      var matchToString = $self.cmbMatchTo.getControl().find(\'option:selected\').val();\n      var matchToType = MATCH_INVOICE;\n      if (matchToString.equals(_matchOptions[MATCH_SHIPMENT])) {\n        matchToType = MATCH_SHIPMENT;\n      } else if (matchToString.equals(_matchOptions[MATCH_ORDER])) {\n        matchToType = MATCH_ORDER;\n      }\n      matchToTypees = matchToType;\n      tableInit(display, matchToType); //\tsets _sql\n\n      //Add Where Clause\n\n      _match_ID = "";\n      if ($self.vdgvReceipt != null) {\n        $self.vdgvReceipt.clear();\n      }\n\n      //  Product\n      if ($self.onlyProduct.getValue() != null) {\n        var Product = $self.onlyProduct.getValue();\n        onlyProduct_s = " AND lin.M_Product_ID=" + Product;\n      }\n      //  BPartner\n      if ($self.onlyVendor.getValue() != null) {\n        var Vendor = $self.onlyVendor.getValue();\n        onlyVendor_s = " AND hdr.C_BPartner_ID=" + Vendor;\n      }\n      //  Date\n      var from = $self.dtpFrom.val();\n      var to = $self.dtpTo.val();\n      if (from != "" && to != "") {\n        from_s = " AND " + _dateColumn + " BETWEEN " + VIS.DB.to_date(from) + " AND " + VIS.DB.to_date(to);\n      } else if (from != "") {\n        fromIf = " AND " + _dateColumn + " >= " + VIS.DB.to_date(from);\n      } else if (to != "") {\n        to_Dat = " AND " + _dateColumn + " <= " + VIS.DB.to_date(to);\n      }\n      tableLoad($self.vdgvInvoice);\n      $self.txtMatched.getControl().val(0);\n\n      //  Status Info\n\n      $self.lblStatusInfo.getControl().text($self.cmbMatchFrom.getControl().find(\'option:selected\').val() + "# = " + $self.vdgvInvoice.records.length + " -" + $self.cmbMatchTo.getControl().find(\'option:selected\').val() + "# = " + $self.vdgvReceipt.records.length);\n      $self.lblStatusCount.getControl().text(0);\n    }\n    function cmd_SearchTo(recid) {\n      chkSameBPartners = "";\n      chkSameProducts = "";\n      chkSameQtys = "";\n      var row = -1;\n      if (recid != null) {\n        row = recid;\n      } else if ($self.vdgvInvoice.getSelection().length > 0) {\n        row = Number($self.vdgvInvoice.getSelection().toString());\n      }\n      var qty = 0.0;\n      if (row < 0) {\n        $self.$busyDiv[0].style.visibility = "hidden";\n      } else {\n        //  ** Create SQL **\n        var displayString = $self.cmbMatchTo.getControl().find(\'option:selected\').val();\n        var display = MATCH_INVOICE;\n        if (displayString.equals(_matchOptions[MATCH_SHIPMENT])) {\n          display = MATCH_SHIPMENT;\n        } else if (displayString.equals(_matchOptions[MATCH_ORDER])) {\n          display = MATCH_ORDER;\n        }\n        var matchToType = $self.cmbMatchFrom.getControl()[0].selectedIndex;\n        matchToTypees = matchToType;\n        tableInit(display, matchToType); //\tsets _sql\n        //  ** Add Where Clause **              \n        var BPartner = {\n          \'key\': $self.vdgvInvoice.get(row).C_BPartner_ID_K,\n          \'value\': $self.vdgvInvoice.get(row).C_BPartner_ID\n        };\n        var Product = {\n          \'key\': $self.vdgvInvoice.get(row).M_Product_ID_K,\n          \'value\': $self.vdgvInvoice.get(row).M_Product_ID\n        };\n        if ($self.chkSameBPartner.prop("checked")) {\n          chkSameBPartners = " AND hdr.C_BPartner_ID=" + BPartner.key;\n        }\n        if ($self.chkSameProduct.prop("checked")) {\n          chkSameProducts = " AND lin.M_Product_ID=" + Product.key;\n        }\n\n        //  calculate qty\n        var docQty = $self.vdgvInvoice.get(row).Qty;\n        var matchedQty = $self.vdgvInvoice.get(row).Matched;\n        qty = docQty - matchedQty;\n        if ($self.chkSameQty.prop("checked")) {\n          chkSameQtys = " AND " + _qtyColumn + "=" + docQty;\n        }\n        // Matched\n        _match_ID = $self.vdgvInvoice.get(row).Line_K;\n        //Load Table Recipt table\n        tableLoad($self.vdgvReceipt);\n      }\n\n      //  Display To be Matched Qty\n      _xMatched = qty;\n      $self.txtMatched.setValue(_xMatched);\n      $self.txtMatchedTo.setValue(0);\n      $self.txtDifference.setValue(_xMatched);\n      //  Status Info\n      $self.lblStatusInfo.getControl().text($self.cmbMatchFrom.getControl().find(\'option:selected\').val() + "# = " + $self.vdgvInvoice.records.length + " -" + $self.cmbMatchTo.getControl().find(\'option:selected\').val() + "# = " + $self.vdgvReceipt.records.length);\n      $self.lblStatusCount.getControl().text(0);\n    }\n\n    //function cmd_SearchTo(recid) {\n\n    //    var row = -1;\n\n    //    //if ($self.vdgvInvoice.selectAll() != null) {\n    //    //    row = $self.vdgvInvoice.selectAll();\n    //    //}\n    //    if (recid != null) {\n    //        row = recid;\n    //    }\n    //    else if ($self.vdgvInvoice.getSelection().length > 0) {\n    //        row = Number($self.vdgvInvoice.getSelection().toString());\n    //    }\n\n    //    var qty = 0.0;\n\n    //    if (row < 0) {\n\n    //    }\n    //    else {\n    //        //  ** Create SQL **\n    //        var displayString = $self.cmbMatchTo.getControl().find(\'option:selected\').val();\n    //        var display = MATCH_INVOICE;\n    //        if (displayString.equals(_matchOptions[MATCH_SHIPMENT])) {\n    //            display = MATCH_SHIPMENT;\n    //        }\n    //        else if (displayString.equals(_matchOptions[MATCH_ORDER])) {\n    //            display = MATCH_ORDER;\n    //        }\n    //        var matchToType = $self.cmbMatchFrom.getControl()[0].selectedIndex;\n    //        tableInit(display, matchToType);\t//\tsets _sql\n    //        //  ** Add Where Clause **\n    //        //var BPartner = ($self.vdgvInvoice.get(row)).I_BPartner;\n    //        var BPartner = { \'key\': $self.vdgvInvoice.get(row).C_BPartner_ID_K, \'value\': $self.vdgvInvoice.get(row).C_BPartner_ID };\n    //        var Product = { \'key\': $self.vdgvInvoice.get(row).M_Product_ID_K, \'value\': $self.vdgvInvoice.get(row).M_Product_ID };\n\n    //        //log.Fine("BPartner=" + BPartner + " - Product=" + Product);\n    //        if ($self.chkSameBPartner.prop("checked")) {\n    //            _sql = _sql.concat(" AND hdr.C_BPartner_ID=").concat(BPartner.key);\n    //        }\n    //        if ($self.chkSameProduct.prop("checked")) {\n    //            _sql = _sql.concat(" AND lin.M_Product_ID=").concat(Product.key);\n    //        }\n\n    //        //  calculate qty\n    //        var docQty = $self.vdgvInvoice.get(row).Qty;\n    //        var matchedQty = $self.vdgvInvoice.get(row).Matched;\n\n    //        qty = docQty - matchedQty;\n    //        if ($self.chkSameQty.prop("checked")) {\n    //            _sql = _sql.concat(" AND ").concat(_qtyColumn).concat("=").concat(docQty);\n    //        }\n    //        //Load Table Recipt table\n    //        tableLoad($self.vdgvReceipt);\n    //    }\n\n    //    //  Display To be Matched Qty\n    //    _xMatched = qty;\n    //    $self.txtMatched.setValue(_xMatched);\n    //    $self.txtMatchedTo.setValue(0);\n    //    $self.txtDifference.setValue(_xMatched);\n    //    //  Status Info\n    //    $self.lblStatusInfo.getControl().text($self.cmbMatchFrom.getControl().find(\'option:selected\').val()\n    //      + "# = " + $self.vdgvInvoice.records.length + " -" + $self.cmbMatchTo.getControl().find(\'option:selected\').val() + "# = " + $self.vdgvReceipt.records.length);\n    //    $self.lblStatusCount.getControl().text(0);\n    //}\n\n    function cmd_Process() {\n      //  Matched From\n      var row = -1;\n      if ($self.vdgvInvoice.getSelection().length > 0) {\n        row = Number($self.vdgvInvoice.getSelection().toString());\n      }\n      if (row < 0) {\n        isProcess = false;\n        $self.$busyDiv[0].style.visibility = "hidden";\n        return;\n      }\n\n      //if ($self.cmbMatchMode.getControl()[0].selectedIndex == MODE_MATCHED) {\n      //    isProcess = false;\n      //    $self.$busyDiv[0].style.visibility = "hidden";\n      //    return;\n      //}\n\n      var BPartner = {\n        \'key\': $self.vdgvInvoice.get(row).C_BPartner_ID_K,\n        \'value\': $self.vdgvInvoice.get(row).C_BPartner_ID\n      };\n      var lineMatched = {\n        \'key\': $self.vdgvInvoice.get(row).Line_K,\n        \'value\': $self.vdgvInvoice.get(row).Line\n      };\n      var Product = {\n        \'key\': $self.vdgvInvoice.get(row).M_Product_ID_K,\n        \'value\': $self.vdgvInvoice.get(row).M_Product_ID\n      };\n      var toMatchQty = _xMatched;\n      var matchedQty = $self.vdgvInvoice.get(row).Matched;\n      var val = 1;\n      //  Matched To\n      var selectedItems = $self.vdgvReceipt.getSelection().toString();\n      if (selectedItems == null) {\n        isProcess = false;\n        $self.$busyDiv[0].style.visibility = "hidden";\n        return;\n      }\n      if (selectedItems.length <= 0) {\n        isProcess = false;\n        $self.$busyDiv[0].style.visibility = "hidden";\n        return;\n      }\n\n      //  Invoice or PO\n      var invoice = true;\n      if ($self.cmbMatchFrom.getControl().find(\'option:selected\').val().equals(_matchOptions[MATCH_ORDER]) || $self.cmbMatchTo.getControl().find(\'option:selected\').val().equals(_matchOptions[MATCH_ORDER])) {\n        invoice = false;\n      }\n      var MatchedMode = $self.cmbMatchMode.getControl()[0].selectedIndex;\n      var MatchFrom = $self.cmbMatchFrom.getControl()[0].selectedIndex;\n      var multiSelect = [];\n      var splitValue = selectedItems.toString().split(\',\');\n      for (var row = 0; row < splitValue.length; row++) {\n        var id = $self.vdgvReceipt.get(splitValue[row])._ID;\n        if (id != null) {\n          //  need to be the same product\n          var ProductCompare = {\n            \'key\': $self.vdgvReceipt.get(splitValue[row]).M_Product_ID_K,\n            \'value\': $self.vdgvReceipt.get(splitValue[row]).M_Product_ID\n          };\n          if (Product.key != ProductCompare.key) {\n            continue;\n          }\n\n          //var lineMatchedTo = { \'key\': $self.vdgvReceipt.get(splitValue[row]).Line_K, \'value\': $self.vdgvReceipt.get(splitValue[row]).Line };\n          //\tQty\n          //var qty = 0.0;\n\n          // If we are doing not matched, qty will be the total remaining to match.\n          // If we are doing matched, qty will be the total matched, negative.\n\n          //if ($self.cmbMatchMode.getControl()[0].selectedIndex == MODE_NOTMATCHED) {\n          //    qty = $self.vdgvReceipt.get(splitValue[row]).Qty;// doc\n          //}\n          //qty = qty - Number($self.vdgvReceipt.get(splitValue[row]).Matched);\n\n          // If we are doing not matched, allow matching up to toMatchQty.\n          // If we are doing matched, allow matching up to matchedQty in the negative direction.\n\n          //if ($self.cmbMatchMode.getControl()[0].selectedIndex == MODE_NOTMATCHED) {\n          //    if (qty > toMatchQty) {\n          //        qty = toMatchQty;\n          //    }\n          //    toMatchQty = toMatchQty - qty;\n          //}\n          //else {\n          //    if (qty > matchedQty)\n          //        qty = qty - matchedQty;\n          //    matchedQty = matchedQty + qty;\n          //}                    \n\n          ////  Get Shipment_ID\n          //var M_InOutLine_ID = 0;\n          //var Line_ID = 0;\n          //if ($self.cmbMatchFrom.getControl()[0].selectedIndex == MATCH_SHIPMENT) {\n          //    M_InOutLine_ID = lineMatched.key;      //  upper table\n          //    Line_ID = lineMatchedTo.key;\n          //}\n          //else {\n          //    M_InOutLine_ID = lineMatchedTo.key;    //  lower table\n          //    Line_ID = lineMatched.key;\n          //}\n\n          multiSelect.push($self.vdgvReceipt.get(splitValue[row]));\n\n          // Added by Bharat on 20 July 2017 to restrict multiclick issue         \n          //return createMatchRecord(invoice, M_InOutLine_ID, Line_ID, qty, lineMatched.key, selectedItems);\n        } else {\n          continue;\n        }\n      }\n      if (multiSelect.length > 0) {\n        createMatchRecord(invoice, MatchedMode, MatchFrom, lineMatched.key, toMatchQty, multiSelect);\n      } else {\n        isProcess = false;\n        $self.$busyDiv[0].style.visibility = "hidden";\n        return;\n      }\n    }\n    var displayMATCH_INVOICE = "";\n    var chkIsReturnTrxProp = "";\n    var displayMATCH_ORDER = "";\n    var matchToTypeMATCH_SHIPMENT = false;\n    var matchedss = "";\n    var chkSameBPartners = "";\n    var chkSameProducts = "";\n    var chkSameQtys = "";\n    var from_s = "";\n    var fromIf = "";\n    var to_Dat = "";\n    var MATCH_ORDERs = "";\n    var onlyProduct_s = "";\n    var onlyVendor_s = "";\n    var matchToTypees = "";\n\n    // get data for query\n    function tableInit(display, matchToType) {\n      chkSameBPartners = "";\n      chkSameProducts = "";\n      chkSameQtys = "";\n      from_s = "";\n      fromIf = "";\n      to_Dat = "";\n      //   MATCH_ORDERs = "";\n      onlyProduct_s = "";\n      onlyVendor_s = "";\n      //matchToTypees = "";\n\n      matchedss = $self.cmbMatchMode.getControl()[0].selectedIndex == MODE_MATCHED;\n      displayMATCH_INVOICE = "";\n      chkIsReturnTrxProp = $self.chkIsReturnTrx.prop(\'checked\');\n      displayMATCH_ORDER = "";\n      matchToTypeMATCH_SHIPMENT = false;\n\n      //else                       \n      matchToTypeMATCH_ORDER = "matchToTypeMATCH_ORDER";\n      if (display == MATCH_INVOICE) {\n        displayMATCH_INVOICE = "displayMATCH_INVOICE";\n        _dateColumn = "hdr.DateInvoiced";\n        _qtyColumn = "lin.QtyInvoiced";\n      } else if (display == MATCH_ORDER) {\n        displayMATCH_ORDER = "displayMATCH_ORDER";\n        _dateColumn = "hdr.DateOrdered";\n        _qtyColumn = "lin.QtyOrdered";\n      } else {\n        _dateColumn = "hdr.MovementDate";\n        _qtyColumn = "lin.MovementQty";\n      }\n    }\n\n    //function tableInit(display, matchToType) {\n    //    var matched = $self.cmbMatchMode.getControl()[0].selectedIndex == MODE_MATCHED;\n    //    //log.Config("Display=" + _matchOptions[display]\n    //    //    + ", MatchTo=" + _matchOptions[matchToType]\n    //    //    + ", Matched=" + matched);\n\n    //    _sql = "";\n    //    if (display == MATCH_INVOICE) {\n    //        _dateColumn = "hdr.DateInvoiced";\n    //        _qtyColumn = "lin.QtyInvoiced";\n    //        _sql = _sql.concat("SELECT hdr.C_Invoice_ID,hdr.DocumentNo, hdr.DateInvoiced, bp.Name,hdr.C_BPartner_ID,"\n    //            + " lin.Line,lin.C_InvoiceLine_ID, p.Name as Product,lin.M_Product_ID,"\n    //            + " lin.QtyInvoiced,SUM(NVL(mi.Qty,0)) as match "\n    //            + "FROM C_Invoice hdr"\n    //            + " INNER JOIN C_BPartner bp ON (hdr.C_BPartner_ID=bp.C_BPartner_ID)"\n    //            + " INNER JOIN C_InvoiceLine lin ON (hdr.C_Invoice_ID=lin.C_Invoice_ID)"\n    //            + " INNER JOIN M_Product p ON (lin.M_Product_ID=p.M_Product_ID)"\n    //            + " INNER JOIN C_DocType dt ON (hdr.C_DocType_ID=dt.C_DocType_ID and dt.DocBaseType in (\'API\',\'APC\') AND dt.IsReturnTrx = ")\n    //            .concat($self.chkIsReturnTrx.prop(\'checked\') ? "\'Y\')" : "\'N\')")\n    //            .concat(" FULL JOIN M_MatchInv mi ON (lin.C_InvoiceLine_ID=mi.C_InvoiceLine_ID) "\n    //            + "WHERE hdr.DocStatus IN (\'CO\',\'CL\')");\n\n    //        _groupBy = " GROUP BY hdr.C_Invoice_ID,hdr.DocumentNo,hdr.DateInvoiced,bp.Name,hdr.C_BPartner_ID,"\n    //            + " lin.Line,lin.C_InvoiceLine_ID,p.Name,lin.M_Product_ID,lin.QtyInvoiced "\n    //            + "HAVING "\n    //            + (matched ? "0" : "lin.QtyInvoiced")\n    //            + "<>SUM(NVL(mi.Qty,0))";\n    //    }\n    //    else if (display == MATCH_ORDER) {\n    //        _dateColumn = "hdr.DateOrdered";\n    //        _qtyColumn = "lin.QtyOrdered";\n    //        _sql = _sql.concat("SELECT hdr.C_Order_ID,hdr.DocumentNo, hdr.DateOrdered, bp.Name,hdr.C_BPartner_ID,"\n    //            + " lin.Line,lin.C_OrderLine_ID, p.Name as Product,lin.M_Product_ID,"\n    //            + " lin.QtyOrdered,SUM(COALESCE(mo.Qty,0)) as match "\n    //            + "FROM C_Order hdr"\n    //            + " INNER JOIN C_BPartner bp ON (hdr.C_BPartner_ID=bp.C_BPartner_ID)"\n    //            + " INNER JOIN C_OrderLine lin ON (hdr.C_Order_ID=lin.C_Order_ID)"\n    //            + " INNER JOIN M_Product p ON (lin.M_Product_ID=p.M_Product_ID)"\n    //            + " INNER JOIN C_DocType dt ON (hdr.C_DocType_ID=dt.C_DocType_ID AND dt.DocBaseType=\'POO\'AND dt.isReturnTrx = ")\n    //            .concat($self.chkIsReturnTrx.prop(\'checked\') ? "\'Y\')" : "\'N\')")\n    //            .concat(" FULL JOIN M_MatchPO mo ON (lin.C_OrderLine_ID=mo.C_OrderLine_ID) "\n    //            + "WHERE mo.")\n    //            .concat(matchToType == MATCH_SHIPMENT ? "M_InOutLine_ID" : "C_InvoiceLine_ID")\n    //            .concat(matched ? " IS NOT NULL" : " IS NULL"\n    //            + " AND hdr.DocStatus IN (\'CO\',\'CL\')");\n\n    //        _groupBy = " GROUP BY hdr.C_Order_ID,hdr.DocumentNo,hdr.DateOrdered,bp.Name,hdr.C_BPartner_ID,"\n    //            + " lin.Line,lin.C_OrderLine_ID,p.Name,lin.M_Product_ID,lin.QtyOrdered "\n    //            + "HAVING "\n    //            + (matched ? "0" : "lin.QtyOrdered")\n    //            + "<>SUM(COALESCE(mo.Qty,0))";\n    //    }\n    //    else    //  Shipment\n    //    {\n    //        _dateColumn = "hdr.MovementDate";\n    //        _qtyColumn = "lin.MovementQty";\n    //        _sql = _sql.concat("SELECT hdr.M_InOut_ID,hdr.DocumentNo, hdr.MovementDate, bp.Name,hdr.C_BPartner_ID,"\n    //            + " lin.Line,lin.M_InOutLine_ID, p.Name as Product,lin.M_Product_ID,"\n    //            + " lin.MovementQty,SUM(NVL(m.Qty,0)) as match"\n    //            + " FROM M_InOut hdr"\n    //            + " INNER JOIN C_BPartner bp ON (hdr.C_BPartner_ID=bp.C_BPartner_ID)"\n    //            + " INNER JOIN M_InOutLine lin ON (hdr.M_InOut_ID=lin.M_InOut_ID)"\n    //            + " INNER JOIN M_Product p ON (lin.M_Product_ID=p.M_Product_ID)"\n    //            + " INNER JOIN C_DocType dt ON (hdr.C_DocType_ID = dt.C_DocType_ID AND dt.DocBaseType=\'MMR\' AND dt.isReturnTrx = ")\n    //            .concat($self.chkIsReturnTrx.prop(\'checked\') ? "\'Y\')" : "\'N\')")\n    //            .concat(" FULL JOIN ")\n    //            .concat(matchToType == MATCH_ORDER ? "M_MatchPO" : "M_MatchInv")\n    //            .concat(" m ON (lin.M_InOutLine_ID=m.M_InOutLine_ID) "\n    //            + "WHERE hdr.DocStatus IN (\'CO\',\'CL\')");\n    //        _groupBy = " GROUP BY hdr.M_InOut_ID,hdr.DocumentNo,hdr.MovementDate,bp.Name,hdr.C_BPartner_ID,"\n    //            + " lin.Line,lin.M_InOutLine_ID,p.Name,lin.M_Product_ID,lin.MovementQty "\n    //            + "HAVING "\n    //            + (matched ? "0" : "lin.MovementQty")\n    //            + "<>SUM(NVL(m.Qty,0))";\n    //    }\n    //    //\tLog.trace(7, "VMatch.tableInit", _sql + "\\n" + _groupBy);\n    //}\n\n    function tableLoad(tableName) {\n      //var sql = VIS.MRole.getDefault().addAccessSQL(_sql.toString(), "hdr", VIS.MRole.SQL_FULLYQUALIFIED, VIS.MRole.SQL_RO)\n      //    + _groupBy;\n      var data = [];\n      var sendData = {\n        displayMATCH_INVOICEs: displayMATCH_INVOICE,\n        chkIsReturnTrxProps: chkIsReturnTrxProp,\n        displayMATCH_ORDERs: displayMATCH_ORDER,\n        matchToTypeMATCH_SHIPMENTs: matchToTypeMATCH_SHIPMENT,\n        matchedsss: matchedss,\n        chkSameBPartnerss: chkSameBPartners,\n        chkSameProductss: chkSameProducts,\n        chkSameQtyss: chkSameQtys,\n        from_ss: from_s,\n        fromIfs: fromIf,\n        to_Dats: to_Dat,\n        matchToTypes: matchToTypees,\n        MATCH_SHIPMENTs: MATCH_SHIPMENT,\n        MATCH_ORDERs: MATCH_ORDER,\n        onlyProduct_ss: onlyProduct_s,\n        onlyVendor_ss: onlyVendor_s,\n        MatchToID: _match_ID\n      };\n      $.ajax({\n        url: VIS.Application.contextUrl + "VCreateFrom/GetTableLoadVmatch",\n        dataType: "json",\n        //type: \'POST\',\n        //async: false,\n        data: sendData,\n        success: function (result) {\n          var res = JSON.parse(result);\n          if (res && res != null) {\n            var count = 1;\n            for (var i = 0; i < res.length; i++) {\n              var line = {};\n              line[\'_ID\'] = res[i]._ID;\n              line[\'DocumentNo\'] = res[i].DocNo;\n              // JID_1822 Date Showing As per  browser culture\n              var da = res[i].Date;\n              var d = new Date(da);\n              res[i].Date = d.toLocaleDateString();\n              line[\'Date\'] = res[i].Date;\n              //line[\'Date\'] = res[i].Date;\n              line[\'C_BPartner_ID\'] = res[i].CBPartnerIDK;\n              line[\'C_BPartner_ID_K\'] = res[i].CBPartnerID;\n              line[\'Line\'] = res[i].Line;\n              line[\'Line_K\'] = res[i].Line_K;\n              line[\'M_Product_ID\'] = res[i].MProductIDK;\n              line[\'M_Product_ID_K\'] = res[i].MProductID;\n              line[\'MAttributeSetInstance_ID\'] = res[i].MAttributeSetInstance_ID;\n              line[\'AttributeName\'] = res[i].AttributeName;\n              line[\'Qty\'] = res[i].Qty;\n              line[\'Matched\'] = res[i].Matched;\n              line[\'recid\'] = count;\n              count++;\n              data.push(line);\n            }\n          }\n          if (data.length < 1) {\n            addColumns(tableName.name.contains("vdgvReceipt"));\n            $self.$busyDiv[0].style.visibility = "hidden";\n          } else {\n            if (tableName.name.contains("vdgvReceipt")) {\n              loadvdgvReceipt($self.arrListColumns, data);\n              $self.$busyDiv[0].style.visibility = "hidden";\n            } else if (tableName.name.contains("vdgvInvoice")) {\n              loadvdgvInvoice($self.arrListColumns, data);\n              cmd_SearchTo();\n            }\n          }\n        },\n        error: function (e) {\n          console.log(e);\n          $self.$busyDiv[0].style.visibility = "hidden";\n        }\n      });\n\n      //try {\n      //    if (tableName.columns.length > 0) {\n      //        //tableName.Columns.Clear();\n      //    }\n      //    if (data.length < 1) {\n\n      //        addColumns(tableName.name.contains("vdgvReceipt"));\n      //        return;\n      //    }\n\n      //    if (tableName.name.contains("vdgvReceipt")) {\n      //        loadvdgvReceipt($self.arrListColumns, data);\n      //    }\n      //    else if (tableName.name.contains("vdgvInvoice")) {\n      //        loadvdgvInvoice($self.arrListColumns, data);\n      //        cmd_SearchTo();\n      //    }\n      //}\n      //catch (e) {\n      //    // log.Log(Level.SEVERE, sql, e);\n      //}\n    }\n    function createMatchRecord(invoice, matchMode, matchFrom, lineMatched, toMatchQty, selectedItems) {\n      //if (qty == 0) {\n      //    return;\n      //}\n      var obj = $self;\n      $.ajax({\n        url: VIS.Application.contextUrl + "Common/CreateMatchRecord",\n        dataType: "json",\n        data: {\n          invoice: invoice,\n          MatchMode: matchMode,\n          MatchFrom: matchFrom,\n          LineMatched: lineMatched,\n          ToMatchQty: toMatchQty,\n          SelectedItems: JSON.stringify(selectedItems)\n        },\n        success: function (data) {\n          //  requery                    \n          cmd_Search();\n          $self.vdgvReceipt.delete(true);\n          //Added By Manjot Recomended by smilee for Msg Text.\n          //var ctxmsg;\n          //if ($self.cmbMatchMode.getControl()[0].selectedIndex == MODE_NOTMATCHED)\n          //    ctxmsg = VIS.Msg.getMsg("VIS_Matched");\n          //else\n          //    ctxmsg = VIS.Msg.getMsg("VIS_Reversed");\n          var res = JSON.parse(data);\n          if (res.Msg != "") {\n            VIS.ADialog.info("", null, res.Msg, null);\n          } else if (res.MatchedPO_ID > 0) {\n            //VIS.ADialog.info(ctxmsg + "Processed Line No: " + lineMatched.toString(), null, null, null);\n            VIS.ADialog.info("Matched", null, VIS.Msg.getMsg("PurchaseOrder") + " - " + res.MatchedPO_ID, null);\n          } else if (res.MatchedInv_ID > 0) {\n            VIS.ADialog.info("Matched", null, VIS.Msg.getMsg("Invoice") + " - " + res.MatchedInv_ID, null);\n          }\n          // Added by Bharat on 20 July 2017 to restrict multiclick issue         \n          isProcess = false;\n          $self.$busyDiv[0].style.visibility = "hidden";\n        },\n        // Added by Bharat on 20 July 2017 to restrict multiclick issue         \n        error: function (jqXHR, textStatus, errorThrown) {\n          console.log(textStatus);\n          isProcess = false;\n          $self.$busyDiv[0].style.visibility = "hidden";\n        }\n      });\n    }\n    function requery(lineMatched) {\n      cmd_Search();\n      //Added By Manjot Recomended by smilee for Msg Text.\n      var ctxmsg;\n      if ($self.cmbMatchMode.getControl()[0].selectedIndex == MODE_NOTMATCHED) ctxmsg = VIS.Msg.getMsg("VIS_Matched");else ctxmsg = VIS.Msg.getMsg("VIS_Reversed");\n      VIS.ADialog.info(ctxmsg + "Processed Line No: " + lineMatched.toString(), null, null, null);\n    }\n    function addColumns(isReceipt) {\n      if ($self.arrListColumns.length == 0) {\n        $self.arrListColumns.push({\n          field: "_ID",\n          caption: "_ID",\n          sortable: true,\n          size: \'11%\',\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: "DocumentNo",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "DocumentNo"),\n          sortable: true,\n          size: \'11%\',\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "Date",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "Date"),\n          sortable: true,\n          size: \'11%\',\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "C_BPartner_ID",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "C_BPartner_ID"),\n          sortable: true,\n          size: \'11%\',\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "C_BPartner_ID_K",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "C_BPartner_ID"),\n          sortable: true,\n          size: \'11%\',\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: "Line",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "Line"),\n          sortable: true,\n          size: \'11%\',\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "Line_K",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "Line"),\n          sortable: true,\n          size: \'11%\',\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: "M_Product_ID",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "M_Product_ID"),\n          sortable: true,\n          size: \'11%\',\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "M_Product_ID_K",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "M_Product_ID"),\n          sortable: true,\n          size: \'11%\',\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: "MAttributeSetInstance_ID",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "ASI"),\n          sortable: true,\n          size: \'11%\',\n          hidden: true\n        });\n        $self.arrListColumns.push({\n          field: "AttributeName",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "ASI"),\n          sortable: true,\n          size: \'11%\',\n          hidden: false\n        });\n        $self.arrListColumns.push({\n          field: "Qty",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "Qty"),\n          sortable: true,\n          size: \'11%\',\n          hidden: false,\n          render: function (record, index, col_index) {\n            var val = VIS.Utility.Util.getValueOfDecimal(record["Qty"]);\n            return val.toLocaleString();\n          }\n        });\n        $self.arrListColumns.push({\n          field: "Matched",\n          caption: VIS.Msg.translate(VIS.Env.getCtx(), "Matched"),\n          sortable: true,\n          size: \'11%\',\n          hidden: false\n        });\n      }\n      if (isReceipt == null) {\n        if ($self.vdgvInvoice != null) {\n          $self.vdgvInvoice.destroy();\n          $self.vdgvInvoice = null;\n        }\n        $self.vdgvInvoice = $($self.invoicegrd).w2grid({\n          name: "vdgvInvoice" + $self.windowNo,\n          recordHeight: 30,\n          show: {\n            selectColumn: false\n          },\n          onSelect: function (event) {\n            cmd_SearchTo(event.recid);\n          },\n          multiSelect: false,\n          columns: $self.arrListColumns,\n          records: null\n        });\n        if ($self.vdgvReceipt != null) {\n          $self.vdgvReceipt.destroy();\n          $self.vdgvReceipt = null;\n        }\n        $self.vdgvReceipt = $($self.reciptgrd).w2grid({\n          name: "vdgvReceipt" + $self.windowNo,\n          recordHeight: 30,\n          show: {\n            selectColumn: true\n          },\n          onSelect: function (event) {\n            this.multiSelect = true;\n            tableChanged(event.recid, true);\n          },\n          onUnselect: function (event) {\n            tableChanged(event.recid, false);\n          },\n          multiSelect: false,\n          columns: $self.arrListColumns,\n          records: null\n        });\n      } else if (!isReceipt) {\n        if ($self.vdgvInvoice != null) {\n          $self.vdgvInvoice.destroy();\n          $self.vdgvInvoice = null;\n        }\n        $self.vdgvInvoice = $($self.invoicegrd).w2grid({\n          name: "vdgvInvoice" + $self.windowNo,\n          recordHeight: 30,\n          show: {\n            selectColumn: false\n          },\n          onSelect: function (event) {\n            cmd_SearchTo(event.recid);\n          },\n          multiSelect: false,\n          columns: $self.arrListColumns,\n          records: null\n        });\n\n        //vdgvInvoice.ReadOnly = true;\n      } else if (isReceipt) {\n        if ($self.vdgvReceipt != null) {\n          $self.vdgvReceipt.destroy();\n          $self.vdgvReceipt = null;\n        }\n        $self.vdgvReceipt = $($self.reciptgrd).w2grid({\n          name: "vdgvReceipt" + $self.windowNo,\n          recordHeight: 30,\n          show: {\n            selectColumn: true\n          },\n          onSelect: function (event) {\n            this.multiSelect = true;\n            tableChanged(event.recid, true);\n          },\n          onUnselect: function (event) {\n            tableChanged(event.recid, false);\n          },\n          multiSelect: false,\n          columns: $self.arrListColumns,\n          records: null\n        });\n      }\n    }\n    function loadvdgvInvoice(columns, data) {\n      if ($self.vdgvInvoice != null) {\n        $self.vdgvInvoice.destroy();\n        $self.vdgvInvoice = null;\n      }\n      w2utils.encodeTags(data);\n      $self.vdgvInvoice = $($self.invoicegrd).w2grid({\n        name: "vdgvInvoice" + $self.windowNo,\n        recordHeight: 30,\n        show: {\n          selectColumn: false\n        },\n        onSelect: function (event) {\n          cmd_SearchTo(event.recid);\n        },\n        multiSelect: false,\n        columns: columns,\n        records: data\n      });\n    }\n    function loadvdgvReceipt(columns, data) {\n      if ($self.vdgvReceipt != null) {\n        $self.vdgvReceipt.destroy();\n        $self.vdgvReceipt = null;\n      }\n      w2utils.encodeTags(data);\n      $self.vdgvReceipt = $($self.reciptgrd).w2grid({\n        name: "vdgvReceipt" + $self.windowNo,\n        recordHeight: 30,\n        show: {\n          selectColumn: true\n        },\n        onSelect: function (event) {\n          this.multiSelect = true;\n          tableChanged(event.recid, true);\n        },\n        onUnselect: function (event) {\n          tableChanged(event.recid, false);\n        },\n        multiSelect: false,\n        columns: columns,\n        records: data\n      });\n    }\n    function tableChanged(recid, select) {\n      if ($self.vdgvInvoice.records.length < 1) {\n        return;\n      }\n      if (!$self.chkSameProduct.prop("checked")) {\n        setTimeout(function () {\n          $self.vdgvReceipt.unselect(Number(recid));\n        }, 10);\n        return;\n      }\n      var matchedRow = -1;\n      // Changes done by Bharat as giving error when Grid is Refreshed.\n      var Product = null;\n      if ($self.vdgvInvoice.getSelection().length > 0) {\n        matchedRow = Number($self.vdgvInvoice.getSelection().toString());\n        Product = {\n          \'key\': $self.vdgvInvoice.get(matchedRow).M_Product_ID_K,\n          \'value\': $self.vdgvInvoice.get(matchedRow).M_Product_ID\n        };\n      }\n\n      //  Matched To\n      var qty = 0.0;\n      var noRows = 0;\n      var newColumn = 0;\n      var selectedItems = recid + "," + $self.vdgvReceipt.getSelection().toString().replace(recid, \'\');\n      if (select && selectedItems != null) {\n        if (selectedItems.length > 0) {\n          //remove last comma if string have\n          selectedItems = selectedItems.replace(/,$/, "");\n          var splitValue = selectedItems.toString().split(\',\');\n          for (var row = 0; row < splitValue.length; row++) {\n            var id = $self.vdgvReceipt.get(splitValue[0])._ID;\n            if (id != null) {\n              var ProductCompare = {\n                \'key\': $self.vdgvReceipt.get(splitValue[row]).M_Product_ID_K,\n                \'value\': $self.vdgvReceipt.get(splitValue[row]).M_Product_ID\n              };\n              if (Product.key != ProductCompare.key) {\n                setTimeout(function () {\n                  $self.vdgvReceipt.unselect(Number(recid));\n                }, 10);\n                return;\n              } else {\n                if ($self.cmbMatchMode.getControl()[0].selectedIndex == MODE_NOTMATCHED) {\n                  qty = qty + Number($self.vdgvReceipt.get(splitValue[row]).Qty);\n                }\n                qty = qty - Number($self.vdgvReceipt.get(splitValue[row]).Matched); //xMatchedToTable.getValueAt(row, I_MATCHED)); // matched\n                noRows++;\n              }\n            }\n          }\n        }\n      }\n      _xMatchedTo = qty;\n      $self.txtMatchedTo.setValue(_xMatchedTo.toString());\n      $self.txtDifference.setValue(_xMatched - _xMatchedTo);\n      if (noRows <= 0) {\n        $self.btnProcess.removeAttr("disabled");\n      }\n      $self.lblStatusCount.getControl().text(noRows);\n    }\n    this.Initialize = function () {\n      for (var i = 0; i < _matchOptions.length; i++) {\n        this.cmbMatchFrom.getControl().append(" <option value=\'" + _matchOptions[i] + "\'>" + _matchOptions[i] + "</option>");\n      }\n      for (var i = 0; i < _matchMode.length; i++) {\n        this.cmbMatchMode.getControl().append(" <option value=\'" + _matchMode[i] + "\'>" + _matchMode[i] + "</option>");\n      }\n      this.cmbMatchFrom.getControl().prop(\'selectedIndex\', 0);\n      this.cmbMatchMode.getControl().prop(\'selectedIndex\', 0);\n      fillPicks();\n      initDesign();\n      initializeComponent();\n      this.btnToggel = this.$root.find("#btnToggelDiv_" + $self.windowNo);\n      this.gridSelectDiv = this.$root.find("#divForGrid_" + $self.windowNo);\n\n      //Events\n      if (this.cmbMatchFrom.getControl() != null) this.cmbMatchFrom.getControl().change(function () {\n        $self.$busyDiv[0].style.visibility = \'visible\';\n        dynInit();\n        cmd_MatchFrom();\n        $self.$busyDiv[0].style.visibility = "hidden";\n      });\n      if (this.cmbMatchTo.getControl() != null) this.cmbMatchTo.getControl().change(function () {\n        $self.$busyDiv[0].style.visibility = \'visible\';\n        cmd_MatchTo();\n        $self.$busyDiv[0].style.visibility = "hidden";\n      });\n\n      //JID_0162:  IF Search Mode "Matched" Process button name need to rename to "Unmatch"\n      //           IF Search Mode "Not Matched" Process button name need to rename to "Match"\n      if (this.cmbMatchMode.getControl() != null) this.cmbMatchMode.getControl().change(function () {\n        if ($self.cmbMatchMode.getControl()[0].selectedIndex == MODE_NOTMATCHED) {\n          $self.btnProcess.text(VIS.Msg.getMsg("Match"));\n        } else {\n          $self.btnProcess.text(VIS.Msg.getMsg("Unmatch"));\n        }\n      });\n      if (this.btnSearch != null) this.btnSearch.on(VIS.Events.onTouchStartOrClick, function () {\n        $self.$busyDiv[0].style.visibility = \'visible\';\n        cmd_Search();\n        //$self.$busyDiv[0].style.visibility = "hidden";\n      });\n      if (this.btnProcess != null) this.btnProcess.on(VIS.Events.onTouchStartOrClick, function (e) {\n        // Added by Bharat on 20 July 2017 to restrict multiclick issue                    \n        if (!isProcess) {\n          $self.$busyDiv[0].style.visibility = \'visible\';\n          isProcess = true;\n          cmd_Process();\n        }\n      });\n      if (this.btnToggel != null) this.btnToggel.on(VIS.Events.onTouchStartOrClick, function () {\n        if (toggleside) {\n          $self.btnToggel.animate({\n            borderSpacing: 0\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = false;\n          $self.btnSpaceDiv.animate({\n            width: sideDivWidth\n          }, "slow");\n          $self.gridSelectDiv.animate({\n            width: selectDivWidth\n          }, "slow");\n          $self.invoiceTopDiv.animate({\n            width: selectDivWidth\n          }, "slow");\n          $self.div.css("display", "block");\n          $self.sideDiv.animate({\n            width: sideDivWidth\n          }, "slow", null, function () {\n            $self.vdgvInvoice.resize();\n            $self.vdgvReceipt.resize();\n          });\n        } else {\n          // $self.btnRefresh.show();\n          $self.btnToggel.animate({\n            borderSpacing: 180\n          }, {\n            step: function (now, fx) {\n              $(this).css(\'-webkit-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'-moz-transform\', \'rotate(\' + now + \'deg)\');\n              $(this).css(\'transform\', \'rotate(\' + now + \'deg)\');\n            },\n            duration: \'slow\'\n          }, \'linear\');\n          toggleside = true;\n          $self.btnSpaceDiv.animate({\n            width: minSideWidth\n          }, "slow");\n          $self.sideDiv.animate({\n            width: minSideWidth\n          }, "slow");\n          $self.div.css("display", "none");\n          $self.invoiceTopDiv.animate({\n            width: selectDivFullWidth\n          }, "slow");\n          $self.gridSelectDiv.animate({\n            width: selectDivFullWidth\n          }, "slow", null, function () {\n            $self.vdgvInvoice.resize();\n            $self.vdgvReceipt.resize();\n          });\n        }\n      });\n      this.chkSameBPartner.change(function () {\n        $self.$busyDiv[0].style.visibility = \'visible\';\n        cmd_SearchTo();\n        //$self.$busyDiv[0].style.visibility = "hidden";\n      });\n      this.chkSameQty.change(function () {\n        $self.$busyDiv[0].style.visibility = \'visible\';\n        cmd_SearchTo();\n        //$self.$busyDiv[0].style.visibility = "hidden";\n      });\n      this.chkSameProduct.change(function () {\n        $self.$busyDiv[0].style.visibility = \'visible\';\n        cmd_SearchTo();\n        //$self.$busyDiv[0].style.visibility = "hidden";\n      });\n\n      // JID_1250: Clear option required on Business partner and Product parameter.\n      if (btnClearBP != null) {\n        btnClearBP.on(VIS.Events.onTouchStartOrClick, function () {\n          if ($self.onlyVendor.isReadOnly) return;\n          $self.onlyVendor.setValue(null, false, true);\n        });\n      }\n      if (btnClearPrd != null) {\n        btnClearPrd.on(VIS.Events.onTouchStartOrClick, function () {\n          if ($self.onlyProduct.isReadOnly) return;\n          $self.onlyProduct.setValue(null, false, true);\n        });\n      }\n\n      //if (this.onlyProduct != null)\n      //    this.onlyProduct.addVetoableChangeListener(this);\n\n      //if (this.onlyVendor != null)\n      //    this.onlyVendor.addVetoableChangeListener(this);\n      $self.$busyDiv[0].style.visibility = "hidden";\n    };\n    this.display = function () {\n      dynInit();\n    };\n    this.getRoot = function () {\n      return this.$root;\n    };\n    this.refreshUI = function () {\n      /*Refresh Grid on Focus*/\n      this.vdgvInvoice.refresh();\n      this.vdgvReceipt.refresh();\n    };\n    this.callConsolidate = function () {\n      $.ajax({\n        url: VIS.Application.contextUrl + "Common/Consolidate",\n        dataType: "json",\n        async: true,\n        success: function (data) {}\n      });\n      $self.vdgvReceipt.multiSelect = true;\n      var name = "vdgvReceipt" + $self.windowNo;\n      w2ui[name].multiSelect = true;\n    };\n    this.disposeComponent = function () {\n      if (this.btnSearch) this.btnSearch.off(VIS.Events.onTouchStartOrClick);\n      if (this.btnProcess) this.btnProcess.off(VIS.Events.onTouchStartOrClick);\n      if (this.btnToggel) this.btnToggel.off(VIS.Events.onTouchStartOrClick);\n      this.frame = null;\n      this.windowNo = null;\n      this.arrListColumns = null;\n      this.vdgvInvoice = null;\n      this.vdgvReceipt = null;\n      this.lblMatchFrom = null;\n      this.lblMatchTo = null;\n      this.lblMatchMode = null;\n      this.lblBPartner = null;\n      this.lblProduct = null;\n      this.lblDateFrom = null;\n      this.lblDateTo = null;\n      this.lblInvoice = null;\n      this.lblReceipt = null;\n      this.lblMatched = null;\n      this.lblMatchedTo = null;\n      this.lblDifference = null;\n      this.lblStatusInfo = null;\n      this.lblStatusCount = null;\n      this.lblSearch = null;\n      this.cmbMatchFrom = null;\n      this.cmbMatchTo = null;\n      this.cmbMatchMode = null;\n      this.chkIsReturnTrx = null;\n      this.chkSameBPartner = null;\n      this.chkSameProduct = null;\n      this.chkSameQty = null;\n      this.onlyVendor = null;\n      this.onlyProduct = null;\n      this.dtpFrom = null;\n      this.dtpTo = null;\n      this.btnSearch = null;\n      this.btnProcess = null;\n      this.btnToggel = null;\n      this.txtMatched = null;\n      this.txtMatchedTo = null;\n      this.txtDifference = null;\n      this.$root = null;\n      this.$busyDiv = null;\n      this.sideDiv = null;\n      this.gridSelectDiv = null;\n      this.gridInvoiceDiv = null;\n      this.gridReciptDiv = null;\n      this.processlDiv = null;\n      this.bottumDiv = null;\n      this.btnSpaceDiv = null;\n      toggleside = null;\n      sideDivWidth = null;\n      ;\n      minSideWidth = null;\n      selectDivWidth = null;\n      selectDivFullWidth = null;\n      selectDivHeight = null;\n      _AD_Client_ID = null;\n      _AD_Org_ID = null;\n      _by = null;\n      MATCH_INVOICE = null;\n      MATCH_SHIPMENT = null;\n      MATCH_ORDER = null;\n      MODE_NOTMATCHED = null;\n      MODE_MATCHED = null;\n      _sql = null;\n      _dateColumn = null;\n      _qtyColumn = null;\n      _groupBy = null;\n      _xMatched = null;\n      _xMatchedTo = null;\n      $self = null;\n      _matchOptions = null;\n      _matchMode = null;\n      this.disposeComponent = null;\n    };\n  }\n  ;\n\n  //Must Implement with same parameter\n  VMatch.prototype.init = function (windowNo, frame) {\n    this.frame = frame;\n    this.windowNo = windowNo;\n    VIS.Env.getCtx().setContext(this.windowNo, "IsSOTrx", "Y");\n    try {\n      var obj = this.Initialize();\n    } catch (ex) {\n      //log.Log(Level.SEVERE, "init", ex);\n    }\n    this.frame.getContentGrid().append(this.getRoot());\n    this.display();\n    this.callConsolidate();\n  };\n  VMatch.prototype.refresh = function () {\n    this.refreshUI();\n  };\n\n  //Must implement dispose\n  VMatch.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VIS.Apps.AForms.VMatch = VMatch;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vmatch.js?\n}')},"./Areas/VAS/Scripts/app/forms/vpayprint.js":()=>{eval('{/********************************************************\r\n * Module Name    : VIS\r\n * Purpose        : Print payment Selection\r\n * Class Used     : \r\n * Chronological Development\r\n * Sarbjit Kaur     18 May 2015\r\n ******************************************************/\n;\nVIS = window.VIS || {};\n;\n(function (VIS, $) {\n  VIS.Apps.AForms = VIS.Apps.AForms || {};\n  function VPayPrint() {\n    this.windowNo = VIS.Env.getWindowNo();\n    var $root = $("<div style=\'width: 100%; height: 100%; background-color: white;\'>");\n    var $self = this;\n    var $divContainer = null;\n    var $cmbPaymentSelect = null;\n    var $txtBankAccount = null;\n    var $txtCurrentBalance = null;\n    var $cmbPaymentMethod = null;\n    var $txtCurreny = null;\n    var $txtCheckNo = null;\n    var $txtNoOfPayments = null;\n    var $chkShowPrintedPayments = null;\n    var $btnPrint = null;\n    var $btnExport = null;\n    var $btnCancel = null;\n    var C_BankAccount_ID = null;\n    var $divBusy = null;\n    var baseUrl = VIS.Application.contextUrl;\n    var dataSetUrl = baseUrl + "JsonData/JDataSetWithCode";\n    this.initialize = function () {\n      customDesign();\n    };\n    //*****************\n    //Load BusyDiv\n    //*****************\n    function busyIndicator() {\n      $divBusy = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n      //$divBusy.css({\n      //    "position": "absolute", "bottom": "0", "background": "url(\'" + VIS.Application.contextUrl + "Areas/VIS/Images/busy.gif\') no-repeat", "background-position": "center center",\n      //    "width": "98%", "height": "98%", \'text-align\': \'center\', \'opacity\': \'.1\', \'z-index\': \'9999999\'\n      //});\n      $divBusy[0].style.visibility = "hidden";\n      $root.append($divBusy);\n    }\n    ;\n    //*****************\n    //Show/Hide Busy Indicator\n    //*****************\n    function isBusy(show) {\n      if (show) {\n        $divBusy[0].style.visibility = "visible";\n      } else {\n        $divBusy[0].style.visibility = "hidden";\n      }\n    }\n    ;\n    //******************\n    //Custom Design of Paymnet Selection Form\n    //******************\n    function customDesign() {\n      $divContainer = $("<div class=\'vis-mainContainer vis-formouterwrpdiv\'>");\n      var designPSelectInfo = " <div class=\'vis-pPrintInfo\'>" // div pSelectInfo starts here                            \n      + " <div class=\'vis-paymentselect-field\' style=\'margin-top: 8px;\'>" // div PaySelection starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <div class=\'vis-paymentPrintChk-field\'>" // div ShowPrintedPayments starts here\n      + " <input type=\'checkbox\' id=\'VIS_chkShowPrintPayment_" + $self.windowNo + "\' data-placeholder=\'\' placeholder=\' \'>" + " <label for=\'VIS_chkOnlyDue_" + $self.windowNo + "\'>" + VIS.Msg.getMsg("ShowPrintedPayments") + " </label>" + " </div>" // div ShowPrintedPayments ends here \n      + " <select id=\'VIS_PaySelection_" + $self.windowNo + "\'></select>" + " <label style=\'top: 11px;\'>" + VIS.Msg.translate(VIS.Env.getCtx(), "C_PaySelection_ID") + " </label>" + "</div></div> </div>" // div PaySelection ends here \n      + " <div class=\'vis-paymentPrint-field\'>" // div bankAccount starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <input type=\'text\' name=\'vis-name vis-fieldreadonly\' class=\'vis-fieldreadonly\' disabled id=\'VIS_txtBankAccount_" + $self.windowNo + "\' MaxLength=\'50\' data-placeholder=\'\' placeholder=\' \'>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "C_BankAccount_ID") + " </label>" + " </div></div></div>" // div bankAccount ends here \n      + " <div class=\'vis-paymentPrint-field\'>" // div currentBalance starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <input type=\'text\' class=\'vis-fieldreadonly\' disabled id=\'VIS_txtCurrentBal_" + $self.windowNo + "\' MaxLength=\'50\' data-placeholder=\'\' placeholder=\' \'>" + " <label>" + VIS.Msg.getMsg("CurrentBalance") + " </label>" + " </div></div></div>" // div currentBalance ends here                             \n      + " <div class=\'vis-paymentPrint-field\'>" // div paymentMethod starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <select name=\'vis-name\' id=\'VIS_cmbPaymentMethod_" + $self.windowNo + "\'></select>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "PaymentRule") + " </label>" + " </div></div></div>" // div paymentMethod ends here \n      + " <div class=\'vis-paymentPrint-field\'>" // div Currency starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <input type=\'text\' class=\'vis-fieldreadonly\' disabled id=\'VIS_txtCurrency_" + $self.windowNo + "\' MaxLength=\'50\' data-placeholder=\'\' placeholder=\' \'>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "C_Currency_ID") + " </label>" + " </div></div></div>" // div Currency ends here                            \n      + " <div class=\'vis-paymentPrint-field\'>" // div CheckNo starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <input type=\'number\' name=\'vis-name\'  id=\'VIS_txtCheckNo_" + $self.windowNo + "\' MaxLength=\'50\' data-placeholder=\'\' placeholder=\' \'>" + " <label>" + VIS.Msg.getMsg("CheckNo") + " </label>" + " </div></div></div>" // div CheckNo ends here    \n      + " <div class=\'vis-paymentPrint-field\'>" // div NoOfPayments starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <input type=\'text\' class=\'vis-fieldreadonly\' disabled id=\'VIS_txtNoOfPayments_" + $self.windowNo + "\' MaxLength=\'50\' data-placeholder=\'\' placeholder=\' \'>" + " <label>" + VIS.Msg.getMsg("NoOfPayments") + " </label>" + " </div></div></div>" // div NoOfPayments ends here  \n      + " </div>"; // div pSelectInfo ends here      \n\n      var designPSelectProcess = " <div class=\'vis-pPrintProcess\'>" // div pSelectProcess starts here\n      + " <div class=\'vis-paymentPrint-field\'>" // div starts here  \n      + " <input id=\'VIS_btnCancel_" + $self.windowNo + "\' class=\'vis-frm-btn\' type=\'submit\' value=\'" + VIS.Msg.getMsg("Cancel") + "\' >"\n      //+ " <input id=\'VIS_btnExport_" + $self.windowNo + "\' style=\'background-color:#616364;color: white;font-weight: 200;font-family: helvetica;font-size: 14px;padding: 10px 15px;float:right;width:100px;margin-top:10px;margin-left:10px;height:40px;\' type=\'submit\' value=\'" + VIS.Msg.getMsg("Export") + "\' ></input>"\n      + " <input id=\'VIS_btnPrint_" + $self.windowNo + "\' class=\'vis-frm-btn\' type=\'submit\' value=\'" + VIS.Msg.getMsg("Print") + "\' ></input>" + " </div>" // div ends here \n      + " </div>"; // div pSelectProcess ends here \n      $divContainer.append($(designPSelectInfo)).append($(designPSelectProcess));\n      $root.append($divContainer);\n      busyIndicator();\n      findControls();\n    }\n    ;\n    //******************\n    //Find Controls through ID\n    //******************\n    function findControls() {\n      $cmbPaymentSelect = $(\'#VIS_PaySelection_\' + $self.windowNo);\n      $txtBankAccount = $(\'#VIS_txtBankAccount_\' + $self.windowNo);\n      $txtCurrentBalance = $(\'#VIS_txtCurrentBal_\' + $self.windowNo);\n      $cmbPaymentMethod = $(\'#VIS_cmbPaymentMethod_\' + $self.windowNo);\n      $txtCurreny = $(\'#VIS_txtCurrency_\' + $self.windowNo);\n      $txtCheckNo = $(\'#VIS_txtCheckNo_\' + $self.windowNo);\n      $txtNoOfPayments = $(\'#VIS_txtNoOfPayments_\' + $self.windowNo);\n      $chkShowPrintedPayments = $(\'#VIS_chkShowPrintPayment_\' + $self.windowNo);\n      $chkShowPrintedPayments.attr("disabled", true);\n      $btnPrint = $(\'#VIS_btnPrint_\' + $self.windowNo);\n      $btnExport = $(\'#VIS_btnExport_\' + $self.windowNo);\n      $btnCancel = $(\'#VIS_btnCancel_\' + $self.windowNo);\n      loadFormData(true);\n      eventHandling();\n    }\n    ;\n    //******************\n    //Load Data on Form Load\n    //******************\n    function loadFormData(isFirstTime) {\n      var pSelectID = null;\n      if (isFirstTime) {\n        pSelectID = 0;\n      } else {\n        pSelectID = $cmbPaymentSelect.val();\n      }\n      isBusy(true);\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPayPrint/GetDetail",\n        async: false,\n        datatype: "Json",\n        type: "GET",\n        cache: false,\n        data: {\n          showPrintedPayment: $chkShowPrintedPayments.prop("checked"),\n          C_PaymentSelect_ID: pSelectID,\n          isFirstTime: isFirstTime\n        },\n        success: function (jsonResult) {\n          var data = JSON.parse(jsonResult);\n          controlsData = data;\n          if (data != null || data != undefined) {\n            fillData(data);\n            LoadPaymentRuleInfo();\n            isBusy(false);\n          }\n        },\n        error: function (e) {\n          isBusy(false);\n          console.log(e);\n        }\n      });\n    }\n    ;\n    //******************\n    //Load Data on Form Load\n    //******************\n    function LoadPaymentRuleInfo() {\n      //debugger;\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPayPrint/LoadPaymentRuleInfo",\n        async: false,\n        datatype: "Json",\n        type: "GET",\n        cache: false,\n        data: {\n          paymentMethod_ID: $cmbPaymentMethod.val(),\n          C_PaySelection_ID: $cmbPaymentSelect.val(),\n          m_C_BankAccount_ID: C_BankAccount_ID,\n          PaymentRule: $cmbPaymentMethod.text()\n        },\n        success: function (jsonResult) {\n          var data = JSON.parse(jsonResult);\n          isBusy(false);\n          if (data != null || data != undefined) {\n            $txtCheckNo.val(data.CheckNo);\n            $txtNoOfPayments.val(data.NoOfPayments);\n          }\n        },\n        error: function (e) {\n          console.log(e);\n        }\n      });\n    }\n    ;\n    //******************\n    //Fill Data in Controls\n    //******************\n    function fillData(data) {\n      try {\n        //* Load PaymentSelection\n        var pSelectID = $cmbPaymentSelect.val();\n        var payMethodID = 0;\n        if (data.PaymentSelection != null || data.PaymentSelection.length > 0) {\n          $cmbPaymentSelect.empty();\n          for (var i in data.PaymentSelection) {\n            $cmbPaymentSelect.append($(\'<Option value="\' + data.PaymentSelection[i].ID + \'">\' + data.PaymentSelection[i].Value + \'</option>\'));\n          }\n        }\n        if (pSelectID > 0) {\n          $cmbPaymentSelect.val(pSelectID);\n          var sql = "VIS_135";\n          var param = [];\n          param[0] = new VIS.DB.SqlParam("@pSelectID", pSelectID);\n          payMethodID = VIS.Utility.Util.getValueOfInt(executeScalar(sql, param));\n        }\n        //* Load PaymentMethod\n        if (data.PaymentMethod != null || data.PaymentMethod.length > 0) {\n          $cmbPaymentMethod.empty();\n          for (var i in data.PaymentMethod) {\n            $cmbPaymentMethod.append($(\'<Option value="\' + data.PaymentMethod[i].ID + \'">\' + data.PaymentMethod[i].Value + \'</option>\'));\n          }\n        }\n        if (payMethodID > 0) {\n          $cmbPaymentMethod.val(payMethodID);\n        }\n        //* Load Another Values\n        if (data.PSelectInfo != null || data.PSelectInfo.length > 0) {\n          $txtBankAccount.val(data.PSelectInfo[0].BankAccount);\n          $txtCheckNo.val(data.PSelectInfo[0].CheckNo);\n          $txtCurrentBalance.val(parseFloat(data.PSelectInfo[0].CurrentBalance).toLocaleString());\n          $txtCurreny.val(data.PSelectInfo[0].Currency);\n          $txtNoOfPayments.val(data.PSelectInfo[0].NoOfPayments);\n          C_BankAccount_ID = data.PSelectInfo[0].BankAccount_ID;\n        }\n      } catch (err) {\n        VIS.ADialog.info("VPayPrintNoRecords");\n        isBusy(false);\n        return false;\n      }\n      if ($cmbPaymentSelect.val() == null) {\n        VIS.ADialog.info("VPayPrintNoRecords");\n        return false;\n      }\n    }\n    ;\n    //******************\n    //EventHandling\n    //******************\n    function eventHandling() {\n      //**On click of Print Button**//\n      $btnPrint.on("click", function () {\n        if (validateInputOnPrint()) {\n          cmd_Print();\n        }\n      });\n      $btnExport.on("click", function () {\n        if (validateInputOnPrint()) {\n          cmd_Export();\n        }\n      });\n      //**On click of Cancel Button**//\n      $btnCancel.on("click", function () {\n        $self.dispose();\n      });\n\n      //**On change of PaymentSelection($cmbPaymentSelect) **//\n      $cmbPaymentSelect.on("change", function () {\n        isBusy(true);\n        window.setTimeout(function () {\n          loadFormData(false);\n          isBusy(false);\n        }, 20);\n      });\n\n      //**On change of PaymentMethod($cmbPaymentMethod) **//\n      $cmbPaymentMethod.on("change", function () {\n        isBusy(true);\n        window.setTimeout(function () {\n          LoadPaymentRuleInfo();\n          isBusy(false);\n        }, 20);\n      });\n\n      //**On checked change of Show only Printed Payments checkbox **//\n      $chkShowPrintedPayments.on("click", function () {\n        isBusy(true);\n        window.setTimeout(function () {\n          loadFormData(false);\n          isBusy(false);\n        }, 20);\n      });\n    }\n    ;\n    //******************\n    //validateInputOnPrint\n    //******************\n    function validateInputOnPrint() {\n      try {\n        if ($cmbPaymentSelect == null || $cmbPaymentSelect.val() <= -1 || C_BankAccount_ID <= -1 || $cmbPaymentMethod.val() <= -1 || $txtCheckNo.val().length <= 0) {\n          VIS.ADialog.info("VPayPrintNoRecords");\n          return false;\n        }\n      } catch (err) {\n        VIS.ADialog.info("VPayPrintNoRecords");\n        return false;\n      }\n      return true;\n    }\n    ;\n    //******************\n    //Cmd Print\n    //******************\n    function cmd_Print() {\n      isBusy(true);\n\n      // var printParent = new VIS.AProcess(300); //initlize AForm\n\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPayPrint/Cmd_Print",\n        async: false,\n        datatype: "Json",\n        type: "GET",\n        cache: false,\n        data: {\n          paymentMethod_ID: $cmbPaymentMethod.val(),\n          C_PaySelection_ID: $cmbPaymentSelect.val(),\n          m_C_BankAccount_ID: C_BankAccount_ID,\n          PaymentRule: $cmbPaymentMethod.text(),\n          checkNo: $txtCheckNo.val()\n        },\n        success: function (jsonResult) {\n          isBusy(false);\n          var data = JSON.parse(jsonResult);\n          if (data != null || data != undefined) {\n            VIS.ADialog.confirm("ContinueCheckPrint?", true, "", "Confirm", function (result) {\n              if (result) {\n                isBusy(true);\n                window.setTimeout(function () {\n                  continueCheckPrint(data);\n                }, 20);\n              } else {\n                $self.dispose();\n              }\n            });\n          } else {\n            VIS.ADialog.info("VPayPrintNoRecords");\n            return false;\n          }\n        },\n        error: function (e) {\n          console.log(e);\n        }\n      });\n    }\n    ;\n\n    //******************\n    //ContinueCheckPrint\n    //******************\n    function continueCheckPrint(data) {\n      var check_ID = data.check_ID[0];\n      var param = [];\n      param.push($cmbPaymentMethod.val());\n      param.push($cmbPaymentSelect.val());\n      param.push(C_BankAccount_ID);\n      param.push($cmbPaymentMethod.text());\n      param.push($txtCheckNo.val());\n      param.push(JSON.stringify(data.check_ID));\n      param.push(JSON.stringify(data.m_batch));\n      param.push(JSON.stringify(data.m_checks));\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPayPrint/ContinueCheckPrint",\n        async: false,\n        datatype: "Json",\n        type: "POST",\n        contentType: \'application/json; charset=utf-8\',\n        data: JSON.stringify(param),\n        success: function (jsonResult) {\n          // Change by mohit to get check prints.\n          var sql = "VIS_152";\n          var params = [];\n          params[0] = new VIS.DB.SqlParam("@BankAcct_ID", C_BankAccount_ID);\n          var ad_process_id = executeScalar(sql, params);\n          sql = "VIS_150";\n          var ad_table_id = executeScalar(sql);\n          var prin = new VIS.APrint(ad_process_id, ad_table_id, parseInt($cmbPaymentSelect.val()), $self.windowNo);\n          prin.startPdf(null);\n          isBusy(false);\n          var data = JSON.parse(jsonResult);\n          if (data != null || data != undefined) {\n            //get documenNo\'s\n            var paymentId = data.join();\n            var _docNo = getDocumentNo(paymentId);\n            //used get Message to get Value\n            //updated value appended to _docNo variable\n            _docNo = _docNo != null ? VIS.Msg.getMsg("VIS_PaymentCreated") + _docNo : _docNo;\n            VIS.ADialog.confirm("VPayPrintPrintRemittance?", true, _docNo, "Confirm", function (result) {\n              if (result) {\n                isBusy(true);\n                window.setTimeout(function () {\n                  vPayPrintPrintRemittance(jsonResult);\n                }, 20);\n              } else {\n                $self.dispose();\n              }\n            });\n          }\n        },\n        error: function (e) {\n          isBusy(false);\n          console.log(e);\n        }\n      });\n    }\n    ;\n\n    //Get the DocumentNo\'s for Payment\n    function getDocumentNo(_paymentId) {\n      var _docId = null;\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPayPrint/GetDocumentNo",\n        async: false,\n        datatype: "Json",\n        type: "GET",\n        contentType: \'application/json; charset=utf-8\',\n        data: {\n          paymentId: _paymentId\n        },\n        success: function (data) {\n          _docId = JSON.parse(data);\n          _docId = _docId != null ? _docId.join() : _docId;\n        },\n        error: function (e) {\n          console.log(e);\n        }\n      });\n      return _docId;\n    }\n    //******************\n    //VPayPrintPrintRemittance\n    //******************$self.windowNo\n    function vPayPrintPrintRemittance(data) {\n      var paymentID = JSON.parse(data);\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPayPrint/VPayPrintRemittance",\n        async: false,\n        datatype: "Json",\n        type: "POST",\n        contentType: \'application/json; charset=utf-8\',\n        data: data,\n        success: function (jsonResult) {\n          isBusy(false);\n          var data = JSON.parse(jsonResult);\n          if (paymentID != null || paymentID != undefined) {\n            //var ad_process_id = VIS.DB.executeScalar("select ad_process_id from ad_process where value = \'remittanceprintformat\'");\n            // Change by mohit to print remittance slip.\n            //var sql = "VIS_151";\n            //var ad_process_id = executeScalar(sql);\n            /* Process ID of VARPT_PaymentVoucher (Crystal Report) */\n            var ad_process_id = parseInt(data);\n            sql = "VIS_150";\n            var ad_table_id = executeScalar(sql);\n            // for (var j = 0; j < data.check_id; j++) {\n            //var pi = new VIS.ProcessInfo(null, ad_process_id, ad_table_id, paymentID[0]);\n            //pi.setAD_User_ID(VIS.context.getAD_User_ID());\n            //var ctl = new VIS.ProcessCtl($self, pi, null);\n            //ctl.setIsPdf(true);\n            //ctl.process($self.windowNo); //call dispose intenally\n            //ctl = null;\n            var prin = new VIS.APrint(ad_process_id, ad_table_id, parseInt($cmbPaymentSelect.val()), $self.windowNo);\n            prin.startPdf(null);\n            $self.dispose();\n            // }\n          } else {\n            VIS.ADialog.info("PaymentNotProcessed");\n          }\n        },\n        error: function (e) {\n          console.log(e);\n        }\n      });\n    }\n    ;\n    //******************\n    //Cmd Export\n    //******************\n    function cmd_Export() {\n      isBusy(true);\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPayPrint/Cmd_Export",\n        async: false,\n        datatype: "Json",\n        type: "POST",\n        cache: false,\n        data: {\n          paymentMethod_ID: $cmbPaymentMethod.val(),\n          C_PaySelection_ID: $cmbPaymentSelect.val(),\n          m_C_BankAccount_ID: C_BankAccount_ID,\n          PaymentRule: $cmbPaymentMethod.text(),\n          checkNo: $txtCheckNo.val()\n        },\n        success: function (jsonResult) {\n          isBusy(false);\n          var data = JSON.parse(jsonResult);\n          if (data != null || data != undefined) {\n            VIS.ADialog.confirm("VPayPrintSuccess?", true, "", "Confirm", function (result) {\n              if (result) {\n                isBusy(true);\n                window.setTimeout(function () {\n                  vPayPrintSuccess(data);\n                }, 20);\n                var url = VIS.Application.contextUrl + "TempDownload/" + data.filepath;\n                window.open(url, \'_blank\');\n              }\n            });\n          } else {\n            VIS.ADialog.info("VPayPrintNoRecords");\n            return false;\n          }\n        },\n        error: function (e) {\n          console.log(e);\n        }\n      });\n    }\n    ;\n    //******************\n    //VPayPrintSuccess\n    //******************\n    function vPayPrintSuccess(data) {\n      var param = [];\n      param.push(JSON.stringify(data.check_ID));\n      param.push(JSON.stringify(data.m_batch));\n      param.push(JSON.stringify(data.m_checks));\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPayPrint/VPayPrintSuccess",\n        async: false,\n        datatype: "Json",\n        type: "POST",\n        contentType: \'application/json; charset=utf-8\',\n        data: JSON.stringify(param),\n        success: function (jsonResult) {\n          isBusy(false);\n          var data = JSON.parse(jsonResult);\n          if (data != null || data != undefined) {}\n        },\n        error: function (e) {\n          console.log(e);\n        }\n      });\n    }\n    ;\n    //*******************\n    //Get Root\n    //*******************\n    this.getRoot = function () {\n      return $root;\n    };\n    var executeScalar = function (sql, params, callback) {\n      var async = callback ? true : false;\n      var dataIn = {\n        sql: sql,\n        page: 1,\n        pageSize: 0\n      };\n      var value = null;\n      if (params) {\n        dataIn.param = params;\n      }\n      getDataSetJString(dataIn, async, function (jString) {\n        dataSet = new VIS.DB.DataSet().toJson(jString);\n        var dataSet = new VIS.DB.DataSet().toJson(jString);\n        if (dataSet.getTable(0).getRows().length > 0) {\n          value = dataSet.getTable(0).getRow(0).getCell(0);\n        } else {\n          value = null;\n        }\n        dataSet.dispose();\n        dataSet = null;\n        if (async) {\n          callback(value);\n        }\n      });\n      return value;\n    };\n    function getDataSetJString(data, async, callback) {\n      var result = null;\n      //data.sql = VIS.secureEngine.encrypt(data.sql);\n      $.ajax({\n        url: dataSetUrl,\n        type: "POST",\n        datatype: "json",\n        contentType: "application/json; charset=utf-8",\n        async: async,\n        data: JSON.stringify(data)\n      }).done(function (json) {\n        result = json;\n        if (callback) {\n          callback(json);\n        }\n      });\n      return result;\n    }\n    ;\n    this.lockUI = function (abc) {};\n    this.unlockUI = function (abc) {};\n\n    //********************\n    //Dispose Component\n    //********************\n    this.disposeComponent = function () {\n      windowNo = null;\n      $root = null;\n      $self = this;\n    };\n  }\n  ;\n\n  //Must Implement with same parameter\n  VPayPrint.prototype.init = function (windowNo, frame) {\n    //Assign to this Varable\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.frame.getContentGrid().append(this.getRoot());\n    this.initialize();\n  };\n\n  //Must implement dispose\n  VPayPrint.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VIS.Apps.AForms.VPayPrint = VPayPrint;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vpayprint.js?\n}')},"./Areas/VAS/Scripts/app/forms/vpayselect.js":()=>{eval('{/********************************************************\r\n * Module Name    : VIS\r\n * Purpose        : Create payment Selection(Manual) Form\r\n * Class Used     : \r\n * Chronological Development\r\n * Sarbjit Kaur     14 May 2015\r\n ******************************************************/\n;\nVIS = window.VIS || {};\n;\n(function (VIS, $) {\n  VIS.Apps.AForms = VIS.Apps.AForms || {};\n  function VPaySelect() {\n    this.windowNo;\n    var $root = $("<div style=\'width: 100%; height: 100%; background-color: white;\'>");\n    var $self = this;\n    var $divContainer = null;\n    var $divPSelectInfo = null;\n    var $divBankAccount = null;\n    var $divCurrentBalance = null;\n    var $divBusinessPartner = null;\n    var $divOnlyDueInvoice = null;\n    var $divPaymentDate = null;\n    var $divPaymentMethod = null;\n    var $divGridPSelect = null;\n    var $divProcessPSelect = null;\n    var $divLabel = null;\n    var $divPaymentAmount = null;\n    var $divProcessButtons = null;\n    var $cmbBankAccount = null;\n    var $cmbBusinessPartner = null;\n    var $cmbPaymentMethod = null;\n    var $cmbPaymentDate = null;\n    var $lblCurrentBal = null;\n    var $chkOnlyDueInvoice = null;\n    var $txtCurrentBal = null;\n    var $lblMsg = null;\n    var $txtPaymentAmount = null;\n    var arrListColumns = [];\n    var dGrid = null;\n    var $btnRequery = null;\n    var $btnOk = null;\n    var $btnCancel = null;\n    var rows = [];\n    var gridData = null;\n    var controlsData = null;\n    var paymentAmount = 0;\n    var $divBusy = null;\n    this.initialize = function () {\n      busyIndicator();\n      isBusy(true);\n      window.setTimeout(function () {\n        customDesign();\n      }, 20);\n    };\n    //*****************\n    //Load BusyDiv\n    //*****************\n    function busyIndicator() {\n      $divBusy = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n      //$divBusy.css({\n      //    "position": "absolute", "bottom": "0", "background": "url(\'" + VIS.Application.contextUrl + "Areas/VIS/Images/busy.gif\') no-repeat", "background-position": "center center",\n      //    "width": "98%", "height": "98%", \'text-align\': \'center\', \'opacity\': \'.1\', \'z-index\': \'9999999\'\n      //});\n      $divBusy[0].style.visibility = "hidden";\n      $root.append($divBusy);\n    }\n    ;\n    //*****************\n    //Show/Hide Busy Indicator\n    //*****************\n    function isBusy(show) {\n      if (show) {\n        $divBusy[0].style.visibility = "visible";\n      } else {\n        $divBusy[0].style.visibility = "hidden";\n      }\n    }\n    ;\n    //******************\n    //Custom Design of Paymnet Selection Form\n    //******************\n    function customDesign() {\n      var height = $(window).height() * (94 / 100);\n      $divContainer = $("<div class=\'vis-mainContainer\'>");\n      var designPSelectInfo = " <div class=\'vis-pSelectInfo vis-leftsidebarouterwrap\'>" // div pSelectInfo starts here\n      + "<div class=\'vis-pSelectInner\'>" + " <div class=\'vis-paymentselect-field\'>" // div bankAccount starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <select id=\'VIS_cmbBankAccount_" + $self.windowNo + "\'></select>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "C_BankAccount_ID") + " </label>" + "</div></div> </div>" // div bankAccount ends here \n      + " <div class=\'vis-paymentselect-field\'>" // div currentBalance starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <input type=\'text\' class=\'vis-fieldreadonly\' disabled id=\'VIS_txtCurrentBal_" + $self.windowNo + "\' MaxLength=\'50\' data-placeholder=\'\' placeholder=\' \'>" + " <label>" + VIS.Msg.getMsg("CurrentBalance") + " </label>" + "</div></div>  </div>" // div currentBalance ends here \n      + " <div class=\'vis-paymentselect-field\'>" // div businessPartner starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <select id=\'VIS_cmbbusinessPartner_" + $self.windowNo + "\'></select>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "C_BPartner_ID") + " </label>" + "</div></div>  </div>" // div businessPartner ends here                             \n      + " <div class=\'vis-paymentselect-field\'>" // div paymentDate starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <input  id=\'VIS_cmbPayDate_" + $self.windowNo + "\'type=\'date\' data-placeholder=\'\' placeholder=\' \'>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "PayDate") + " </label>" + "</div></div>  </div>" // div paymentDate ends here \n      + " <div class=\'vis-paymentselect-field\'>" // div paymentMethod starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <select id=\'VIS_cmbPaymentMethod_" + $self.windowNo + "\'></select>" + " <label>" + VIS.Msg.translate(VIS.Env.getCtx(), "PaymentRule") + " </label>" + "</div></div>  </div>" // div paymentMethod ends here \n      + " <div class=\'vis-paymentselect-field\'>" // div paymentAmount starts here\n      + \'<div class="input-group vis-input-wrap"><div class="vis-control-wrap">\' + " <input type=\'number\' id=\'VIS_txtPaymentAmount_" + $self.windowNo + "\' disabled MaxLength=\'50\' data-placeholder=\'\' placeholder=\' \'>" + " <label>" + VIS.Msg.getMsg("PaymentAmount") + " </label>" + "</div></div>  </div>" // div paymentAmount ends here \n      + " <div class=\'vis-paymentselect-field\'>" // div onlyDueInvoice starts here\n      + " <input type=\'checkbox\' id=\'VIS_chkOnlyDue_" + $self.windowNo + "\' data-placeholder=\'\' placeholder=\' \'>" + " <label for=\'VIS_chkOnlyDue_" + $self.windowNo + "\'>" + VIS.Msg.getMsg("OnlyDue") + " </label>" + "  </div>" // div onlyDueInvoice starts here\n      + " <div class=\'vis-paymentselect-field\'>" // div lblSHowDetail starts here                          \n      + " <label for=\'VIS_lblShowDetail_" + $self.windowNo + "\'></label>" + " </div>" // div lblSHowDetail ends here \n      + " </div>" // div vis-pSelectInner ends here \n      + " <div class=\'vis-paymentselect-field\'>" // div lblSHowDetail starts here\n      + " <button class=\'VIS_Pref_btn-2\' disabled id=\'VIS_btnRefresh_" + $self.windowNo + "\' style=\'margin-top: 0px;\'><i class=\'vis vis-refresh\'></i></button>" + " </div>" // btn ends here \n      + " </div>"; // div pSelectInfo ends here \n\n      $divGridPSelect = $("<div class=\'vis-pSelectIionGrid\'>");\n      var designPSelectProcess = " <div class=\'vis-pSelectProcess\'>" // div pSelectProcess starts here\n      + " <div class=\'vis-paymentselect-field\'>" // div lblMsg starts here    \n      + " <input id=\'VIS_btnCancel_" + $self.windowNo + "\' class=\'vis-frm-btn\' type=\'submit\' value=\'" + VIS.Msg.getMsg("Cancel") + "\' ></input>" + " <input id=\'VIS_btnOK_" + $self.windowNo + "\' disabled class=\'vis-frm-btn\' type=\'submit\' value=\'" + VIS.Msg.getMsg("OK") + "\' ></input>" + " </div>" // div pSelectButtons ends here \n      + " </div>"; // div pSelectProcess ends here \n      $divContainer.append($(designPSelectInfo)).append($divGridPSelect).append($(designPSelectProcess));\n      $root.append($divContainer);\n      findControls();\n    }\n    ;\n    //******************\n    //Find Controls through ID\n    //******************\n    function findControls() {\n      $cmbBankAccount = $(\'#VIS_cmbBankAccount_\' + $self.windowNo);\n      $cmbBusinessPartner = $(\'#VIS_cmbbusinessPartner_\' + $self.windowNo);\n      $cmbPaymentMethod = $(\'#VIS_cmbPaymentMethod_\' + $self.windowNo);\n      $txtCurrentBal = $(\'#VIS_txtCurrentBal_\' + $self.windowNo);\n      $chkOnlyDueInvoice = $(\'#VIS_chkOnlyDue_\' + $self.windowNo);\n      $txtPaymentAmount = $(\'#VIS_txtPaymentAmount_\' + $self.windowNo);\n      $lblMsg = $(\'#VIS_lblShowDetail_\' + $self.windowNo);\n      $btnRequery = $(\'#VIS_btnRefresh_\' + $self.windowNo);\n      $cmbPaymentDate = $(\'#VIS_cmbPayDate_\' + $self.windowNo);\n      $btnOk = $(\'#VIS_btnOK_\' + $self.windowNo);\n      $btnCancel = $(\'#VIS_btnCancel_\' + $self.windowNo);\n      var now = new Date();\n      var day = ("0" + now.getDate()).slice(-2);\n      var month = ("0" + (now.getMonth() + 1)).slice(-2);\n      var today = now.getFullYear() + "-" + month + "-" + day;\n      $cmbPaymentDate.val(today);\n      loadGrid();\n      eventHandling();\n      loadFormData();\n      if (controlsData.BankAccount.length > 0) {\n        setCurrentBalance();\n      }\n    }\n    ;\n    //******************\n    //EventHandling\n    //******************\n    function eventHandling() {\n      //**On click of Requery Button**//\n      $btnRequery.on("click", function () {\n        isBusy(true);\n        if (validateInput()) {\n          window.setTimeout(function () {\n            fetchGridRecords();\n            isBusy(false);\n          }, 20);\n        }\n      });\n\n      //**On click of OK Button**//\n      $btnOk.on("click", function () {\n        //Open Apyment Print form in CFrame\n        if (dGrid.getSelection().length <= 0) {\n          VIS.ADialog.info("PleaseSelectRecord");\n          return false;\n        }\n        var selectedIndex = dGrid.getSelection();\n        if (selectedIndex.length > 0) {\n          for (var i = 0; i < selectedIndex.length; i++) {\n            gridData[selectedIndex[i]].SELECT = true;\n          }\n          isBusy(true);\n          window.setTimeout(function () {\n            generatePaymentSelection();\n          }, 20);\n        }\n      });\n\n      //**On click of Cancel Button**//\n      $btnCancel.on("click", function () {\n        $self.dispose();\n      });\n\n      //**On change of Bank Account($cmbBankAccount) **//\n      $cmbBankAccount.on("change", function () {\n        isBusy(true);\n        window.setTimeout(function () {\n          getPaymentMethod();\n          setCurrentBalance();\n          isBusy(false);\n        }, 20);\n      });\n\n      //**On checked change of Only Due Invoice checkbox **//\n      $chkOnlyDueInvoice.on("click", function () {\n        $btnRequery.trigger("click");\n      });\n    }\n    ;\n    //******************\n    //Load Grid \n    //******************\n    function loadGrid() {\n      try {\n        if (dGrid != null) {\n          dGrid.destroy();\n          dGrid = null;\n        }\n      } catch (err) {}\n      if (arrListColumns.length == 0) {\n        //debugger;\n        arrListColumns.push({\n          field: "SELECT",\n          caption: VIS.Msg.getMsg("SELECT"),\n          sortable: true,\n          size: \'100px\',\n          hidden: true\n        });\n        arrListColumns.push({\n          field: "C_INVOICE_ID",\n          caption: VIS.Msg.getMsg("Invoice"),\n          sortable: true,\n          size: \'100px\'\n        });\n        arrListColumns.push({\n          field: "DUEDATE",\n          caption: VIS.Msg.getMsg("DueDate"),\n          sortable: true,\n          size: \'100px\',\n          render: function (record, index, col_index) {\n            var val;\n            if (record.changes == undefined || record.changes.DUEDATE == undefined) {\n              val = record["DUEDATE"];\n            } else {\n              val = record.changes.DUEDATE;\n            }\n            return new Date(val).toLocaleDateString();\n          }\n        });\n        arrListColumns.push({\n          field: "BUSINESSPARTNER",\n          caption: VIS.Msg.getMsg("BusinessPartner"),\n          sortable: true,\n          size: \'100px\'\n        });\n        arrListColumns.push({\n          field: "DOCUMENTNO",\n          caption: VIS.Msg.getMsg("Document_No"),\n          sortable: true,\n          size: \'100px\'\n        });\n        arrListColumns.push({\n          field: "CURRENCY",\n          caption: VIS.Msg.getMsg("Currency"),\n          sortable: true,\n          size: \'100px\'\n        });\n        arrListColumns.push({\n          field: "GRANDTOTAL",\n          caption: VIS.Msg.getMsg("GrandTotal"),\n          sortable: true,\n          size: \'100px\',\n          render: function (record, index, col_index) {\n            var val = record["GRANDTOTAL"];\n            return parseFloat(val).toLocaleString();\n          }\n        });\n        arrListColumns.push({\n          field: "DISCOUNTAMOUNT",\n          caption: VIS.Msg.getMsg("DiscountAmt"),\n          sortable: true,\n          size: \'100px\',\n          render: function (record, index, col_index) {\n            var val = record["DISCOUNTAMOUNT"];\n            return parseFloat(val).toLocaleString();\n          }\n        });\n        arrListColumns.push({\n          field: "DISCOUNTDATE",\n          caption: VIS.Msg.getMsg("DiscountDate"),\n          sortable: true,\n          size: \'100px\',\n          render: function (record, index, col_index) {\n            var val;\n            if (record.changes == undefined || record.changes.DISCOUNTDATE == undefined) {\n              val = record["DISCOUNTDATE"];\n            } else {\n              val = record.changes.DISCOUNTDATE;\n            }\n            return new Date(val).toLocaleDateString();\n          }\n        });\n        arrListColumns.push({\n          field: "AMOUNTDUE",\n          caption: VIS.Msg.getMsg("AmountDue"),\n          sortable: true,\n          size: \'100px\',\n          render: function (record, index, col_index) {\n            var val = record["AMOUNTDUE"];\n            return parseFloat(val).toLocaleString();\n          }\n        });\n        arrListColumns.push({\n          field: "PAYMENTAMOUNT",\n          caption: VIS.Msg.getMsg("PaymentAmount"),\n          sortable: true,\n          size: \'100px\',\n          render: function (record, index, col_index) {\n            var val = record["PAYMENTAMOUNT"];\n            return parseFloat(val).toLocaleString();\n          }\n        });\n      }\n      dGrid = $divGridPSelect.w2grid({\n        name: "gridPaymentSelection_" + $self.windowNo,\n        recordHeight: 40,\n        show: {\n          selectColumn: true\n        },\n        multiSelect: true,\n        columns: arrListColumns,\n        records: rows\n      });\n\n      //**On GridViewrow selected  **//\n      dGrid.on(\'select\', function (event) {\n        paymentAmount += VIS.Utility.Util.getValueOfDecimal(rows[event.index].PAYMENTAMOUNT);\n        $txtPaymentAmount.val(paymentAmount);\n        var selectedIndex = dGrid.getSelection();\n        //if (selectedIndex.length > 0) {\n        $btnOk.removeAttr("disabled");\n        // }\n      });\n      //**On GridViewrow selected  **//\n      dGrid.on(\'unselect\', function (event) {\n        paymentAmount -= VIS.Utility.Util.getValueOfDecimal(rows[event.index].PAYMENTAMOUNT);\n        $txtPaymentAmount.val(paymentAmount);\n        var selectedIndex = dGrid.getSelection();\n        //if (selectedIndex.length > 0) {\n        //    $btnOk.removeAttr("disabled");\n        //}\n        //else {\n        //    $btnOk.attr("disabled");\n        //}\n      });\n    }\n    ;\n    //********************\n    //Fetch Grid Records\n    //*********************\n    function fetchGridRecords() {\n      rows = [];\n      var count = 0;\n      var param = [];\n      param.push($cmbBankAccount.val());\n      if (controlsData != null) {\n        var selectedBackAccount = jQuery.grep(controlsData.BankAccount, function (value) {\n          return value.ID == VIS.Utility.Util.getValueOfInt($cmbBankAccount.val());\n        });\n        if (selectedBackAccount.length > 0) {\n          param.push(selectedBackAccount[0].Currency_ID);\n        } else {\n          param.push(0);\n        }\n      } else {\n        param.push(0);\n      }\n      param.push($cmbBusinessPartner.val());\n      param.push($cmbPaymentDate.val());\n      param.push($cmbPaymentMethod.val());\n      param.push($txtPaymentAmount.val());\n      param.push($chkOnlyDueInvoice.prop("checked"));\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPaySelect/GetGridRecords",\n        async: false,\n        datatype: "Json",\n        type: "POST",\n        cache: false,\n        contentType: \'application/json; charset=utf-8\',\n        data: JSON.stringify(param),\n        success: function (jsonResult) {\n          var data = JSON.parse(jsonResult);\n          rows = [];\n          if (data != null || data != undefined) {\n            gridData = data;\n            for (i = 0; i < data.length; i++) {\n              var line = {};\n              line[\'SELECT\'] = data[i].SELECT;\n              line[\'C_INVOICE_ID\'] = data[i].C_INVOICE_ID;\n              line[\'DUEDATE\'] = data[i].DUEDATE;\n              line[\'BUSINESSPARTNER\'] = data[i].BUSINESSPARTNER;\n              line[\'DOCUMENTNO\'] = data[i].DOCUMENTNO;\n              line[\'CURRENCY\'] = data[i].CURRENCY;\n              line[\'GRANDTOTAL\'] = data[i].GRANDTOTAL;\n              line[\'DISCOUNTAMOUNT\'] = data[i].DISCOUNTAMOUNT;\n              line[\'DISCOUNTDATE\'] = data[i].DISCOUNTDATE;\n              line[\'AMOUNTDUE\'] = data[i].AMOUNTDUE;\n              line[\'PAYMENTAMOUNT\'] = data[i].PAYMENTAMOUNT;\n              line[\'recid\'] = count;\n              count++;\n              rows.push(line);\n            }\n          } else {}\n        },\n        error: function (e) {\n          console.log(e);\n        }\n      });\n      //if (gridData.length > 0) {\n      loadGrid();\n      // }\n    }\n    ;\n    //******************\n    //Load Data on Form Load\n    //******************\n    function loadFormData() {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPaySelect/GetDetail",\n        async: false,\n        datatype: "Json",\n        type: "GET",\n        cache: false,\n        success: function (jsonResult) {\n          var data = JSON.parse(jsonResult);\n          controlsData = data;\n          if (data != null || data != undefined) {\n            if (data.BankAccount.length > 0) {\n              $btnRequery.removeAttr("disabled");\n              fillData(data);\n            }\n          }\n          isBusy(false);\n        },\n        error: function (e) {\n          console.log(e);\n          isBusy(false);\n        }\n      });\n    }\n    ;\n    //******************\n    //Fill Data in Controls\n    //******************\n    function fillData(data) {\n      //* Load BankAccount\n      if (data.BankAccount != null || data.BankAccount.length > 0) {\n        $cmbBankAccount.empty();\n        for (var i in data.BankAccount) {\n          $cmbBankAccount.append($(\'<Option value="\' + data.BankAccount[i].ID + \'">\' + data.BankAccount[i].Value + \'</option>\'));\n        }\n      }\n      //* Load BusinessPartner\n      if (data.BusinessPartner != null || data.BusinessPartner.length > 0) {\n        $cmbBusinessPartner.empty();\n        $cmbBusinessPartner.append($(\'<Option value="-1"></option>\'));\n        for (var i in data.BusinessPartner) {\n          $cmbBusinessPartner.append($(\'<Option value="\' + data.BusinessPartner[i].ID + \'">\' + data.BusinessPartner[i].Value + \'</option>\'));\n        }\n      }\n      //* Load PaymentMethod\n      if (data.PaymentMethod != null || data.PaymentMethod.length > 0) {\n        $cmbPaymentMethod.empty();\n        for (var i in data.PaymentMethod) {\n          $cmbPaymentMethod.append($(\'<Option value="\' + data.PaymentMethod[i].ID + \'">\' + data.PaymentMethod[i].Value + \'</option>\'));\n        }\n      }\n      isBusy(false);\n    }\n    ;\n    //******************\n    //Get Payment Method\n    //******************\n    function getPaymentMethod() {\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPaySelect/GetPaymentMethod",\n        async: false,\n        datatype: "Json",\n        type: "GET",\n        cache: false,\n        data: {\n          C_BankAccount_ID: parseInt($cmbBankAccount.val())\n        },\n        success: function (jsonResult) {\n          var data = JSON.parse(jsonResult);\n          if (data != null || data != undefined) {\n            //* Load PaymentMethod\n            if (data != null || data.length > 0) {\n              $cmbPaymentMethod.empty();\n              for (var i in data) {\n                $cmbPaymentMethod.append($(\'<Option value="\' + data[i].ID + \'">\' + data[i].Value + \'</option>\'));\n              }\n            }\n          }\n        },\n        error: function (e) {\n          console.log(e);\n        }\n      });\n    }\n    ;\n    //******************\n    //Set Current Balance\n    //******************\n    function setCurrentBalance() {\n      var selectedBackAccount = jQuery.grep(controlsData.BankAccount, function (value) {\n        return value.ID == VIS.Utility.Util.getValueOfInt($cmbBankAccount.val());\n      });\n      if (selectedBackAccount.length > 0) {\n        $txtCurrentBal.val(selectedBackAccount[0].CurrentBalance + " " + selectedBackAccount[0].ISOCode);\n      }\n    }\n    ;\n    //*******************\n    //Validate Input\n    //*******************\n    function validateInput() {\n      if ($cmbBusinessPartner != null && $cmbBusinessPartner.val() <= 0) {\n        VIS.ADialog.info("SelectBusinessPartnerFirst");\n        isBusy(false);\n        return false;\n      }\n      return true;\n    }\n    ;\n    //*******************\n    //Generate Payment Selection\n    //*******************\n    function generatePaymentSelection() {\n      var param = [];\n      param.push($cmbBankAccount.val());\n      if (controlsData != null) {\n        var selectedBackAccount = jQuery.grep(controlsData.BankAccount, function (value) {\n          return value.ID == VIS.Utility.Util.getValueOfInt($cmbBankAccount.val());\n        });\n        param.push(selectedBackAccount[0].Currency_ID);\n      } else {\n        param.push(0);\n      }\n      param.push($cmbBusinessPartner.val());\n      param.push($cmbPaymentDate.val());\n      param.push($cmbPaymentMethod.val());\n      param.push($txtPaymentAmount.val());\n      param.push($chkOnlyDueInvoice.prop("checked"));\n      param.push(JSON.stringify(gridData));\n      $.ajax({\n        url: VIS.Application.contextUrl + "VPaySelect/GeneratePaymentSelection",\n        async: false,\n        datatype: "Json",\n        type: "POST",\n        cache: false,\n        contentType: \'application/json; charset=utf-8\',\n        data: JSON.stringify(param),\n        success: function (jsonResult) {\n          var data = JSON.parse(jsonResult);\n          if (data != null || data != undefined) {\n            //Open Apyment Print form in CFrame\n            $self.dispose();\n            var c = new VIS.CFrame();\n            var paymentPrint = new VIS.Apps.AForms.VPayPrint();\n            c.setName(VIS.Msg.getMsg("Payment Print/Export"));\n            c.setTitle(VIS.Msg.getMsg("Payment Print/Export"));\n            c.hideHeader(false);\n            c.setContent(paymentPrint);\n            c.show();\n            paymentPrint.initialize();\n          }\n        },\n        error: function (e) {\n          console.log(e);\n        }\n      });\n    }\n    ;\n    //*******************\n    //Get Root\n    //*******************\n    this.getRoot = function () {\n      return $root;\n    };\n    //********************\n    //Dispose Component\n    //********************\n    this.disposeComponent = function () {\n      windowNo = null;\n      $root = null;\n      $self = this;\n      $divContainer = null;\n      $divPSelectInfo = null;\n      $divBankAccount = null;\n      $divCurrentBalance = null;\n      $divBusinessPartner = null;\n      $divOnlyDueInvoice = null;\n      $divPaymentDate = null;\n      $divPaymentMethod = null;\n      $divGridPSelect = null;\n      $divProcessPSelect = null;\n      $divLabel = null;\n      $divPaymentAmount = null;\n      $divProcessButtons = null;\n      $cmbBankAccount = null;\n      $cmbBusinessPartner = null;\n      $cmbPaymentMethod = null;\n      $cmbPaymentDate = null;\n      $lblCurrentBal = null;\n      $chkOnlyDueInvoice = null;\n      $txtCurrentBal = null;\n      $lblMsg = null;\n      $txtPaymentAmount = null;\n      arrListColumns = null;\n      dGrid = null;\n      $btnRequery = null;\n      $btnOk = null;\n      $btnCancel = null;\n      rows = null;\n    };\n  }\n  ;\n\n  //Must Implement with same parameter\n  VPaySelect.prototype.init = function (windowNo, frame) {\n    //Assign to this Varable\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.frame.getContentGrid().append(this.getRoot());\n    this.initialize();\n  };\n\n  //Must implement dispose\n  VPaySelect.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VIS.Apps.AForms.VPaySelect = VPaySelect;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vpayselect.js?\n}')},"./Areas/VAS/Scripts/app/forms/vtrxmaterial.js":()=>{eval('{/********************************************************\r\n * Module Name    : VIS\r\n * Purpose        : Material Transaction Form\r\n * Class Used     : \r\n * Chronological Development\r\n * Sarbjit Kaur     14 May 2015\r\n ******************************************************/\n;\nVIS = window.VIS || {};\n;\n(function (VIS, $) {\n  VIS.Apps.AForms = VIS.Apps.AForms || {};\n  function VTrxMaterial() {\n    this.windowNo = null;\n    var $root = $("<div style=\'width: 100%; height: 100%; background-color: white;\'>");\n    var $self = this;\n    var $divContainer = null;\n    var $divPSelectInfo = null;\n    var $divGridPSelect = null;\n    var $divProcessPSelect = null;\n    var $divLabel = null;\n    var $divPaymentAmount = null;\n    var $divProcessButtons = null;\n    var $cmbOrganization = null;\n    var $cmbMoventType = null;\n    var $cmbLocator = null;\n    var $cmbProduct = null;\n    var $dtpFromDate = null;\n    var $dtpToDate = null;\n    var arrListColumns = [];\n    var dGrid = null;\n    var $btnRequery = null;\n    var $btnZoom = null;\n    var $btnOk = null;\n    var $btnCancel = null;\n    var rows = [];\n    var gridData = null;\n    var controlsData = null;\n    var paymentAmount = 0;\n    var $divBusy = null;\n    var $locator = null;\n    var $product = null;\n    var gridController = null;\n    var query = null;\n    var _mTab = null;\n    var baseUrl = VIS.Application.contextUrl;\n    var dataSetUrl = baseUrl + "JsonData/JDataSetWithCode";\n    this.initialize = function () {\n      busyIndicator();\n      isBusy(true);\n      window.setTimeout(function () {\n        customDesign();\n        isBusy(false);\n      }, 20);\n    };\n    //*****************\n    //Load BusyDiv\n    //*****************\n    function busyIndicator() {\n      $divBusy = $(\'<div class="vis-busyindicatorouterwrap" style="visibility: hidden;"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n      //$divBusy.css({\n      //    "position": "absolute", "bottom": "0", "background": "url(\'" + VIS.Application.contextUrl + "Areas/VIS/Images/busy.gif\') no-repeat", "background-position": "center center",\n      //    "width": "98%", "height": "98%", \'text-align\': \'center\', \'opacity\': \'.1\', \'z-index\': \'9999999\'\n      //});\n      $divBusy[0].style.visibility = "hidden";\n      $root.append($divBusy);\n    }\n    ;\n    //*****************\n    //Show/Hide Busy Indicator\n    //*****************\n    function isBusy(show) {\n      if (show) {\n        $divBusy[0].style.visibility = "visible";\n      } else {\n        $divBusy[0].style.visibility = "hidden";\n      }\n    }\n    ;\n    //******************\n    //Custom Design of Paymnet Selection Form\n    //******************\n    function customDesign() {\n      var height = $(window).height() * (96 / 100);\n      var lookupOrg = VIS.MLookupFactory.get(VIS.Env.getCtx(), 0, 0, VIS.DisplayType.TableDir, "AD_Org_ID", 0, false, " AD_Org.AD_Org_ID <> 0 AND AD_Org.IsSummary=\'N\' AND AD_Org.IsActive=\'Y\' AND AD_Org.IsCostCenter=\'N\' AND AD_Org.IsProfitCenter=\'N\' ");\n      $cmbOrganization = new VIS.Controls.VComboBox("AD_Org_ID", false, false, true, lookupOrg, 50);\n\n      // var lookupMoventType = VIS.MLookupFactory.get(VIS.Env.getCtx(), $self.windowNo, 3666, VIS.DisplayType.List, "MovementType",189, false, null);\n      var lookupMoventType = VIS.MLookupFactory.get(VIS.Env.getCtx(), 0, 0, VIS.DisplayType.List, "MovementType", 189, false, null);\n      $cmbMoventType = new VIS.Controls.VComboBox("MovementType", false, false, true, lookupMoventType, 29);\n\n      //*************Lookup for Locator************            \n      //var containerdivLocator = $(\'<div class="d-flex"></div>\');\n      var $divLocatorInputwrap = $("<div class=\'input-group vis-input-wrap\'>");\n      var $divLocatorCtrlwrap = $("<div class=\'vis-control-wrap\'>");\n      var $divLocatorBtnwrap = $("<div class=\'input-group-append\'>");\n      var lookupLocator = VIS.MLookupFactory.get(VIS.context, 0, 0, VIS.DisplayType.Search, "M_Locator_ID", 0, false, "");\n      $locator = new VIS.Controls.VTextBoxButton("M_Locator_ID", false, false, true, VIS.DisplayType.Search, lookupLocator);\n      $divLocatorInputwrap.append($divLocatorCtrlwrap);\n      $divLocatorCtrlwrap.append($locator.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n      $divLocatorInputwrap.append($divLocatorBtnwrap);\n      $divLocatorBtnwrap.append($locator.getBtn(0));\n      $divLocatorBtnwrap.append($locator.getBtn(1));\n      // $locator.getControl().css("width", "73%");\n      //$locator.getControl().addClass("vis-lookupTextboxes");\n      $locator.getBtn(0).addClass("vis-lookupButtons");\n      $locator.getBtn(1).addClass("vis-lookupButtons");\n      // $locator.getBtn(0).css("float", "left");\n      //  $locator.getBtn(1).css("float", "right");\n      //$locator.getBtn(0).css("height", "30");\n      //$locator.getBtn(0).css("width", "30");\n      //$locator.getBtn(1).css("width", "30");\n      //$locator.getBtn(1).css("height", "30");\n      //$locator.getBtn(0).css("padding", "0px");\n      //$locator.getBtn(1).css("padding", "0px");\n      //*******LookUp Locator Ends**************\n      //*************Lookup for Product************            \n      //var containerdivProduct = $(\'<div class="d-flex"></div>\');\n      var $divProductInputwrap = $("<div class=\'input-group vis-input-wrap\'>");\n      var $divProductCtrlwrap = $("<div class=\'vis-control-wrap\'>");\n      var $divProductBtnwrap = $("<div class=\'input-group-append\'>");\n      var lookupProduct = VIS.MLookupFactory.get(VIS.context, 0, 0, VIS.DisplayType.Search, "M_Product_ID", 0, false, "");\n      $product = new VIS.Controls.VTextBoxButton("M_Product_ID", false, false, true, VIS.DisplayType.Search, lookupProduct);\n      $divProductInputwrap.append($divProductCtrlwrap);\n      $divProductCtrlwrap.append($product.getControl().attr(\'data-placeholder\', \'\').attr(\'placeholder\', \' \').attr(\'data-hasbtn\', \' \'));\n      $divProductInputwrap.append($divProductBtnwrap);\n      $divProductBtnwrap.append($product.getBtn(0));\n      $divProductBtnwrap.append($product.getBtn(1));\n      // $product.getControl().css("width", "73%");\n      //$product.getControl().addClass("vis-lookupTextboxes");\n      $product.getBtn(0).addClass("vis-lookupButtons");\n      $product.getBtn(1).addClass("vis-lookupButtons");\n      //$product.getBtn(0).css("float", "left");\n      //$product.getBtn(1).css("float", "right");\n      //$product.getBtn(0).css("height", "30");\n      //$product.getBtn(0).css("width", "30");\n      //$product.getBtn(0).css("padding", "0px");\n      //$product.getBtn(1).css("height", "30");\n      //$product.getBtn(1).css("width", "30");\n      //$product.getBtn(0).css("padding", "0px");\n      //$product.getBtn(1).css("padding", "0px");\n      //*******LookUp Product Ends**************\n      $divContainer = $("<div class=\'vis-mainContainer\'>");\n      var $divInfo = $("<div class=\'vis-pSelectInfo vis-leftsidebarouterwrap\'>");\n      var $divInfoinn = $("<div class=\'vis-pSelectInner\'>");\n      $divInfo.append($divInfoinn);\n      var $divOrganization = $("<div class=\'vis-paymentselect-field\'>");\n      var $divOrganizationInputwrap = $("<div class=\'input-group vis-input-wrap\'>");\n      var $divOrganizationCtrlwrap = $("<div class=\'vis-control-wrap\'>");\n      $divOrganization.append($divOrganizationInputwrap);\n      $divOrganizationInputwrap.append($divOrganizationCtrlwrap);\n      $divOrganizationCtrlwrap.append($cmbOrganization.getControl());\n      $divOrganizationCtrlwrap.append($("<label>" + VIS.Msg.translate(VIS.Env.getCtx(), "AD_Org_ID") + " </label>"));\n      $divInfoinn.append($divOrganization);\n      var $divMovementType = $("<div class=\'vis-paymentselect-field\'>");\n      var $divMovementTypeInputwrap = $("<div class=\'input-group vis-input-wrap\'>");\n      var $divMovementTypeCtrlwrap = $("<div class=\'vis-control-wrap\'>");\n      $divMovementType.append($divMovementTypeInputwrap);\n      $divMovementTypeInputwrap.append($divMovementTypeCtrlwrap);\n      $divMovementTypeCtrlwrap.append($cmbMoventType.getControl());\n      $divMovementTypeCtrlwrap.append($("<label>" + VIS.Msg.translate(VIS.Env.getCtx(), "MovementType") + " </label>"));\n      $divInfoinn.append($divMovementType);\n      var $divLocator = $("<div class=\'vis-paymentselect-field\'>");\n      $divLocator.append($divLocatorInputwrap);\n      $divLocatorCtrlwrap.append($("<label>" + VIS.Msg.translate(VIS.Env.getCtx(), "M_Locator_ID") + " </label>"));\n      $divInfoinn.append($divLocator);\n      var $divProduct = $("<div class=\'vis-paymentselect-field\'>");\n      $divProduct.append($divProductInputwrap);\n      $divProductCtrlwrap.append($("<label>" + VIS.Msg.translate(VIS.Env.getCtx(), "Product") + " </label>"));\n      //$divProduct.append(containerdivProduct);\n      $divInfoinn.append($divProduct);\n      var $divFromDate = $("<div class=\'vis-paymentselect-field\'>");\n      var $divFromDateInputwrap = $("<div class=\'input-group vis-input-wrap\'>");\n      var $divFromDateCtrlwrap = $("<div class=\'vis-control-wrap\'>");\n      $divFromDateCtrlwrap.append($("<input  id=\'VIS_dtpFromDate" + $self.windowNo + "\'type=\'date\'>"));\n      $divFromDateCtrlwrap.append($("<label>" + VIS.Msg.translate(VIS.Env.getCtx(), "DateFrom") + " </label>"));\n      $divFromDate.append($divFromDateInputwrap);\n      $divFromDateInputwrap.append($divFromDateCtrlwrap);\n      $divInfoinn.append($divFromDate);\n      var $divToDate = $("<div class=\'vis-paymentselect-field\'>");\n      var $divToDateInputwrap = $("<div class=\'input-group vis-input-wrap\'>");\n      var $divToDateCtrlwrap = $("<div class=\'vis-control-wrap\'>");\n      $divToDateCtrlwrap.append($("<input  id=\'VIS_dtpToDate" + $self.windowNo + "\'type=\'date\'>"));\n      $divToDateCtrlwrap.append($("<label>" + VIS.Msg.translate(VIS.Env.getCtx(), "DateTo") + " </label>"));\n      $divToDate.append($divToDateInputwrap);\n      $divToDateInputwrap.append($divToDateCtrlwrap);\n      $divInfoinn.append($divToDate);\n      var $divRefresh = $("<div class=\'vis-paymentselect-field\'>");\n      // $divRefresh.append($("<label style=\'width:100%;\'>" + VIS.Msg.translate(VIS.Env.getCtx(), "DateTo") + " </label>"));\n      $divRefresh.append($("<button class=\'VIS_Pref_btn-2\' id=\'VIS_btnRefresh_" + $self.windowNo + "\' style=\'margin-top: 0px;\'><i class=\'vis vis-refresh\'></i></button>"));\n      $divInfo.append($divRefresh);\n      var $divZoom = $("<div class=\'vis-paymentselect-field\'>");\n      // $divRefresh.append($("<label style=\'width:100%;\'>" + VIS.Msg.translate(VIS.Env.getCtx(), "DateTo") + " </label>"));\n      $divZoom.append($("<button class=\'VIS_Pref_btn-2\' id=\'VIS_btnZoom_" + $self.windowNo + "\' style=\'margin-top: 0px;\'><i class=\'vis vis-find\'></i></button>"));\n      $divInfo.append($divZoom);\n      $divGridPSelect = $("<div class=\'vis-pSelectIionGrid\'>");\n      var designPSelectProcess = " <div class=\'vis-pSelectProcess\'>" // div pSelectProcess starts here\n      + " <div class=\'vis-paymentselect-field\'>" // div  starts here    \n      + " <input id=\'VIS_btnCancel_" + $self.windowNo + "\' class=\'vis-frm-btn\' type=\'submit\' value=\'" + VIS.Msg.getMsg("Cancel") + "\' ></input>" + " <input id=\'VIS_btnOK_" + $self.windowNo + "\' class=\'vis-frm-btn\' type=\'submit\' value=\'" + VIS.Msg.getMsg("OK") + "\' ></input>" + " </div>" // div pSelectButons ends here \n      + " </div>"; // div pSelectProcess ends here \n      $divContainer.append($divInfo).append($divGridPSelect).append($(designPSelectProcess));\n      $root.append($divContainer);\n      findControls();\n      window.setTimeout(function () {\n        loadGrid();\n      }, 20);\n      eventHandling();\n      isBusy(true);\n    }\n    ;\n    //******************\n    //Find Controls through ID\n    //******************\n    function findControls() {\n      //   $cmbOrganization = $(\'#VIS_cmbOrg_\' + $self.windowNo);\n      // $cmbMoventType = $(\'#VIS_cmbMovementType_\' + $self.windowNo);\n      //  $cmbLocator = $(\'#VIS_cmbLocator_\' + $self.windowNo);\n      // $cmbProduct = $(\'#VIS_cmbProduct_\' + $self.windowNo);\n      $dtpFromDate = $(\'#VIS_dtpFromDate\' + $self.windowNo);\n      $dtpToDate = $(\'#VIS_dtpToDate\' + $self.windowNo);\n      $btnRequery = $(\'#VIS_btnRefresh_\' + $self.windowNo);\n      $btnZoom = $(\'#VIS_btnZoom_\' + $self.windowNo);\n      $btnOk = $(\'#VIS_btnOK_\' + $self.windowNo);\n      $btnCancel = $(\'#VIS_btnCancel_\' + $self.windowNo);\n      var now = new Date();\n      var day = ("0" + now.getDate()).slice(-2);\n      var month = ("0" + (now.getMonth() + 1)).slice(-2);\n      var today = now.getFullYear() + "-" + month + "-" + day;\n      //  $dtpFromDate.val(today);\n      // $dtpToDate.val(today);\n    }\n    ;\n    //******************\n    //EventHandling\n    //******************\n    function eventHandling() {\n      //**On click of Requery Button**//\n      $btnRequery.on("click", function () {\n        refresh();\n      });\n\n      //**On click of Requery Button**//\n      $btnZoom.on("click", function () {\n        zoom();\n      });\n\n      //**On click of OK Button**//\n      $btnOk.on("click", function () {\n        refresh();\n      });\n\n      //**On click of Cancel Button**//\n      $btnCancel.on("click", function () {\n        $self.dispose();\n      });\n    }\n    ;\n    //*******************\n    //Execute Query\n    //*******************\n    function loadGrid() {\n      var AD_Window_ID = 223; //\tMavarain Account Combinations \n      VIS.AEnv.getGridWindow($self.windowNo, AD_Window_ID, function (json) {\n        if (json.error != null) {\n          VIS.ADialog.error(json.error); //log error\n          self.dispose();\n          self = null;\n          return;\n        }\n        var jsonData = $.parseJSON(json.result); // widow json\n        VIS.context.setContextOfWindow($.parseJSON(json.wCtx), $self.windowNo); // set window context\n        var GridWindow = new VIS.GridWindow(jsonData);\n        if (GridWindow == null) {\n          return;\n        }\n        _mTab = GridWindow.getTabs()[0];\n        // var id = windowNo + "_" + C_AcctSchema_ID; //uniqueID\n        gridController = new VIS.GridController(false);\n        gridController.initGrid(true, $self.windowNo, $self, _mTab);\n        gridController.setVisible(true);\n        // gridController.sizeChanged(530, 400);\n        if (window.innerHeight > 700) {\n          gridController.sizeChanged(window.innerHeight - 230, window.innerWidth);\n        } else {\n          gridController.sizeChanged(window.innerHeight - 215, window.innerWidth);\n        }\n        $divGridPSelect.append(gridController.getRoot());\n        gridController.activate();\n        query = new VIS.Query();\n        query.addRestriction("AD_Client_ID", VIS.Query.prototype.EQUAL, VIS.context.getAD_Client_ID());\n        //_mTab.setQuery(query);\n        //gridController.query(0, 0, false);\n      });\n    }\n    ;\n    //********************\n    //Refresh grid records\n    //********************\n    function refresh() {\n      var localquery = null;\n      if (query != null) {\n        //localquery = query;//query.DeepCopy();\n        localquery = jQuery.extend(true, {}, query);\n      } else {\n        localquery = new VIS.Query();\n      }\n      //var query = _staticQuery.DeepCopy();\n      //  Organization\n      var value = $cmbOrganization.getValue();\n      //no selected value in the Combo\n      if (value == null || value.toString() == "-1" || value.toString().trim().length == 0) {\n        value = null;\n      }\n      if (value != null && value.toString().length > 0) {\n        localquery.addRestriction("AD_Org_ID", VIS.Query.prototype.EQUAL, value);\n      }\n      //  Locator\n      value = $locator.getValue();\n      if (value != null && value.toString().length > 0) {\n        localquery.addRestriction("M_Locator_ID", VIS.Query.prototype.EQUAL, value);\n      }\n      //  Product\n      value = $product.getValue();\n      ;\n      if (value != null && value.toString().length > 0) {\n        localquery.addRestriction("M_Product_ID", VIS.Query.prototype.EQUAL, value);\n      }\n      //  MovementType\n      value = $cmbMoventType.getValue();\n      if (value == null || value.toString() == "-1" || value.toString().trim().length == 0) {\n        value = null;\n      }\n      if (value != null && value.toString().length > 0) {\n        localquery.addRestriction("MovementType", VIS.Query.prototype.EQUAL, value);\n      }\n      //  DateFrom\n      var ts = $dtpFromDate.val().toString();\n      if (ts != null && ts.length > 0) {\n        ts = new Date(ts);\n        localquery.addRestriction("TRUNC(MovementDate,\'DD\')", VIS.Query.prototype.GREATER_EQUAL, ts);\n      }\n      //  DateTO\n      ts = $dtpToDate.val().toString();\n      if (ts != null && ts.length > 0) {\n        ts = new Date(ts);\n        localquery.addRestriction("TRUNC(MovementDate,\'DD\')", VIS.Query.prototype.LESS_EQUAL, ts);\n      }\n      //  gridController.registerIBusy(this);\n      _mTab.setQuery(localquery);\n      //_mTab.Query(0);\n      gridController.query(0, 0, false);\n    }\n    ;\n    //********************\n    //Zoom record\n    //********************\n    function zoom() {\n      var AD_Window_ID = 0;\n      var ColumnName = null;\n      var SQL = null;\n      var params = [];\n      //\n      var lineID = VIS.context.getContextAsInt($self.windowNo, "M_InOutLine_ID");\n      if (lineID != 0) {\n        if (VIS.context.getContext($self.windowNo, "MovementType").equals("C-")) {\n          AD_Window_ID = 169; //  Customer Shipment\n        } else if (VIS.context.getContext($self.windowNo, "MovementType").equals("C+")) {\n          AD_Window_ID = 409; //  Customer Return\n        } else if (VIS.context.getContext($self.windowNo, "MovementType").equals("V+")) {\n          AD_Window_ID = 184; //  Vendor Receipt\n        } else if (VIS.context.getContext($self.windowNo, "MovementType").equals("V-")) {\n          AD_Window_ID = 411; //  Vendor Return\n        }\n        ColumnName = "M_InOut_ID";\n        SQL = "VIS_140";\n        params[0] = new VIS.DB.SqlParam("@lineID", lineID);\n      } else {\n        lineID = VIS.context.getContextAsInt($self.windowNo, "M_InventoryLine_ID");\n        if (lineID != 0) {\n          //  log.Fine("M_InventoryLine_ID=" + lineID);\n          AD_Window_ID = 168;\n          ColumnName = "M_Inventory_ID";\n          SQL = "VIS_141";\n          params[0] = new VIS.DB.SqlParam("@lineID", lineID);\n          ///SQL = "SELECT M_Inventory_ID FROM M_InventoryLine WHERE M_InventoryLine_ID=" + lineID;\n        } else {\n          lineID = VIS.context.getContextAsInt($self.windowNo, "M_MovementLine_ID");\n          if (lineID != 0) {\n            // log.Fine("M_MovementLine_ID=" + lineID);\n            AD_Window_ID = 170;\n            ColumnName = "M_Movement_ID";\n            SQL = "VIS_142";\n            params[0] = new VIS.DB.SqlParam("@lineID", lineID);\n          } else {\n            lineID = VIS.context.getContextAsInt($self.windowNo, "M_ProductionLine_ID");\n            if (lineID != 0) {\n              // log.Fine("M_ProductionLine_ID=" + lineID);\n              AD_Window_ID = 191;\n              ColumnName = "M_Production_ID";\n              SQL = "VIS_143";\n              params[0] = new VIS.DB.SqlParam("@lineID", lineID);\n            } else {\n              // log.Fine("Not found WindowNo=" + $self.windowNo);\n            }\n          }\n        }\n      }\n      if (AD_Window_ID == 0) {\n        return;\n      }\n\n      //  Get Parent ID\n      var parentID = 0;\n\n      //*********************** When No Record Selected on Grid than display Msg  Done by Vikas And Assigned by Gurvinder***************\n      var GridSelectedRowCount = 0;\n      GridSelectedRowCount = gridController.getSelectedRows();\n      //\n      if (GridSelectedRowCount.length > 0) {\n        parentID = VIS.Utility.Util.getValueOfInt(executeScalar(SQL, null, null));\n        showWindow(ColumnName, lineID, AD_Window_ID, parentID);\n      } else {\n        return alert(VIS.Msg.getMsg("NoRecordSelected"));\n      }\n      //************************************************  vikas End   ************************************************ \n\n      /*   parentID = VIS.Utility.Util.getValueOfInt((VIS.DB.executeScalar(SQL, null, null)));\r\n      // System.Windows.Deployment.Current.Dispatcher.BeginInvoke(() => ShowWindow(ColumnName, parentID, AD_Window_ID, SQL, lineID));\r\n        showWindow(ColumnName, lineID, AD_Window_ID,parentID);*/\n    }\n    ;\n    var executeScalar = function (sql, params, callback) {\n      var async = callback ? true : false;\n      var dataIn = {\n        sql: sql,\n        page: 1,\n        pageSize: 0\n      };\n      var value = null;\n      getDataSetJString(dataIn, async, function (jString) {\n        dataSet = new VIS.DB.DataSet().toJson(jString);\n        var dataSet = new VIS.DB.DataSet().toJson(jString);\n        if (dataSet.getTable(0).getRows().length > 0) {\n          value = dataSet.getTable(0).getRow(0).getCell(0);\n        } else {\n          value = null;\n        }\n        dataSet.dispose();\n        dataSet = null;\n        if (async) {\n          callback(value);\n        }\n      });\n      return value;\n    };\n    function getDataSetJString(data, async, callback) {\n      var result = null;\n      //data.sql = VIS.secureEngine.encrypt(data.sql);\n      $.ajax({\n        url: dataSetUrl,\n        type: "POST",\n        datatype: "json",\n        contentType: "application/json; charset=utf-8",\n        async: async,\n        data: JSON.stringify(data)\n      }).done(function (json) {\n        result = json;\n        if (callback) {\n          callback(json);\n        }\n      });\n      return result;\n    }\n    ;\n\n    //******************\n    //Show window\n    //******************\n    function showWindow(columnName, recordID, windowID, parentID) {\n      var zoomQuery = new VIS.Query();\n      zoomQuery.addRestriction(columnName, VIS.Query.prototype.EQUAL, parentID);\n      VIS.viewManager.startWindow(windowID, zoomQuery);\n    }\n    ;\n    //*******************\n    //Get Root\n    //*******************\n    this.getRoot = function () {\n      return $root;\n    };\n    this.refreshUI = function () {\n      /*Refresh Grid on Focus*/\n      if (gridController) {\n        gridController.vTable.resize();\n      }\n    };\n\n    //*******************\n    //dataStatusChanged\n    //*******************\n    this.dataStatusChanged = function (e) {};\n    //*******************\n    //set Busy\n    //*******************\n    this.setBusy = function (show) {\n      isBusy(show);\n    };\n    //********************\n    //Dispose Component\n    //********************\n    this.disposeComponent = function () {\n      windowNo = null;\n      $root = null;\n      $self = this;\n      $divContainer = null;\n      $divPSelectInfo = null;\n      $divBankAccount = null;\n      $divCurrentBalance = null;\n      $divBusinessPartner = null;\n      $divOnlyDueInvoice = null;\n      $divPaymentDate = null;\n      $divPaymentMethod = null;\n      $divGridPSelect = null;\n      $divProcessPSelect = null;\n      $divLabel = null;\n      $divPaymentAmount = null;\n      $divProcessButtons = null;\n      $cmbBankAccount = null;\n      $cmbBusinessPartner = null;\n      $cmbPaymentMethod = null;\n      $cmbPaymentDate = null;\n      $lblCurrentBal = null;\n      $chkOnlyDueInvoice = null;\n      $txtCurrentBal = null;\n      $lblMsg = null;\n      $txtPaymentAmount = null;\n      arrListColumns = null;\n      dGrid = null;\n      $btnRequery = null;\n      $btnOk = null;\n      $btnCancel = null;\n      rows = null;\n    };\n  }\n  ;\n\n  //Must Implement with same parameter\n  VTrxMaterial.prototype.init = function (windowNo, frame) {\n    //Assign to this Varable\n    this.frame = frame;\n    this.windowNo = windowNo;\n    this.frame.getContentGrid().append(this.getRoot());\n    this.initialize();\n  };\n  VTrxMaterial.prototype.refresh = function () {\n    this.refreshUI();\n  };\n\n  //Must implement dispose\n  VTrxMaterial.prototype.dispose = function () {\n    /*CleanUp Code */\n    //dispose this component\n    this.disposeComponent();\n\n    //call frame dispose function\n    if (this.frame) this.frame.dispose();\n    this.frame = null;\n  };\n  VIS.Apps.AForms.VTrxMaterial = VTrxMaterial;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/forms/vtrxmaterial.js?\n}')},"./Areas/VAS/Scripts/app/tabpanel/VAS_LeadConversation.js":()=>{eval('{;\nVAS = window.VAS || {};\n;\n(function (VAS, $) {\n  VAS.VAS_LeadConversation = function () {\n    this.record_ID = 0;\n    this.table_ID = 0;\n    this.windowNo = 0;\n    this.curTab = null;\n    this.selectedRow = null;\n    this.panelWidth;\n    var $root;\n    var $self = this;\n    var $ResTxt;\n    var $InputTxt;\n    var $Btn;\n    var apiKey = "";\n    var api_Url = "https://api.openai.com/v1/chat/completions";\n    var asst_ID = "asst_YzDPtqW1Fa0CX3ZAabFXdJTy";\n    var newThread = false;\n    var runProcess = false;\n    var thread_id = "";\n    var runStatus = false;\n    var statusType = "";\n    var oppData = [];\n    var PromptMsg = "";\n    var gotRespStatus = "";\n    var imgUrl = "";\n    this.init = function () {\n      $root = $(\'<div class="VAS-chatboat-container" style="right: 0; bottom: 0;">\' + \'<div class="VAS-chatbaot-header" > <div class="VAS-aura-img"> <div class="VAS-thumbImg"><img src="Areas/VAS/Content/Images/AI.png" alt=""></div> Ask AURA</div> <a href="#"></a> </div>\' + \'<div id="VAS_ResponseTxt\' + $self.windowNo + \'" class="VAS-chat-body">\' + \' </div>\' + \' <div class="VAS-chatTextarea-col">\' + \' <textarea id="VAS_InpTxt\' + $self.windowNo + \'" name="" id="" placeholder="Start Conversation"></textarea>\' + \' <button id="VAS_EntrBtn\' + $self.windowNo + \'" class="VAS-sendBtn"><i class="fa fa-paper-plane" aria-hidden="true"></i></button>\' + \' </div>\' + \'</div>\');\n      getControl();\n      events();\n      busyIndicator();\n    };\n    function getControl() {\n      $ResTxt = $root.find("#VAS_ResponseTxt" + $self.windowNo);\n      $InputTxt = $root.find("#VAS_InpTxt" + $self.windowNo);\n      $Btn = $root.find("#VAS_EntrBtn" + $self.windowNo);\n    }\n    ;\n    function busyIndicator() {\n      $BusyIndicator = $(\'<div class="vis-busyindicatorouterwrap"><div class="vis-busyindicatorinnerwrap"><i class="vis-busyindicatordiv"></i></div></div>\');\n      $BusyIndicator[0].style.visibility = "hidden";\n      $root.append($BusyIndicator);\n    }\n    ;\n    function SetBusy(value) {\n      if (value) {\n        $BusyIndicator[0].style.visibility = "visible";\n      } else {\n        $BusyIndicator[0].style.visibility = "hidden";\n      }\n    }\n    function events() {\n      $Btn.on("click", function () {\n        SetBusy(true);\n        var txt = $InputTxt.val();\n        $InputTxt.val("");\n        if (txt != \'\') {\n          $ResTxt.append(\' <div class= "VAS-userChat-comment VAS-row-reverse" > \' + \'  <div class="VAS-thumbImg"><img src="\' + VIS.Application.contextUrl + imgUrl + \'" alt=""></div>\' + \' <div class="VAS-chat-comments-col ">\' + \'   <div class="VAS-chatuser-name VAS-row-reverse">\' + VIS.context.getAD_User_Name() + \'<span></span></div>\' + \'  <div class="VAS-chatBox VAS-chat-radius">\' + txt + \'</div>\' + \'</div>\' + \' </div>\');\n          scrollToBottom();\n          AddMessage(txt);\n        } else {\n          SetBusy(false);\n        }\n      });\n    }\n    function CreateThread() {\n      $ResTxt.empty();\n      try {\n        $.ajax({\n          url: \'https://api.openai.com/v1/threads\',\n          // OpenAI\'s endpoint\n          //async: false,\n          type: \'POST\',\n          contentType: \'application/json\',\n          headers: {\n            \'Authorization\': "Bearer " + apiKey,\n            \'OpenAI-Beta\': \'assistants=v2\'\n\n            // Add your OpenAI API key here\n          },\n          success: function (response) {\n            thread_id = response.id;\n            newThread = true;\n            AddMessage(PromptMsg);\n          },\n          error: function (xhr, status, error) {\n            console.error("Error:", error);\n            SetBusy(false);\n          }\n        });\n      } catch (error) {\n        alert(error);\n        SetBusy(false);\n      }\n    }\n    ;\n    function AddMessage(msg) {\n      runProcess = false;\n      runStatus = false;\n      try {\n        $.ajax({\n          url: \'https://api.openai.com/v1/threads/\' + thread_id + \'/messages\',\n          // OpenAI\'s endpoint\n          type: \'POST\',\n          contentType: \'application/json\',\n          //async: false,\n          headers: {\n            \'Authorization\': "Bearer " + apiKey,\n            \'OpenAI-Beta\': \'assistants=v2\'\n\n            // Add your OpenAI API key here\n          },\n          data: JSON.stringify({\n            "role": "user",\n            "content": msg\n          }),\n          success: function (response) {\n            if (response.id != null) {\n              RunMessage();\n            }\n            ;\n          },\n          error: function (xhr, status, error) {\n            console.error("Error:", error);\n            SetBusy(false);\n          }\n        });\n      } catch (error) {\n        alert(error);\n        SetBusy(false);\n      }\n    }\n    ;\n    function RunMessage() {\n      statusType = "";\n      try {\n        $.ajax({\n          url: \'https://api.openai.com/v1/threads/\' + thread_id + \'/runs\',\n          // OpenAI\'s endpoint\n          type: \'POST\',\n          contentType: \'application/json\',\n          //async: false,\n          headers: {\n            \'Authorization\': "Bearer " + apiKey,\n            \'OpenAI-Beta\': \'assistants=v2\'\n\n            // Add your OpenAI API key here\n          },\n          data: JSON.stringify({\n            "assistant_id": asst_ID\n          }),\n          success: function (response) {\n            if (response != null) {\n              while (!runStatus) {\n                CheckRunStatus(response.id);\n              }\n              if (statusType == "completed") {\n                GetResponseMessage(response.id);\n              } else if (statusType == "failed") {\n                SetBusy(false);\n              }\n            }\n          },\n          error: function (xhr, status, error) {\n            console.error("Error:", error);\n            SetBusy(false);\n          }\n        });\n      } catch (error) {\n        alert(error);\n        SetBusy(false);\n      }\n    }\n    ;\n    function CheckRunStatus(run_ID) {\n      try {\n        $.ajax({\n          url: \'https://api.openai.com/v1/threads/\' + thread_id + \'/runs/\' + run_ID,\n          // OpenAI\'s endpoint\n          type: \'GET\',\n          contentType: \'application/json\',\n          async: false,\n          headers: {\n            \'Authorization\': "Bearer " + apiKey,\n            \'OpenAI-Beta\': \'assistants=v2\'\n\n            // Add your OpenAI API key here\n          },\n          success: function (response) {\n            if (response != null) {\n              if (response.status == "failed" || response.status == "completed" || response.status == "requires_action") {\n                if (response.status == "completed") {\n                  runStatus = true;\n                } else if (response.status == "failed") {\n                  appendMessageOutput("failed Message");\n                  runStatus = true;\n                }\n                statusType = response.status;\n                if (statusType == "requires_action" && !runProcess) {\n                  if (response.required_action.submit_tool_outputs.tool_calls.length > 0 && response.required_action.submit_tool_outputs.tool_calls[0].type == "function") {\n                    runProcess = true;\n                    if (response.required_action.submit_tool_outputs.tool_calls[0].function.name == "create_opportunitylines") {\n                      GenerateLines(response.required_action.submit_tool_outputs.tool_calls);\n                    } else if (response.required_action.submit_tool_outputs.tool_calls[0].function.name == "lead_prospect") {\n                      ConvertToProspect(response.required_action.submit_tool_outputs.tool_calls);\n                    } else {\n                      ConvertToOpportunity(response.required_action.submit_tool_outputs.tool_calls);\n                    }\n                    SubmitToolResponse(run_ID, response.required_action.submit_tool_outputs.tool_calls[0].id);\n                  }\n                }\n              }\n            }\n          },\n          error: function (xhr, status, error) {\n            console.error("Error:", error);\n            SetBusy(false);\n          }\n        });\n      } catch (error) {\n        alert(error);\n        SetBusy(false);\n      }\n    }\n    ;\n    function prepareData(data) {\n      data = JSON.parse(data[0].function.arguments);\n      if (data != null && data.products != null && data.products.length > 0) {\n        console.log(data.products);\n        for (var i = 0; i < data.products.length; i++) {\n          var pdata = {};\n          pdata["M_Product_ID"] = data.products[i].m_product_id;\n          pdata["C_UOM_ID"] = data.products[i].c_uom_id;\n          pdata["Quantity"] = data.products[i].mandays;\n          pdata["Price"] = data.products[i].price;\n          oppData.push(pdata);\n        }\n      } else {\n        console.log("No Product Data received from Assistant");\n      }\n    }\n    function GenerateLines(dataRes) {\n      if (dataRes.length > 0) {\n        oppData = [];\n        prepareData(dataRes);\n        try {\n          $.ajax({\n            url: VIS.Application.contextUrl + "VAS_Lead/GenerateLines",\n            type: "POST",\n            datatype: "json",\n            contentType: "application/json; charset=utf-8",\n            data: JSON.stringify({\n              Record_ID: $self.record_ID,\n              ProductData: oppData\n            }),\n            async: false,\n            success: function (data) {\n              gotRespStatus = JSON.parse(data);\n            },\n            error: function (err) {\n              gotRespStatus = err;\n              SetBusy(false);\n              return false;\n            }\n          });\n        } catch (error) {\n          SetBusy(false);\n        }\n      }\n    }\n    ;\n    function ConvertToProspect(dataRes) {\n      if (dataRes.length > 0) {\n        postData = [];\n        //prepareData(dataRes);\n        try {\n          $.ajax({\n            url: VIS.Application.contextUrl + "VAS_Lead/ConvertProspect",\n            type: "POST",\n            datatype: "json",\n            contentType: "application/json; charset=utf-8",\n            data: JSON.stringify({\n              Record_ID: $self.record_ID\n            }),\n            async: false,\n            success: function (data) {\n              gotRespStatus = JSON.parse(data);\n            },\n            error: function () {\n              SetBusy(false);\n            }\n          });\n        } catch (error) {\n          alert(error);\n          SetBusy(false);\n        }\n      }\n    }\n    ;\n    function ConvertToOpportunity(dataRes) {\n      if (dataRes.length > 0) {\n        postData = [];\n        //prepareData(dataRes);\n        try {\n          $.ajax({\n            url: VIS.Application.contextUrl + "VAS_Lead/GenerateOpprtunity",\n            type: "POST",\n            datatype: "json",\n            contentType: "application/json; charset=utf-8",\n            data: JSON.stringify({\n              Record_ID: $self.record_ID\n            }),\n            async: false,\n            success: function (data) {\n              gotRespStatus = JSON.parse(data);\n            },\n            error: function () {\n              SetBusy(false);\n            }\n          });\n        } catch (error) {\n          alert(error);\n          SetBusy(false);\n        }\n      }\n    }\n    ;\n    function SubmitToolResponse(run_ID, tool_ID) {\n      try {\n        $.ajax({\n          url: \'https://api.openai.com/v1/threads/\' + thread_id + \'/runs/\' + run_ID + \'/submit_tool_outputs\',\n          // OpenAI\'s endpoint\n          type: \'POST\',\n          contentType: \'application/json\',\n          async: false,\n          headers: {\n            \'Authorization\': "Bearer " + apiKey,\n            \'OpenAI-Beta\': \'assistants=v2\'\n\n            // Add your OpenAI API key here\n          },\n          data: JSON.stringify({\n            "tool_outputs": [{\n              "tool_call_id": tool_ID,\n              "output": gotRespStatus != "" ? gotRespStatus : "Success"\n            }]\n          }),\n          success: function (response) {\n            if (response != null) {\n              if (response.status == "completed") {\n                gotRespStatus = true;\n                //GetResponseMessage(response.id);\n              }\n            }\n          },\n          error: function (xhr, status, error) {\n            console.error("Error:", error);\n            SetBusy(false);\n          }\n        });\n      } catch (error) {\n        SetBusy(false);\n      }\n    }\n    ;\n    function GetPromptMessage() {\n      SetBusy(true);\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS_Lead/GetPromptMsg",\n        type: "POST",\n        data: {\n          Table_ID: $self.table_ID,\n          rec_ID: $self.record_ID\n        },\n        success: function (data) {\n          if (data != null) {\n            if (JSON.parse(data) != \'\') {\n              PromptMsg = JSON.parse(data);\n              CreateThread();\n            } else {\n              PromptMsg = "RecPromptMsg Hi AI";\n              CreateThread();\n            }\n          }\n        },\n        error: function () {\n          //SetBusy(false);\n        }\n      });\n    }\n    function GetResponseMessage(run_id) {\n      var r_id = run_id;\n      runStatus = false;\n      try {\n        $.ajax({\n          url: \'https://api.openai.com/v1/threads/\' + thread_id + \'/messages\',\n          // OpenAI\'s endpoint\n          type: \'GET\',\n          contentType: \'application/json\',\n          //async: false,\n          headers: {\n            \'Authorization\': "Bearer " + apiKey,\n            \'OpenAI-Beta\': \'assistants=v2\'\n\n            // Add your OpenAI API key here\n          },\n          success: function (response) {\n            if (response != null) {\n              var data = jQuery.grep(response.data, function (record) {\n                return record.run_id === r_id && record.role === "assistant";\n              });\n              if (data != null) {\n                appendMessageOutput(data[0].content[0].text.value);\n                if (newThread) {\n                  updateThreadID();\n                } else {\n                  SetBusy(false);\n                }\n              } else {\n                SetBusy(false);\n              }\n            }\n          },\n          error: function (xhr, status, error) {\n            console.error("Error:", error);\n            SetBusy(false);\n          }\n        });\n      } catch (error) {\n        alert(error);\n      }\n    }\n    ;\n    function getThreadMessage() {\n      try {\n        $.ajax({\n          url: \'https://api.openai.com/v1/threads/\' + thread_id + \'/messages\',\n          // OpenAI\'s endpoint\n          type: \'GET\',\n          contentType: \'application/json\',\n          headers: {\n            \'Authorization\': "Bearer " + apiKey,\n            \'OpenAI-Beta\': \'assistants=v2\'\n\n            // Add your OpenAI API key here\n          },\n          success: function (response) {\n            appendthreadmessage(response);\n          },\n          error: function (xhr, status, error) {\n            console.error("Error:", error);\n            SetBusy(false);\n          }\n        });\n      } catch (error) {\n        alert(error);\n      }\n    }\n    ;\n    function appendthreadmessage(response) {\n      $ResTxt.empty();\n      for (var i = response.data.length - 1; i >= 0; i--) {\n        if (response.data[i].role == "user") {\n          if (!response.data[i].content[0].text.value.contains("RecPromptMsg")) {\n            addUserMessage(response.data[i].content[0].text.value);\n          }\n        } else if (response.data[i].role == "assistant") appendMessageOutput(response.data[i].content[0].text.value);\n      }\n      scrollToBottom();\n      SetBusy(false);\n    }\n    ;\n    function scrollToBottom() {\n      document.querySelector(".VAS-chat-body").scrollTop = document.querySelector(".VAS-chat-body").scrollHeight;\n      $InputTxt.focus();\n    }\n    function appendMessageOutput(txt) {\n      $ResTxt.append(\' <div class= "VAS-userChat-comment" > \' + \'<div class="VAS-thumbImg"><img src="Areas/VAS/Content/Images/AI.png" alt=""></div>\' + \'<div class="VAS-chat-comments-col VAS-chatBox-white">\' + \'  <div class="VAS-chatuser-name">AURA<span></span></div>\' + \' <div class="VAS-chatBox">\' + txt + \'</div>\' + \'</div>\' + \'</div>\');\n      scrollToBottom();\n    }\n    ;\n    function addUserMessage(txt) {\n      $ResTxt.append(\' <div class= "VAS-userChat-comment VAS-row-reverse" > \' + \'  <div class="VAS-thumbImg"><img src="\' + VIS.Application.contextUrl + imgUrl + \'" alt=""></div>\' + \' <div class="VAS-chat-comments-col ">\' + \'   <div class="VAS-chatuser-name VAS-row-reverse">\' + VIS.context.getAD_User_Name() + \'<span></span></div>\' + \'  <div class="VAS-chatBox VAS-chat-radius">\' + txt + \'</div>\' + \'</div>\' + \' </div>\');\n      scrollToBottom();\n    }\n    ;\n    this.getRoot = function () {\n      return $root;\n    };\n    this.getThreadID = function (rec_ID) {\n      SetBusy(true);\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS_Lead/GetThreadID",\n        type: "POST",\n        data: {\n          Table_ID: $self.table_ID,\n          rec_ID: rec_ID\n        },\n        success: function (data) {\n          if (data != null) {\n            data = JSON.parse(data);\n            apiKey = data.APiKey;\n            if (data.ThreadID == \'\') {\n              SetBusy(true);\n              GetPromptMessage();\n            } else {\n              console.log("Thread ID -- " + data.ThreadID);\n              thread_id = data.ThreadID;\n              $ResTxt.empty();\n              getThreadMessage();\n            }\n            ;\n          }\n        },\n        error: function () {\n          //SetBusy(false);\n        }\n      });\n    };\n    this.getUserImg = function (rec_ID) {\n      SetBusy(true);\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS_Lead/GetUserImg",\n        type: "POST",\n        async: false,\n        data: {\n          rec_ID: rec_ID\n        },\n        success: function (data) {\n          if (data != null) {\n            imgUrl = JSON.parse(data);\n            if (imgUrl == "") {\n              imgUrl = "Areas/VAS/Content/Images/dummy.jpg";\n            }\n          } else {}\n          ;\n        },\n        error: function () {\n          //SetBusy(false);\n        }\n      });\n    };\n    function updateThreadID() {\n      var field = $self.record_ID + "," + thread_id;\n      $.ajax({\n        url: VIS.Application.contextUrl + "VAS_Lead/SetThreadID",\n        type: "POST",\n        data: {\n          \'field\': field\n        },\n        success: function (data) {\n          newThread = false;\n          SetBusy(false);\n        },\n        error: function () {\n          SetBusy(false);\n        }\n      });\n    }\n    ;\n  };\n  VAS.VAS_LeadConversation.prototype.startPanel = function (windowNo, curTab) {\n    this.windowNo = windowNo;\n    this.curTab = curTab;\n    this.table_ID = curTab.getAD_Table_ID();\n    this.init();\n  };\n\n  /*This function to update tab panel based on selected record*/\n  VAS.VAS_LeadConversation.prototype.refreshPanelData = function (recordID, selectedRow) {\n    if (selectedRow == undefined || recordID <= 0) {\n      //this.Clear();\n    } else {\n      this.record_ID = recordID;\n      this.selectedRow = selectedRow;\n      this.getUserImg(recordID);\n      this.getThreadID(recordID);\n    }\n  };\n\n  /*\r\n   This will set width as per window width in dafault case it is 75%\r\n   */\n  VAS.VAS_LeadConversation.prototype.sizeChanged = function (width) {\n    this.panelWidth = 25;\n  };\n\n  /*\r\n  Release all variables from memory\r\n  */\n  VAS.VAS_LeadConversation.prototype.dispose = function () {\n    this.record_ID = 0;\n    this.table_ID = 0;\n    this.windowNo = 0;\n    this.curTab = null;\n    this.rowSource = null;\n    this.panelWidth = null;\n  };\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/app/tabpanel/VAS_LeadConversation.js?\n}')},"./Areas/VAS/Scripts/model/CalloutAssignment.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  var steps = false;\n\n  //CalloutAssigment Start\n  function CalloutAssignment() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutAssignment"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutAssignment, VIS.CalloutEngine); //inherit CalloutEngine\n\n  /// <summary>\n  /// Assignment_Product.\n  /// - called from S_ResourceAssignment_ID\n  /// - sets M_Product_ID, Description\n  /// - Qty.. \n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns></returns>\n\n  CalloutAssignment.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive() || value == null) return "";\n    //\tget value\n    var S_ResourceAssignment_ID = Util.getValueOfInt(value);\n    if (S_ResourceAssignment_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var M_Product_ID = 0;\n    var name = null;\n    var description = null;\n    var Qty = null;\n    //var sql = "SELECT p.M_Product_ID, ra.Name, ra.Description, ra.Qty "\n    //    + "FROM S_ResourceAssignment ra"\n    //    + " INNER JOIN M_Product p ON (p.S_Resource_ID=ra.S_Resource_ID) "\n    //    + "WHERE ra.S_ResourceAssignment_ID=" + S_ResourceAssignment_ID;\n    //var idr = null;\n    try {\n      //idr = VIS.DB.executeReader(sql, null, null);\n      //if (idr.read()) {\n\n      var dr = VIS.dataContext.getJSONRecord("MProduct/GetResourceAssignmntDet", S_ResourceAssignment_ID.toString());\n      if (dr != null) {\n        M_Product_ID = Util.getValueOfInt(dr["M_Product_ID"]); //.getInt (1);\n        name = Util.getValueOfString(dr["Name"]); //.getString(2);\n        description = Util.getValueOfString(dr["Description"]); //.getString(3);\n        Qty = Util.getValueOfDecimal(dr["Qty"]); //.getBigDecimal(4);\n      }\n      // idr.close();\n    } catch (err) {\n      //if (idr != null) {\n      //    idr.close();\n      //    idr = null;\n      //}\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, "product", err);\n    }\n    this.log.fine("S_ResourceAssignment_ID=" + S_ResourceAssignment_ID + " - M_Product_ID=" + M_Product_ID);\n    if (M_Product_ID != 0) {\n      mTab.setValue("M_Product_ID", Util.getValueOfInt(M_Product_ID));\n      if (description != null) {\n        name += " (" + description + ")";\n      }\n      if ("." != name)\n        //(!".".equals(name))\n        {\n          mTab.setValue("Description", name);\n        }\n      //\n      var variable = "Qty"; //\tTimeExpenseLine\n      if (mTab.getTableName().startsWith("C_Order")) {\n        variable = "QtyOrdered";\n      } else if (mTab.getTableName().startsWith("C_Invoice")) {\n        variable = "QtyInvoiced";\n      }\n      if (Qty != null) {\n        mTab.setValue(variable, Qty);\n      }\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutAssignment = CalloutAssignment;\n  //CalloutAssigment End\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/CalloutAssignment.js?\n}')},"./Areas/VAS/Scripts/model/CalloutBudget.js":()=>{eval('{/********************************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : This Callout is created to set the value of year and period \r\n                    null when Budget Control Basis Field is changed\r\n * chronological  : Development\r\n * Created Date   : 25 Oct 2024\r\n * Created by     : VIS_427\r\n ********************************************************************************/\n\n;\n(function (VIS, $) {\n  function CalloutBudget() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutBudget"); //must call\n  }\n  VIS.Utility.inheritPrototype(CalloutBudget, VIS.CalloutEngine); //inherit CalloutEngine\n  /**\r\n   * Setting the value of year and period null when Budget Control Basis Field is changed\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutBudget.prototype.SetYearAndPeriodNull = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      //If BudgetControlBasis is Annual then set C_Period_ID null\n      if (mTab.getValue("BudgetControlBasis") == "A") {\n        mTab.setValue("C_Period_ID", null);\n      }\n      //If BudgetControlBasis is Period then set C_Year_ID null\n      else if (mTab.getValue("BudgetControlBasis") == "P") {\n        mTab.setValue("C_Year_ID", null);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutBudget = CalloutBudget;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/CalloutBudget.js?\n}')},"./Areas/VAS/Scripts/model/CalloutCashJournal.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutCashJournal() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutCashJournal"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutCashJournal, VIS.CalloutEngine); //inherit CalloutEngine\n  /// <summary>\n  ///  Cash Journal Line Invoice. when Invoice selected - set C_Currency,\n  ///  DiscountAnt, Amount, WriteOffAmt\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns></returns>\n  CalloutCashJournal.prototype.Invoice = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive())\n      // assuming it is resetting value\n      {\n        return "";\n      }\n    if (value == null || value.toString() == "") {\n      /*Clear references and amounts when we clear invoice*/\n      if (mField.getColumnName() == "C_Invoice_ID") {\n        this.setCalloutActive(true);\n        mTab.setValue("C_BPartner_ID", null);\n        mTab.setValue("C_BPartner_Location_ID", null);\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n        ctx.setContext(windowNo, "InvTotalAmt", "");\n\n        // JID_0780: Open cash journal line and select the invoice now on clearing the invoice system was giving error message.\n        ctx.setContext("InvTotalAmt", "");\n        mTab.setValue("ConvertedAmt", VIS.Env.ZERO);\n        mTab.setValue("DiscountAmt", VIS.Env.ZERO);\n        mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\n        mTab.setValue("OverUnderAmt", VIS.Env.ZERO);\n        mTab.setValue("Amount", VIS.Env.ZERO);\n        this.setCalloutActive(false);\n      }\n      return "";\n    }\n    this.setCalloutActive(true);\n    var C_Invoice_ID = Util.getValueOfInt(value);\n\n    //------14-11-2014-------\n    var dueAmount = 0;\n    var C_InvoicePaySchedule_ID = 0;\n    var _chk = 0;\n    //var _sqlAmt = "SELECT * FROM   (SELECT ips.C_InvoicePaySchedule_ID, "\n    //+ " ips.DueAmt  FROM C_Invoice i  INNER JOIN C_InvoicePaySchedule ips "\n    //+ " ON (i.C_Invoice_ID        =ips.C_Invoice_ID)  WHERE i.IsPayScheduleValid=\'Y\' "\n    //+ " AND ips.IsValid           =\'Y\'  AND ips.isactive          =\'Y\' "\n    //+ " AND i.C_Invoice_ID    = " + C_Invoice_ID\n    //+ "  AND ips.C_InvoicePaySchedule_ID NOT IN"\n    //+ "(SELECT NVL(C_InvoicePaySchedule_ID,0) FROM C_InvoicePaySchedule WHERE c_payment_id IN"\n    //+ "(SELECT NVL(c_payment_id,0) FROM C_InvoicePaySchedule)  union "\n    //+ " SELECT NVL(C_InvoicePaySchedule_id,0) FROM C_InvoicePaySchedule  WHERE c_cashline_id IN"\n    //+ "(SELECT NVL(c_cashline_id,0) FROM C_InvoicePaySchedule )) "\n    //+ " ORDER BY ips.duedate ASC  ) WHERE rownum=1";\n    var drAmt = null;\n    try {\n      drAmt = VIS.dataContext.getJSONRecord("MInvoice/GetInvPaySchedDetail", C_Invoice_ID.toString());\n      if (drAmt != null) {\n        C_InvoicePaySchedule_ID = Util.getValueOfInt(drAmt["C_InvoicePaySchedule_ID"]);\n        mTab.setValue("C_InvoicePaySchedule_ID", C_InvoicePaySchedule_ID);\n        dueAmount = Util.getValueOfDecimal(drAmt["dueAmount"]);\n        _chk = 1;\n      }\n    } catch (err) {\n      if (drAmt != null) {\n        drAmt = null;\n      }\n      this.log.log(Level.SEVERE, "CalloutCashJournal.Invoice -" + C_Invoice_ID, err.message);\n      return err.toString();\n    }\n    //-------------\n    if (C_Invoice_ID == null || C_Invoice_ID == 0) {\n      mTab.setValue("C_Currency_ID", null);\n      // commented by Arpit\n      /*\r\n      mTab.setValue("C_BPartner_ID", null);\r\n      mTab.setValue("C_BPartner_Location_ID", null);\r\n      mTab.setValue("ConvertedAmt", VIS.Env.ZERO);\r\n      mTab.setValue("Amount", VIS.Env.ZERO);\r\n      mTab.setValue("DiscountAmt", VIS.Env.ZERO);\r\n      mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\r\n       mTab.setValue("OverUnderAmt", VIS.Env.ZERO);\r\n      */\n      this.setCalloutActive(false);\n      return "";\n    }\n\n    // Date\n    // var ts = CommonFunctions.CovertMilliToDate(ctx.getContextAsTime(windowNo, "DateAcct"));\n    //DateTime billDate = CommonFunctions.CovertMilliToDate(ctx.getContextAsTime(windowNo, "DateOrdered"));\n    var ts = new Date(ctx.getContext(windowNo, "DateAcct"));\n    //DateTime ts = new DateTime(ctx.getContextAsTime(windowNo, "DateAcct")); // from\n    // C_Cash\n    var tsDate = "TO_DATE( \'" + (Number(ts.getMonth()) + 1) + "-" + ts.getDate() + "-" + ts.getFullYear() + "\', \'MM-DD-YYYY\')"; // GlobalVariable.TO_DATE(Util.GetValueOfDateTime(srchCtrls[i].Ctrl.getValue()), true);\n    var paramString = C_Invoice_ID.toString() + "," + tsDate.toString() + "," + C_InvoicePaySchedule_ID.toString();\n    //var sql = "SELECT C_BPartner_ID, C_Currency_ID, invoiceOpen(C_Invoice_ID, 0) as invoiceOpen, IsSOTrx, paymentTermDiscount(invoiceOpen(C_Invoice_ID, 0),C_Currency_ID,C_PaymentTerm_ID,DateInvoiced, " + tsDate\n    //    + " ) as paymentTermDiscount,C_DocTypeTarget_ID FROM C_Invoice WHERE C_Invoice_ID=" + C_Invoice_ID;\n    var data = null;\n    try {\n      data = VIS.dataContext.getJSONRecord("MInvoice/GetInvoiceDetails", paramString);\n\n      //idr = CalloutDB.executeCalloutReader(sql, null, null);\n      //pstmt.setTimestamp(1, ts);\n      //pstmt.setInt(2, C_Invoice_ID.intValue());\n      //ResultSet rs = pstmt.executeQuery();\n      if (data != null) {\n        var payAmt = 0;\n        mTab.setValue("C_BPartner_ID", Util.getValueOfInt(data["C_BPartner_ID"]));\n        mTab.setValue("C_Currency_ID", Util.getValueOfInt(data["C_Currency_ID"])); //.getInt(2)));\n\n        // JID_1208: System should set Currency Type that is defined on Invoice.\n        mTab.setValue("C_ConversionType_ID", Util.getValueOfInt(data["C_ConversionType_ID"]));\n        mTab.setValue("C_BPartner_Location_ID", Util.getValueOfInt(data["C_BPartner_Location_ID"])); //Arpit\n        if (_chk == 0) {\n          payAmt = Util.getValueOfDecimal(data["invoiceOpen"]); //.getBigDecimal(3);\n        } else {\n          //payAmt = (dueAmount) * (-1);\n          payAmt = dueAmount;\n        }\n        var discountAmt = Util.getValueOfDecimal(data["paymentTermDiscount"]); //.getBigDecimal(5);\n        var isSOTrx = "Y" == data["IsSOTrx"]; //.getString(4));\n        if (!isSOTrx) {\n          if (_chk == 0)\n            //Pratap\n            {\n              payAmt = payAmt * -1;\n            } else\n            //Pratap\n            {\n              payAmt = dueAmount * -1;\n            }\n          discountAmt = discountAmt * -1; //.negate();\n        }\n        // // Bharat\n        //var doctype_ID = Util.getValueOfInt(idr.get("c_doctypetarget_id"));\n        //var _qry = "SELECT DocBaseType FROM C_DocType WHERE C_DocType_ID = " + doctype_ID;\n        var docbaseType = Util.getValueOfString(data["docbaseType"]);\n        if ("ARC" == docbaseType || "API" == docbaseType) {\n          mTab.setValue("VSS_PAYMENTTYPE", "P");\n        } else {\n          mTab.setValue("VSS_PAYMENTTYPE", "R");\n        }\n        mTab.setValue("DiscountAmt", discountAmt);\n        ctx.setContext("InvTotalAmt", payAmt.toString());\n        mTab.setValue("Amount", payAmt - discountAmt);\n        mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\n      }\n    } catch (err) {\n      if (idr != null) {\n        idr.close();\n        idr = null;\n      }\n      this.log.log(Level.SEVERE, "invoice", err);\n      this.setCalloutActive(false);\n      return err.toString();\n      //return e.getLocalizedMessage();\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Invoice Pay Schedule\n  /// When Invoice Pay Schedule Selected\n  /// The Amount Corresponding to that pay Schedule\n  /// filled in Amount\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="WindowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns></returns>\n  CalloutCashJournal.prototype.SetAmount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (value == null || value.toString() == "") {\n      if (Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) > 0) {\n        //var sql = "SELECT sum(ips.DueAmt)  FROM C_Invoice i INNER JOIN C_InvoicePaySchedule ips ON (i.C_Invoice_ID=ips.C_Invoice_ID) WHERE i.IsPayScheduleValid=\'Y\' AND ips.IsValid =\'Y\' AND ips.isactive =\'Y\'" +\n        //   "AND i.C_Invoice_ID = " + Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) + " AND C_InvoicePaySchedule_ID NOT IN (SELECT NVL(C_InvoicePaySchedule_ID,0) FROM C_InvoicePaySchedule WHERE C_Payment_ID IN " +\n        //  "(SELECT NVL(C_Payment_ID,0) FROM C_InvoicePaySchedule) UNION SELECT NVL(C_InvoicePaySchedule_ID,0) FROM C_InvoicePaySchedule WHERE C_Cashline_ID IN (SELECT NVL(C_Cashline_ID,0) FROM C_InvoicePaySchedule))";\n        //var Amount = Util.getValueOfDecimal(CalloutDB.executeCalloutScalar(sql, null, null));\n        var Amount = Util.getValueOfDecimal(VIS.dataContext.getJSONRecord("MCashBook/GetPaySheduleAmt", mTab.getValue("C_Invoice_ID").toString()));\n        ctx.setContext(windowNo, "InvTotalAmt", Amount.toString());\n        mTab.setValue("Amount", Amount);\n        this.setCalloutActive(false);\n        return "";\n      } else {\n        return "";\n      }\n    }\n    mTab.setValue("DiscountAmt", VIS.Env.ZERO);\n    mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\n    mTab.setValue("OverUnderAmt", VIS.Env.ZERO);\n    var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA009_");\n    if (DataPrefix["VA009_"]) {\n      ctx.setContext("InvTotalAmt", "");\n      var C_InvoicePaySchedule_ID = Util.getValueOfInt(value);\n      if (C_InvoicePaySchedule_ID == null || C_InvoicePaySchedule_ID == 0) {\n        ctx.setContext(windowNo, "InvTotalAmt", null);\n        if (mTab.getTableName() == "C_Payment") {\n          mTab.setValue("PayAmt", null); // For Payment window\n          mTab.setValue("PaymentAmount", null);\n        } else {\n          mTab.setValue("Amount", null); // For Cash Journal Line \n        }\n        mTab.setValue("DiscountAmt", 0);\n        mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\n        ctx.setContext("InvTotalAmt", 0);\n        this.setCalloutActive(false);\n        return "";\n      }\n      //var qry = "SELECT DueAmt , DiscountDate , DiscountAmt , DiscountDays2 , Discount2  FROM C_InvoicePaySchedule WHERE C_InvoicePaySchedule_ID=" + C_InvoicePaySchedule_ID;\n      var paramString = C_InvoicePaySchedule_ID.toString() + "," + mTab.getValue("C_Cash_ID") + "," + mTab.getValue("C_Invoice_ID");\n      var data = VIS.dataContext.getJSONRecord("MCashBook/GetPaySheduleData", paramString);\n      var IsReturnTrx = VIS.Utility.Util.getValueOfString(data["IsReturnTrx"]);\n      /*VIS_427 Set Currency when user change invoicepayschedule so that can convert value of schedule\r\n      according to currency*/\n      mTab.setValue("C_Currency_ID", Util.getValueOfInt(data["C_Currency_ID"]));\n      if (data != null) {\n        if (mTab.getTableName() == "C_Payment") {\n          /*VIS_427 Set value of VAS_IsDiscountApplied false when user change invoice schedule*/\n          mTab.setValue("VAS_IsDiscountApplied", false);\n          var dateTrx = mTab.getValue("DateTrx");\n          //VIS_427 Bug id 5620 set value of payment and discount when user select value through payment window \n          if (IsReturnTrx == "Y") {\n            if (\n            //(Globalize.format(new Date(dateTrx), "yyyy-MM-dd") >= Globalize.format(new Date(data["DateInvoiced"]), "yyyy-MM-dd")) &&\n            Globalize.format(new Date(data["DiscountDate"]), "yyyy-MM-dd") >= Globalize.format(new Date(dateTrx), "yyyy-MM-dd")) {\n              mTab.setValue("DiscountAmt", -1 * Util.getValueOfDecimal(data["DiscountAmt"]));\n              mTab.setValue("PayAmt", -1 * (Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["DiscountAmt"])));\n              mTab.setValue("PaymentAmount", -1 * (Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["DiscountAmt"])));\n            } else if (\n            //(Globalize.format(new Date(dateTrx), "yyyy-MM-dd") >= Globalize.format(new Date(data["DateInvoiced"]), "yyyy-MM-dd")) &&\n            Globalize.format(new Date(data["DiscountDays2"]), "yyyy-MM-dd") >= Globalize.format(new Date(dateTrx), "yyyy-MM-dd")) {\n              mTab.setValue("DiscountAmt", -1 * Util.getValueOfDecimal(data["Discount2"]));\n              mTab.setValue("PayAmt", -1 * (Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["Discount2"])));\n              mTab.setValue("PaymentAmount", -1 * (Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["Discount2"])));\n            } else {\n              mTab.setValue("DiscountAmt", 0);\n              mTab.setValue("PayAmt", -1 * Util.getValueOfDecimal(data["DueAmt"]));\n              mTab.setValue("PaymentAmount", -1 * Util.getValueOfDecimal(data["DueAmt"]));\n            }\n          } else {\n            if (\n            //(Globalize.format(new Date(dateTrx), "yyyy-MM-dd") >= Globalize.format(new Date(data["DateInvoiced"]), "yyyy-MM-dd")) &&\n            Globalize.format(new Date(data["DiscountDate"]), "yyyy-MM-dd") >= Globalize.format(new Date(dateTrx), "yyyy-MM-dd")) {\n              mTab.setValue("DiscountAmt", Util.getValueOfDecimal(data["DiscountAmt"]));\n              mTab.setValue("PayAmt", Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["DiscountAmt"]));\n              mTab.setValue("PaymentAmount", Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["DiscountAmt"]));\n            } else if (\n            //(Globalize.format(new Date(dateTrx), "yyyy-MM-dd") >= Globalize.format(new Date(data["DateInvoiced"]), "yyyy-MM-dd")) &&\n            Globalize.format(new Date(data["DiscountDays2"]), "yyyy-MM-dd") >= Globalize.format(new Date(dateTrx), "yyyy-MM-dd")) {\n              mTab.setValue("DiscountAmt", Util.getValueOfDecimal(data["Discount2"]));\n              mTab.setValue("PayAmt", Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["Discount2"]));\n              mTab.setValue("PaymentAmount", Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["Discount2"]));\n            } else {\n              mTab.setValue("DiscountAmt", 0);\n              mTab.setValue("PayAmt", Util.getValueOfDecimal(data["DueAmt"]));\n              mTab.setValue("PaymentAmount", Util.getValueOfDecimal(data["DueAmt"]));\n            }\n          }\n        }\n        /*VIS_427 Bug Id 6192 Handled conversion of amount on allocate tab*/else if (mTab.getTableName() == "C_PaymentAllocate") {\n          var amount = Util.getValueOfDecimal(data["DueAmt"]);\n          var discountAmt = Util.getValueOfDecimal(data["DiscountAmt"]);\n          var Discount2 = Util.getValueOfDecimal(data["Discount2"]);\n          var C_Currency_Invoice_ID = Util.getValueOfInt(data["C_Currency_ID"]);\n          var C_Currency_ID = ctx.getContextAsInt(windowNo, "C_Currency_ID");\n          var C_ConversionType_ID = ctx.getContextAsInt(windowNo, "C_ConversionType_ID");\n          var AD_Client_ID = ctx.getContextAsInt(windowNo, "AD_Client_ID");\n          var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n          var ConvDate = ctx.getContext(windowNo, "DateAcct");\n          var dateTrx = ctx.getContext(windowNo, "DateTrx");\n          var currency = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", C_Currency_ID.toString());\n          var precision = currency["StdPrecision"];\n          if (C_Currency_ID > 0 && C_Currency_Invoice_ID > 0 && C_Currency_ID != C_Currency_Invoice_ID) {\n            var paramStr = C_Currency_Invoice_ID + "," + C_Currency_ID + "," + ConvDate + "," + C_ConversionType_ID + "," + AD_Client_ID + "," + AD_Org_ID;\n            currencyRate = VIS.dataContext.getJSONRecord("MConversionRate/GetRate", paramStr);\n            /*If currency rate not found then show message and set amount\'s field zero*/\n            if (currencyRate == null || currencyRate == 0) {\n              mTab.setValue("Amount", 0);\n              mTab.setValue("DiscountAmt", 0);\n              mTab.setValue("WriteOffAmt", 0);\n              mTab.setValue("OverUnderAmt", 0);\n              this.setCalloutActive(false);\n              return "NoCurrencyConversion";\n            }\n            amount = Util.getValueOfDecimal((amount * currencyRate).toFixed(precision));\n            discountAmt = Util.getValueOfDecimal((discountAmt * currencyRate).toFixed(precision));\n            Discount2 = Util.getValueOfDecimal((Discount2 * currencyRate).toFixed(precision));\n          }\n          mTab.setValue("Amount", amount);\n          ctx.setContext(windowNo, "InvTotalAmt", Util.getValueOfDecimal(data["DueAmt"]));\n          mTab.setValue("WriteOffAmt", 0);\n          mTab.setValue("OverUnderAmt", 0);\n          if (Globalize.format(new Date(data["DiscountDate"]), "yyyy-MM-dd") >= Globalize.format(new Date(dateTrx), "yyyy-MM-dd")) {\n            if (IsReturnTrx == "Y") {\n              mTab.setValue("DiscountAmt", -1 * discountAmt);\n              mTab.setValue("Amount", -1 * (amount - discountAmt));\n              mTab.setValue("InvoiceAmt", -1 * Util.getValueOfDecimal(data["DueAmt"]));\n            } else {\n              mTab.setValue("DiscountAmt", discountAmt);\n              mTab.setValue("Amount", amount - discountAmt);\n              mTab.setValue("InvoiceAmt", Util.getValueOfDecimal(data["DueAmt"]));\n            }\n          } else if (Globalize.format(new Date(data["DiscountDays2"])) >= Globalize.format(new Date(dateTrx), "yyyy-MM-dd")) {\n            if (IsReturnTrx == "Y") {\n              mTab.setValue("DiscountAmt", -1 * Discount2);\n              mTab.setValue("Amount", -1 * (amount - Discount2));\n              mTab.setValue("InvoiceAmt", -1 * Util.getValueOfDecimal(data["DueAmt"]));\n            } else {\n              mTab.setValue("DiscountAmt", Discount2);\n              mTab.setValue("Amount", amount - Discount2);\n              mTab.setValue("InvoiceAmt", Util.getValueOfDecimal(data["DueAmt"]));\n            }\n          } else {\n            if (IsReturnTrx == "Y") {\n              mTab.setValue("Amount", -1 * amount);\n              mTab.setValue("InvoiceAmt", -1 * Util.getValueOfDecimal(data["DueAmt"]));\n            } else {\n              mTab.setValue("Amount", amount);\n              mTab.setValue("InvoiceAmt", Util.getValueOfDecimal(data["DueAmt"]));\n            }\n            mTab.setValue("DiscountAmt", 0);\n          }\n        } else {\n          mTab.setValue("Amount", Util.getValueOfDecimal(data["DueAmt"])); // For Cash Journal Line \n          ctx.setContext(windowNo, "InvTotalAmt", Util.getValueOfDecimal(mTab.getValue("Amount")));\n          mTab.setValue("WriteOffAmt", 0);\n          mTab.setValue("OverUnderAmt", 0);\n          //qry = "SELECT DateAcct FROM C_Cash WHERE IsActive = \'Y\' AND C_Cash_ID = " + mTab.getValue("C_Cash_ID");\n          var accountDate = Util.getValueOfDate(data["accountDate"]);\n          //qry = "SELECT IsSoTrx FROM C_Invoice WHERE C_Invoice_ID = " + mTab.getValue("C_Invoice_ID");\n          var isSoTrx = Util.getValueOfString(data["isSoTrx"]);\n          //VIS_427 Bug Id 5620 changed sign of amount according to IsSotrx check\n          if (Util.getValueOfDate(data["DiscountDate"]) >= accountDate) {\n            if (isSoTrx == "N") {\n              mTab.setValue("DiscountAmt", -1 * Util.getValueOfDecimal(data["DiscountAmt"]));\n              mTab.setValue("Amount", -1 * (Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["DiscountAmt"])));\n              //VIS_427 For Payment allocate set due amount in invoice amount\n              if (mTab.getTableName() == "C_PaymentAllocate") {\n                mTab.setValue("InvoiceAmt", -1 * Util.getValueOfDecimal(data["DueAmt"]));\n              }\n            } else {\n              mTab.setValue("DiscountAmt", Util.getValueOfDecimal(data["DiscountAmt"]));\n              mTab.setValue("Amount", Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["DiscountAmt"]));\n              if (mTab.getTableName() == "C_PaymentAllocate") {\n                mTab.setValue("InvoiceAmt", Util.getValueOfDecimal(data["DueAmt"]));\n              }\n            }\n          } else if (Util.getValueOfDate(data["DiscountDays2"]) >= accountDate) {\n            if (isSoTrx == "N") {\n              mTab.setValue("DiscountAmt", -1 * Util.getValueOfDecimal(data["Discount2"]));\n              mTab.setValue("Amount", -1 * (Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["DiscountAmt"])));\n              if (mTab.getTableName() == "C_PaymentAllocate") {\n                mTab.setValue("InvoiceAmt", -1 * Util.getValueOfDecimal(data["DueAmt"]));\n              }\n            } else {\n              mTab.setValue("DiscountAmt", Util.getValueOfDecimal(data["Discount2"]));\n              mTab.setValue("Amount", Util.getValueOfDecimal(data["DueAmt"]) - Util.getValueOfDecimal(data["DiscountAmt"]));\n              if (mTab.getTableName() == "C_PaymentAllocate") {\n                mTab.setValue("InvoiceAmt", Util.getValueOfDecimal(data["DueAmt"]));\n              }\n            }\n          } else {\n            if (isSoTrx == "N") {\n              mTab.setValue("Amount", -1 * Util.getValueOfDecimal(data["DueAmt"]));\n              if (mTab.getTableName() == "C_PaymentAllocate") {\n                mTab.setValue("InvoiceAmt", -1 * Util.getValueOfDecimal(data["DueAmt"]));\n              }\n            } else {\n              mTab.setValue("Amount", Util.getValueOfDecimal(data["DueAmt"]));\n              if (mTab.getTableName() == "C_PaymentAllocate") {\n                mTab.setValue("InvoiceAmt", Util.getValueOfDecimal(data["DueAmt"]));\n              }\n            }\n            mTab.setValue("DiscountAmt", 0);\n          }\n        }\n      }\n    } else {\n      var C_InvoicePaySchedule_ID = Util.getValueOfInt(value);\n      if (C_InvoicePaySchedule_ID == null || C_InvoicePaySchedule_ID == 0) {\n        ctx.setContext(windowNo, "InvTotalAmt", null);\n        if (mTab.getTableName() == "C_Payment") {\n          mTab.setValue("PayAmt", null); // For Payment window\n          mTab.setValue("PaymentAmount", null);\n        } else {\n          mTab.setValue("Amount", null); // For Cash Journal Line \n        }\n        this.setCalloutActive(false);\n        return "";\n      }\n      //var result = "SELECT DueAmt FROM C_InvoicePaySchedule WHERE C_InvoicePaySchedule_ID=" + C_InvoicePaySchedule_ID;\n      var dr = VIS.dataContext.getJSONRecord("MCashBook/GetInvSchedDueAmt", C_InvoicePaySchedule_ID.toString());\n      //var Amt = Util.getValueOfDecimal(result);\n      if (dr != null) {\n        var Amt = dr["DueAmt"];\n        if (mTab.getTableName() == "C_Payment") {\n          if (dr["IsReturnTrx"] == "Y") {\n            mTab.setValue("PayAmt", Amt * -1);\n            mTab.setValue("PaymentAmount", Amt * -1);\n          } else {\n            mTab.setValue("PayAmt", Amt); // For Payment window\n            mTab.setValue("PaymentAmount", Amt);\n          }\n        } else {\n          mTab.setValue("Amount", Amt); // For Cash Journal Line \n          ctx.setContext(windowNo, "InvTotalAmt", Util.getValueOfDecimal(mTab.getValue("Amount")));\n        }\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n\n  /// <summary>\n  /// Cash Journal Line Invoice Amounts. when DiscountAnt, Amount, WriteOffAmt\n  /// change making sure that add up to InvTotalAmt (created by\n  /// CashJournal_Invoice)\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns></returns>\n  CalloutCashJournal.prototype.Amounts = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //if (value == DBNull.Value || value == null || value.toString() == "")\n    //{\n    //    return "";\n    //}\n    // Needs to be Invoice\n    if (this.isCalloutActive()) {\n      //if (this.isCalloutActive() || "I" != mTab.getValue("CashType")) {\n      return "";\n    }\n    //VIS_427 Handle the issue on subtraction of write off, discount, and over under and it should update fields with accurate amount.\n    var invTotalAmt = 0;\n    var colName = mField.getColumnName();\n    var payAmt = Util.getValueOfDecimal(mTab.getValue("Amount"));\n    var stdPrecision = 2;\n    this.setCalloutActive(true);\n    var convertedAmt = 0;\n    if ("I" == mTab.getValue("CashType")) {\n      var discountAmt = Util.getValueOfDecimal(mTab.getValue("DiscountAmt"));\n      var writeOffAmt = Util.getValueOfDecimal(mTab.getValue("WriteOffAmt"));\n      var overUnderAmt = Util.getValueOfDecimal(mTab.getValue("OverUnderAmt"));\n      var paramstring = Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")).toString() + "," + Util.getValueOfInt(mTab.getValue("C_Currency_ID")).toString();\n      //Getting the open amount of invoice schedule\n      var AmountSched = VIS.dataContext.getJSONRecord("MCashBook/GetInvSchedDueAmt", paramstring);\n      if (AmountSched != null) {\n        invTotalAmt = Util.getValueOfDecimal(AmountSched["DueAmt"]);\n        stdPrecision = Util.getValueOfInt(AmountSched["StdPrecision"]);\n      }\n      var PaymentType = mTab.getValue("VSS_PaymentType");\n      if (PaymentType == "P") {\n        if (payAmt > 0) {\n          payAmt = payAmt * -1;\n          mTab.setValue("Amount", payAmt);\n        }\n        if (discountAmt > 0) {\n          discountAmt = discountAmt * -1;\n        }\n        if (writeOffAmt > 0) {\n          writeOffAmt = writeOffAmt * -1;\n          mTab.setValue("WriteOffAmt", writeOffAmt);\n        }\n        if (overUnderAmt > 0) {\n          overUnderAmt = overUnderAmt * -1;\n          mTab.setValue("OverUnderAmt", overUnderAmt);\n        }\n        if (invTotalAmt > 0) {\n          invTotalAmt = invTotalAmt * -1;\n        }\n      } else {\n        if (payAmt < 0) {\n          payAmt = payAmt * -1;\n          mTab.setValue("Amount", payAmt);\n        }\n        if (discountAmt < 0) {\n          discountAmt = discountAmt * -1;\n        }\n        if (writeOffAmt < 0) {\n          writeOffAmt = writeOffAmt * -1;\n          mTab.setValue("WriteOffAmt", writeOffAmt);\n        }\n        if (overUnderAmt < 0) {\n          overUnderAmt = overUnderAmt * -1;\n          mTab.setValue("OverUnderAmt", overUnderAmt);\n        }\n        if (invTotalAmt < 0) {\n          invTotalAmt = invTotalAmt * -1;\n        }\n      }\n      this.log.fine(colName + " - Invoice=" + invTotalAmt + " - Amount=" + payAmt + ", Discount=" + discountAmt + ", WriteOff=" + writeOffAmt);\n\n      // Amount - calculate write off\n      if (colName == "Amount") {\n        var sub = invTotalAmt - payAmt;\n        overUnderAmt = (sub - discountAmt - writeOffAmt).toFixed(stdPrecision);\n        //  writeOffAmt = Decimal.Subtract(Decimal.Subtract(invTotalAmt, payAmt), discountAmt);\n        if (PaymentType == "R" && overUnderAmt > 0 || PaymentType == "P" && overUnderAmt < 0) {\n          VIS.ADialog.info("LessScheduleAmount");\n        }\n        if (PaymentType == "P" && overUnderAmt > 0 || PaymentType == "R" && overUnderAmt < 0) {\n          VIS.ADialog.info("MoreScheduleAmount");\n          payAmt = invTotalAmt - discountAmt - writeOffAmt;\n          overUnderAmt = invTotalAmt - payAmt - discountAmt - writeOffAmt;\n          mTab.setValue("Amount", payAmt.toFixed(stdPrecision));\n        }\n        //precised value\'s according to precision if value does not match\n        if (discountAmt.toFixed(stdPrecision) != Util.getValueOfDecimal(mTab.getValue("DiscountAmt"))) {\n          mTab.setValue("DiscountAmt", discountAmt.toFixed(stdPrecision));\n        }\n        if (overUnderAmt != Util.getValueOfDecimal(mTab.getValue("OverUnderAmt"))) {\n          mTab.setValue("OverUnderAmt", Util.getValueOfDecimal(overUnderAmt).toFixed(stdPrecision));\n        }\n        if (writeOffAmt.toFixed(stdPrecision) != Util.getValueOfDecimal(mTab.getValue("WriteOffAmt"))) {\n          mTab.setValue("WriteOffAmt", writeOffAmt.toFixed(stdPrecision));\n        }\n        if (payAmt.toFixed(stdPrecision) != Util.getValueOfDecimal(mTab.getValue("Amount"))) {\n          mTab.setValue("Amount", payAmt.toFixed(stdPrecision));\n        }\n      } else\n        // calculate PayAmt\n        {\n          var sub = invTotalAmt - discountAmt;\n          payAmt = (sub - writeOffAmt - overUnderAmt).toFixed(stdPrecision);\n          //payAmt = Decimal.Subtract(Decimal.Subtract(invTotalAmt, discountAmt), writeOffAmt);\n\n          if (PaymentType == "P" && payAmt > 0 || PaymentType == "R" && payAmt < 0) {\n            VIS.ADialog.info("MoreScheduleAmount");\n            if (colName == "OverUnderAmt") {\n              payAmt = invTotalAmt - discountAmt - writeOffAmt;\n              overUnderAmt = invTotalAmt - payAmt - discountAmt - writeOffAmt;\n              mTab.setValue("OverUnderAmt", overUnderAmt);\n            }\n            if (colName == "DiscountAmt") {\n              payAmt = invTotalAmt - overUnderAmt - writeOffAmt;\n              discountAmt = invTotalAmt - payAmt - overUnderAmt - writeOffAmt;\n              mTab.setValue("DiscountAmt", discountAmt.toFixed(stdPrecision));\n            }\n            if (colName == "WriteOffAmt") {\n              payAmt = invTotalAmt - discountAmt - overUnderAmt;\n              writeOffAmt = invTotalAmt - payAmt - discountAmt - overUnderAmt;\n              mTab.setValue("WriteOffAmt", writeOffAmt.toFixed(stdPrecision));\n            }\n          }\n          //precised value\'s according to precision if value does not match\n          if (discountAmt.toFixed(stdPrecision) != Util.getValueOfDecimal(mTab.getValue("DiscountAmt"))) {\n            mTab.setValue("DiscountAmt", discountAmt.toFixed(stdPrecision));\n          }\n          if (writeOffAmt.toFixed(stdPrecision) != Util.getValueOfDecimal(mTab.getValue("WriteOffAmt"))) {\n            mTab.setValue("WriteOffAmt", writeOffAmt.toFixed(stdPrecision));\n          }\n          if (overUnderAmt != Util.getValueOfDecimal(mTab.getValue("OverUnderAmt"))) {\n            mTab.setValue("OverUnderAmt", Util.getValueOfDecimal(overUnderAmt).toFixed(stdPrecision));\n          }\n          if (payAmt != Util.getValueOfDecimal(mTab.getValue("Amount"))) {\n            mTab.setValue("Amount", Util.getValueOfDecimal(payAmt).toFixed(stdPrecision));\n          }\n          if (PaymentType == "R" && overUnderAmt > 0 || PaymentType == "P" && overUnderAmt < 0) {\n            VIS.ADialog.info("LessScheduleAmount");\n          }\n        }\n    }\n    var paramString = mTab.getValue("C_Cash_ID").toString();\n    var cash = VIS.dataContext.getJSONRecord("MCashBook/GetCashJournal", paramString);\n    var convDate = cash["DateAcct"];\n    var CurrFrom = cash["C_Currency_ID"];\n    var CurrTo = cash["C_Currency_ID"];\n    if (mTab.getValue("C_Currency_ID") != null) {\n      CurrFrom = mTab.getValue("C_Currency_ID").toString();\n    }\n    var conversionType_ID = 0;\n    if (mTab.getField("C_ConversionType_ID") != null) {\n      conversionType_ID = Util.getValueOfInt(mTab.getValue("C_ConversionType_ID"));\n    }\n    if (CurrFrom != CurrTo) {\n      paramString = payAmt.toString() + "," + CurrFrom + "," + CurrTo + "," + convDate + "," + conversionType_ID.toString() + "," + ctx.getAD_Client_ID().toString() + "," + ctx.getAD_Org_ID().toString();\n      convertedAmt = VIS.dataContext.getJSONRecord("MConversionRate/CurrencyConvert", paramString);\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0 && convertedAmt == 0) {\n        VIS.ADialog.info("NoCurrencyConversion");\n      }\n    } else {\n      convertedAmt = payAmt;\n    }\n    mTab.setValue("convertedAmt", Util.getValueOfDecimal(convertedAmt).toFixed(stdPrecision));\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Biginning balace calculation\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns></returns>\n  CalloutCashJournal.prototype.BeginningBalCalc = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive())\n      // assuming it is resetting value\n      {\n        return "";\n      }\n    this.setCalloutActive(true);\n    var C_Cash_ID = Util.getValueOfInt(value);\n    if (C_Cash_ID == null || C_Cash_ID == 0) {\n      mTab.setValue("BeginningBalance", 0);\n      this.setCalloutActive(false);\n      return "";\n    }\n    var C_CashBook_ID = Util.getValueOfInt(mTab.getValue("C_CashBook_ID"));\n    var AD_Client_ID = Util.getValueOfInt(mTab.getValue("AD_Client_ID"));\n    var AD_Org_ID = Util.getValueOfInt(mTab.getValue("AD_Org_ID"));\n\n    // Date\n    //var ts = CommonFunctions.CovertMilliToDate(ctx.getContextAsTime(windowNo, "DateAcct"));\n    var ts = ctx.getContext("DateAcct");\n    //DateTime ts = new DateTime(ctx.getContextAsTime(windowNo, "DateAcct"));     // from\n    // C_Cash\n\n    var param = C_CashBook_ID.toString() + "," + AD_Client_ID.toString() + "," + AD_Org_ID.toString();\n    var beginningBalance = VIS.dataContext.getJSONRecord("MCashJournal/GetBeginningBalCalc", param);\n\n    //var sql = "SELECT EndingBalance FROM C_Cash WHERE C_CashBook_ID=" + C_CashBook_ID + " AND" +\n    //    " AD_Client_ID=" + AD_Client_ID + " AND AD_Org_ID=" + AD_Org_ID + " AND " +\n    //    "c_cash_id IN (SELECT Max(c_cash_id) FROM C_Cash WHERE C_CashBook_ID=" + C_CashBook_ID\n    //    + "AND AD_Client_ID=" + AD_Client_ID + " AND AD_Org_ID=" + AD_Org_ID + ") AND Processed=\'Y\'";\n    //var idr = null;\n    try {\n      //idr = VIS.DB.executeReader(sql, null, null);\n      //pstmt.setInt(1, C_CashBook_ID.intValue());\n      //pstmt.setInt(2, AD_Client_ID.intValue());\n      //pstmt.setInt(3, AD_Org_ID.intValue());\n      //pstmt.setInt(4, C_CashBook_ID.intValue());\n      //pstmt.setInt(5, AD_Client_ID.intValue());\n      //pstmt.setInt(6, AD_Org_ID.intValue());\n      //ResultSet rs = pstmt.executeQuery();\n      //if (idr.read()) {\n      //var beginningBalance = Util.getValueOfDecimal(idr.get(0));//.getBigDecimal(1);\n\n      if (beginningBalance > 0) {\n        mTab.setValue("BeginningBalance", beginningBalance);\n      } else {\n        //var zero = 0;\n        mTab.setValue("BeginningBalance", 0);\n      }\n      idr.close();\n    } catch (err) {\n      if (idr != null) {\n        idr.close();\n      }\n      this.log.log(Level.SEVERE, "Beginning balance", err);\n      this.setCalloutActive(false);\n      //return e.getLocalizedMessage();\n      return err.toString();\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutCashJournal.prototype.SetCurrency = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if ((value == null || value.toString() == "") && mField.getColumnName() != "C_ConversionType_ID") {\n      //if (value == null || value.toString() == "") {\n      //mTab.setValue("C_Currency_ID", 0);\n      return "";\n    }\n    if (this.isCalloutActive())\n      // assuming it is resetting value\n      {\n        return "";\n      }\n    this.setCalloutActive(true);\n    var paramString = "";\n    var payAmt = Util.getValueOfDecimal(mTab.getValue("Amount"));\n    if (mField.getColumnName() == "C_CashBook_ID") {\n      var C_CashBook_ID = Util.getValueOfInt(value);\n      if (C_CashBook_ID == null || C_CashBook_ID == 0) {\n        mTab.setValue("C_Currency_ID", 0);\n        this.setCalloutActive(false);\n        return "";\n      }\n      paramString = C_CashBook_ID.toString();\n      //var paramString = C_CashBook_ID.toString();\n      var cBook = VIS.dataContext.getJSONRecord("MCashBook/GetCashBook", paramString);\n      // MCashBook cBook = new MCashBook(ctx, C_CashBook_ID, null);\n      mTab.setValue("C_Currency_ID", cBook["C_Currency_ID"]);\n    } else if (mField.getColumnName() == "C_BankAccount_ID") {\n      var C_BankAccount_ID = Util.getValueOfInt(value);\n      if (C_BankAccount_ID == null || C_BankAccount_ID == 0) {\n        mTab.setValue("C_Currency_ID", 0);\n        this.setCalloutActive(false);\n        return "";\n      }\n      paramString = C_BankAccount_ID.toString();\n      //var qry = "SELECT C_Currency_ID FROM C_BankAccount WHERE C_BankAccount_ID = " + C_BankAccount_ID;\n      //var currency = Util.getValueOfInt(VIS.DB.executeScalar(qry, null, null));\n\n      var currency = Util.getValueOfInt(VIS.dataContext.getJSONRecord("MPayment/GetBankAcctCurrency", paramString));\n      mTab.setValue("C_Currency_ID", currency);\n    }\n    if (payAmt != 0) {\n      paramString = mTab.getValue("C_Cash_ID").toString();\n      var convertedAmt = 0;\n      var cash = VIS.dataContext.getJSONRecord("MCashBook/GetCashJournal", paramString);\n      var convDate = cash["DateAcct"];\n      var CurrFrom = cash["C_Currency_ID"];\n      var CurrTo = cash["C_Currency_ID"];\n      if (mTab.getValue("C_Currency_ID") != null) {\n        CurrFrom = mTab.getValue("C_Currency_ID").toString();\n      }\n      var conversionType_ID = 0;\n      if (mTab.getField("C_ConversionType_ID") != null) {\n        conversionType_ID = Util.getValueOfInt(mTab.getValue("C_ConversionType_ID"));\n      }\n      if (CurrFrom != CurrTo) {\n        paramString = payAmt.toString() + "," + CurrFrom + "," + CurrTo + "," + convDate + "," + conversionType_ID.toString() + "," + ctx.getAD_Client_ID().toString() + "," + ctx.getAD_Org_ID().toString();\n        convertedAmt = VIS.dataContext.getJSONRecord("MConversionRate/CurrencyConvert", paramString);\n        if (convertedAmt == 0) {\n          VIS.ADialog.info("NoCurrencyConversion");\n        }\n      } else {\n        convertedAmt = payAmt;\n      }\n      mTab.setValue("convertedAmt", convertedAmt);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// ConvertedAmt calculation\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="WindowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns></returns>\n  CalloutCashJournal.prototype.ConvertedAmt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive())\n      // assuming it is resetting value\n      {\n        return "";\n      }\n    this.setCalloutActive(true);\n    try {\n      if (value > 0) {\n        // when conversion type not selected then given message and clear value\n        if (Util.getValueOfInt(mTab.getValue("C_ConversionType_ID")) <= 0) {\n          mTab.setValue("C_CashLine_ID_1", "");\n          VIS.ADialog.info("VIS_SelectConversion");\n          this.setCalloutActive(false);\n          return "";\n        }\n        var paramString = value.toString() + "," + mTab.getValue("C_Cash_ID").toString() + "," + mTab.getValue("AD_Org_ID").toString() + "," + mTab.getValue("C_ConversionType_ID").toString();\n        var result = VIS.dataContext.getJSONRecord("MCashJournal/ConvertedAmt", paramString);\n        if (Util.getValueOfInt(result["currTo"]) == 0) {\n          this.setCalloutActive(false);\n          return "";\n        }\n        if (Util.getValueOfDecimal(result["amt"]) != 0 && Util.getValueOfDecimal(result["transferdAmt"]) == 0) {\n          VIS.ADialog.info("NoCurrencyConversion");\n        }\n        mTab.setValue("ConvertedAmt", Util.getValueOfDecimal(result["transferdAmt"]));\n        mTab.setValue("Amount", Util.getValueOfDecimal(result["amt"]));\n      } else {\n        mTab.setValue("ConvertedAmt", 0);\n        mTab.setValue("Amount", 0);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutCashJournal.prototype.GetBeginBal = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value == "") {\n      // JID_1321: "On change of cash journal org system through error message ""[TypeError: Cannot read property \'setReadOnly\' of null]"          \n      //mTab.getField("C_Invoice_ID").setReadOnly(false);\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    //decimal BeginAmt = Util.GetValueOfDecimal(DB.ExecuteScalar(" select CompletedBalance from c_cashbook where c_cashbook_id=" + value));\n    //tab.SetValue("BeginningBalance", BeginAmt);\n    //Added By Manjot Changes Done to  Set Beginning Balance\n    //var TotalAmt = Util.getValueOfDecimal(VIS.DB.executeScalar(" select sum(nvl(CompletedBalance,0)) + sum(nvl(runningbalance,0)) as TotalBal from c_cashbook where c_cashbook_id=" + value));\n\n    var TotalAmt = VIS.dataContext.getJSONRecord("MCashBook/GetBegiBalance", value.toString());\n    mTab.setValue("BeginningBalance", TotalAmt);\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutCashJournal = CalloutCashJournal;\n\n  //*******CalloutSetReadOnly Starts**************\n  function CalloutSetReadOnly() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutSetReadOnly"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutSetReadOnly, VIS.CalloutEngine); //inherit prototype\n\n  CalloutSetReadOnly.prototype.SetReadnly = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "" || value.toString() == "E") {\n      this.setCalloutActive(false);\n      if (value != null) {\n        if (value.toString() == "E") {\n          mTab.getField("VSS_PAYMENTTYPE").setReadOnly(true);\n          mTab.setValue("VSS_PAYMENTTYPE", "P");\n        }\n      }\n      //\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (Util.getValueOfString(mTab.getValue("CashType")) == "A" || Util.getValueOfString(mTab.getValue("CashType")) == "E") {\n      mTab.setValue("VSS_PAYMENTTYPE", "P");\n      mTab.getField("VSS_PAYMENTTYPE").setReadOnly(true);\n    } else if (Util.getValueOfString(mTab.getValue("CashType")) == "F" || Util.getValueOfString(mTab.getValue("CashType")) == "R") {\n      mTab.setValue("VSS_PAYMENTTYPE", "R");\n      mTab.getField("VSS_PAYMENTTYPE").setReadOnly(true);\n    } else if (Util.getValueOfString(mTab.getValue("CashType")) == "I" || Util.getValueOfString(mTab.getValue("CashType")) == "O") {\n      //VA230:Invoice and Order\n      mTab.getField("VSS_PAYMENTTYPE").setReadOnly(true);\n    } else {\n      mTab.getField("VSS_PAYMENTTYPE").setReadOnly(false);\n    }\n    //VIS_427 Set Tax to null if case type is not charge\n    if (Util.getValueOfString(mTab.getValue("CashType")) != "C") {\n      mTab.setValue("C_Tax_ID", null);\n    }\n    //VIS_427 This function is used to clear the fields according to value of cash type\n    if (mField.getColumnName() == "CashType") {\n      ClearValueOfFields(ctx, windowNo, mTab, mField, value, oldValue);\n    }\n    if (Util.getValueOfString(mTab.getValue("VSS_PAYMENTTYPE")) == "P" || Util.getValueOfString(mTab.getValue("VSS_PAYMENTTYPE")) == "E") {\n      /*Receipt Return and Payment*/\n      if (Util.getValueOfDecimal(mTab.getValue("amount")) > 0) {\n        mTab.setValue("Amount", 0 - Util.getValueOfDecimal(mTab.getValue("amount")));\n      }\n    } else if (Util.getValueOfString(mTab.getValue("VSS_PAYMENTTYPE")) == "R" || Util.getValueOfString(mTab.getValue("VSS_PAYMENTTYPE")) == "A") {\n      /*Payment Return and Receipt*/\n      if (Util.getValueOfDecimal(mTab.getValue("amount")) < 0) {\n        mTab.setValue("Amount", 0 - Util.getValueOfDecimal(mTab.getValue("amount")));\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  /**\r\n   * This function is used to clear the fields according to value of cash type\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  function ClearValueOfFields(ctx, windowNo, mTab, mField, value, oldValue) {\n    //charge\n    if (Util.getValueOfString(mTab.getValue("CashType")) == "C") {\n      if (Util.getValueOfInt(mTab.getValue("C_CashBook_ID")) != 0) {\n        mTab.setValue("C_CashBook_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) != 0) {\n        mTab.setValue("C_Invoice_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")) != 0) {\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Order_ID")) != 0) {\n        mTab.setValue("C_Order_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) != 0) {\n        mTab.setValue("VA009_OrderPaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashLine_ID_1")) != 0) {\n        mTab.setValue("C_CashLine_ID_1", null);\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n        mTab.setValue("Amount", null);\n      }\n      mTab.setValue("TransferType", null);\n      if (window.VA012 && !mTab.getValue("VA012_IsContra")) {\n        mTab.setValue("CheckNo", null);\n        if (Util.getValueOfInt(mTab.getValue("C_BankAccount_ID")) != 0) {\n          mTab.setValue("C_BankAccount_ID", null);\n        }\n      }\n    }\n    //Difference\n    else if (Util.getValueOfString(mTab.getValue("CashType")) == "D") {\n      mTab.setValue("CheckNo", null);\n      if (Util.getValueOfInt(mTab.getValue("C_BankAccount_ID")) != 0) {\n        mTab.setValue("C_BankAccount_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashBook_ID")) != 0) {\n        mTab.setValue("C_CashBook_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_ID")) != 0) {\n        mTab.setValue("C_BPartner_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID")) != 0) {\n        mTab.setValue("C_BPartner_Location_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) != 0) {\n        mTab.setValue("C_Invoice_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")) != 0) {\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) != 0) {\n        mTab.setValue("C_Charge_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Order_ID")) != 0) {\n        mTab.setValue("C_Order_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) != 0) {\n        mTab.setValue("VA009_OrderPaySchedule_ID", null);\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n        mTab.setValue("Amount", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashLine_ID_1")) != 0) {\n        mTab.setValue("C_CashLine_ID_1", null);\n      }\n      mTab.setValue("TransferType", null);\n      if (window.VA012) {\n        mTab.setValue("VA012_IsContra", false);\n      }\n    }\n    //business partner\n    else if (Util.getValueOfString(mTab.getValue("CashType")) == "B") {\n      mTab.setValue("CheckNo", null);\n      if (Util.getValueOfInt(mTab.getValue("C_BankAccount_ID")) != 0) {\n        mTab.setValue("C_BankAccount_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashBook_ID")) != 0) {\n        mTab.setValue("C_CashBook_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) != 0) {\n        mTab.setValue("C_Invoice_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")) != 0) {\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) != 0) {\n        mTab.setValue("C_Charge_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Order_ID")) != 0) {\n        mTab.setValue("C_Order_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) != 0) {\n        mTab.setValue("VA009_OrderPaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashLine_ID_1")) != 0) {\n        mTab.setValue("C_CashLine_ID_1", null);\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n        mTab.setValue("Amount", null);\n      }\n      mTab.setValue("TransferType", null);\n      if (window.VA012) {\n        mTab.setValue("VA012_IsContra", false);\n      }\n    }\n    //cash book transfer\n    else if (Util.getValueOfString(mTab.getValue("CashType")) == "A") {\n      mTab.setValue("CheckNo", null);\n      if (Util.getValueOfInt(mTab.getValue("C_BankAccount_ID")) != 0) {\n        mTab.setValue("C_BankAccount_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) != 0) {\n        mTab.setValue("C_Invoice_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")) != 0) {\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) != 0) {\n        mTab.setValue("C_Charge_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Order_ID")) != 0) {\n        mTab.setValue("C_Order_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) != 0) {\n        mTab.setValue("VA009_OrderPaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashLine_ID_1")) != 0) {\n        mTab.setValue("C_CashLine_ID_1", null);\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n        mTab.setValue("Amount", null);\n      }\n      mTab.setValue("TransferType", null);\n      if (window.VA012) {\n        mTab.setValue("VA012_IsContra", false);\n      }\n    }\n    //General Expense\n    else if (Util.getValueOfString(mTab.getValue("CashType")) == "E") {\n      mTab.setValue("CheckNo", null);\n      if (Util.getValueOfInt(mTab.getValue("C_BankAccount_ID")) != 0) {\n        mTab.setValue("C_BankAccount_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashBook_ID")) != 0) {\n        mTab.setValue("C_CashBook_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_ID")) != 0) {\n        mTab.setValue("C_BPartner_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID")) != 0) {\n        mTab.setValue("C_BPartner_Location_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) != 0) {\n        mTab.setValue("C_Invoice_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")) != 0) {\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) != 0) {\n        mTab.setValue("C_Charge_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Order_ID")) != 0) {\n        mTab.setValue("C_Order_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) != 0) {\n        mTab.setValue("VA009_OrderPaySchedule_ID", null);\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n        mTab.setValue("Amount", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashLine_ID_1")) != 0) {\n        mTab.setValue("C_CashLine_ID_1", null);\n      }\n      mTab.setValue("TransferType", null);\n      if (window.VA012) {\n        mTab.setValue("VA012_IsContra", false);\n      }\n    }\n    //General Receipts\n    else if (Util.getValueOfString(mTab.getValue("CashType")) == "R") {\n      mTab.setValue("CheckNo", null);\n      if (Util.getValueOfInt(mTab.getValue("C_BankAccount_ID")) != 0) {\n        mTab.setValue("C_BankAccount_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashBook_ID")) != 0) {\n        mTab.setValue("C_CashBook_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_ID")) != 0) {\n        mTab.setValue("C_BPartner_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID")) != 0) {\n        mTab.setValue("C_BPartner_Location_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) != 0) {\n        mTab.setValue("C_Invoice_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")) != 0) {\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) != 0) {\n        mTab.setValue("C_Charge_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Order_ID")) != 0) {\n        mTab.setValue("C_Order_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) != 0) {\n        mTab.setValue("VA009_OrderPaySchedule_ID", null);\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n        mTab.setValue("Amount", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashLine_ID_1")) != 0) {\n        mTab.setValue("C_CashLine_ID_1", null);\n      }\n      mTab.setValue("TransferType", null);\n      if (window.VA012) {\n        mTab.setValue("VA012_IsContra", false);\n      }\n    }\n    //Invoice\n    else if (Util.getValueOfString(mTab.getValue("CashType")) == "I") {\n      mTab.setValue("CheckNo", null);\n      if (Util.getValueOfInt(mTab.getValue("C_BankAccount_ID")) != 0) {\n        mTab.setValue("C_BankAccount_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashBook_ID")) != 0) {\n        mTab.setValue("C_CashBook_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) != 0) {\n        mTab.setValue("C_Charge_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Order_ID")) != 0) {\n        mTab.setValue("C_Order_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) != 0) {\n        mTab.setValue("VA009_OrderPaySchedule_ID", null);\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n        mTab.setValue("Amount", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashLine_ID_1")) != 0) {\n        mTab.setValue("C_CashLine_ID_1", null);\n      }\n      mTab.setValue("TransferType", null);\n      if (window.VA012) {\n        mTab.setValue("VA012_IsContra", false);\n      }\n    }\n    //order\n    else if (Util.getValueOfString(mTab.getValue("CashType")) == "O") {\n      mTab.setValue("CheckNo", null);\n      if (Util.getValueOfInt(mTab.getValue("C_BankAccount_ID")) != 0) {\n        mTab.setValue("C_BankAccount_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashBook_ID")) != 0) {\n        mTab.setValue("C_CashBook_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) != 0) {\n        mTab.setValue("C_Charge_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_ID")) != 0) {\n        mTab.setValue("C_BPartner_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID")) != 0) {\n        mTab.setValue("C_BPartner_Location_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) != 0) {\n        mTab.setValue("C_Invoice_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")) != 0) {\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_CashLine_ID_1")) != 0) {\n        mTab.setValue("C_CashLine_ID_1", null);\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n        mTab.setValue("Amount", null);\n      }\n      mTab.setValue("TransferType", null);\n      if (window.VA012) {\n        mTab.setValue("VA012_IsContra", false);\n      }\n    }\n    //Cash Received From\n    else if (Util.getValueOfString(mTab.getValue("CashType")) == "F") {\n      mTab.setValue("CheckNo", null);\n      if (Util.getValueOfInt(mTab.getValue("C_BankAccount_ID")) != 0) {\n        mTab.setValue("C_BankAccount_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_ID")) != 0) {\n        mTab.setValue("C_BPartner_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID")) != 0) {\n        mTab.setValue("C_BPartner_Location_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) != 0) {\n        mTab.setValue("C_Invoice_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")) != 0) {\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) != 0) {\n        mTab.setValue("C_Charge_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Order_ID")) != 0) {\n        mTab.setValue("C_Order_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) != 0) {\n        mTab.setValue("VA009_OrderPaySchedule_ID", null);\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n        mTab.setValue("Amount", null);\n      }\n      mTab.setValue("TransferType", null);\n      if (window.VA012) {\n        mTab.setValue("VA012_IsContra", false);\n      }\n    }\n    //Bank Account Transfer\n    else if (Util.getValueOfString(mTab.getValue("CashType")) == "T") {\n      mTab.setValue("CheckNo", null);\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_ID")) != 0) {\n        mTab.setValue("C_BPartner_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID")) != 0) {\n        mTab.setValue("C_BPartner_Location_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) != 0) {\n        mTab.setValue("C_Invoice_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")) != 0) {\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) != 0) {\n        mTab.setValue("C_Charge_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("C_Order_ID")) != 0) {\n        mTab.setValue("C_Order_ID", null);\n      }\n      if (Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) != 0) {\n        mTab.setValue("VA009_OrderPaySchedule_ID", null);\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n        mTab.setValue("Amount", null);\n      }\n      if (window.VA012) {\n        mTab.setValue("VA012_IsContra", false);\n      }\n    }\n  }\n  CalloutSetReadOnly.prototype.SetAmountValue = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      mTab.getField("VSS_PAYMENTTYPE").setReadOnly(false);\n      this.setCalloutActive(false);\n      return "";\n    }\n    this.setCalloutActive(true);\n    // JID_1326_1: "1. On Cash journal line, in case of cash type BP Amount should allow to save in -ve and +ve.\n    if (Util.getValueOfString(mTab.getValue("CashType")) != "B") {\n      if (Util.getValueOfString(mTab.getValue("VSS_PAYMENTTYPE")) == "P") {\n        if (Util.getValueOfDecimal(mTab.getValue("amount")) > 0) {\n          mTab.setValue("Amount", 0 - Util.getValueOfDecimal(mTab.getValue("amount")));\n        }\n      } else if (Util.getValueOfString(mTab.getValue("VSS_PAYMENTTYPE")) == "R") {\n        if (Util.getValueOfDecimal(mTab.getValue("amount")) < 0) {\n          mTab.setValue("Amount", 0 - Util.getValueOfDecimal(mTab.getValue("amount")));\n        }\n      }\n    } else if (Util.getValueOfString(mTab.getValue("CashType")) == "B") {\n      // Cash Type = Business Partner\n      // Get Payment Type\n      var paymenttype = Util.getValueOfString(mTab.getValue("VSS_PAYMENTTYPE"));\n      // Payment or Receipt Return\n      if ((paymenttype == "P" || paymenttype == "E") && Util.getValueOfDecimal(mTab.getValue("amount")) > 0) {\n        mTab.setValue("Amount", 0 - Util.getValueOfDecimal(mTab.getValue("amount")));\n        mTab.setValue("ConvertedAmount", 0 - Util.getValueOfDecimal(mTab.getValue("ConvertedAmount")));\n      }\n      // Receipt or Payment Return\n      else if ((paymenttype == "R" || paymenttype == "A") && Util.getValueOfDecimal(mTab.getValue("amount")) < 0) {\n        mTab.setValue("Amount", 0 - Util.getValueOfDecimal(mTab.getValue("amount")));\n        mTab.setValue("ConvertedAmount", 0 - Util.getValueOfDecimal(mTab.getValue("ConvertedAmount")));\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutSetReadOnly = CalloutSetReadOnly;\n  //*******CalloutSetReadOnly Ends**************\n\n  function CalloutCashJournalLine() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutCashJournalLine"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutCashJournalLine, VIS.CalloutEngine); //inherit prototype\n  CalloutCashJournalLine.prototype.SetBPLocation = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      mTab.setValue("C_BPartner_Location_ID", null);\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      if (mTab.getValue("CashType") == "B" || mTab.getValue("CashType") == "C") {\n        var BusinessPartner_ID = mTab.getValue("C_BPartner_ID");\n        if (BusinessPartner_ID == null || BusinessPartner_ID == "") {\n          mTab.setValue("C_BPartner_Location_ID", null);\n          this.setCalloutActive(false);\n          return "";\n        }\n        var paramString = BusinessPartner_ID.toString() + "," + ctx.getAD_Client_ID().toString();\n        var data = VIS.dataContext.getJSONRecord("MCashJournal/GetBPLocation", paramString);\n        if (data != null) {\n          var CreditStatus = Util.getValueOfInt(data["CreditStatusSettingOn"]);\n          var Location_ID = Util.getValueOfInt(data["C_BPartner_Location_ID"]);\n          if (CreditStatus == "CL" && Location_ID == 0) {\n            this.setCalloutActive(false);\n            return VIS.Msg.getMsg("LocationNew");\n          }\n          mTab.setValue("C_BPartner_Location_ID", Location_ID);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n\n  /**\r\n  *To set Account Number and Routing no against bank account selection on journal line\r\n  *@alias    setAccountNo\r\n  *@memberof CalloutCashJournalLine\r\n  *@param {object}   ctx              Context.\r\n  *@param {number}   windowNo         Current Window No.\r\n  *@param {object}   mTab             a GridTab object.\r\n  *@param {object}   mField           Model Field.\r\n  *@param {string}   value            The new value.\r\n  *@param {string}   oldValue         The new value.\r\n  *@return {string} message           Error message or "".\r\n  */\n  CalloutCashJournalLine.prototype.setAccountNo = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      //mTab.setValue("C_BankAccount_ID", null);\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      //if (mTab.getValue("TransferType") == "CK") {\n      // JID_1244: On Cash Journal line when we change trasfer type cash to check. Callout should fire and set routing number and account number\n      var data = VIS.dataContext.getJSONRecord("MCashJournal/GetBankAccountData", value);\n      if (data != null) {\n        mTab.setValue("RoutingNo", Util.getValueOfString(data["RoutingNo"]));\n        mTab.setValue("AccountNo", Util.getValueOfString(data["AccountNo"]));\n      }\n      //}\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutCashJournalLine = CalloutCashJournalLine;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/CalloutCashJournal.js?\n}')},"./Areas/VAS/Scripts/model/CalloutChartOfAccount.js":()=>{eval('{/********************************************************************************\r\n * Module Name    : VAS\r\n * Purpose        : This Callout is created to clear the bank and foreign currency\r\n                    details\r\n * chronological  : Development\r\n * Created Date   : 22 Nov 2024\r\n * Created by     : VIS_427\r\n ********************************************************************************/\n\n;\n(function (VIS, $) {\n  function CalloutChartOfAccount() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutChartOfAccount"); //must call\n  }\n  VIS.Utility.inheritPrototype(CalloutChartOfAccount, VIS.CalloutEngine); //inherit CalloutEngine\n  /**\r\n   * this callout use to clear the bank account,currency and mark foreign currency checkbox as false\r\n   * on click of bank account checkbox\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutChartOfAccount.prototype.ClearBankAccountDetails = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      if (mTab.getValue("C_BankAccount_ID") != null) {\n        mTab.setValue("C_BankAccount_ID", null);\n      }\n      if (mTab.getValue("C_Currency_ID") != null) {\n        mTab.setValue("C_Currency_ID", null);\n      }\n      mTab.setValue("IsForeignCurrency", false);\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /**\r\n  * this callout use to clear currency on click of foreign currency checkbox\r\n  * @param {any} ctx\r\n  * @param {any} windowNo\r\n  * @param {any} mTab\r\n  * @param {any} mField\r\n  * @param {any} value\r\n  * @param {any} oldValue\r\n  */\n  CalloutChartOfAccount.prototype.ClearForeignCurrencyDetails = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      if (mTab.getValue("C_Currency_ID") != null) {\n        mTab.setValue("C_Currency_ID", null);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutChartOfAccount = CalloutChartOfAccount;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/CalloutChartOfAccount.js?\n}')},"./Areas/VAS/Scripts/model/CalloutOrder.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  var steps = false;\n  var countEd011 = 0;\n\n  //************Callout Order*************//\n  //****CalloutOrder Start\n  function CalloutOrder() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutOrder");\n  }\n  ;\n  //#endregion\n  VIS.Utility.inheritPrototype(CalloutOrder, VIS.CalloutEngine); //inherit calloutengine\n\n  CalloutOrder.prototype.DocType = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    /** Sales Order Sub Type - SO\t*/\n    var DocSubTypeSO_Standard = "SO";\n    /** Sales Order Sub Type - OB\t*/\n    var DocSubTypeSO_Quotation = "OB";\n    /** Sales Order Sub Type - ON\t*/\n    var DocSubTypeSO_Proposal = "ON";\n    /** Sales Order Sub Type - PR\t*/\n    var DocSubTypeSO_Prepay = "PR";\n    /** Sales Order Sub Type - WR\t*/\n    var DocSubTypeSO_POS = "WR";\n    /** Sales Order Sub Type - WP\t*/\n    var DocSubTypeSO_Warehouse = "WP";\n    /** Sales Order Sub Type - WI\t*/\n    var DocSubTypeSO_OnCredit = "WI";\n    /** Sales Order Sub Type - RM\t*/\n    var DocSubTypeSO_RMA = "RM";\n\n    /** Blanket Sales Order Sub Type - BO\t*/\n    var DocSubTypeSO_Blanket = "BO";\n\n    /** DeliveryRule AD_Reference_ID=151 */\n    var XC_DELIVERYRULE_AD_Reference_ID = 151;\n    /** Availability = A */\n    var XC_DELIVERYRULE_Availability = "A";\n    /** Force = F */\n    var XC_DELIVERYRULE_Force = "F";\n    /** Complete Line = L */\n    var XC_DELIVERYRULE_CompleteLine = "L";\n    /** Manual = M */\n    var XC_DELIVERYRULE_Manual = "M";\n    /** Complete Order = O */\n    var XC_DELIVERYRULE_CompleteOrder = "O";\n    /** After Receipt = R */\n    var XC_DELIVERYRULE_AfterReceipt = "R";\n    var XC_INVOICERULE_AD_Reference_ID = 150;\n    /** After Delivery = D */\n    var XC_INVOICERULE_AfterDelivery = "D";\n    /** Immediate = I */\n    var XC_INVOICERULE_Immediate = "I";\n    /** After Order delivered = O */\n    var XC_INVOICERULE_AfterOrderDelivered = "O";\n    /** Customer Schedule after Delivery = S */\n    var XC_INVOICERULE_CustomerScheduleAfterDelivery = "S";\n\n    /** PaymentRule AD_Reference_ID=195 */\n    var XC_PAYMENTRULE_AD_Reference_ID = 195;\n    /** Cash = B */\n    var XC_PAYMENTRULE_Cash = "B";\n    /** Direct Debit = D */\n    var XC_PAYMENTRULE_DirectDebit = "D";\n    /** Credit Card = K */\n    var XC_PAYMENTRULE_CreditCard = "K";\n    /** On Credit = P */\n    var XC_PAYMENTRULE_OnCredit = "P";\n    /** Check = S */\n    var XC_PAYMENTRULE_Check = "S";\n    /** Direct Deposit = T */\n    var XC_PAYMENTRULE_DirectDeposit = "T";\n    //var Util=VIS.Util;\n\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      mTab.setValue("BlanketOrderType", "OO");\n      return "";\n    }\n\n    //var C_DocType_ID = Util.getValueOfInt(value);\t\t//\tActually C_DocTypeTarget_ID\n    var C_DocType_ID = Util.getValueOfInt(value);\n    if (C_DocType_ID == null || C_DocType_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    //\tRe-Create new DocNo, if there is a doc number already\n    //\tand the existing source used a different Sequence number\n\n    var oldDocNo = Util.getValueOfString(mTab.getValue("DocumentNo"));\n    var newDocNo = oldDocNo == null;\n    if (!newDocNo && oldDocNo.startsWith("<") && oldDocNo.endsWith(">")) newDocNo = true;\n    var oldC_DocType_ID = Util.getValueOfInt(mTab.getValue("C_DocType_ID"));\n\n    //var sql = "SELECT d.DocSubTypeSO,d.HasCharges,\'N\',d.IsReleaseDocument,"\t\t\t//\t1..3\n    //    + "d.IsDocNoControlled,s.CurrentNext,s.CurrentNextSys,"     //  4..6\n    //    + "s.AD_Sequence_ID,d.IsSOTrx, d.IsReturnTrx, d.value, d.IsBlanketTrx "              //\t7..9\n    //    + "FROM C_DocType d "\n    //    + "LEFT OUTER JOIN AD_Sequence s ON (d.DocNoSequence_ID=s.AD_Sequence_ID) "\n    //    + "WHERE C_DocType_ID=@param1";\t//\t#1\n    var idr = null;\n    //var param = new SqlParameter[1];\n    var p = [];\n    try {\n      var AD_Sequence_ID = 0;\n      //\tGet old AD_SeqNo for comparison\n      if (!newDocNo && Util.getValueOfInt(oldC_DocType_ID) != 0) {\n        // p[0] = new VIS.DB.SqlParam("@param1", oldC_DocType_ID);\n        //param[0] = new SqlParameter("@param1", oldC_DocType_ID);\n        //idr = VIS.DB.executeReader(sql, p);\n        //if (idr.read()) {\n        idr = VIS.dataContext.getJSONRecord("MDocType/GetDocTypeData", oldC_DocType_ID.toString());\n        if (idr != null) {\n          //AD_Sequence_ID = Util.getValueOfInt(idr.tables[0].rows[0].cells["currentnextsys"]);\n          AD_Sequence_ID = Util.getValueOfInt(idr["CurrentNextSys"]);\n        }\n        //idr.close();\n      }\n      //p[0] = new VIS.DB.SqlParam("@param1", C_DocType_ID);\n      //idr = VIS.DB.executeReader(sql, p);\n      idr = VIS.dataContext.getJSONRecord("MDocType/GetDocTypeData", C_DocType_ID.toString());\n      p.length = 0;\n      p = null;\n      var DocSubTypeSO = "";\n      var IsSOTrx = true;\n      var isReturnTrx = false;\n      var DocTypeValue = "";\n      //if (idr.read())\t\t//\twe found document type\n      if (idr != null) {\n        //\tSet Context:\tDocument Sub Type for Sales Orders\n        DocSubTypeSO = idr["DocSubTypeSO"];\n        DocTypeValue = idr["Value"];\n        if (DocSubTypeSO == null) DocSubTypeSO = "--";\n        ctx.setContext(windowNo, "OrderType", DocSubTypeSO);\n        ctx.setContext(windowNo, "DocTypeValue", DocTypeValue);\n        if (DocSubTypeSO == \'BO\') {\n          ctx.setContext(windowNo, "BlanketOrderType", DocSubTypeSO);\n          mTab.setValue("BlanketOrderType", DocSubTypeSO);\n        } else if (Util.getValueOfString(idr["IsReleaseDocument"]).equals("Y")) {\n          mTab.setValue("BlanketOrderType", "BO"); //VIS0336_Changes for Blanket order field on Purchase order window.\n        } else {\n          ctx.setContext(windowNo, "BlanketOrderType", "OO");\n          mTab.setValue("BlanketOrderType", "OO");\n          mTab.setValue("C_Order_Blanket", null);\n        }\n\n        //\tNo Drop Ship other than Standard\n        if (!DocSubTypeSO == DocSubTypeSO_Standard) mTab.setValue("IsDropShip", "N");\n\n        //\tIsSOTrx\n        if ("N" == idr["IsSOTrx"]) IsSOTrx = false;\n\n        //IsReturnTrx\n        isReturnTrx = idr["IsReturnTrx"] == "Y" ? true : false;\n\n        //\tSkip these steps for RMA. These are copied from the Original Order\n        if (!isReturnTrx) {\n          if (DocSubTypeSO == DocSubTypeSO_POS) mTab.setValue("DeliveryRule", XC_DELIVERYRULE_Force);else if (DocSubTypeSO == DocSubTypeSO_Prepay) mTab.setValue("DeliveryRule", XC_DELIVERYRULE_AfterReceipt);else mTab.setValue("DeliveryRule", XC_DELIVERYRULE_Availability);\n\n          //\tInvoice Rule\n          if (DocSubTypeSO == DocSubTypeSO_POS || DocSubTypeSO == DocSubTypeSO_Prepay || DocSubTypeSO == DocSubTypeSO_OnCredit) mTab.setValue("InvoiceRule", XC_INVOICERULE_Immediate);else mTab.setValue("InvoiceRule", XC_INVOICERULE_AfterDelivery);\n\n          //\tPayment Rule - POS Order\n          if (DocSubTypeSO == DocSubTypeSO_POS) mTab.setValue("PaymentRule", XC_PAYMENTRULE_Cash);else mTab.setValue("PaymentRule", XC_PAYMENTRULE_OnCredit);\n\n          //\tSet Context:\n          ctx.setContext(windowNo, "HasCharges", Util.getValueOfString(idr["HasCharges"]));\n        } else\n          // Returns\n          {\n            if (DocSubTypeSO == DocSubTypeSO_POS) mTab.setValue("DeliveryRule", XC_DELIVERYRULE_Force);else mTab.setValue("DeliveryRule", XC_DELIVERYRULE_Manual);\n          }\n\n        //\tDocumentNo\n        if (idr["IsDocNoControlled"] == "Y")\n          //\tIsDocNoControlled\n          {\n            if (!newDocNo && AD_Sequence_ID != Util.getValueOfInt(idr["AD_Sequence_ID"])) newDocNo = true;\n            if (newDocNo)\n              //Temporaly Commented By Sarab\n              //if (Ini.isPropertyBool(Ini.P_VIENNASYS) && Env.getCtx().getAD_Client_ID() < 1000000) \n              if (VIS.Ini.getLocalStorage(VIS.IniConstants.P_VIENNASYS) && ctx.getAD_Client_ID() < 1000000) mTab.setValue("DocumentNo", "<" + Util.getValueOfInt(idr["CurrentNextSys"]) + ">");else mTab.setValue("DocumentNo", "<" + Util.getValueOfString(idr["CurrentNext"]) + ">");\n          }\n\n        //Variation Order                \n        if (idr["VAS_IsVariationOrder"] == "Y") {\n          mTab.setValue("VAS_OrderType", "VO");\n        } else {\n          mTab.setValue("VAS_OrderType", "");\n        }\n      }\n      //idr.close();\n\n      // Skip remaining steps for RMA\n      if (isReturnTrx) {\n        this.setCalloutActive(false);\n        return "";\n      }\n      //  When BPartner is changed, the Rules are not set if\n      //  it is a POS or Credit Order (i.e. defaults from Standard BPartner)\n      //  This re-reads the Rules and applies them.\n      if (DocSubTypeSO == DocSubTypeSO_POS || DocSubTypeSO == DocSubTypeSO_Prepay)\n        //  not for POS/PrePay\n        ;else {\n        var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n        var dr = null;\n        //sql = "SELECT PaymentRule,C_PaymentTerm_ID,"            //  1..2\n        //    + "InvoiceRule,DeliveryRule,"                       //  3..4\n        //    + "FreightCostRule,DeliveryViaRule, "               //  5..6\n        //    + "PaymentRulePO,PO_PaymentTerm_ID "\n        //    + "FROM C_BPartner "\n        //    + "WHERE C_BPartner_ID=" + C_BPartner_ID;\t\t//\t#1\n        if (C_BPartner_ID != 0) {\n          //idr = VIS.DB.executeReader(sql, null);\n          dr = VIS.dataContext.getJSONRecord("MBPartner/GetBPDocTypeData", C_BPartner_ID.toString());\n        }\n\n        //if (idr.read()) {\n        if (dr != null) {\n          //\tPaymentRule\n          //var s = Util.getValueOfString(idr[IsSOTrx ? "PaymentRule" : "PaymentRulePO"]);\n          var s = dr[IsSOTrx ? "PaymentRule" : "PaymentRulePO"];\n          if (s != null && s.length != 0) {\n            if (IsSOTrx && s == "B" || s == "S" || s == "U")\n              //\tNo Cash/Check/Transfer for SO_Trx\n              s = "P"; //  Payment Term\n            if (!IsSOTrx && s == "B")\n              //\tNo Cash for PO_Trx\n              s = "P"; //  Payment Term\n            mTab.setValue("PaymentRule", s);\n          }\n          //\tPayment Term\n          //var ii = Util.getValueOfInt(idr[IsSOTrx ? "C_PaymentTerm_ID" : "PO_PaymentTerm_ID"]);\n          var ii = dr[IsSOTrx ? "C_PaymentTerm_ID" : "PO_PaymentTerm_ID"];\n\n          //if (!idr.wasNull())\n          //if (idr != null)\n          mTab.setValue("C_PaymentTerm_ID", ii);\n          //\tInvoiceRule\n          s = dr["InvoiceRule"];\n          if (s != null && s.length != 0) mTab.setValue("InvoiceRule", s);\n          //\tDeliveryRule\n          s = dr["DeliveryRule"];\n          if (s != null && s.length != 0) mTab.setValue("DeliveryRule", s);\n          //\tFreightCostRule\n          s = dr["FreightCostRule"];\n          if (s != null && s.length != 0) mTab.setValue("FreightCostRule", s);\n          //\tDeliveryViaRule\n          s = dr["DeliveryViaRule"];\n          if (s != null && s.length != 0) mTab.setValue("DeliveryViaRule", s);\n        }\n        //idr.close();\n      } //  re-read customer rules\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (idr != null) {\n        idr.close();\n        idr = null;\n      }\n      this.log.log(Level.SEVERE, sql, err);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  // On selecting Blanket Order line relative fields should be auto populated, on Order line tab.\n  // Added on 27 July 2017. SUkhwinder.    \n  CalloutOrder.prototype.BlanketOrderLine = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var dr = null;\n    var sql = "";\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_BlanketOrderLine = 0;\n      if (value != null) C_BlanketOrderLine = Util.getValueOfInt(value.toString());\n      if (C_BlanketOrderLine == 0) return "";\n      this.setCalloutActive(true);\n      var param = C_BlanketOrderLine.toString();\n      dr = VIS.dataContext.getJSONRecord("MOrderLine/GetOrderLine", param);\n      if (dr != null) {\n        var M_Product_ID = Util.getValueOfInt(dr["M_Product_ID"]);\n        var C_Charge_ID = Util.getValueOfInt(dr["C_Charge_ID"]);\n        var Qty = Util.getValueOfDecimal(dr["Qty"]);\n        var QtyOrdered = Util.getValueOfDecimal(dr["QtyOrdered"]);\n        var QtyReleased = Util.getValueOfDecimal(dr["QtyReleased"]);\n        var PriceList = Util.getValueOfDecimal(dr["PriceList"]);\n        var PriceActual = Util.getValueOfDecimal(dr["PriceActual"]);\n        var C_UOM_ID = Util.getValueOfInt(dr["C_UOM_ID"]);\n        var Discount = Util.getValueOfDecimal(dr["Discount"]);\n        var PriceEntered = Util.getValueOfDecimal(dr["PriceEntered"]);\n        var M_AttributeSetInstance_ID = Util.getValueOfInt(dr["M_AttributeSetInstance_ID"]);\n        var C_Tax_ID = Util.getValueOfInt(dr["C_Tax_ID"]);\n        var AD_OrgTrx_ID = Util.getValueOfInt(dr["AD_OrgTrx_ID"]);\n        var VAS_ContractLine_ID = Util.getValueOfInt(dr["VAS_ContractLine_ID"]); // VAI050-Get contractline\n\n        QtyEntered = Util.getValueOfDecimal(Qty);\n        //Get precision from server\n        paramStr = C_UOM_ID.toString().concat(","); //1\n        var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n\n        //var QtyEntered1 = Decimal.Round(QtyEntered.Value, MUOM.getPrecision(ctx, C_UOM_To_ID));//, MidpointRounding.AwayFromZero);\n        var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp)); //, MidpointRounding.AwayFromZero);\n\n        if (QtyEntered != QtyEntered1) {\n          this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n          QtyEntered = QtyEntered1;\n        }\n        paramStr = M_Product_ID.toString().concat(",", C_UOM_ID.toString(), ",",\n        //2\n\n        QtyEntered.toString()); //3\n        var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n        QtyOrdered = pc; //(Decimal?)MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n        //C_UOM_To_ID, QtyEntered.Value);\n        if (QtyOrdered == null) QtyOrdered = QtyEntered;\n\n        //var conversion = QtyEntered.Value.compareTo(QtyOrdered.Value) != 0;\n        var conversion = QtyEntered != QtyOrdered;\n        if (conversion) {\n          paramStr = M_Product_ID.toString().concat(",", C_UOM_ID.toString(), ",", QtyReleased.toString());\n          var qtyRel = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductTo", paramStr);\n          if (qtyRel != null) {\n            QtyReleased = qtyRel;\n          }\n        }\n\n        // when order line contains charge, it will be selected on Shipment Line on selection of Order Line\n        if (M_Product_ID != 0 && M_Product_ID != null) {\n          mTab.setValue("M_Product_ID", M_Product_ID);\n          mTab.setValue("C_Charge_ID", null); //VAI050-Set charge null if product selected\n        } else {\n          mTab.setValue("C_Charge_ID", C_Charge_ID);\n          mTab.setValue("M_Product_ID", null); //VAI050-Set product null if charge selected\n        }\n        if (Qty != 0 && Qty != null) {\n          mTab.setValue("QtyEntered", Qty);\n        }\n        if (PriceList != null) {\n          mTab.setValue("PriceList", PriceList);\n        }\n        if (PriceActual != null) {\n          mTab.setValue("PriceActual", PriceActual);\n          mTab.setValue("LineNetAmt", PriceActual * Qty);\n        }\n        if (PriceEntered != null) {\n          mTab.setValue("PriceEntered", PriceEntered);\n          mTab.setValue("PriceEntered", PriceEntered);\n        }\n        if (Discount != null) {\n          mTab.setValue("Discount", Discount);\n        }\n        if (C_UOM_ID != 0 && C_UOM_ID != null) {\n          mTab.setValue("C_UOM_ID", C_UOM_ID);\n        }\n        if (QtyOrdered != 0 && QtyOrdered != null && QtyReleased != null) {\n          mTab.setValue("QtyBlanket", QtyOrdered + QtyReleased - QtyReleased);\n        }\n        if (M_AttributeSetInstance_ID != 0 && M_AttributeSetInstance_ID != null) {\n          mTab.setValue("M_AttributeSetInstance_ID", M_AttributeSetInstance_ID);\n        }\n        if (C_Tax_ID != 0 && C_Tax_ID != null) {\n          mTab.setValue("C_Tax_ID", C_Tax_ID);\n        }\n        mTab.setValue("VAS_ContractLine_ID", VAS_ContractLine_ID); // VAI050-Set Contract Line Reference\n        // VIS0060: Set Trx Organization from Blanket Order Line\n        mTab.setValue("AD_OrgTrx_ID", AD_OrgTrx_ID);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    oldValue = null;\n    return this.Qty(ctx, windowNo, mTab, mField, mTab.getValue("QtyEntered"));\n  };\n\n  // On selecting Blanket Order relative fields should be auto populated.\n  // Added on 26 July 2017. SUkhwinder.\n  CalloutOrder.prototype.BlanketOrder = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var dr = null;\n    var sql = "";\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_Order_Blanket = 0;\n      if (value != null) C_Order_Blanket = Util.getValueOfInt(value.toString());\n      if (C_Order_Blanket == 0) return "";\n      this.setCalloutActive(true);\n      var isSOTrx = ctx.isSOTrx(windowNo);\n      //if (isSOTrx) {\n      var param = C_Order_Blanket.toString();\n      dr = VIS.dataContext.getJSONRecord("MOrder/GetOrder", param);\n      if (dr != null) {\n        var C_BPartner_ID = Util.getValueOfDouble(dr["C_BPartner_ID"]);\n        var M_PriceList_ID = Util.getValueOfDouble(dr["M_PriceList_ID"]);\n        var M_Warehouse_ID = Util.getValueOfDouble(dr["M_Warehouse_ID"]);\n        var C_PaymentTerm_ID = Util.getValueOfDouble(dr["C_PaymentTerm_ID"]);\n        var PaymentRule = Util.getValueOfDouble(dr["PaymentRule"]);\n        var C_Payment_ID = Util.getValueOfDouble(dr["C_Payment_ID"]);\n        var VA009_PaymentMethod_ID = Util.getValueOfDouble(dr["VA009_PaymentMethod_ID"]);\n        var C_Currency_ID = Util.getValueOfDouble(dr["C_Currency_ID"]);\n        var C_Project_ID = Util.getValueOfDouble(dr["C_Project_ID"]);\n        var C_Campaign_ID = Util.getValueOfDouble(dr["C_Campaign_ID"]);\n        C_ProjectRef_ID;\n        var C_ProjectRef_ID = Util.getValueOfDouble(dr["C_ProjectRef_ID"]);\n        var SalesRep_ID = Util.getValueOfDouble(dr["SalesRep_ID"]);\n        var PriorityRule = Util.getValueOfDouble(dr["PriorityRule"]);\n        var VAS_ContractMaster_ID = Util.getValueOfDouble(dr["VAS_ContractMaster_ID"]); // VAI050-Get ContractMasterID\n        if (C_BPartner_ID != 0 && C_BPartner_ID != null) {\n          mTab.setValue("C_BPartner_ID", C_BPartner_ID);\n        }\n        if (M_PriceList_ID != 0 && M_PriceList_ID != null) {\n          mTab.setValue("M_PriceList_ID", M_PriceList_ID);\n        }\n        if (M_Warehouse_ID != 0 && M_Warehouse_ID != null) {\n          mTab.setValue("M_Warehouse_ID", M_Warehouse_ID);\n        }\n        if (C_PaymentTerm_ID != 0 && C_PaymentTerm_ID != null) {\n          mTab.setValue("C_PaymentTerm_ID", C_PaymentTerm_ID);\n        }\n        if (PaymentRule != 0 && PaymentRule != null) {\n          mTab.setValue("PaymentRule", PaymentRule);\n        }\n        if (C_Payment_ID != 0 && C_Payment_ID != null) {\n          mTab.setValue("C_Payment_ID", C_Payment_ID);\n        }\n        if (VA009_PaymentMethod_ID != 0 && VA009_PaymentMethod_ID != null) {\n          mTab.setValue("VA009_PaymentMethod_ID", VA009_PaymentMethod_ID);\n        }\n        if (C_Currency_ID != 0 && C_Currency_ID != null) {\n          mTab.setValue("C_Currency_ID", C_Currency_ID);\n        }\n        if (C_Project_ID != 0 && C_Project_ID != null) {\n          mTab.setValue("C_Project_ID", C_Project_ID);\n        }\n        if (C_Campaign_ID != 0 && C_Campaign_ID != null) {\n          mTab.setValue("C_Campaign_ID", C_Campaign_ID);\n        }\n        if (C_ProjectRef_ID != 0 && C_ProjectRef_ID != null) {\n          mTab.setValue("C_ProjectRef_ID", C_ProjectRef_ID);\n        }\n        if (SalesRep_ID != 0 && SalesRep_ID != null) {\n          mTab.setValue("SalesRep_ID", SalesRep_ID);\n        }\n        if (PriorityRule != 0 && PriorityRule != null) {\n          mTab.setValue("PriorityRule", PriorityRule);\n        }\n        mTab.setValue("VAS_ContractMaster_ID", VAS_ContractMaster_ID); // VAI050-Set ContractMasterId reference          \n        // Added by Bharat on 07 Feb 2018 to set Inco Term from Order\n        if (mTab.getField("C_IncoTerm_ID") != null) {\n          mTab.setValue("C_IncoTerm_ID", Util.getValueOfInt(dr["C_IncoTerm_ID"]));\n        }\n      }\n      //}\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    oldValue = null;\n    return this.BPartner(ctx, windowNo, mTab, mField, mTab.getValue("C_BPartner_ID"));\n  };\n\n  /// <summary>\n  /// Order Header - BPartner.\n  /// - M_PriceList_ID (+ Context)\n  /// - C_BPartner_Location_ID\n  /// - Bill_BPartner_ID/Bill_Location_ID\n  /// \t- AD_User_ID\n  /// \t- POReference\n  /// \t- SO_Description\n  /// \t- IsDiscountPrinted\n  /// \t- InvoiceRule/DeliveryRule/PaymentRule/FreightCost/DeliveryViaRule\n  /// \t- C_PaymentTerm_ID\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutOrder.prototype.BPartner = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    /** Sales Order Sub Type - SO\t*/\n    var DocSubTypeSO_Standard = "SO";\n    /** Sales Order Sub Type - OB\t*/\n    var DocSubTypeSO_Quotation = "OB";\n    /** Sales Order Sub Type - ON\t*/\n    var DocSubTypeSO_Proposal = "ON";\n    /** Sales Order Sub Type - PR\t*/\n    var DocSubTypeSO_Prepay = "PR";\n    /** Sales Order Sub Type - WR\t*/\n    var DocSubTypeSO_POS = "WR";\n    /** Sales Order Sub Type - WP\t*/\n    var DocSubTypeSO_Warehouse = "WP";\n    /** Sales Order Sub Type - WI\t*/\n    var DocSubTypeSO_OnCredit = "WI";\n    /** Sales Order Sub Type - RM\t*/\n    var DocSubTypeSO_RMA = "RM";\n\n    /** DeliveryRule AD_Reference_ID=151 */\n    var XC_DELIVERYRULE_AD_Reference_ID = 151;\n    /** Availability = A */\n    var XC_DELIVERYRULE_Availability = "A";\n    /** Force = F */\n    var XC_DELIVERYRULE_Force = "F";\n    /** Complete Line = L */\n    var XC_DELIVERYRULE_CompleteLine = "L";\n    /** Manual = M */\n    var XC_DELIVERYRULE_Manual = "M";\n    /** Complete Order = O */\n    var XC_DELIVERYRULE_CompleteOrder = "O";\n    /** After Receipt = R */\n    var XC_DELIVERYRULE_AfterReceipt = "R";\n\n    /** InvoiceRule AD_Reference_ID=150 */\n    var XC_INVOICERULE_AD_Reference_ID = 150;\n    /** After Delivery = D */\n    var XC_INVOICERULE_AfterDelivery = "D";\n    /** Immediate = I */\n    var XC_INVOICERULE_Immediate = "I";\n    /** After Order delivered = O */\n    var XC_INVOICERULE_AfterOrderDelivered = "O";\n    /** Customer Schedule after Delivery = S */\n    var XC_INVOICERULE_CustomerScheduleAfterDelivery = "S";\n\n    /** PaymentRule AD_Reference_ID=195 */\n    var XC_PAYMENTRULE_AD_Reference_ID = 195;\n    /** Cash = B */\n    var XC_PAYMENTRULE_Cash = "B";\n    /** Direct Debit = D */\n    var XC_PAYMENTRULE_DirectDebit = "D";\n    /** Credit Card = K */\n    var XC_PAYMENTRULE_CreditCard = "K";\n    /** On Credit = P */\n    var XC_PAYMENTRULE_OnCredit = "P";\n    /** Check = S */\n    var XC_PAYMENTRULE_Check = "S";\n    /** Direct Deposit = T */\n    var XC_PAYMENTRULE_DirectDeposit = "T";\n    var PaymentBasetype = null;\n    //var Util=VIS.Util;\n    //var sql = "";\n    var dr = null;\n    //var drl = null;\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_BPartner_ID = 0;\n      var isvendor = \'N\';\n      var isCustomer = \'N\';\n      if (value != null) C_BPartner_ID = Util.getValueOfInt(value.toString());\n      if (C_BPartner_ID == 0) return "";\n\n      // Skip rest of steps for RMA. These fields are copied over from the orignal order instead.\n      var isReturnTrx = Util.getValueOfBoolean(mTab.getValue("IsReturnTrx"));\n      if (isReturnTrx) return "";\n      this.setCalloutActive(true);\n\n      // Added by Bharat on 13/May/2017 to remove client side queries\n\n      var _CountVA009 = false;\n      var paramString = "VA009_";\n      var isSOTrx = ctx.isSOTrx(windowNo);\n      var dr = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", paramString);\n      if (dr != null) {\n        _CountVA009 = dr["VA009_"];\n      }\n      paramString = _CountVA009.toString() + "," + C_BPartner_ID;\n      dr = VIS.dataContext.getJSONRecord("MBPartner/GetBPartnerOrderData", paramString);\n      if (dr != null) {\n        // Price List\n\n        var PriceListPresent = Util.getValueOfInt(mTab.getValue("M_PriceList_ID")); // from BSO/BPO window\n        var C_Order_Blanket = Util.getValueOfDecimal(mTab.getValue("C_Order_Blanket"));\n        if (PriceListPresent > 0 && C_Order_Blanket > 0) {} else {\n          var ii = Util.getValueOfInt(isSOTrx ? dr["M_PriceList_ID"] : dr["PO_PriceList_ID"]);\n          if (ii != 0) {\n            mTab.setValue("M_PriceList_ID", ii);\n          }\n          // JID_0364: If price list not available at BP, user need to select it manually\n\n          //else {\t//\tget default PriceList\n          //    var i1 = ctx.getContextAsInt(windowNo, "#M_PriceList_ID", false);\n          //    if (i1 != 0)\n          //        mTab.setValue("M_PriceList_ID", i1);\n          //}\n        }\n        //Inco Term\n        var IncoTerm = Util.getValueOfInt(isSOTrx ? dr["C_IncoTerm_ID"] : dr["C_IncoTermPO_ID"]);\n        if (IncoTerm > 0) {\n          mTab.setValue("C_IncoTerm_ID", IncoTerm);\n        }\n        //\tBill-To BPartner\n        mTab.setValue("Bill_BPartner_ID", C_BPartner_ID);\n        var bill_Location_ID = Util.getValueOfInt(dr["Bill_Location_ID"]);\n        if (bill_Location_ID == 0) {\n          var bill_Partner_ID = Util.getValueOfInt(dr["Bill_BPartner_ID"]);\n          if (bill_Partner_ID > 0) mTab.setValue("Bill_BPartner_ID", bill_Partner_ID);\n        } else mTab.setValue("Bill_Location_ID", bill_Location_ID);\n\n        // VIS0336_Set location acc to selected record in Info window\n        var shipTo_ID = Util.getValueOfInt(dr["C_BPartner_Location_ID"]);\n        if (C_BPartner_ID.toString().equals(ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_ID").toString())) {\n          var loc = ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_LOCATION_ID");\n          if (loc && loc.toString().length > 0) {\n            shipTo_ID = parseInt(loc);\n          }\n        }\n        if (shipTo_ID == 0) {\n          mTab.setValue("C_BPartner_Location_ID", null);\n        } else {\n          mTab.setValue("C_BPartner_Location_ID", shipTo_ID);\n          if ("Y" == Util.getValueOfString(dr["IsShipTo"]))\n            //\tset the same\n            mTab.setValue("Bill_Location_ID", shipTo_ID);\n        }\n        var _salerep_ID = Util.getValueOfInt(dr["SalesRep_ID"]);\n        if (_salerep_ID > 0) mTab.setValue("SalesRep_ID", _salerep_ID);\n        if (_CountVA009) {\n          var _PaymentMethod_ID = Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]);\n          //VA009_PO_PaymentMethod_ID added new column for enhancement.. Google Sheet ID-- SI_0036\n          var _PO_PaymentMethod_ID = 0;\n          var _PO_PAYMENTBASETYPE = "T";\n          if (C_Order_Blanket <= 0) {\n            var bpdtl = VIS.dataContext.getJSONRecord("MBPartner/GetBPDetails", C_BPartner_ID);\n            if (bpdtl != null) {\n              isvendor = Util.getValueOfString(bpdtl["IsVendor"]);\n              isCustomer = Util.getValueOfString(bpdtl["IsCustomer"]);\n              if (!isSOTrx) {\n                //In case of Purchase Order\n                if (isvendor == "Y") {\n                  _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PO_PaymentMethod_ID"]);\n                  PaymentBasetype = Util.getValueOfString(bpdtl["VA009_PAYMENTBASETYPEPO"]);\n                } else {\n                  _PaymentMethod_ID = 0;\n                  PaymentBasetype = null;\n                }\n              } else {\n                if (isvendor == "Y") {\n                  _PaymentMethod_ID = 0;\n                  PaymentBasetype = null;\n                  if (isCustomer == "Y") {\n                    _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PaymentMethod_ID"]);\n                    PaymentBasetype = Util.getValueOfString(bpdtl["VA009_PAYMENTBASETYPE"]);\n                  }\n                } else {\n                  if (isCustomer == "Y") {\n                    _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PaymentMethod_ID"]);\n                    PaymentBasetype = Util.getValueOfString(bpdtl["VA009_PAYMENTBASETYPE"]);\n                  }\n                }\n              }\n            }\n          }\n          if (_PaymentMethod_ID == 0) {\n            var C_Order_Blanket = Util.getValueOfInt(mTab.getValue("C_Order_Blanket"));\n            if (C_Order_Blanket > 0) {\n              var paramString = _CountVA009.toString() + "," + C_Order_Blanket.toString();\n              dr = VIS.dataContext.getJSONRecord("MOrder/GetPaymentMethod", paramString);\n              if (dr != null) {\n                var paymthd_id = Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]);\n                if (paymthd_id > 0) {\n                  mTab.setValue("VA009_PaymentMethod_ID", paymthd_id);\n                  var PaymentBasetype = Util.getValueOfString(dr["VA009_PaymentBaseType"]);\n                  if (PaymentBasetype != "W" && PaymentBasetype != null) {\n                    // if (PaymentBasetype != null) {\n                    mTab.setValue("PaymentMethod", PaymentBasetype);\n                    if (isvendor == \'N\') mTab.setValue("PaymentRule", PaymentBasetype);else mTab.setValue("PaymentRulePO", PaymentBasetype);\n                  }\n                }\n              }\n            }\n          } else {\n            if (_PaymentMethod_ID == 0) mTab.setValue("VA009_PaymentMethod_ID", null);else {\n              mTab.setValue("VA009_PaymentMethod_ID", _PaymentMethod_ID);\n\n              //PaymentBasetype = Util.getValueOfString(dr["VA009_PaymentBaseType"]);\n              if (PaymentBasetype != "W" && PaymentBasetype != null) {\n                //if (PaymentBasetype != null) {\n                mTab.setValue("PaymentMethod", PaymentBasetype);\n                if (isvendor == \'N\') mTab.setValue("PaymentRule", PaymentBasetype);else mTab.setValue("PaymentRulePO", PaymentBasetype);\n              } else {\n                mTab.setValue("PaymentMethod", "T");\n                if (isvendor == \'N\') mTab.setValue("PaymentRule", "T");else mTab.setValue("PaymentRulePO", "T");\n              }\n            }\n          }\n        }\n\n        // VIS0336_Set UserID acc to selected record in Info window\n        var contID = Util.getValueOfInt(dr["AD_User_ID"]);\n        if (C_BPartner_ID.toString().equals(ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_ID").toString())) {\n          var cont = ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "AD_USER_ID");\n          if (cont && cont.toString().length > 0) {\n            contID = parseInt(cont);\n          }\n        }\n        if (contID == 0) {\n          mTab.setValue("AD_User_ID", null);\n        } else {\n          mTab.setValue("AD_User_ID", contID);\n          mTab.setValue("Bill_User_ID", contID);\n        }\n\n        //\tCreditAvailable \n        if (isSOTrx) {\n          var CreditStatus = Util.getValueOfString(dr["CreditStatusSettingOn"]);\n          if (CreditStatus == "CH") {\n            var CreditLimit = Util.getValueOfDouble(dr["SO_CreditLimit"]);\n            if (CreditLimit != 0) {\n              var CreditAvailable = Util.getValueOfDouble(dr["CreditAvailable"]);\n              if (CreditAvailable <= 0) {\n                VIS.ADialog.info("CreditOver");\n              }\n            }\n          } else {\n            var locId = Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID"));\n            var dr1 = VIS.dataContext.getJSONRecord("MBPartner/GetLocationData", locId.toString());\n            if (dr1 != null) {\n              CreditStatus = Util.getValueOfString(dr1["CreditStatusSettingOn"]);\n              if (CreditStatus == "CL") {\n                var CreditLimit = Util.getValueOfDouble(dr1["SO_CreditLimit"]);\n                if (CreditLimit != 0) {\n                  var CreditAvailable = Util.getValueOfDouble(dr1["CreditAvailable"]);\n                  if (CreditAvailable <= 0) {\n                    VIS.ADialog.info("CreditOver");\n                  }\n                }\n              }\n            }\n          }\n        }\n\n        //\tPO Reference\n        var s = Util.getValueOfString(dr["POReference"]);\n        if (s != null && s.length != 0) mTab.setValue("POReference", s);\n        s = Util.getValueOfString(dr["SO_Description"]);\n        if (s != null && s.trim().length != 0) mTab.setValue("Description", s);\n        //\tIsDiscountPrinted\n        s = Util.getValueOfString(dr["IsDiscountPrinted"]);\n        if (s != null && s.length != 0) mTab.setValue("IsDiscountPrinted", s);else mTab.setValue("IsDiscountPrinted", "N");\n\n        //\tDefaults, if not Walkin Receipt or Walkin Invoice\n        var OrderType = ctx.getContext("OrderType");\n        mTab.setValue("InvoiceRule", XC_INVOICERULE_AfterDelivery);\n        mTab.setValue("DeliveryRule", XC_DELIVERYRULE_Availability);\n        if (_CountVA009) {\n          if (PaymentBasetype != "W" && PaymentBasetype != null) {\n            //if (PaymentBasetype != null) {\n            if (isvendor == \'N\') mTab.setValue("PaymentRule", PaymentBasetype);else mTab.setValue("PaymentRulePO", PaymentBasetype);\n          } else {\n            if (isvendor == \'N\') mTab.setValue("PaymentRule", "T");else mTab.setValue("PaymentRulePO", "T");\n            mTab.setValue("PaymentMethod", "T");\n          }\n        } else mTab.setValue("PaymentRule", XC_PAYMENTRULE_OnCredit);\n        if (OrderType == DocSubTypeSO_Prepay) {\n          mTab.setValue("InvoiceRule", XC_INVOICERULE_Immediate);\n          mTab.setValue("DeliveryRule", XC_DELIVERYRULE_AfterReceipt);\n        } else if (OrderType == DocSubTypeSO_POS)\n          //  for POS\n          {\n            if (_CountVA009) {\n              if (PaymentBasetype != "W" && PaymentBasetype != null) {\n                //if (PaymentBasetype != null) {\n                if (isvendor == \'N\') mTab.setValue("PaymentRule", PaymentBasetype);else mTab.setValue("PaymentRulePO", PaymentBasetype);\n              } else {\n                if (isvendor == \'N\') mTab.setValue("PaymentRule", "T");else mTab.setValue("PaymentRulePO", "T");\n                mTab.setValue("PaymentMethod", "T");\n              }\n            } else mTab.setValue("PaymentRule", XC_PAYMENTRULE_Cash);\n          } else {\n          if (_CountVA009) {\n            if (PaymentBasetype != "W" && PaymentBasetype != null) {\n              //if (PaymentBasetype != null) {\n              if (isvendor == \'N\') mTab.setValue("PaymentRule", PaymentBasetype);else mTab.setValue("PaymentRulePO", PaymentBasetype);\n            } else {\n              if (isvendor == \'N\') mTab.setValue("PaymentRule", "T");else mTab.setValue("PaymentRulePO", "T");\n              mTab.setValue("PaymentMethod", "T");\n            }\n          } else {\n            //\tPaymentRule\n            s = Util.getValueOfString(isSOTrx ? dr["PaymentRule"] : dr["PaymentRulePO"]);\n            if (s != null && s.length != 0) {\n              if (s == "B")\n                //\tNo Cache in Non PO\n                s = "P";\n              if (isSOTrx && s == "S" || s == "U")\n                //\tNo Check/Transfer for SO_Trx\n                s = "P"; //  Payment Term\n              mTab.setValue("PaymentRule", s);\n            }\n          }\n          //\tPayment Term\n\n          var PaymentTermPresent = Util.getValueOfInt(mTab.getValue("C_PaymentTerm_ID")); // from BSO/BPO window\n          var C_Order_Blanket = Util.getValueOfDecimal(mTab.getValue("C_Order_Blanket"));\n          if (PaymentTermPresent > 0 && C_Order_Blanket > 0) {} else {\n            ii = Util.getValueOfInt(isSOTrx ? dr["C_PaymentTerm_ID"] : dr["PO_PaymentTerm_ID"]);\n            //when doc type = Warehouse Order / Credit Order / POS Order / Prepay order --- and payment term is advance -- not to update\n            // false means - not to update\n            var isPaymentTermUpdate = this.checkAdvancePaymentTerm(Util.getValueOfInt(mTab.getValue("C_DocTypeTarget_ID")), ii);\n            if (isPaymentTermUpdate) {\n              if (ii != 0)\n                //ii=0 when dr return ""\n                {\n                  mTab.setValue("C_PaymentTerm_ID", ii);\n                }\n            } else {\n              mTab.setValue("C_PaymentTerm_ID", null);\n            }\n          }\n          //\tInvoiceRule\n          s = Util.getValueOfString(dr["InvoiceRule"]);\n          if (s != null && s.length != 0) mTab.setValue("InvoiceRule", s);\n          //\tDeliveryRule\n          s = Util.getValueOfString(dr["DeliveryRule"]);\n          if (s != null && s.length != 0) mTab.setValue("DeliveryRule", s);\n          //\tFreightCostRule\n          s = Util.getValueOfString(dr["FreightCostRule"]);\n          if (s != null && s.length != 0) mTab.setValue("FreightCostRule", s);\n          //\tDeliveryViaRule\n          s = Util.getValueOfString(dr["DeliveryViaRule"]);\n          if (s != null && s.length != 0) mTab.setValue("DeliveryViaRule", s);\n        }\n\n        //if dr has supply type property then set its value\n        if (dr.hasOwnProperty("VA106_SupplyType")) {\n          mTab.setValue("VA106_SupplyType", dr["VA106_SupplyType"]);\n        }\n      }\n\n      //sql = "SELECT p.AD_Language,p.C_PaymentTerm_ID, "\n      //    + " COALESCE(p.M_PriceList_ID,g.M_PriceList_ID) AS M_PriceList_ID, p.PaymentRule,p.POReference,"\n      //    + " p.SO_Description, p.salesrep_id, ";\n      //var _CountVA009 = Util.getValueOfInt(CalloutDB.executeCalloutScalar("SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'VA009_\'  AND IsActive = \'Y\'"));\n      //if (_CountVA009 > 0) {\n      //    sql += " p.VA009_PaymentMethod_ID, ";\n      //}\n\n      //sql += " p.IsDiscountPrinted,"\n      //+ " p.InvoiceRule,p.DeliveryRule,p.FreightCostRule,DeliveryViaRule,"\n      //+ " p.CreditStatusSettingOn,p.SO_CreditLimit, p.SO_CreditLimit-p.SO_CreditUsed AS CreditAvailable,"\n      //+ " lship.C_BPartner_Location_ID,c.AD_User_ID,"\n      //+ " COALESCE(p.PO_PriceList_ID,g.PO_PriceList_ID) AS PO_PriceList_ID, p.PaymentRulePO,p.PO_PaymentTerm_ID,"\n      //+ " lbill.C_BPartner_Location_ID AS Bill_Location_ID, p.SOCreditStatus, lbill.IsShipTo "\n      //+ " FROM C_BPartner p"\n      //+ " INNER JOIN C_BP_Group g ON (p.C_BP_Group_ID=g.C_BP_Group_ID)"\n      //+ " LEFT OUTER JOIN C_BPartner_Location lbill ON (p.C_BPartner_ID=lbill.C_BPartner_ID AND lbill.IsBillTo=\'Y\' AND lbill.IsActive=\'Y\')"\n      //+ " LEFT OUTER JOIN C_BPartner_Location lship ON (p.C_BPartner_ID=lship.C_BPartner_ID AND lship.IsShipTo=\'Y\' AND lship.IsActive=\'Y\')"\n      //+ " LEFT OUTER JOIN AD_User c ON (p.C_BPartner_ID=c.C_BPartner_ID) "\n      //+ "WHERE p.C_BPartner_ID=" + C_BPartner_ID + " AND p.IsActive=\'Y\'";\t\t//\t#1\n      //var isSOTrx = ctx.isSOTrx(windowNo);\n\n      //dr = CalloutDB.executeCalloutReader(sql);\n      //if (dr.read()) {\n      //// Price List\n      //var ii = Util.getValueOfInt(dr.get(isSOTrx ? "m_pricelist_id" : "po_pricelist_id"));\n      //if (dr != null && ii != 0) {\n      //    mTab.setValue("M_PriceList_ID", ii);\n      //}\n      //else {\t//\tget default PriceList                    \n      //    var i1 = ctx.getContextAsInt(windowNo, "#M_PriceList_ID", false);\n      //    if (i1 != 0)\n      //        mTab.setValue("M_PriceList_ID", i1);\n      //}\n\n      ////\tBill-To BPartner               \n      //mTab.setValue("Bill_BPartner_ID", C_BPartner_ID);                \n      //var bill_Location_ID = Util.getValueOfInt(dr.get("bill_location_id"));\n      //if (bill_Location_ID == 0) {\n      //    sql = "SELECT C_BPartnerRelation_ID FROM C_BP_Relation WHERE C_BPartner_ID = " + C_BPartner_ID;\n      //    var bill_Partner_ID = Util.getValueOfInt(CalloutDB.executeCalloutScalar(sql));\n      //    if (bill_Partner_ID > 0)\n      //        mTab.setValue("Bill_BPartner_ID", bill_Partner_ID);\n      //}\n      //else\n      //    mTab.setValue("Bill_Location_ID", bill_Location_ID);\n\n      //// Ship-To Location               \n      //var shipTo_ID = Util.getValueOfInt(dr.get("c_bpartner_location_id"));                \n      //if (C_BPartner_ID.toString() == ctx.getContext("C_BPartner_ID")) {\n      //    var loc = ctx.getContext("C_BPartner_Location_ID");\n      //    if (loc.length > 0)\n      //        shipTo_ID = Util.getValueOfInt(loc);\n      //}\n      //if (shipTo_ID == 0)\n      //    mTab.setValue("C_BPartner_Location_ID", null);\n      //else {\n      //    mTab.setValue("C_BPartner_Location_ID", shipTo_ID);\n      //    if ("Y" == dr.get("isshipto"))\t//\tset the same\n      //        mTab.setValue("Bill_Location_ID", shipTo_ID);\n      //}\n\n      //// Code Added by Anuj------29-12-2015\n\n      //var _salerep_ID = Util.getValueOfInt(dr.get("SalesRep_ID"))\n      ////Modified by Arpit on 31st March,2017 \n      ////Description - To set Sales Rep ID if found on Business Partner otherwise not to set null for login user (By defualt login user ID)\n      //if (_salerep_ID > 0)\n      //    mTab.setValue("SalesRep_ID", _salerep_ID);\n      ////Arpit\n\n      ////payment method ID set to Column----Anuj- 04-09-2015-------------------------------------------------------------------------------------------\n\n      //var _CountVA009 = Util.getValueOfInt(CalloutDB.executeCalloutScalar("SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'VA009_\'  AND IsActive = \'Y\'"));\n      //if (_CountVA009 > 0) {\n      //    var _PaymentMethod_ID = Util.getValueOfInt(dr.get("VA009_PaymentMethod_ID"))\n      //    if (_PaymentMethod_ID == 0)\n      //        mTab.setValue("VA009_PaymentMethod_ID", null);\n      //    else {\n      //        mTab.setValue("VA009_PaymentMethod_ID", _PaymentMethod_ID);\n      //        PaymentBasetype = CalloutDB.executeCalloutScalar("SELECT VA009_PaymentBaseType FROM VA009_PaymentMethod WHERE VA009_PaymentMethod_ID=" + _PaymentMethod_ID);\n      //        if (PaymentBasetype != "W" && PaymentBasetype != null) {\n      //            mTab.setValue("PaymentMethod", PaymentBasetype);\n      //            mTab.setValue("PaymentRule", PaymentBasetype);\n      //        }\n      //        else {\n      //            mTab.setValue("PaymentMethod", "T");\n      //            mTab.setValue("PaymentRule", "T");\n      //        }\n      //    }\n      //}\n\n      ////payment method ID set to Column----Anuj- 04-09-2015-----------------------------------------\n\n      //var contID = Util.getValueOfInt(dr.get("ad_user_id"));\n\n      //if (C_BPartner_ID.toString() == ctx.getContext("C_BPartner_ID")) {\n      //    var cont = ctx.getContext("AD_User_ID");\n      //    if (cont.length > 0)\n      //        contID = Util.getValueOfInt(cont);\n      //}\n      //if (contID == 0)\n      //    mTab.setValue("AD_User_ID", null);\n      //else {\n      //    mTab.setValue("AD_User_ID", contID);\n      //    mTab.setValue("Bill_User_ID", contID);\n      //}\n\n      ////\tCreditAvailable \n      //if (isSOTrx) {\n      //    var CreditStatus = dr.getString("CreditStatusSettingOn");\n      //    if (CreditStatus == "CH") {\n      //        var CreditLimit = Util.getValueOfDouble(dr.get("so_creditlimit"));                        \n      //        if (CreditLimit != 0) {\n      //            var CreditAvailable = Util.getValueOfDouble(dr.get("creditavailable"));\n      //            if (dr != null && CreditAvailable <= 0) {                                \n      //                VIS.ADialog.info("CreditOver", null, "", "");\n      //            }\n      //        }\n      //    }\n      //    else {\n      //        var locId = Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID"));\n      //        sql = "SELECT p.CreditStatusSettingOn,p.SO_CreditLimit, p.SO_CreditLimit-p.SO_CreditUsed AS CreditAvailable" +\n      //            " FROM C_BPartner_Location p WHERE C_BPartner_Location_ID = " + locId;\n      //        drl = CalloutDB.executeCalloutReader(sql);\n      //        if (drl.read()) {\n      //            CreditStatus = drl.getString("CreditStatusSettingOn");\n      //            if (CreditStatus == "CL") {\n      //                var CreditLimit = Util.getValueOfDouble(drl.get("so_creditlimit"));                               \n      //                if (CreditLimit != 0) {\n      //                    var CreditAvailable = Util.getValueOfDouble(drl.get("creditavailable"));\n      //                    if (dr != null && CreditAvailable <= 0) {                                       \n      //                        VIS.ADialog.info("CreditOver", null, "", "");\n      //                    }\n      //                }\n      //            }\n      //        }\n      //    }\n      //}\n\n      ////\tPO Reference                \n      //var s = dr.get("poreference");\n      //if (s != null && s.length != 0)\n      //    mTab.setValue("POReference", s);                \n      //s = dr.get("so_description");\n      //if (s != null && s.trim().length != 0)\n      //    mTab.setValue("Description", s);\n      ////\tIsDiscountPrinted               \n      //s = dr.get("isdiscountprinted")\n      //if (s != null && s.length != 0)\n      //    mTab.setValue("IsDiscountPrinted", s);\n      //else\n      //    mTab.setValue("IsDiscountPrinted", "N");\n\n      ////\tDefaults, if not Walkin Receipt or Walkin Invoice\n      //var OrderType = ctx.getContext("OrderType");\n      //mTab.setValue("InvoiceRule", XC_INVOICERULE_AfterDelivery);\n      //mTab.setValue("DeliveryRule", XC_DELIVERYRULE_Availability);\n      //var _CountVA009 = Util.getValueOfInt(CalloutDB.executeCalloutScalar("SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'VA009_\'  AND IsActive = \'Y\'"));\n      //if (_CountVA009 > 0) {                    \n      //    if (PaymentBasetype != "W" && PaymentBasetype != null) {\n      //        mTab.setValue("PaymentRule", PaymentBasetype);\n      //    }\n      //    else {\n      //        mTab.setValue("PaymentRule", "T");\n      //        mTab.setValue("PaymentMethod", "T");\n      //    }\n      //}\n      //else\n      //    mTab.setValue("PaymentRule", XC_PAYMENTRULE_OnCredit);\n\n      //if (OrderType == DocSubTypeSO_Prepay) {\n      //    mTab.setValue("InvoiceRule", XC_INVOICERULE_Immediate);\n      //    mTab.setValue("DeliveryRule", XC_DELIVERYRULE_AfterReceipt);\n      //}\n      //else if (OrderType == DocSubTypeSO_POS)\t//  for POS\n      //{\n      //    var _CountVA009 = Util.getValueOfInt(CalloutDB.executeCalloutScalar("SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'VA009_\'  AND IsActive = \'Y\'"));\n      //    if (_CountVA009 > 0) {                        \n      //        if (PaymentBasetype != "W" && PaymentBasetype != null) {\n      //            mTab.setValue("PaymentRule", PaymentBasetype);\n      //        }\n      //        else {\n      //            mTab.setValue("PaymentRule", "T");\n      //            mTab.setValue("PaymentMethod", "T");\n      //        }\n      //    }\n      //    else\n      //        mTab.setValue("PaymentRule", XC_PAYMENTRULE_Cash);\n      //}\n      //else {\n      //    var _CountVA009 = Util.getValueOfInt(CalloutDB.executeCalloutScalar("SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'VA009_\'  AND IsActive = \'Y\'"));\n      //    if (_CountVA009 > 0) {                        \n      //        if (PaymentBasetype != "W" && PaymentBasetype != null) {\n      //            mTab.setValue("PaymentRule", PaymentBasetype);\n      //        }\n      //        else {\n      //            mTab.setValue("PaymentRule", "T");\n      //            mTab.setValue("PaymentMethod", "T");\n      //        }\n      //    }\n      //    else {\n      //        //\tPaymentRule                       \n      //        s = dr.get(isSOTrx ? "paymentrule" : "paymentrulepo");\n      //        if (s != null && s.length != 0) {\n      //            if (s == "B")\t\t\t\t//\tNo Cache in Non PO\n      //                s = "P";\n      //            if (isSOTrx && (s == "S") || (s == "U"))\t//\tNo Check/Transfer for SO_Trx\n      //                s = "P";\t\t\t\t\t\t\t\t\t\t//  Payment Term\n      //            mTab.setValue("PaymentRule", s);\n      //        }\n      //    }\n      //    //\tPayment Term                   \n      //    ii = Util.getValueOfInt(dr.get(isSOTrx ? "c_paymentterm_id" : "po_paymentterm_id"));\n      //    if (dr != null && ii != 0)//ii=0 when dr return ""\n      //    {\n      //        mTab.setValue("C_PaymentTerm_ID", ii);\n      //    }\n      //    //\tInvoiceRule                    \n      //    s = dr.get("invoicerule");\n      //    if (s != null && s.length != 0)\n      //        mTab.setValue("InvoiceRule", s);\n      //    //\tDeliveryRule                    \n      //    s = dr.get("deliveryrule");\n      //    if (s != null && s.length != 0)\n      //        mTab.setValue("DeliveryRule", s);\n      //    //\tFreightCostRule                   \n      //    s = dr.get("freightcostrule");\n      //    if (s != null && s.length != 0)\n      //        mTab.setValue("FreightCostRule", s);\n      //    //\tDeliveryViaRule                    \n      //    s = dr.get("deliveryviarule");\n      //    if (s != null && s.length != 0)\n      //        mTab.setValue("DeliveryViaRule", s);\n      //}\n      //}\n      //dr.close();\n    } catch (err) {\n      //if (dr != null) {\n      //    dr.close();\n      //    dr = null;\n      //}\n      //if (drl != null) {\n      //    drl.close();\n      //    drl = null;\n      //}\n      //this.log.log(Level.SEVERE, sql, err);\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    //ctx = windowNo = mTab = mField = value =\n    oldValue = null;\n    return this.BPartnerBill(ctx, windowNo, mTab, mField, mTab.getValue("Bill_BPartner_ID"));\n  };\n\n  /// <summary>\n  /// Order Header - C_BPartner_Location.\n  /// - C_BPartner_Location_ID\n  /// - Bill_BPartner_ID/Bill_Location_ID\n  /// \t- AD_User_ID\n  /// \t- POReference\n  /// \t- SO_Description\n  /// \t- IsDiscountPrinted\n  /// \t- InvoiceRule/DeliveryRule/PaymentRule/FreightCost/DeliveryViaRule\n  /// \t- C_PaymentTerm_ID\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutOrder.prototype.BPartnerLoc = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var dr = null;\n    var sql = "";\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_BPartner_Location_ID = 0;\n      if (value != null) C_BPartner_Location_ID = Util.getValueOfInt(value.toString());\n      if (C_BPartner_Location_ID == 0) return "";\n\n      // Skip rest of steps for RMA. These fields are copied over from the orignal order instead.\n      var isReturnTrx = Util.getValueOfBoolean(mTab.getValue("IsReturnTrx"));\n      if (isReturnTrx) return "";\n      this.setCalloutActive(true);\n      var isSOTrx = ctx.isSOTrx(windowNo);\n      if (isSOTrx) {\n        // JID_0161 // change here now will check credit settings on field only on Business Partner Header // Lokesh Chauhan 15 July 2019 \n        //sql = "SELECT bp.CreditStatusSettingOn,p.SO_CreditLimit, NVL(p.SO_CreditLimit,0) - NVL(p.SO_CreditUsed,0) AS CreditAvailable" +\n        //    " FROM C_BPartner_Location p INNER JOIN C_BPartner bp ON (bp.C_BPartner_ID = p.C_BPartner_ID) WHERE p.C_BPartner_Location_ID = " + C_BPartner_Location_ID;\n        //dr = VIS.DB.executeReader(sql);\n        dr = VIS.dataContext.getJSONRecord("MBPartner/GetLocationData", C_BPartner_Location_ID.toString());\n        //if (dr.read()) {\n        if (dr != null) {\n          var CreditStatus = Util.getValueOfString(dr["CreditStatusSettingOn"]);\n          if (CreditStatus == "CL") {\n            var CreditLimit = Util.getValueOfDouble(dr["SO_CreditLimit"]);\n            //\tvar SOCreditStatus = dr.getString("SOCreditStatus");\n            if (CreditLimit != 0) {\n              var CreditAvailable = Util.getValueOfDouble(dr["CreditAvailable"]);\n              if (dr != null && CreditAvailable <= 0) {\n                //VIS.ADialog.info("CreditLimitOver", null, "", "");\n                VIS.ADialog.info("CreditOver", null, "", "");\n              }\n            }\n          }\n        }\n      }\n    } catch (err) {\n      if (dr != null) {\n        dr.close();\n        dr = null;\n      }\n      this.log.log(Level.SEVERE, sql, err);\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    //ctx = windowNo = mTab = mField = value =\n    oldValue = null;\n  };\n  /// <summary>\n  /// Order Header - Invoice BPartner.\n  /// - M_PriceList_ID (+ Context)\n  /// - Bill_Location_ID\n  /// - Bill_User_ID\n  /// - POReference\n  /// - SO_Description\n  /// - IsDiscountPrinted\n  /// - InvoiceRule/PaymentRule\n  /// - C_PaymentTerm_ID\n  ///   *  @param ctx      \n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutOrder.prototype.BPartnerBill = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    /** Sales Order Sub Type - SO\t*/\n    var DocSubTypeSO_Standard = "SO";\n    /** Sales Order Sub Type - OB\t*/\n    var DocSubTypeSO_Quotation = "OB";\n    /** Sales Order Sub Type - ON\t*/\n    var DocSubTypeSO_Proposal = "ON";\n    /** Sales Order Sub Type - PR\t*/\n    var DocSubTypeSO_Prepay = "PR";\n    /** Sales Order Sub Type - WR\t*/\n    var DocSubTypeSO_POS = "WR";\n    /** Sales Order Sub Type - WP\t*/\n    var DocSubTypeSO_Warehouse = "WP";\n    /** Sales Order Sub Type - WI\t*/\n    var DocSubTypeSO_OnCredit = "WI";\n    /** Sales Order Sub Type - RM\t*/\n    var DocSubTypeSO_RMA = "RM";\n\n    /** DeliveryRule AD_Reference_ID=151 */\n    var XC_DELIVERYRULE_AD_Reference_ID = 151;\n    /** Availability = A */\n    var XC_DELIVERYRULE_Availability = "A";\n    /** Force = F */\n    var XC_DELIVERYRULE_Force = "F";\n    /** Complete Line = L */\n    var XC_DELIVERYRULE_CompleteLine = "L";\n    /** Manual = M */\n    var XC_DELIVERYRULE_Manual = "M";\n    /** Complete Order = O */\n    var XC_DELIVERYRULE_CompleteOrder = "O";\n    /** After Receipt = R */\n    var XC_DELIVERYRULE_AfterReceipt = "R";\n    var XC_INVOICERULE_AD_Reference_ID = 150;\n    /** After Delivery = D */\n    var XC_INVOICERULE_AfterDelivery = "D";\n    /** Immediate = I */\n    var XC_INVOICERULE_Immediate = "I";\n    /** After Order delivered = O */\n    var XC_INVOICERULE_AfterOrderDelivered = "O";\n    /** Customer Schedule after Delivery = S */\n    var XC_INVOICERULE_CustomerScheduleAfterDelivery = "S";\n\n    /** PaymentRule AD_Reference_ID=195 */\n    var XC_PAYMENTRULE_AD_Reference_ID = 195;\n    /** Cash = B */\n    var XC_PAYMENTRULE_Cash = "B";\n    /** Direct Debit = D */\n    var XC_PAYMENTRULE_DirectDebit = "D";\n    /** Credit Card = K */\n    var XC_PAYMENTRULE_CreditCard = "K";\n    /** On Credit = P */\n    var XC_PAYMENTRULE_OnCredit = "P";\n    /** Check = S */\n    var XC_PAYMENTRULE_Check = "S";\n    /** Direct Deposit = T */\n    var XC_PAYMENTRULE_DirectDeposit = "T";\n    if (this.isCalloutActive()) return "";\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var dr = null;\n    try {\n      var bill_BPartner_ID = Util.getValueOfInt(value.toString());\n      if (bill_BPartner_ID == null || bill_BPartner_ID == 0) return "";\n      this.setCalloutActive(true);\n      // Skip rest of steps for RMA\n      var isReturnTrx = Util.getValueOfBoolean(mTab.getValue("IsReturnTrx"));\n      if (isReturnTrx) {\n        this.setCalloutActive(false);\n        return "";\n      }\n      //var sql = "SELECT p.AD_Language,p.C_PaymentTerm_ID,"\n      //    + "p.M_PriceList_ID,p.PaymentRule,p.POReference,"\n      //    + "p.SO_Description,p.IsDiscountPrinted,"\n      //    + "p.InvoiceRule,p.DeliveryRule,p.FreightCostRule,DeliveryViaRule,"\n      //    + "p.SO_CreditLimit, p.SO_CreditLimit-p.SO_CreditUsed AS CreditAvailable,"\n      //    + "c.AD_User_ID,"\n      //    + "p.PO_PriceList_ID, p.PaymentRulePO, p.PO_PaymentTerm_ID,"\n      //    + "lbill.C_BPartner_Location_ID AS Bill_Location_ID "\n      //    + "FROM C_BPartner p"\n      //    + " LEFT OUTER JOIN C_BPartner_Location lbill ON (p.C_BPartner_ID=lbill.C_BPartner_ID AND lbill.IsBillTo=\'Y\' AND lbill.IsActive=\'Y\')"\n      //    + " LEFT OUTER JOIN AD_User c ON (p.C_BPartner_ID=c.C_BPartner_ID) "\n      //    + "WHERE p.C_BPartner_ID=" + bill_BPartner_ID + " AND p.IsActive=\'Y\'";\t\t//\t#1\n      dr = VIS.dataContext.getJSONRecord("MBPartner/GetBPartnerBillData", bill_BPartner_ID.toString());\n      var isSOTrx = "Y" == ctx.getWindowContext(windowNo, "IsSOTrx", true);\n      //var isSOTrx = false;\n      //if("Y"==(ctx.getContext("IsSOTrx")))\n      //{\n      //    isSOTrx=true;\n      //}\n\n      //dr = VIS.DB.executeReader(sql);\n      //if (dr.read()) {\n      //DataRow dr = ds.Tables[0].Rows[i];\n      //\tPriceList (indirect: IsTaxIncluded & Currency)\n      ////var PriceListPresent = Util.getValueOfInt(mTab.getValue("M_PriceList_ID")); //Price List from BSO/BPO window\n      ////if (PriceListPresent > 0) {\n      ////}\n      ////else {\n      ////    var ii = Util.getValueOfInt(dr.get(isSOTrx ? "m_pricelist_id" : "po_pricelist_id"));\n      ////    if (ii != 0)\n\n      ////        mTab.setValue("M_PriceList_ID", ii);\n      ////}\n      //Code commented by Arpit Rai on 31st March,2017 ----Not to set defualt price list in context\n      //asked by Mandeep Sir\n      /*   else {\t//\tget default PriceList\r\n         var iCont = ctx.getContextAsInt(windowNo, "#M_PriceList_ID", false);\r\n         //var iCont = ctx.getContextAsInt("#M_PriceList_ID");//Sarab\r\n         if (iCont != 0)\r\n             mTab.setValue("M_PriceList_ID", Util.getValueOfInt(iCont));\r\n      }*/ //Arpit\n      if (dr != null) {\n        var bill_Location_ID = Util.getValueOfInt(dr["Bill_Location_ID"]);\n        //\toverwritten by InfoBP selection - works only if InfoWindow\n        //\twas used otherwise creates error (uses last value, may belong to differnt BP)\n        if (bill_BPartner_ID.toString() == ctx.getContext("C_BPartner_ID")) {\n          var loc = ctx.getContext("C_BPartner_Location_ID");\n          if (loc.length > 0) bill_Location_ID = Util.getValueOfInt(loc);\n        }\n        if (bill_Location_ID == 0) mTab.setValue("Bill_Location_ID", null);else mTab.setValue("Bill_Location_ID", Util.getValueOfInt(bill_Location_ID));\n\n        //\tContact - overwritten by InfoBP selection\n        var contID = Util.getValueOfInt(dr["AD_User_ID"]);\n        if (bill_BPartner_ID.toString() == ctx.getContext("C_BPartner_ID")) {\n          var cont = ctx.getContext("AD_User_ID");\n          if (cont.length > 0) contID = Util.getValueOfInt(cont);\n        }\n        if (contID == 0) mTab.setValue("Bill_User_ID", null);else mTab.setValue("Bill_User_ID", Util.getValueOfInt(contID.toString()));\n        //\tCreditAvailable \n        if (isSOTrx) {\n          var CreditLimit = 0;\n          if (CreditLimit != 0) {\n            var CreditAvailable = 0;\n            if (dr != null && CreditAvailable < 0) {\n              //mTab.fireDataStatusEEvent("CreditLimitOver",\n              //    DisplayType.getNumberFormat(DisplayType.Amount).format(CreditAvailable),\n              //    false);\n              VIS.ADialog.info("CreditLimitOver", null, "", "");\n            }\n          }\n        }\n\n        //\tPO Reference\n        var s = dr["POReference"];\n\n        // Order Reference should not be set by Bill To BPartner; only by BPartner.\n        /* if (s != null && s.length() != 0)\r\n            mTab.setValue("POReference", s);\r\n        else\r\n            mTab.setValue("POReference", null);*/\n        //\tSO Description\n        s = dr["SO_Description"];\n        if (s != null && s.toString().trim().length != 0) mTab.setValue("Description", s);\n        //\tIsDiscountPrinted\n        s = dr["IsDiscountPrinted"];\n        if (s != null && s.toString().length != 0) mTab.setValue("IsDiscountPrinted", s);else mTab.setValue("IsDiscountPrinted", "N");\n\n        //\tDefaults, if not Walkin Receipt or Walkin Invoice\n        var OrderType = ctx.getContext("OrderType");\n        mTab.setValue("InvoiceRule", XC_INVOICERULE_AfterDelivery);\n        mTab.setValue("PaymentRule", XC_PAYMENTRULE_OnCredit);\n        if (OrderType == DocSubTypeSO_Prepay) {\n          mTab.setValue("InvoiceRule", XC_INVOICERULE_Immediate);\n        } else if (OrderType == DocSubTypeSO_POS)\n          //  for POS \n          {\n            mTab.setValue("PaymentRule", XC_PAYMENTRULE_Cash);\n          } else {\n          //\tPaymentRule\n          s = dr[isSOTrx ? "PaymentRule" : "PaymentRulePO"];\n          if (s != null && s.toString().length != 0) {\n            if (s == "B")\n              //\tNo Cache in Non POS\n              s = "P";\n            if (isSOTrx && (s == "S" || s == "U"))\n              //\tNo Check/Transfer for SO_Trx\n              s = "P"; //  Payment Term\n            mTab.setValue("PaymentRule", s);\n          }\n          //\tPayment Term\n\n          var PaymentTermPresent = Util.getValueOfInt(mTab.getValue("C_PaymentTerm_ID")); // from BSO/BPO window\n          var C_Order_Blanket = Util.getValueOfDecimal(mTab.getValue("C_Order_Blanket"));\n          if (PaymentTermPresent > 0 && C_Order_Blanket > 0) {} else {\n            ii = dr[isSOTrx ? "C_PaymentTerm_ID" : "PO_PaymentTerm_ID"];\n            //when doc type = Warehouse Order / Credit Order / POS Order / Prepay order --- and payment term is advance -- not to update\n            // false means - not to update\n            var isPaymentTermUpdate = this.checkAdvancePaymentTerm(Util.getValueOfInt(mTab.getValue("C_DocTypeTarget_ID")), ii);\n            if (isPaymentTermUpdate) {\n              if (dr != null) mTab.setValue("C_PaymentTerm_ID", ii);\n            } else {\n              mTab.setValue("C_PaymentTerm_ID", null);\n            }\n          }\n          //\tInvoiceRule\n          s = dr["InvoiceRule"];\n          if (s != null && s.toString().length != 0) mTab.setValue("InvoiceRule", s);\n        }\n      }\n      //dr.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n        dr = null;\n      }\n      this.log(Level.SEVERE, "bPartnerBill", err);\n      return err;\n    }\n    this.setCalloutActive(false);\n    return this.PriceList(ctx, windowNo, mTab, mField, mTab.getValue("M_PriceList_ID"));\n    // removed by dead control flow\n\n    // removed by dead control flow\n\n  };\n\n  /// <summary>\n  /// Order Header - PriceList.\n  /// (used also in Invoice)\n  /// - C_Currency_ID\n  /// \t- IsTaxIncluded\n  /// \tWindow Context:\n  /// \t- EnforcePriceLimit\n  /// \t- StdPrecision\n  /// \t- M_PriceList_Version_ID\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutOrder.prototype.PriceList = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var sql = "";\n    var dr = null;\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var M_PriceList_ID = Util.getValueOfInt(value.toString());\n      if (M_PriceList_ID == null || M_PriceList_ID == 0) return "";\n      this.setCalloutActive(true);\n      if (steps) {\n        this.log.warning("init");\n      }\n\n      //sql = "SELECT pl.IsTaxIncluded,pl.EnforcePriceLimit,pl.C_Currency_ID,c.StdPrecision,"\n      //    + "plv.M_PriceList_Version_ID,plv.ValidFrom "\n      //    + "FROM M_PriceList pl,C_Currency c,M_PriceList_Version plv "\n      //    + "WHERE pl.C_Currency_ID=c.C_Currency_ID"\n      //    + " AND pl.M_PriceList_ID=plv.M_PriceList_ID"\n      //    + " AND pl.M_PriceList_ID=" + M_PriceList_ID\t\t\t\t\t\t//\t1\n      //    + "ORDER BY plv.ValidFrom DESC";\n      ////\tUse net price list - may not be future\n\n      //dr = VIS.DB.executeReader(sql);\n      dr = VIS.dataContext.getJSONRecord("MPriceList/GetPriceListData", value.toString());\n      /*if (dr.read()) {*/\n      //DataRow dr = ds.Tables[0].Rows[i];\n      //\tTax Included\n      if (dr != null) {\n        mTab.setValue("IsTaxIncluded", "Y" == dr["IsTaxIncluded"]);\n        //\tPrice Limit Enforce\n        ctx.setContext(windowNo, "EnforcePriceLimit", dr["EnforcePriceLimit"]);\n        //\tCurrency\n        var ii = dr["C_Currency_ID"];\n        var CurrencyPresent = Util.getValueOfInt(mTab.getValue("C_Currency_ID")); //Price List from BSO/BPO window\n        var C_Order_Blanket = Util.getValueOfDecimal(mTab.getValue("C_Order_Blanket"));\n        if (CurrencyPresent > 0 && C_Order_Blanket > 0) {} else {\n          mTab.setValue("C_Currency_ID", ii);\n        }\n        var prislst = dr["M_PriceList_Version_ID"];\n        //\tPriceList Version\n        ctx.setContext(windowNo, "M_PriceList_Version_ID", prislst);\n      }\n      //dr.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n      }\n      this.log(Level.SEVERE, sql, err);\n      return err;\n    }\n    if (steps) {\n      this.log.warning("finish");\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Order Line - Product.\n  /// - reset C_Charge_ID / M_AttributeSetInstance_ID\n  /// - PriceList, PriceStd, PriceLimit, C_Currency_ID, EnforcePriceLimit\n  /// - UOM\n  /// Calls Tax\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutOrder.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      mTab.setValue("ProductType", null);\n      return "";\n    }\n    var M_Product_ID = Util.getValueOfInt(value);\n    if (M_Product_ID == null || M_Product_ID == 0) return "";\n    if ("Y" == ctx.getWindowContext(windowNo, "IsReturnTrx", true)) return "";\n    this.setCalloutActive(true);\n    try {\n      if (steps) {\n        this.log.warning("init");\n      }\n      //\n      mTab.setValue("C_Charge_ID", null);\n      //\tSet Attribute            \n      mTab.setValue("M_AttributeSetInstance_ID", null);\n      var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      var isReturnTrx = ctx.getWindowContext(windowNo, "IsReturnTrx", true) == "Y";\n      var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID", false);\n      var Qty = Util.getValueOfDecimal(mTab.getValue("QtyOrdered"));\n      var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID", false);\n      var M_PriceList_Version_ID = ctx.getContextAsInt(windowNo, "M_PriceList_Version_ID", false);\n      var M_AttributeSetInstance_ID = ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID", false);\n      var orderDate = mTab.getValue("DateOrdered");\n      var StdPrecision = 2;\n      var PriceListPrecision = 2;\n      var paramString = M_Product_ID.toString().concat(",", C_BPartner_ID.toString(), ",",\n      //2\n      Qty.toString(), ",",\n      //3\n      isSOTrx, ",",\n      //4 \n      M_PriceList_ID.toString(), ",",\n      //5\n      M_PriceList_Version_ID.toString(), ",",\n      //6\n      orderDate.toString(), ",",\n      //7\n      null, ",", M_AttributeSetInstance_ID.toString()); // 8 , 9\n\n      try {\n        var productInfo = VIS.dataContext.getJSONRecord("MOrderLine/GetProductInfo", paramString);\n        if (productInfo != null) {\n          //190 - Set Product description\n          mTab.setValue("PrintDescription", productInfo.DocumentNote);\n          var productType = productInfo["productType"].toString();\n          ctx.setContext(windowNo, "ProductType", productType);\n          mTab.setValue("ProductType", productType);\n          if (productType == "S") {\n            //mTab.setValue("IsContract", true);\n          } else {\n            //mTab.setValue("IsContract", false);\n            mTab.setValue("NoofCycle", null);\n            mTab.setValue("QtyPerCycle", null);\n            mTab.setValue("StartDate", null);\n            mTab.setValue("C_Contract_ID", 0); // Contract\n            mTab.setValue("EndDate", null);\n            mTab.setValue("C_Frequency_ID", 0); // Billing frequncy\n          }\n          if (productInfo["IsDropShip"].toString() == "Y") {\n            mTab.setValue("IsDropShip", true);\n          } else {\n            mTab.setValue("IsDropShip", false);\n          }\n          countEd011 = Util.getValueOfInt(productInfo["countEd011"]);\n          var purchasingUom = 0;\n          //VAI050-Set Purchasing UOM from Product if Purchasing UOM found on Purchasing tab\n          //If Purchasing UOM not found than give priority to PU unit of Product\n          if (Util.getValueOfInt(productInfo["purchasingUom"]) > 0) purchasingUom = Util.getValueOfInt(productInfo["purchasingUom"]);else purchasingUom = Util.getValueOfInt(productInfo["VAS_PurchaseUOM_ID"]);\n          if (purchasingUom > 0 && !isSOTrx) {\n            mTab.setValue("C_UOM_ID", purchasingUom);\n          }\n          //VAI050-Set Sales UOM if Sales UOM found against product else set Base UOM \n          else if (Util.getValueOfInt(productInfo["VAS_SalesUOM_ID"]) > 0 && isSOTrx) {\n            mTab.setValue("C_UOM_ID", productInfo["VAS_SalesUOM_ID"]);\n          } else {\n            mTab.setValue("C_UOM_ID", Util.getValueOfInt(productInfo["headerUom"]));\n          }\n          StdPrecision = Util.getValueOfInt(productInfo["StdPrecision"]);\n          PriceListPrecision = Util.getValueOfInt(productInfo["PriceListPrecision"]);\n          if (purchasingUom > 0 && !isSOTrx) {\n            var params = mTab.getValue("M_Product_ID").toString().concat("," + ctx.getAD_Client_ID().toString() + "," + mTab.getValue("C_Order_ID").toString() + "," + C_BPartner_ID.toString() + "," + mTab.getValue("QtyEntered").toString() + "," + Util.getValueOfString(purchasingUom));\n            var prices = VIS.dataContext.getJSONRecord("MOrderLine/GetPricesOnProductChange", params);\n            PriceList = Util.getValueOfDecimal(prices["PriceList"]);\n            mTab.setValue("PriceList", PriceList);\n            PriceEntered = Util.getValueOfDecimal(prices["PriceEntered"]);\n            mTab.setValue("PriceEntered", PriceEntered);\n            PriceActual = Util.getValueOfDecimal(prices["PriceEntered"].toFixed(PriceListPrecision));\n            mTab.setValue("PriceActual", PriceActual);\n            mTab.setValue("QtyOrdered", Util.getValueOfDecimal(prices["QtyOrdered"].toFixed(prices["UOMStdPrecision"])));\n          } else {\n            mTab.setValue("PriceList", productInfo["PriceList"]);\n            mTab.setValue("PriceLimit", productInfo.PriceLimit);\n            mTab.setValue("PriceActual", Util.getValueOfDecimal(productInfo.PriceActual.toFixed(PriceListPrecision)));\n            mTab.setValue("PriceEntered", Util.getValueOfDecimal(productInfo.PriceEntered.toFixed(PriceListPrecision)));\n            mTab.setValue("C_Currency_ID", Util.getValueOfInt(productInfo.C_Currency_ID));\n            mTab.setValue("Discount", Util.getValueOfDecimal(productInfo.Discount.toFixed(PriceListPrecision)));\n            mTab.setValue("QtyOrdered", mTab.getValue("QtyEntered"));\n          }\n          ctx.setContext(windowNo, "EnforcePriceLimit", productInfo.EnforcePriceLimit ? "Y" : "N");\n          ctx.setContext(windowNo, "DiscountSchema", productInfo.DiscountSchema ? "Y" : "N");\n          if (isSOTrx) {\n            var QtyOrdered = Util.getValueOfDecimal(mTab.getValue("QtyOrdered"));\n            var M_Warehouse_ID = ctx.getContextAsInt(windowNo, "M_Warehouse_ID");\n            var M_AttributeSetInstance_ID = ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID");\n            var C_OrderLine_ID = 0;\n            if (mTab.getValue("C_OrderLine_ID") != null) {\n              C_OrderLine_ID = Util.getValueOfInt(mTab.getValue("C_OrderLine_ID"));\n            }\n            if (C_OrderLine_ID == null) C_OrderLine_ID = 0;\n\n            //Get Qty information from server side\n            var paramString = M_Product_ID.toString().concat(",", M_Warehouse_ID.toString(), ",",\n            //2\n            M_AttributeSetInstance_ID.toString(), ",",\n            //3\n            C_OrderLine_ID.toString()); //4\n\n            var available = VIS.dataContext.getJSONRecord("MStorage/GetQtyAvailable", paramString);\n            if (available == null) available = VIS.Env.ZERO;\n            if (available == 0) {} else if (available.toString().compareTo(QtyOrdered) < 0) {} else {\n              var paramString = M_Warehouse_ID.toString() + "," + M_Product_ID.toString() + "," + M_AttributeSetInstance_ID.toString() + "," + C_OrderLine_ID.toString();\n              var notReserved = VIS.dataContext.getJSONRecord("MOrderLine/GetNotReserved", paramString);\n              if (notReserved == null) notReserved = VIS.Env.ZERO;\n              var total = available - notReserved;\n              if (total.compareTo(QtyOrdered) < 0) {\n                var info = VIS.Msg.parseTranslation(ctx, "@QtyAvailable@=" + available + " - @QtyNotReserved@=" + notReserved + " = " + total);\n                VIS.ADialog.info("InsufficientQtyAvailable", true, info, "");\n              }\n            }\n          }\n        }\n        if (steps) {\n          this.log.warning("fini");\n        }\n      } catch (err) {\n        this.log.saveError("calloutorder", err.toString());\n        this.setCalloutActive(false);\n        return err.message;\n      }\n      this.setCalloutActive(false);\n      //return Tax(ctx, windowNo, mTab, mField, value);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.saveError("calloutorder", err.toString());\n    }\n    this.setCalloutActive(false);\n    oldValue = null;\n    return this.Tax(ctx, windowNo, mTab, mField, value);\n  };\n\n  /// <summary>\n  /// Order Line - Charge.\n  /// - updates PriceActual from Charge\n  /// - sets PriceLimit, PriceList to zero\n  /// \tCalles tax\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value"> New Value</param>\n  /// <returns>null or error message</returns>\n\n  CalloutOrder.prototype.Charge = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    try {\n      if (this.isCalloutActive() || value == null || value.toString() == "") {\n        return "";\n      }\n      this.setCalloutActive(true);\n      var C_Charge_ID = Util.getValueOfInt(value);\n      if (C_Charge_ID == null || C_Charge_ID == 0) {\n        this.setCalloutActive(false);\n        return "";\n      }\n      var isReturnTrx = "Y" == ctx.getContext("IsReturnTrx");\n      if (isReturnTrx) {\n        this.setCalloutActive(false);\n        return "";\n      }\n\n      //\tNo Product defined\n      if (mTab.getValue("M_Product_ID") != null) {\n        mTab.setValue("M_Product_ID", null);\n        //mTab.setValue("C_Charge_ID", null);\n        //this.setCalloutActive(false);\n        //return "ChargeExclusively";\n      }\n      mTab.setValue("M_AttributeSetInstance_ID", null);\n      mTab.setValue("S_ResourceAssignment_ID", null);\n\n      //JID_0054: Currently System setting the Each as UOM after selecting the cahrge. Need to set default UOM for charge.\n      var c_uom_id = ctx.getContextAsInt("#C_UOM_ID");\n      if (c_uom_id > 0) {\n        mTab.setValue("C_UOM_ID", c_uom_id); //\tDefault charge from context\n      } else {\n        mTab.setValue("C_UOM_ID", 100); //\tEA\n      }\n      ctx.setContext(windowNo, "DiscountSchema", "N");\n\n      // JID_1744 The Precision Shpould as per Currency precision\n      var stdPrecision = VIS.dataContext.getJSONRecord("MOrder/GetPrecision", mTab.getValue("C_Order_ID").toString());\n\n      //190 - Remove client side query and set print description\n      var dr = VIS.dataContext.getJSONRecord("MCharge/GetChargeDetails", C_Charge_ID.toString());\n      if (dr != null) {\n        mTab.setValue("PriceEntered", Util.getValueOfDecimal(dr["ChargeAmt"]).toFixed(stdPrecision));\n        mTab.setValue("PrintDescription", Util.getValueOfString(dr["PrintDescription"]));\n        mTab.setValue("PriceActual", Util.getValueOfDecimal(dr["ChargeAmt"]).toFixed(stdPrecision));\n        mTab.setValue("PriceList", Util.getValueOfDecimal(dr["ChargeAmt"]).toFixed(stdPrecision));\n      }\n      mTab.setValue("PriceLimit", VIS.Env.ZERO);\n      mTab.setValue("Discount", VIS.Env.ZERO);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, err.toString());\n      return err;\n    }\n    this.setCalloutActive(false);\n    oldValue = null;\n    return this.Tax(ctx, windowNo, mTab, mField, value);\n  };\n\n  /// <summary>\n  /// Order Line - Tax.\n  /// - basis: Product, Charge, BPartner Location\n  /// \t- sets C_Tax_ID\n  /// \tCalles Amount\n  /// \t@param ctx \n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>ull or error message</returns>\n  CalloutOrder.prototype.Tax = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    ///*Created By Sunil 10/11/2016*/\n    //if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) > 0 && Util.getValueOfInt(mTab.getValue("M_Product_ID")) == 0) {\n    //    return "";\n    //}\n    console.log("Before Charge Or Product");\n    if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) == 0 && Util.getValueOfInt(mTab.getValue("M_Product_ID")) == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      /**** Start Amit For Tax Type Module ****/\n      var taxRule = "";\n      var sql = "";\n      var paramString = "";\n\n      //change by amit 7-june-2016\n      var params = Util.getValueOfString(mTab.getValue("M_Product_ID")).concat(",", Util.getValueOfString(mTab.getValue("C_Order_ID")) + "," + Util.getValueOfString(mTab.getValue("C_Charge_ID")));\n      var recDic = VIS.dataContext.getJSONRecord("MOrderLine/GetTaxId", params);\n      //end \n\n      var _CountVATAX = Util.getValueOfInt(recDic["_CountVATAX"]);\n      var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      var isReturnTrx = ctx.getWindowContext(windowNo, "IsReturnTrx", true) == "Y";\n      if (_CountVATAX > 0) {\n        taxRule = Util.getValueOfString(recDic["taxRule"]);\n      }\n      if (taxRule == "T" && !isReturnTrx) {\n        var taxId = Util.getValueOfInt(recDic["taxId"]);\n        if (Util.getValueOfInt(taxId) > 0) {\n          mTab.setValue("C_Tax_ID", taxId);\n          if (mTab.findColumn("C_TaxExemptReason_ID") > -1 && mTab.findColumn("IsTaxExempt") > -1) {\n            //set Tax Exempt and Tax Exempt Reason \n            mTab.setValue("C_TaxExemptReason_ID", Util.getValueOfInt(recDic["C_TaxExemptReason_ID"]));\n            mTab.setValue("IsTaxExempt", Util.getValueOfString(recDic["IsTaxExempt"]).equals("Y") ? true : false);\n          }\n        } else {\n          if (Util.getValueOfInt(mTab.getValue("M_Product_ID")) > 0) {\n            mTab.setValue("M_Product_ID", "");\n            this.setCalloutActive(false);\n            if (recDic["TaxExempt"] == "Y") {\n              return VIS.ADialog.info("TaxNoExemptFound");\n            } else {\n              return VIS.ADialog.info("VATAX_DefineTax");\n            }\n          } else if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) > 0) {\n            mTab.setValue("C_Charge_ID", "");\n            this.setCalloutActive(false);\n            if (recDic["TaxExempt"] == "Y") {\n              return VIS.ADialog.info("TaxNoExemptFound");\n            } else {\n              return VIS.ADialog.info("VATAX_DefineChargeTax");\n            }\n          }\n        }\n      }\n      /**** end Amit For Tax Type Module ****/else {\n        var column = mField.getColumnName();\n        if (value == null) return "";\n        if (steps) {\n          this.log.warning("init");\n        }\n        //\tCheck Product\n        var M_Product_ID = 0;\n        if (column == "M_Product_ID") {\n          M_Product_ID = Util.getValueOfInt(value);\n        } else {\n          M_Product_ID = Util.getValueOfInt(ctx.getContextAsInt(windowNo, "M_Product_ID"));\n        }\n        var C_Charge_ID = 0;\n        if (column == "C_Charge_ID") {\n          C_Charge_ID = Util.getValueOfInt(value);\n        } else {\n          C_Charge_ID = Util.getValueOfInt(ctx.getContextAsInt(windowNo, "C_Charge_ID"));\n        }\n        this.log.fine("Product=" + M_Product_ID + ", C_Charge_ID=" + C_Charge_ID);\n        if (M_Product_ID == 0 && C_Charge_ID == 0) {\n          this.setCalloutActive(false);\n          return this.Amt(ctx, windowNo, mTab, mField, value); //\n        }\n        //\tCheck Partner Location\n        var shipC_BPartner_Location_ID = 0;\n        if (column == "C_BPartner_Location_ID") {\n          shipC_BPartner_Location_ID = Util.getValueOfInt(value);\n        } else {\n          shipC_BPartner_Location_ID = Util.getValueOfInt(ctx.getContextAsInt(windowNo, "C_BPartner_Location_ID"));\n        }\n        if (shipC_BPartner_Location_ID == 0) {\n          this.setCalloutActive(false);\n          return this.Amt(ctx, windowNo, mTab, mField, value); // \n        }\n        this.log.fine("Ship BP_Location=" + shipC_BPartner_Location_ID);\n        //DateTime billDate = CommonFunctions.CovertMilliToDate(ctx.getContextAsTime(windowNo, "DateOrdered"));\n        var billDate = ctx.getContext("DateOrdered");\n        this.log.fine("Bill Date=" + billDate);\n        //DateTime shipDate = CommonFunctions.CovertMilliToDate(ctx.getContextAsTime(windowNo, "DatePromised"));\n        var shipDate = ctx.getContext("DatePromised");\n        this.log.fine("Ship Date=" + shipDate);\n        var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n        this.log.fine("Org=" + AD_Org_ID);\n        var M_Warehouse_ID = ctx.getContextAsInt(windowNo, "M_Warehouse_ID");\n        this.log.fine("Warehouse=" + M_Warehouse_ID);\n        var billC_BPartner_Location_ID = ctx.getContextAsInt(windowNo, "Bill_Location_ID");\n        if (billC_BPartner_Location_ID == 0) billC_BPartner_Location_ID = shipC_BPartner_Location_ID;\n        this.log.fine("Bill BP_Location=" + billC_BPartner_Location_ID);\n        //var C_Tax_ID = VAdvantage.Model.Tax.get(ctx, M_Product_ID, C_Charge_ID, billDate, shipDate,\n        //    AD_Org_ID, M_Warehouse_ID, billC_BPartner_Location_ID, shipC_BPartner_Location_ID,\n        //    "Y" == (ctx.getContext("IsSOTrx")));\n        var isSotTrx = "Y" == ctx.getWindowContext(windowNo, "IsSOTrx", true);\n        var paramString = M_Product_ID.toString() + "," + C_Charge_ID.toString() + "," + billDate.toString() + "," + shipDate.toString() + "," + AD_Org_ID.toString() + "," + M_Warehouse_ID.toString() + "," + billC_BPartner_Location_ID.toString() + "," + shipC_BPartner_Location_ID.toString() + "," + isSotTrx.toString();\n        var C_Tax_ID = VIS.dataContext.getJSONRecord("MTax/Get_Tax_ID", paramString);\n        this.log.info("Tax ID=" + C_Tax_ID);\n        //\n        if (C_Tax_ID == 0) {\n          //mTab.fireDataStatusEEvent(CLogger.retrieveError());\n          // VIS.ADialog.info(VLogger.RetrieveError().toString(), true, "", "");\n        } else {\n          mTab.setValue("C_Tax_ID", Util.getValueOfInt(C_Tax_ID));\n          if (mTab.findColumn("C_TaxExemptReason_ID") > -1 && mTab.findColumn("IsTaxExempt") > -1) {\n            //1052-set Tax Exempt and Tax Exempt Reason ID \n            var recDic = VIS.dataContext.getJSONRecord("MTax/GetTaxExempt", C_Tax_ID);\n            if (recDic != null) {\n              mTab.setValue("C_TaxExemptReason_ID", Util.getValueOfInt(recDic["C_TaxExemptReason_ID"]));\n              mTab.setValue("IsTaxExempt", Util.getValueOfString(recDic["IsTaxExempt"]).equals("Y") ? true : false);\n            }\n          }\n        }\n        //\n        if (steps) {\n          this.log.warning("fini");\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    oldValue = null;\n    return this.Amt(ctx, windowNo, mTab, mField, value);\n  };\n\n  /// <summary>\n  /// Order Line - Amount.\n  /// - called from QtyOrdered, Discount and PriceActual\n  /// - calculates Discount or Actual Amount\n  /// - calculates LineNetAmt\n  /// - enforces PriceLimit\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutOrder.prototype.Amt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //////////;\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    console.log("Before Charge Or Product");\n    if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) == 0 && Util.getValueOfInt(mTab.getValue("M_Product_ID")) == 0) {\n      return "";\n    }\n    console.log("After Charge Or Product");\n    this.setCalloutActive(true);\n    try {\n      if (steps) {\n        this.log.Warning("init");\n      }\n      var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n      var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n      var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n      var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      var isBlanketOrderLine = Util.getValueOfInt(mTab.getValue("C_OrderLine_Blanket_ID")) > 0 ? true : false;\n      var isQuotationOrderLine = Util.getValueOfInt(mTab.getValue("C_Quotation_Line_ID")) > 0 ? true : false;\n\n      // if order line having sales quotation ID then set isBlanketOrderLine AS TRUE\n      if (isQuotationOrderLine) {\n        isBlanketOrderLine = isQuotationOrderLine;\n      }\n\n      // JID_1362: when qty delivered / invoiced > 0, then priace acual and entererd not change\n      var isReactivation = Util.getValueOfDecimal(mTab.getValue("QtyDelivered")) > 0 ? true : false;\n      if (!isReactivation) {\n        isReactivation = Util.getValueOfDecimal(mTab.getValue("QtyInvoiced")) > 0 ? true : false;\n      }\n\n      //Get product price information\n      var dr;\n      dr = VIS.dataContext.getJSONRecord("MPriceList/GetPriceList", M_PriceList_ID.toString());\n      var StdPrecision = 2;\n      var PriceListPrecision = 2;\n      var epl = "Y";\n      var IsTaxIncluded = "N";\n      if (dr != null) {\n        StdPrecision = Util.getValueOfInt(dr["StdPrecision"]);\n        PriceListPrecision = Util.getValueOfInt(dr["PriceListPrecision"]);\n        epl = Util.getValueOfString(dr["EnforcePriceLimit"]);\n        IsTaxIncluded = Util.getValueOfString(dr["IsTaxIncluded"]);\n      }\n      var QtyEntered, QtyOrdered, PriceEntered, PriceActual, PriceLimit, Discount, PriceList, DiscountSchema, DiscountApplied;\n      //\tget values\n      QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n      QtyOrdered = Util.getValueOfDecimal(mTab.getValue("QtyOrdered"));\n      this.log.fine("QtyEntered=" + QtyEntered + ", Ordered=" + QtyOrdered + ", UOM=" + C_UOM_To_ID);\n      //\n      PriceEntered = Util.getValueOfDecimal(mTab.getValue("PriceEntered"));\n      PriceActual = Util.getValueOfDecimal(mTab.getValue("PriceActual"));\n\n      // VIS0060: DevOPs ID 2587 - On Change of quantity, price should be fetched based on discount schema.\n      DiscountApplied = Util.getValueOfBoolean(mTab.getValue("VAS_IsDiscountApplied"));\n      Discount = Util.getValueOfDecimal(mTab.getValue("Discount"));\n      PriceLimit = Util.getValueOfDecimal(mTab.getValue("PriceLimit"));\n      PriceList = Util.getValueOfDecimal(mTab.getValue("PriceList"));\n      this.log.fine("PriceList=" + PriceList + ", Limit=" + PriceLimit + ", Precision=" + PriceListPrecision);\n      this.log.fine("PriceEntered=" + PriceEntered + ", Actual=" + PriceActual + ", Discount=" + Discount);\n      var C_BPartner_ID1 = ctx.getContextAsInt(windowNo, "C_BPartner_ID", false);\n\n      //Start Amit UOM\n      if (mField.getColumnName() == "QtyEntered") {\n        if (Util.getValueOfInt(mTab.getValue("Orig_OrderLine_ID")) <= 0) {\n          // SI_0605: not to update price when blanket order line exist\n          // JID_1362: when qty delivered / invoiced > 0, then priace acual and entererd not change\n          //if (!isBlanketOrderLine && !isReactivation) {\n          //    /** Price List - ValidFrom date validation ** Dt:11/03/2021 ** Modified By: Kumar **/\n          //    var params = M_Product_ID.toString().concat(",", Util.getValueOfString(mTab.getValue("C_Order_ID")) +\n          //        "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) +\n          //        "," + Util.getValueOfString(mTab.getValue("C_UOM_ID")) + "," + ctx.getAD_Client_ID().toString() + "," + Util.getValueOfString(C_BPartner_ID1) +\n          //        "," + Util.getValueOfString(mTab.getValue("QtyEntered")) + "," + Util.getValueOfString(mTab.getValue("StartDate")) +\n          //        "," + Util.getValueOfString(mTab.getValue("M_PriceList_ID")));\n          //    var prices = VIS.dataContext.getJSONRecord("MOrderLine/GetPrices", params);\n\n          //    PriceList = Util.getValueOfDecimal(prices["PriceList"]);\n          //    mTab.setValue("PriceList", Util.getValueOfDecimal(prices["PriceList"]));\n          //    PriceEntered = Util.getValueOfDecimal(prices["PriceEntered"]);\n          //    mTab.setValue("PriceEntered", Util.getValueOfDecimal(prices["PriceEntered"]));\n          //    PriceActual = Util.getValueOfDecimal(prices["PriceEntered"]);\n          //    mTab.setValue("PriceActual", PriceActual);\n          //}\n        }\n      }\n\n      //\tQty changed - recalc price\n      if ((mField.getColumnName() == "QtyOrdered" || mField.getColumnName() == "QtyEntered" || mField.getColumnName() == "M_Product_ID") && !("N" == ctx.getContext("DiscountSchema"))) {\n        //var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n        //if (mField.getColumnName() == "QtyEntered") {\n        //    var paramString = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString() + "," + QtyEntered.toString());\n        //    var dr = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductTo", paramString);\n        //    QtyOrdered = dr;\n        //}\n\n        if (QtyOrdered == null) QtyOrdered = QtyEntered;\n        // Added by Bharat on 29 August 2017 to handle the case of Return\n        if (Util.getValueOfInt(mTab.getValue("Orig_OrderLine_ID")) <= 0) {\n          //var orderDate = mTab.getValue("DateOrdered");\n          //var paramStr = M_Product_ID.toString().concat(",", C_BPartner_ID.toString(), ",", //2\n          //    QtyOrdered.toString(), ",", //3\n          //    isSOTrx, ",", //4 \n          //    M_PriceList_ID.toString(), ",", //5\n          //    "0,", //6\n          //    orderDate.toString(), ",", null, ",", null, ",",  //7\n          //    C_UOM_To_ID, ",", 1);\n\n          ////Get product price information\n          //var pp = null;\n          //pp = VIS.dataContext.getJSONRecord("MProductPricing/GetProductPricing", paramStr);\n          //var stdPrice = pp.PriceStd;\n\n          var C_BPartner_ID1 = ctx.getContextAsInt(windowNo, "C_BPartner_ID", false);\n\n          // SI_0605: not to update price when blanket order line exist\n          // JID_1362: when qty delivered / invoiced > 0, then priace acual and entererd not change\n          if (!isBlanketOrderLine && !isReactivation) {\n            var params = M_Product_ID.toString().concat(",", mTab.getValue("C_Order_ID").toString() + "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) + "," + Util.getValueOfString(mTab.getValue("C_UOM_ID")) + "," + ctx.getAD_Client_ID().toString() + "," + C_BPartner_ID1.toString() + "," + mTab.getValue("QtyEntered").toString() + "," + isSOTrx + "," + 1 + "," + 1);\n            var prices = VIS.dataContext.getJSONRecord("MOrderLine/GetPricesOnChange", params);\n            DiscountSchema = Util.getValueOfString(prices["DiscountSchema"]);\n\n            // VIS0060: DevOPs ID 2587 - On Change of quantity, price should be fetched based on discount schema.\n            if (mField.getColumnName() == "M_Product_ID" || (Util.getValueOfString(prices["DiscountCalculate"]) == "Y" || DiscountApplied) && Util.getValueOfDecimal(prices["PriceEntered"]) != 0 || Util.getValueOfDecimal(prices["PriceEntered"]) != 0 && mTab.getValue("PriceEntered") == 0) {\n              mTab.setValue("VAS_IsDiscountApplied", Util.getValueOfString(prices["DiscountCalculate"]).equals("Y"));\n              PriceList = Util.getValueOfDecimal(prices["PriceList"]);\n              mTab.setValue("PriceList", Util.getValueOfDecimal(prices["PriceList"]));\n              PriceEntered = Util.getValueOfDecimal(prices["PriceEntered"].toFixed(PriceListPrecision));\n              mTab.setValue("PriceActual", PriceEntered);\n              mTab.setValue("Discount", (Util.getValueOfDecimal(mTab.getValue("PriceList")) - PriceEntered) / Util.getValueOfDecimal(mTab.getValue("PriceList")) * 100);\n            }\n          }\n          //if (PriceEntered == null)\n          //    PriceEntered = stdPrice;\n          //\n          this.log.fine("QtyChanged -> PriceActual=" + PriceEntered + ", PriceEntered=" + PriceEntered + ", Discount=" + Discount);\n          PriceActual = Util.getValueOfDecimal(PriceEntered.toFixed(PriceListPrecision));\n\n          // SI_0605: not to update price when blanket order line exist\n          // JID_1362: when qty delivered / invoiced > 0, then priace acual and entererd not change\n          //if (!isBlanketOrderLine && !isReactivation\n          //    && (mField.getColumnName() == "M_Product_ID" || (PriceEntered != 0 && mTab.getValue("PriceEntered") == 0)\n          //    || (Util.getValueOfString(prices["DiscountCalculate"]) == "Y" && PriceEntered != 0))) {\n          //    mTab.setValue("PriceActual", PriceEntered);\n          //    PriceActual = PriceEntered;\n          //    mTab.setValue("Discount", ((Util.getValueOfDecimal(mTab.getValue("PriceList")) - PriceEntered) / Util.getValueOfDecimal(mTab.getValue("PriceList"))) * 100);\n          //}\n\n          mTab.setValue("PriceEntered", PriceEntered);\n          ctx.setContext(windowNo, "DiscountSchema", DiscountSchema);\n        }\n      } else if (mField.getColumnName() == "PriceActual") {\n        PriceActual = Util.getValueOfDecimal(value.toFixed(PriceListPrecision));\n        PriceEntered = PriceActual;\n        this.log.fine("PriceActual=" + PriceActual + " -> PriceEntered=" + PriceEntered);\n        mTab.setValue("PriceEntered", PriceEntered);\n        mTab.setValue("PriceActual", PriceActual);\n        if (PriceList == 0) {\n          PriceList = PriceActual;\n          mTab.setValue("PriceList", PriceList);\n        }\n      } else if (mField.getColumnName() == "PriceEntered") {\n        PriceEntered = Util.getValueOfDecimal(value.toFixed(PriceListPrecision));\n        PriceActual = PriceEntered;\n        this.log.fine("PriceEntered=" + PriceEntered + " -> PriceActual=" + PriceActual);\n        mTab.setValue("PriceActual", PriceActual);\n        mTab.setValue("PriceEntered", PriceEntered);\n      }\n\n      //  Discount entered - Calculate Actual/Entered\n      if (mField.getColumnName() == "Discount") {\n        if (PriceList > 0) {\n          PriceActual = Util.getValueOfDecimal((100.0 - Discount) / 100.0 * PriceList);\n          if (Util.scale(PriceActual) > PriceListPrecision) PriceActual = PriceActual.toFixed(PriceListPrecision);\n          PriceEntered = PriceActual;\n          if (PriceEntered == null) PriceEntered = PriceActual;\n          mTab.setValue("PriceActual", PriceActual);\n          mTab.setValue("PriceEntered", PriceEntered);\n        }\n      }\n      //\tcalculate Discount\n      else {\n        if (PriceList == 0) {\n          Discount = VIS.Env.ZERO;\n        } else {\n          Discount = Util.getValueOfDecimal((PriceList - PriceActual) / PriceList * 100.0);\n          if (isNaN(Discount)) {\n            this.setCalloutActive(false);\n            return "PriceListNotSelected";\n          }\n        }\n        Discount = Util.getValueOfDecimal(Discount.toFixed(PriceListPrecision));\n        mTab.setValue("PriceList", Util.getValueOfDecimal(PriceList.toFixed(PriceListPrecision)));\n\n        // SI_0605: not to update price when blanket order line exist\n        // JID_1362: when qty delivered / invoiced > 0, then priace acual and entererd not change\n        if (!isBlanketOrderLine && !isReactivation) {\n          mTab.setValue("Discount", Discount);\n        }\n      }\n      this.log.fine("PriceEntered=" + PriceEntered + ", Actual=" + PriceActual + ", Discount=" + Discount);\n\n      //\tCheck PriceLimit\n      var OverwritePriceLimit = false;\n      var enforce = isSOTrx && epl != null && epl == "Y";\n      OverwritePriceLimit = VIS.MRole.getDefault().getIsOverwritePriceLimit();\n      var isReturnTrx = "Y" == ctx.getWindowContext(windowNo, "IsReturnTrx", true);\n      if (enforce && (OverwritePriceLimit || isReturnTrx)) enforce = false;\n\n      //\tCheck Price Limit?\n      if (enforce && PriceLimit != 0.0 && PriceActual.compareTo(PriceLimit) < 0) {\n        PriceActual = PriceLimit;\n        PriceEntered = PriceActual;\n        if (PriceEntered == null) PriceEntered = PriceLimit;\n        this.log.fine("(under) PriceEntered=" + PriceEntered + ", Actual" + PriceLimit);\n        // SI_0605: not to update price when blanket order line exist\n        // JID_1362: when qty delivered / invoiced > 0, then priace acual and entererd not change\n        if (!isBlanketOrderLine && !isReactivation) {\n          mTab.setValue("PriceActual", PriceLimit);\n          mTab.setValue("PriceEntered", PriceEntered);\n        }\n        VIS.ADialog.info("UnderLimitPrice", true, "", "");\n        //\tRepeat Discount calc\n        if (PriceList != 0) {\n          Discount = Util.getValueOfDecimal((PriceList - PriceActual) / PriceList * 100.0);\n          Discount = Discount.toFixed(2);\n          // SI_0605: not to update price when blanket order line exist\n          // JID_1362: when qty delivered / invoiced > 0, then priace acual and entererd not change\n          if (!isBlanketOrderLine && !isReactivation) {\n            mTab.setValue("Discount", Discount);\n          }\n        }\n      }\n\n      //\tLine Net Amt\n      // var LineNetAmt = QtyOrdered * PriceActual;\n      PriceEntered = Util.getValueOfDecimal(mTab.getValue("PriceEntered"));\n      var LineNetAmt = QtyEntered * PriceEntered;\n      if (QtyEntered > 0 && LineNetAmt == 0) {\n        //Check if it is RSO/RPO and prices available which are entered through blanket sales order.\n        var BlanketOrderLineID = Util.getValueOfDecimal(mTab.getValue("C_OrderLine_Blanket_ID"));\n        if (BlanketOrderLineID > 0) {\n          dr = VIS.dataContext.getJSONRecord("MOrderLine/GetOrderLine", BlanketOrderLineID.toString());\n          if (dr != null) {\n            var PriceList = Util.getValueOfDouble(dr["PriceList"]);\n            var PriceActual = Util.getValueOfDouble(dr["PriceActual"]);\n            var PriceEntered = Util.getValueOfDouble(dr["PriceEntered"]);\n            var Discount = Util.getValueOfDouble(dr["Discount"]);\n            if (PriceEntered != null) {\n              mTab.setValue("PriceEntered", PriceEntered);\n              mTab.setValue("LineNetAmt", PriceEntered * QtyEntered);\n              LineNetAmt = PriceEntered * QtyEntered;\n            }\n            if (PriceList != null) {\n              mTab.setValue("PriceList", PriceList);\n            }\n            if (Discount != null) {\n              mTab.setValue("Discount", Discount);\n            }\n            if (PriceActual != null) {\n              mTab.setValue("PriceActual", PriceActual);\n            }\n          }\n        }\n      }\n      if (Util.scale(LineNetAmt) > StdPrecision) {\n        //LineNetAmt = Decimal.Round(LineNetAmt, StdPrecision);//, MidpointRounding.AwayFromZero);\n        LineNetAmt = Util.getValueOfDecimal(LineNetAmt.toFixed(StdPrecision));\n      }\n      this.log.info("LineNetAmt=" + LineNetAmt);\n      mTab.setValue("LineNetAmt", LineNetAmt);\n\n      //\tCalculate Tax Amount for PO / SO (JID_1073)\n\n      var taxAmt = VIS.Env.ZERO;\n      if (mField.getColumnName() == "TaxAmt") {\n        taxAmt = mTab.getValue("TaxAmt");\n      } else {\n        var taxID = mTab.getValue("C_Tax_ID");\n        if (taxID != null) {\n          var C_Tax_ID = taxID; //.intValue();\n          /*var IsTaxIncluded = this.IsTaxIncluded(windowNo, ctx);*/\n          var paramString = C_Tax_ID.toString().concat(",", LineNetAmt.toString(), ",",\n          //2\n          IsTaxIncluded == "Y", ",",\n          //3\n          StdPrecision.toString() //4 \n          ); //7          \n          var dr = null;\n          taxAmt = VIS.dataContext.getJSONRecord("MTax/CalculateTax", paramString);\n          mTab.setValue("TaxAmt", taxAmt);\n\n          // Set Surcharge Amount to zero\n          if (mTab.getField("SurchargeAmt") != null) {\n            mTab.setValue("SurchargeAmt", 0);\n          }\n        }\n      }\n      if (IsTaxIncluded == "Y") {\n        mTab.setValue("LineTotalAmt", Util.getValueOfDecimal(LineNetAmt.toFixed(StdPrecision)));\n      } else {\n        mTab.setValue("LineTotalAmt", Util.getValueOfDecimal(LineNetAmt.toFixed(StdPrecision)) + Util.getValueOfDecimal(taxAmt.toFixed(StdPrecision)));\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * \tIs Tax Included\r\n   *\t@param windowNo window no\r\n   *\t@return tax included (default: false)\r\n   */\n  CalloutOrder.prototype.IsTaxIncluded = function (windowNo, ctx) {\n    //  \n\n    //var ctx = Env.getContext();\n    var ss = ctx.getContext("IsTaxIncluded");\n    try {\n      //\tNot Set Yet\n      if (ss.toString().length == 0) {\n        var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n        if (M_PriceList_ID == 0) {\n          return false;\n        }\n        //ss = VIS.DB.executeScalar("SELECT IsTaxIncluded FROM M_PriceList WHERE M_PriceList_ID=" + M_PriceList_ID, null, null).toString();\n\n        ss = VIS.dataContext.getJSONRecord("MPriceList/GetTaxIncluded", M_PriceList_ID.toString());\n        if (ss == null) {\n          ss = "N";\n        }\n        ctx.setContext(windowNo, "IsTaxIncluded", ss);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "Y" == ss;\n  };\n\n  /**\r\n   * \tCalculate Discout based on Discount Schema selected on Business Partner\r\n   *\t@param ProductId Product ID\r\n   *\t@param ClientId Tenant\r\n   *\t@param amount Amount on which discount is to be calculated\r\n   *\t@param DiscountSchemaId Discount Schema of Business Partner\r\n   *\t@param FlatDiscount Flat Discount % on Business Partner\r\n   *\t@param QtyEntered Quantity on which discount is to be calculated\r\n   *\t@return Discount value\r\n   */\n  //CalloutOrder.prototype.FlatDiscount = function (ProductId, ClientId, amount, DiscountSchemaId, FlatDiscount, QtyEntered) {\n  //    var amountAfterBreak = amount;\n  //    var sql = "SELECT UNIQUE M_Product_Category_ID FROM M_Product WHERE IsActive=\'Y\' AND M_Product_ID = " + ProductId;\n  //    var productCategoryId = Util.getValueOfInt(VIS.DB.executeScalar(sql));\n  //    var isCalulate = false;\n  //    var dsDiscountBreak = null;\n  //    var discountType = "";\n  //    // Is flat Discount\n  //    // JID_0487: Not considering Business Partner Flat Discout Checkbox value while calculating the Discount\n  //    sql = "SELECT  DiscountType, IsBPartnerFlatDiscount, FlatDiscount FROM M_DiscountSchema WHERE "\n  //              + "M_DiscountSchema_ID = " + DiscountSchemaId + " AND IsActive=\'Y\'  AND AD_Client_ID=" + ClientId;\n  //    dsDiscountBreak = VIS.DB.executeDataSet(sql);\n\n  //    if (dsDiscountBreak != null && dsDiscountBreak.getTables().length > 0) {\n  //        discountType = Util.getValueOfString(dsDiscountBreak.getTables()[0].getRows()[0].getCell("DiscountType"));\n  //        if (discountType == "F") {\n  //            var discountBreakValue = 0;\n  //            isCalulate = true;\n  //            if (Util.getValueOfString(dsDiscountBreak.getTables()[0].getRows()[0].getCell("IsBPartnerFlatDiscount")) == "N") {\n  //                discountBreakValue = (amount - ((amount * Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[0].getCell("FlatDiscount"))) / 100));\n  //            }\n  //            else {\n  //                discountBreakValue = (amount - ((amount * FlatDiscount) / 100));\n  //            }\n  //            amountAfterBreak = discountBreakValue;\n  //            return amountAfterBreak;\n  //        }\n\n  //        else if (discountType == "B") {\n\n  //            // Product Based\n  //            sql = "SELECT M_Product_Category_ID , M_Product_ID , BreakValue , IsBPartnerFlatDiscount , BreakDiscount FROM M_DiscountSchemaBreak WHERE "\n  //                       + "M_DiscountSchema_ID = " + DiscountSchemaId + " AND M_Product_ID = " + ProductId\n  //                       + " AND IsActive=\'Y\'  AND AD_Client_ID=" + ClientId + "Order BY BreakValue DESC";\n  //            dsDiscountBreak = VIS.DB.executeDataSet(sql);\n  //            if (dsDiscountBreak.getTables().length > 0) {\n  //                var m = 0;\n  //                var discountBreakValue = 0;\n\n  //                for (m = 0; m < dsDiscountBreak.getTables()[0].getRows().length; m++) {\n  //                    if (QtyEntered < Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakValue"))) {\n  //                        continue;\n  //                    }\n  //                    if (Util.getValueOfString(dsDiscountBreak.getTables()[0].getRows()[m].getCell("IsBPartnerFlatDiscount")) == "N") {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - (amount * Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakDiscount")) / 100));\n  //                        break;\n  //                    }\n  //                    else {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - ((amount * FlatDiscount) / 100));\n  //                        break;\n  //                    }\n  //                }\n  //                if (isCalulate) {\n  //                    amountAfterBreak = discountBreakValue;\n  //                    return amountAfterBreak;\n  //                }\n  //            }\n  //            //\n\n  //            // Product Category Based\n  //            sql = "SELECT M_Product_Category_ID , M_Product_ID , BreakValue , IsBPartnerFlatDiscount , BreakDiscount FROM M_DiscountSchemaBreak WHERE "\n  //                       + " M_DiscountSchema_ID = " + DiscountSchemaId + " AND M_Product_Category_ID = " + productCategoryId\n  //                       + " AND IsActive=\'Y\'  AND AD_Client_ID=" + ClientId + "Order BY BreakValue DESC";\n  //            dsDiscountBreak = VIS.DB.executeDataSet(sql);\n  //            if (dsDiscountBreak.getTables().length > 0) {\n  //                var m = 0;\n  //                var discountBreakValue = 0;\n\n  //                for (m = 0; m < dsDiscountBreak.getTables()[0].getRows().length; m++) {\n  //                    if (QtyEntered < Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakValue"))) {\n  //                        continue;\n  //                    }\n  //                    if (Util.getValueOfString(dsDiscountBreak.getTables()[0].getRows()[m].getCell("IsBPartnerFlatDiscount")) == "N") {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - (amount * Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakDiscount")) / 100));\n  //                        break;\n  //                    }\n  //                    else {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - ((amount * FlatDiscount) / 100));\n  //                        break;\n  //                    }\n  //                }\n  //                if (isCalulate) {\n  //                    amountAfterBreak = discountBreakValue;\n  //                    return amountAfterBreak;\n  //                }\n  //            }\n  //            //\n\n  //            // Otherwise\n  //            sql = "SELECT M_Product_Category_ID , M_Product_ID , BreakValue , IsBPartnerFlatDiscount , BreakDiscount FROM M_DiscountSchemaBreak WHERE "\n  //                       + " M_DiscountSchema_ID = " + DiscountSchemaId + " AND M_Product_Category_ID IS NULL AND m_product_id IS NULL "\n  //                       + " AND IsActive=\'Y\'  AND AD_Client_ID=" + ClientId + "Order BY BreakValue DESC";\n  //            dsDiscountBreak = VIS.DB.executeDataSet(sql);\n  //            if (dsDiscountBreak.getTables().length > 0) {\n  //                var m = 0;\n  //                var discountBreakValue = 0;\n\n  //                for (m = 0; m < dsDiscountBreak.getTables()[0].getRows().length; m++) {\n  //                    if (QtyEntered < Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakValue"))) {\n  //                        continue;\n  //                    }\n  //                    if (Util.getValueOfString(dsDiscountBreak.getTables()[0].getRows()[m].getCell("IsBPartnerFlatDiscount")) == "N") {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - (amount * Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakDiscount")) / 100));\n  //                        break;\n  //                    }\n  //                    else {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - ((amount * FlatDiscount) / 100));\n  //                        break;\n  //                    }\n  //                }\n  //                if (isCalulate) {\n  //                    amountAfterBreak = discountBreakValue;\n  //                    return amountAfterBreak;\n  //                }\n  //            }\n  //        }\n  //    }\n\n  //    return amountAfterBreak;\n  //};\n\n  /// <summary>\n  /// Order Line - Quantity.\n  /// - called from C_UOM_ID, QtyEntered, QtyOrdered\n  /// - enforces qty UOM relationship\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutOrder.prototype.Qty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var paramStr = ""; //user for send and parameter value to controller Action\n    //var U=Util;\n    if (this.isCalloutActive() || value == null || value.toString() == "") return "";\n    console.log("Before Charge Or Product");\n    if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) == 0 && Util.getValueOfInt(mTab.getValue("M_Product_ID")) == 0) {\n      return "";\n    }\n    console.log("After Charge Or Product");\n    this.setCalloutActive(true);\n    try {\n      var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n      if (steps) {\n        this.log.Warning("init - M_Product_ID=" + M_Product_ID + " - ");\n      }\n      var QtyOrdered = VIS.Env.ZERO;\n      var QtyEntered = VIS.Env.ZERO;\n      var QtyEstimation = VIS.Env.ZERO;\n      var PriceActual, PriceEntered;\n      var PriceListPrecision = 2;\n\n      // Check for RMA\n      var isReturnTrx = "Y" == ctx.getContext("IsReturnTrx");\n      var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      var isBlanketOrderLine = Util.getValueOfInt(mTab.getValue("C_OrderLine_Blanket_ID")) > 0 ? true : false;\n      var isQuotationOrderLine = Util.getValueOfInt(mTab.getValue("C_Quotation_Line_ID")) > 0 ? true : false;\n      // if order line having sales quotation ID then set isBlanketOrderLine AS TRUE\n      if (isQuotationOrderLine) {\n        isBlanketOrderLine = isQuotationOrderLine;\n      }\n      var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID", false);\n      //var bpartner = VIS.dataContext.getJSONRecord("MBPartner/GetBPartner", C_BPartner_ID.toString());\n      //var prodC_UOM_ID = VIS.dataContext.getJSONRecord("MProduct/GetC_UOM_ID", M_Product_ID.toString());\n      //\tNo Product\n      if (M_Product_ID == 0) {\n        QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n        QtyOrdered = QtyEntered;\n        mTab.setValue("QtyOrdered", QtyOrdered);\n      }\n      //\tUOM Changed - convert from Entered -> Product\n      else if (mField.getColumnName() == "C_UOM_ID" || mField.getColumnName() == "M_AttributeSetInstance_ID" || mField.getColumnName() == "StartDate" || mField.getColumnName() == "VAS_ContractLine_ID") {\n        var C_UOM_To_ID = Util.getValueOfInt(mTab.getValue("C_UOM_ID"));\n        QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n\n        //var params = Util.getValueOfString(C_BPartner_ID).concat(",", Util.getValueOfString(mTab.getValue("C_Order_ID")) +\n        //    "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) +\n        //    "," + Util.getValueOfString(C_UOM_To_ID) + "," + Util.getValueOfString(ctx.getAD_Client_ID()) +\n        //    "," + Util.getValueOfString(mTab.getValue("M_Product_ID")) + "," + Util.getValueOfString(mTab.getValue("QtyEntered")) +\n        //    "," + Util.getValueOfString(mTab.getValue("StartDate")) + "," + Util.getValueOfString(mTab.getValue("M_PriceList_ID")));\n        //var productPrices = VIS.dataContext.getJSONRecord("MOrderLine/GetProductPriceOnUomChange", params);\n\n        //countEd011 = Util.getValueOfInt(productPrices["countEd011"]);\n\n        var params = M_Product_ID.toString().concat(",", Util.getValueOfString(mTab.getValue("C_Order_ID")) + "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) + "," + Util.getValueOfString(mTab.getValue("C_UOM_ID")) + "," + ctx.getAD_Client_ID().toString() + "," + Util.getValueOfString(C_BPartner_ID) + "," + QtyEntered.toString() + "," + isSOTrx + "," + 1 + "," + 1);\n        var productPrices = VIS.dataContext.getJSONRecord("MOrderLine/GetPricesOnChange", params);\n        if (!isBlanketOrderLine) {\n          PriceListPrecision = Util.getValueOfInt(productPrices["PriceListPrecision"]);\n          mTab.setValue("PriceList", Util.getValueOfDecimal(productPrices["PriceList"].toFixed(PriceListPrecision)));\n          mTab.setValue("PriceLimit", Util.getValueOfDecimal(productPrices["PriceLimit"].toFixed(PriceListPrecision)));\n          mTab.setValue("PriceActual", Util.getValueOfDecimal(productPrices["PriceEntered"].toFixed(PriceListPrecision)));\n          mTab.setValue("PriceEntered", Util.getValueOfDecimal(productPrices["PriceEntered"].toFixed(PriceListPrecision)));\n        }\n        var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(productPrices["UOMPrecision"]));\n        if (QtyEntered != QtyEntered1) {\n          this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n          QtyEntered = QtyEntered1;\n          mTab.setValue("QtyEntered", QtyEntered);\n        }\n        QtyOrdered = productPrices["QtyOrdered"];\n        if (QtyOrdered == null) {\n          QtyOrdered = QtyEntered;\n        }\n        mTab.setValue("QtyOrdered", QtyOrdered);\n\n        //if (countEd011 > 0) {\n        //    var isAttributeValue = Util.getValueOfInt(productPrices["isAttributeValue"]);\n        //    if (isAttributeValue == 1) {\n\n        //        var actualPrice1 = Util.getValueOfDecimal(productPrices["PriceEntered"]);\n        //        // SI_0605: not to update price when blanket order line exist\n        //        if (!isBlanketOrderLine) {\n        //            mTab.setValue("PriceList", Util.getValueOfDecimal(productPrices["PriceList"]));\n        //            mTab.setValue("PriceLimit", Util.getValueOfDecimal(productPrices["PriceLimit"]));\n        //            mTab.setValue("PriceActual", Util.getValueOfDecimal(productPrices["PriceEntered"]));\n        //            mTab.setValue("PriceEntered", Util.getValueOfDecimal(productPrices["PriceEntered"]));\n        //        }\n\n        //        //Get precision from server side\n        //        paramStr = C_UOM_To_ID.toString().concat(",");\n        //        var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n\n        //        var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp));\n\n        //        if (QtyEntered != QtyEntered1) {\n        //            this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID\n        //                + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n        //            QtyEntered = QtyEntered1;\n        //            mTab.setValue("QtyEntered", QtyEntered);\n        //        }\n\n        //        //Conversion of Qty Ordered\n        //        paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ","\n        //            , QtyEntered.toString());\n        //        var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n        //        QtyOrdered = pc;\n\n        //        var conversion = false\n        //        if (QtyOrdered != null) {\n        //            conversion = QtyEntered != QtyOrdered;\n        //        }\n        //        if (QtyOrdered == null) {\n        //            conversion = false;\n        //            QtyOrdered = 1;\n        //        }\n        //        if (conversion) {\n        //            mTab.setValue("QtyOrdered", QtyOrdered);\n        //        }\n        //        else {\n        //            //mTab.setValue("QtyOrdered", Decimal.Multiply(QtyOrdered, QtyEntered1));\n        //            mTab.setValue("QtyOrdered", (QtyOrdered * QtyEntered1));\n        //        }\n\n        //        // SI_0605: not to update price when blanket order line exist\n        //        if (!isBlanketOrderLine) {\n        //            mTab.setValue("PriceActual", actualPrice1);\n        //            //mTab.setValue("PriceList", Util.getValueOfDecimal(ds.getTables()[0].getRows()[0].getCell("PriceList")));\n        //            mTab.setValue("PriceList", Util.getValueOfDecimal(productPrices["PriceList"]));\n        //        }\n        //        // End Pick Price based on attribute and seleceted UOM\n        //    }\n        //    //else if (isAttributeValue == false) {\n        //    else if (isAttributeValue == 2 || isAttributeValue == 0) {\n        //        if (isAttributeValue == 2) {\n        //            var actualPrice2 = Util.getValueOfDecimal(productPrices["PriceEntered"]);\n        //            // SI_0605: not to update price when blanket order line exist\n        //            if (!isBlanketOrderLine) {\n        //                mTab.setValue("PriceList", Util.getValueOfDecimal(productPrices["PriceList"]));\n        //                mTab.setValue("PriceLimit", Util.getValueOfDecimal(productPrices["PriceLimit"]));\n        //                mTab.setValue("PriceActual", Util.getValueOfDecimal(productPrices["PriceEntered"]));\n        //                mTab.setValue("PriceEntered", Util.getValueOfDecimal(productPrices["PriceEntered"]));\n        //            }\n\n        //            //Get precision from server side\n        //            paramStr = C_UOM_To_ID.toString().concat(",");\n        //            var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n\n        //            var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp));\n\n        //            if (QtyEntered != QtyEntered1) {\n        //                this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID\n        //                    + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n        //                QtyEntered = QtyEntered1;\n        //                mTab.setValue("QtyEntered", QtyEntered);\n        //            }\n\n        //            //Conversion of Qty Ordered\n        //            paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ","\n        //                , QtyEntered.toString());\n        //            var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n        //            QtyOrdered = pc;\n\n        //            var conversion = false\n        //            if (QtyOrdered != null) {\n        //                conversion = QtyEntered != QtyOrdered;\n        //            }\n        //            if (QtyOrdered == null) {\n        //                conversion = false;\n        //                QtyOrdered = 1;\n        //            }\n        //            if (conversion) {\n        //                mTab.setValue("QtyOrdered", QtyOrdered);\n        //            }\n        //            else {\n        //                mTab.setValue("QtyOrdered", (QtyOrdered * QtyEntered1));\n        //            }\n\n        //            // SI_0605: not to update price when blanket order line exist\n        //            if (!isBlanketOrderLine) {\n        //                mTab.setValue("PriceActual", actualPrice2);\n        //                //mTab.setValue("PriceList", Util.getValueOfDecimal(ds.getTables()[0].getRows()[0].getCell("PriceList")));\n        //                mTab.setValue("PriceList", Util.getValueOfDecimal(productPrices["PriceList"]));\n        //            }\n        //            // End Pick Price of selected UOM\n        //        }\n        //        else {\n        //            //start Conversion based on product header UOM\n        //            paramStr = C_UOM_To_ID.toString().concat(",");\n        //            var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n\n        //            var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp));\n\n        //            if (QtyEntered != QtyEntered1) {\n        //                this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID\n        //                    + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n        //                QtyEntered = QtyEntered1;\n        //                mTab.setValue("QtyEntered", QtyEntered);\n        //            }\n\n        //            //Conversion of Qty Ordered\n        //            paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ","\n        //                , QtyEntered.toString());\n        //            var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n        //            QtyOrdered = pc;\n        //            if (QtyOrdered == null)\n        //                QtyOrdered = QtyEntered;\n        //            var conversion = QtyEntered != QtyOrdered;\n\n        //            PriceActual = Util.getValueOfDecimal(mTab.getValue("PriceEntered"));\n        //            //Conversion of Price Entered\n        //            paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", //2\n        //                PriceActual.toString()); //3\n        //            var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n\n        //            PriceEntered = pc;\n        //            if (PriceEntered == null)\n        //                PriceEntered = PriceActual;\n        //            this.log.fine("UOM=" + C_UOM_To_ID\n        //                + ", QtyEntered/PriceActual=" + QtyEntered + "/" + PriceActual\n        //                + " -> " + conversion\n        //                + " QtyOrdered/PriceEntered=" + QtyOrdered + "/" + PriceEntered);\n        //            ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        //            mTab.setValue("QtyOrdered", QtyOrdered);\n        //            mTab.setValue("PriceEntered", PriceEntered);\n\n        //            var pricelist = 0;\n        //            var pricestd = 0;\n\n        //            // SI_0605: not to update price when blanket order line exist\n        //            if (!isBlanketOrderLine) {\n        //                /** Price List - ValidFrom date validation ** Dt:11/03/2021 ** Modified By: Kumar **/\n        //                //change by amit 6-june-2016\n        //                var params = Util.getValueOfString(M_Product_ID).concat(",", Util.getValueOfString(mTab.getValue("C_Order_ID")) + "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) +\n        //                    "," + Util.getValueOfString(C_UOM_To_ID) + "," + Util.getValueOfString(ctx.getAD_Client_ID()) + "," + Util.getValueOfString(bpartner["M_DiscountSchema_ID"]) +\n        //                    "," + Util.getValueOfString(bpartner["FlatDiscount"]) + "," + Util.getValueOfString(mTab.getValue("QtyEntered")) + "," + Util.getValueOfString(prodC_UOM_ID));\n        //                var prices = VIS.dataContext.getJSONRecord("MOrderLine/GetPricesOnUomChange", params);\n\n        //                PriceList = Util.getValueOfDecimal(prices["PriceList"]);\n        //                mTab.setValue("PriceList", Util.getValueOfDecimal(prices["PriceList"]));\n        //                PriceEntered = Util.getValueOfDecimal(prices["PriceEntered"]);\n        //                mTab.setValue("PriceEntered", Util.getValueOfDecimal(prices["PriceEntered"]));\n        //                PriceActual = Util.getValueOfDecimal(prices["PriceEntered"]);\n        //                mTab.setValue("PriceActual", PriceActual);\n        //            }\n        //            //end Conversion based on product header UOM\n        //        }\n        //        //}\n        //        //}\n        //    }\n        //}\n      }\n      //\tQtyEntered changed - calculate QtyOrdered\n      else if (mField.getColumnName() == "QtyEntered") {\n        var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n        QtyEntered = Util.getValueOfDecimal(value);\n\n        //Get precision from server\n        paramStr = C_UOM_To_ID.toString().concat(","); //1\n        var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n\n        //var QtyEntered1 = Decimal.Round(QtyEntered.Value, MUOM.getPrecision(ctx, C_UOM_To_ID));//, MidpointRounding.AwayFromZero);\n        var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp)); //, MidpointRounding.AwayFromZero);\n\n        if (QtyEntered != QtyEntered1) {\n          this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n          QtyEntered = QtyEntered1;\n          mTab.setValue("QtyEntered", QtyEntered);\n        }\n        paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",",\n        //2\n\n        QtyEntered.toString()); //3\n        var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n        QtyOrdered = pc; //(Decimal?)MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n        //C_UOM_To_ID, QtyEntered.Value);\n        if (QtyOrdered == null) QtyOrdered = QtyEntered;\n\n        //var conversion = QtyEntered.Value.compareTo(QtyOrdered.Value) != 0;\n        var conversion = QtyEntered != QtyOrdered;\n        this.log.fine("UOM=" + C_UOM_To_ID + ", QtyEntered=" + QtyEntered + " -> " + conversion + " QtyOrdered=" + QtyOrdered);\n        ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        mTab.setValue("QtyOrdered", QtyOrdered);\n      }\n      //\tQtyOrdered changed - calculate QtyEntered (should not happen)\n      else if (mField.getColumnName() == "QtyOrdered") {\n        var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n        QtyOrdered = Util.getValueOfDecimal(value);\n        paramStr = M_Product_ID.toString().concat(","); //1\n        var gp = VIS.dataContext.getJSONRecord("MProduct/GetUOMPrecision", paramStr);\n        var precision = gp; //MProduct.get(ctx, M_Product_ID).getUOMPrecision();\n\n        var QtyOrdered1 = QtyOrdered.toFixed(precision);\n        if (QtyOrdered != QtyOrdered1) {\n          this.log.fine("Corrected QtyOrdered Scale " + QtyOrdered + "->" + QtyOrdered1);\n          QtyOrdered = QtyOrdered1;\n          mTab.setValue("QtyOrdered", QtyOrdered);\n        }\n        paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",",\n        //2\n        QtyOrdered.toString()); //3\n\n        var pt = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductTo", paramStr);\n        QtyEntered = pt; //(Decimal?)MUOMConversion.ConvertProductTo(ctx, M_Product_ID,\n        //C_UOM_To_ID, QtyOrdered);\n        if (QtyEntered == null) QtyEntered = QtyOrdered;\n        var conversion = QtyOrdered != QtyEntered;\n        this.log.fine("UOM=" + C_UOM_To_ID + ", QtyOrdered=" + QtyOrdered + " -> " + conversion + " QtyEntered=" + QtyEntered);\n        ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        mTab.setValue("QtyEntered", QtyEntered);\n      } else {\n        //\tQtyEntered = (Decimal)mTab.getValue("QtyEntered");\n        QtyOrdered = Util.getValueOfDecimal(mTab.getValue("QtyOrdered"));\n      }\n      if (M_Product_ID != 0 && isReturnTrx) {\n        var inOutLine_ID = Util.getValueOfInt(mTab.getValue("Orig_InOutLine_ID"));\n        if (inOutLine_ID != 0) {\n          paramStr = inOutLine_ID.toString();\n          var dr = VIS.dataContext.getJSONRecord("MInOutLine/GetMInOutLine", paramStr);\n          var mq = dr["MovementQty"];\n          var shippedQty = Util.getValueOfDecimal(mq);\n          QtyOrdered = Util.getValueOfDecimal(mTab.getValue("QtyOrdered"));\n          if (shippedQty < QtyOrdered) {\n            if (ctx.isSOTrx(windowNo)) {\n              //mTab.fireDataStatusEEvent("QtyShippedLessThanQtyReturned", shippedQty.toString(), false);\n              VIS.ADialog.info("QtyShippedAndReturned", null, shippedQty.toString(), "");\n            } else {\n              // mTab.fireDataStatusEEvent("QtyReceivedLessThanQtyReturned", shippedQty.toString(), false);\n              VIS.ADialog.info("QtyRecievedAndReturnd", null, shippedQty.toString(), "");\n            }\n            mTab.setValue("QtyOrdered", shippedQty);\n            QtyOrdered = shippedQty;\n            var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n            paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",",\n            //2\n            QtyOrdered.toString()); //3\n\n            QtyEntered = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductTo", paramStr);\n            // QtyEntered = pt.retValue;//(Decimal?)MUOMConversion.ConvertProductTo(ctx, M_Product_ID,\n            //C_UOM_To_ID, QtyOrdered);\n            if (QtyEntered == null) QtyEntered = QtyOrdered;\n            mTab.setValue("QtyEntered", QtyEntered);\n            this.log.fine("QtyEntered : " + QtyEntered.toString() + "QtyOrdered : " + QtyOrdered.toString());\n          }\n        }\n      }\n\n      //Start Amit (Attribute selection then get price according to attribute n uom)  (Purchase side only)\n      //if (M_Product_ID != 0\n      //    && QtyOrdered > 0\n      //    && !isReturnTrx\t\t//\tno negative (returns)\n      //    && (mField.getColumnName() == "M_AttributeSetInstance_ID")) {\n      //    QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n      //    var pricelist = 0;\n      //var params = M_Product_ID.toString().concat(",", Util.getValueOfString(mTab.getValue("C_Order_ID")) +\n      //    "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) +\n      //    "," + Util.getValueOfString(mTab.getValue("C_UOM_ID")) + "," + ctx.getAD_Client_ID().toString() + "," + Util.getValueOfString(C_BPartner_ID) +\n      //    "," + Util.getValueOfString(QtyEntered) + "," + Util.getValueOfString(mTab.getValue("StartDate")) +\n      //    "," + Util.getValueOfString(mTab.getValue("M_PriceList_ID")));\n\n      //var prices = VIS.dataContext.getJSONRecord("MOrderLine/GetPrices", params);\n      //if (prices != null) {\n\n      //    countEd011 = Util.getValueOfInt(prices["countEd011"]);\n      //    var _countVAPRC = Util.getValueOfInt(prices["countVAPRC"]);\n      //    PriceEntered = prices["PriceEntered"];\n      //    pricelist = prices["PriceList"];\n\n      //    if (!isBlanketOrderLine) {\n      //        mTab.setValue("PriceList", pricelist);\n      //        mTab.setValue("PriceActual", PriceEntered);\n      //        mTab.setValue("PriceEntered", PriceEntered);\n      //    }\n\n      //if (!isBlanketOrderLine) {\n      //    /** Price List - ValidFrom date validation ** Dt:11/03/2021 ** Modified By: Kumar **/\n      //    params = M_Product_ID.toString().concat(",", Util.getValueOfString(mTab.getValue("C_Order_ID")) + "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) +\n      //        "," + Util.getValueOfString(mTab.getValue("C_UOM_ID")) + "," + ctx.getAD_Client_ID().toString() + "," + Util.getValueOfString(C_BPartner_ID) +\n      //        "," + Util.getValueOfString(QtyEntered) + "," + Util.getValueOfString(countEd011) + "," + Util.getValueOfString(_countVAPRC) +\n      //        "," + Util.getValueOfString(mTab.getValue("StartDate")) + "," + Util.getValueOfString(mTab.getValue("M_PriceList_ID")));\n\n      //    var prices = VIS.dataContext.getJSONRecord("MOrderLine/GetPricesOnChange", params);\n\n      //    pricelist = Util.getValueOfDecimal(prices["PriceList"]);\n      //    mTab.setValue("PriceList", pricelist);\n      //    PriceEntered = Util.getValueOfDecimal(prices["PriceEntered"]);\n      //    mTab.setValue("PriceEntered", PriceEntered);\n      //    PriceActual = Util.getValueOfDecimal(prices["PriceEntered"]);\n      //    mTab.setValue("PriceActual", PriceActual);\n      //}\n\n      //paramStr = mTab.getValue("C_UOM_ID").toString().concat(",");\n      //var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n\n      //var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp));\n\n      //if (QtyEntered != QtyEntered1) {\n      //    this.log.fine("Corrected QtyEntered Scale UOM=" + Util.getValueOfInt(mTab.getValue("C_UOM_ID"))\n      //        + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n      //    QtyEntered = QtyEntered1;\n      //    mTab.setValue("QtyEntered", QtyEntered);\n      //}\n\n      ////Conversion of Qty Ordered\n      //paramStr = M_Product_ID.toString().concat(",", mTab.getValue("C_UOM_ID").toString(), ","\n      //    , QtyEntered.toString());\n      //var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n      //QtyOrdered = pc;\n\n      //var conversion = false\n      //if (QtyOrdered != null) {\n      //    conversion = QtyEntered != QtyOrdered;\n      //}\n      //if (QtyOrdered == null) {\n      //    conversion = false;\n      //    QtyOrdered = 1;\n      //}\n      //if (conversion) {\n      //    mTab.setValue("QtyOrdered", QtyOrdered);\n      //}\n      //else {\n      //    mTab.setValue("QtyOrdered", (QtyOrdered * QtyEntered1));\n      //}\n      //}\n      //}\n      //\tStorage\n      if (M_Product_ID != 0 && ctx.isSOTrx(windowNo) && QtyOrdered > 0 && !isReturnTrx)\n        //\tno negative (returns)\n        {\n          var pi = VIS.dataContext.getJSONRecord("MProduct/GetProduct", M_Product_ID.toString());\n          //MProduct product = MProduct.get(ctx, M_Product_ID);\n          var C_OrderLine_ID = 0;\n          if (Util.getValueOfBoolean(pi.IsStocked)) {\n            var M_Warehouse_ID = ctx.getContextAsInt(windowNo, "M_Warehouse_ID");\n            var M_AttributeSetInstance_ID = ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID");\n\n            //Decimal? available = MStorage.getQtyAvailable(M_Warehouse_ID, M_Product_ID, M_AttributeSetInstance_ID, null);\n            //Get Qty information from server side\n            var paramString = M_Product_ID.toString().concat(",", M_Warehouse_ID.toString(), ",",\n            //2\n            M_AttributeSetInstance_ID.toString(), ",",\n            //3\n            C_OrderLine_ID.toString()); //4\n\n            //Get product price information\n            var dr = null;\n            var available = VIS.dataContext.getJSONRecord("MStorage/GetQtyAvailable", paramString);\n\n            // var available = dr.available;//getQtyAvailable(M_Warehouse_ID, M_Product_ID, M_AttributeSetI\n\n            if (available == null) available = VIS.Env.ZERO;\n            if (available == 0) {\n              //mTab.fireDataStatusEEvent("NoQtyAvailable", "0", false);\n              //VIS.ADiathis.log.info("NoQtyAvailable", null, "0", "");\n            } else if (available.toString().compareTo(QtyOrdered) < 0) {\n              // VIS.ADialog.info("InsufficientQtyAvailable", null, available.toString(), "");\n            } else {\n              if (mTab.getValue("C_OrderLine_ID") == "") {\n                C_OrderLine_ID = 0;\n              } else {\n                C_OrderLine_ID = Util.getValueOfInt(mTab.getValue("C_OrderLine_ID"));\n              }\n              if (C_OrderLine_ID == null) C_OrderLine_ID = 0;\n              var notReserved = dr.notReserved; //MOrderLine.getNotReserved(ctx,\n              //M_Warehouse_ID, M_Product_ID, M_AttributeSetInstance_ID,\n              //C_OrderLine_ID);\n              if (notReserved == null) notReserved = VIS.Env.ZERO;\n              //var total = Decimal.Subtract(available.Value, notReserved);\n              var total = available - notReserved;\n              if (total < QtyOrdered) {\n                var info = VIS.Msg.parseTranslation(ctx, "@QtyAvailable@=" + available + "  -  @QtyNotReserved@=" + notReserved + "  =  " + total);\n                VIS.ADialog.info("InsufficientQtyAvailable", null, info, "");\n              }\n            }\n          }\n        }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Orig_Order - Orig Order Defaults.\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutOrder.prototype.Orig_Order = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    var C_Order_ID = Util.getValueOfInt(value);\n    if (C_Order_ID == null || C_Order_ID == 0) return "";\n    this.setCalloutActive(true);\n    try {\n      // var U=Util;\n      //\tGet Details from Original Order\n      //dr = VIS.dataContext.getJSONRecord("CalloutOrder/GetQtyInfo", paramString);\n      var order = VIS.dataContext.getJSONRecord("MOrder/GetOrder", C_Order_ID.toString());\n      //MOrder order = new MOrder(ctx, C_Order_ID, null);\n      var bpartner = VIS.dataContext.getJSONRecord("MBPartner/GetBPartner", order["C_BPartner_ID"].toString());\n      //MBPartner bpartner = new MBPartner(ctx, order.C_BPartner_ID, null);\n\n      // Reset Orig Shipment\n      mTab.setValue("Orig_InOut_ID", null);\n      mTab.setValue("C_BPartner_ID", Util.getValueOfInt(order["C_BPartner_ID"]));\n      mTab.setValue("C_BPartner_Location_ID", Util.getValueOfInt(order["C_BPartner_Location_ID"]));\n      mTab.setValue("Bill_BPartner_ID", Util.getValueOfInt(order["Bill_BPartner_ID"]));\n      mTab.setValue("Bill_Location_ID", Util.getValueOfInt(order["Bill_Location_ID"]));\n      if (order["AD_User_ID"] != 0) mTab.setValue("AD_User_ID", Util.getValueOfInt(order["AD_User_ID"]));\n      if (order["Bill_User_ID"] != 0) mTab.setValue("Bill_User_ID", Util.getValueOfInt(order["Bill_User_ID"]));\n      if (ctx.isSOTrx(windowNo)) mTab.setValue("M_ReturnPolicy_ID", Util.getValueOfInt(bpartner["M_ReturnPolicy_ID"]));else mTab.setValue("M_ReturnPolicy_ID", Util.getValueOfInt(bpartner["PO_ReturnPolicy_ID"]));\n\n      //mTab.setValue("DateOrdered", order.getDateOrdered());\n      //mTab.setValue("M_PriceList_ID", Util.getValueOfInt(order["M_PriceList_ID"]));\n\n      //------------- Neha 13-01-2016 Mentis Issue no.  0000399\n      if (true) {\n        this.setCalloutActive(false);\n        mTab.setValue("M_PriceList_ID", Util.getValueOfInt(order["M_PriceList_ID"]));\n        this.setCalloutActive(true);\n      }\n      ;\n\n      //--------------End------------------\n      mTab.setValue("PaymentRule", order["PaymentRule"]);\n      //when doc type = Warehouse Order / Credit Order / POS Order / Prepay order --- and payment term is advance -- not to update\n      // false means - not to update\n      var isPaymentTermUpdate = this.checkAdvancePaymentTerm(Util.getValueOfInt(mTab.getValue("C_DocTypeTarget_ID")), Util.getValueOfInt(order["C_PaymentTerm_ID"]));\n      if (isPaymentTermUpdate) {\n        mTab.setValue("C_PaymentTerm_ID", Util.getValueOfInt(order["C_PaymentTerm_ID"]));\n      } else {\n        mTab.setValue("C_PaymentTerm_ID", null);\n      }\n      //mTab.setValue ("DeliveryRule", X_C_Order.DELIVERYRULE_Manual);\n\n      mTab.setValue("Bill_Location_ID", Util.getValueOfInt(order["Bill_Location_ID"]));\n      mTab.setValue("InvoiceRule", order["InvoiceRule"]);\n      mTab.setValue("PaymentRule", order["PaymentRule"]);\n      mTab.setValue("DeliveryViaRule", order["DeliveryViaRule"]);\n      mTab.setValue("FreightCostRule", order["FreightCostRule"]);\n\n      //-------------Anuj 04-09-2015-------------------------\n      //var _CountVA009 = Util.getValueOfInt(VIS.DB.executeScalar("SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'VA009_\'  AND IsActive = \'Y\'"));\n      //if (_CountVA009 > 0) {\n\n      var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA009_");\n      if (DataPrefix["VA009_"]) {\n        //var paymthd_id = VIS.DB.executeScalar("SELECT VA009_PaymentMethod_ID FROM C_Order WHERE C_Order_ID=" + C_Order_ID);\n        //if (paymthd_id > 0) {\n\n        var paramString = DataPrefix["VA009_"].toString() + "," + C_Order_ID.toString();\n        dr = VIS.dataContext.getJSONRecord("MOrder/GetPaymentMethod", paramString);\n        if (dr != null) {\n          var paymthd_id = Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]);\n          if (paymthd_id > 0) {\n            mTab.setValue("VA009_PaymentMethod_ID", paymthd_id);\n            //var PaymentBasetype = VIS.DB.executeScalar("SELECT VA009_PaymentBaseType FROM VA009_PaymentMethod WHERE VA009_PaymentMethod_ID=" + paymthd_id);\n            var PaymentBasetype = Util.getValueOfString(dr["VA009_PaymentBaseType"]);\n            if (PaymentBasetype != "W" && PaymentBasetype != null) {\n              //if (PaymentBasetype != null) {\n              mTab.setValue("PaymentMethod", PaymentBasetype);\n              mTab.setValue("PaymentRule", PaymentBasetype);\n            }\n          }\n        }\n      }\n\n      //------------------Anuj 04-09-2015------------------------------------\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Orig_InOut - Shipment Line Defaults.\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutOrder.prototype.Orig_InOut = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      // var U=Util;\n      var Orig_InOut_ID = Util.getValueOfInt(value);\n      if (Orig_InOut_ID == null || Orig_InOut_ID == 0) return "";\n      this.setCalloutActive(true);\n      //\tGet Details from Original Shipment\n      //MInOut io = new MInOut(ctx, Orig_InOut_ID, null);\n      var io = VIS.dataContext.getJSONRecord("MInOut/GetInOut", Orig_InOut_ID.toString());\n      //mTab.setValue("ShipDate", Util.getValueOfDate(io.MovementDate));\n      mTab.setValue("C_Project_ID", Util.getValueOfInt(io.C_Project_ID));\n      mTab.setValue("C_Campaign_ID", Util.getValueOfInt(io.C_Campaign_ID));\n      mTab.setValue("C_Activity_ID", Util.getValueOfInt(io.C_Activity_ID));\n      mTab.setValue("AD_OrgTrx_ID", Util.getValueOfInt(io.AD_OrgTrx_ID));\n      mTab.setValue("User1_ID", Util.getValueOfInt(io.User1_ID));\n      mTab.setValue("User2_ID", Util.getValueOfInt(io.User2_ID));\n      // added by vivek on 09/10/2017 advised by pradeep to set drop ship checkbox value and warehouse_ID\n      if (Util.getValueOfString(io.IsDropShip) == "Y") {\n        mTab.setValue("M_Warehouse_ID", Util.getValueOfInt(io.M_Warehouse_ID));\n        mTab.setValue("IsDropShip", true);\n      } else {\n        mTab.setValue("IsDropShip", false);\n        mTab.setValue("M_Warehouse_ID", null);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Orig_Order - Orig Order Defaults.\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutOrder.prototype.Orig_OrderLine = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      //var U=Util;\n      var Orig_OrderLine_ID = Util.getValueOfInt(value);\n      if (Orig_OrderLine_ID == null || Orig_OrderLine_ID == 0) return "";\n      this.setCalloutActive(true);\n\n      //MOrderLine orderline = new MOrderLine(ctx, Orig_OrderLine_ID, null);\n      var orderline = VIS.dataContext.getJSONRecord("MOrderLine/GetOrderLine", Orig_OrderLine_ID.toString());\n      mTab.setValue("Orig_InOutLine_ID", null);\n      mTab.setValue("C_Tax_ID", Util.getValueOfInt(orderline["C_Tax_ID"]));\n      mTab.setValue("PriceList", Util.getValueOfDecimal(orderline["PriceList"]));\n      mTab.setValue("PriceLimit", Util.getValueOfDecimal(orderline["PriceLimit"]));\n      mTab.setValue("PriceActual", Util.getValueOfDecimal(orderline["PriceActual"]));\n      mTab.setValue("PriceEntered", Util.getValueOfDecimal(orderline["PriceEntered"]));\n      mTab.setValue("C_Currency_ID", Util.getValueOfInt(orderline["C_Currency_ID"]));\n      mTab.setValue("Discount", Util.getValueOfDecimal(orderline["Discount"]));\n      // mTab.setValue("Discount", Util.getValueOfDecimal(orderline.Discount));\n      var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n      var dr;\n      dr = VIS.dataContext.getJSONRecord("MPriceList/GetPriceList", M_PriceList_ID.toString());\n      var StdPrecision = Util.getValueOfInt(dr["StdPrecision"]);\n      var QtyOrdered;\n      QtyOrdered = Util.getValueOfDecimal(mTab.getValue("QtyOrdered"));\n\n      //\tLine Net Amt\n      var LineNetAmt = QtyOrdered * Util.getValueOfDecimal(orderline["PriceActual"]);\n      if (Util.scale(LineNetAmt) > StdPrecision) {\n        //LineNetAmt = Decimal.Round(LineNetAmt, StdPrecision);//, MidpointRounding.AwayFromZero);\n        LineNetAmt = LineNetAmt.toFixed(StdPrecision);\n      }\n      this.log.info("LineNetAmt=" + LineNetAmt);\n      mTab.setValue("LineNetAmt", LineNetAmt);\n    } catch (err) {\n      //MessageBox.Show("error in Orig_OrderLine");\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Fetch and set  OrderLine Details\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutOrder.prototype.RefPurchaseOrderLine = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var dr = VIS.dataContext.getJSONRecord("MOrderLine/GetOrderLine", value.toString());\n    if (dr["M_Product_ID"] != "0") {\n      mTab.setValue("M_Product_ID", dr["M_Product_ID"]);\n    }\n    if (dr["C_Charge_ID"] != "0") {\n      mTab.setValue("C_Charge_ID", dr["C_Charge_ID"]);\n    }\n    if (dr["M_AttributeSetInstance_ID"] != "0") {\n      mTab.setValue("M_AttributeSetInstance_ID", dr["M_AttributeSetInstance_ID"]);\n    }\n    if (dr["C_UOM_ID"] != "0") {\n      mTab.setValue("C_UOM_ID", dr["C_UOM_ID"]);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    this.setCalloutActive(false);\n    return "";\n  };\n  /// <summary>\n  /// Orig_InOutLine - Shipment Line Defaults.\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutOrder.prototype.Orig_InOutLine = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      //var U=Util;\n      var Orig_InOutLine_ID = Util.getValueOfInt(value);\n      if (Orig_InOutLine_ID == null || Orig_InOutLine_ID == 0) return "";\n      this.setCalloutActive(true);\n      //\tGet Details\n      var Orig_InOutLine = VIS.dataContext.getJSONRecord("MInOutLine/GetMInOutLine", Orig_InOutLine_ID.toString());\n      //MInOutLine Orig_InOutLine = new MInOutLine(ctx, Orig_InOutLine_ID, null);\n\n      if (Orig_InOutLine != null) {\n        mTab.setValue("C_Project_ID", Util.getValueOfInt(Orig_InOutLine["C_Project_ID"]));\n        mTab.setValue("C_Campaign_ID", Util.getValueOfInt(Orig_InOutLine["C_Campaign_ID"]));\n        mTab.setValue("M_Product_ID", Util.getValueOfInt(Orig_InOutLine["M_Product_ID"]));\n        mTab.setValue("M_AttributeSetInstance_ID", Util.getValueOfInt(Orig_InOutLine["M_AttributeSetInstance_ID"]));\n        mTab.setValue("C_UOM_ID", Util.getValueOfInt(Orig_InOutLine["C_UOM_ID"]));\n\n        // Handled UOM conversion in case of Vendor RMA\n        var QtyEntered = Util.getValueOfDecimal(Orig_InOutLine["QtyEntered"]);\n        mTab.setValue("QtyEntered", QtyEntered);\n        var paramStr = Orig_InOutLine["M_Product_ID"].toString().concat(",", Orig_InOutLine["C_UOM_ID"].toString(), ",", QtyEntered.toString()); //3\n        var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n        var QtyOrdered = pc; //(Decimal?)MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n        //C_UOM_To_ID, QtyEntered.Value);\n        if (QtyOrdered == null) QtyOrdered = QtyEntered;\n        mTab.setValue("QtyOrdered", QtyOrdered);\n        if (Util.getValueOfString(Orig_InOutLine["IsDropShip"]) == "Y") {\n          mTab.setValue("IsDropShip", true);\n          ctx.setContext(windowNo, "IsDropShip", Util.getValueOfString(Orig_InOutLine["IsDropShip"]));\n        } else {\n          mTab.setValue("IsDropShip", false);\n        }\n      }\n    } catch (err) {\n      //MessageBox.Show("error in Orig_InOutLine");\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// <param name="documnetType_Id">C_DocumentType_ID</param>\n  /// <param name="PaymentTerm_Id">C_PaymentTerm_ID</param>\n  /// This function will return True, when we want to show Advance payment term\n  /// if doc type = Warehouse Order / Credit Order / POS Order / Prepay order --- and payment term is advance -- then system return false\n  CalloutOrder.prototype.checkAdvancePaymentTerm = function (documnetType_Id, PaymentTerm_Id) {\n    var isAdvancePayTerm = true;\n    var dr = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA009_");\n    if (dr != null && !dr["VA009_"]) {\n      return isAdvancePayTerm;\n    }\n    if (Util.getValueOfInt(documnetType_Id) != 0 && Util.getValueOfInt(PaymentTerm_Id) != 0) {\n      var paramString = documnetType_Id.toString() + "," + PaymentTerm_Id.toString();\n      isAdvancePayTerm = VIS.dataContext.getJSONRecord("MOrder/checkAdvancePaymentTerm", paramString);\n    }\n    return isAdvancePayTerm;\n  };\n\n  /// <summary>\n  ///While Select Origional Purchase order in Case of Variation Order\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>Pick few Details from Origional Purchase Order And Copy to new One</returns>\n  CalloutOrder.prototype.RefPurchaseOrder = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      //var U=Util;\n      var Orig_Po_ID = Util.getValueOfInt(value);\n      if (Orig_Po_ID == null || Orig_Po_ID == 0) return "";\n      this.setCalloutActive(true);\n      //\tGet Details\n      var dr = VIS.dataContext.getJSONRecord("MOrder/GetOrder", Orig_Po_ID.toString());\n      if (dr != null) {\n        var C_BPartner_ID = Util.getValueOfDouble(dr["C_BPartner_ID"]);\n        var C_BPartner_Location_ID = Util.getValueOfDouble(dr["C_BPartner_Location_ID"]);\n        var AD_User_ID = Util.getValueOfDouble(dr["AD_User_ID"]);\n        var Bill_BPartner_ID = Util.getValueOfDouble(dr["Bill_BPartner_ID"]);\n        var Bill_User_ID = Util.getValueOfDouble(dr["Bill_User_ID"]);\n        var Bill_Location_ID = Util.getValueOfDouble(dr["Bill_Location_ID"]);\n        var VAS_ContractMaster_ID = Util.getValueOfDouble(dr["VAS_ContractMaster_ID"]);\n        var M_PriceList_ID = Util.getValueOfDouble(dr["M_PriceList_ID"]);\n        var M_Warehouse_ID = Util.getValueOfDouble(dr["M_Warehouse_ID"]);\n        var C_PaymentTerm_ID = Util.getValueOfDouble(dr["C_PaymentTerm_ID"]);\n        var PaymentRule = Util.getValueOfDouble(dr["PaymentRule"]);\n        var C_Payment_ID = Util.getValueOfDouble(dr["C_Payment_ID"]);\n        var VA009_PaymentMethod_ID = Util.getValueOfDouble(dr["VA009_PaymentMethod_ID"]);\n        var C_Currency_ID = Util.getValueOfDouble(dr["C_Currency_ID"]);\n        var C_Project_ID = Util.getValueOfDouble(dr["C_Project_ID"]);\n        var C_Campaign_ID = Util.getValueOfDouble(dr["C_Campaign_ID"]);\n        C_ProjectRef_ID;\n        var C_ProjectRef_ID = Util.getValueOfDouble(dr["C_ProjectRef_ID"]);\n        var SalesRep_ID = Util.getValueOfDouble(dr["SalesRep_ID"]);\n        var PriorityRule = Util.getValueOfDouble(dr["PriorityRule"]);\n        if (C_BPartner_ID != 0 && C_BPartner_ID != null) {\n          mTab.setValue("C_BPartner_ID", C_BPartner_ID);\n        }\n        if (C_BPartner_Location_ID != 0 && C_BPartner_Location_ID != null) {\n          mTab.setValue("C_BPartner_Location_ID", C_BPartner_Location_ID);\n        }\n        if (AD_User_ID != 0 && AD_User_ID != null) {\n          mTab.setValue("AD_User_ID", AD_User_ID);\n        }\n        if (Bill_BPartner_ID != 0 && Bill_BPartner_ID != null) {\n          mTab.setValue("Bill_BPartner_ID", Bill_BPartner_ID);\n        }\n        if (Bill_User_ID != 0 && Bill_User_ID != null) {\n          mTab.setValue("Bill_User_ID", Bill_User_ID);\n        }\n        if (Bill_Location_ID != 0 && Bill_Location_ID != null) {\n          mTab.setValue("Bill_Location_ID", Bill_Location_ID);\n        }\n        if (VAS_ContractMaster_ID != 0 && VAS_ContractMaster_ID != null) {\n          mTab.setValue("VAS_ContractMaster_ID", VAS_ContractMaster_ID);\n        }\n        if (M_PriceList_ID != 0 && M_PriceList_ID != null) {\n          mTab.setValue("M_PriceList_ID", M_PriceList_ID);\n        }\n        if (M_Warehouse_ID != 0 && M_Warehouse_ID != null) {\n          mTab.setValue("M_Warehouse_ID", M_Warehouse_ID);\n        }\n        if (C_PaymentTerm_ID != 0 && C_PaymentTerm_ID != null) {\n          mTab.setValue("C_PaymentTerm_ID", C_PaymentTerm_ID);\n        }\n        if (PaymentRule != 0 && PaymentRule != null) {\n          mTab.setValue("PaymentRule", PaymentRule);\n        }\n        if (VA009_PaymentMethod_ID != 0 && VA009_PaymentMethod_ID != null) {\n          mTab.setValue("VA009_PaymentMethod_ID", VA009_PaymentMethod_ID);\n        }\n        if (C_Currency_ID != 0 && C_Currency_ID != null) {\n          mTab.setValue("C_Currency_ID", C_Currency_ID);\n        }\n\n        //if (C_Project_ID != 0 && C_Project_ID != null) {\n        //    mTab.setValue("C_Project_ID", C_Project_ID);\n        //}\n\n        //if (C_Campaign_ID != 0 && C_Campaign_ID != null) {\n        //    mTab.setValue("C_Campaign_ID", C_Campaign_ID);\n        //}\n\n        //if (C_ProjectRef_ID != 0 && C_ProjectRef_ID != null) {\n        //    mTab.setValue("C_ProjectRef_ID", C_ProjectRef_ID);\n        //}\n\n        if (SalesRep_ID != 0 && SalesRep_ID != null) {\n          mTab.setValue("SalesRep_ID", SalesRep_ID);\n        }\n        if (PriorityRule != 0 && PriorityRule != null) {\n          mTab.setValue("PriorityRule", PriorityRule);\n        }\n        if (mTab.getField("C_IncoTerm_ID") != null) {\n          mTab.setValue("C_IncoTerm_ID", Util.getValueOfInt(dr["C_IncoTerm_ID"]));\n        }\n      }\n    } catch (err) {\n      //MessageBox.Show("error in Orig_InOutLine");\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutOrder = CalloutOrder;\n  //***CalloutOrder End\n\n  //**************CalloutSalesQuotation Starts**************\n  function CalloutSalesQuotation() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutSalesQuotation "); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutSalesQuotation, VIS.CalloutEngine); //inherit prototype\n\n  CalloutSalesQuotation.prototype.GetPaymentNote = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "" || value == "") {\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    //var Note = Util.getValueOfString(VIS.DB.executeScalar("select documentnote from c_paymentterm where c_paymentterm_id=" + value));\n    var Note = VIS.dataContext.getJSONRecord("MPaymentTerm/GetPaymentNote", value.toString());\n    if (Note != null) {\n      mTab.setValue("description", Note["DocumentNote"]);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutSalesQuotation = CalloutSalesQuotation;\n  //**************CalloutSalesQuotation Ends**************\n\n  function CalloutBlanketOrderRef() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutBlanketOrderRef"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutBlanketOrderRef, VIS.CalloutEngine); //inherit prototype\n  CalloutBlanketOrderRef.prototype.BlanketOrderRef = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mField.getColumnName() == "Blanket_Ref_Order_ID") {\n      var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA009_");\n      if (DataPrefix["VA009_"]) {\n        var paramString = value.toString() + "," + DataPrefix["VA009_"];\n      } else {\n        var paramString = value.toString() + "," + false;\n      }\n      var result = VIS.dataContext.getJSONRecord("MOrder/GetOrderHeader", paramString);\n      if (result != null) {\n        mTab.setValue("AD_Client_ID", result["AD_Client_ID"]);\n        mTab.setValue("AD_Org_ID", result["AD_Org_ID"]);\n        mTab.setValue("Description", result["Description"]);\n        mTab.setValue("C_DocTypeTarget_ID", result["C_DocTypeTarget_ID"]);\n        mTab.setValue("DateOrdered", Dateoffset(result["DateOrdered"]));\n        mTab.setValue("DatePromised", Dateoffset(result["DatePromised"]));\n        mTab.setValue("OrderValidFrom", Dateoffset(result["OrderValidFrom"]));\n        mTab.setValue("OrderValidTo", Dateoffset(result["OrderValidTo"]));\n        mTab.setValue("C_BPartner_ID", result["C_BPartner_ID"]);\n        mTab.setValue("Bill_BPartner_ID", result["Bill_BPartner_ID"]);\n        mTab.setValue("C_BPartner_Location_ID", result["C_BPartner_Location_ID"]);\n        mTab.setValue("Bill_Location_ID", result["Bill_Location_ID"]);\n        mTab.setValue("AD_User_ID", result["AD_User_ID"]);\n        mTab.setValue("Bill_User_ID", result["Bill_User_ID"]);\n        mTab.setValue("M_Warehouse_ID", result["M_Warehouse_ID"]);\n        mTab.setValue("PriorityRule", result["PriorityRule"]);\n        mTab.setValue("M_PriceList_ID", result["M_PriceList_ID"]);\n        mTab.setValue("C_IncoTerm_ID", result["C_IncoTerm_ID"]);\n        mTab.setValue("C_Currency_ID", result["C_Currency_ID"]);\n        mTab.setValue("C_ConversionType_ID", result["C_ConversionType_ID"]);\n        mTab.setValue("SalesRep_ID", result["SalesRep_ID"]);\n        if (DataPrefix["VA009_"]) {\n          mTab.setValue("VA009_PaymentMethod_ID", result["VA009_PaymentMethod_ID"]);\n        }\n        mTab.setValue("C_PaymentTerm_ID", result["C_PaymentTerm_ID"]);\n        mTab.setValue("C_Campaign_ID", result["C_Campaign_ID"]);\n        mTab.setValue("C_Activity_ID", result["C_Activity_ID"]);\n        mTab.setValue("AD_OrgTrx_ID", result["AD_OrgTrx_ID"]);\n        mTab.setValue("User1_ID", result["User1_ID"]);\n        mTab.setValue("User2_ID", result["User2_ID"]);\n        mTab.setValue("TotalLines", result["TotalLines"]);\n        mTab.setValue("GrandTotal", result["GrandTotal"]);\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  function Dateoffset(datepara) {\n    var date = new Date(datepara);\n    date.setMinutes(-date.getTimezoneOffset() + date.getMinutes());\n    return date.toISOString();\n  }\n  ;\n  VIS.Model.CalloutBlanketOrderRef = CalloutBlanketOrderRef;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/CalloutOrder.js?\n}')},"./Areas/VAS/Scripts/model/CalloutProduct.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n\n  /// <summary>\n  /// Product Callouts\n  /// </summary>\n  function CalloutProduct() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProduct"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProduct, VIS.CalloutEngine); //inherit CalloutEngine\n  /**\r\n   *\tProduct Category\r\n   *  @param ctx context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab Grid Tab\r\n   *  @param mField Grid Field\r\n   *  @param value New Value\r\n   *  @return null or error message\r\n   */\n  CalloutProduct.prototype.ProductCategory = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var M_Product_Category_ID = Util.getValueOfInt(value);\n    if (M_Product_Category_ID == null || Util.getValueOfInt(M_Product_Category_ID) == 0 || M_Product_Category_ID == 0) return "";\n    var paramString = Util.getValueOfInt(value);\n    /**\r\n     * Modified for update Book Qty on existing records.\r\n     * Also checks the old asi and removes it if product has been change.\r\n     */\n\n    //Get MInventoryLine Information\n    //Get product price information\n    var dr = null;\n    dr = VIS.dataContext.getJSONRecord("MProductCategory/GetProductCategory", paramString);\n\n    //var M_Product_ID = dr.M_Product_ID;//getQtyAvailable(M_Warehouse_ID, M_Product_ID, M_AttributeSetI\n    //var M_Locator_ID=dr.M_Locator_ID;     \n    var IsPurchasedToOrder = dr.IsPurchasedToOrder;\n    //  MProductCategory pc = new MProductCategory(ctx, M_Product_Category_ID, null);\n    mTab.setValue("IsPurchasedToOrder", IsPurchasedToOrder);\n    pc = null;\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutProduct.prototype.UOM = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    if (mTab.getValue("M_Product_id") == null) {\n      return "";\n    }\n    this.setCalloutActive(true);\n\n    // If values are in The Transaction Tab then restrict user so that UOM can\'t be changed or set to what it was previously.\n    var fields = mTab.getValue("M_Product_ID").toString();\n    var result = VIS.dataContext.getJSONRecord("MProduct/GetTransactionCount", fields); //Created by Nisha\n\n    if (result > 0) {\n      VIS.ADialog.info("Can\'t change UOM due to Transactions happens based on existing UOM");\n      //var uom_ID = VIS.dataContext.getJSONRecord("MProduct/GetC_UOM_ID", mTab.getValue("M_Product_ID").toString());\n      mTab.setValue("C_UOM_ID", oldValue);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *\tResource Group\r\n   *  @param ctx context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab Grid Tab\r\n   *  @param mField Grid Field\r\n   *  @param value New Value\r\n   *  @return null or error message\r\n   */\n  CalloutProduct.prototype.ResourceGroup = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var resgrp = Util.getValueOfString(value);\n    if (resgrp == null || resgrp.length == 0) return "";\n    if ("O" == resgrp) mTab.setValue("BasisType", null);else mTab.setValue("BasisType", "I");\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *  Organization\r\n   *  @param ctx context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab Grid Tab\r\n   *  @param mField Grid Field\r\n   *  @param value New Value\r\n   *  @return null or error message\r\n   */\n  CalloutProduct.prototype.Organization = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var AD_Org_ID = Util.getValueOfInt(value);\n    if (AD_Org_ID == null) {\n      return "";\n    }\n    var dr = null;\n    dr = VIS.dataContext.getJSONRecord("MLocator/GetLocator", paramString);\n    var Default_Locator_ID = dr["Default_Locator_ID"]; //getQtyAvailable(M_Warehouse_ID, M_Product_ID, M_AttributeSetI\n\n    // MLocator defaultLocator = MLocator.GetDefaultLocatorOfOrg(ctx, AD_Org_ID);\n    // if (defaultLocator != null)\n    // {\n    mTab.setValue("M_Locator_ID", Default_Locator_ID);\n    //}\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutProduct = CalloutProduct;\n  function CalloutProdCatVal() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProdCatVal"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProdCatVal, VIS.CalloutEngine); //inherit prototype\n  CalloutProdCatVal.prototype.SetProdCatValues = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      //var Sql = "SELECT IsActive "\n      // Change By Mohit Amortization process 02/11/2016\n      var countVA038 = false;\n      //var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      // End Change Amortization\n      var countDTD001 = false;\n      var countVA005 = false;\n      var countVA075 = false;\n      //if (countVA005 > 0) {\n      //    Sql += " , producttype ";\n      //}\n      //if (countVA005 > 0) {\n      //    Sql += " , m_attributeset_id, c_taxcategory_id ";\n      //}\n      //Sql += " FROM M_Product_Category WHERE m_product_category_id=" + Util.getValueOfInt(value);\n      //var result = CalloutDB.executeCalloutDataSet(Sql);\n      // Added by Bharat on 11/May/2017\n      var paramString = "VA038_,DTD001_,VA005_,VA075_";\n      var dr = null;\n      dr = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", paramString);\n      if (dr != null) {\n        countVA038 = dr["VA038_"];\n        countDTD001 = dr["DTD001_"];\n        countVA005 = dr["VA005_"];\n        countVA075 = dr["VA075_"];\n        var ds = null;\n        paramString = value.toString();\n        ds = VIS.dataContext.getJSONRecord("MProductCategory/GetCategoryData", paramString);\n        if (ds != null) {\n          if (countDTD001) {\n            mTab.setValue("ProductType", ds["ProductType"]);\n            if (ds["DTD001_IsConsumable"] == \'True\') {\n              //VIS0336:change done for setting the true value\n              mTab.setValue("DTD001_IsConsumable", true);\n            }\n          } else {\n            mTab.setValue("ProductType", "");\n          }\n          if (countVA005) {\n            if (ds["M_AttributeSet_ID"] != null || ds["M_AttributeSet_ID"] != "") {\n              mTab.setValue("M_AttributeSet_ID", Util.getValueOfInt(ds["M_AttributeSet_ID"]));\n            } else {\n              mTab.setValue("M_AttributeSet_ID", 0);\n            }\n            if (ds["C_TaxCategory_ID"] != null || ds["C_TaxCategory_ID"] != "") {\n              mTab.setValue("C_TaxCategory_ID", Util.getValueOfInt(ds["C_TaxCategory_ID"]));\n            } else {\n              mTab.setValue("C_TaxCategory_ID", 0);\n            }\n          }\n          if (countVA038 > 0) {\n            if (ds["ProductType"] == "E" || ds["ProductType"] == "S") {\n              if (Util.getvalueofint(ds["A_Asset_Group_ID"]) > 0) {\n                if (ds["VA038_AmortizationTemplate_ID"] != null || ds["VA038_AmortizationTemplate_ID"] != "") {\n                  mTab.setValue("VA038_AmortizationTemplate_ID", Util.getvalueofint(ds["VA038_AmortizationTemplate_ID"]));\n                } else {\n                  mTab.setValue("VA038_AmortizationTemplate_ID", 0);\n                }\n              } else {\n                mTab.setValue("VA038_AmortizationTemplate_ID", 0);\n              }\n            } else {\n              mTab.setValue("VA038_AmortizationTemplate_ID", 0);\n            }\n          }\n\n          //VIS345 : Setting VA075_EquipmentCategory_ID from Product Category Window if Module VA075 is installed.\n\n          if (countVA075 > 0) {\n            if (ds["VA075_EquipmentCategory_ID"] != null || ds["VA075_EquipmentCategory_ID"] != "") {\n              mTab.setValue("VA075_EquipmentCategory_ID", Util.getValueOfInt(ds["VA075_EquipmentCategory_ID"]));\n            } else {\n              mTab.setValue("VA075_EquipmentCategory_ID", 0);\n            }\n          }\n        }\n      }\n      //if (result != null) {\n      //    if (result.tables[0].rows.length > 0) {\n\n      //        if (Util.getValueOfInt(CalloutDB.executeCalloutScalar("SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'DTD001_\' ")) > 0) {\n      //            if (result.tables[0].rows[0].cells.producttype != null || Util.getValueOfString(result.tables[0].rows[0].cells.producttype) != "") {\n      //                mTab.setValue("PRODUCTTYPE", result.tables[0].rows[0].cells.producttype);\n      //            }\n      //            else {\n      //                mTab.setValue("PRODUCTTYPE", "");\n      //            }\n      //        }\n      //        if (countVA005 > 0) {\n      //            if (result.tables[0].rows[0].cells.m_attributeset_id != null || Util.getValueOfString(result.tables[0].rows[0].cells.m_attributeset_id) != "") {\n      //                mTab.setValue("M_AttributeSet_ID", Util.getValueOfInt(result.tables[0].rows[0].cells.m_attributeset_id));\n      //            }\n      //            else {\n      //                mTab.setValue("M_AttributeSet_ID", 0);\n      //            }\n      //            if (result.tables[0].rows[0].cells.c_taxcategory_id != null || Util.getValueOfString(result.tables[0].rows[0].cells.c_taxcategory_id) != "") {\n      //                mTab.setValue("C_TaxCategory_ID", Util.getValueOfInt(result.tables[0].rows[0].cells.c_taxcategory_id));\n      //            }\n      //            else {\n      //                mTab.setValue("C_TaxCategory_ID", 0);\n      //            }\n      //        }\n      //    }\n      //}\n      // Change Done By Mohit Aortization Process 02/11/2016, Checkin By Sukhwinder on 06 March, 2017\n      //if (countVA038 > 0) {\n      //    if (Util.getValueOfString(result.tables[0].rows[0].cells.producttype) == "E" || Util.getValueOfString(result.tables[0].rows[0].cells.producttype) == "S") {\n      //        var AssetGroup_ID = Util.getValueOfInt(CalloutDB.executeCalloutScalar("SELECT A_Asset_Group_ID FROM M_Product_Category WHERE M_Product_Category_ID=" + Util.getValueOfInt(value)));\n      //        if (AssetGroup_ID > 0) {\n      //            var AmortizTemp_ID = Util.getValueOfInt(CalloutDB.executeCalloutScalar("SELECT VA038_AmortizationTemplate_ID FROM A_Asset_Group WHERE A_Asset_Group_ID=" + AssetGroup_ID));\n      //            if (AmortizTemp_ID > 0) {\n      //                mTab.setValue("VA038_AmortizationTemplate_ID", AmortizTemp_ID);\n      //            }\n      //            else {\n      //                mTab.setValue("VA038_AmortizationTemplate_ID", 0);\n      //            }\n      //        }\n      //        else {\n      //            mTab.setValue("VA038_AmortizationTemplate_ID", 0);\n      //        }\n      //    }\n      //    else {\n      //        mTab.setValue("VA038_AmortizationTemplate_ID", 0);\n      //    }\n      //}\n      // End Change Amortization\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString()); // SD\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutProdCatVal = CalloutProdCatVal;\n  function CalloutProdTypeVal() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProdTypeVal");\n  }\n  VIS.Utility.inheritPrototype(CalloutProdTypeVal, VIS.CalloutEngine);\n  CalloutProdTypeVal.prototype.SetProdTypeValues = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      // If "Product Type" is Servies, Resource and Expense Type "Stocked" checkbox value will be "False". \n      if (value != \'I\') {\n        mTab.setValue("IsStocked", false);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString()); // SD\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutProdTypeVal = CalloutProdTypeVal;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/CalloutProduct.js?\n}')},"./Areas/VAS/Scripts/model/CalloutSetAttributeCode.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutSetAttributeCode() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutSetAttributeCode"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutSetAttributeCode, VIS.CalloutEngine); //inherit CalloutEngine\n\n  CalloutSetAttributeCode.prototype.FillAttribute = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    var AttrCode = ctx.getContext(windowNo, "AttrCode");\n    this.setCalloutActive(true);\n    if (AttrCode != null && AttrCode != "") {\n      var attributeSet_ID = VIS.dataContext.getJSONRecord("MProduct/GetAttributeSet", value.toString());\n\n      //var qry = "SELECT M_AttributeSet_ID FROM M_Product WHERE M_Product_ID = " + Util.getValueOfInt(value);\n      //var attributeSet_ID = Util.getValueOfInt(VIS.DB.executeScalar(qry));\n\n      if (attributeSet_ID > 0) {\n        var param = AttrCode.toString() + "," + value.toString();\n        var Attribute_ID = VIS.dataContext.getJSONRecord("MProduct/GetProductAttribute", param);\n\n        //qry = "SELECT M_AttributeSetInstance_ID FROM M_ProductAttributes WHERE UPC = \'" + AttrCode + "\' AND M_Product_ID = " + Util.getValueOfInt(value);\n        //var Attribute_ID = Util.getValueOfInt(VIS.DB.executeScalar(qry));\n\n        if (Attribute_ID > 0) {\n          mTab.setValue("M_AttributeSetInstance_ID", Attribute_ID);\n        }\n\n        // Change GSI Barcode\n        else if (AttrCode.indexOf("(01)") >= 0) {\n          var paramString = AttrCode + "," + Util.getValueOfInt(value) + "," + windowNo;\n          var ASI_ID = VIS.dataContext.getJSONRecord("MInOut/GetASIID", paramString);\n          if (ASI_ID != 0) {\n            mTab.setValue("M_AttributeSetInstance_ID", ASI_ID);\n          }\n        }\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  CalloutSetAttributeCode.prototype.FillUPC = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var manu_ID = 0;\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    var AttrCode = ctx.getContext(windowNo, "AttrCode");\n    this.setCalloutActive(true);\n    if (Util.getValueOfString(AttrCode) != "") {\n      manu_ID = VIS.dataContext.getJSONRecord("MProduct/GetManufacturer", AttrCode.toString());\n      //sql = "SELECT Count(*) FROM M_Manufacturer WHERE IsActive = \'Y\' AND UPC = \'" + AttrCode + "\'";\n      //manu_ID = Util.getValueOfInt(VIS.DB.executeScalar(sql, null, null));\n      if (manu_ID > 0) {\n        this.setCalloutActive(false);\n        return VIS.Msg.getMsg("Attribute Code Already Exist");\n      } else {\n        mTab.setValue("UPC", AttrCode);\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutSetAttributeCode = CalloutSetAttributeCode;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/CalloutSetAttributeCode.js?\n}')},"./Areas/VAS/Scripts/model/Callouts.js":()=>{eval('{/** \r\n  *    Sample Class for Callout\r\n       -  must call base class (CalloutEngine)\r\n       -- must inheirt Base class\r\n  */\n\n;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  var steps = false;\n  var countEd011 = 0;\n\n  //*************CalloutDocumentType Starts***********\n  function CalloutDocumentType() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutDocumentType"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutDocumentType, VIS.CalloutEngine); //inherit prototype\n\n  CalloutDocumentType.prototype.SetSalesQuotation = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      if (Util.getValueOfString(mTab.getValue("DocSubTypeSO")) == \'OB\' || Util.getValueOfString(mTab.getValue("DocSubTypeSO")) == \'ON\') {\n        mTab.setValue("IsSalesQuotation", true);\n      } else {\n        mTab.setValue("IsSalesQuotation", false);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n\n  // JID_0811 \n  // Added by Bharat on 24 August 2018 on change of Organization set Warehouse from Organization Info\n  CalloutDocumentType.prototype.Organization = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      var colName = "";\n      if (mTab.getField("M_Warehouse_ID") != null) {\n        var warehouse_ID = VIS.dataContext.getJSONRecord("MDocType/GetWarehouse", value.toString());\n        if (warehouse_ID > 0) {\n          if (mTab.getTableName() == "M_Movement" && mTab.getField("DTD001_MWarehouseSource_ID") != null) {\n            mTab.setValue("DTD001_MWarehouseSource_ID", warehouse_ID);\n          } else {\n            mTab.setValue("M_Warehouse_ID", warehouse_ID);\n          }\n        } else {\n          //if get value < 0 then set as Zero.\n          if (mTab.getTableName() == "M_Movement" && mTab.getField("DTD001_MWarehouseSource_ID") != null) {\n            mTab.setValue("DTD001_MWarehouseSource_ID", 0);\n          } else {\n            mTab.setValue("M_Warehouse_ID", 0);\n          }\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutDocumentType = CalloutDocumentType;\n  //*************CalloutDocumentType Ends*************\n\n  /*  Callout Recurring*******************Added by Arpit Rai on 2nd Jan,2016  */\n  function CalloutRecurring() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutRecurring"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutRecurring, VIS.CalloutEngine); //inherit CalloutEngine\n\n  //Callout To Set Remaning Runs Zero while editing the Maximum Runs\n  CalloutRecurring.prototype.SetMaxRunZero = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var maxRun = mTab.getValue("RunsMax");\n    if (maxRun != "" && maxRun > 0) {\n      mTab.setValue("RunsRemaining", 0);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutRecurring = CalloutRecurring;\n\n  /*  Callout CalloutProfitLoss**********Added on 05 December, 2017 By SUkhwinder */\n  function CalloutProfitLoss() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProfitLoss"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProfitLoss, VIS.CalloutEngine); //inherit CalloutEngine\n\n  //Callout To Set Datefrom and DateTo from selected year.(Sukhwinder on 7th Dec)\n  CalloutProfitLoss.prototype.SetDateFromAndDateTo = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var paramString = value.toString() + "," + ctx.getAD_Client_ID().toString();\n      //var adClientID = ctx.getAD_Client_ID();\n      //var yearID = mTab.getValue("C_Year_ID");\n\n      var dr = VIS.dataContext.getJSONRecord("Common/GetPeriodFromYear", paramString);\n      if (dr != null) {\n        var fromDate = Util.getValueOfDate(dr["STARTDATE"]);\n        var toDate = Util.getValueOfDate(dr["ENDDATE"]);\n        mTab.setValue("DateFrom", fromDate);\n        mTab.setValue("DateTo", toDate);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  //Callout To Set Currencyfrom selected acconting schema.(Sukhwinder on 12th Dec)\n  CalloutProfitLoss.prototype.SetCurrency = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var paramString = value.toString() + "," + ctx.getAD_Client_ID().toString();\n      //var adClientID = ctx.getAD_Client_ID();\n      //var yearID = mTab.getValue("C_Year_ID");\n\n      var dr = VIS.dataContext.getJSONRecord("Common/GetCurrencyFromAccountingSchema", paramString);\n      if (dr != null) {\n        var C_Currency_ID = Util.getValueOfInt(dr["CurrencyID"]);\n        mTab.setValue("C_Currency_ID", C_Currency_ID);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutProfitLoss = CalloutProfitLoss;\n\n  //  ****Callout Profit Tax Start*******************Added by Vikas  29-dec*********************************88\n  function CalloutProfitTax() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProfitTax"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProfitTax, VIS.CalloutEngine); //inherit CalloutEngine\n\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Gridfield</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutProfitTax.prototype.SetProfitBeforeTax = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive() || value == null) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var idr = VIS.dataContext.getJSONRecord("MProfitTax/GetProfitLossDetails", value.toString());\n      if (Object.keys(idr).length > 0) {\n        mTab.setValue("ProfitBeforeTax", Util.getValueOfDecimal(idr["ProfitBeforeTax"]));\n        mTab.setValue("C_Year_ID", Util.getValueOfInt(idr["C_Year_ID"]));\n        mTab.setValue("C_ProfitAndLoss_ID", Util.getValueOfInt(idr["C_ProfitAndLoss_ID"]));\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutProfitTax = CalloutProfitTax;\n  //********************* Callout Profit Tax Start End ***************************************************************\n\n  //et multiply rate 1 in case of same UOM in both the columns.\n  function CalloutUOMConversion() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutUOMConversion"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutUOMConversion, VIS.CalloutEngine); //inherit prototype\n  CalloutUOMConversion.prototype.SetMultiplyRate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      mTab.setValue("MultiplyRate", 0);\n      return "";\n    }\n    this.setCalloutActive(true);\n    var fromUOM = mTab.getValue("C_UOM_ID");\n    var toUOM = mTab.getValue("C_UOM_To_ID");\n    if (fromUOM == toUOM) {\n      mTab.setValue("DivideRate", 1);\n      mTab.setValue("MultiplyRate", 1);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutUOMConversion = CalloutUOMConversion;\n\n  //to check inco term reference changed\n\n  function CalloutIncoTerm() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutIncoTerm"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutIncoTerm, VIS.CalloutEngine); //inherit prototype\n\n  CalloutIncoTerm.prototype.CheckIncoTerm = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var isSOTrx = ctx.isSOTrx(windowNo);\n    var recordID = 0;\n    var incoTerm = 0;\n    var paramString = "";\n    try {\n      if (mTab.getTableName().startsWith("C_Order")) {\n        if (isSOTrx && Util.getValueOfInt(mTab.getValue("C_Order_Quotation")) > 0) {\n          paramString = isSOTrx + "," + mTab.getTableName() + ",C_Order_Quotation," + Util.getValueOfInt(mTab.getValue("C_Order_Quotation")).toString();\n          incoTerm = VIS.dataContext.getJSONRecord("MOrder/GetIncoTerm", paramString);\n        } else if (!isSOTrx && Util.getValueOfInt(mTab.getValue("Ref_Order_ID")) > 0) {\n          paramString = isSOTrx + "," + mTab.getTableName() + ",Ref_Order_ID," + Util.getValueOfInt(mTab.getValue("Ref_Order_ID")).toString();\n          incoTerm = VIS.dataContext.getJSONRecord("MOrder/GetIncoTerm", paramString);\n        } else if (Util.getValueOfInt(mTab.getValue("C_Order_Blanket")) > 0) {\n          paramString = isSOTrx + "," + mTab.getTableName() + ",C_Order_Blanket," + Util.getValueOfInt(mTab.getValue("C_Order_Blanket")).toString();\n          incoTerm = VIS.dataContext.getJSONRecord("MOrder/GetIncoTerm", paramString);\n        }\n      } else if (mTab.getTableName().startsWith("C_Invoice")) {\n        if (isSOTrx && Util.getValueOfInt(mTab.getValue("C_Order_ID")) > 0) {\n          paramString = isSOTrx + "," + mTab.getTableName() + ",C_Order_ID," + Util.getValueOfInt(mTab.getValue("C_Order_ID")).toString();\n          incoTerm = VIS.dataContext.getJSONRecord("MOrder/GetIncoTerm", paramString);\n        } else if (!isSOTrx && Util.getValueOfInt(mTab.getValue("C_Order_ID")) > 0) {\n          paramString = isSOTrx + "," + mTab.getTableName() + ",C_Order_ID," + Util.getValueOfInt(mTab.getValue("C_Order_ID")).toString();\n          incoTerm = VIS.dataContext.getJSONRecord("MOrder/GetIncoTerm", paramString);\n        } else if (!isSOTrx && Util.getValueOfInt(mTab.getValue("M_InOut_ID")) > 0) {\n          paramString = isSOTrx + "," + mTab.getTableName() + ",M_InOut_ID," + Util.getValueOfInt(mTab.getValue("M_InOut_ID")).toString();\n          incoTerm = VIS.dataContext.getJSONRecord("MOrder/GetIncoTerm", paramString);\n        }\n      } else if (mTab.getTableName().startsWith("M_InOut")) {\n        if (isSOTrx && Util.getValueOfInt(mTab.getValue("C_Order_ID")) > 0) {\n          paramString = isSOTrx + "," + mTab.getTableName() + ",C_Order_ID," + Util.getValueOfInt(mTab.getValue("C_Order_ID")).toString();\n          incoTerm = VIS.dataContext.getJSONRecord("MOrder/GetIncoTerm", paramString);\n        } else if (!isSOTrx && Util.getValueOfInt(mTab.getValue("C_Order_ID")) > 0) {\n          paramString = isSOTrx + "," + mTab.getTableName() + ",C_Order_ID," + Util.getValueOfInt(mTab.getValue("C_Order_ID")).toString();\n          incoTerm = VIS.dataContext.getJSONRecord("MOrder/GetIncoTerm", paramString);\n        } else if (!isSOTrx && Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) > 0) {\n          paramString = isSOTrx + "," + mTab.getTableName() + ",C_Invoice_ID," + Util.getValueOfInt(mTab.getValue("C_Invoice_ID")).toString();\n          incoTerm = VIS.dataContext.getJSONRecord("MOrder/GetIncoTerm", paramString);\n        }\n      }\n      if (incoTerm > 0 & incoTerm != value) {\n        this.setCalloutActive(false);\n        VIS.ADialog.warn("IncoTermChanged");\n        return "";\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutIncoTerm = CalloutIncoTerm;\n\n  //Neha - On change of Warehouse or Locator, make parent container and Locator as null.\n  function CalloutLocatorPC() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutLocatorPC"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutLocatorPC, VIS.CalloutEngine); //inherit prototype\n  CalloutLocatorPC.prototype.SetLocatorPC = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mField.getColumnName() == "M_Warehouse_ID") {\n      if (value != oldValue) {\n        mTab.setValue("M_Locator_ID", "");\n        mTab.setValue("Ref_M_Container_ID", "");\n      }\n    } else if (mField.getColumnName() == "M_Locator_ID") {\n      if (value != oldValue) {\n        mTab.setValue("Ref_M_Container_ID", "");\n      }\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutLocatorPC = CalloutLocatorPC;\n\n  // Callout on selection of Product to Remove Attribute Set Instance if selected.\n  function CalloutLandedCost() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutLandedCost"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutLandedCost, VIS.CalloutEngine); //inherit prototype\n  CalloutLandedCost.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mTab.getField("M_AttributeSetInstance_ID") != null) {\n      mTab.setValue("M_AttributeSetInstance_ID", null);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutLandedCost = CalloutLandedCost;\n\n  // In RFQ window, workcompletedate Should be greater than workstartdate\n  function CalloutRFQ() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutRFQ"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutRFQ, VIS.CalloutEngine); //inherit prototype\n  CalloutRFQ.prototype.Comparedates = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var _startDate = new Date(mTab.getValue("DateWorkStart"));\n    var _endDate = new Date(mTab.getValue("DateWorkComplete"));\n    if (mField.getColumnName() == "DateWorkStart") {\n      if (_startDate >= _endDate && mTab.getValue("DateWorkComplete") != null) {\n        mTab.setValue("DateWorkStart", "");\n        this.setCalloutActive(false);\n        return VIS.ADialog.info("DateWorkGreater");\n      }\n    } else {\n      if (_startDate >= _endDate && mTab.getValue("DateWorkStart") != null) {\n        mTab.setValue("DateWorkComplete", "");\n        this.setCalloutActive(false);\n        return VIS.ADialog.info("DateWorkGreater");\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n\n  /**\r\n  * VIS430:System should save Current Date and Future Date in Response Date field on RFQ screen\r\n  * @param {any} ctx\r\n  * @param {any} windowNo\r\n  * @param {any} mTab\r\n  * @param {any} mField\r\n  * @param {any} value\r\n  * @param {any} oldValue\r\n  */\n  CalloutRFQ.prototype.RfqDateResponse = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mTab.getValue("DateResponse") != null) {\n      if (new Date(mTab.getValue("DateResponse")).setHours(0, 0, 0, 0) < new Date().setHours(0, 0, 0, 0)) {\n        mTab.setValue("DateResponse", null);\n        this.setCalloutActive(false);\n        return "VAS_ResponseDateMustGreater";\n      }\n    }\n    this.setCalloutActive(false);\n    /*ctx = windowNo = mTab = mField = value = oldValue = null;*/\n    return "";\n  };\n  /**\r\n   * Set total amount on Quantity tab of RFQ Window\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutRFQ.prototype.TotalLineAmt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var qty = Util.getValueOfDecimal(mTab.getValue("Qty"));\n    var benchPrice = Util.getValueOfDecimal(mTab.getValue("BenchmarkPrice"));\n    if (mField.getColumnName() == "Qty") {\n      var TotalAmt = qty * benchPrice;\n    }\n    if (mField.getColumnName() == "BenchmarkPrice") {\n      var TotalAmt = qty * benchPrice;\n    }\n    mTab.setValue("LineNetAmt", TotalAmt);\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutRFQ = CalloutRFQ;\n\n  //** clearing WeekDay value when FixDueDate checkbox is true ** Dt: 02/04/2021 ** Modified By: Kumar ** //\n  //*************CalloutPaymentTerm Start**************\n  function CalloutPaymentTerm() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutPaymentTerm"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutPaymentTerm, VIS.CalloutEngine); //inherit prototype\n  CalloutPaymentTerm.prototype.ClearWeekDay = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (value == true) {\n      mTab.setValue("NetDay", "");\n      mTab.setValue("WeekOffset", VIS.Env.ZERO);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutPaymentTerm = CalloutPaymentTerm;\n  //**************CalloutPaymentTerm End*************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/Callouts.js?\n}')},"./Areas/VAS/Scripts/model/VAS_CalloutContract.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  var steps = false;\n\n  //*************** VAS_CalloutContract ************  \n  function VAS_CalloutContract() {\n    VIS.CalloutEngine.call(this, "VIS.VAS_CalloutContract"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(VAS_CalloutContract, VIS.CalloutEngine); //inherit prototype\n  VAS_CalloutContract.prototype.CalculateContDuration = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var SDate = Util.getValueOfDate(mTab.getValue("StartDate"));\n    var Edate = Util.getValueOfDate(mTab.getValue("EndDate"));\n    if (SDate != 0 && Edate != 0) {\n      var totalMonths = (Edate.getDate() - SDate.getDate()) / 30 + (Edate.getMonth() - SDate.getMonth() + 12 * (Edate.getFullYear() - SDate.getFullYear()));\n      var totalYears = (Edate.getMonth() - SDate.getMonth()) / 12 + (Edate.getFullYear() - SDate.getFullYear());\n      var Month = totalMonths % 12;\n      mTab.setValue("VAS_ContractMonths", Math.round(Month));\n      mTab.setValue("VAS_ContractDuration", Math.round(totalYears));\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n    * *************************Callout check End date must be greater than Start date****************************\r\n    * @param {any} ctx\r\n    * @param {any} windowNo\r\n    * @param {any} mTab\r\n    * @param {any} mField\r\n    * @param {any} value\r\n    * @param {any} oldValue\r\n    */\n  VAS_CalloutContract.prototype.EndDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mTab.getValue("StartDate") != null || mTab.getValue("DateDoc") != null) {\n      //VIS430:Contract End Date not less than contract date\n      var startDate = new Date(mTab.getValue("StartDate"));\n      var docDate = new Date(mTab.getValue("DateDoc"));\n      var endDate = new Date(value);\n      var EndDate = new Date(value);\n      endDate = endDate.setHours(0, 0, 0, 0);\n      startDate = startDate.setHours(0, 0, 0, 0);\n      docDate = docDate.setHours(0, 0, 0, 0);\n      if (endDate < startDate || endDate < docDate) {\n        mTab.setValue("EndDate", null);\n        this.setCalloutActive(false);\n        return "VAS_EndDateMustGreater";\n      }\n    }\n    mTab.setValue("VAS_RenewalDate", new Date(EndDate.setDate(EndDate.getDate() + 1)));\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /**\r\n   * *****************Callout check Start Date must be less than End Date********************\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  VAS_CalloutContract.prototype.StartDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var startDate = new Date(value);\n    var endDate = new Date(mTab.getValue("EndDate"));\n    endDate = endDate.toISOString();\n    startDate = startDate.toISOString();\n    if (mTab.getValue("EndDate") != null) {\n      if (endDate < startDate) {\n        mTab.setValue("StartDate", null);\n        this.setCalloutActive(false);\n        return "VAS_EndDateMustGreater";\n      }\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * *****************Callout check Renewal Date must be greater than End Date and less than Current Date********************\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  VAS_CalloutContract.prototype.RenewalDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mTab.getValue("EndDate") != null && mTab.getValue("VAS_RenewalDate") != null) {\n      //VIS430:Renewal date must be greater than end date\n      var renewalDate = new Date(mTab.getValue("VAS_RenewalDate"));\n      renewalDate.setHours(0, 0, 0, 0);\n      var endDate = new Date(mTab.getValue("EndDate"));\n      endDate.setHours(0, 0, 0, 0);\n      if (renewalDate < endDate) {\n        mTab.setValue("VAS_RenewalDate", null);\n        this.setCalloutActive(false);\n        return "VAS_RenewalMustGreater";\n      }\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * *****************Callout check Termination Date must be greater than Start Date********************\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  VAS_CalloutContract.prototype.TerminationDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mTab.getValue("StartDate") != null && mTab.getValue("VAS_TerminationDate") != null && mTab.getValue("DateDoc") != null) {\n      //VIS430:Termination date must be greater than contract start date\n      var terminationDate = new Date(mTab.getValue("VAS_TerminationDate"));\n      terminationDate.setHours(0, 0, 0, 0);\n      var contractStartDate = new Date(mTab.getValue("StartDate"));\n      contractStartDate.setHours(0, 0, 0, 0);\n      var contractDate = new Date(mTab.getValue("DateDoc"));\n      contractDate.setHours(0, 0, 0, 0);\n      if (terminationDate < contractStartDate || terminationDate < contractDate) {\n        //VAI050-Terminate date should not be less than Contract Date and  Contract Start date\n        mTab.setValue("VAS_TerminationDate", null);\n        this.setCalloutActive(false);\n        return "VAS_TerminationMustGreater";\n      }\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  //    /**\n  //* VIS0336:for checking contract and contract start date\n  //* VAI050-Comment callout \n  //* @param {any} ctx\n  //* @param {any} windowNo\n  //* @param {any} mTab\n  //* @param {any} mField\n  //* @param {any} value\n  //* @param {any} oldValue\n  //*/\n  //    VAS_CalloutContract.prototype.DateDoc = function (ctx, windowNo, mTab, mField, value, oldValue) {\n  //        if (this.isCalloutActive() || value == null || value.toString() == "") {\n  //            return "";\n  //        }\n  //        this.setCalloutActive(true);\n\n  //        var DocDate = mTab.getValue("DateDoc");\n  //        var StartDate = mTab.getValue("StartDate");\n  //        if (DocDate != null && StartDate != null) {\n  //            if (DocDate > StartDate && mField.getColumnName() == "DateDoc") {\n  //                mTab.setValue("DateDoc", null);\n  //                this.setCalloutActive(false);\n  //                return "VAS_ContractDateMustGreater";\n  //            }\n  //            if (DocDate > StartDate && mField.getColumnName() == "StartDate") {\n  //                mTab.setValue("StartDate", null);\n  //                this.setCalloutActive(false);\n  //                return "VAS_ContractDateMustGreater";\n  //            }\n  //        }\n  //        this.setCalloutActive(false);\n  //        ctx = windowNo = mTab = mField = value = oldValue = null;\n  //        return "";\n  //    };\n\n  VAS_CalloutContract.prototype.ContractRef = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var result = VIS.dataContext.getJSONRecord("MVASContract/GetContractDetails", Util.getValueOfInt(value));\n    if (result) {\n      if (result["IsExpiredContracts"] == \'Y\') {\n        //Check Contract Expired or not\n        this.setCalloutActive(false);\n        return "VAS_ContractExpired";\n      }\n      mTab.setValue("ContractType", result["ContractType"]);\n      mTab.setValue("C_BPartner_ID", result["C_BPartner_ID"]);\n      mTab.setValue("Bill_Location_ID", result["Bill_Location_ID"]);\n      mTab.setValue("Bill_User_ID", result["Bill_User_ID"]);\n      mTab.setValue("VAS_Jurisdiction", result["VAS_Jurisdiction"]);\n      mTab.setValue("C_Currency_ID", result["C_Currency_ID"]);\n      mTab.setValue("C_IncoTerm_ID", result["C_IncoTerm_ID"]);\n      mTab.setValue("C_PaymentTerm_ID", result["C_PaymentTerm_ID"]);\n      mTab.setValue("C_Project_ID", result["C_Project_ID"]);\n      mTab.setValue("M_PriceList_ID", result["M_PriceList_ID"]);\n      mTab.setValue("VA009_PaymentMethod_ID", result["VA009_PaymentMethod_ID"]);\n      mTab.setValue("C_BPartner_Location_ID", result["Bill_Location_ID"]);\n      mTab.setValue("VAS_ContractCategory_ID", result["VAS_ContractCategory_ID"]);\n      if (mTab.getField("VA097_VendorDetails_ID") != null) {\n        //VIS0336_changes done for setting the vendor details id on purchase order window\n        mTab.setValue("VA097_VendorDetails_ID", result["VA097_VendorDetails_ID"]);\n      }\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VAS_CalloutContract.prototype.PriceList = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var dr = null;\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var M_PriceList_ID = Util.getValueOfInt(value.toString());\n      if (M_PriceList_ID == null || M_PriceList_ID == 0) return "";\n      this.setCalloutActive(true);\n      if (steps) {\n        this.log.warning("init");\n      }\n      dr = VIS.dataContext.getJSONRecord("MPriceList/GetPriceListData", value.toString());\n      if (dr != null) {\n        //\tCurrency\n        mTab.setValue("C_Currency_ID", dr["C_Currency_ID"]);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n      }\n      this.log(Level.SEVERE, "", err);\n      return err;\n    }\n    if (steps) {\n      this.log.warning("finish");\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /**\r\n   * On Business Partner and ContractType according Field should be Updated\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  VAS_CalloutContract.prototype.BPartner = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var dr = null;\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_BPartner_ID = 0;\n      var isvendor = \'N\';\n      var isCustomer = \'N\';\n      if (value != null) C_BPartner_ID = Util.getValueOfInt(value.toString());\n      if (C_BPartner_ID == 0) return "";\n      var isReturnTrx = Util.getValueOfBoolean(mTab.getValue("IsReturnTrx"));\n      if (isReturnTrx) return "";\n      this.setCalloutActive(true);\n      var _CountVA009 = false;\n      var paramString = "VA009_";\n      var isSOTrx = ctx.isSOTrx(windowNo);\n      var dr = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", paramString);\n      if (dr != null) {\n        _CountVA009 = dr["VA009_"];\n      }\n      paramString = _CountVA009.toString() + "," + C_BPartner_ID;\n      dr = VIS.dataContext.getJSONRecord("MVASContract/GetBPartnerData", paramString);\n      if (dr != null) {\n        // jurisdiction Tax\n        var contractType = Util.getValueOfString(mTab.getValue("ContractType"));\n        if (contractType == "ASP") mTab.setValue("VAS_Jurisdiction", dr["VAS_TaxJurisdiction"]);\n\n        // Price List\n\n        var PriceList = Util.getValueOfInt(contractType == "ASR" ? dr["M_PriceList_ID"] : dr["PO_PriceList_ID"]);\n        if (PriceList != 0) {\n          mTab.setValue("M_PriceList_ID", PriceList);\n        }\n        //Inco Term\n        var IncoTerm = Util.getValueOfInt(contractType == "ASR" ? dr["C_IncoTerm_ID"] : dr["C_IncoTermPO_ID"]);\n        if (IncoTerm > 0) {\n          mTab.setValue("C_IncoTerm_ID", IncoTerm);\n        }\n\n        //\tBill-To BPartner\n        mTab.setValue("Bill_BPartner_ID", C_BPartner_ID);\n        var bill_Location_ID = Util.getValueOfInt(dr["Bill_Location_ID"]);\n        if (bill_Location_ID == 0) {\n          var bill_Partner_ID = Util.getValueOfInt(dr["Bill_BPartner_ID"]);\n          if (bill_Partner_ID > 0) mTab.setValue("Bill_BPartner_ID", bill_Partner_ID);\n        } else mTab.setValue("Bill_Location_ID", bill_Location_ID);\n\n        // Ship-To Location\n        var shipTo_ID = Util.getValueOfInt(dr["C_BPartner_Location_ID"]);\n        if (C_BPartner_ID.toString() == ctx.getContext("C_BPartner_ID")) {\n          var loc = ctx.getContext("C_BPartner_Location_ID");\n          if (loc.length > 0) shipTo_ID = Util.getValueOfInt(loc);\n        }\n        if (shipTo_ID == 0) mTab.setValue("C_BPartner_Location_ID", null);else {\n          mTab.setValue("C_BPartner_Location_ID", shipTo_ID);\n          if ("Y" == Util.getValueOfString(dr["IsShipTo"])) mTab.setValue("Bill_Location_ID", shipTo_ID);\n        }\n\n        //Payment Method\n        if (_CountVA009) {\n          var _PaymentMethod_ID = Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]);\n          var _PO_PaymentMethod_ID = 0;\n          if (C_Order_Blanket <= 0) {\n            var bpdtl = VIS.dataContext.getJSONRecord("MBPartner/GetBPDetails", C_BPartner_ID);\n            if (bpdtl != null) {\n              isvendor = Util.getValueOfString(bpdtl["IsVendor"]);\n              isCustomer = Util.getValueOfString(bpdtl["IsCustomer"]);\n              if (!isSOTrx) {\n                //In case of Purchase Order\n                if (isvendor == "Y") {\n                  _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PO_PaymentMethod_ID"]);\n                } else {\n                  _PaymentMethod_ID = 0;\n                }\n              } else {\n                if (isvendor == "Y") {\n                  _PaymentMethod_ID = 0;\n                  PaymentBasetype = null;\n                  if (isCustomer == "Y") {\n                    _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PaymentMethod_ID"]);\n                  }\n                } else {\n                  if (isCustomer == "Y") {\n                    _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PaymentMethod_ID"]);\n                  }\n                }\n              }\n            }\n          }\n        }\n        if (_PaymentMethod_ID == 0) mTab.setValue("VA009_PaymentMethod_ID", null);else mTab.setValue("VA009_PaymentMethod_ID", _PaymentMethod_ID);\n\n        // Invoice Contact\n        var contID = Util.getValueOfInt(dr["AD_User_ID"]);\n        if (C_BPartner_ID.toString() == ctx.getContext("C_BPartner_ID")) {\n          var cont = ctx.getContext("AD_User_ID");\n          if (cont.length > 0) contID = Util.getValueOfInt(cont);\n        }\n        if (contID == 0) mTab.setValue("AD_User_ID", null);else {\n          mTab.setValue("AD_User_ID", contID);\n          mTab.setValue("Bill_User_ID", contID);\n        }\n\n        //\tPayment Term\n        var PaymentTermPresent = Util.getValueOfInt(mTab.getValue("C_PaymentTerm_ID")); // from BSO/BPO window\n        var C_Order_Blanket = Util.getValueOfDecimal(mTab.getValue("C_Order_Blanket"));\n        if (PaymentTermPresent > 0 && C_Order_Blanket > 0) {} else {\n          ii = Util.getValueOfInt(contractType == "ASR" ? dr["C_PaymentTerm_ID"] : dr["PO_PaymentTerm_ID"]);\n          var isPaymentTermUpdate = this.checkAdvancePaymentTerm(Util.getValueOfInt(mTab.getValue("C_DocTypeTarget_ID")), ii);\n          if (isPaymentTermUpdate) {\n            if (ii != 0)\n              //ii=0 when dr return ""\n              {\n                mTab.setValue("C_PaymentTerm_ID", ii);\n              }\n          } else {\n            mTab.setValue("C_PaymentTerm_ID", null);\n          }\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    oldValue = null;\n  };\n  VAS_CalloutContract.prototype.checkAdvancePaymentTerm = function (documnetType_Id, PaymentTerm_Id) {\n    var isAdvancePayTerm = true;\n    var dr = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA009_");\n    if (dr != null && !dr["VA009_"]) {\n      return isAdvancePayTerm;\n    }\n    if (Util.getValueOfInt(documnetType_Id) != 0 && Util.getValueOfInt(PaymentTerm_Id) != 0) {\n      var paramString = documnetType_Id.toString() + "," + PaymentTerm_Id.toString();\n      isAdvancePayTerm = VIS.dataContext.getJSONRecord("MOrder/checkAdvancePaymentTerm", paramString);\n    }\n    return isAdvancePayTerm;\n  };\n  /**\r\n   * VIS404 Set UOM on product selection on contract line tab of Contract Master window\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  VAS_CalloutContract.prototype.SetProductUOM = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var data = VIS.dataContext.getJSONRecord("MVASContract/GetProductUOM", value.toString());\n    if (data != null) {\n      mTab.setValue("C_UOM_ID", data);\n      this.setCalloutActive(false);\n      return "";\n    }\n  };\n  /**\r\n   * VIS404 Set fields blank on change of Contract Type\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  VAS_CalloutContract.prototype.UpdateIsSOTrx = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || value == false) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    ctx.setIsSOTrx(windowNo, value == "ASR" ? true : false);\n    if (value == "ASR") {\n      mTab.setValue("IsSOTrx", value == "ASR" ? true : false);\n      mTab.setValue("VAS_Jurisdiction", null);\n    }\n    this.setCalloutActive(false);\n  };\n  function dateDiffInYears(dateold, datenew) {\n    var ynew = datenew.getFullYear();\n    var mnew = datenew.getMonth();\n    var dnew = datenew.getDate();\n    var yold = dateold.getFullYear();\n    var mold = dateold.getMonth();\n    var dold = dateold.getDate();\n    var diff = ynew - yold;\n    if (mold > mnew) diff--;else {\n      if (mold == mnew) {\n        if (dold > dnew) diff--;\n      }\n    }\n    return diff;\n  }\n  ;\n  VIS.Model.VAS_CalloutContract = VAS_CalloutContract;\n  //***************VAS_CalloutContract End ************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/VAS_CalloutContract.js?\n}')},"./Areas/VAS/Scripts/model/calloutInvRevaluation.js":()=>{eval('{;\n(function (VIS, $) {\n  var Util = VIS.Utility.Util;\n  function calloutInvRevaluation() {\n    VIS.CalloutEngine.call(this, "VIS.calloutInvRevaluation"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(calloutInvRevaluation, VIS.CalloutEngine);\n\n  /**\r\n   * This functionis used to update Account Date as Document Date\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  calloutInvRevaluation.prototype.setAcctDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value == 0) {\n      return;\n    }\n    this.setCalloutActive(true);\n    if (mField.getColumnName() == "DateDoc") {\n      mTab.setValue("DateAcct", mTab.getValue("DateDoc"));\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * This Function is used to update Currency selected on Accounting Schema\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  calloutInvRevaluation.prototype.AccountingSchema = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value == 0) {\n      return;\n    }\n    this.setCalloutActive(true);\n    try {\n      var C_Currency_ID = VIS.dataContext.getJSONRecord("MInvRevaluation/GetAccountingSchemaCurrency", mTab.getValue("C_AcctSchema_ID").toString());\n      mTab.setValue("C_Currency_ID", C_Currency_ID);\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * This function is used to clear fields values\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  calloutInvRevaluation.prototype.clearFields = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value == 0) {\n      return;\n    }\n    this.setCalloutActive(true);\n    try {\n      // clear Warehouse when costing level is not "Warehouse" or "Warehouse+ Batch"\n      if (mField.getColumnName() == "CostingLevel" && !(mTab.getValue("CostingLevel") == "D" || mTab.getValue("CostingLevel") == "W")) {\n        mTab.setValue("M_Warehouse_ID", null);\n      }\n\n      // clear Revaluation Period when Revaluation Type is "On Available Quantity"\n      if (mField.getColumnName() == "RevaluationType" && mTab.getValue("RevaluationType") == "A") {\n        mTab.setValue("C_Period_ID", null);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * This function is used to calculate cost and update the respective fields (on Inventory Revaluation Line)\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  calloutInvRevaluation.prototype.updateCostAndDiffrences = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null) {\n      return;\n    }\n    this.setCalloutActive(true);\n    try {\n      // Get Inventory Revaluation Details\n      var dr = VIS.dataContext.getJSONRecord("MInvRevaluation/GetInvRevaluationDetails", mTab.getValue("M_InventoryRevaluation_ID").toString());\n      if (dr != null) {\n        // get Costing Precision\n        var CostingPrecision = Util.getValueOfInt(dr["CostingPrecision"]);\n        if (mField.getColumnName() == "NewCostPrice") {\n          mTab.setValue("DifferenceValue", (mTab.getValue("NewCostPrice") - mTab.getValue("CurrentCostPrice")).toFixed(CostingPrecision));\n          mTab.setValue("TotalDifference", (mTab.getValue("DifferenceValue") * mTab.getValue("QtyOnHand")).toFixed(CostingPrecision));\n          mTab.setValue("CurrentTotalValue", (mTab.getValue("CurrentCostPrice") * mTab.getValue("QtyOnHand")).toFixed(CostingPrecision));\n          mTab.setValue("RevaluedTotalValue", (mTab.getValue("NewCostPrice") * mTab.getValue("QtyOnHand")).toFixed(CostingPrecision));\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.calloutInvRevaluation = calloutInvRevaluation;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutInvRevaluation.js?\n}')},"./Areas/VAS/Scripts/model/calloutTerm.js":()=>{eval('{;\nVAS = window.VAS || {};\n;\nVAS.Model = window.VAS.Model || {};\n;\n(function (VAS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n\n  //************************\n  function CalloutTerm() {\n    VIS.CalloutEngine.call(this, "CalloutTerm"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutTerm, VIS.CalloutEngine); //inherit prototype\n\n  //to get term description data for term description field in \n  // term assignment tab in terms  window  from term details\n  // field in term master window\n  CalloutTerm.prototype.SetTermDescription = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      var res = VIS.dataContext.getJSONRecord("VAS/MTerm/GetTermDescription", value);\n      mTab.setValue("VAS_TermDescription", res);\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VAS.Model.VAS_CalloutTerm = CalloutTerm;\n  //**************CalloutTerm End*************\n})(VAS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutTerm.js?\n}')},"./Areas/VAS/Scripts/model/calloutbankstatement.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutBankStatement() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutBankStatement"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutBankStatement, VIS.CalloutEngine); //inherit CalloutEngine\n  /// <summary>\n  /// Bank Account Changed.\n  /// Update Beginning Balance\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab">tab</param>\n  /// <param name="mField">field</param>\n  /// <param name="value">value</param>\n  /// <returns>null or error message</returns>\n  CalloutBankStatement.prototype.BankAccount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_BankAccount_ID = value; //).intValue();\n\n      var paramString = value.toString();\n\n      //Get BankAccount information\n      var balance;\n      balance = VIS.dataContext.getJSONRecord("MBankStatement/GetCurrentBalance", paramString);\n\n      //dr = jQuery.parseJSON(VIS.dataContext.getJSONRecord("MBankStatement/GetBankAccount", paramString));\n      //MBankAccount ba = MBankAccount.Get(ctx, C_BankAccount_ID);\n      mTab.setValue("BeginningBalance", balance);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, "", err);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// BankStmt - Amount.\n  /// Calculate ChargeAmt = StmtAmt - TrxAmt - InterestAmt\n  /// or id Charge is entered - InterestAmt = StmtAmt - TrxAmt - ChargeAmt\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab">tab</param>\n  /// <param name="mField">field</param>\n  /// <param name="value">value</param>\n  /// <returns>null or error message</returns>\n  CalloutBankStatement.prototype.Amount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var stmt = mTab.getValue("StmtAmt");\n    if (stmt == null) {\n      stmt = 0;\n    }\n    var trx = mTab.getValue("TrxAmt");\n    if (trx == null) {\n      trx = 0;\n    }\n    //Update by Pratap: 18/11/15 - To set Charge and Statement Amount \n    var charge = mTab.getValue("ChargeAmt");\n    if (charge == null) {\n      charge = 0;\n    }\n\n    //var _chargeAmt = stmt - trx;\n    //var _statementAmt = stmt - (_chargeAmt - charge);\n    //if (mField.getColumnName() == "StmtAmt") {\n    //    mTab.setValue("ChargeAmt", _chargeAmt);\n    //}\n    //else if (mField.getColumnName() == "ChargeAmt") {\n    //    mTab.setValue("StmtAmt", _statementAmt);\n    //}\n\n    // JID_0333: Currently charge is only calculte only on change Statement Amount it should also be calcualte on change Interest Amount\n    var bd = stmt - trx;\n    //  Charge - calculate Interest\n    if (mField.getColumnName() == "ChargeAmt") {\n      var charge = value;\n      if (charge == null) {\n        charge = 0;\n      }\n      bd = bd - charge;\n      mTab.setValue("InterestAmt", bd);\n    }\n    //      Calculate Charge\n    else {\n      var interest = mTab.getValue("InterestAmt");\n      if (interest == null) {\n        interest = 0;\n      }\n      bd = bd - interest;\n      mTab.setValue("ChargeAmt", bd);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  //CalloutBankStatement.prototype.Amount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n  //    if (value == null || value.toString() == "") {\n  //        return "";\n  //    }\n  //    if (this.isCalloutActive()) {\n  //        return "";\n  //    }\n  //    this.setCalloutActive(true);\n\n  //      Get Stmt & Trx\n  //    var stmt = mTab.getValue("StmtAmt");\n  //    if (stmt == null) {\n  //        stmt = 0;\n  //    }\n  //    var trx = mTab.getValue("TrxAmt");\n  //    if (trx == null) {\n  //        trx = 0;\n  //    }\n  //    var bd = stmt - trx;\n  //      Charge - calculate Interest\n  //    if (mField.getColumnName() == "ChargeAmt") {\n  //        var charge = value;\n  //        if (charge == null) {\n  //            charge = 0;\n  //        }\n  //        bd = Decimal.Subtract(bd, charge);\n  //        bd = bd - charge;\n  //        log.trace(log.l5_DData, "Interest (" + bd + ") = Stmt(" + stmt + ") - Trx(" + trx + ") - Charge(" + charge + ")");\n  //        mTab.setValue("InterestAmt", bd);\n  //    }\n  //          Calculate Charge\n  //    else {\n  //        var interest = mTab.getValue("InterestAmt");\n  //        if (interest == null) {\n  //            interest = 0;\n  //        }\n  //          bd = Decimal.Subtract(bd, interest);\n  //        bd = bd - interest;\n  //        log.trace(log.l5_DData, "Charge (" + bd + ") = Stmt(" + stmt + ") - Trx(" + trx + ") - Interest(" + interest + ")");\n  //        mTab.setValue("ChargeAmt", bd);\n  //    }\n  //    this.setCalloutActive(false);\n  //    ctx = windowNo = mTab = mField = value = oldValue = null;\n  //    return "";\n  //};\n  /// <summary>\n  /// BankStmt - Payment.\n  /// Update Transaction Amount when payment is selected\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab">tab</param>\n  /// <param name="mField">field</param>\n  /// <param name="value">value</param>\n  /// <returns>null or error message</returns>\n  CalloutBankStatement.prototype.Payment = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      // JID_0333: Once user remove the payment reference Reset column Statement Amount, Transaction Amount, Charge Amount, Interest Amount, business partner and Invoice reference\n      mTab.setValue("StmtAmt", 0);\n      mTab.setValue("TrxAmt", 0);\n      mTab.setValue("ChargeAmt", 0);\n      mTab.setValue("C_BPartner_ID", 0);\n      mTab.setValue("C_Invoice_ID", 0);\n      //clear the C_ConversionType_ID\n      if (mTab.findColumn("C_ConversionType_ID") >= 0) {\n        mTab.setValue("C_ConversionType_ID", 0);\n      }\n      //setCalloutActive as false\n      this.setCalloutActive(false);\n      return "";\n    }\n    this.setCalloutActive(true);\n    var C_Payment_ID = mTab.getValue("C_Payment_ID");\n    if (C_Payment_ID == null || C_Payment_ID == 0) {\n      mTab.setValue("StmtAmt", 0);\n      mTab.setValue("TrxAmt", 0);\n      mTab.setValue("ChargeAmt", 0);\n      mTab.setValue("C_BPartner_ID", 0);\n      mTab.setValue("C_Invoice_ID", 0);\n      //clear the C_ConversionType_ID if C_Payment_ID is zero or null\n      if (mTab.findColumn("C_ConversionType_ID") >= 0) {\n        mTab.setValue("C_ConversionType_ID", 0);\n      }\n      //setCalloutActive as false\n      this.setCalloutActive(false);\n      return "";\n    }\n    //\n    var stmt = mTab.getValue("StmtAmt");\n    if (stmt == null) {\n      stmt = 0;\n    }\n\n    //JID_0084: if the Payment currency is different from the bank statement currency it will add the converted amount based in the currency conversion available for selected date.\n    var C_Currency_ID = mTab.getValue("C_Currency_ID");\n    var statementDate = mTab.getValue("DateAcct"); /*ValutaDate*/\n    //Get the Org_ID from the StatementLine - Tab\n    var org_Id = mTab.getValue("AD_Org_ID");\n\n    // JID_1418: When select payment on Bank statement line, system gives an error meassage\n    //When select payment on Bank statement line with out select the statmenet Date, return error meassage\n    if (statementDate == null) {\n      //statementDate = new Date();\n      mTab.setValue("C_Payment_ID", 0);\n      this.setCalloutActive(false);\n      return "PlzSelectStmtDate";\n    }\n\n    //var sql = "SELECT PayAmt FROM C_Payment_v WHERE C_Payment_ID=@C_Payment_ID";\t\t//\t1\n    //var dr = null;\n    //var param = [];\n    try {\n      //passed statement Date, Org_ID as in JSON format\n      var paramStr = C_Payment_ID.toString() + "," + C_Currency_ID.toString() + "," + statementDate + "," + org_Id.toString(); //JSON.stringify(statementDate)\n      var payAmt = VIS.dataContext.getJSONRecord("MBankStatement/GetPayment", paramStr);\n      //Update the BankStatementLine fields\n      if (payAmt != null && payAmt.length > 0) {\n        if (payAmt[0]["ConvertedAmt"] != "") {\n          mTab.setValue("C_Payment_ID", 0);\n          this.setCalloutActive(false);\n          return payAmt[0]["ConvertedAmt"];\n        }\n        mTab.setValue("TrxAmt", payAmt[0]["payAmt"]);\n        mTab.setValue("StmtAmt", payAmt[0]["payAmt"]);\n\n        //to Avoid Exception if Column not exists Used findColumn()\n        if (mTab.findColumn("C_ConversionType_ID") >= 0) {\n          mTab.setValue("C_ConversionType_ID", payAmt[0]["C_ConversionType_ID"]);\n        }\n        //Update PaymentMethod, CheckNo and CheckDate When select the Payment from Bank Statement Line\n        if (mTab.findColumn("VA009_PaymentMethod_ID") >= 0 && mTab.getValue("VA009_PaymentMethod_ID") > 0) {\n          mTab.setValue("VA009_PaymentMethod_ID", payAmt[0]["VA009_PaymentMethod_ID"]);\n        } else if (mTab.findColumn("VA009_PaymentMethod_ID") >= 0) {\n          mTab.setValue("VA009_PaymentMethod_ID", null);\n        }\n        if (mTab.getValue("EFTCheckNo") == null && payAmt[0]["EFTCheckNo"] != null) {\n          mTab.setValue("EFTCheckNo", payAmt[0]["EFTCheckNo"]);\n        }\n        if (payAmt[0]["EFTValutaDate"] != null) {\n          mTab.setValue("EFTValutaDate", payAmt[0]["EFTValutaDate"]);\n        }\n        if (mTab.findColumn("TenderType") >= 0 && payAmt[0]["TenderType"] != null) {\n          mTab.setValue("TenderType", payAmt[0]["TenderType"]);\n        }\n        //Requirement change no need to update DateAcct by the Payment reference\n        //mTab.setValue("DateAcct", Globalize.format(new Date(payAmt[0]["DateAcct"]), "yyyy-MM-dd"));\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, "BankStmt_Payment", err);\n      return err.toString();\n    }\n    this.setCalloutActive(false);\n    //  Recalculate Amounts\n    this.Amount(ctx, windowNo, mTab, mField, value);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  // Callout on change of Account Date on Bank Statement Line.\n  CalloutBankStatement.prototype.SetConvertedAmt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    var C_Payment_ID = Util.getValueOfInt(mTab.getValue("C_Payment_ID"));\n    if (C_Payment_ID == 0) {\n      return "";\n    }\n\n    //var stmt = mTab.getValue("StmtAmt");\n    //if (stmt == null) {\n    //    stmt = 0;\n    //}\n\n    var C_Currency_ID = mTab.getValue("C_Currency_ID");\n    var acctDate = mTab.getValue("DateAcct"); /*ValutaDate*/\n    //When select payment on Bank statement line, system gives an error meassage\n    if (acctDate == null) {\n      return "PlzSelectStmtDate";\n    }\n    try {\n      var paramStr = C_Payment_ID.toString() + "," + C_Currency_ID.toString() + "," + acctDate.toString();\n      var payAmt = VIS.dataContext.getJSONRecord("MBankStatement/GetConvertedAmt", paramStr);\n      mTab.setValue("StmtAmt", payAmt);\n      //set transcation Amount also if change the date\n      mTab.setValue("TrxAmt", payAmt);\n      //if (stmt == 0) {\n      //    mTab.setValue("StmtAmt", payAmt);\n      //}\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, "BankStmt_DateAcct", err);\n      return err.toString();\n    }\n\n    //  Recalculate Amounts\n    this.Amount(ctx, windowNo, mTab, mField, value);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutBankStatement = CalloutBankStatement;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutbankstatement.js?\n}')},"./Areas/VAS/Scripts/model/calloutbpartner.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutBPartner() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutBPartner");\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutBPartner, VIS.CalloutEngine); //inherit prototype\n  CalloutBPartner.prototype.BPGroup = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      // var _sql = "select M_ReturnPolicy_ID, M_DiscountSchema_ID, M_PRICELIST_ID, PO_PriceList_ID,PO_DiscountSchema_ID,PO_ReturnPolicy_ID from C_BP_Group where C_BP_Group_ID=" + Util.getValueOfInt(value);\n      //var ds = VIS.DB.executeDataSet(_sql);\n      var idr = VIS.dataContext.getJSONRecord("MBPartner/GetBPGroup", value.toString());\n      var IsCustomer = mTab.getValue("IsCustomer");\n      var IsVendor = mTab.getValue("IsVendor");\n      if (IsCustomer) {\n        if (idr != null && Object.keys(idr).length > 0) {\n          //var _returnPolicy = Util.getValueOfInt(idr.M_ReturnPolicy_ID);\n          //var _discountSchema = Util.getValueOfInt(idr.M_DiscountSchema_ID);\n          //var _pricelist = Util.getValueOfInt(idr.M_PriceList_ID);\n          mTab.setValue("M_ReturnPolicy_ID", Util.getValueOfInt(idr.M_ReturnPolicy_ID));\n          mTab.setValue("M_DiscountSchema_ID", Util.getValueOfInt(idr.M_DiscountSchema_ID));\n          mTab.setValue("M_PRICELIST_ID", Util.getValueOfInt(idr.M_PriceList_ID));\n        }\n      }\n      if (IsVendor) {\n        if (idr != null && Object.keys(idr).length > 0) {\n          //_returnPolicy = Util.getValueOfInt(idr.PO_ReturnPolicy_ID);\n          //_discountSchema = Util.getValueOfInt(idr.PO_DiscountSchema_ID);\n          //_pricelist = Util.getValueOfInt(idr.PO_PriceList_ID);\n          mTab.setValue("PO_ReturnPolicy_ID", Util.getValueOfInt(idr.PO_ReturnPolicy_ID));\n          mTab.setValue("PO_DiscountSchema_ID", Util.getValueOfInt(idr.PO_DiscountSchema_ID));\n          mTab.setValue("PO_PriceList_ID", Util.getValueOfInt(idr.PO_PriceList_ID));\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString()); // SD\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutBPartner = CalloutBPartner;\n\n  //**************CalloutSetBP Start******************\n  function CalloutSetBP() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutSetBP"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutSetBP, VIS.CalloutEngine); //inherit prototype\n  CalloutSetBP.prototype.SetBP = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      mTab.setValue("C_BPartner_ID", Util.getValueOfInt(value));\n      this.setCalloutActive(false);\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutSetBP = CalloutSetBP;\n  //**************CalloutSetBP End******************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutbpartner.js?\n}')},"./Areas/VAS/Scripts/model/calloutcheckinout.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutCheckInOut() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutCheckInOut"); //must call\n  }\n  ;\n  /**\r\n  *  @param ctx      Context\r\n  *  @param windowNo current Window No\r\n  *  @param mTab     Model Tab\r\n  *  @param mField   Model Field\r\n  *  @param value    The new value\r\n  *  @return Error message or ""\r\n  */\n  CalloutCheckInOut.prototype.TypeSelection = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    //Boolean flag1=Boolean.parseBoolean(value.toString());\n    var flag1 = Util.getValueOfBoolean(value);\n    if (flag1 == null) {\n      return "";\n    }\n    if (flag1 == true) {\n      mTab.setValue("flag1", true);\n    } else {\n      mTab.setValue("flag1", false);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *  \r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   */\n\n  CalloutCheckInOut.prototype.RecordSort = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n\n    //Boolean flag2=Boolean.parseBoolean(value.toString());\n    var flag2 = Util.getValueOfBoolean(value);\n    if (flag2 == null) return "";\n    if (flag2 == true) {\n      mTab.setValue("flag2", true);\n    } else {\n      mTab.setValue("flag2", false);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /**\r\n   *  \r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   */\n  CalloutCheckInOut.prototype.EndDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    //Timestamp a=(Timestamp)value;\n    var a = Util.getValueOfDateTime(value);\n    if (a == null || a.equals(0)) return "";\n    var enddate = Util.getValueOfDateTime(value);\n    var startdate = Util.getValueOfDateTime(mTab.getValue("DATE_FROM"));\n    try {\n      enddate = Util.getValueOfDateTime(mTab.getValue("TILL_DATE"));\n      if (enddate.compareTo(startdate) < 0)\n        //if(enddate.before(startdate))\n        {\n          //Object ob[]={"ok"};\n          //JOptionPane.showOptionDialog(new JFrame(),"\'End Date\' cannot appear Before \'Start Date\'","FO",0,JOptionPane.ERROR_MESSAGE,null,ob,ob[0]);\n          // ShowMessage.Error("EndAndStartDate", true);\n          VIS.ADialog.info("EndAndStartDate");\n          mTab.setValue("TILL_DATE", startdate);\n        }\n    } catch (err) {\n      this.setCalloutActive(false);\n      //e.getLocalizedMessage();\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *  \r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   */\n  CalloutCheckInOut.prototype.StartDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    // Timestamp b=(Timestamp)value;\n    var b = Util.getValueOfDateTime(value);\n    if (b == null || b.equals(0)) return "";\n    var startdate = Util.getValueOfDateTime(mTab.getValue("DATE_FROM"));\n    var enddate = Util.getValueOfDateTime(mTab.getValue("TILL_DATE"));\n    try {\n      startdate = Util.getValueOfDateTime(mTab.getValue("DATE_FROM"));\n      if (startdate.compareTo(enddate) > 0)\n        //if(startdate.after(enddate))\n        {\n          mTab.setValue("TILL_DATE", startdate);\n        }\n    } catch (err) {\n      this.setCalloutActive(false);\n      //\te.getLocalizedMessage();\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutCheckInOut = CalloutCheckInOut;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutcheckinout.js?\n}')},"./Areas/VAS/Scripts/model/calloutcontract.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  var steps = false;\n  var countEd011 = 0;\n\n  //*************** CalloutContract ************  \n  function CalloutContract() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutContract"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutContract, VIS.CalloutEngine); //inherit prototype\n  CalloutContract.prototype.InvoiceCount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    var SDate = Util.getValueOfDateTime(mTab.getValue("StartDate"));\n    var Edate = mTab.getValue("EndDate");\n    // var frequency = Util.getValueOfInt(mTab.getValue("C_Frequency_ID"));\n    //var Sql = "Select NoOfDays from C_Frequency where C_Frequency_ID=" + frequency;\n    //var days = Util.getValueOfInt(VIS.DB.executeScalar(Sql, null, null));\n\n    var days = VIS.dataContext.getJSONRecord("MOrderLine/GetNoOfDays", Util.getValueOfString(mTab.getValue("C_Frequency_ID")));\n    var totaldays = (Edate - SDate).Days;\n    var count = totaldays / days;\n    mTab.setValue("TotalInvoice", count);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutContract.prototype.EndDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    var SDate = new Date(mTab.getValue("StartDate"));\n    var startDate = new Date(mTab.getValue("StartDate"));\n    //var frequency = Util.getValueOfInt(mTab.getValue("C_Frequency_ID"));\n    var months = VIS.dataContext.getJSONRecord("MOrderLine/GetNoOfMonths", Util.getValueOfString(mTab.getValue("C_Frequency_ID")));\n    //var Sql = "Select NoOfMonths from C_Frequency where C_Frequency_ID=" + frequency;\n    //var months = Util.getValueOfInt(VIS.DB.executeScalar(Sql, null, null));\n    var invoice = Util.getValueOfInt(mTab.getValue("TotalInvoice"));\n    //var End = SDate.AddMonths(months * invoice).AddDays(-1);\n    //   var End = SDate.setDate(SDate.getMonth() + (months * invoice));  by Karan\n    //var End = SDate.getDate() + "/" + (SDate.getMonth() + (months * invoice)) + "/" + SDate.getFullYear();\n    var End = SDate.setMonth(SDate.getMonth() + months * invoice);\n    End = new Date(SDate.setDate(SDate.getDate() - 1));\n    mTab.setValue("EndDate", End);\n    End = new Date(End);\n    End = End.toISOString();\n    SDate = startDate.toISOString();\n    if (End < SDate) {\n      mTab.setValue("EndDate", startDate);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutContract.prototype.BillStartDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var SDate = new Date(mTab.getValue("StartDate"));\n    var billStartDate = new Date(mTab.getValue("BillStartDate"));\n    if (billStartDate.toISOString() < SDate.toISOString()) {\n      // ShowMessage.Info("StartDateShouldBeLessThanBillStartDate", true, null, null);\n      VIS.ADialog.info("StartDateShouldBeLessThanBillStartDate");\n      mTab.setValue("BillStartDate", mTab.getValue("StartDate"));\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutContract.prototype.StartDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    //var frequency = Util.getValueOfInt(mTab.getValue("C_Frequency_ID"));\n    //var Sql = "Select NoOfDays from C_Frequency where C_Frequency_ID=" + frequency;\n    //var days = Util.getValueOfInt(VIS.DB.executeScalar(Sql, null, null));\n\n    var SDate = new Date(mTab.getValue("StartDate"));\n    var days = VIS.dataContext.getJSONRecord("MOrderLine/GetNoOfDays", Util.getValueOfString(mTab.getValue("C_Frequency_ID")));\n    var totalInvoice = Util.getValueOfInt(mTab.getValue("TotalInvoice"));\n    var cycles = totalInvoice * days;\n    //var endDate =SDate.addDays(Util.getValueOfDouble(cycles));\n    var endDate = new Date(SDate.setDate(SDate.getDay() + Util.getValueOfDouble(cycles)));\n    endDate = endDate.toISOString();\n    mTab.setValue("EndDate", endDate);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutContract.prototype.StartDateChange = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    //var frequency = Util.getValueOfInt(mTab.getValue("C_Frequency_ID"));\n    //var Sql = "Select NoOfMonths from C_Frequency where C_Frequency_ID=" + frequency;\n    //var months = Util.getValueOfInt(VIS.DB.executeScalar(Sql, null, null));\n\n    var months = VIS.dataContext.getJSONRecord("MOrderLine/GetNoOfMonths", Util.getValueOfString(mTab.getValue("C_Frequency_ID")));\n    var totalInvoice = Util.getValueOfInt(mTab.getValue("TotalInvoice"));\n    var SDate = new Date(value);\n    var startDate = new Date(value);\n    //var endDate = SDate.addMonths(months * totalInvoice).addDays(-1);\n    //var endDate = SDate.setDate(SDate.getMonth() + (months * totalInvoice));\n    var endDate = SDate.setMonth(SDate.getMonth() + months * totalInvoice);\n    endDate = new Date(SDate.setDate(SDate.getDate() - 1));\n    mTab.setValue("EndDate", endDate.toISOString());\n    endDate = endDate.toISOString();\n    SDate = startDate.toISOString();\n    if (endDate < SDate) {\n      mTab.setValue("EndDate", SDate);\n    }\n    mTab.setValue("BillStartDate", mTab.getValue("StartDate"));\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutContract = CalloutContract;\n  //***************CalloutContract End ************\n\n  //****************CalloutContractQty Start ******\n  function CalloutContractQty() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutContractQty"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutContractQty, VIS.CalloutEngine); //inherit CalloutEngine\n  //\tDebug Steps\t\t\n  /// <summary>\n  ///\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutContractQty.prototype.Qty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    var price = Util.getValueOfDecimal(mTab.getValue("PriceActual"));\n    var val = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n    //\n    var C_Tax_ID = 0;\n    var Rate = VIS.Env.ZERO;\n    var LineAmount = "";\n    var TotalRate = VIS.Env.ZERO;\n    mTab.setValue("LineNetAmt", price * val);\n    C_Tax_ID = Util.getValueOfInt(mTab.getValue("C_Tax_ID"));\n\n    // if Surcharge Tax is selected on Tax Rate, calculate surcharge tax amount accordingly\n    if (mTab.getField("SurchargeAmt") != null) {\n      var StdPrecision = 0;\n      var IsTaxIncluded = false;\n      var currency = VIS.dataContext.getJSONRecord("MPriceList/GetPriceListData", mTab.getValue("M_PriceList_ID").toString());\n      if (currency != null) {\n        StdPrecision = currency["StdPrecision"];\n        IsTaxIncluded = "Y" == currency["IsTaxIncluded"];\n      }\n      var LineNetAmt = Util.getValueOfDecimal(mTab.getValue("LineNetAmt"));\n      var dr = VIS.dataContext.getJSONRecord("MTax/CalculateSurcharge", C_Tax_ID.toString() + "," + LineNetAmt.toString() + "," + StdPrecision.toString() + "," + IsTaxIncluded.toString());\n      TotalRate = dr["TaxAmt"];\n      mTab.setValue("TaxAmt", TotalRate);\n      mTab.setValue("SurchargeAmt", dr["SurchargeAmt"]);\n      if (!IsTaxIncluded) {\n        mTab.setValue("GrandTotal", LineNetAmt + TotalRate + dr["SurchargeAmt"]);\n      } else {\n        mTab.setValue("GrandTotal", LineNetAmt);\n      }\n    } else {\n      //var sqltax = "select rate from c_tax WHERE c_tax_id=" + C_Tax_ID + "";\n      //Rate = Util.getValueOfDecimal(VIS.DB.executeScalar(sqltax, null, null));\n\n      Rate = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", C_Tax_ID.toString());\n      var LineNetAmt = Util.getValueOfDecimal(mTab.getValue("LineNetAmt"));\n      TotalRate = Util.getValueOfDecimal(Util.getValueOfDecimal(LineNetAmt) * Util.getValueOfDecimal(Rate) / 100);\n      TotalRate = TotalRate.toFixed(2);\n      mTab.setValue("taxamt", TotalRate);\n      mTab.setValue("GrandTotal", price * val + Util.getValueOfDecimal(mTab.getValue("TaxAmt")));\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutContractQty = CalloutContractQty;\n  //****************CalloutContractQty End ******\n\n  //*************CalloutContractProduct Start ******\n  function CalloutContractProduct() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutContractProduct"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutContractProduct, VIS.CalloutEngine); //inherit prototype\n  CalloutContractProduct.prototype.ContractProduct = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    var M_Product_ID = Util.getValueOfInt(mTab.getValue("M_Proudct_ID"));\n    if (M_Product_ID != 0) {\n      if (Util.getValueOfBoolean(value)) {\n        mTab.setValue("PriceList", 0);\n        mTab.setValue("PriceLimit", 0);\n        mTab.setValue("PriceActual", 0);\n        mTab.setValue("PriceEntered", 0);\n      }\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutContractProduct = CalloutContractProduct;\n  //************* CalloutContractProduct End ******\n\n  //***************CalloutOrderContract Start********************\n\n  function CalloutOrderContract() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutOrderContract"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutOrderContract, VIS.CalloutEngine); //inherit prototype\n\n  //\tDebug Steps\t\t\n\n  /// <summary>\n  /// Order Header Change - DocType.\n  /// - InvoiceRuld/DeliveryRule/PaymentRule\n  /// - temporary Document\n  ///   Context:\n  ///   - DocSubTypeSO\n  ///   - HasCharges\\\n  ///   - (re-sets Business Partner info of required)\n  ///            *  @param ctx      \n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutOrderContract.prototype.DocType = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    var INVOICERULE_AfterOrderDelivered = "O";\n    /** Customer Schedule after Delivery = S */\n    var INVOICERULE_CustomerScheduleAfterDelivery = "S";\n\n    /** InvoiceRule AD_Reference_ID=150 */\n    var INVOICERULE_AD_Reference_ID = 150;\n    /** After Delivery = D */\n    var INVOICERULE_AfterDelivery = "D";\n    /** Immediate = I */\n    var INVOICERULE_Immediate = "I";\n    /** After Order delivered = O */\n    var INVOICERULE_AfterOrderDelivered = "O";\n    /** Customer Schedule after Delivery = S */\n    var INVOICERULE_CustomerScheduleAfterDelivery = "S";\n\n    /** DeliveryRule AD_Reference_ID=151 */\n    var DELIVERYRULE_AD_Reference_ID = 151;\n    /** Availability = A */\n    var DELIVERYRULE_Availability = "A";\n    /** Force = F */\n    var DELIVERYRULE_Force = "F";\n    /** Complete Line = L */\n    var DELIVERYRULE_CompleteLine = "L";\n    /** Manual = M */\n    var DELIVERYRULE_Manual = "M";\n    /** Complete Order = O */\n    var DELIVERYRULE_CompleteOrder = "O";\n    /** After Receipt = R */\n    var DELIVERYRULE_AfterReceipt = "R";\n\n    /** Sales Order Sub Type - SO\t*/\n    var DocSubTypeSO_Standard = "SO";\n    /** Sales Order Sub Type - OB\t*/\n    var DocSubTypeSO_Quotation = "OB";\n    /** Sales Order Sub Type - ON\t*/\n    var DocSubTypeSO_Proposal = "ON";\n    /** Sales Order Sub Type - PR\t*/\n    var DocSubTypeSO_Prepay = "PR";\n    /** Sales Order Sub Type - WR\t*/\n    var DocSubTypeSO_POS = "WR";\n    /** Sales Order Sub Type - WP\t*/\n    var DocSubTypeSO_Warehouse = "WP";\n    /** Sales Order Sub Type - WI\t*/\n    var DocSubTypeSO_OnCredit = "WI";\n    /** Sales Order Sub Type - RM\t*/\n    var DocSubTypeSO_RMA = "RM";\n    var sql = "";\n    try {\n      if (value == null || value.toString() == "") {\n        return "";\n      }\n      var C_DocType_ID = value; //\tActually C_DocTypeTarget_ID\n      if (C_DocType_ID == null || C_DocType_ID == 0) {\n        return "";\n      }\n      var oldDocNo;\n      //if (mTab.getValue("DocumentNo") == DBNull.Value)\n      //{\n      //    oldDocNo = DBNull.Value.toString();\n      //}\n      //else\n      //{\n      oldDocNo = mTab.getValue("DocumentNo");\n      // }\n      //\tRe-Create new DocNo, if there is a doc number already\n      //\tand the existing source used a different Sequence number\n      //var oldDocNo = (String)mTab.getValue("DocumentNo");\n      //var newDocNo = (oldDocNo == null);\n      var newDocNo = oldDocNo == null;\n      if (!newDocNo && oldDocNo.toString().startsWith("<") && oldDocNo.toString().endsWith(">")) newDocNo = true;\n      var oldC_DocType_ID = mTab.getValue("C_DocType_ID");\n\n      //sql = "SELECT d.DocSubTypeSO,d.HasCharges,\'N\',"\t\t\t//\t1..3\n      //    + "d.IsDocNoControlled,s.CurrentNext,s.CurrentNextSys,"     //  4..6\n      //    + "s.AD_Sequence_ID,d.IsSOTrx, d.IsReturnTrx "              //\t7..9\n      //    /*//jz right outer join\n      //    + "FROM C_DocType d, AD_Sequence s "\n      //    + "WHERE C_DocType_ID=?"\t//\t#1\n      //    + " AND d.DocNoSequence_ID=s.AD_Sequence_ID(+)"; */\n      //    + "FROM C_DocType d "\n      //    + "LEFT OUTER JOIN AD_Sequence s ON (d.DocNoSequence_ID=s.AD_Sequence_ID) "\n      //    + "WHERE C_DocType_ID=";\t//\t#1\n\n      var AD_Sequence_ID = 0;\n      //DataSet ds = new DataSet();\n      var ds = null;\n      /*ds = VIS.dataContext.getJSONRecord("MDocType/GetDocTypeData", C_DocType_ID.toString());*/\n      //\tGet old AD_SeqNo for comparison\n      if (!newDocNo && oldC_DocType_ID != 0) {\n        ds = VIS.dataContext.getJSONRecord("MDocType/GetDocTypeData", oldC_DocType_ID.toString());\n        //ds = ds + oldC_DocType_ID;\n        //ds = VIS.DB.executeDataset(sql, null);\n        //ds.setInt(1, oldC_DocType_ID.intValue());\n        //ResultSet dr = ds.executeQuery();\n        for (var i = 0; i < Object.keys(ds).length; i++) {\n          // DataRow dr = ds.Tables[0].Rows[i];\n          AD_Sequence_ID = Util.getValueOfInt(ds[i].AD_Sequence_ID);\n        }\n      } else {\n        ds = VIS.dataContext.getJSONRecord("MDocType/GetDocTypeData", C_DocType_ID.toString());\n        //ds = ds + C_DocType_ID;\n        //ds = VIS.DB.executeDataset(sql, null);\n      }\n      var DocSubTypeSO = "";\n      var isSOTrx = true;\n      var isReturnTrx = false;\n      //\twe found document type\n      for (var i = 0; i < Object.keys(ds).length; i++) {\n        // DataRow dr = ds.Tables[0].Rows[i];\n        //\tSet Context:\tDocument Sub Type for Sales Orders\n        DocSubTypeSO = Util.getValueOfString(ds[i].DocSubTypeSO);\n        if (DocSubTypeSO == null) DocSubTypeSO = "--";\n        ctx.setContext(windowNo, "OrderType", DocSubTypeSO);\n        //\tNo Drop Ship other than Standard\n        if (!DocSubTypeSO.toString().equals(DocSubTypeSO_Standard)) mTab.setValue("IsDropShip", "N");\n\n        //\tIsSOTrx\n        if ("N".toString().equals(Util.getValueOfString(ds[i].IsSOTrx))) isSOTrx = false;\n\n        //IsReturnTrx\n        isReturnTrx = "Y".toString().equals(Util.getValueOfString(ds[i].IsReturnTrx));\n\n        //\tSkip these steps for RMA. These are copied from the Original Order\n        if (!isReturnTrx) {\n          if (DocSubTypeSO.toString().equals(DocSubTypeSO_POS)) mTab.setValue("DeliveryRule", DELIVERYRULE_Force);else if (DocSubTypeSO.toString().equals(DocSubTypeSO_Prepay)) mTab.setValue("DeliveryRule", DELIVERYRULE_AfterReceipt);else mTab.setValue("DeliveryRule", DELIVERYRULE_Availability);\n\n          //\tInvoice Rule\n          if (DocSubTypeSO.toString().equals(DocSubTypeSO_POS) || DocSubTypeSO.toString().equals(DocSubTypeSO_Prepay) || DocSubTypeSO.toString().equals(DocSubTypeSO_OnCredit)) mTab.setValue("InvoiceRule", INVOICERULE_Immediate);else mTab.setValue("InvoiceRule", INVOICERULE_AfterDelivery);\n\n          //\tPayment Rule - POS Order\n          if (DocSubTypeSO.toString().equals(DocSubTypeSO_POS)) mTab.setValue("PaymentRule", PAYMENTRULE_Cash);else mTab.setValue("PaymentRule", PAYMENTRULE_OnCredit);\n\n          //\tSet Context:\n          ctx.setContext(windowNo, "HasCharges", Util.getValueOfString(ds[i].HasCharges));\n        } else\n          // Returns\n          {\n            if (DocSubTypeSO.toString().equals(DocSubTypeSO_POS)) mTab.setValue("DeliveryRule", DELIVERYRULE_Force);else mTab.setValue("DeliveryRule", DELIVERYRULE_Manual);\n          }\n\n        //\tDocumentNo\n        if (ds[i].CurrentNext.toString().equals("Y"))\n          //\tIsDocNoControlled\n          {\n            if (!newDocNo && AD_Sequence_ID != Util.getValueOfInt(ds.AD_Sequence_ID)) newDocNo = true;\n            if (newDocNo) try {\n              //if (/*Ini.IsPropertyBool(Ini._COMPIERESYS) &&*/ GetCtx().GetAD_Client_ID() < 1000000)\n              //{\n              //    mTab.setValue("DocumentNo", "<" + dr[5].toString() + ">");\n              //}\n              //else\n              //{\n              mTab.setValue("DocumentNo", "<" + Util.getValueOfString(ds[i].CurrentNext) + ">");\n              // }\n            } catch (err) {\n              this.setCalloutActive(false);\n            }\n          }\n      }\n      // Skip remaining steps for RMA\n      if (isReturnTrx) return "";\n      //  When BPartner is changed, the Rules are not set if\n      //  it is a POS or Credit Order (i.e. defaults from Standard BPartner)\n      //  This re-reads the Rules and applies them.\n      if (DocSubTypeSO.toString().equals(DocSubTypeSO_POS) || DocSubTypeSO.toString().equals(DocSubTypeSO_Prepay))\n        //  not for POS/PrePay\n        {} else {\n        var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n        //sql = "SELECT PaymentRule,C_PaymentTerm_ID,"            //  1..2\n        //    + "InvoiceRule,DeliveryRule,"                       //  3..4\n        //    + "FreightCostRule,DeliveryViaRule, "               //  5..6\n        //    + "PaymentRulePO,PO_PaymentTerm_ID "\n        //    + "FROM C_BPartner "\n        //    + "WHERE C_BPartner_ID=" + C_BPartner_ID;\t\t//\t#1\n        //ds = VIS.DB.executeDataset(sql, null);\n        ds = VIS.dataContext.getJSONRecord("MBPartner/GetBPDocTypeData", C_BPartner_ID.toString());\n        for (var i = 0; i < Object.keys(ds).length; i++) {\n          //\tPaymentRule\n\n          //var s = dr[isSOTrx ? "PaymentRule" : "PaymentRulePO"].toString();\n          var s = Util.getValueOfString(isSOTrx ? ds[i].paymentrule : ds[i].paymentrulepo);\n          if (s != null && s.toString().length != 0) {\n            if (isSOTrx && (s.toString().equals("B") || s.toString().equals("S") || s.toString().equals("U")))\n              //\tNo Cash/Check/Transfer for SO_Trx\n              s = "P"; //  Payment Term\n            if (!isSOTrx && s.toString().equals("B"))\n              //\tNo Cash for PO_Trx\n              s = "P"; //  Payment Term\n            mTab.setValue("PaymentRule", s);\n          }\n          //\tPayment Term\n          //var ii = Util.getValueOfInt(dr[isSOTrx ? "C_PaymentTerm_ID" : "PO_PaymentTerm_ID"].toString());\n          var ii = Util.getValueOfInt(isSOTrx ? ds[i].c_paymentterm_id : ds[i].po_paymentterm_id);\n          //if (!dr.wasNull())\n          if (ii != null) {\n            mTab.setValue("C_PaymentTerm_ID", ii);\n          }\n          //\tInvoiceRule\n          s = ds[i].InvoiceRule.toString();\n          if (s != null && s.length != 0) mTab.setValue("InvoiceRule", s);\n          //\tDeliveryRule\n          s = ds[i].DeliveryRule.toString();\n          if (s != null && s.length != 0) mTab.setValue("DeliveryRule", s);\n          //\tFreightCostRule\n          s = ds[i].FreightCostRule.toString();\n          if (s != null && s.length != 0) mTab.setValue("FreightCostRule", s);\n          //\tDeliveryViaRule\n          s = ds[i].DeliveryViaRule.toString();\n          if (s != null && s.length != 0) mTab.setValue("DeliveryViaRule", s);\n        }\n      } //  re-read customer rules\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, sql, err);\n      return e.message;\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Order Header - BPartner.\n  /// - M_PriceList_ID (+ Context)\n  /// - C_BPartner_Location_ID\n  /// - Bill_BPartner_ID/Bill_Location_ID\n  /// \t- AD_User_ID\n  /// \t- POReference\n  /// \t- SO_Description\n  /// \t- IsDiscountPrinted\n  /// \t- InvoiceRule/DeliveryRule/PaymentRule/FreightCost/DeliveryViaRule\n  /// \t- C_PaymentTerm_ID\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutOrderContract.prototype.BPartner = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    var INVOICERULE_AfterOrderDelivered = "O";\n    /** Customer Schedule after Delivery = S */\n    var INVOICERULE_CustomerScheduleAfterDelivery = "S";\n\n    /** InvoiceRule AD_Reference_ID=150 */\n    var INVOICERULE_AD_Reference_ID = 150;\n    /** After Delivery = D */\n    var INVOICERULE_AfterDelivery = "D";\n    /** Immediate = I */\n    var INVOICERULE_Immediate = "I";\n    /** After Order delivered = O */\n    var INVOICERULE_AfterOrderDelivered = "O";\n    /** Customer Schedule after Delivery = S */\n    var INVOICERULE_CustomerScheduleAfterDelivery = "S";\n\n    /** DeliveryRule AD_Reference_ID=151 */\n    var DELIVERYRULE_AD_Reference_ID = 151;\n    /** Availability = A */\n    var DELIVERYRULE_Availability = "A";\n    /** Force = F */\n    var DELIVERYRULE_Force = "F";\n    /** Complete Line = L */\n    var DELIVERYRULE_CompleteLine = "L";\n    /** Manual = M */\n    var DELIVERYRULE_Manual = "M";\n    /** Complete Order = O */\n    var DELIVERYRULE_CompleteOrder = "O";\n    /** After Receipt = R */\n    var DELIVERYRULE_AfterReceipt = "R";\n\n    /** Sales Order Sub Type - SO\t*/\n    var DocSubTypeSO_Standard = "SO";\n    /** Sales Order Sub Type - OB\t*/\n    var DocSubTypeSO_Quotation = "OB";\n    /** Sales Order Sub Type - ON\t*/\n    var DocSubTypeSO_Proposal = "ON";\n    /** Sales Order Sub Type - PR\t*/\n    var DocSubTypeSO_Prepay = "PR";\n    /** Sales Order Sub Type - WR\t*/\n    var DocSubTypeSO_POS = "WR";\n    /** Sales Order Sub Type - WP\t*/\n    var DocSubTypeSO_Warehouse = "WP";\n    /** Sales Order Sub Type - WI\t*/\n    var DocSubTypeSO_OnCredit = "WI";\n    /** Sales Order Sub Type - RM\t*/\n    var DocSubTypeSO_RMA = "RM";\n    var sql = "";\n    try {\n      if (value == null || value == 0 || value.toString() == "") {\n        return "";\n      }\n      var C_BPartner_ID = 0;\n      if (value != null) C_BPartner_ID = Util.getValueOfInt(value.toString());\n      if (C_BPartner_ID == 0) return "";\n\n      // Skip rest of steps for RMA. These fields are copied over from the orignal order instead.\n      var isReturnTrx = mTab.getValue("IsReturnTrx");\n      if (isReturnTrx) return "";\n      this.setCalloutActive(true);\n\n      //sql = "SELECT p.AD_Language,p.C_PaymentTerm_ID,"\n      //    + " COALESCE(p.M_PriceList_ID,g.M_PriceList_ID) AS M_PriceList_ID, p.PaymentRule,p.POReference,"\n      //    + " p.SO_Description,p.IsDiscountPrinted,"\n      //    + " p.InvoiceRule,p.DeliveryRule,p.FreightCostRule,DeliveryViaRule,"\n      //    + " p.SO_CreditLimit, p.SO_CreditLimit-p.SO_CreditUsed AS CreditAvailable,"\n      //    + " lship.C_BPartner_Location_ID,c.AD_User_ID,"\n      //    + " COALESCE(p.PO_PriceList_ID,g.PO_PriceList_ID) AS PO_PriceList_ID, p.PaymentRulePO,p.PO_PaymentTerm_ID,"\n      //    + " lbill.C_BPartner_Location_ID AS Bill_Location_ID, p.SOCreditStatus, lbill.IsShipTo "\n      //    + "FROM C_BPartner p"\n      //    + " INNER JOIN C_BP_Group g ON (p.C_BP_Group_ID=g.C_BP_Group_ID)"\n      //    + " LEFT OUTER JOIN C_BPartner_Location lbill ON (p.C_BPartner_ID=lbill.C_BPartner_ID AND lbill.IsBillTo=\'Y\' AND lbill.IsActive=\'Y\')"\n      //    + " LEFT OUTER JOIN C_BPartner_Location lship ON (p.C_BPartner_ID=lship.C_BPartner_ID AND lship.IsShipTo=\'Y\' AND lship.IsActive=\'Y\')"\n      //    + " LEFT OUTER JOIN AD_User c ON (p.C_BPartner_ID=c.C_BPartner_ID) "\n      //    + "WHERE p.C_BPartner_ID=" + C_BPartner_ID + " AND p.IsActive=\'Y\'";\t\t//\t#1\n      var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      var ds = VIS.dataContext.getJSONRecord("MBPartner/LoadBPartnerOrderData", C_BPartner_ID.toString());\n      // var ds = VIS.DB.executeDataset(sql, null);\n      if (ds != null && Object.keys(ds).length > 0) {\n        for (var i = 0; i < Object.keys(ds).length; i++) {\n          //var dr = ds;\n          //\tPriceList (indirect: IsTaxIncluded & Currency)\n          var ii = Util.getValueOfInt(isSOTrx ? ds.m_pricelist_id : ds.po_pricelist_id);\n          if (ii != 0) {\n            mTab.setValue("M_PriceList_ID", ii);\n          }\n\n          // JID_0364: If price list not available at BP, user need to select it manually\n\n          //else {\t//\tget default PriceList\n          //    var i1 = ctx.getContextAsInt("#M_PriceList_ID");\n          //    if (i1 != 0)\n          //        mTab.setValue("M_PriceList_ID", i1);\n          //}\n          //\tBill-To BPartner\n          mTab.setValue("Bill_BPartner_ID", C_BPartner_ID);\n          var bill_Location_ID = Util.getValueOfInt(ds.bill_location_id);\n          if (bill_Location_ID == 0) mTab.setValue("Bill_Location_ID", null);else mTab.setValue("Bill_Location_ID", bill_Location_ID);\n\n          // Ship-To Location\n          var shipTo_ID = Util.getValueOfInt(ds.c_bpartner_location_id);\n          //\toverwritten by InfoBP selection - works only if InfoWindow\n          //\twas used otherwise creates error (uses last value, may belong to differnt BP)\n          if (C_BPartner_ID.toString().equals(ctx.getContext("C_BPartner_ID"))) {\n            var loc = ctx.getContext("C_BPartner_Location_ID");\n            if (loc.toString().length > 0) shipTo_ID = int.Parse(loc);\n          }\n          if (shipTo_ID == 0) mTab.setValue("C_BPartner_Location_ID", null);else {\n            mTab.setValue("C_BPartner_Location_ID", shipTo_ID);\n            if ("Y".toString().equals(Util.getValueOfString(ds.isshipto)))\n              //\tset the same\n              mTab.setValue("Bill_Location_ID", shipTo_ID);\n          }\n          //\tContact - overwritten by InfoBP selection\n          var contID = Util.getValueOfInt(ds.ad_user_id.toString());\n          if (C_BPartner_ID.toString().toString().equals(ctx.getContext("C_BPartner_ID"))) {\n            var cont = ctx.getContext("AD_User_ID");\n            if (cont.toString().length > 0) contID = Util.getValueOfInt(cont);\n          }\n          if (contID == 0) mTab.setValue("AD_User_ID", null);else {\n            mTab.setValue("AD_User_ID", contID);\n            mTab.setValue("Bill_User_ID", contID);\n          }\n\n          //\tCreditAvailable \n          if (isSOTrx) {\n            var CreditLimit = Util.getValueOfDouble(ds.so_creditlimit);\n            //\tvar SOCreditStatus = dr.getString("SOCreditStatus");\n            if (CreditLimit != 0) {\n              var CreditAvailable = Util.getValueOfDouble(ds.creditavailable);\n              if (CreditAvailable < 0) {\n                //mTab.fireDataStatusEEvent("CreditLimitOver",\n                //    DisplayType.getNumberFormat(DisplayType.Amount).format(CreditAvailable),\n                //    false);\n                // MessageBox.Show("Create fireDataStatusEEvent");\n              }\n            }\n          }\n\n          //\tVAdvantage.Model.PO Reference\n          var s = ds.poreference.toString();\n          if (s != null && s.toString().length != 0) mTab.setValue("POReference", s);\n          // should not be reset to null if we entered already value! VHARCQ, accepted YS makes sense that way\n          // TODO: should get checked and removed if no longer needed!\n          /*else\r\n              mTab.setValue("POReference", null);*/\n\n          //\tSO Description\n          s = Util.getValueOfString(ds.so_description);\n          if (s != null && s.toString().trim().length != 0) mTab.setValue("Description", s);\n          //\tIsDiscountPrinted\n          s = Util.getValueOfString(ds.isdiscountprinted);\n          if (s != null && s.toString().length != 0) mTab.setValue("IsDiscountPrinted", s);else mTab.setValue("IsDiscountPrinted", "N");\n\n          //\tDefaults, if not Walkin Receipt or Walkin Invoice\n          var OrderType = ctx.getContext("OrderType");\n          mTab.setValue("InvoiceRule", INVOICERULE_AfterDelivery);\n          mTab.setValue("DeliveryRule", DELIVERYRULE_Availability);\n          mTab.setValue("PaymentRule", PAYMENTRULE_OnCredit);\n          if (OrderType.toString().equals(DocSubTypeSO_Prepay)) {\n            mTab.setValue("InvoiceRule", INVOICERULE_Immediate);\n            mTab.setValue("DeliveryRule", DELIVERYRULE_AfterReceipt);\n          } else if (OrderType.toString().equals(MOrder.DocSubTypeSO_POS))\n            //  for POS\n            mTab.setValue("PaymentRule", PAYMENTRULE_Cash);else {\n            //\tPaymentRule\n            s = isSOTrx ? ds.PaymentRule : ds.PaymentRulePO.toString();\n            if (s != null && s.length != 0) {\n              if (s.toString().equals("B"))\n                //\tNo Cache in Non POS\n                s = "P";\n              if (isSOTrx && (s.toString().equals("S") || s.toString().equals("U")))\n                //\tNo Check/Transfer for SO_Trx\n                s = "P"; //  Payment Term\n              mTab.setValue("PaymentRule", s);\n            }\n            //\tPayment Term\n            ii = Util.getValueOfInt(isSOTrx ? ds.c_paymentterm_id : ds.po_paymentterm_id);\n            if (ii != 0)\n              //ii=0 when dr return ""\n              {\n                mTab.setValue("C_PaymentTerm_ID", ii);\n              }\n            //\tInvoiceRule\n            s = Util.getValueOfString(ds.invoicerule);\n            if (s != null && s.length != 0) mTab.setValue("InvoiceRule", s);\n            //\tDeliveryRule\n            s = Util.getValueOfString(ds.deliveryrule);\n            if (s != null && s.length != 0) mTab.setValue("DeliveryRule", s);\n            //\tFreightCostRule\n            s = Util.getValueOfString(ds.freightcostrule);\n            if (s != null && s.length != 0) mTab.setValue("FreightCostRule", s);\n            //\tDeliveryViaRule\n            s = Util.getValueOfString(ds.deliveryviarule);\n            if (s != null && s.length != 0) mTab.setValue("DeliveryViaRule", s);\n          }\n        }\n      }\n    } catch (err) {\n      this.log.log(Level.SEVERE, sql, err);\n      this.setCalloutActive(false);\n      return e.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Order Line - Product.\n  /// - reset C_Charge_ID / M_AttributeSetInstance_ID\n  /// - PriceList, PriceStd, PriceLimit, C_Currency_ID, EnforcePriceLimit\n  /// - UOM\n  /// Calls Tax\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutOrderContract.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    if (value == null || value == 0 || value.toString() == "") {\n      return "";\n    }\n    try {\n      ///\n      // Boolean flag1 = System.Convert.ToBoolean(value);\n      //// Int32 M_Product_ID = 0;\n      // var ProductType = "";\n      var M_Product_ID = value;\n      if (M_Product_ID == null || M_Product_ID == 0) return "";\n      var isReturnTrx = "Y".toString().equals(ctx.getContext("IsReturnTrx"));\n      if (isReturnTrx) return "";\n      this.setCalloutActive(true);\n      if (steps) {\n        this.log.warning("init");\n      }\n      //\n      mTab.setValue("C_Charge_ID", null);\n      //\tSet Attribute\n      // JID_0910: On change of product on line system is not removing the ASI. if product is changed then also update the ASI field.\n\n      //if (ctx.getContextAsInt(windowNo, "M_Product_ID") == M_Product_ID\n      //    && ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID") != 0) {\n      //    mTab.setValue("M_AttributeSetInstance_ID", Util.getValueOfInt(ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID")));\n      //}\n      //else {\n      mTab.setValue("M_AttributeSetInstance_ID", null);\n      //}\n\n      /*****\tPrice Calculation see also qty\t****/\n      var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n      var Qty = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n      var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      //MProductPricing pp = new MProductPricing(ctx.getAD_Client_ID(), ctx.getAD_Org_ID(),\n      //        M_Product_ID, C_BPartner_ID, Qty, isSOTrx);\n      var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n      // pp.SetM_PriceList_ID(M_PriceList_ID);\n\n      /** Price List - ValidFrom date validation ** Dt:01/02/2021 ** Modified By: Kumar **/\n      var paramFields = M_PriceList_ID.toString().concat(",", Util.getValueOfString(mTab.getValue("StartDate")), ",",\n      //2\n      Util.getValueOfString(mTab.getValue("M_Product_ID")), ",", Util.getValueOfInt(mTab.getValue("C_UOM_ID")), ",", Util.getValueOfInt(mTab.getValue("M_AttributeSetInstance_ID")));\n      //Get PriceListversion based on Pricelist\n      /** Price List - Ensuring valid Uom id ** Dt:01/02/2021 ** Modified By: Kumar **/\n      var M_PriceList_Version_ID = VIS.dataContext.getJSONRecord("MPriceListVersion/GetM_PriceList_Version_ID_On_Transaction_Date", paramFields);\n\n      //pp.SetM_PriceList_Version_ID(M_PriceList_Version_ID);\n      var orderDate = mTab.getValue("DateOrdered");\n      //pp.SetPriceDate(orderDate);\n      //\t\n      //if (orderDate == null) {\n      //    orderDate = Date.now();\n      //}\n\n      /***** Bharat ****/\n      var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "ED011_");\n      //var sql = "SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'ED011_\'";\n      //countEd011 = Util.getValueOfInt(VIS.DB.executeScalar(sql));\n      var purchasingUom = 0;\n      if (DataPrefix["ED011_"]) {\n        var C_BPartner_ID = Util.getValueOfInt(mTab.getValue("C_BPartner_ID"));\n        var paramString = C_BPartner_ID.toString() + "," + M_Product_ID.toString();\n        //sql = "SELECT C_UOM_ID FROM M_Product_PO WHERE IsActive = \'Y\' AND  C_BPartner_ID = " + Util.getValueOfInt(mTab.getValue("C_BPartner_ID")) +\n        // " AND M_Product_ID = " + M_Product_ID;\n        //purchasingUom = Util.getValueOfInt(VIS.DB.executeScalar(sql));\n\n        //VAI050-Get UOM Of Product\n        var result = VIS.dataContext.getJSONRecord("MProduct/GetProductUOMs", paramString);\n        if (result != null) {\n          //VAI050-If SOtrx false than set UOM --Give priority to pruchase UOM \n          //If Purchase UOM not found than set PU unit which is set on Product else set Base UOM of Product\n          if (isSOTrx == false) {\n            purchasingUom = result["PurchaseUOM"] == 0 ? result["VAS_PurchaseUOM_ID"] == 0 ? result["C_UOM_ID"] : result["VAS_PurchaseUOM_ID"] : result["PurchaseUOM"];\n            mTab.setValue("C_UOM_ID", purchasingUom);\n          }\n          //VAI050-If SOtrx True than set UOM --Give priority to Sales UOM \n          else {\n            var SalesUOM = result["VAS_SalesUOM_ID"] == 0 ? result["C_UOM_ID"] : result["VAS_SalesUOM_ID"];\n            mTab.setValue("C_UOM_ID", SalesUOM);\n          }\n        }\n      }\n      var C_UOM_ID = Util.getValueOfInt(mTab.getValue("C_UOM_ID"));\n      var paramString = M_Product_ID.toString().concat(",", C_BPartner_ID.toString(), ",",\n      //2\n      Qty.toString(), ",",\n      //3\n      isSOTrx, ",",\n      //4 \n      M_PriceList_ID.toString(), ",",\n      //5\n      M_PriceList_Version_ID.toString(), ",",\n      //6\n      null, ",",\n      //7\n      null, ",", null, ",",\n      //8 , 9\n      C_UOM_ID, ",", countEd011); // 10 , 11\n\n      //var paramString = M_Product_ID.toString().concat(",", C_BPartner_ID.toString(), ",", //2\n      //                                           Qty.toString(), ",", //3\n      //                                           isSOTrx, ",", //4 \n      //                                           M_PriceList_ID.toString(), ",", //5\n      //                                           M_PriceList_Version_ID.toString(), ",", //6\n      //                                           null, ",", null, ",", null); //7\n      /*** Bharat Done ***/\n      /** Price List - ValidFrom date validation ** Dt:01/02/2021 ** Modified By: Kumar **/\n      if (Util.getValueOfInt(M_PriceList_Version_ID) > 0) {\n        var dr = null;\n        dr = VIS.dataContext.getJSONRecord("MProductPricing/GetProductPricing", paramString);\n\n        //mTab.setValue("PriceList", pp.GetPriceList());\n        //mTab.setValue("PriceLimit", pp.GetPriceLimit());\n        //mTab.setValue("PriceActual", pp.GetPriceStd());\n        //mTab.setValue("PriceEntered", pp.GetPriceStd());\n        //mTab.setValue("C_Currency_ID", Util.getValueOfInt(pp.GetC_Currency_ID()));\n        //mTab.setValue("Discount", pp.GetDiscount());\n        //mTab.setValue("C_UOM_ID", Util.getValueOfInt(pp.GetC_UOM_ID()));\n        //mTab.setValue("QtyEntered", mTab.getValue("QtyEntered"));\n        //ctx.setContext(windowNo, "EnforcePriceLimit", pp.IsEnforcePriceLimit() ? "Y" : "N");\n        //ctx.setContext(windowNo, "DiscountSchema", pp.IsDiscountSchema() ? "Y" : "N");\n\n        mTab.setValue("PriceList", dr["PriceList"]);\n        mTab.setValue("PriceLimit", dr.PriceLimit);\n        mTab.setValue("PriceActual", dr.PriceActual);\n        mTab.setValue("PriceEntered", dr.PriceEntered);\n        if (Util.getValueOfInt(dr.C_Currency_ID) > 0) {\n          mTab.setValue("C_Currency_ID", Util.getValueOfInt(dr.C_Currency_ID));\n        }\n        mTab.setValue("Discount", dr.Discount);\n        mTab.setValue("C_UOM_ID", Util.getValueOfInt(dr.C_UOM_ID));\n        mTab.setValue("QtyOrdered", mTab.getValue("QtyEntered"));\n        ctx.setContext(windowNo, "EnforcePriceLimit", dr.IsEnforcePriceLimit ? "Y" : "N");\n        ctx.setContext(windowNo, "DiscountSchema", dr.IsDiscountSchema ? "Y" : "N");\n      }\n\n      //\tCheck/Update Warehouse Setting\n      //\tvar M_Warehouse_ID = ctx.getContextAsInt( Env.WINDOW_INFO, "M_Warehouse_ID");\n      //\tvar wh = (int)mTab.getValue("M_Warehouse_ID");\n      //\tif (wh.intValue() != M_Warehouse_ID)\n      //\t{\n      //\t\tmTab.setValue("M_Warehouse_ID", new int(M_Warehouse_ID));\n      //\t\tADiathis.log.warn(,windowNo, "WarehouseChanged");\n      //\t}\n\n      //if (ctx.getContext("IsSOTrx"))\n      if (ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y") {\n        //  MProduct product = MProduct.Get(ctx, M_Product_ID);\n        var paramString = M_Product_ID.toString() + ",0";\n        var isStocked = VIS.dataContext.getJSONRecord("MProduct/GetProduct", paramString);\n        if (isStocked) {\n          var QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n          var M_Warehouse_ID = ctx.getContextAsInt(windowNo, "M_Warehouse_ID");\n          var M_AttributeSetInstance_ID = ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID");\n          var paramString = M_Warehouse_ID + "," + M_Product_ID + "," + M_AttributeSetInstance_ID;\n          var available = VIS.dataContext.getJSONRecord("MStorage/GetQtyAvailable", paramString);\n          //var available = MStorage.GetQtyAvailable(M_Warehouse_ID, M_Product_ID, M_AttributeSetInstance_ID, null);\n          if (available == null) available = VIS.Env.ZERO;\n          if (available == 0) {\n            //mTab.fireDataStatusEEvent("NoQtyAvailable", "0", false);\n            //  ShowMessage.Info("NoQtyAvailable", true, "0", "");\n          } else if (available.toString().compareTo(QtyEntered) < 0) {\n            //mTab.fireDataStatusEEvent("InsufficientQtyAvailable", available.toString(), false);\n            //  ShowMessage.Info("InsufficientQtyAvailable", true, available.toString(), "");\n          } else {\n            var C_OrderLine_ID = 0;\n            if (mTab.getValue("C_OrderLine_ID") != null) {\n              C_OrderLine_ID = Util.getValueOfInt(mTab.getValue("C_OrderLine_ID"));\n            }\n            if (C_OrderLine_ID == null) C_OrderLine_ID = 0;\n            paramString = M_Warehouse_ID.toString() + "," + M_Product_ID.toString() + "," + M_AttributeSetInstance_ID.toString() + "," + C_OrderLine_ID.toString();\n            var notReserved = Util.getValueOfDecimal(VIS.dataContext.getJSONRecord("MOrderLine/GetNotReserved", paramString));\n            //var notReserved = MOrderLine.GetNotReserved(ctx,\n            //    M_Warehouse_ID, M_Product_ID, M_AttributeSetInstance_ID,\n            //    C_OrderLine_ID);\n            if (notReserved == null) notReserved = VIS.Env.ZERO;\n            //var total = available.subtract(notReserved);\n            var total = available - notReserved;\n            if (total.toString().compareTo(QtyEntered) < 0) {\n              //var info = Msg.ParseTranslation(ctx, "@QtyAvailable@=" + available  //Temporary commented\n              //  + " - @QtyNotReserved@=" + notReserved + " = " + total);\n              //mTab.fireDataStatusEEvent("InsufficientQtyAvailable",info, false);\n              //ShowMessage.Info("InsufficientQtyAvailable", true, info, ""); //Temporary commented BY sarab\n            }\n          }\n        }\n      }\n      this.setCalloutActive(false);\n      if (steps) {\n        this.log.warning("fini");\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      // MessageBox.Show("error in Product");\n    }\n    // ctx = windowNo = mTab = mField = value = oldValue = null;\n    return this.Tax(ctx, windowNo, mTab, mField, value);\n  };\n  CalloutOrderContract.prototype.Tax = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var C_Tax_ID = 0;\n    var Rate = VIS.Env.ZERO;\n    var TotalRate = VIS.Env.ZERO;\n    var LineAmount = "";\n    //var GrandTotal =VIS.Env.ZERO;\n    //var Discount=Env.ZERO;\n    //var taxamt =VIS.Env.ZERO;\n    C_Tax_ID = Util.getValueOfInt(mTab.getValue("C_Tax_ID"));\n    //var sqltax = "select rate from c_tax WHERE c_tax_id=" + C_Tax_ID + "";\n    //Rate = Util.getValueOfDecimal(VIS.DB.executeScalar(sqltax, null, null));\n    Rate = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", C_Tax_ID.toString());\n    LineAmount = this.Amt(ctx, windowNo, mTab, mField, value);\n    var LineNetAmt = Util.getValueOfDecimal(mTab.getValue("LineNetAmt"));\n    TotalRate = Util.getValueOfDecimal(Util.getValueOfDecimal(LineNetAmt) * Util.getValueOfDecimal(Rate) / 100);\n    mTab.setValue("taxamt", TotalRate);\n    // ctx = windowNo = mTab = mField = value = oldValue = null;\n    return this.Amt(ctx, windowNo, mTab, mField, value);\n  };\n  CalloutOrderContract.prototype.Amt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      if (steps) {\n        this.log.warning("init");\n      }\n      var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n      var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n      var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n      var aparam = M_PriceList_ID.toString();\n      var dr = VIS.dataContext.getJSONRecord("MPriceList/GetPriceList", aparam);\n      var StdPrecision = Util.getValueOfInt(dr["StdPrecision"]); //Neha--GetPriceList Method\'s Dictionary returns string value--06 Sep,2018\n      //var StdPrecision = MPriceList.GetPricePrecision(ctx, M_PriceList_ID);\n      var QtyEntered, PriceEntered, PriceActual, PriceLimit, Discount, PriceList;\n      //\tget values\n      QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n      QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n      this.log.fine("QtyEntered=" + QtyEntered + ", Ordered=" + QtyEntered + ", UOM=" + C_UOM_To_ID);\n      //\n      PriceEntered = Util.getValueOfDecimal(mTab.getValue("PriceEntered"));\n      PriceActual = Util.getValueOfDecimal(mTab.getValue("PriceActual"));\n      Discount = Util.getValueOfDecimal(mTab.getValue("Discount"));\n      PriceLimit = Util.getValueOfDecimal(mTab.getValue("PriceLimit"));\n      PriceList = Util.getValueOfDecimal(mTab.getValue("PriceList"));\n      this.log.fine("PriceList=" + PriceList + ", Limit=" + PriceLimit + ", Precision=" + StdPrecision);\n      this.log.fine("PriceEntered=" + PriceEntered + ", Actual=" + PriceActual + ", Discount=" + Discount);\n\n      //\tQty changed - recalc price\n      if ((mField.getColumnName().toString().equals("QtyEntered") || mField.getColumnName().toString().equals("QtyEntered") || mField.getColumnName().toString().equals("M_Product_ID")) && !"N".toString().equals(ctx.getContext("DiscountSchema"))) {\n        var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n        if (mField.getColumnName().toString().equals("QtyEntered")) {\n          var paramString = M_Product_ID.toString() + "," + C_UOM_To_ID.toString() + "," + QtyEntered.toString();\n          //QtyEntered = MUOMConversion.ConvertProductTo(ctx, M_Product_ID,\n          //    C_UOM_To_ID, QtyEntered);\n          QtyEntered = Util.getValueOfDecimal(VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductTo", paramString));\n        }\n        //if (QtyEntered == null) {//Neha---Do not have any logic in if statement--06 Sep,2018\n\n        //}\n        //  QtyEntered = QtyEntered;\n        var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n\n        /** Price List - ValidFrom date validation ** Dt:01/02/2021 ** Modified By: Kumar **/\n        var paramFields = M_PriceList_ID.toString().concat(",", Util.getValueOfString(mTab.getValue("StartDate")), ",",\n        //2\n        Util.getValueOfString(mTab.getValue("M_Product_ID")), ",", Util.getValueOfInt(mTab.getValue("C_UOM_ID")), ",", Util.getValueOfInt(mTab.getValue("M_AttributeSetInstance_ID")));\n        //Get PriceListversion based on Pricelist\n        /** Price List - Ensuring valid Uom id ** Dt:01/02/2021 ** Modified By: Kumar **/\n        var M_PriceList_Version_ID = VIS.dataContext.getJSONRecord("MPriceListVersion/GetM_PriceList_Version_ID_On_Transaction_Date", paramFields);\n\n        //var date = mTab.getValue("DateOrdered");\n        //if (date == null) {\n        //    date = Date.now();\n        //}\n\n        /***** Bharat ****/\n        var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "ED011_");\n        //var sql = "SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'ED011_\'";\n        //countEd011 = Util.getValueOfInt(VIS.DB.executeScalar(sql));\n        var purchasingUom = 0;\n        if (DataPrefix > 0) {\n          var C_BPartner_ID = Util.getValueOfInt(mTab.getValue("C_BPartner_ID"));\n          var paramString = C_BPartner_ID.toString() + "," + M_Product_ID.toString();\n          // sql = "SELECT C_UOM_ID FROM M_Product_PO WHERE IsActive = \'Y\' AND  C_BPartner_ID = " + Util.getValueOfInt(mTab.getValue("C_BPartner_ID")) +\n          //     " AND M_Product_ID = " + M_Product_ID;\n          //purchasingUom = Util.getValueOfInt(VIS.DB.executeScalar(sql));\n          purchasingUom = VIS.dataContext.getJSONRecord("MProduct/GetPOUOM", paramString);\n          if (purchasingUom > 0 && isSOTrx == false) {\n            mTab.setValue("C_UOM_ID", purchasingUom);\n          } else {\n            var paramString = M_Product_ID.toString();\n            var c_UOM_ID = VIS.dataContext.getJSONRecord("MProduct/GetUOMID", paramString);\n            // sql = "SELECT C_UOM_ID FROM M_Product WHERE IsActive = \'Y\' AND M_Product_ID = " + M_Product_ID;\n            //mTab.setValue("C_UOM_ID", Util.getValueOfInt(VIS.DB.executeScalar(sql)));\n            mTab.setValue("C_UOM_ID", c_UOM_ID);\n          }\n        }\n        var C_UOM_ID = Util.getValueOfInt(mTab.getValue("C_UOM_ID"));\n        var paramString = M_Product_ID.toString().concat(",", C_BPartner_ID.toString(), ",",\n        //2\n        QtyEntered.toString(), ",",\n        //3\n        isSOTrx, ",",\n        //4 \n        M_PriceList_ID.toString(), ",",\n        //5\n        M_PriceList_Version_ID.toString(), ",",\n        //6\n        null, ",",\n        //7\n        null, ",", null, ",",\n        //8 , 9\n        C_UOM_ID, ",", countEd011); // 10 , 11\n\n        //var paramString = M_Product_ID.toString().concat(",", C_BPartner_ID.toString(), ",", //2\n        //                                            QtyEntered.toString(), ",", //3\n        //                                            isSOTrx, ",", //4 \n        //                                            M_PriceList_ID.toString(), ",", //5\n        //                                            M_PriceList_Version_ID.toString(), ",", //6\n        //                                            null, ",", null, ",", null); //7\n\n        /** Price List - ValidFrom date validation ** Dt:01/02/2021 ** Modified By: Kumar **/\n        if (Util.getValueOfInt(M_PriceList_Version_ID) > 0) {\n          var dr = null;\n          dr = VIS.dataContext.getJSONRecord("MProductPricing/GetProductPricing", paramString);\n\n          //MProductPricing pp = new MProductPricing(ctx.getAD_Client_ID(), ctx.getAD_Org_ID(),\n          //        M_Product_ID, C_BPartner_ID, QtyEntered, isSOTrx);\n          //pp.SetM_PriceList_ID(M_PriceList_ID);\n          //var M_PriceList_Version_ID = ctx.getContextAsInt(windowNo, "M_PriceList_Version_ID");\n          //pp.SetM_PriceList_Version_ID(M_PriceList_Version_ID);\n          //var date = Util.getValueOfDateTime(mTab.getValue("DateOrdered"));\n          //pp.SetPriceDate(date);\n          ////\n\n          paramString = M_Product_ID.toString() + "," + C_UOM_To_ID.toString() + "," + dr.PriceStd.toString();\n          PriceEntered = Util.getValueOfDecimal(VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramString));\n\n          //PriceEntered = (Decimal?)MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n          //    C_UOM_To_ID, pp.GetPriceStd());\n          if (PriceEntered == null || PriceEntered == 0)\n            //Neha--PriceEntered is decimal so It can\'t be null.--06 Sep,2018\n            PriceEntered = dr.PriceStd;\n          //\n          this.log.fine("QtyChanged -> PriceActual=" + dr.PriceStd + ", PriceEntered=" + PriceEntered + ", Discount=" + dr.Discount);\n          PriceActual = dr.PriceStd;\n          mTab.setValue("PriceActual", dr.PriceActual);\n          mTab.setValue("Discount", dr.Discount);\n          mTab.setValue("PriceEntered", dr.PriceEntered);\n          ctx.setContext(windowNo, "DiscountSchema", dr.DiscountSchema ? "Y" : "N");\n        }\n      } else if (mField.getColumnName().toString().equals("PriceActual")) {\n        PriceActual = Util.getValueOfDecimal(value);\n        paramString = M_Product_ID.toString() + "," + C_UOM_To_ID.toString() + "," + PriceActual.toString();\n        PriceEntered = Util.getValueOfDecimal(VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramString));\n\n        //PriceEntered = (Decimal?)MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n        //    C_UOM_To_ID, PriceActual.Value);\n        if (PriceEntered == null || PriceEntered == 0)\n          //Neha--PriceEntered is decimal so It can\'t be null.--06 Sep,2018\n          PriceEntered = PriceActual;\n        //\n        this.log.fine("PriceActual=" + PriceActual + " -> PriceEntered=" + PriceEntered);\n        mTab.setValue("PriceEntered", PriceEntered);\n      } else if (mField.getColumnName().toString().equals("PriceEntered")) {\n        PriceEntered = Util.getValueOfDecimal(value);\n        paramString = M_Product_ID.toString() + "," + C_UOM_To_ID.toString() + "," + PriceEntered.toString();\n        PriceActual = Util.getValueOfDecimal(VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductTo", paramString));\n\n        //PriceActual = (Decimal?)MUOMConversion.ConvertProductTo(ctx, M_Product_ID,\n        //    C_UOM_To_ID, PriceEntered);\n        if (PriceActual == null || PriceEntered == 0)\n          //Neha--PriceEntered is decimal so It can\'t be null.--06 Sep,2018\n          PriceActual = PriceEntered;\n        //\n        this.log.fine("PriceEntered=" + PriceEntered + " -> PriceActual=" + PriceActual);\n        mTab.setValue("PriceActual", PriceActual);\n      }\n\n      //  Discount entered - Calculate Actual/Entered\n      if (mField.getColumnName().toString().equals("Discount")) {\n        PriceActual = Util.getValueOfDecimal((100.0 - Util.getValueOfDouble(Discount)) / 100.0 * Util.getValueOfDouble(PriceList));\n        if (Util.scale(PriceActual) > StdPrecision) PriceActual = PriceActual.toFixed(StdPrecision); //);//, MidpointRounding.AwayFromZero);\n\n        paramString = M_Product_ID.toString() + "," + C_UOM_To_ID.toString() + "," + PriceActual.toString();\n        PriceEntered = Util.getValueOfDecimal(VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramString));\n\n        //PriceEntered = (Decimal?)MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n        //    C_UOM_To_ID, PriceActual.Value);\n        if (PriceEntered == null || PriceEntered == 0)\n          //Neha--PriceEntered is decimal so It can\'t be null.--06 Sep,2018\n          PriceEntered = PriceActual;\n        mTab.setValue("PriceActual", PriceActual);\n        mTab.setValue("PriceEntered", PriceEntered);\n      }\n      //\tcalculate Discount\n      else {\n        if (PriceList == 0) {\n          Discount = VIS.Env.ZERO;\n        } else {\n          //Discount = new Bigvar ((PriceList.doubleValue() - PriceActual.doubleValue()) / PriceList.doubleValue() * 100.0);\n          Discount = Util.getValueOfDecimal((PriceList - PriceActual) / PriceList * 100.0);\n        }\n        if (Util.scale(Discount) > 2)\n          // Discount = Decimal.Round(Discount.Value, 2);//, MidpointRounding.AwayFromZero);\n          Discount = Discount.toFixed(2); //);//, MidpointRounding.AwayFromZero);\n\n        mTab.setValue("Discount", Discount);\n      }\n      this.log.fine("PriceEntered=" + PriceEntered + ", Actual=" + PriceActual + ", Discount=" + Discount);\n\n      //\tCheck PriceLimit\n      var epl = ctx.getContext("EnforcePriceLimit");\n      var enforce = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y" && epl != null && epl.toString().equals("Y");\n      var isReturnTrx = "Y".toString().equals(ctx.getContext("IsReturnTrx"));\n      if (enforce && (VIS.MRole.getDefault().getIsOverwritePriceLimit() || isReturnTrx)) enforce = false; //Temporary Commented\n      //\tCheck Price Limit?\n      if (enforce && Util.getValueOfDouble(PriceLimit) != 0.0 && PriceActual.toString().compare(PriceLimit) < 0) {\n        PriceActual = PriceLimit;\n        paramString = M_Product_ID.toString() + "," + C_UOM_To_ID.toString() + "," + PriceLimit.toString();\n        PriceEntered = Util.getValueOfDecimal(VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramString));\n\n        //PriceEntered = (Decimal?)MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n        //    C_UOM_To_ID, PriceLimit.Value);\n        if (PriceEntered == null || PriceEntered == 0)\n          //Neha--PriceEntered is decimal so It can\'t be null.--06 Sep,2018\n          PriceEntered = PriceLimit;\n        this.log.fine("(under) PriceEntered=" + PriceEntered + ", Actual" + PriceLimit);\n        mTab.setValue("PriceActual", PriceLimit);\n        mTab.setValue("PriceEntered", PriceEntered);\n        //mTab.fireDataStatusEEvent("UnderLimitPrice", "", false);\n        //ShowMessage.Info("UnderLimitPrice", true, "", ""); //Temporary commented by sarab\n        VIS.ADialog.info("UnderLimitPrice");\n        //\tRepeat Discount calc\n        if (PriceList != 0) {\n          Discount = Util.getValueOfDecimal((PriceList - PriceActual) / PriceList * 100.0);\n          if (Util.scale(Discount) > 2) {\n            // Discount = Decimal.Round(Discount.Value, 2);//, MidpointRounding.AwayFromZero);\n            Discount = Discount.toFixed(2); //);//, MidpointRounding.AwayFromZero);\n          }\n          mTab.setValue("Discount", Discount);\n        }\n      }\n\n      //\tLine Net Amt\n      var LineNetAmt = QtyEntered * PriceActual;\n      if (Util.scale(LineNetAmt) > StdPrecision)\n        // LineNetAmt = Decimal.Round(LineNetAmt, StdPrecision);//, MidpointRounding.AwayFromZero);\n        LineNetAmt = LineNetAmt.toFixed(StdPrecision); //);//, MidpointRounding.AwayFromZero);\n      this.log.info("LineNetAmt=" + LineNetAmt);\n      mTab.setValue("LineNetAmt", LineNetAmt);\n      mTab.setValue("GrandTotal", Util.getValueOfDecimal(mTab.getValue("TaxAmt")) + LineNetAmt);\n      //Decimal? GrandTotal = Decimal.Add(Util.getValueOfDecimal(mTab.getValue("TaxAmt")), LineNetAmt);\n    } catch (err) {\n\n      // MessageBox.Show("error in Amt" + ex.Message.toString());\n      //return "";\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /// <summary>\n  /// Created By:Rakesh Kumar\n  /// Created Date: 05/Apr/2021\n  /// Service Contract Header - BPartner.\n  /// - M_PriceList_ID (+ Context)\n  /// - C_BPartner_Location_ID\n  /// - Bill_BPartner_ID/Bill_Location_ID\n  /// \t- AD_User_ID\n  /// \t- C_PaymentTerm_ID\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or Set value in respective fields""</returns>\n  CalloutOrderContract.prototype.BPartnerContract = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var PaymentBasetype = null;\n    //var Util=VIS.Util;\n    //var sql = "";\n    var dr = null;\n    //var drl = null;\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_BPartner_ID = 0;\n      var isvendor = \'N\';\n      var isCustomer = \'N\';\n      // Get Contract Type\n      var contractType = Util.getValueOfString(mTab.getValue("ContractType"));\n      if (contractType == "") return "";\n      if (value != null) C_BPartner_ID = Util.getValueOfInt(value.toString());\n      if (C_BPartner_ID == 0) return "";\n\n      // Skip rest of steps for RMA. These fields are copied over from the orignal order instead.\n      var isReturnTrx = Util.getValueOfBoolean(mTab.getValue("IsReturnTrx"));\n      if (isReturnTrx) return "";\n      this.setCalloutActive(true);\n\n      // Added by Bharat on 13/May/2017 to remove client side queries\n\n      var _CountVA009 = false;\n      var paramString = "VA009_";\n      var isSOTrx = contractType == "ASR" ? true : false; //ctx.isSOTrx(windowNo);\n      var dr = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", paramString);\n      if (dr != null) {\n        _CountVA009 = dr["VA009_"];\n      }\n      paramString = _CountVA009.toString() + "," + C_BPartner_ID;\n      dr = VIS.dataContext.getJSONRecord("MBPartner/GetBPartnerOrderData", paramString);\n      if (dr != null) {\n        // Price List\n        var PriceListPresent = Util.getValueOfInt(mTab.getValue("M_PriceList_ID")); // from BSO/BPO window\n        var ii = Util.getValueOfInt(isSOTrx ? dr["M_PriceList_ID"] : dr["PO_PriceList_ID"]);\n        if (ii != 0) {\n          mTab.setValue("M_PriceList_ID", ii);\n        } else {\n          mTab.setValue("M_PriceList_ID", null);\n        }\n        // JID_0364: If price list not available at BP, user need to select it manually\n\n        //\tBill-To BPartner\n        mTab.setValue("Bill_BPartner_ID", C_BPartner_ID);\n        var bill_Location_ID = Util.getValueOfInt(dr["Bill_Location_ID"]);\n        if (bill_Location_ID == 0) {\n          var bill_Partner_ID = Util.getValueOfInt(dr["Bill_BPartner_ID"]);\n          if (bill_Partner_ID > 0) mTab.setValue("Bill_BPartner_ID", bill_Partner_ID);\n        } else mTab.setValue("Bill_Location_ID", bill_Location_ID);\n\n        // Ship-To Location\n        var shipTo_ID = Util.getValueOfInt(dr["C_BPartner_Location_ID"]);\n        if (C_BPartner_ID.toString() == ctx.getContext("C_BPartner_ID")) {\n          var loc = ctx.getContext("C_BPartner_Location_ID");\n          if (loc.length > 0) shipTo_ID = Util.getValueOfInt(loc);\n        }\n        if (shipTo_ID == 0) mTab.setValue("C_BPartner_Location_ID", null);else {\n          mTab.setValue("C_BPartner_Location_ID", shipTo_ID);\n          if ("Y" == Util.getValueOfString(dr["IsShipTo"]))\n            //\tset the same\n            mTab.setValue("Bill_Location_ID", shipTo_ID);\n        }\n        var _salerep_ID = Util.getValueOfInt(dr["SalesRep_ID"]);\n        if (_salerep_ID > 0) mTab.setValue("SalesRep_ID", _salerep_ID);\n        if (_CountVA009) {\n          var _PaymentMethod_ID = Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]);\n          //VA009_PO_PaymentMethod_ID added new column for enhancement.. Google Sheet ID-- SI_0036\n          var _PO_PaymentMethod_ID = 0;\n          var _PO_PAYMENTBASETYPE = "T";\n          if (C_Order_Blanket <= 0) {\n            var bpdtl = VIS.dataContext.getJSONRecord("MBPartner/GetBPDetails", C_BPartner_ID);\n            if (bpdtl != null) {\n              isvendor = Util.getValueOfString(bpdtl["IsVendor"]);\n              isCustomer = Util.getValueOfString(bpdtl["IsCustomer"]);\n              if (!isSOTrx) {\n                //In case of Purchase Order\n                if (isvendor == "Y") {\n                  _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PO_PaymentMethod_ID"]);\n                  PaymentBasetype = Util.getValueOfString(bpdtl["VA009_PAYMENTBASETYPEPO"]);\n                } else {\n                  _PaymentMethod_ID = 0;\n                  PaymentBasetype = null;\n                }\n              } else {\n                if (isvendor == "Y") {\n                  _PaymentMethod_ID = 0;\n                  PaymentBasetype = null;\n                  if (isCustomer == "Y") {\n                    _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PaymentMethod_ID"]);\n                    PaymentBasetype = Util.getValueOfString(bpdtl["VA009_PAYMENTBASETYPE"]);\n                  }\n                } else {\n                  if (isCustomer == "Y") {\n                    _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PaymentMethod_ID"]);\n                    PaymentBasetype = Util.getValueOfString(bpdtl["VA009_PAYMENTBASETYPE"]);\n                  }\n                }\n              }\n            }\n          }\n          if (_PaymentMethod_ID == 0) {\n            var C_Order_Blanket = Util.getValueOfInt(mTab.getValue("C_Order_Blanket"));\n            if (C_Order_Blanket > 0) {\n              var paramString = _CountVA009.toString() + "," + C_Order_Blanket.toString();\n              dr = VIS.dataContext.getJSONRecord("MOrder/GetPaymentMethod", paramString);\n              if (dr != null) {\n                var paymthd_id = Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]);\n                if (paymthd_id > 0) {\n                  mTab.setValue("VA009_PaymentMethod_ID", paymthd_id);\n                  var PaymentBasetype = Util.getValueOfString(dr["VA009_PaymentBaseType"]);\n                  if (PaymentBasetype != "W" && PaymentBasetype != null) {\n                    // if (PaymentBasetype != null) {\n                    mTab.setValue("PaymentMethod", PaymentBasetype);\n                    if (isvendor == \'N\') mTab.setValue("PaymentRule", PaymentBasetype);else mTab.setValue("PaymentRulePO", PaymentBasetype);\n                  }\n                }\n              }\n            }\n          } else {\n            if (_PaymentMethod_ID == 0) mTab.setValue("VA009_PaymentMethod_ID", null);else {\n              mTab.setValue("VA009_PaymentMethod_ID", _PaymentMethod_ID);\n\n              //PaymentBasetype = Util.getValueOfString(dr["VA009_PaymentBaseType"]);\n              if (PaymentBasetype != "W" && PaymentBasetype != null) {\n                //if (PaymentBasetype != null) {\n                mTab.setValue("PaymentMethod", PaymentBasetype);\n                if (isvendor == \'N\') mTab.setValue("PaymentRule", PaymentBasetype);else mTab.setValue("PaymentRulePO", PaymentBasetype);\n              } else {\n                mTab.setValue("PaymentMethod", "T");\n                if (isvendor == \'N\') mTab.setValue("PaymentRule", "T");else mTab.setValue("PaymentRulePO", "T");\n              }\n            }\n          }\n        }\n        var contID = Util.getValueOfInt(dr["AD_User_ID"]);\n        if (C_BPartner_ID.toString() == ctx.getContext("C_BPartner_ID")) {\n          var cont = ctx.getContext("AD_User_ID");\n          if (cont.length > 0) contID = Util.getValueOfInt(cont);\n        }\n        if (contID == 0) mTab.setValue("AD_User_ID", null);else {\n          mTab.setValue("AD_User_ID", contID);\n          mTab.setValue("Bill_User_ID", contID);\n        }\n\n        //\tCreditAvailable \n        if (isSOTrx) {\n          var CreditStatus = Util.getValueOfString(dr["CreditStatusSettingOn"]);\n          if (CreditStatus == "CH") {\n            var CreditLimit = Util.getValueOfDouble(dr["SO_CreditLimit"]);\n            if (CreditLimit != 0) {\n              var CreditAvailable = Util.getValueOfDouble(dr["CreditAvailable"]);\n              if (CreditAvailable <= 0) {\n                VIS.ADialog.info("CreditOver");\n              }\n            }\n          } else {\n            var locId = Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID"));\n            var dr1 = VIS.dataContext.getJSONRecord("MBPartner/GetLocationData", locId.toString());\n            if (dr1 != null) {\n              CreditStatus = Util.getValueOfString(dr1["CreditStatusSettingOn"]);\n              if (CreditStatus == "CL") {\n                var CreditLimit = Util.getValueOfDouble(dr1["SO_CreditLimit"]);\n                if (CreditLimit != 0) {\n                  var CreditAvailable = Util.getValueOfDouble(dr1["CreditAvailable"]);\n                  if (CreditAvailable <= 0) {\n                    VIS.ADialog.info("CreditOver");\n                  }\n                }\n              }\n            }\n          }\n        }\n        //\tPayment Term\n        var PaymentTermPresent = Util.getValueOfInt(mTab.getValue("C_PaymentTerm_ID")); // from BSO/BPO window\n        var ii = Util.getValueOfInt(isSOTrx ? dr["C_PaymentTerm_ID"] : dr["PO_PaymentTerm_ID"]);\n        if (ii != 0) {\n          mTab.setValue("C_PaymentTerm_ID", ii);\n        } else {\n          mTab.setValue("C_PaymentTerm_ID", null);\n        }\n      }\n    } catch (err) {\n      //if (dr != null) {\n      //    dr.close();\n      //    dr = null;\n      //}\n      //if (drl != null) {\n      //    drl.close();\n      //    drl = null;\n      //}\n      //this.log.log(Level.SEVERE, sql, err);\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    //ctx = windowNo = mTab = mField = value =\n    oldValue = null;\n  };\n\n  /// <summary>\n  /// Created By:Rakesh Kumar\n  /// Created Date: 08/Apr/2021\n  /// Service Contract Header - ContractType.\n  /// - Change IsSOTrx based on ContractType selected\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Set value in ContractType""</returns>\n  CalloutOrderContract.prototype.UpdateIsSOTrx = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || value == false) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    ctx.setIsSOTrx(windowNo, value == "ASR" ? true : false);\n    this.setCalloutActive(false);\n  };\n  VIS.Model.CalloutOrderContract = CalloutOrderContract;\n\n  //***************CalloutSetContract Starts***********\n  function CalloutSetContract() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutSetContract"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutSetContract, VIS.CalloutEngine); //inherit prototype\n\n  CalloutSetContract.prototype.SetContract = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n      var paramStr = M_Product_ID.toString().concat(","); //1\n\n      var productType = ctx.getWindowContext(windowNo, "ProductType", true);\n      if (Util.getValueOfString(productType) == "") {\n        productType = VIS.dataContext.getJSONRecord("MProduct/GetProductType", paramStr);\n      }\n      if (productType == "S") {\n        mTab.getField("IsContract").setReadOnly(false);\n      } else {\n        mTab.getValue("IsContract", false);\n        mTab.getField("IsContract").setReadOnly(true);\n      }\n    } catch (ex) {\n      this.log.severe(ex.toString());\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutSetContract = CalloutSetContract;\n  //*************** CalloutSetContract Ends*****\n\n  //*************CalloutSetDate Starts*****************\n  function CalloutSetDate() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutSetDate "); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutSetDate, VIS.CalloutEngine); //inherit prototype\n\n  CalloutSetDate.prototype.SetDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    //if (this.isCalloutActive())\n    //{\n    //    return "";\n    //}\n    if (mTab.getValue("StartDate") == null || mTab.getValue("NoofCycle") == null) {\n      this.setCalloutActive(false);\n      return "";\n    } else {\n      try {\n        this.setCalloutActive(true);\n\n        //Neha----When we select Billing Frequency \'Year\' Callout not change the Year 05 Sep,2018\n\n        ////mTab.SetValue("EndDate", mTab.GetValue("StartDate"));\n        //var enddate = new Date(mTab.getValue("StartDate"));\n        //// int month = Util.GetValueOfInt(mTab.GetValue("NoofCycle")) + Util.GetValueOfInt(startdate.Value.Month);\n        ////DateTime? endate = new DateTime(startdate.Value.Year, month, startdate.Value.Day);\n        //var finalenddate = enddate.setMonth(enddate.getMonth() + Util.getValueOfInt(mTab.getValue("NoofCycle")));\n        //if (finalenddate <= 0) {\n        //    finalenddate = new Date();\n        //}\n        //else {\n        //    finalenddate = new Date(finalenddate);\n        //}\n        //finalenddate = finalenddate.toISOString();\n        //mTab.setValue("EndDate", finalenddate);\n        //this.setCalloutActive(false);\n\n        //Neha-- Update End Date on the basis of No of Cycle on Sales Order Line and Start Date and Billing Frequency (No of Months)” 05 Sep,2018\n        // var frequency = Util.getValueOfInt(mTab.getValue("C_Frequency_ID"));\n        //var Sql = "Select NoOfMonths from C_Frequency where C_Frequency_ID=" + frequency;\n        //var months = Util.getValueOfInt(VIS.DB.executeScalar(Sql, null, null));\n        var months = "";\n        months = VIS.dataContext.getJSONRecord("MOrderLine/GetNoOfMonths", Util.getValueOfString(mTab.getValue("C_Frequency_ID")));\n        var SDate = new Date(mTab.getValue("StartDate"));\n        var endDate = SDate.setMonth(SDate.getMonth() + months * Util.getValueOfInt(mTab.getValue("NoofCycle")));\n        endDate = new Date(SDate.setDate(SDate.getDate() - 1));\n        mTab.setValue("EndDate", endDate.toISOString());\n        ctx = windowNo = mTab = mField = value = oldValue = null;\n        this.setCalloutActive(false);\n        //---------------------End---------------------------------------\n      } catch (err) {}\n    }\n    return "";\n  };\n  VIS.Model.CalloutSetDate = CalloutSetDate;\n  //*************CalloutSetDate Ends*******************\n\n  function CalloutSetDates() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutSetDates"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutSetDates, VIS.CalloutEngine); //inherit prototype\n  CalloutSetDates.prototype.SetDates = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mField.getColumnName() == "C_Frequency_ID") {\n      if (value != oldValue) {\n        mTab.setValue("StartDate", "");\n        mTab.setValue("EndDate", "");\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutSetDates = CalloutSetDates;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutcontract.js?\n}')},"./Areas/VAS/Scripts/model/calloutcrm.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n\n  //*************CalloutProductToOpportunity Start***********\n  function CalloutProductToOpportunity() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProductToOpportunity"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProductToOpportunity, VIS.CalloutEngine); //inherit prototype\n  CalloutProductToOpportunity.prototype.ProductInfo = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      if (Util.getValueOfInt(mTab.getValue("M_Product_ID")) == 0) {\n        //set prices and quantities 0 if product is deselected\n        mTab.setValue("PriceList", 0);\n        mTab.setValue("PlannedPrice", 0);\n        mTab.setValue("Discount", 0);\n        mTab.setValue("PlannedMarginAmt", 0);\n        mTab.setValue("PlannedAmt", 0);\n        mTab.setValue("ProductType", "");\n      }\n      return "";\n    }\n\n    // because, this method is used to get product info based on Product ID\n    if (Util.getValueOfInt(mTab.getValue("M_Product_ID")) == 0) {\n      mTab.setValue("PriceList", 0);\n      mTab.setValue("PlannedPrice", 0);\n      mTab.setValue("Discount", 0);\n      mTab.setValue("PlannedMarginAmt", 0);\n      mTab.setValue("PlannedAmt", 0);\n      mTab.setValue("ProductType", "");\n      return "";\n    }\n\n    // Added by Bharat on 23 May 2017 to remove client side queries\n    var taskID = Util.getValueOfInt(mTab.getValue("C_ProjectTask_ID"));\n    var phaseID = Util.getValueOfInt(mTab.getValue("C_ProjectPhase_ID"));\n    var projID = Util.getValueOfInt(mTab.getValue("C_Project_ID"));\n    var productID = Util.getValueOfInt(mTab.getValue("M_Product_ID"));\n    var attributeID = 0;\n    var uomID = 0;\n    //get price on the basis of Attribute and UOM if selected\n    if (mTab.findColumn("M_AttributeSetInstance_ID") > 0) {\n      attributeID = Util.getValueOfInt(mTab.getValue("M_AttributeSetInstance_ID"));\n    }\n    if (mTab.findColumn("C_UOM_ID") > 0) {\n      uomID = Util.getValueOfInt(mTab.getValue("C_UOM_ID"));\n    }\n\n    //(VAI094): Fill Product Type on selection of Product\n    var type = VIS.dataContext.getJSONRecord("MProject/GetProductType", productID.toString());\n    mTab.setValue("ProductType", type);\n    var paramString = taskID.toString() + "," + phaseID.toString() + "," + projID.toString() + "," + productID.toString() + "," + attributeID.toString() + "," + uomID.toString();\n    var dr = VIS.dataContext.getJSONRecord("MProject/GetProjectDetail", paramString);\n    if (dr != null) {\n      var PriceList = Util.getValueOfDecimal(dr["PriceList"]);\n      mTab.setValue("PriceList", PriceList);\n      var PriceStd = Util.getValueOfDecimal(dr["PriceStd"]);\n      mTab.setValue("PlannedPrice", PriceStd);\n      mTab.setValue("PlannedQty", 1);\n      var PriceLimit = Util.getValueOfDecimal(dr["PriceLimit"]);\n      var discount;\n      try {\n        discount = (PriceList - PriceStd) * 100 / PriceList;\n        if (isNaN(discount)) {\n          this.setCalloutActive(false);\n          return VIS.Msg.getMsg("PriceNotDefined");\n        }\n      } catch (err) {\n        this.setCalloutActive(false);\n        return "PriceListNotSelected";\n      }\n      mTab.setValue("Discount", discount.toFixed(2));\n      // oppLine.SetDiscount(Decimal.Subtract(PriceList ,PriceStd));\n\n      mTab.setValue("PlannedMarginAmt", PriceStd - PriceLimit);\n      // oppLine.SetPlannedMarginAmt( Decimal.Subtract(PriceStd, PriceLimit));\n\n      //set base UOM if not selected\n      if (Util.getValueOfInt(mTab.getValue("C_UOM_ID")) == 0) {\n        mTab.setValue("C_UOM_ID", dr["C_UOM_ID"]);\n      }\n    } else {\n      //if no data found then set prices as 0\n      mTab.setValue("PriceList", 0);\n      mTab.setValue("PlannedPrice", 0);\n      mTab.setValue("Discount", 0);\n      mTab.setValue("PlannedMarginAmt", 0);\n      mTab.setValue("PlannedAmt", 0);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * Set BaseQuantity as per UOM\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutProductToOpportunity.prototype.SetQty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var C_UOM_ID = Util.getValueOfInt(mTab.getValue("C_UOM_ID"));\n    var Qty = mTab.getValue("PlannedQty");\n    if (mTab.getValue("M_Product_ID") != null) {\n      var M_Product_ID = Util.getValueOfInt(mTab.getValue("M_Product_ID"));\n      var paramStr = M_Product_ID.toString().concat(",", C_UOM_ID.toString(), ",", Qty.toString());\n      var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n      if (pc != null) {\n        mTab.setValue("BaseQty", pc);\n      } else {\n        mTab.setValue("BaseQty", Qty);\n      }\n    } else {\n      mTab.setValue("BaseQty", Qty);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutProductToOpportunity = CalloutProductToOpportunity;\n  //**********CalloutProductToOpportunity End**************\n\n  //*************CalloutPriceListOpp Start**************\n  function CalloutPriceListOpp() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutPriceListOpp"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutPriceListOpp, VIS.CalloutEngine); //inherit prototype\n  CalloutPriceListOpp.prototype.PriceList = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var sql = "";\n    try {\n      //sql ="select M_PriceList_ID from M_PriceList_Version where M_PriceList_Version_ID = " + Util.getValueOfInt(value);\n      //var M_PriceList_ID = Util.getValueOfInt(VIS.DB.executeScalar(sql, null, null));\n      var ds = VIS.dataContext.getJSONRecord("MPriceList/GetM_PriceList", Util.getValueOfInt(value));\n      if (ds != null && Object.keys(ds).length > 0) {\n        if (ds.M_PriceList_ID != 0) {\n          mTab.setValue("M_PriceList_ID", ds.M_PriceList_ID);\n\n          //sql = "select C_Currency_id from m_pricelist where m_pricelist_ID = " + M_PriceList_ID;\n          //var C_Currency_ID = Util.getValueOfInt(VIS.DB.executeScalar(sql, null, null));\n          //var C_Currency_ID = VIS.dataContext.getJSONRecord("MPriceList/GetC_Currency", Util.getValueOfInt(M_PriceList_ID));\n          if (ds.C_Currency_id != 0) {\n            mTab.setValue("C_Currency_ID", ds.C_Currency_id);\n          } else {\n            //  ShowMessage.Info("CurrencyNotDefinedForThePriceList", true, null, null);\n            VIS.ADialog.info("CurrencyNotDefinedForThePriceList");\n          }\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.saveError(sql, sql);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutPriceListOpp = CalloutPriceListOpp;\n  //**************CalloutPriceListOpp End*************\n\n  //*************CalloutMCampaign Starts***********\n  function CalloutMCampaign() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutMCampaign"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutMCampaign, VIS.CalloutEngine); //inherit prototype\n\n  CalloutMCampaign.prototype.DateRequired = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var DateDoc, DateReq;\n      DateDoc = new Date(mTab.getValue("DateContract"));\n      DateReq = new Date(mTab.getValue("DateFinish"));\n      if (DateReq.toISOString() < DateDoc.toISOString()) {\n        mTab.setValue("DateFinish", "");\n        this.setCalloutActive(false);\n        VIS.ADialog.info("DateInvalid", null, "", "");\n      }\n      this.log.fine("DateFinish=" + DateReq);\n    } catch (err) {\n      VIS.ADialog.info("DateError" + err, null, "", "");\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutMCampaign = CalloutMCampaign;\n  //*************CalloutMCampaign Ends*************\n\n  //*********** CalloutLead Start ****\n  function CalloutLead() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutLead"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutLead, VIS.CalloutEngine); //inherit CalloutEngine\n\n  /**\r\n   * Set full name on Lead window\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutLead.prototype.SetFullName = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if ((this.isCalloutActive() || value == null || value.toString() == "") && mField.getColumnName() != "LastName") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var fName = "";\n    if (mTab.getValue("Firstname") != null) {\n      fName = mTab.getValue("Firstname");\n    }\n    if (mTab.getValue("LastName") != null && mTab.getValue("LastName") != "") {\n      if (fName == "") fName = mTab.getValue("LastName");else fName = fName + " " + mTab.getValue("LastName");\n    }\n    if (fName != "") {\n      mTab.setValue("ContactName", fName);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * VIS0336-handle Lead screen followup and require date\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutLead.prototype.FollowUpDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mTab.getValue("C_Followupdate") != null && mTab.getValue("C_EnquiryRdate") != null) {\n      var FollowUpdate = new Date(mTab.getValue("C_Followupdate"));\n      FollowUpdate.setHours(0, 0, 0, 0);\n      var Enquiredate = new Date(mTab.getValue("C_EnquiryRdate"));\n      Enquiredate.setHours(0, 0, 0, 0);\n      if (FollowUpdate < Enquiredate) {\n        mTab.setValue("C_Followupdate", "");\n        this.setCalloutActive(false);\n        return "VAS_InCorrectFollowUpDate";\n      }\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n  * VIS0336-handle Opportunity screen ExpectedSalesDate\r\n  * @param {any} ctx\r\n  * @param {any} windowNo\r\n  * @param {any} mTab\r\n  * @param {any} mField\r\n  * @param {any} value\r\n  * @param {any} oldValue\r\n  */\n  CalloutLead.prototype.ExpectedSalesDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mTab.getValue("ExpectedSalesDate") != null && mTab.getValue("C_EnquiryRdate") != null) {\n      var ExpSalesDate = new Date(mTab.getValue("ExpectedSalesDate"));\n      ExpSalesDate.setHours(0, 0, 0, 0);\n      var Enquiredate = new Date(mTab.getValue("C_EnquiryRdate"));\n      Enquiredate.setHours(0, 0, 0, 0);\n      if (ExpSalesDate < Enquiredate) {\n        mTab.setValue("ExpectedSalesDate", "");\n        this.setCalloutActive(false);\n        return "VAS_InCorrectExpDate";\n      }\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n  * VAI050-To set the partner category according to BP\r\n  * @param {any} ctx\r\n  * @param {any} windowNo\r\n  * @param {any} mTab\r\n  * @param {any} mField\r\n  * @param {any} value\r\n  * @param {any} oldValue\r\n  */\n\n  CalloutLead.prototype.setPartnerCategory = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      mTab.setValue("C_BP_Group_ID", null);\n      return "";\n    }\n    this.setCalloutActive(true);\n    var ds = VIS.dataContext.getJSONRecord("MBPartner/GetPartnerCategory", Util.getValueOfInt(value));\n    mTab.setValue("C_BP_Group_ID", Util.getValueOfInt(ds));\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutLead = CalloutLead;\n  //**************CalloutLead End*************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutcrm.js?\n}')},"./Areas/VAS/Scripts/model/calloutframework.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n\n  //***************CalloutKPI Start********************\n\n  function CalloutKPI() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutKPI"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutKPI, VIS.CalloutEngine); //inherit prototype\n\n  CalloutKPI.prototype.CalculationSelection = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || value == false) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mField.getColumnName() == "IsSum") {\n      //DisplayType.Integer;\n      mTab.setValue("IsMaximum", false);\n      mTab.setValue("IsCount", false);\n      mTab.setValue("IsMinimum", false);\n    } else if (mField.getColumnName() == "IsMaximum") {\n      mTab.setValue("IsSum", false);\n      mTab.setValue("IsMinimum", false);\n      mTab.setValue("IsCount", false);\n    } else if (mField.getColumnName() == "IsCount") {\n      mTab.setValue("IsMaximum", false);\n      mTab.setValue("IsSum", false);\n      mTab.setValue("IsMinimum", false);\n    } else if (mField.getColumnName() == "IsMinimum") {\n      mTab.setValue("IsSum", false);\n      mTab.setValue("IsCount", false);\n      mTab.setValue("IsMaximum", false);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  CalloutKPI.prototype.UpdateKPITableInContext = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (value == true) {\n      mTab.setValue("AD_Table_ID", -1);\n      mTab.setValue("AD_Tab_ID", -1);\n      ctx.setContext(windowNo, "AD_Table_ID", -1);\n      ctx.setContext(windowNo, "AD_Tab_ID", -1);\n    } else {\n      mTab.setValue("TableView_ID", -1);\n      ctx.setContext(windowNo, "TableView_ID", -1);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  CalloutKPI.prototype.UpdateTabIDContext = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (value < 1 || value == null || value.toString() == "") {\n      mTab.setValue("AD_Tab_ID", -1);\n      ctx.setContext(windowNo, "AD_Tab_ID", -1);\n    } else {\n      ctx.setContext(windowNo, "AD_Tab_ID", value);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutKPI = CalloutKPI;\n\n  //**************************CalloutKPI End******************************\\\\\n\n  //***************CalloutDashboard Start********************\n\n  function CalloutDashboard() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutDashboard"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutDashboard, VIS.CalloutEngine); //inherit prototype\n\n  CalloutDashboard.prototype.UpdateTableInContext = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (value == true) {\n      mTab.setValue("AD_Table_ID", -1);\n      mTab.setValue("AD_Tab_ID", -1);\n      ctx.setContext(windowNo, "AD_Table_ID", -1);\n      ctx.setContext(windowNo, "AD_Tab_ID", -1);\n    } else {\n      mTab.setValue("TableView_ID", -1);\n      ctx.setContext(windowNo, "TableView_ID", -1);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  CalloutDashboard.prototype.UpdateTabIDContext = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (value < 1 || value == null || value.toString() == "") {\n      mTab.setValue("AD_Tab_ID", -1);\n      ctx.setContext(windowNo, "AD_Tab_ID", -1);\n    } else {\n      ctx.setContext(windowNo, "AD_Tab_ID", value);\n      mTab.setValue("TableView_ID", -1);\n      ctx.setContext(windowNo, "TableView_ID", -1);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  CalloutDashboard.prototype.UpdateTableViewIDOnTableContext = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (value > 0) {\n      mTab.setValue("TableView_ID", -1);\n      ctx.setContext(windowNo, "TableView_ID", -1);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  CalloutDashboard.prototype.SelectFunctionOnDashboard = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || value == false) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var bl = Util.getValueOfBoolean(value);\n    if (mField.getColumnName() == "IsSum") {\n      //DisplayType.Integer;\n      mTab.setValue("IsAvg", false);\n      mTab.setValue("IsCount", false);\n      mTab.setValue("IsNone", false);\n    } else if (mField.getColumnName() == "IsAvg") {\n      mTab.setValue("IsSum", false);\n      mTab.setValue("IsCount", false);\n      mTab.setValue("IsNone", false);\n    } else if (mField.getColumnName() == "IsCount") {\n      mTab.setValue("IsSum", false);\n      mTab.setValue("IsAvg", false);\n      mTab.setValue("IsNone", false);\n    } else if (mField.getColumnName() == "IsNone") {\n      mTab.setValue("IsSum", false);\n      mTab.setValue("IsCount", false);\n      mTab.setValue("IsAvg", false);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n\n  //Manish 4/7/2016   For Maximum value check should not be greater then 60\n  CalloutDashboard.prototype.ValueCheck = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var val = mTab.getValue("LastNValue");\n    if (val > 60) {\n      mTab.setValue("LastNValue", 1);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  //end \n\n  VIS.Model.CalloutDashboard = CalloutDashboard;\n\n  //**************************CalloutDashboard End******************************\\\\\n\n  //***************CalloutDashboard Start********************\n\n  function CalloutDashboardView() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutDashboardView"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutDashboardView, VIS.CalloutEngine); //inherit prototype\n\n  CalloutDashboardView.prototype.UpdateTabIDContext = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (value < 1 || value == null || value.toString() == "") {\n      mTab.setValue("AD_Tab_ID", -1);\n      ctx.setContext(windowNo, "AD_Tab_ID", -1);\n    } else {\n      ctx.setContext(windowNo, "AD_Tab_ID", value);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  CalloutDashboardView.prototype.GroupByChecked = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    //var sql = "UPDATE RC_ViewColumn SET IsGroupBy=\'N\' WHERE RC_View_ID=" + mTab.getValue("RC_View_ID") + " AND RC_ViewColumn_ID NOT IN(" + mTab.getValue("RC_ViewColumn_ID") + ")";\n    //var count = VIS.DB.executeQuery(sql);\n    var paramstring = mTab.getValue("RC_View_ID").toString() + "," + mTab.getValue("RC_ViewColumn_ID").toString();\n    VIS.dataContext.getJSONRecord("MFramework/UpdateGroupByChecked", paramstring);\n    this.setCalloutActive(false);\n    return "";\n  };\n  CalloutDashboardView.prototype.IsViewChecked = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (value) {\n      mTab.setValue("AD_Tab_ID", -1);\n      mTab.setValue("AD_Table_ID", -1);\n      ctx.setContext(windowNo, "AD_Tab_ID", -1);\n      ctx.setContext(windowNo, "AD_Table_ID", -1);\n    } else {\n      mTab.setValue("TableView_ID", -1);\n      ctx.setContext(windowNo, "TableView_ID", -1);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutDashboardView = CalloutDashboardView;\n\n  //**************************CalloutDashboard End******************************\\\\\n\n  //****************CalloutService Start***********\n  function CalloutService() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutService"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutService, VIS.CalloutEngine); //inherit prototype\n\n  /**\r\n   *  @param ctx      Context\r\n   *  @param WindowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   */\n  CalloutService.prototype.StatisticGroup = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    //When we change the Statistic Group the Statistic subgroup \n    //value will be cleared\n    mTab.setValue("FO_STATISTICSUBGROUP_ID", 0);\n    return "";\n  };\n  //CalloutService.prototype.SelectFunctionOnDashboard = function (ctx, windowNo, mTab, mField, value, oldValue) {\n\n  //    if (this.isCalloutActive() || value == null || value.toString() == "" || value == false) {\n  //        return "";\n  //    }\n  //    this.setCalloutActive(true);\n  //    var bl = Util.getValueOfBoolean(value);\n\n  //    if (mField.getColumnName() == "IsSum") {\n  //        //DisplayType.Integer;\n  //        mTab.setValue("IsAvg", false);\n  //        mTab.setValue("IsCount", false);\n  //        mTab.setValue("IsNone", false);\n  //    }\n  //    else if (mField.getColumnName() == "IsAvg") {\n  //        mTab.setValue("IsSum", false);\n  //        mTab.setValue("IsCount", false);\n  //        mTab.setValue("IsNone", false);\n\n  //    }\n  //    else if (mField.getColumnName() == "IsCount") {\n  //        mTab.setValue("IsSum", false);\n  //        mTab.setValue("IsAvg", false);\n  //        mTab.setValue("IsNone", false);\n\n  //    }\n  //    else if (mField.getColumnName() == "IsNone") {\n  //        mTab.setValue("IsSum", false);\n  //        mTab.setValue("IsCount", false);\n  //        mTab.setValue("IsAvg", false);\n\n  //    }\n  //    this.setCalloutActive(false);\n\n  //    return "";\n  //}\n\n  VIS.Model.CalloutService = CalloutService;\n  //*****************CalloutService Ends*******************************\n\n  //**************CalloutWorkflow Starts********\n  function CallOutWorkflow() {\n    VIS.CalloutEngine.call(this, "VIS.CallOutWorkflow "); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CallOutWorkflow, VIS.CalloutEngine); //inherit prototype\n\n  CallOutWorkflow.prototype.WorkflowType = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var wfType = Util.getValueOfString(value.toString());\n    if (wfType == "R") {\n      //var ID = Util.getValueOfInt(VIS.DB.executeScalar("SELECT AD_Table_ID FROM AD_Table WHERE IsActive=\'Y\' AND TableName= \'VADMS_MetaData\'"));\n      var ID = VIS.dataContext.getJSONRecord("MFramework/GetWorkflowType", null);\n      if (ID == 0) {\n        VIS.ADialog.info("No_VADMS", null, "", "");\n        //ShowMessage.Error("No_VADMS", true);\n        return VIS.Msg.getMsg("No_VADMS");\n      }\n      mTab.setValue("AD_Table_ID", ID);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  CallOutWorkflow.prototype.SetSelectedColumn = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var ColumnName = VIS.dataContext.getJSONRecord("MFramework/GetIsGenericAttribute", Util.getValueOfInt(value));\n    if (ColumnName.toLower() == "C_GenAttributeSetInstance_ID".toLower()) {\n      ctx.setContext(windowNo, "IsGenericAttribute", "Y");\n    } else {\n      ctx.setContext(windowNo, "IsGenericAttribute", "N");\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CallOutWorkflow = CallOutWorkflow;\n  //**************CalloutWorkflow Ends**********\n\n  //*************CalloutDisplayButton Starts***********\n  function CalloutDisplayButton() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutDisplayButton "); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutDisplayButton, VIS.CalloutEngine); //inherit prototype\n\n  CalloutDisplayButton.prototype.DisplayButton = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (Util.getValueOfInt(mTab.getValue("C_DocTypeTarget_ID")) != 0) {\n      //var sql = "select dc.DocSubTypeSO from c_doctype dc inner join c_docbasetype db on(dc.DocBaseType=db.DocBaseType)"\n      //    + "where c_doctype_id=" + Util.getValueOfInt(mTab.getValue("C_DocTypeTarget_ID")) + " and db.DocBaseType=\'SOO\' and dc.DocSubTypeSO in (\'WR\',\'WI\')";\n      var _DocBaseType = VIS.dataContext.getJSONRecord("MDocType/GetDocSubType", value.toString());\n      //var _DocBaseType = Util.getValueOfString(VIS.DB.executeScalar(sql, null, null));\n      if (_DocBaseType == "WR" || _DocBaseType == "WI") {\n        mTab.setValue("InvoicePrint", "Y");\n      } else {\n        mTab.setValue("InvoicePrint", "N");\n      }\n    } else {\n      this.setCalloutActive(false);\n      return "";\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutDisplayButton = CalloutDisplayButton;\n  //*************CalloutDisplayButton Ends*************\n\n  function CalloutModuleMgmt() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutModuleMgmt");\n  }\n  ;\n  //#endregion\n  VIS.Utility.inheritPrototype(CalloutModuleMgmt, VIS.CalloutEngine); //inherit calloutengine\n\n  CalloutModuleMgmt.prototype.GenerateMenuItemExportID = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var modulePrefix = ctx.getContext(windowNo, "Prefix");\n    if (mTab.getValue("MenuItemExport_ID") == null && mTab.getValue("IsMenuItem").toString() == "true") {\n      var date = new Date();\n      var ExportID = modulePrefix + date.getTime();\n      mTab.setValue("MenuItemExport_ID", ExportID);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  CalloutModuleMgmt.prototype.GenerateVersionID = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var versionno = ctx.getContext(windowNo, "VersionNo");\n    var versionid = versionno.replace(".", "");\n    mTab.setValue("VersionID", versionid);\n    this.setCalloutActive(false);\n    return "";\n  };\n  CalloutModuleMgmt.prototype.CheckBoxValidation = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var CheckBoxValue = Util.getValueOfBoolean(value);\n    if (CheckBoxValue == true) {\n      var columnName = mField.getColumnName();\n      if (columnName == "IsProfessionalFree") {\n        mTab.setValue("IsProfessionalPaid", false);\n        mTab.setValue("IsFree", false);\n        mTab.setValue("IsPaid", false);\n        // mTab.SetValue("IsProfessionalPaid", false);\n      } else if (columnName == "IsProfessionalPaid") {\n        mTab.setValue("IsProfessionalFree", false);\n        mTab.setValue("IsFree", false);\n        mTab.setValue("IsPaid", false);\n      } else if (columnName == "IsFree") {\n        mTab.setValue("IsProfessionalPaid", false);\n        mTab.setValue("IsProfessionalFree", false);\n        mTab.setValue("IsPaid", false);\n      } else if (columnName == "IsPaid") {\n        mTab.setValue("IsProfessionalPaid", false);\n        mTab.setValue("IsFree", false);\n        mTab.setValue("IsProfessionalFree", false);\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutModuleMgmt = CalloutModuleMgmt;\n\n  //VIS264*************CalloutAzureBlob Start**************\n  function CalloutAzureBlob() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutAzureBlob"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutAzureBlob, VIS.CalloutEngine); //inherit prototype\n  CalloutAzureBlob.prototype.CheckModule = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var fileLocation = Util.getValueOfString(mTab.getValue("SaveAttachmentOn"));\n    if (fileLocation == "AB") {\n      //check if VA090 module is Installed\n      var modulePrefix = VIS.dataContext.getJSONRecord("VIS/ModulePrefix/GetModulePrefix", "VA090_");\n      if (!modulePrefix["VA090_"]) {\n        mTab.setValue("SaveAttachmentOn", null);\n        this.setCalloutActive(false);\n        return VIS.Msg.getMsg("VIS_VA090NotInstalled");\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutAzureBlob = CalloutAzureBlob;\n  //VIS264**************CalloutAzureBlob End*************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutframework.js?\n}')},"./Areas/VAS/Scripts/model/calloutgljournal.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutGLJournal() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutGLJournal");\n  }\n  ;\n  //#endregion\n  VIS.Utility.inheritPrototype(CalloutGLJournal, VIS.CalloutEngine); //inherit calloutengine\n\n  /// <summary>\n  /// Journal - Period.\n  //  Check that selected period is in DateAcct Range or Adjusting Period\n  //  Called when C_Period_ID or DateAcct, DateDoc changed\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab">tab</param>\n  /// <param name="mField">fields</param>\n  /// <param name="value">value</param>\n  /// <returns>null or error message</returns>\n  CalloutGLJournal.prototype.Period = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n\n    //  \n    var colName = mField.getColumnName();\n    this.setCalloutActive(true);\n    var AD_Client_ID = ctx.getContextAsInt(windowNo, "AD_Client_ID", false);\n    var AD_Org_ID = Util.getValueOfInt(mTab.getValue("AD_Org_ID"));\n    var DateAcct = new Date();\n    if (colName == "DateAcct") {\n      //DateAcct = Util.getValueOfDateTime(value);\n      // DateAcct = Util.getValueOfDateTime(value);\n      DateAcct = value;\n    } else {\n      // DateAcct = Util.getValueOfDateTime(mTab.getValue("DateAcct"));\n      //DateAcct = Util.getValueOfDateTime(mTab.getValue("DateAcct"));\n      DateAcct = mTab.getValue("DateAcct");\n    }\n    var C_Period_ID = 0;\n    if (colName == "C_Period_ID") {\n      C_Period_ID = Util.getValueOfInt(value);\n    }\n    //  When DateDoc is changed, update DateAcct\n    if (colName == "DateDoc") {\n      mTab.setValue("DateAcct", value);\n    }\n\n    //  When DateAcct is changed, set C_Period_ID\n    else if (colName == "DateAcct" || colName == "AD_Org_ID") {\n      //var sql = "SELECT C_Period_ID "\n      //    + "FROM C_Period "\n      //    + "WHERE C_Year_ID IN "\n      //    + "\t(SELECT C_Year_ID FROM C_Year WHERE C_Calendar_ID ="\n      //    + "  (SELECT C_Calendar_ID FROM AD_ClientInfo WHERE AD_Client_ID=@param1))"\n      //    + " AND @param2 BETWEEN StartDate AND EndDate"\n      //    + " AND PeriodType=\'S\'";\n      //var param = [];            \n      //var idr = null;\n      //try {                \n      //    param[0] = new VIS.DB.SqlParam("@param1", AD_Client_ID);\n      //    param[1] = new VIS.DB.SqlParam("@param2", DateAcct);\n      //    param[1].setIsDate(true);\n      //    idr = VIS.DB.executeReader(sql, param, null);\n      //    if (idr.read()) {\n      //        C_Period_ID = Util.getValueOfInt(idr.get(0));// rs.getInt(1);\n      //    }\n      //    idr.close();\n      //}\n      //catch (err) {\n      //    if (idr != null) {\n      //        idr.close();\n      //    }\n      //    this.log.log(Level.SEVERE, sql, e);\n      //    this.setCalloutActive(false);\n      //    return err.message;\n      //}\n\n      var paramStr = AD_Client_ID + "," + DateAcct + "," + AD_Org_ID;\n      C_Period_ID = Util.getValueOfInt(VIS.dataContext.getJSONRecord("MPeriod/GetPeriod", paramStr));\n      if (C_Period_ID != 0) {\n        mTab.setValue("C_Period_ID", C_Period_ID);\n      }\n    }\n    //  When C_Period_ID is changed, check if in DateAcct range and set to end date if not\n    else {\n      //var sql = "SELECT PeriodType, StartDate, EndDate "\n      //    + "FROM C_Period WHERE C_Period_ID=@param";\n\n      //var param = [];\n      ////SqlParameter[] param = new SqlParameter[1];\n      //var idr = null;\n      //try {\n      //    //PreparedStatement pstmt = DataBase.prepareStatement(sql, null);\n      //    //pstmt.setInt(1, C_Period_ID);\n      //    param[0] = new VIS.DB.SqlParam("@param", C_Period_ID);\n      //    idr = VIS.DB.executeReader(sql, param, null);\n      //    if (idr.read()) {\n      //        var PeriodType = idr.get("periodtype");// rs.getString(1);\n      //        var StartDate = idr.get("startdate");// rs.getTimestamp(2);\n      //        var EndDate = idr.get("enddate");// rs.getTimestamp(3);\n      //        if (PeriodType == "S") //  Standard Periods\n      //        {\n      //            //  out of range - set to last day\n      //            if (DateAcct == null\n      //                || DateAcct < StartDate || DateAcct > EndDate)\n      //                mTab.setValue("DateAcct", EndDate);\n      //        }\n      //    }\n      //    idr.close();\n      //}\n      //catch (err) {\n      //    if (idr != null) {\n      //        idr.close();\n      //    }\n      //    this.log.log(Level.SEVERE, sql, e);\n      //    this.setCalloutActive(false);\n      //    return e.message;\n      //}\n\n      var dr = VIS.dataContext.getJSONRecord("MPeriod/GetPeriodDetail", C_Period_ID.toString());\n      if (dr != null) {\n        var PeriodType = dr["PeriodType"];\n        var StartDate = dr["StartDate"];\n        var EndDate = dr["EndDate"];\n        if (PeriodType == "S")\n          //  Standard Periods\n          {\n            //  out of range - set to last day\n            if (DateAcct == null || DateAcct < StartDate || DateAcct > EndDate) mTab.setValue("DateAcct", EndDate);\n          }\n      }\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  }; //  \tJournal_Period\n\n  /// <summary>\n  /// Journal/Line - rate.\tSet CurrencyRate from DateAcct, C_ConversionType_ID, C_Currency_ID\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab">tab</param>\n  /// <param name="mField">field</param>\n  /// <param name="value">value</param>\n  /// <returns>null or error message</returns>\n  CalloutGLJournal.prototype.Rate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n\n    //  Source info\n    try {\n      var Currency_ID = Util.getValueOfInt(mTab.getValue("C_Currency_ID"));\n      var C_Currency_ID = Util.getValueOfInt(Currency_ID);\n      var ConversionType_ID = Util.getValueOfInt(mTab.getValue("C_ConversionType_ID"));\n      var C_ConversionType_ID = Util.getValueOfInt(ConversionType_ID);\n      var DateAcct = mTab.getValue("DateAcct");\n      if (DateAcct == null) {\n        var currentDate = new Date();\n        //DateAcct = DateTime.Now;//  new Timestamp(System.currentTimeMillis());\n        DateAcct = currentDate.toGMTString();\n      }\n      //\n      var C_AcctSchema_ID = Util.getValueOfInt(ctx.getContextAsInt(windowNo, "C_AcctSchema_ID", false));\n      var paramString = C_AcctSchema_ID;\n      var aas = VIS.dataContext.getJSONRecord("MAcctSchema/GetAcctSchema", paramString);\n      // MAcctSchema aas = MAcctSchema.Get(ctx, C_AcctSchema_ID.Value);\n      var AD_Client_ID = Util.getValueOfInt(ctx.getContextAsInt(windowNo, "AD_Client_ID", false));\n      var AD_Org_ID = Util.getValueOfInt(ctx.getContextAsInt(windowNo, "AD_Org_ID", false));\n\n      //var CurrencyRate = MConversionRate.GetRate(C_Currency_ID.Value, aas.GetC_Currency_ID(),\n      //    DateAcct, C_ConversionType_ID.Value, AD_Client_ID.Value, AD_Org_ID.Value);\n      var paramStr = C_Currency_ID + "," + aas["C_Currency_ID"] + "," + DateAcct + "," + C_ConversionType_ID + "," + AD_Client_ID + "," + AD_Org_ID;\n      var CurrencyRate = VIS.dataContext.getJSONRecord("MConversionRate/GetRate", paramStr);\n      this.log.fine("rate = " + CurrencyRate);\n      if (CurrencyRate == null) {\n        CurrencyRate = 0;\n      }\n      mTab.setValue("CurrencyRate", CurrencyRate);\n    } catch (err) {\n      this.log.log(Level.SEVERE, sql, e);\n      this.setCalloutActive(false);\n      return e.message;\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  }; //\trate\n\n  /// <summary>\n  /// JournalLine - Amt.  Convert the source amount to accounted amount (AmtAcctDr/Cr)Called when source amount (AmtSourceCr/Dr) or rate changes\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab">tab</param>\n  /// <param name="mField">field</param>\n  /// <param name="value">value</param>\n  /// <returns> null or error message</returns>\n  CalloutGLJournal.prototype.Amt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    //\tString colName = mField.getColumnName();\n    if (value == null || value.toString() == "" || this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n\n    //  Get Target Currency & Precision from C_AcctSchema.C_Currency_ID\n    var C_AcctSchema_ID = Util.getValueOfInt(ctx.getContextAsInt(windowNo, "C_AcctSchema_ID"));\n    var paramString = C_AcctSchema_ID.toString();\n    var aas = VIS.dataContext.getJSONRecord("MAcctSchema/GetAcctSchema", paramString);\n\n    //MAcctSchema aas = MAcctSchema.Get(ctx, C_AcctSchema_ID);\n    //var Precision = aas.GetStdPrecision();\n\n    var Precision = aas["StdPrecision"];\n    var CurrencyRate = mTab.getValue("CurrencyRate");\n    if (CurrencyRate == null) {\n      CurrencyRate = 1;\n      mTab.setValue("CurrencyRate", CurrencyRate);\n    }\n\n    //  AmtAcct = AmtSource * CurrencyRate  ==> Precision\n    var AmtSourceDr = mTab.getValue("AmtSourceDr");\n    if (AmtSourceDr == null) {\n      AmtSourceDr = 0;\n    }\n    var AmtSourceCr = mTab.getValue("AmtSourceCr");\n    if (AmtSourceCr == null) {\n      AmtSourceCr = 0;\n    }\n\n    // var AmtAcctDr = Decimal.Multiply(AmtSourceDr.Value, CurrencyRate.Value);\n\n    var AmtAcctDr = AmtSourceDr * CurrencyRate;\n    //AmtAcctDr = AmtAcctDr.setScale(Precision, BigDecimal.ROUND_HALF_UP);\n    //AmtAcctDr = Decimal.Round(AmtAcctDr.Value, Precision);//, MidpointRounding.AwayFromZero);//   BigDecimal.ROUND_HALF_UP);\n    AmtAcctDr.toFixed(Precision);\n    mTab.setValue("AmtAcctDr", AmtAcctDr);\n    //var AmtAcctCr = Decimal.Multiply(AmtSourceCr.Value, CurrencyRate.Value);\n    var AmtAcctCr = AmtSourceCr * CurrencyRate;\n\n    // AmtAcctCr = Decimal.Round(AmtAcctCr.Value, Precision);//, MidpointRounding.AwayFromZero);// BigDecimal.ROUND_HALF_UP);\n    AmtAcctCr.toFixed(Precision);\n    mTab.setValue("AmtAcctCr", AmtAcctCr);\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  }; //  amt\n\n  //\tCalloutGLJournal\n  VIS.Model.CalloutGLJournal = CalloutGLJournal;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutgljournal.js?\n}')},"./Areas/VAS/Scripts/model/calloutinout.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutInOut() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutInOut"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutInOut, VIS.CalloutEngine); //inherit prototype\n\n  /// <summary>\n  /// C_Order - Order Defaults.\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns>error message or ""</returns>\n  CalloutInOut.prototype.Order = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    // \n\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_Order_ID = Util.getValueOfInt(value.toString());\n      if (C_Order_ID == null || C_Order_ID == 0) {\n        return "";\n      }\n      //\tNo Callout Active to fire dependent values\n      if (this.isCalloutActive())\n        //\tprevent recursive\n        {\n          return "";\n        }\n      var paramString = C_Order_ID.toString();\n      var dr = VIS.dataContext.getJSONRecord("MOrder/GetOrder", paramString);\n      var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA077_");\n      if (Util.getValueOfInt(dr["ID"]) != 0) {\n        mTab.setValue("DateOrdered", dr["DateOrdered"]);\n        mTab.setValue("POReference", dr["POReference"]);\n        if (mTab.getValue("AD_Org_ID") != Util.getValueOfInt(dr["AD_Org_ID"])) {\n          // If Org ID is same then no need to update the Org ID, else Document type gets refreshed\n          mTab.setValue("AD_Org_ID", Util.getValueOfInt(dr["AD_Org_ID"]));\n        }\n        //\n        mTab.setValue("DeliveryRule", dr["DeliveryRule"]);\n        mTab.setValue("DeliveryViaRule", dr["DeliveryViaRule"]);\n        mTab.setValue("M_Shipper_ID", Util.getValueOfInt(dr["M_Shipper_ID"]));\n        mTab.setValue("FreightCostRule", dr["FreightCostRule"]);\n        mTab.setValue("FreightAmt", dr["FreightAmt"]);\n        mTab.setValue("C_BPartner_ID", Util.getValueOfInt(dr["C_BPartner_ID"]));\n        //sraval: source forge bug # 1503219 - added to default ship to location\n        mTab.setValue("C_BPartner_Location_ID", Util.getValueOfInt(dr["C_BPartner_Location_ID"]));\n        mTab.setValue("AD_OrgTrx_ID", Util.getValueOfInt(dr["AD_OrgTrx_ID"]));\n        mTab.setValue("C_Activity_ID", Util.getValueOfInt(dr["C_Activity_ID"]));\n        mTab.setValue("C_Campaign_ID", Util.getValueOfInt(dr["C_Campaign_ID"]));\n        mTab.setValue("C_Project_ID", Util.getValueOfInt(dr["C_Project_ID"]));\n        mTab.setValue("User1_ID", Util.getValueOfInt(dr["User1_ID"]));\n        mTab.setValue("User2_ID", Util.getValueOfInt(dr["User2_ID"]));\n\n        // Added by Bharat on 30 Jan 2018 to set Inco Term from Order\n        if (mTab.getField("C_IncoTerm_ID") != null) {\n          mTab.setValue("C_IncoTerm_ID", Util.getValueOfInt(dr["C_IncoTerm_ID"]));\n        }\n        var isReturnTrx = mTab.getValue("IsReturnTrx");\n        if (isReturnTrx) {\n          mTab.setValue("Orig_Order_ID", dr["Orig_Order_ID"]);\n          mTab.setValue("Orig_InOut_ID", dr["Orig_InOut_ID"]);\n          // added by vivek on 09/10/2017 advised by pradeep to set drop ship checkbox value\n          if (Util.getValueOfString(dr["IsDropShip"]) == "Y") {\n            mTab.setValue("IsDropShip", true);\n          } else {\n            mTab.setValue("IsDropShip", false);\n          }\n        }\n        mTab.setValue("M_Warehouse_ID", Util.getValueOfInt(dr["M_Warehouse_ID"]));\n        if (DataPrefix["VA077_"]) {\n          if (dr["VA077_HistoricContractDate"] != "") {\n            mTab.setValue("VA077_HistoricContractDate", Dateoffset(dr["VA077_HistoricContractDate"]));\n          }\n          if (dr["VA077_ChangeStartDate"] != "") {\n            mTab.setValue("VA077_ChangeStartDate", Dateoffset(dr["VA077_ChangeStartDate"]));\n          }\n          if (dr["VA077_ContractCPStartDate"] != "") {\n            mTab.setValue("VA077_ContractCPStartDate", Dateoffset(dr["VA077_ContractCPStartDate"]));\n          }\n          if (dr["VA077_ContractCPEndDate"] != "") {\n            mTab.setValue("VA077_ContractCPEndDate", Dateoffset(dr["VA077_ContractCPEndDate"]));\n          }\n          mTab.setValue("VA077_PartialAmtCatchUp", Util.getValueOfDecimal(dr["VA077_PartialAmtCatchUp"]));\n          mTab.setValue("VA077_OldAnnualContractTotal", Util.getValueOfDecimal(dr["VA077_OldAnnualContractTotal"]));\n          mTab.setValue("VA077_AdditionalAnnualCharge", Util.getValueOfDecimal(dr["VA077_AdditionalAnnualCharge"]));\n          mTab.setValue("VA077_NewAnnualContractTotal", Util.getValueOfDecimal(dr["VA077_NewAnnualContractTotal"]));\n          mTab.setValue("VA077_SalesCoWorker", Util.getValueOfDecimal(dr["VA077_SalesCoWorker"]));\n          mTab.setValue("VA077_SalesCoWorkerPer", Util.getValueOfDecimal(dr["VA077_SalesCoWorkerPer"]));\n          mTab.setValue("VA077_TotalMarginAmt", Util.getValueOfDecimal(dr["VA077_TotalMarginAmt"]));\n          mTab.setValue("VA077_TotalPurchaseAmt", Util.getValueOfDecimal(dr["VA077_TotalPurchaseAmt"]));\n          mTab.setValue("VA077_TotalSalesAmt", Util.getValueOfDecimal(dr["VA077_TotalSalesAmt"]));\n          mTab.setValue("VA077_MarginPercent", Util.getValueOfDecimal(dr["VA077_MarginPercent"]));\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n      //MessageBox.Show("CalloutInOut--Order Defaults");\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// InOut - DocType.\n  /// - sets MovementType\n  /// - gets DocNo\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns>error message or ""</returns>\n  CalloutInOut.prototype.DocType = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var C_DocType_ID = Util.getValueOfInt(value.toString()); // (int)value;\n    if (C_DocType_ID == null || C_DocType_ID == 0) {\n      return "";\n    }\n    //var sql = "SELECT d.docBaseType, d.IsDocNoControlled, s.CurrentNext, d.IsReturnTrx "\n    //    + "FROM C_DocType d, AD_Sequence s "\n    //    + "WHERE C_DocType_ID=" + C_DocType_ID\t\t//\t1\n    //    + " AND d.DocNoSequence_ID=s.AD_Sequence_ID(+)";\n    // var dr = null;\n    var paramString = C_DocType_ID.toString();\n    var dr = VIS.dataContext.getJSONRecord("MInOut/GetDocTypeData", paramString);\n    try {\n      ctx.setContext(windowNo, "C_DocTypeTarget_ID", C_DocType_ID);\n      //dr = VIS.DB.executeReader(sql, null, null);\n      //if (dr.read()) {\n      //\tSet Movement Type\n      if (dr != null) {\n        var docBaseType = Util.getValueOfString(dr["docBaseType"]);\n        var isReturnTrx = dr["IsReturnTrx"] == "Y";\n        if (docBaseType.equals("MMS") && !isReturnTrx)\n          //\tMaterial Shipments\n          {\n            mTab.setValue("MovementType", "C-"); //\tCustomer Shipments\n          } else if (docBaseType.equals("MMS") && isReturnTrx)\n          //\tMaterial Shipments\n          {\n            mTab.setValue("MovementType", "C+"); //\tCustomer Returns\n          } else if (docBaseType.equals("MMR") && !isReturnTrx)\n          //\tMaterial Receipts\n          {\n            mTab.setValue("MovementType", "V+"); //\tVendor Receipts\n          } else if (docBaseType.equals("MMR") && isReturnTrx)\n          //\tMaterial Receipts\n          {\n            mTab.setValue("MovementType", "V-"); //\tReturn to Vendor\n          }\n\n        //\tDocumentNo\n        if (dr["IsDocNoControlled"] == "Y") {\n          mTab.setValue("DocumentNo", "<" + Util.getValueOfString(dr["CurrentNext"]) + ">");\n        }\n      }\n      //dr.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n        dr = null;\n      }\n      //MessageBox.Show("CalloutInOut--DocType");\n      this.log.log(Level.SEVERE, sql, err);\n      return err.message;\n      //return e.getLocalizedMessage();\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// M_InOut - Defaults for BPartner.\n  /// - Location\n  /// - Contact\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns>error message or ""</returns>\n  CalloutInOut.prototype.BPartner = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    //var sql = "";\n    var idr = null;\n    var dr = null;\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_BPartner_ID = Util.getValueOfInt(value.toString()); // (int)value;\n      if (C_BPartner_ID == null || C_BPartner_ID == 0) {\n        return "";\n      }\n      var isReturnTrx = mTab.getValue("IsReturnTrx");\n      var isSOTrx = mTab.getValue("IsSOTrx");\n\n      //\tsraval: source forge bug # 1503219\n      var order = mTab.getValue("C_Order_ID");\n      var paramString = true.toString() + "," + C_BPartner_ID;\n      //var idr = VIS.dataContext.getJSONRecord("MInOut/GetBPartnerOrderData", paramString);\n      var idr = VIS.dataContext.getJSONRecord("MBPartner/GetBPartnerOrderData", paramString);\n      if (idr != null) {\n        //\tLocation\n        var ii = idr["C_BPartner_Location_ID"];\n        // sraval: source forge bug # 1503219 - default location for material receipt\n        if (order == null) {\n          if (ii == 0) {\n            mTab.setValue("C_BPartner_Location_ID", null);\n          } else {\n            mTab.setValue("C_BPartner_Location_ID", ii);\n          }\n        }\n        //\tContact\n        ii = idr["AD_User_ID"];\n        //if (dr.wasNull())\n        if (ii == 0) {\n          mTab.setValue("AD_User_ID", null);\n        } else {\n          mTab.setValue("AD_User_ID", ii);\n        }\n\n        //Inco Term\n        var IncoTerm = isSOTrx ? idr["C_IncoTerm_ID"] : idr["C_IncoTermPO_ID"];\n        if (IncoTerm > 0) {\n          mTab.setValue("C_IncoTerm_ID", IncoTerm);\n        }\n\n        // Skip credit check for returns\n        if (isSOTrx & !isReturnTrx) {\n          //\tCreditAvailable\n          var CreditStatus = idr["CreditStatusSettingOn"];\n          var CreditAvailable = idr["CreditAvailable"];\n          if (CreditStatus == "CH") {\n            if (idr["SOCreditStatus"] != null) {\n              if (!idr["SOCreditStatus"].equals("X")) {\n                // SD\n                if (CreditAvailable <= 0) {\n                  VIS.ADialog.info("CreditLimitOver");\n                }\n              }\n            }\n          } else {\n            var locId = Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID"));\n            dr = VIS.dataContext.getJSONRecord("MBPartner/GetLocationData", locId.toString());\n            if (dr != null) {\n              CreditStatus = Util.getValueOfString(dr["CreditStatusSettingOn"]);\n              if (CreditStatus == "CL") {\n                var CreditLimit = Util.getValueOfDouble(dr["SO_CreditLimit"]);\n                if (CreditLimit != 0) {\n                  var CreditAvailable = Util.getValueOfDouble(dr["CreditAvailable"]);\n                  if (CreditAvailable <= 0) {\n                    VIS.ADialog.info("CreditOver");\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      //if (idr != null) {\n      //    idr.close();\n      //    idr = null;\n      //}\n      //if (drl != null) {\n      //    drl.close();\n      //    drl = null;\n      //}\n      //MessageBox.Show("CalloutInOut--BPartner");\n      //this.log.log(Level.SEVERE, sql, e);\n      //return e.getLocalizedMessage();\n      return err;\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// M_Warehouse.\n  /// Set Organization and Default Locator\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns>error message or ""</returns>\n  CalloutInOut.prototype.Warehouse = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    var M_Warehouse_ID = Util.getValueOfInt(value); // (int)value;\n    if (M_Warehouse_ID == null || M_Warehouse_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n\n    //var sql = "SELECT w.AD_Org_ID, l.M_Locator_ID "\n    //    + "FROM M_Warehouse w"\n    //    + " LEFT OUTER JOIN M_Locator l ON (l.M_Warehouse_ID=w.M_Warehouse_ID AND l.IsDefault=\'Y\') "\n    //    + "WHERE w.M_Warehouse_ID=" + M_Warehouse_ID;\t\t//\t1\n    //var dr = null;\n    var dr = VIS.dataContext.getJSONRecord("MInOut/GetWarehouse", value.toString());\n    try {\n      //dr = VIS.DB.executeReader(sql, null, null);\n      //if (dr.read()) {\n      if (dr != null) {\n        //\tOrg\n        var ii = Util.getValueOfInt(dr["AD_Org_ID"]); //.getInt(1));\n        var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n        if (AD_Org_ID != ii) {\n          mTab.setValue("AD_Org_ID", ii);\n        }\n        //\tLocator\n        ii = Util.getValueOfInt(dr["M_Locator_ID"]); // new int(dr.getInt(2));\n        //if (dr.wasNull())\n        if (ii == 0) {\n          ctx.setContext(windowNo, 0, "M_Locator_ID", null);\n        } else {\n          this.log.config("M_Locator_ID=" + ii);\n          ctx.setContext(windowNo, "M_Locator_ID", ii);\n        }\n      }\n      //dr.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n        dr = null;\n      }\n      //MessageBox.Show("CalloutInOut--Warehouse");\n      this.log.log(Level.SEVERE, sql, err);\n      this.setCalloutActive(false);\n      //return e.getLocalizedMessage();\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// OrderLine Callout\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns>error message or ""</returns>\n  CalloutInOut.prototype.OrderLine = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var C_OrderLine_ID = Util.getValueOfInt(value.toString()); // (int)value;\n    if (C_OrderLine_ID == null || C_OrderLine_ID == 0) {\n      this.setCalloutActive(false);\n      return "";\n    }\n    try {\n      //\tGet Details\n      var paramString = C_OrderLine_ID.toString();\n      var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA077_");\n      var dr = VIS.dataContext.getJSONRecord("MOrderLine/GetOrderLine", paramString);\n      // MOrderLine ol = new MOrderLine(ctx, C_OrderLine_ID, null);\n\n      //\tGet Details\n      if (Util.getValueOfInt(dr["GetID"]) != 0) {\n        // when order line contains charge, it will be selected on Shipment Line on selection of Order Line\n        if (Util.getValueOfInt(dr["M_Product_ID"]) > 0) {\n          mTab.setValue("M_Product_ID", Util.getValueOfInt(dr["M_Product_ID"]));\n          mTab.setValue("C_Charge_ID", null);\n        } else {\n          mTab.setValue("C_Charge_ID", Util.getValueOfInt(dr["C_Charge_ID"]));\n          mTab.setValue("M_Product_ID", null);\n        }\n        mTab.setValue("PrintDescription", dr["PrintDescription"].toString());\n        mTab.setValue("M_AttributeSetInstance_ID", Util.getValueOfInt(dr["M_AttributeSetInstance_ID"]));\n        mTab.setValue("C_UOM_ID", Util.getValueOfInt(dr["C_UOM_ID"]));\n        //var movementQty = Decimal.Subtract(ol.GetQtyOrdered(), ol.GetQtyDelivered());\n        var movementQty = Util.getValueOfDecimal(dr["QtyOrdered"]) - Util.getValueOfDecimal(dr["QtyDelivered"]);\n        mTab.setValue("MovementQty", movementQty);\n        var qtyEntered = movementQty;\n        if (Util.getValueOfDecimal(dr["QtyEntered"]).toString().compareTo(Util.getValueOfDecimal(dr["QtyOrdered"])) != Util.getValueOfDecimal(dr["QtyOrdered"])) {\n          //qtyEntered = qtyEntered.multiply(ol.getQtyEntered()).divide(ol.getQtyOrdered(), 12, Decimal.ROUND_HALF_UP);\n          qtyEntered = qtyEntered * Util.getValueOfDecimal(dr["QtyEntered"]) / Util.getValueOfDecimal(dr["QtyOrdered"]).toFixed(12); //, MidpointRounding.AwayFromZero));\n        }\n        mTab.setValue("QtyEntered", qtyEntered);\n        //\n        mTab.setValue("C_Activity_ID", Util.getValueOfInt(dr["C_Activity_ID"]));\n        mTab.setValue("C_Campaign_ID", Util.getValueOfInt(dr["C_Campaign_ID"]));\n        mTab.setValue("C_Project_ID", Util.getValueOfInt(dr["C_Project_ID"]));\n        mTab.setValue("C_ProjectPhase_ID", Util.getValueOfInt(dr["C_ProjectPhase_ID"]));\n        mTab.setValue("C_ProjectTask_ID", Util.getValueOfInt(dr["C_ProjectTask_ID"]));\n        mTab.setValue("AD_OrgTrx_ID", Util.getValueOfInt(dr["AD_OrgTrx_ID"]));\n        mTab.setValue("User1_ID", Util.getValueOfInt(dr["User1_ID"]));\n        mTab.setValue("User2_ID", Util.getValueOfInt(dr["User2_ID"]));\n        //if (dr["IsReturnTrx"]=="true")\n        if (Util.getValueOfBoolean(dr["IsReturnTrx"])) {\n          mTab.setValue("Orig_OrderLine_ID", Util.getValueOfInt(dr["Orig_OrderLine_ID"]));\n          var paramString = dr["Orig_InOutLine_ID"];\n          var line = VIS.dataContext.getJSONRecord("MInOutLine/GetMInOutLine", paramString);\n\n          // JID_1656: locator sholud select manually\n          //mTab.setValue("M_Locator_ID", line["M_Locator_ID"]);\n        }\n        if (Util.getValueOfString(dr["IsDropShip"]) == "Y") {\n          mTab.setValue("IsDropShip", true);\n        } else {\n          mTab.setValue("IsDropShip", false);\n        }\n        if (DataPrefix["VA077_"]) {\n          mTab.setValue("VA077_CNAutodesk", Util.getValueOfString(dr["VA077_CNAutodesk"]));\n          mTab.setValue("VA077_Duration", Util.getValueOfString(dr["VA077_Duration"]));\n          mTab.setValue("VA077_MarginAmt", Util.getValueOfDecimal(dr["VA077_MarginAmt"]));\n          mTab.setValue("VA077_MarginPercent", Util.getValueOfDecimal(dr["VA077_MarginPercent"]));\n          mTab.setValue("VA077_OldSN", Util.getValueOfString(dr["VA077_OldSN"]));\n          mTab.setValue("VA077_ProductInfo", Util.getValueOfString(dr["VA077_ProductInfo"]));\n          mTab.setValue("VA077_PurchasePrice", Util.getValueOfDecimal(dr["VA077_PurchasePrice"]));\n          mTab.setValue("VA077_RegEmail", Util.getValueOfString(dr["VA077_RegEmail"]));\n          mTab.setValue("VA077_SerialNo", Util.getValueOfString(dr["VA077_SerialNo"]));\n          mTab.setValue("VA077_UpdateFromVersn", Util.getValueOfString(dr["VA077_UpdateFromVersn"]));\n          mTab.setValue("VA077_UserRef_ID", Util.getValueOfInt(dr["VA077_UserRef_ID"]));\n          mTab.setValue("VA077_ServiceContract_ID", Util.getValueOfInt(dr["VA077_ServiceContract_ID"]));\n          if (dr["VA077_StartDate"] != "") {\n            mTab.setValue("VA077_StartDate", Dateoffset(dr["VA077_StartDate"]));\n          }\n          if (dr["VA077_EndDate"] != "") {\n            mTab.setValue("VA077_EndDate", Dateoffset(dr["VA077_EndDate"]));\n          }\n          if (Util.getValueOfBoolean(dr["VA077_LicenceTracked"])) mTab.setValue("VA077_LicenceTracked", true);else mTab.setValue("VA077_LicenceTracked", false);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// M_InOutLine - Default UOM/Locator for Product.\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns>error message or ""</returns>\n  CalloutInOut.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    var M_Product_ID = Util.getValueOfInt(value); // (int)value;\n    if (M_Product_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      //\tSet Attribute & Locator\n      // JID_0910: On change of product on line system is not removing the ASI. if product is changed then also update the ASI field.\n\n      var M_Locator_ID = 0;\n      //if (ctx.getContextAsInt(windowNo, "M_Product_ID") == M_Product_ID\n      //    && ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID") != 0) {\n      //    mTab.setValue("M_AttributeSetInstance_ID",\n      //        Util.getValueOfInt(ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID").toString()));\n      //\tLocator from Info Window - ASI\n      //M_Locator_ID = ctx.getContextAsInt(windowNo, "M_Locator_ID");\n      //if (M_Locator_ID != 0) {\n      //    mTab.setValue("M_Locator_ID", Util.getValueOfInt(M_Locator_ID.toString()));\n      //}\n      //}\n      //else {\n      mTab.setValue("M_AttributeSetInstance_ID", null);\n      //}\n\n      var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      // var isSOTrx = ctx.getContext("IsSOTrx");\n      if (isSOTrx) {\n        this.setCalloutActive(false);\n        return "";\n      }\n\n      //\tPO - Set UOM/Locator/Qty\n\n      //MProduct product = MProduct.Get(ctx, M_Product_ID);\n      //mTab.setValue("C_UOM_ID", Util.getValueOfInt(product.GetC_UOM_ID().toString()));\n      //var paramString = M_Product_ID.toString();\n      //var C_UOM_ID = VIS.dataContext.getJSONRecord("MProduct/GetC_UOM_ID", paramString);\n      //mTab.setValue("C_UOM_ID", C_UOM_ID);\n      //var qryBP = "SELECT C_BPartner_ID FROM M_InOut WHERE M_InOut_ID = " + Util.getValueOfInt(mTab.getValue("M_InOut_ID"));\n      //var bpartner = Util.getValueOfInt(VIS.DB.executeScalar(qryBP));\n      //var qryUom = "SELECT vdr.C_UOM_ID FROM M_Product p LEFT JOIN M_Product_Po vdr ON p.M_Product_ID= vdr.M_Product_ID WHERE p.M_Product_ID=" + M_Product_ID + " AND vdr.C_BPartner_ID = " + bpartner;\n      //var uom = Util.getValueOfInt(VIS.DB.executeScalar(qryUom));\n      //if (C_UOM_ID != 0) {\n      //    if (C_UOM_ID != uom && uom != 0) {\n      //        var Res = Util.getValueOfDecimal(VIS.DB.executeScalar("SELECT trunc(multiplyrate,4) FROM C_UOM_Conversion WHERE C_UOM_ID = " + C_UOM_ID + " AND C_UOM_To_ID = " + uom + " AND M_Product_ID= " + M_Product_ID + " AND IsActive=\'Y\'"));\n      //        if (Res > 0) {\n      //            mTab.setValue("QtyEntered", Util.getValueOfInt(mTab.getValue("QtyEntered")) * Res);\n      //            //OrdQty = MUOMConversion.ConvertProductTo(GetCtx(), _M_Product_ID, UOM, OrdQty);\n      //        }\n      //        else {\n      //            var res = Util.getValueOfDecimal(VIS.DB.executeScalar("SELECT trunc(multiplyrate,4) FROM C_UOM_Conversion WHERE C_UOM_ID = " + C_UOM_ID + " AND C_UOM_To_ID = " + uom + " AND IsActive=\'Y\'"));\n      //            if (res > 0) {\n      //                mTab.setValue("QtyEntered", Util.getValueOfInt(mTab.getValue("QtyEntered")) * Res);\n      //                //OrdQty = MUOMConversion.Convert(GetCtx(), prdUOM, UOM, OrdQty);\n      //            }\n      //        }\n      //        mTab.setValue("C_UOM_ID", uom);\n      //    }\n\n      var qtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n      mTab.setValue("MovementQty", qtyEntered);\n      var params = mTab.getValue("M_InOut_ID").toString() + "," + M_Product_ID.toString() + "," + qtyEntered.toString() + "," + ctx.getContextAsInt(windowNo, "C_BPartner_ID").toString();\n      var dr = VIS.dataContext.getJSONRecord("MInOut/GetUOMConv", params);\n      if (dr != null) {\n        if (dr["C_UOM_ID"] != dr["uom"] && dr["uom"] != 0) {\n          //mTab.setValue("QtyEntered", Util.getValueOfInt(mTab.getValue("QtyEntered")) * Util.getValueOfDecimal(dr["multiplyrate"]));\n          //VAI050-Set movement quantity when product selected\n          mTab.setValue("MovementQty", dr["qtyentered"]);\n          mTab.setValue("C_UOM_ID", dr["uom"]);\n        } else {\n          //mTab.setValue("C_UOM_ID", C_UOM_ID);\n          mTab.setValue("C_UOM_ID", dr["C_UOM_ID"]);\n        }\n      }\n\n      //190 - Get Print description from product and set print desc\n      var prod = VIS.dataContext.getJSONRecord("MProduct/GetProduct", M_Product_ID.toString());\n      if (prod != null) mTab.setValue("PrintDescription", prod.DocumentNote);\n\n      // Commented as not in use now\n      //if (window.BTR002) {\n      //    if (isSOTrx) {\n      //        var prdWarehouse = 0, prdLocator = 0;\n      //        var M_Warehouse_ID = ctx.getContextAsInt(windowNo, "M_Warehouse_ID");\n      //        var qryPrd = "SELECT loc.M_Warehouse_ID FROM M_Product p INNER JOIN M_Locator loc ON p.M_Locator_ID= loc.M_Locator_ID WHERE p.M_Product_ID=" + M_Product_ID;\n      //        var idr = VIS.DB.executeReader(qryPrd);\n      //        while (idr.read()) {\n      //            prdWarehouse = Util.getValueOfInt(idr.get("m_warehouse_id"));\n      //            prdLocator = Util.getValueOfInt(idr.get("m_locator_id"));\n      //        }\n      //        idr.close();\n      //        if (M_Warehouse_ID == prdWarehouse) {\n      //            mTab.setValue("M_Locator_ID", prdLocator);\n      //        }\n      //    }\n      //}\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// InOut Line - Quantity.\n  /// - called from C_UOM_ID, qtyEntered, movementQty\n  /// - enforces qty UOM relationship\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns>error message or ""</returns>\n  CalloutInOut.prototype.Qty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n      this.log.log(Level.WARNING, "qty - init - M_Product_ID=" + M_Product_ID);\n      var movementQty, qtyEntered;\n      var paramString = "";\n      var precision = 0;\n\n      //\tNo Product\n      if (M_Product_ID == 0) {\n        qtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n        mTab.setValue("MovementQty", qtyEntered);\n      }\n      //\tUOM Changed - convert from Entered -> Product\n      else if (mField.getColumnName().toString().equals("C_UOM_ID")) {\n        var C_UOM_To_ID = value;\n        qtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n        paramString = C_UOM_To_ID.toString();\n        precision = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramString);\n        var QtyEntered1 = Util.getValueOfDecimal(qtyEntered.toFixed(precision)); //, MidpointRounding.AwayFromZero);\n        if (qtyEntered.compareTo(QtyEntered1) != 0) {\n          this.log.fine("Corrected qtyEntered Scale UOM=" + C_UOM_To_ID + "; qtyEntered=" + qtyEntered + "->" + QtyEntered1);\n          qtyEntered = QtyEntered1;\n          mTab.setValue("QtyEntered", qtyEntered);\n        }\n        paramString = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", qtyEntered.toString());\n        movementQty = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramString);\n        //movementQty = MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n        //    C_UOM_To_ID, qtyEntered.Value);\n        if (movementQty == null) {\n          movementQty = qtyEntered;\n        }\n        var conversion = qtyEntered.compareTo(movementQty) != 0;\n        this.log.fine("UOM=" + C_UOM_To_ID + ", qtyEntered=" + qtyEntered + " -> " + conversion + " movementQty=" + movementQty);\n        ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        mTab.setValue("MovementQty", movementQty);\n      }\n      //\tNo UOM defined\n      else if (ctx.getContextAsInt(windowNo, "C_UOM_ID") == 0) {\n        qtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n        mTab.setValue("MovementQty", qtyEntered);\n      }\n      //\tqtyEntered changed - calculate movementQty\n      else if (mField.getColumnName().toString().equals("QtyEntered")) {\n        // If Ship/Receipt Line is created with Reference of Inoice Line.\n        // Can not change the Quantity on line.\n        if (Util.getValueOfInt(mTab.getValue("M_InOutLine_ID")) > 0) {\n          var invLine_ID = VIS.dataContext.getJSONRecord("MInOutLine/GetInvoiceLine", mTab.getValue("M_InOutLine_ID").toString());\n          if (invLine_ID > 0) {\n            mTab.setValue("QtyEntered", oldValue);\n            this.setCalloutActive(false);\n            return "VIS_CantChangeQty";\n          }\n        }\n        var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n        qtyEntered = Util.getValueOfDecimal(value);\n        paramString = M_Product_ID.toString();\n        precision = VIS.dataContext.getJSONRecord("MProduct/GetUOMPrecision", paramString);\n\n        // JID_0681: If we copy the MR lines using copy from button system is only copy the Qty only before decimal.\n        var QtyEntered1 = Util.getValueOfDecimal(qtyEntered.toFixed(precision));\n        if (qtyEntered.compareTo(QtyEntered1) != 0) {\n          this.log.fine("Corrected qtyEntered Scale UOM=" + C_UOM_To_ID + "; qtyEntered=" + qtyEntered + "->" + QtyEntered1);\n          qtyEntered = QtyEntered1;\n          mTab.setValue("QtyEntered", qtyEntered);\n        }\n        paramString = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", qtyEntered.toString());\n        movementQty = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramString);\n        // movementQty = MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n        //     C_UOM_To_ID, qtyEntered.Value);\n        if (movementQty == null) {\n          movementQty = qtyEntered;\n        }\n        var conversion = qtyEntered.compareTo(movementQty) != 0;\n        this.log.fine("UOM=" + C_UOM_To_ID + ", qtyEntered=" + qtyEntered + " -> " + conversion + " movementQty=" + movementQty);\n        ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        mTab.setValue("MovementQty", movementQty);\n      }\n      //\tmovementQty changed - calculate qtyEntered (should not happen)\n      else if (mField.getColumnName().toString().equals("MovementQty")) {\n        var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n        movementQty = Util.getValueOfDecimal(value);\n        paramString = M_Product_ID.toString();\n        precision = VIS.dataContext.getJSONRecord("MProduct/GetUOMPrecision", paramString);\n\n        // JID_0681: If we copy the MR lines using copy from button system is only copy the Qty only before decimal.\n        var MovementQty1 = Util.getValueOfDecimal(movementQty.toFixed(precision));\n        if (movementQty.compareTo(MovementQty1) != 0) {\n          this.log.fine("Corrected movementQty " + movementQty + "->" + MovementQty1);\n          movementQty = MovementQty1;\n          mTab.setValue("MovementQty", movementQty);\n        }\n        paramString = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", movementQty.toString());\n        qtyEntered = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductTo", paramString);\n\n        //qtyEntered = MUOMConversion.ConvertProductTo(ctx, M_Product_ID,\n        //    C_UOM_To_ID, movementQty);\n        if (qtyEntered == null) {\n          qtyEntered = movementQty;\n        }\n        var conversion = movementQty.compareTo(qtyEntered) != 0;\n        this.log.fine("UOM=" + C_UOM_To_ID + ", movementQty=" + movementQty + " -> " + conversion + " qtyEntered=" + qtyEntered);\n        ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        mTab.setValue("QtyEntered", qtyEntered);\n      }\n\n      // Check for RMA\n      var isReturnTrx = "Y".equals(ctx.getContext("IsReturnTrx"));\n      if (M_Product_ID != 0 && isReturnTrx) {\n        var oLine_ID = Util.getValueOfInt(mTab.getValue("C_OrderLine_ID"));\n        paramString = oLine_ID.toString();\n        var oLine = VIS.dataContext.getJSONRecord("MOrderLine/GetOrderLine", paramString);\n        //  MOrderLine oLine = new MOrderLine(ctx, oLine_ID, null);\n        if (oLine.Get_ID() != 0) {\n          var orig_IOLine_ID = oLine["Orig_InOutLine_ID"];\n          if (orig_IOLine_ID != 0) {\n            var paramString = orig_IOLine_ID.toString();\n            var orig_IOLine = VIS.dataContext.getJSONRecord("MInOutLine/GetMInOutLine", paramString);\n\n            // MInOutLine orig_IOLine = new MInOutLine(ctx, orig_IOLine_ID, null);\n            var shippedQty = orig_IOLine["MovementQty"];\n            movementQty = Util.getValueOfDecimal(mTab.getValue("MovementQty"));\n            if (shippedQty.toString().compareTo(movementQty) < 0) {\n              if (ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y") {\n                // ShowMessage.Info("QtyShippedAndReturned", true, "", "");\n                VIS.ADialog.info("QtyShippedAndReturned");\n              } else {\n                // ShowMessage.Info("QtyRecievedAndReturnd", true, "", "");\n                VIS.ADialog.info("QtyRecievedAndReturnd");\n              }\n              mTab.setValue("MovementQty", shippedQty);\n              movementQty = shippedQty;\n              var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n              paramString = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", movementQty.toString());\n              qtyEntered = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductTo", paramString);\n              //qtyEntered = MUOMConversion.ConvertProductTo(ctx, M_Product_ID,\n              //        C_UOM_To_ID, movementQty);\n              if (qtyEntered == null) {\n                qtyEntered = movementQty;\n              }\n              mTab.setValue("QtyEntered", qtyEntered);\n              mTab.setValue("MovementQty", movementQty);\n              this.log.fine("qtyEntered : " + qtyEntered.toString() + "movementQty : " + movementQty.toString());\n            }\n          }\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// M_InOutLine - ASI.\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns>error message or ""</returns>\n  CalloutInOut.prototype.Asi = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    var M_ASI_ID = Util.getValueOfInt(value); // (int)value;\n    if (M_ASI_ID == null || M_ASI_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      //POST 1509/JID_1752 :: when we changes ASI, system changing locator refernce with small ID, which is not reqiure\n      if (Util.getValueOfInt(mTab.getValue("M_Locator_ID")) == 0) {\n        var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n        var M_Warehouse_ID = ctx.getContextAsInt(windowNo, "M_Warehouse_ID");\n        var param = M_Warehouse_ID.toString();\n        var M_Locator_ID = VIS.dataContext.getJSONRecord("MInOut/GetDefaultLocatorID", param);\n        //var M_Locator_ID = VIS.DB.executeScalar("SELECT MIN(M_Locator_ID) FROM M_Locator WHERE IsActive = \'Y\' AND M_Warehouse_ID = " + M_Warehouse_ID);\n        ctx.setContext(windowNo, "M_Locator_ID", M_Locator_ID);\n        this.log.fine("M_Product_ID=" + M_Product_ID + ", M_ASI_ID=" + M_ASI_ID + " - M_Warehouse_ID=" + M_Warehouse_ID + ", M_Locator_ID=" + M_Locator_ID);\n        //\tCheck Selection\n        var M_AttributeSetInstance_ID = ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID");\n        if (M_ASI_ID == M_AttributeSetInstance_ID) {\n          var selectedM_Locator_ID = ctx.getContextAsInt(windowNo, "M_Locator_ID");\n          if (selectedM_Locator_ID != 0) {\n            this.log.fine("Selected M_Locator_ID=" + selectedM_Locator_ID);\n            mTab.setValue("M_Locator_ID", selectedM_Locator_ID);\n          }\n        }\n      }\n    } catch (errx) {\n      this.setCalloutActive(false);\n      this.log.severe(errx.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary> 190\n  /// M_InOutLine - Charge.\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="windowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns>error message or ""</returns>\n  CalloutInOut.prototype.Charge = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    var C_Charge_ID = Util.getValueOfInt(mTab.getValue("C_Charge_ID")); // (int)value;\n    if (C_Charge_ID == null || C_Charge_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var charge = VIS.dataContext.getJSONRecord("MCharge/GetChargeDetails", C_Charge_ID.toString());\n      if (charge != null) mTab.setValue("PrintDescription", charge.PrintDescription);\n    } catch (errx) {\n      this.setCalloutActive(false);\n      this.log.severe(errx.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *  VAI050:Set VehicleReg.No,Gross Weight and Tare Weight on select Vehicle No\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutInOut.prototype.setFleetDetail = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      mTab.setValue("VAS_VehicleRegistrationNo", null);\n      mTab.setValue("VAS_GrossWeight", null);\n      mTab.setValue("VAS_TareWeight", null);\n      return "";\n    }\n    this.setCalloutActive(true);\n    var result = VIS.dataContext.getJSONRecord("MInOut/GetFleetDetail", Util.getValueOfInt(mTab.getValue("VAS_FleetDetail_ID")));\n    if (result != null) {\n      mTab.setValue("VAS_VehicleRegistrationNo", result.VAS_VehicleRegistrationNo);\n      mTab.setValue("VAS_GrossWeight", result.VAS_GrossWeight);\n      mTab.setValue("VAS_TareWeight", result.VAS_TareWeight);\n    } else {\n      mTab.setValue("VAS_VehicleRegistrationNo", null);\n      mTab.setValue("VAS_GrossWeight", null);\n      mTab.setValue("VAS_TareWeight", null);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *  VAI050:Set Shipping Business Partner and Transportation ID on select Freight Carrier \r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutInOut.prototype.setShipperDetail = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      if (mTab.getAD_Table_ID() == 323) mTab.setValue("C_BPartner_ID", null);else mTab.setValue("C_RefBPartner_ID", null);\n      mTab.setValue("VAS_Transportation", null);\n      return "";\n    }\n    this.setCalloutActive(true);\n    var result = VIS.dataContext.getJSONRecord("MInOut/GetShipperDetail", Util.getValueOfInt(mTab.getValue("M_Shipper_ID")));\n    if (result != null) {\n      if (mTab.getAD_Table_ID() == 323) mTab.setValue("C_BPartner_ID", result.C_BPartner_ID);else mTab.setValue("C_RefBPartner_ID", result.C_BPartner_ID);\n      mTab.setValue("VAS_Transportation", result.TaxID);\n    } else {\n      if (mTab.getAD_Table_ID() == 323) mTab.setValue("C_BPartner_ID", null);else mTab.setValue("C_RefBPartner_ID", null);\n      mTab.setValue("VAS_Transportation", null);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /**\r\n  *  VIS_427:This function is used to Set Transportation Mode when user change freight Category\r\n  *  and this callout is called from Delivery order and material transfer window\r\n  * @param {any} ctx\r\n  * @param {any} windowNo\r\n  * @param {any} mTab\r\n  * @param {any} mField\r\n  * @param {any} value\r\n  * @param {any} oldValue\r\n  */\n  CalloutInOut.prototype.setFreightCategory = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var result = VIS.dataContext.getJSONRecord("MInOut/GetFreightCategory", Util.getValueOfInt(mTab.getValue("M_FreightCategory_ID")));\n      if (result != null) {\n        mTab.setValue("VAS_Category", result["VAS_Category"]);\n      }\n    } catch (errx) {\n      this.setCalloutActive(false);\n      this.log.severe(errx.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutInOut = CalloutInOut;\n\n  // JID_0236: On Ship/Receipt Confirm line Sum of [Confirmed Qty+Difference Qty+Scrap Qty] should not be greater than Target Qty. Same is working on Move confrimation window\n  function CalloutShipReceiptConfirmLine() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutShipReceiptConfirmLine"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutShipReceiptConfirmLine, VIS.CalloutEngine); //inherit prototype\n\n  CalloutShipReceiptConfirmLine.prototype.SetQty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (Util.getValueOfDecimal(mTab.getValue("TargetQty")) < Util.getValueOfDecimal(mTab.getValue("ConfirmedQty"))) {\n      mTab.setValue("ConfirmedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")));\n      mTab.setValue("DifferenceQty", 0);\n      mTab.setValue("ScrappedQty", 0);\n      this.setCalloutActive(false);\n      return "";\n    }\n    if (mField.getColumnName() == "ConfirmedQty") {\n      if (Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) < 0) {\n        mTab.setValue("ConfirmedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")));\n        mTab.setValue("DifferenceQty", 0);\n        mTab.setValue("ScrappedQty", 0);\n        this.setCalloutActive(false);\n        return "";\n      }\n      mTab.setValue("ScrappedQty", 0);\n      mTab.setValue("DifferenceQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")) - (Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) + Util.getValueOfDecimal(mTab.getValue("ScrappedQty"))));\n    }\n    //else if (mField.getColumnName() == "DifferenceQty") {\n    //    if (Util.getValueOfDecimal(mTab.getValue("TargetQty")) < (Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) + Util.getValueOfDecimal(mTab.getValue("DifferenceQty")))) {\n    //        mTab.setValue("ConfirmedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")));\n    //        mTab.setValue("DifferenceQty", 0);\n    //        mTab.setValue("ScrappedQty", 0);\n    //        this.setCalloutActive(false);\n    //        return "";\n    //    }\n    //    mTab.setValue("ScrappedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")) - (Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) + Util.getValueOfDecimal(mTab.getValue("DifferenceQty"))));\n\n    //}\n    else if (mField.getColumnName() == "ScrappedQty") {\n      if (Util.getValueOfDecimal(mTab.getValue("ScrappedQty")) < 0) {\n        mTab.setValue("ConfirmedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")));\n        mTab.setValue("DifferenceQty", 0);\n        mTab.setValue("ScrappedQty", 0);\n        this.setCalloutActive(false);\n        return "";\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("TargetQty")) < Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) + Util.getValueOfDecimal(mTab.getValue("ScrappedQty"))) {\n        mTab.setValue("ConfirmedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")));\n        mTab.setValue("DifferenceQty", 0);\n        mTab.setValue("ScrappedQty", 0);\n        this.setCalloutActive(false);\n        return "";\n      }\n      mTab.setValue("DifferenceQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")) - (Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) + Util.getValueOfDecimal(mTab.getValue("ScrappedQty"))));\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutShipReceiptConfirmLine = CalloutShipReceiptConfirmLine;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutinout.js?\n}')},"./Areas/VAS/Scripts/model/calloutinventory.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutInventory() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutInventory"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutInventory, VIS.CalloutEngine); //inherit calloutengine\n  /// <summary>\n  /// Product/Locator/asi modified.\n  /// Set Attribute Set Instance\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current window no</param>\n  /// <param name="tab">model tab</param>\n  /// <param name="field">model field</param>\n  /// <param name="value">new value</param>\n  /// <returns>error message or ""</returns>\n  CalloutInventory.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    // when method call from poduct container and set value of container as null\n    if (!this.isCalloutActive() && mField.getColumnName() == "M_ProductContainer_ID" && (value == null || value.toString() == "")) {\n      value = 0;\n    }\n    //JID_1181: On change of product on physical inventory line nad internal use system is giving error [TypeError: Cannot read property \'toString\' of null]\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n\n    //\tNew Line - Get Book Value\n    var M_Product_ID = 0;\n    var product = Util.getValueOfInt(mTab.getValue("M_Product_ID"));\n    if (product != null) M_Product_ID = product;\n    if (M_Product_ID == 0) return "";\n    var M_Locator_ID = 0;\n    var locator = Util.getValueOfInt(mTab.getValue("M_Locator_ID"));\n    if (locator != null) M_Locator_ID = locator;\n    if (M_Locator_ID == 0) return "";\n    this.setCalloutActive(true);\n\n    //\toverkill - see new implementation\n    var Attribute_ID = 0;\n    var AttrCode = ctx.getContext(windowNo, "AttrCode");\n    // not call this function when calling happen from ProductContainer reference\n    if (AttrCode != null && AttrCode != "" && mField.getColumnName() != "M_ProductContainer_ID") {\n      var paramString = value.toString() + \',\' + AttrCode.toString();\n      Attribute_ID = VIS.dataContext.getJSONRecord("MInventoryLine/GetProductAttribute", paramString);\n    }\n    var inventoryLine = Util.getValueOfInt(mTab.getValue("M_InventoryLine_ID"));\n    var MovementDate = ctx.getContext(windowNo, "MovementDate");\n    var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n\n    // JID_0855 :On change of locator and Attribute set instance sytem is removing the UOM of product.-\n    // Mohit - 21 May 2019.\n    if (mField.getColumnName() == "M_Product_ID") {\n      var paramString = "" + "," + value.toString();\n      //VAI050-If Internal Use True than set UOM - give priority to Consumable UOM else set Base UOM\n      var InternalUse = mTab.getValue("IsInternalUse");\n      if (InternalUse) {\n        var result = VIS.dataContext.getJSONRecord("MProduct/GetProductUOMs", paramString);\n        if (result != null) {\n          if (result["VAS_ConsumableUOM_ID"] > 0) mTab.setValue("C_UOM_ID", Util.getValueOfInt(result["VAS_ConsumableUOM_ID"]));else mTab.setValue("C_UOM_ID", Util.getValueOfInt(result["C_UOM_ID"]));\n        }\n      } else {\n        var Uom = VIS.dataContext.getJSONRecord("MInventoryLine/GetProductUOM", value.toString());\n        mTab.setValue("C_UOM_ID", Util.getValueOfInt(Uom));\n      }\n    }\n    var bd = null;\n    var paramString = inventoryLine.toString();\n    /**\r\n     * Modified for update Book Qty on existing records.\r\n     * Also checks the old asi and removes it if product has been change.\r\n     */\n    if (inventoryLine != null && inventoryLine != 0) {\n      //Get MInventoryLine Information\n      //Get product price information\n      var dr = null;\n      dr = VIS.dataContext.getJSONRecord("MInventoryLine/GetMInventoryLine", paramString);\n      var M_Product_ID = dr["M_Product_ID"]; //dr.M_Product_ID;//getQtyAvailable(M_Warehouse_ID, M_Product_ID, M_AttributeSetI\n      var M_Locator_ID = dr["M_Locator_ID"]; //dr.M_Locator_ID;\n\n      // MInventoryLine iLine = new MInventoryLine(ctx, inventoryLine.Value, null);  \n      var M_Product_ID1 = Util.getValueOfInt(mTab.getValue("M_Product_ID"));\n      var M_Locator_ID1 = Util.getValueOfInt(mTab.getValue("M_Locator_ID"));\n      // get product Container\n      var M_ProductContainer_ID = Util.getValueOfInt(mTab.getValue("M_ProductContainer_ID"));\n      var M_AttributeSetInstance_ID1 = 0;\n      // if product or locator has changed recalculate Book Qty\n      //if (M_Product_ID1 != M_Product_ID || M_Locator_ID1 != M_Locator_ID) {\n      if (M_Product_ID1 != M_Product_ID || M_Locator_ID1 != M_Locator_ID || mField.getColumnName() == "M_ProductContainer_ID") {\n        // Check asi - if product has been changed remove old asi\n        if (Attribute_ID > 0) {\n          mTab.setValue("M_AttributeSetInstance_ID", Attribute_ID);\n        }\n        if (M_Product_ID1 == M_Product_ID) {\n          M_AttributeSetInstance_ID1 = Util.getValueOfInt(mTab.getValue("M_AttributeSetInstance_ID"));\n        } else {\n          mTab.setValue("M_AttributeSetInstance_ID", null);\n        }\n        try {\n          bd = this.SetQtyBook(AD_Org_ID, M_AttributeSetInstance_ID1, M_Product_ID1, M_Locator_ID1, MovementDate, M_ProductContainer_ID);\n          mTab.setValue("QtyBook", bd);\n          mTab.setValue("OpeningStock", bd);\n        } catch (err) {\n          this.setCalloutActive(false);\n          this.log.severe(err.toString());\n          return mTab.setValue("QtyBook", bd);\n        }\n      }\n      this.setCalloutActive(false);\n      ctx = windowNo = mTab = mField = value = oldValue = null;\n      return "";\n    }\n\n    //\tSet Attribute\n    if (Attribute_ID > 0) {\n      mTab.setValue("M_AttributeSetInstance_ID", Attribute_ID);\n    }\n    var M_AttributeSetInstance_ID = 0;\n    var asi = Util.getValueOfInt(mTab.getValue("M_AttributeSetInstance_ID"));\n    if (asi != null) M_AttributeSetInstance_ID = asi;\n    mTab.setValue("M_AttributeSetInstance_ID", null);\n    var M_ProductContainer_ID = Util.getValueOfInt(mTab.getValue("M_ProductContainer_ID"));\n    try {\n      bd = this.SetQtyBook(AD_Org_ID, M_AttributeSetInstance_ID, M_Product_ID, M_Locator_ID, MovementDate, M_ProductContainer_ID);\n      mTab.setValue("QtyBook", bd);\n      mTab.setValue("OpeningStock", bd);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n      return mTab.setValue("QtyBook", bd);\n    }\n    //\n    this.log.info("M_Product_ID=" + M_Product_ID + ", M_Locator_ID=" + M_Locator_ID + ", M_AttributeSetInstance_ID=" + M_AttributeSetInstance_ID + " - QtyBook=" + bd);\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Product/Locator/asi modified.\n  /// Set Attribute Set Instance\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current window no</param>\n  /// <param name="tab">model tab</param>\n  /// <param name="field">model field</param>\n  /// <param name="value">new value</param>\n  /// <returns>error message or ""</returns>\n  CalloutInventory.prototype.AttributeSetInstance = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) return "";\n\n    //\toverkill - see new implementation\n    //var inventoryLine = Util.getValueOfInt(mTab.getValue("M_InventoryLine_ID"));\n    //var M_Inventory_ID = Util.getValueOfInt(mTab.getValue("M_Inventory_ID"));\n    //var dr1 = null;\n    //var paramInventory = M_Inventory_ID.toString();\n    //dr1 = VIS.dataContext.getJSONRecord("MInventory/GetMInventory", paramInventory);\n\n    var MovementDate = ctx.getContext(windowNo, "MovementDate");\n    var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n    var bd = null;\n    var M_Product_ID = 0;\n    var product = Util.getValueOfInt(mTab.getValue("M_Product_ID"));\n    if (product != null) M_Product_ID = product;\n    if (M_Product_ID == 0) return "";\n    var M_Locator_ID = 0;\n    var locator = Util.getValueOfInt(mTab.getValue("M_Locator_ID"));\n    if (locator != null) M_Locator_ID = locator;\n    if (M_Locator_ID == 0) return "";\n    this.setCalloutActive(true);\n    //\tSet Attribute\n    var M_AttributeSetInstance_ID = 0;\n    var asi = Util.getValueOfInt(mTab.getValue("M_AttributeSetInstance_ID"));\n    if (asi != null) M_AttributeSetInstance_ID = asi;\n    var M_ProductContainer_ID = Util.getValueOfInt(mTab.getValue("M_ProductContainer_ID"));\n    try {\n      bd = this.SetQtyBook(AD_Org_ID, M_AttributeSetInstance_ID, M_Product_ID, M_Locator_ID, MovementDate, M_ProductContainer_ID);\n      mTab.setValue("QtyBook", bd);\n      mTab.setValue("OpeningStock", bd);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n      return mTab.setValue("QtyBook", bd);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// FifferenceQty/AsOnDateCount modified.\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current window no</param>\n  /// <param name="tab">model tab</param>\n  /// <param name="field">model field</param>\n  /// <param name="value">new value</param>\n  /// <returns>error message or ""</returns>\n  CalloutInventory.prototype.SetDiff = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var asOnDateQty = 0,\n      openingStock = 0,\n      diffQty = 0,\n      qtyBook = 0;\n    this.setCalloutActive(true);\n    try {\n      openingStock = Util.getValueOfDecimal(mTab.getValue("OpeningStock"));\n      qtyBook = Util.getValueOfDecimal(mTab.getValue("QtyBook"));\n      if (mField.getColumnName().equals("DifferenceQty")) {\n        diffQty = Util.getValueOfDecimal(mTab.getValue("DifferenceQty"));\n        asOnDateQty = openingStock - diffQty;\n        mTab.setValue("AsOnDateCount", asOnDateQty);\n      } else if (mField.getColumnName().equals("AsOnDateCount")) {\n        asOnDateQty = Util.getValueOfDecimal(mTab.getValue("AsOnDateCount"));\n        diffQty = openingStock - asOnDateQty;\n        mTab.setValue("DifferenceQty", diffQty);\n      }\n      if (qtyBook - diffQty > 0) {\n        mTab.setValue("QtyCount", qtyBook - diffQty);\n      } else {\n        mTab.setValue("QtyCount", 0);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutInventory.prototype.SetQtyBook = function (AD_Org_ID, M_AttributeSetInstance_ID, M_Product_ID, M_Locator_ID, MovementDate, M_ProductContainer_ID) {\n    var isContainerApplicable = false;\n    if (VIS.context.ctx["#PRODUCT_CONTAINER_APPLICABLE"] != undefined) {\n      isContainerApplicable = VIS.context.ctx["#PRODUCT_CONTAINER_APPLICABLE"].equals("Y", true);\n    }\n\n    //var tsDate = (Number(MovementDate.getMonth()) + 1) + "-" + MovementDate.getDate() + "-" + MovementDate.getFullYear();\n    var params = isContainerApplicable.toString() + "," + MovementDate.toString() + "," + M_Product_ID.toString() + "," + M_Locator_ID.toString() + "," + M_AttributeSetInstance_ID.toString() + "," + M_ProductContainer_ID.toString() + "," + AD_Org_ID.toString();\n    var bd = VIS.dataContext.getJSONRecord("MInventory/GetCurrentQty", params);\n    return bd;\n  };\n\n  // Callout added by mohit to get UOM conversion on Physical inventory line and internal use inventory line against the selected UOM.- 12 June 20018\n  /// <summary>\n  /// convert the qty according to selected UOM\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current window no</param>\n  /// <param name="tab">model tab</param>\n  /// <param name="field">model field</param>\n  /// <param name="value">new value</param>\n  /// <returns>Set qty or error message</returns>\n  CalloutInventory.prototype.SetUOMQty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive()) return "";\n    var asOnDateQty = 0,\n      openingStock = 0,\n      diffQty = 0,\n      QtyOrdered = 0;\n    this.setCalloutActive(true);\n    try {\n      var M_Product_ID = Util.getValueOfDecimal(mTab.getValue("M_Product_ID"));\n      if (M_Product_ID == 0) {\n        this.setCalloutActive(false);\n        return "";\n      }\n\n      // Check the source window\n      //physical inventory call\n      if (mTab.getValue("IsInternalUse") == false || mTab.getValue("IsInternalUse") == null) {\n        if (mField.getColumnName() == "C_UOM_ID") {\n          var C_UOM_To_ID = Util.getValueOfInt(value);\n          QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n          M_Product_ID = Util.getValueOfInt(mTab.getValue("M_Product_ID"));\n\n          //JID_0680 set quantity acc to percision\n          paramStr = C_UOM_To_ID.toString().concat(","); //1\n          var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n          var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp)); //, MidpointRounding.AwayFromZero);\n          if (QtyEntered != QtyEntered1) {\n            this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n            QtyEntered = QtyEntered1;\n            mTab.setValue("QtyEntered", QtyEntered);\n          }\n          paramStr = M_Product_ID.toString().concat(\',\').concat(C_UOM_To_ID.toString()).concat(\',\').concat(QtyEntered.toString());\n          var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n          QtyOrdered = pc;\n\n          //handle issue while conversion on Physical Inventory\n          //var conversion = false\n\n          if (QtyOrdered == null) {\n            QtyOrdered = QtyEntered;\n          }\n        } else {\n          var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n          QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n\n          //Get precision from server\n          paramStr = C_UOM_To_ID.toString().concat(","); //1\n          var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n          var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp)); //, MidpointRounding.AwayFromZero);\n          if (QtyEntered != QtyEntered1) {\n            this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n            QtyEntered = QtyEntered1;\n            mTab.setValue("QtyEntered", QtyEntered);\n          }\n          paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",",\n          //2\n\n          QtyEntered.toString()); //3\n          var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n          QtyOrdered = pc; //(Decimal?)MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n\n          if (QtyOrdered == null) QtyOrdered = QtyEntered;\n          var conversion = QtyEntered != QtyOrdered;\n          this.log.fine("UOM=" + C_UOM_To_ID + ", QtyEntered=" + QtyEntered + " -> " + conversion + " QtyOrdered=" + QtyOrdered);\n          ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        }\n        openingStock = Util.getValueOfDecimal(mTab.getValue("OpeningStock"));\n        qtyBook = Util.getValueOfDecimal(mTab.getValue("QtyBook"));\n        if (mTab.getValue("AdjustmentType").toString() == "D") {\n          diffQty = QtyOrdered;\n          asOnDateQty = openingStock - diffQty;\n          mTab.setValue("DifferenceQty", QtyOrdered);\n          mTab.setValue("AsOnDateCount", asOnDateQty);\n        } else if (mTab.getValue("AdjustmentType").toString() == "A") {\n          asOnDateQty = QtyOrdered;\n          diffQty = openingStock - asOnDateQty;\n          mTab.setValue("AsOnDateCount", QtyOrdered);\n          mTab.setValue("DifferenceQty", diffQty);\n        }\n        if (qtyBook - diffQty > 0) {\n          mTab.setValue("QtyCount", qtyBook - diffQty);\n        } else {\n          mTab.setValue("QtyCount", 0);\n        }\n\n        // VIS0045: Reset Cost price when as on date count is less than Current qty\n        if (qtyBook > qtyBook - diffQty) {\n          mTab.setValue("PriceCost", 0);\n        }\n      }\n      // Internal use inventory call\n      else if (mTab.getValue("IsInternalUse") == true) {\n        if (mField.getColumnName() == "C_UOM_ID") {\n          var C_UOM_To_ID = Util.getValueOfInt(value);\n          QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n          M_Product_ID = Util.getValueOfInt(mTab.getValue("M_Product_ID"));\n\n          //JID_0680 set quantity acc to percision\n          paramStr = C_UOM_To_ID.toString().concat(","); //1\n          var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n          var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp)); //, MidpointRounding.AwayFromZero);\n          if (QtyEntered != QtyEntered1) {\n            this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n            QtyEntered = QtyEntered1;\n            mTab.setValue("QtyEntered", QtyEntered);\n          }\n          paramStr = M_Product_ID.toString().concat(\',\').concat(C_UOM_To_ID.toString()).concat(\',\').concat(QtyEntered.toString());\n          var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n          QtyOrdered = pc;\n\n          //handle issue while conversion on Physical Inventory\n          if (QtyOrdered == null) QtyOrdered = QtyEntered;\n          mTab.setValue("QtyInternalUse", QtyOrdered);\n\n          //var conversion = false\n          //if (QtyOrdered != null) {\n          //    conversion = QtyEntered != QtyOrdered;\n          //}\n          //if (QtyOrdered == null) {\n          //    conversion = false;\n          //    QtyOrdered = 1;\n          //}\n          //if (conversion) {\n          //    mTab.setValue("QtyInternalUse", QtyOrdered);\n          //}\n          //else {\n\n          //    mTab.setValue("QtyInternalUse", (QtyOrdered * QtyEntered));\n          //}\n        } else if (mField.getColumnName() == "QtyEntered") {\n          var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n          QtyEntered = Util.getValueOfDecimal(value);\n\n          //Get precision from server\n          paramStr = C_UOM_To_ID.toString().concat(","); //1\n          var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n          var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp)); //, MidpointRounding.AwayFromZero);\n          if (QtyEntered != QtyEntered1) {\n            this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n            QtyEntered = QtyEntered1;\n            mTab.setValue("QtyEntered", QtyEntered);\n          }\n          paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",",\n          //2\n\n          QtyEntered.toString()); //3\n          var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n          QtyOrdered = pc; //(Decimal?)MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n\n          if (QtyOrdered == null) QtyOrdered = QtyEntered;\n          var conversion = QtyEntered != QtyOrdered;\n          this.log.fine("UOM=" + C_UOM_To_ID + ", QtyEntered=" + QtyEntered + " -> " + conversion + " QtyOrdered=" + QtyOrdered);\n          ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n          mTab.setValue("QtyInternalUse", QtyOrdered);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutInventory = CalloutInventory;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutinventory.js?\n}')},"./Areas/VAS/Scripts/model/calloutinvoice.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  var countEd011 = 0;\n  var steps = false;\n  function CalloutInvoice() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutInvoice"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutInvoice, VIS.CalloutEngine); //inherit CalloutEngine\n\n  /**\r\n   *\tInvoice Header - DocType.\r\n   *\t\t- PaymentRule\r\n   *\t\t- temporary Document\r\n   *  Context:\r\n   *  \t- DocSubTypeSO\r\n   *\t\t- HasCharges\r\n   *\t- (re-sets Business Partner info of required)\r\n   *\t@param ctx context\r\n   *\t@param windowNo window no\r\n   *\t@param mTab tab\r\n   *\t@param mField field\r\n   *\t@param value value\r\n   *\t@return null or error message\r\n   */\n  CalloutInvoice.prototype.DocType = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var C_DocType_ID = value; //(int)value;\n    if (C_DocType_ID == null || C_DocType_ID == 0) return "";\n\n    //var sql = "SELECT d.HasCharges,\'N\',d.IsDocNoControlled,"\n    //    + "s.CurrentNext, d.DocBaseType "\n    //    /*//jz outer join\n    //    + "FROM C_DocType d, AD_Sequence s "\n    //    + "WHERE C_DocType_ID=?"\t\t//\t1\n    //    + " AND d.DocNoSequence_ID=s.AD_Sequence_ID(+)";\n    //    */\n    //    + "FROM C_DocType d "\n    //    + "LEFT OUTER JOIN AD_Sequence s ON (d.DocNoSequence_ID=s.AD_Sequence_ID) "\n    //    + "WHERE C_DocType_ID=" + C_DocType_ID;\t\t//\t1\n\n    var paramString = C_DocType_ID.toString();\n    var dr = VIS.dataContext.getJSONRecord("MDocType/GetDocTypeData", paramString);\n    try {\n      if (dr != null) {\n        //\tCharges - Set Context\n        ctx.setContext(windowNo, "HasCharges", Util.getValueOfString(dr["HasCharges"]));\n\n        //\tDocumentNo\n        if (dr["IsDocNoControlled"] == "Y") {\n          mTab.setValue("DocumentNo", "<" + Util.getValueOfString(dr["CurrentNext"]) + ">");\n        }\n\n        //  DocBaseType - Set Context\n        var s = Util.getValueOfString(dr["DocBaseType"]);\n        ctx.setContext(windowNo, "DocBaseType", s);\n\n        //  AP Check & AR Credit Memo\n        if (s.startsWith("AP")) {\n          mTab.setValue("PaymentRule", "S"); //  Check\n        } else if (s.endsWith("C")) {\n          mTab.setValue("PaymentRule", "P"); //  OnCredit\n        }\n\n        // set Value Of Treat As Discount - in case of AP Credit memo only\n        if (mTab.getField("TreatAsDiscount") != null) {\n          if (s.equals("APC")) {\n            mTab.setValue("TreatAsDiscount", Util.getValueOfBoolean(dr["TreatAsDiscount"]));\n          } else {\n            mTab.setValue("TreatAsDiscount", false);\n          }\n        }\n\n        //set isreturntrx\n        if (mTab.getField("IsReturnTrx") != null) {\n          mTab.setValue("IsReturnTrx", Util.getValueOfBoolean(dr["IsReturnTrx"]));\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n      }\n      this.log.log(Level.SEVERE, sql, err);\n      return err.message;\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *\tInvoice Header- BPartner.\r\n   *\t\t- M_PriceList_ID (+ Context)\r\n   *\t\t- C_BPartner_Location_ID\r\n   *\t\t- AD_User_ID\r\n   *\t\t- POReference\r\n   *\t\t- SO_Description\r\n   *\t\t- IsDiscountPrinted\r\n   *\t\t- PaymentRule\r\n   *\t\t- C_PaymentTerm_ID\r\n   *\t@param ctx context\r\n   *\t@param windowNo window no\r\n   *\t@param mTab tab\r\n   *\t@param mField field\r\n   *\t@param value value\r\n   *\t@return null or error message\r\n   */\n  CalloutInvoice.prototype.BPartner = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_BPartner_ID = Util.getValueOfInt(value); //(int)value;\n      if (C_BPartner_ID == null || C_BPartner_ID == 0) {\n        return "";\n      }\n      var isvendor = \'N\';\n      var isCustomer = \'N\';\n      //var sql = "SELECT p.AD_Language,p.C_PaymentTerm_ID,"\n      //    + " COALESCE(p.M_PriceList_ID,g.M_PriceList_ID) AS M_PriceList_ID, p.PaymentRule,p.POReference,"\n      //    + " p.SO_Description,p.IsDiscountPrinted,"\n      //    + " p.SO_CreditLimit, p.SO_CreditLimit-p.SO_CreditUsed AS CreditAvailable,"\n      //    + " l.C_BPartner_Location_ID,c.AD_User_ID,"\n      //    + " COALESCE(p.PO_PriceList_ID,g.PO_PriceList_ID) AS PO_PriceList_ID, p.PaymentRulePO,p.PO_PaymentTerm_ID "\n      //    + "FROM C_BPartner p"\n      //    + " INNER JOIN C_BP_Group g ON (p.C_BP_Group_ID=g.C_BP_Group_ID)"\n      //    + " LEFT OUTER JOIN C_BPartner_Location l ON (p.C_BPartner_ID=l.C_BPartner_ID AND l.IsBillTo=\'Y\' AND l.IsActive=\'Y\')"\n      //    + " LEFT OUTER JOIN AD_User c ON (p.C_BPartner_ID=c.C_BPartner_ID) "\n      //    + "WHERE p.C_BPartner_ID=" + C_BPartner_ID + " AND p.IsActive=\'Y\'";\t\t//\t#1\n\n      //-----------------ANuj----Code----------\n      //var sql = "SELECT p.AD_Language,p.C_PaymentTerm_ID,"\n      //    + " COALESCE(p.M_PriceList_ID,g.M_PriceList_ID) AS M_PriceList_ID, p.PaymentRule,p.POReference,"\n      //    + " p.SO_Description,p.IsDiscountPrinted, p.C_IncoTerm_ID,p.C_IncoTermPO_ID, ";\n\n      //var _CountVA009 = Util.getValueOfInt(VIS.DB.executeScalar("SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'VA009_\'  AND IsActive = \'Y\'"));\n      //if (_CountVA009 > 0) {\n      //    //VA009_PO_PaymentMethod_ID added new column for enhancement.. Google Sheet ID-- SI_0036\n      //    sql += " p.VA009_PaymentMethod_ID, p.VA009_PO_PaymentMethod_ID, ";\n      //    //p.VA009_PO_PaymentMethod_ID, ";\n      //}\n\n      //sql += "p.CreditStatusSettingOn,p.SO_CreditLimit, NVL(p.SO_CreditLimit,0) - NVL(p.SO_CreditUsed,0) AS CreditAvailable,"\n      //    + " l.C_BPartner_Location_ID,c.AD_User_ID,"\n      //    + " COALESCE(p.PO_PriceList_ID,g.PO_PriceList_ID) AS PO_PriceList_ID, p.PaymentRulePO,p.PO_PaymentTerm_ID, "\n      //    + " p.SalesRep_ID,p.IsSalesRep, p.C_Withholding_ID "\n      //    + " FROM C_BPartner p"\n      //    + " INNER JOIN C_BP_Group g ON (p.C_BP_Group_ID=g.C_BP_Group_ID)"\n      //    + " LEFT OUTER JOIN C_BPartner_Location l ON (p.C_BPartner_ID=l.C_BPartner_ID AND l.IsBillTo=\'Y\' AND l.IsActive=\'Y\')"\n      //    + " LEFT OUTER JOIN AD_User c ON (p.C_BPartner_ID=c.C_BPartner_ID) "\n      //    + "WHERE p.C_BPartner_ID=" + C_BPartner_ID + " AND p.IsActive=\'Y\'";\t\t//\t#1\n      var _CountVA009 = false;\n      var module = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA009_");\n      if (module != null) {\n        _CountVA009 = module["VA009_"];\n      }\n      var paramString = _CountVA009.toString() + "," + C_BPartner_ID.toString();\n      var isSOTrx = ctx.isSOTrx(windowNo);\n      var dr = null;\n      var drl = null;\n      try {\n        dr = VIS.dataContext.getJSONRecord("MBPartner/GetBPartnerData", paramString);\n\n        //dr = VIS.DB.executeReader(sql, null, null);\n        //if (dr.read()) {\n        //\tPriceList & IsTaxIncluded & Currency\n        if (dr != null) {\n          var ii = Util.getValueOfInt(dr[isSOTrx ? "M_PriceList_ID" : "PO_PriceList_ID"]);\n          if (ii > 0) {\n            mTab.setValue("M_PriceList_ID", ii);\n          }\n          // JID_0364: If price list not available at BP, user need to select it manually\n\n          //else {\t//\tget default PriceList\n          //    var i = ctx.getContextAsInt("#M_PriceList_ID");\n          //    if (i != 0) {\n          //        mTab.setValue("M_PriceList_ID", i);\n          //    }\n          //}\n\n          //\tPaymentRule\n          //Inco Term\n          var IncoTerm = Util.getValueOfInt(dr[isSOTrx ? "C_IncoTerm_ID" : "C_IncoTermPO_ID"]);\n          if (IncoTerm > 0) {\n            mTab.setValue("C_IncoTerm_ID", IncoTerm);\n          }\n          var s = Util.getValueOfString(dr[isSOTrx ? "PaymentRule" : "PaymentRulePO"]);\n          if (s != null && s.length != 0) {\n            if (ctx.getContext("DocBaseType").toString().endsWith("C"))\n              //\tCredits are Payment Term\n              {\n                s = "P";\n              } else if (isSOTrx && (s.toString().equals("S") || s.toString().equals("U")))\n              //\tNo Check/Transfer for SO_Trx\n              {\n                s = "P"; //  Payment Term\n              }\n            mTab.setValue("PaymentRule", s);\n          }\n\n          //var _CountVA009 = Util.getValueOfInt(VIS.DB.executeScalar("SELECT COUNT(AD_MODULEINFO_ID) FROM AD_MODULEINFO WHERE PREFIX=\'VA009_\'  AND IsActive = \'Y\'"));\n          //if (result != null) {\n          //    _CountVA009 = result["VA009_"];\n          //}\n          //if (_CountVA009 > 0) {\n\n          var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA009_");\n          if (DataPrefix["VA009_"]) {\n            var _PaymentMethod_ID = Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]);\n            var PaymentBasetype = Util.getValueOfString(dr["VA009_PaymentBaseType"]);\n            ////VA009_PO_PaymentMethod_ID added new column for enhancement.. Google Sheet ID-- SI_0036\n            var isvendor = \'N\';\n            var bpdtl = VIS.dataContext.getJSONRecord("MBPartner/GetBPDetails", C_BPartner_ID);\n            if (bpdtl != null) {\n              isvendor = Util.getValueOfString(bpdtl["IsVendor"]);\n              isCustomer = Util.getValueOfString(bpdtl["IsCustomer"]);\n              if (!isSOTrx) {\n                //In case of Purchase Order\n                if (isvendor == "Y") {\n                  _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PO_PaymentMethod_ID"]);\n                  PaymentBasetype = Util.getValueOfString(bpdtl["VA009_PAYMENTBASETYPEPO"]);\n                } else {\n                  _PaymentMethod_ID = 0;\n                  PaymentBasetype = null;\n                }\n              } else {\n                if (isvendor == "Y") {\n                  _PaymentMethod_ID = 0;\n                  PaymentBasetype = null;\n                  if (isCustomer == "Y") {\n                    _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PaymentMethod_ID"]);\n                    PaymentBasetype = Util.getValueOfString(bpdtl["VA009_PAYMENTBASETYPE"]);\n                  }\n                } else {\n                  if (isCustomer == "Y") {\n                    _PaymentMethod_ID = Util.getValueOfInt(bpdtl["VA009_PaymentMethod_ID"]);\n                    PaymentBasetype = Util.getValueOfString(bpdtl["VA009_PAYMENTBASETYPE"]);\n                  }\n                }\n              }\n            }\n            if (_PaymentMethod_ID == 0) mTab.setValue("VA009_PaymentMethod_ID", null);else {\n              mTab.setValue("VA009_PaymentMethod_ID", _PaymentMethod_ID);\n              if (PaymentBasetype != null) {\n                //if (PaymentBasetype != null) {\n                mTab.setValue("PaymentMethod", PaymentBasetype);\n                if (isvendor == \'N\') mTab.setValue("PaymentRule", PaymentBasetype);else mTab.setValue("PaymentRule", PaymentBasetype);\n              } else {\n                mTab.setValue("PaymentMethod", "T");\n                if (isvendor == \'N\') mTab.setValue("PaymentRule", "T");else mTab.setValue("PaymentRule", "T");\n              }\n            }\n          }\n\n          //  Payment Term\n          var PaymentTermPresent = Util.getValueOfInt(mTab.getValue("C_PaymentTerm_ID")); // from BSO/BPO window\n          var C_Order_Blanket = Util.getValueOfDecimal(mTab.getValue("C_Order_Blanket"));\n          if (PaymentTermPresent > 0 && C_Order_Blanket > 0) {} else {\n            ii = Util.getValueOfInt(dr[isSOTrx ? "C_PaymentTerm_ID" : "PO_PaymentTerm_ID"]);\n            if (ii > 0) {\n              mTab.setValue("C_PaymentTerm_ID", ii);\n            }\n          }\n          //\tLocation\n          var locID = Util.getValueOfInt(dr["C_BPartner_Location_ID"]);\n          /*VIS_0045: 04-May-2023 - DevOps Task ID: 2110*/\n          //\toverwritten by InfoBP selection - works only if InfoWindow\n          //\twas used otherwise creates error (uses last value, may bevar  to differnt BP)\n          if (C_BPartner_ID.toString().equals(ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_ID").toString())) {\n            var loc = ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_LOCATION_ID");\n            if (loc && loc.toString().length > 0) {\n              locID = parseInt(loc);\n            }\n          }\n          if (locID == 0) {\n            mTab.setValue("C_BPartner_Location_ID", null);\n          } else {\n            mTab.setValue("C_BPartner_Location_ID", locID);\n          }\n\n          /*VIS_0045: 04-May-2023 - DevOps Task ID: 2110*/\n          //\tContact - overwritten by InfoBP selection\n          var contID = Util.getValueOfInt(dr["AD_User_ID"]);\n          if (C_BPartner_ID.toString().equals(ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_ID").toString())) {\n            var cont = ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "AD_USER_ID");\n            if (cont && cont.toString().length > 0) {\n              contID = parseInt(cont);\n            }\n          }\n          if (contID == 0) {\n            mTab.setValue("AD_User_ID", null);\n          } else {\n            mTab.setValue("AD_User_ID", contID);\n          }\n\n          //\tCreditAvailable\n          if (isSOTrx) {\n            var CreditStatus = dr["CreditStatusSettingOn"];\n            if (CreditStatus == "CH") {\n              var CreditLimit = Util.getValueOfDouble(dr["SO_CreditLimit"]);\n              if (CreditLimit != 0) {\n                var CreditAvailable = Util.getValueOfDouble(dr["CreditAvailable"]);\n                if (dr != null && CreditAvailable <= 0) {\n                  VIS.ADialog.info("CreditOver");\n                }\n              }\n            } else {\n              var locId = Util.getValueOfInt(mTab.getValue("C_BPartner_Location_ID"));\n              // JID_0161 // change here now will check credit settings on field only on Business Partner Header // Lokesh Chauhan 15 July 2019 \n              //sql = "SELECT bp.CreditStatusSettingOn,p.SO_CreditLimit, NVL(p.SO_CreditLimit,0) - NVL(p.SO_CreditUsed,0) AS CreditAvailable" +\n              //    " FROM C_BPartner_Location p INNER JOIN C_BPartner bp ON (bp.C_BPartner_ID = p.C_BPartner_ID) WHERE p.C_BPartner_Location_ID = " + locId;\n              //drl = VIS.DB.executeReader(sql);\n\n              dr1 = VIS.dataContext.getJSONRecord("MBPartner/GetLocationData", locId.toString());\n              if (drl != null) {\n                CreditStatus = drl["CreditStatusSettingOn"];\n                if (CreditStatus == "CL") {\n                  var CreditLimit = Util.getValueOfDouble(drl["SO_CreditLimit"]);\n                  //\tvar SOCreditStatus = dr.getString("SOCreditStatus");\n                  if (CreditLimit != 0) {\n                    var CreditAvailable = Util.getValueOfDouble(drl["CreditAvailable"]);\n                    if (dr != null && CreditAvailable <= 0) {\n                      VIS.ADialog.info("CreditOver");\n                    }\n                  }\n                }\n              }\n            }\n          }\n\n          //\tPO Reference\n          s = Util.getValueOfString(dr["POReference"]);\n          if (s != null && s.length != 0) {\n            mTab.setValue("POReference", s);\n          } else {\n            mTab.setValue("POReference", null);\n          }\n          //\tSO Description\n          s = Util.getValueOfString(dr["SO_Description"]);\n          if (s != null && s.toString().trim().length != 0) {\n            mTab.setValue("Description", s);\n          }\n          //\tIsDiscountPrinted\n          s = Util.getValueOfString(dr["IsDiscountPrinted"]);\n          if (s != null && s.toString().trim().length != 0) {\n            mTab.setValue("IsDiscountPrinted", s);\n          } else {\n            mTab.setValue("IsDiscountPrinted", "N");\n          }\n          //if dr has supply type property then set its value\n          if (dr.hasOwnProperty("VA106_SupplyType")) {\n            mTab.setValue("VA106_SupplyType", dr["VA106_SupplyType"]);\n          }\n          // set withholding tax defined on vendor/customer\n          //mTab.setValue("C_Withholding_ID", Util.getValueOfInt(dr.get("C_Withholding_ID")));\n        }\n        //dr.close();\n      } catch (err) {\n        this.setCalloutActive(false);\n        this.log.log(Level.SEVERE, "bPartner", err);\n        return err.message;\n      } finally {}\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *\tSet Payment Term.\r\n   *\tPayment Term has changed \r\n   *\t@param ctx context\r\n   *\t@param windowNo window no\r\n   *\t@param mTab tab\r\n   *\t@param mField field\r\n   *\t@param value value\r\n   *\t@return null or error message\r\n   */\n  CalloutInvoice.prototype.PaymentTerm = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_PaymentTerm_ID = value;\n      var C_Invoice_ID = ctx.getContextAsInt(windowNo, "C_Invoice_ID", false);\n      var get_ID;\n      var apply;\n      if (C_PaymentTerm_ID == null || C_PaymentTerm_ID == 0 || C_Invoice_ID == 0)\n        //\tnot saved yet\n        {\n          return "";\n        }\n      //\n      var paramString = C_PaymentTerm_ID.toString().concat(",", C_Invoice_ID.toString());\n      var dr = VIS.dataContext.getJSONRecord("MPaymentTerm/GetPaymentTerm", paramString);\n\n      // Added by Bharat on 18 July 2017 as issue given by Ravikant on Payment Term selection giving Internal server error..\n      if (dr != null) {\n        get_ID = dr["Get_ID"];\n        var valid = dr["Apply"];\n        if (get_ID == 0) {\n          return "PaymentTerm not found";\n        }\n\n        // JID_0576: "Getting error ""Could not save changes - data was changed after query. IsPayScheduleValid"" while changing payment term after adding invoice line"                \n        mTab.setValue("IsPayScheduleValid", valid ? true : false);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /***\r\n   *\tInvoice Line - Product.\r\n   *\t\t- reset C_Charge_ID / M_AttributeSetInstance_ID\r\n   *\t\t- PriceList, PriceStd, PriceLimit, C_Currency_ID, EnforcePriceLimit\r\n   *\t\t- UOM\r\n   *\tCalls Tax\r\n   *\t@param ctx context\r\n   *\t@param windowNo window no\r\n   *\t@param mTab tab\r\n   *\t@param mField field\r\n   *\t@param value value\r\n   *\t@return null or error message\r\n   */\n  CalloutInvoice.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      mTab.setValue("VA038_AmortizationTemplate_ID", 0);\n      return "";\n    }\n    var M_Product_ID = value;\n    if (M_Product_ID == null || M_Product_ID == 0) return "";\n    this.setCalloutActive(true);\n    try {\n      // Clear Charge\n      mTab.setValue("C_Charge_ID", null);\n\n      // JID_0910: On change of product on line system is not removing the ASI. if product is changed then also update the ASI field.\n      mTab.setValue("M_AttributeSetInstance_ID", null);\n\n      /*****\tPrice Calculation see also qty\t****/\n      var Qty = mTab.getValue("QtyInvoiced");\n      var M_AttributeSetInstance_ID = ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID");\n      var paramString = mTab.getValue("C_Invoice_ID").toString().concat(",", M_Product_ID.toString(), ",", M_AttributeSetInstance_ID.toString(), ",", Qty.toString());\n      var invoiceRecord = VIS.dataContext.getJSONRecord("MInvoice/GetInvoiceProductInfo", paramString);\n      countEd011 = Util.getValueOfInt(invoiceRecord["countEd011"]);\n      var isSOTrx = invoiceRecord["IsSOTrx"];\n      var purchasingUom = 0;\n      if (countEd011 > 0) {\n        //VAI050- If isSoTrx false than Set Purchasing UOM from Product if Purchasing UOM found on Purchasing tab\n        //If Purchasing UOM not found than give priority to PU unit of Product else set Base UOM of Product\n        if (Util.getValueOfInt(invoiceRecord["purchasingUom"]) > 0 && !isSOTrx) purchasingUom = Util.getValueOfInt(invoiceRecord["purchasingUom"]);else purchasingUom = Util.getValueOfInt(invoiceRecord["VAS_PurchaseUOM_ID"]);\n        if (purchasingUom > 0 && isSOTrx == false) {\n          mTab.setValue("C_UOM_ID", purchasingUom);\n        }\n        //VAI050- If isSoTrx true than Set Sales UOM from Product if found else set Base UOM\n        else if (Util.getValueOfInt(invoiceRecord["VAS_SalesUOM_ID"]) > 0 && isSOTrx) {\n          mTab.setValue("C_UOM_ID", Util.getValueOfInt(invoiceRecord["VAS_SalesUOM_ID"]));\n        } else {\n          mTab.setValue("C_UOM_ID", Util.getValueOfInt(invoiceRecord["headerUom"]));\n        }\n      }\n\n      // set C_RevenueRecognition_ID if InvoiceLine Tab Contains C_RevenueRecognition_ID field\n      if (mTab.findColumn("C_RevenueRecognition_ID") > -1) {\n        mTab.setValue("C_RevenueRecognition_ID", Util.getValueOfInt(invoiceRecord["C_RevenueRecognition_ID"]));\n      }\n\n      // VIS_045: 01-July-2025, Check Tax Collected at Source is defined on Product Master, if defined then check it is sales trx, if yes then set value on InvoiceLine\n      if (isSOTrx && mTab.findColumn("VA106_TaxCollectedAtSource_ID") > -1 && invoiceRecord.hasOwnProperty("VA106_TaxCollectedAtSource_ID")) {\n        mTab.setValue("VA106_TaxCollectedAtSource_ID", Util.getValueOfInt(invoiceRecord["VA106_TaxCollectedAtSource_ID"]));\n      }\n\n      //\t\t\n      mTab.setValue("PriceList", Util.getValueOfDecimal(invoiceRecord["PriceList"]));\n      mTab.setValue("PriceLimit", Util.getValueOfDecimal(invoiceRecord["PriceLimit"]));\n      mTab.setValue("PriceActual", Util.getValueOfDecimal(invoiceRecord["PriceActual"]));\n      mTab.setValue("PriceEntered", Util.getValueOfDecimal(invoiceRecord["PriceEntered"]));\n      mTab.setValue("C_Currency_ID", Util.getValueOfInt(invoiceRecord["C_Currency_ID"]));\n      mTab.setValue("PrintDescription", Util.getValueOfString(invoiceRecord["DocumentNote"]));\n      if (countEd011 > 0 && purchasingUom > 0 && isSOTrx == false) {\n        // when record created with purchasing UOM, then set Qty Invoiced\n        mTab.setValue("QtyInvoiced", Util.getValueOfDecimal(invoiceRecord["QtyInvoiced"]));\n      }\n      ctx.setContext(windowNo, "EnforcePriceLimit", Util.getValueOfString(invoiceRecord["EnforcePriceLimit"]) ? "Y" : "N");\n      ctx.setContext(windowNo, "DiscountSchema", Util.getValueOfString(invoiceRecord["DiscountSchema"]) ? "Y" : "N");\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    oldValue = null;\n    return this.Tax(ctx, windowNo, mTab, mField, value);\n  };\n\n  /**\r\n   * \tCalculate Discout based on Discount Schema selected on Business Partner\r\n   *\t@param ProductId Product ID\r\n   *\t@param ClientId Tenant\r\n   *\t@param amount Amount on which discount is to be calculated\r\n   *\t@param DiscountSchemaId Discount Schema of Business Partner\r\n   *\t@param FlatDiscount Flat Discount % on Business Partner\r\n   *\t@param QtyEntered Quantity on which discount is to be calculated\r\n   *\t@return Discount value\r\n   */\n  //CalloutInvoice.prototype.FlatDiscount = function (ProductId, ClientId, amount, DiscountSchemaId, FlatDiscount, QtyEntered) {\n  //    var amountAfterBreak = amount;\n  //    var sql = "SELECT UNIQUE M_Product_Category_ID FROM M_Product WHERE IsActive=\'Y\' AND M_Product_ID = " + ProductId;\n  //    var productCategoryId = Util.getValueOfInt(VIS.DB.executeScalar(sql));\n  //    var isCalulate = false;\n  //    var dsDiscountBreak = null;\n  //    var discountType = "";\n  //    // Is flat Discount\n  //    // JID_0487: Not considering Business Partner Flat Discout Checkbox value while calculating the Discount\n  //    sql = "SELECT  DiscountType, IsBPartnerFlatDiscount, FlatDiscount FROM M_DiscountSchema WHERE "\n  //              + "M_DiscountSchema_ID = " + DiscountSchemaId + " AND IsActive=\'Y\'  AND AD_Client_ID=" + ClientId;\n  //    dsDiscountBreak = VIS.DB.executeDataSet(sql);\n\n  //    if (dsDiscountBreak != null && dsDiscountBreak.getTables().length > 0) {\n  //        discountType = Util.getValueOfString(dsDiscountBreak.getTables()[0].getRows()[0].getCell("DiscountType"));\n  //        if (discountType == "F") {\n  //            var discountBreakValue = 0;\n  //            isCalulate = true;\n  //            if (Util.getValueOfString(dsDiscountBreak.getTables()[0].getRows()[0].getCell("IsBPartnerFlatDiscount")) == "N") {\n  //                discountBreakValue = (amount - ((amount * Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[0].getCell("FlatDiscount"))) / 100));\n  //            }\n  //            else {\n  //                discountBreakValue = (amount - ((amount * FlatDiscount) / 100));\n  //            }\n  //            amountAfterBreak = discountBreakValue;\n  //            return amountAfterBreak;\n  //        }\n\n  //        else if (discountType == "B") {\n\n  //            // Product Based\n  //            sql = "SELECT M_Product_Category_ID , M_Product_ID , BreakValue , IsBPartnerFlatDiscount , BreakDiscount FROM M_DiscountSchemaBreak WHERE "\n  //                       + "M_DiscountSchema_ID = " + DiscountSchemaId + " AND M_Product_ID = " + ProductId\n  //                       + " AND IsActive=\'Y\'  AND AD_Client_ID=" + ClientId + "Order BY BreakValue DESC";\n  //            dsDiscountBreak = VIS.DB.executeDataSet(sql);\n  //            if (dsDiscountBreak.getTables().length > 0) {\n  //                var m = 0;\n  //                var discountBreakValue = 0;\n\n  //                for (m = 0; m < dsDiscountBreak.getTables()[0].getRows().length; m++) {\n  //                    if (QtyEntered < Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakValue"))) {\n  //                        continue;\n  //                    }\n  //                    if (Util.getValueOfString(dsDiscountBreak.getTables()[0].getRows()[m].getCell("IsBPartnerFlatDiscount")) == "N") {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - (amount * Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakDiscount")) / 100));\n  //                        break;\n  //                    }\n  //                    else {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - ((amount * FlatDiscount) / 100));\n  //                        break;\n  //                    }\n  //                }\n  //                if (isCalulate) {\n  //                    amountAfterBreak = discountBreakValue;\n  //                    return amountAfterBreak;\n  //                }\n  //            }\n  //            //\n\n  //            // Product Category Based\n  //            sql = "SELECT M_Product_Category_ID , M_Product_ID , BreakValue , IsBPartnerFlatDiscount , BreakDiscount FROM M_DiscountSchemaBreak WHERE "\n  //                       + " M_DiscountSchema_ID = " + DiscountSchemaId + " AND M_Product_Category_ID = " + productCategoryId\n  //                       + " AND IsActive=\'Y\'  AND AD_Client_ID=" + ClientId + "Order BY BreakValue DESC";\n  //            dsDiscountBreak = VIS.DB.executeDataSet(sql);\n  //            if (dsDiscountBreak.getTables().length > 0) {\n  //                var m = 0;\n  //                var discountBreakValue = 0;\n\n  //                for (m = 0; m < dsDiscountBreak.getTables()[0].getRows().length; m++) {\n  //                    if (QtyEntered < Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakValue"))) {\n  //                        continue;\n  //                    }\n  //                    if (Util.getValueOfString(dsDiscountBreak.getTables()[0].getRows()[m].getCell("IsBPartnerFlatDiscount")) == "N") {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - (amount * Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakDiscount")) / 100));\n  //                        break;\n  //                    }\n  //                    else {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - ((amount * FlatDiscount) / 100));\n  //                        break;\n  //                    }\n  //                }\n  //                if (isCalulate) {\n  //                    amountAfterBreak = discountBreakValue;\n  //                    return amountAfterBreak;\n  //                }\n  //            }\n  //            //\n\n  //            // Otherwise\n  //            sql = "SELECT M_Product_Category_ID , M_Product_ID , BreakValue , IsBPartnerFlatDiscount , BreakDiscount FROM M_DiscountSchemaBreak WHERE "\n  //                       + " M_DiscountSchema_ID = " + DiscountSchemaId + " AND M_Product_Category_ID IS NULL AND m_product_id IS NULL "\n  //                       + " AND IsActive=\'Y\'  AND AD_Client_ID=" + ClientId + "Order BY BreakValue DESC";\n  //            dsDiscountBreak = VIS.DB.executeDataSet(sql);\n  //            if (dsDiscountBreak.getTables().length > 0) {\n  //                var m = 0;\n  //                var discountBreakValue = 0;\n\n  //                for (m = 0; m < dsDiscountBreak.getTables()[0].getRows().length; m++) {\n  //                    if (QtyEntered < Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakValue"))) {\n  //                        continue;\n  //                    }\n  //                    if (Util.getValueOfString(dsDiscountBreak.getTables()[0].getRows()[m].getCell("IsBPartnerFlatDiscount")) == "N") {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - (amount * Util.getValueOfDecimal(dsDiscountBreak.getTables()[0].getRows()[m].getCell("BreakDiscount")) / 100));\n  //                        break;\n  //                    }\n  //                    else {\n  //                        isCalulate = true;\n  //                        discountBreakValue = (amount - ((amount * FlatDiscount) / 100));\n  //                        break;\n  //                    }\n  //                }\n  //                if (isCalulate) {\n  //                    amountAfterBreak = discountBreakValue;\n  //                    return amountAfterBreak;\n  //                }\n  //            }\n  //        }\n  //    }\n\n  //    return amountAfterBreak;\n  //};\n\n  /**\r\n   *\tInvoice Line - Charge.\r\n   * \t\t- updates PriceActual from Charge\r\n   * \t\t- sets PriceLimit, PriceList to zero\r\n   * \tCalles tax\r\n   *\t@param ctx context\r\n   *\t@param windowNo window no\r\n   *\t@param mTab tab\r\n   *\t@param mField field\r\n   *\t@param value value\r\n   *\t@return null or error message\r\n   */\n  CalloutInvoice.prototype.Charge = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      mTab.setValue("VA038_AmortizationTemplate_ID", 0);\n      return "";\n    }\n    var dr = null;\n    try {\n      var C_Charge_ID = value;\n      if (C_Charge_ID == null || C_Charge_ID == 0) return "";\n\n      //\tNo Product defined\n      if (mTab.getValue("M_Product_ID") != null) {\n        mTab.setValue("C_Charge_ID", null);\n        return "ChargeExclusively";\n      }\n      mTab.setValue("M_AttributeSetInstance_ID", null);\n      mTab.setValue("S_ResourceAssignment_ID", null);\n\n      //JID_0054: Currently System setting the Each as UOM after selecting the cahrge. Need to set default UOM for charge.\n      var c_uom_id = ctx.getContextAsInt("#C_UOM_ID");\n      if (c_uom_id > 0) {\n        mTab.setValue("C_UOM_ID", c_uom_id); //\tDefault UOM from context.\n      } else {\n        mTab.setValue("C_UOM_ID", 100); //\tEA\n      }\n      ctx.setContext(windowNo, "DiscountSchema", "N");\n\n      //JID_1744 The precision should be as per Currenct Precision\n      //JID_1744 The precision should be as per Currenct Precision\n      var stdPrecision = VIS.dataContext.getJSONRecord("MInvoice/GetPercision", mTab.getValue("C_Invoice_ID").toString());\n\n      //190 - Remove client side query and set print description\n      var dr = VIS.dataContext.getJSONRecord("MCharge/GetChargeDetails", C_Charge_ID.toString());\n      if (dr != null) {\n        mTab.setValue("PriceEntered", Util.getValueOfDecimal(dr["ChargeAmt"]).toFixed(stdPrecision));\n        mTab.setValue("PrintDescription", Util.getValueOfString(dr["PrintDescription"]));\n        mTab.setValue("PriceActual", Util.getValueOfDecimal(dr["ChargeAmt"]).toFixed(stdPrecision));\n        mTab.setValue("PriceLimit", 0);\n        mTab.setValue("PriceList", 0);\n        mTab.setValue("Discount", 0);\n      }\n      mTab.setValue("PriceLimit", VIS.Env.ZERO);\n      mTab.setValue("PriceList", VIS.Env.ZERO);\n      mTab.setValue("Discount", VIS.Env.ZERO);\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err.message;\n    }\n    oldValue = null;\n    return this.Tax(ctx, windowNo, mTab, mField, value);\n  };\n\n  /**\r\n   *\tInvoice Line - Tax.\r\n   *\t\t- basis: Product, Charge, BPartner Location\r\n   *\t\t- sets C_Tax_ID\r\n   *  Calles Amount\r\n   *\t@param ctx context\r\n   *\t@param windowNo window no\r\n   *\t@param mTab tab\r\n   *\t@param mField field\r\n   *\t@param value value\r\n   *\t@return null or error message\r\n   */\n  CalloutInvoice.prototype.Tax = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) == 0 && Util.getValueOfInt(mTab.getValue("M_Product_ID")) == 0) {\n      return "";\n    }\n    var column = mField.getColumnName();\n    try {\n      /**** Start Amit For Tax Type Module ****/\n      var taxRule = "";\n      var sql = "";\n      // JID_1449: Tax is not working in case of charge on invoice line\n      var params = Util.getValueOfString(mTab.getValue("C_Invoice_ID")).concat(",", Util.getValueOfString(mTab.getValue("M_Product_ID")) + "," + Util.getValueOfString(mTab.getValue("C_Charge_ID")));\n      var recDic = VIS.dataContext.getJSONRecord("MInvoice/GetTax", params);\n      var _CountVATAX = Util.getValueOfInt(recDic["_CountVATAX"]);\n      var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      if (_CountVATAX > 0) {\n        taxRule = Util.getValueOfString(recDic["taxRule"]);\n      }\n      if (taxRule == "T") {\n        var taxid = Util.getValueOfInt(recDic["taxId"]);\n        if (taxid > 0) {\n          mTab.setValue("C_Tax_ID", taxid);\n        } else {\n          if (Util.getValueOfInt(mTab.getValue("M_Product_ID")) > 0) {\n            mTab.setValue("M_Product_ID", "");\n            this.setCalloutActive(false);\n            if (recDic["TaxExempt"] == "Y") {\n              return VIS.ADialog.info("TaxNoExemptFound");\n            } else {\n              return VIS.ADialog.info("VATAX_DefineTax");\n            }\n          } else if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) > 0) {\n            mTab.setValue("C_Charge_ID", "");\n            this.setCalloutActive(false);\n            if (recDic["TaxExempt"] == "Y") {\n              return VIS.ADialog.info("TaxNoExemptFound");\n            } else {\n              return VIS.ADialog.info("VATAX_DefineChargeTax");\n            }\n          }\n        }\n      }\n      /**** end Amit For Tax Type Module ****/else {\n        //\tCheck Product\n        var M_Product_ID = 0;\n        if (column.toString() == "M_Product_ID") {\n          M_Product_ID = value;\n        } else {\n          M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n        }\n        var C_Charge_ID = 0;\n        if (column.toString() == "C_Charge_ID") {\n          C_Charge_ID = value;\n        } else {\n          C_Charge_ID = ctx.getContextAsInt(windowNo, "C_Charge_ID");\n        }\n        this.log.fine("Product=" + M_Product_ID + ", C_Charge_ID=" + C_Charge_ID);\n        if (M_Product_ID == 0 && C_Charge_ID == 0) {\n          return this.Amt(ctx, windowNo, mTab, mField, value);\n        }\n\n        //\tCheck Partner Location\n        var shipC_BPartner_Location_ID = ctx.getContextAsInt(windowNo, "C_BPartner_Location_ID");\n        if (shipC_BPartner_Location_ID == 0) {\n          return this.Amt(ctx, windowNo, mTab, mField, value);\n        }\n        this.log.fine("Ship BP_Location=" + shipC_BPartner_Location_ID);\n        var billC_BPartner_Location_ID = shipC_BPartner_Location_ID;\n        this.log.fine("Bill BP_Location=" + billC_BPartner_Location_ID);\n\n        //\tDates \n        var billDate = ctx.getContext("DateInvoiced");\n        this.log.fine("Bill Date=" + billDate);\n        var shipDate = billDate;\n        this.log.fine("Ship Date=" + shipDate);\n        var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n        this.log.fine("Org=" + AD_Org_ID);\n        var M_Warehouse_ID = ctx.getContextAsInt("#M_Warehouse_ID");\n        this.log.fine("Warehouse=" + M_Warehouse_ID);\n        var paramString = C_Charge_ID.toString().concat(",", billDate.toString(), shipDate.toString(), ",", AD_Org_ID.toString(), ",", M_Warehouse_ID.toString(), ",", billC_BPartner_Location_ID.toString(), ",", shipC_BPartner_Location_ID.toString(), ",", ctx.getWindowContext(windowNo, "IsSOTrx", true).equals("Y"));\n        var C_Tax_ID = Util.getValueOfInt(VIS.dataContext.getJSONRecord("MTax/Get", paramString));\n        this.log.info("Tax ID=" + C_Tax_ID);\n        //\n        if (C_Tax_ID == 0) {\n          // VIS.ADialog.info("");\n        } else {\n          mTab.setValue("C_Tax_ID", C_Tax_ID);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    oldValue = null;\n    return this.Amt(ctx, windowNo, mTab, mField, value);\n  };\n\n  /**\r\n   *\tInvoice - Amount.\r\n   *\t\t- called from QtyInvoiced, PriceActual\r\n   *\t\t- calculates LineNetAmt\r\n   *\t@param ctx context\r\n   *\t@param windowNo window no\r\n   *\t@param mTab tab\r\n   *\t@param mField field\r\n   *\t@param value value\r\n   *\t@return null or error message\r\n   */\n  CalloutInvoice.prototype.Amt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) == 0 && Util.getValueOfInt(mTab.getValue("M_Product_ID")) == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      this.log.log(Level.WARNING, "amt - init");\n      var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n      var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n      var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n      var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      var paramStr = M_PriceList_ID.toString(); //1\n\n      //Get product price information\n      var dr;\n      dr = VIS.dataContext.getJSONRecord("MPriceList/GetPriceList", paramStr);\n      var PriceListPrecision = 2;\n      var StdPrecision = 2;\n      var epl = "Y";\n      var IsTaxIncluded = "N";\n      if (dr != null) {\n        StdPrecision = dr["StdPrecision"];\n        PriceListPrecision = dr["PriceListPrecision"];\n        epl = Util.getValueOfString(dr["EnforcePriceLimit"]);\n        IsTaxIncluded = Util.getValueOfString(dr["IsTaxIncluded"]);\n      }\n      var QtyEntered, QtyInvoiced, PriceEntered, PriceActual, PriceLimit, Discount, PriceList, DiscountSchema;\n      //\tget values\n      //added by bharat Mantis id : 1230\n      var orderline_ID = Util.getValueOfInt(mTab.getValue("C_OrderLine_ID"));\n      //VAI082:-DevOps ID:-4092-On Change of quantity, price should be set based on discount schema.  \n      DiscountApplied = Util.getValueOfBoolean(mTab.getValue("VAS_IsDiscountApplied"));\n      QtyEntered = mTab.getValue("QtyEntered");\n      QtyInvoiced = mTab.getValue("QtyInvoiced");\n      this.log.fine("QtyEntered=" + QtyEntered + ", Invoiced=" + QtyInvoiced + ", UOM=" + C_UOM_To_ID);\n      //\n      PriceEntered = mTab.getValue("PriceEntered");\n      PriceActual = mTab.getValue("PriceActual");\n      PriceLimit = mTab.getValue("PriceLimit");\n      PriceList = mTab.getValue("PriceList");\n      this.log.fine("PriceList=" + PriceList + ", Limit=" + PriceLimit + ", Precision=" + PriceListPrecision);\n      this.log.fine("PriceEntered=" + PriceEntered + ", Actual=" + PriceActual); // + ", Discount=" + Discount);\n\n      //Start Amit UOM\n      if (mField.getColumnName() == "QtyEntered") {\n\n        //var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID", false);\n\n        //if (orderline_ID == 0) {\n        //    paramStr = M_Product_ID.toString().concat(",", (mTab.getValue("C_Invoice_ID")).toString() +\n        //        "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) +\n        //        "," + C_UOM_To_ID.toString() + "," + ctx.getAD_Client_ID().toString() + "," + C_BPartner_ID.toString() +\n        //        "," + QtyEntered.toString());\n        //    var prices = VIS.dataContext.getJSONRecord("MInvoice/GetPrices", paramStr);\n\n        //    if (prices != null) {\n        //        PriceList = prices["PriceList"];\n        //        mTab.setValue("PriceList", PriceList);\n        //        PriceEntered = prices["PriceEntered"];\n        //        mTab.setValue("PriceLimit", prices["PriceLimit"]);\n        //        PriceActual = PriceEntered;\n        //        mTab.setValue("PriceActual", PriceActual);\n        //        mTab.setValue("PriceEntered", PriceEntered);\n        //    }\n        //}\n      }\n\n      //\tQty changed - recalc price\n      if ((mField.getColumnName() == "QtyInvoiced" || mField.getColumnName() == "QtyEntered" || mField.getColumnName() == "M_Product_ID") && !"N" == ctx.getContext("DiscountSchema")) {\n        var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n        //if (mField.getColumnName() == "QtyEntered") {\n        //    var paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", //2\n        //        QtyEntered.toString()); //3\n        //    QtyInvoiced = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductTo", paramStr);\n        //}\n\n        if (QtyInvoiced == null) QtyInvoiced = QtyEntered;\n\n        //var date = mTab.getValue("DateInvoiced");\n\n        //if (M_PriceList_ID <= 0) {\n        //    var invoiceRecord = VIS.dataContext.getJSONRecord("MInvoice/GetInvoice", (mTab.getValue("C_Invoice_ID")).toString());\n        //    M_PriceList_ID = invoiceRecord["M_PriceList_ID"];\n        //}\n\n        //** Price List - ValidFrom date validation ** Dt:01/02/2021 ** Modified By: Kumar **//\n        //var paramsPrice;\n        //paramsPrice = M_PriceList_ID.toString().concat(",", mTab.getValue("C_Invoice_ID").toString(), ",",\n        //    M_Product_ID.toString(), ",",\n        //    C_UOM_To_ID.toString(), ",",\n        //    Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")), ",",\n        //    "2");\n\n        //Get PriceListversion based on Pricelist\n        //var _priceListVersion_ID = 0;\n        //if (date == null) {\n        //    // when we have date, system will getting pricelist version id in the model - GetProductPricing\n        //    _priceListVersion_ID = VIS.dataContext.getJSONRecord("MPriceListVersion/GetM_PriceList_Version_ID", paramsPrice);\n        //}\n\n        if (orderline_ID == 0) {\n          //var paramString;\n          //if (date == null) {\n          //    paramString = M_Product_ID.toString().concat(",", C_BPartner_ID.toString(), ",", //2\n          //        QtyInvoiced.toString(), ",", //3\n          //        isSOTrx, ",", //4 \n          //        M_PriceList_ID.toString(), ",", //5\n          //        _priceListVersion_ID.toString(), ",", //6\n          //        date, ",", null, ",",  //7\n          //        C_UOM_To_ID.toString(), ",", 1);\n          //}\n          //else {\n          //    paramString = M_Product_ID.toString().concat(",", C_BPartner_ID.toString(), ",", //2\n          //        QtyInvoiced.toString(), ",", //3\n          //        isSOTrx, ",", //4 \n          //        M_PriceList_ID.toString(), ",", //5\n          //        _priceListVersion_ID.toString(), ",", //6\n          //        date.toString(), ",", null, ",",  //7\n          //        C_UOM_To_ID.toString(), ",", 1);\n          //}\n\n          //Get product price information\n          //var dr = null;\n          //dr = VIS.dataContext.getJSONRecord("MProductPricing/GetProductPricing", paramString);\n\n          paramString = M_Product_ID.toString().concat(",", mTab.getValue("C_Invoice_ID").toString() + "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) + "," + C_UOM_To_ID.toString() + "," + ctx.getAD_Client_ID().toString() + "," + C_BPartner_ID.toString() + "," + QtyEntered.toString());\n          var prices = VIS.dataContext.getJSONRecord("MInvoice/GetPrices", paramString);\n          var isDiscountApplied = "N";\n          if (prices != null) {\n            // VIS_0045: Handle zero price issue on quantity change.\n            if (mField.getColumnName() == "M_Product_ID" || Util.getValueOfDecimal(prices["PriceList"]) != 0 && mTab.getValue("PriceList") == 0) {\n              PriceList = prices["PriceList"];\n              mTab.setValue("PriceList", PriceList);\n            }\n            PriceEntered = prices["PriceEntered"];\n            DiscountSchema = Util.getValueOfString(prices["DiscountSchema"]);\n            isDiscountApplied = Util.getValueOfString(prices["IsDiscountApplied"]);\n\n            // VIS_0045: Handle zero price issue on quantity change.\n            if (mField.getColumnName() == "M_Product_ID" || Util.getValueOfDecimal(prices["PriceLimit"]) != 0 && mTab.getValue("PriceLimit") == 0) {\n              mTab.setValue("PriceLimit", prices["PriceLimit"]);\n            }\n          }\n\n          //if (PriceEntered == null) {\n          //    PriceEntered = dr.PriceStd;\n          //}\n          this.log.fine("amt - QtyChanged -> PriceActual=" + PriceEntered + ", PriceEntered=" + PriceEntered); //+ ", Discount=" + dr.Discount\n          PriceActual = PriceEntered;\n\n          // VIS_0045: Handle zero price issue on quantity change.\n          // if Discount applied with Discount Schema  and price entered not ZERO then change price\n          //VAI082:-DevOps ID:-4092-On change of quantity, price should be set based on discount schema.               \n          if (mField.getColumnName() == "M_Product_ID" || (isDiscountApplied.equals("Y") || DiscountApplied) && PriceEntered != 0 || PriceEntered != 0 && mTab.getValue("PriceEntered") == 0) {\n            mTab.setValue("VAS_IsDiscountApplied", isDiscountApplied.equals("Y"));\n            mTab.setValue("PriceActual", PriceActual);\n            mTab.setValue("PriceEntered", PriceEntered);\n          }\n        }\n        ctx.setContext(windowNo, "DiscountSchema", DiscountSchema ? "Y" : "N");\n      } else if (mField.getColumnName() == "PriceActual") {\n        PriceActual = Util.getValueOfDecimal(value.toFixed(PriceListPrecision));\n        PriceEntered = PriceActual;\n        //\n        this.log.fine("amt - PriceActual=" + PriceActual + " -> PriceEntered=" + PriceEntered);\n        mTab.setValue("PriceEntered", PriceEntered);\n        mTab.SetValue("PriceActual", PriceActual);\n      } else if (mField.getColumnName() == "PriceEntered") {\n        PriceEntered = Util.getValueOfDecimal(value.toFixed(PriceListPrecision));\n        PriceActual = PriceEntered;\n        if (PriceActual == null) {\n          PriceActual = PriceEntered;\n        }\n        //\n        this.log.fine("amt - PriceEntered=" + PriceEntered + "-> PriceActual=" + PriceActual);\n        mTab.setValue("PriceActual", PriceActual);\n        mTab.setValue("PriceEntered", PriceEntered);\n      }\n\n      //\tCheck PriceLimit\n      var OverwritePriceLimit = false;\n      //var epl = ctx.getContext("EnforcePriceLimit");\n      var enforce = isSOTrx && epl != null && epl == "Y";\n      //if (epl == "") {\n      //    var paramString = Util.getValueOfInt(mTab.getValue("C_Invoice_ID")).toString();\n      //    var C_Invoice = VIS.dataContext.getJSONRecord("MInvoice/GetInvoice", paramString);\n      //    //var sql = "SELECT EnforcePriceLimit FROM M_PriceList WHERE IsActive = \'Y\' AND M_PriceList_ID = " + C_Invoice["M_PriceList_ID"];\n      //    //epl = VIS.DB.executeScalar(sql);\n      //    enforce = (C_Invoice["IsSOTrx"] && epl != null && epl == "Y");\n      //}\n\n      OverwritePriceLimit = VIS.MRole.getDefault().getIsOverwritePriceLimit();\n      if (enforce && OverwritePriceLimit) {\n        enforce = false;\n      }\n      //\tCheck Price Limit?\n      if (enforce && Util.getValueOfDouble(PriceLimit) != 0.0 && PriceActual.compareTo(PriceLimit) < 0) {\n        PriceActual = PriceLimit;\n        PriceEntered = PriceActual;\n        if (PriceEntered == null) {\n          PriceEntered = PriceLimit;\n        }\n        this.log.fine("amt =(under) PriceEntered=" + PriceEntered + ", Actual" + PriceLimit);\n        mTab.setValue("PriceActual", PriceLimit);\n        mTab.setValue("PriceEntered", PriceEntered);\n        VIS.ADialog.info("UnderLimitPrice");\n        //\tRepeat Discount calc\n        if (Util.getValueOfInt(PriceList) != 0) {\n          Discount = (PriceList - PriceActual) / PriceList * 100.0;\n          if (Util.scale(Discount) > 2) {\n            Discount = Discount.toFixed(2);\n          }\n        }\n      }\n\n      //\tLine Net Amt\n      PriceEntered = Util.getValueOfDecimal(mTab.getValue("PriceEntered"));\n      var lineNetAmt = QtyEntered * PriceEntered;\n      if (Util.scale(lineNetAmt) > StdPrecision) {\n        lineNetAmt = Util.getValueOfDecimal(lineNetAmt.toFixed(StdPrecision));\n      }\n      this.log.info("amt = LineNetAmt=" + lineNetAmt);\n      mTab.setValue("LineNetAmt", lineNetAmt);\n\n      //\tCalculate Tax Amount for PO / SO (SI_0339)\n      var taxAmt = VIS.Env.ZERO;\n      if (mField.getColumnName() == "TaxAmt") {\n        taxAmt = mTab.getValue("TaxAmt");\n      } else {\n        var taxID = mTab.getValue("C_Tax_ID");\n        if (taxID != null) {\n          var C_Tax_ID = taxID; //.intValue();\n          var IsTaxIncluded = this.IsTaxIncluded(windowNo, ctx);\n          var paramString = C_Tax_ID.toString().concat(",", lineNetAmt.toString(), ",",\n          //2\n          IsTaxIncluded, ",",\n          //3\n          StdPrecision.toString() //4 \n          ); //7          \n          var dr = null;\n          taxAmt = VIS.dataContext.getJSONRecord("MTax/CalculateTax", paramString);\n          mTab.setValue("TaxAmt", taxAmt);\n\n          // Set Surcharge Amount to zero\n          if (mTab.getField("SurchargeAmt") != null) {\n            mTab.setValue("SurchargeAmt", 0);\n          }\n        }\n      }\n      if (IsTaxIncluded) {\n        mTab.setValue("LineTotalAmt", Util.getValueOfDecimal(lineNetAmt));\n      } else {\n        mTab.setValue("LineTotalAmt", Util.getValueOfDecimal((lineNetAmt + taxAmt).toFixed(StdPrecision)));\n      }\n\n      /*VIS_045: 01-July-2025, Calculate TCS tax Amount */\n      if (isSOTrx && mTab.findColumn("VA106_TaxCollectedAtSource_ID") > -1 && Util.getValueOfInt(mTab.getValue("VA106_TaxCollectedAtSource_ID")) > 0) {\n        if (Util.getValueOfDecimal(mTab.getValue("LineTotalAmt")) != 0) {\n          paramStr = Util.getValueOfInt(mTab.getValue("VA106_TaxCollectedAtSource_ID")).toString() + "," + Util.getValueOfDecimal(mTab.getValue("LineTotalAmt")).toString();\n          var tcsTaxDetails = VIS.dataContext.getJSONRecord("MInvoice/VA106_CalculateTCSTax", paramStr);\n          if (tcsTaxDetails != null) {\n            mTab.setValue("VA106_TCSAmount", Util.getValueOfDecimal(tcsTaxDetails["VA106_TCSTaxValue"]));\n          }\n        } else {\n          mTab.setValue("VA106_TCSAmount", 0);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * This function is used to calculate the TCS tax \r\n   * Calculate on Value -- Taxable amt + Tax Amt + Surcharge Amt = Line Total Amt\r\n   * Rate will be picked from Tax Collected at source screen\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutInvoice.prototype.VA106_CalculateTCSTax = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    if (value == null || value.toString() == "") {\n      mTab.setValue("VA106_TCSAmount", 0);\n    }\n    try {\n      this.setCalloutActive(true);\n      if (Util.getValueOfDecimal(mTab.getValue("LineTotalAmt")) != 0) {\n        var paramStr = Util.getValueOfInt(mTab.getValue("VA106_TaxCollectedAtSource_ID")).toString() + "," + Util.getValueOfDecimal(mTab.getValue("LineTotalAmt")).toString();\n        var tcsTaxDetails = VIS.dataContext.getJSONRecord("MInvoice/VA106_CalculateTCSTax", paramStr);\n        if (tcsTaxDetails != null) {\n          mTab.setValue("VA106_TCSAmount", Util.getValueOfDecimal(tcsTaxDetails["VA106_TCSTaxValue"]));\n        }\n      } else {\n        mTab.setValue("VA106_TCSAmount", 0);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * \tIs Tax Included\r\n   *\t@param windowNo window no\r\n   *\t@return tax included (default: false)\r\n   */\n  CalloutInvoice.prototype.IsTaxIncluded = function (windowNo, ctx) {\n    //  \n\n    //var ctx = Env.getContext();\n    var ss = ctx.getContext("IsTaxIncluded");\n    try {\n      //\tNot Set Yet\n      if (ss.toString().length == 0) {\n        var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n        if (M_PriceList_ID == 0) {\n          return false;\n        }\n        //ss = VIS.DB.executeScalar("SELECT IsTaxIncluded FROM M_PriceList WHERE M_PriceList_ID=" + M_PriceList_ID, null, null).toString();\n\n        ss = VIS.dataContext.getJSONRecord("MPriceList/GetTaxIncluded", M_PriceList_ID.toString());\n        if (ss == null) {\n          ss = "N";\n        }\n        ctx.setContext(windowNo, "IsTaxIncluded", ss);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "Y" == ss;\n  };\n\n  /**\r\n   *\tInvoice Line - Quantity.\r\n   *\t\t- called from C_UOM_ID, QtyEntered, QtyInvoiced\r\n   *\t\t- enforces qty UOM relationship\r\n   *\t@param ctx context\r\n   *\t@param windowNo window no\r\n   *\t@param mTab tab\r\n   *\t@param mField field\r\n   *\t@param value value\r\n   *\t@return null or error message\r\n   */\n  CalloutInvoice.prototype.Qty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    if (Util.getValueOfInt(mTab.getValue("C_Charge_ID")) == 0 && Util.getValueOfInt(mTab.getValue("M_Product_ID")) == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var paramStr = "";\n      var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n      this.log.log(Level.WARNING, "qty - init - M_Product_ID=" + M_Product_ID);\n      var QtyInvoiced, QtyEntered, PriceActual, PriceEntered;\n\n      //\tNo Product\n      if (M_Product_ID == 0) {\n        QtyEntered = mTab.getValue("QtyEntered");\n        mTab.setValue("QtyInvoiced", QtyEntered);\n      }\n      //\tUOM Changed - convert from Entered -> Product\n      // JID_0540: System should check the Price in price list for selected Attribute set instance and UOM,If price is not there is will multiple the base UOM price with UOM conversion multipy value and set that price.\n      else if (mField.getColumnName().toString().equals("C_UOM_ID") || mField.getColumnName().toString().equals("M_AttributeSetInstance_ID") || mField.getColumnName().toString().equals("VAS_ContractLine_ID")) {\n        var C_UOM_To_ID = Util.getValueOfInt(mTab.getValue("C_UOM_ID"));\n        QtyEntered = mTab.getValue("QtyEntered");\n\n        /*** Start Amit ***/\n\n        var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID", false);\n        var bpartner = VIS.dataContext.getJSONRecord("MBPartner/GetBPartner", C_BPartner_ID.toString());\n        paramStr = M_Product_ID.toString().concat(",", mTab.getValue("C_Invoice_ID").toString() + "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) + "," + C_UOM_To_ID.toString() + "," + ctx.getAD_Client_ID().toString() + "," + C_BPartner_ID.toString() + "," + QtyEntered.toString());\n        var prices = VIS.dataContext.getJSONRecord("MInvoice/GetPrices", paramStr);\n        if (prices != null) {\n          countEd011 = prices["countEd011"];\n          var countVAPRC = prices["countVAPRC"];\n\n          // No UOM and Advance Pricing Modules\n          if (countEd011 <= 0 && countVAPRC <= 0) {\n            var QtyEntered1 = null;\n            if (QtyEntered != null) {\n              paramStr = C_UOM_To_ID.toString();\n              var precision = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n              QtyEntered1 = QtyEntered.toFixed(precision);\n            }\n            if (QtyEntered != QtyEntered1) {\n              this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n              QtyEntered = QtyEntered1;\n              mTab.setValue("QtyEntered", QtyEntered);\n            }\n            paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", QtyEntered.toString());\n            QtyInvoiced = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n            if (QtyInvoiced == null) {\n              QtyInvoiced = QtyEntered;\n            }\n            var conversion = QtyEntered != QtyInvoiced;\n            PriceActual = mTab.getValue("PriceActual");\n            paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", PriceActual.toString());\n            PriceEntered = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n            if (PriceEntered == null) {\n              PriceEntered = PriceActual;\n            }\n            this.log.fine("qty - UOM=" + C_UOM_To_ID + ", QtyEntered/PriceActual=" + QtyEntered + "/" + PriceActual + " -> " + conversion + " QtyInvoiced/PriceEntered=" + QtyInvoiced + "/" + PriceEntered);\n            ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n            mTab.setValue("QtyInvoiced", QtyInvoiced);\n            mTab.setValue("PriceEntered", PriceEntered);\n          } else {\n            var PriceList = prices["PriceList"];\n            mTab.setValue("PriceList", PriceList);\n            PriceEntered = prices["PriceEntered"];\n            mTab.setValue("PriceLimit", prices["PriceLimit"]);\n            mTab.setValue("PriceActual", PriceEntered);\n            mTab.setValue("PriceEntered", PriceEntered);\n\n            //Get precision from server side\n            paramStr = C_UOM_To_ID.toString().concat(",");\n            var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n            var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp));\n            if (QtyEntered != QtyEntered1) {\n              this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n              QtyEntered = QtyEntered1;\n              mTab.setValue("QtyEntered", QtyEntered);\n            }\n\n            //Conversion of Qty Ordered\n            paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", QtyEntered.toString());\n            var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n            QtyInvoiced = pc;\n            var conversion = false;\n            if (QtyInvoiced != null) {\n              conversion = QtyEntered != QtyInvoiced;\n            }\n            if (QtyInvoiced == null) {\n              conversion = false;\n              QtyInvoiced = 1;\n            }\n            if (conversion) {\n              mTab.setValue("QtyInvoiced", QtyInvoiced);\n            } else {\n              mTab.setValue("QtyInvoiced", QtyInvoiced * QtyEntered1);\n            }\n          }\n        }\n      }\n      //\tQtyEntered changed - calculate QtyInvoiced\n      else if (mField.getColumnName().equals("QtyEntered")) {\n        var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n        QtyEntered = value;\n        var QtyEntered1 = null;\n        if (QtyEntered != null) {\n          var precision = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", C_UOM_To_ID.toString());\n          QtyEntered1 = QtyEntered.toFixed(precision);\n        }\n\n        //if (QtyEntered.Value.compareTo(QtyEntered1.Value) != 0)\n        if (QtyEntered != QtyEntered1) {\n          this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n          QtyEntered = QtyEntered1;\n          mTab.setValue("QtyEntered", QtyEntered);\n        }\n        paramString = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", QtyEntered.toString());\n        QtyInvoiced = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramString);\n        if (QtyInvoiced == null) {\n          QtyInvoiced = QtyEntered;\n        }\n        var conversion = QtyEntered != QtyInvoiced;\n        this.log.fine("qty - UOM=" + C_UOM_To_ID + ", QtyEntered=" + QtyEntered + " -> " + conversion + " QtyInvoiced=" + QtyInvoiced);\n        ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        mTab.setValue("QtyInvoiced", QtyInvoiced);\n      }\n      //\tQtyInvoiced changed - calculate QtyEntered (should not happen)\n      else if (mField.getColumnName().equals("QtyInvoiced")) {\n        var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n        QtyInvoiced = value;\n        var paramString = M_Product_ID.toString();\n        var precision = VIS.dataContext.getJSONRecord("MProduct/GetUOMPrecision", paramString);\n        var QtyInvoiced1 = null;\n        if (QtyInvoiced != null) {\n          QtyInvoiced1 = Util.getValueOfDecimal(QtyInvoiced.toFixed(precision));\n        }\n        if (QtyInvoiced != QtyInvoiced1) {\n          this.log.fine("Corrected QtyInvoiced Scale " + QtyInvoiced + "->" + QtyInvoiced1);\n          QtyInvoiced = QtyInvoiced1;\n          mTab.setValue("QtyInvoiced", QtyInvoiced);\n        }\n        paramString = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", QtyInvoiced.toString());\n        QtyEntered = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductTo", paramString);\n        if (QtyEntered == null) {\n          QtyEntered = QtyInvoiced;\n        }\n        var conversion = QtyInvoiced != QtyEntered;\n        this.log.fine("qty - UOM=" + C_UOM_To_ID + ", QtyInvoiced=" + QtyInvoiced + " -> " + conversion + " QtyEntered=" + QtyEntered);\n        ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        mTab.setValue("QtyEntered", QtyEntered);\n      }\n      //\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    } finally {\n      this.setCalloutActive(false);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Order Header - PriceList.\n  /// (used also in Invoice)\n  /// - C_Currency_ID\n  /// \t- IsTaxIncluded\n  /// \tWindow Context:\n  /// \t- EnforcePriceLimit\n  /// \t- StdPrecision\n  /// \t- M_PriceList_Version_ID\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutInvoice.prototype.PriceList = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var sql = "";\n    var dr = null;\n    try {\n      if (value == null || value.toString() == "") {\n        return "";\n      }\n      var M_PriceList_ID = Util.getValueOfInt(value.toString());\n      if (M_PriceList_ID == null || M_PriceList_ID == 0) return "";\n\n      //sql = "SELECT pl.IsTaxIncluded,pl.EnforcePriceLimit,pl.C_Currency_ID,c.StdPrecision,"\n      //    + "plv.M_PriceList_Version_ID,plv.ValidFrom "\n      //    + "FROM M_PriceList pl,C_Currency c,M_PriceList_Version plv "\n      //    + "WHERE pl.C_Currency_ID=c.C_Currency_ID"\n      //    + " AND pl.M_PriceList_ID=plv.M_PriceList_ID"\n      //    + " AND pl.M_PriceList_ID=" + M_PriceList_ID\t\t\t\t\t\t//\t1\n      //    + "ORDER BY plv.ValidFrom DESC";\n      //\tUse newest price list - may not be future\n\n      //DataSet ds = VIS.DB..executeDataset(sql, null);\n      //for (int i = 0; i < ds.Tables[0].Rows.Count; i++)\n\n      //dr = VIS.DB.executeReader(sql);\n      dr = VIS.dataContext.getJSONRecord("MPriceList/GetPriceListData", value.toString());\n      //if (dr.read()) {\n      if (dr != null) {\n        //DataRow dr = ds.Tables[0].Rows[i];\n        //\tTax Included\n        mTab.setValue("IsTaxIncluded", Boolean("Y".equals(dr["IsTaxIncluded"])));\n        //\tPrice Limit Enforce\n        ctx.setContext(windowNo, "EnforcePriceLimit", dr["EnforcePriceLimit"]);\n        //\tCurrency\n        var ii = Util.getValueOfInt(dr["C_Currency_ID"]);\n        mTab.setValue("C_Currency_ID", ii);\n        var prislst = dr["M_PriceList_Version_ID"];\n        //\tPriceList Version\n        ctx.setContext(windowNo, "M_PriceList_Version_ID", prislst);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.severe, null, err);\n      return err.message;\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /** Adhoc Payment - Validating DueDate ** Dt: 18/01/2021 ** Modified By: Kumar **/\n  CalloutInvoice.prototype.CheckDueDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    if (mTab.getValue("DateInvoiced") == null || mTab.getValue("DateInvoiced") == "") {\n      this.setCalloutActive(false);\n      return "";\n    } else {\n      try {\n        this.setCalloutActive(true);\n        if (mTab.getValue("DateInvoiced") != null && mTab.getValue("DueDate") != null) {\n          var invDate = new Date(mTab.getValue("DateInvoiced"));\n          var dueDate = new Date(mTab.getValue("DueDate"));\n          if (dueDate < invDate) {\n            VIS.ADialog.error("DueDateLessThanInvoiceDate");\n            mTab.setValue("DueDate", "");\n          }\n        }\n        ctx = windowNo = mTab = mField = value = oldValue = null;\n        this.setCalloutActive(false);\n        //---------------------End---------------------------------------\n      } catch (err) {\n        this.setCalloutActive(false);\n        return err;\n      }\n    }\n    return "";\n  };\n\n  /**\r\n  * This function is used to get the detail of Invoice line\r\n  * @param {any} ctx\r\n  * @param {any} windowNo\r\n  * @param {any} mTab\r\n  * @param {any} mField\r\n  * @param {any} value\r\n  * @param {any} oldValue\r\n  */\n  CalloutInvoice.prototype.GetInvoiceLineDetail = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      var paramString = value.toString();\n      var invoiceRecord = VIS.dataContext.getJSONRecord("MInvoice/GetInvoiceLineDetail", paramString);\n      if (invoiceRecord != null) {\n        mTab.setValue("M_Product_ID", invoiceRecord["M_Product_ID"]);\n        mTab.setValue("M_AttributeSetInstance_ID", invoiceRecord["M_AttributeSetInstance_ID"]);\n        mTab.setValue("C_UOM_ID", invoiceRecord["C_UOM_ID"]);\n        mTab.setValue("QtyEntered", invoiceRecord["QtyEntered"]);\n        mTab.setValue("QtyInvoiced", invoiceRecord["QtyInvoiced"]);\n      }\n      ctx = windowNo = mTab = mField = value = oldValue = null;\n      this.setCalloutActive(false);\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    return "";\n  };\n  VIS.Model.CalloutInvoice = CalloutInvoice;\n\n  //**************ProvisionalInvoice Start*********\n  function ProvisionalInvoice() {\n    VIS.CalloutEngine.call(this, "VIS.ProvisionalInvoice"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(ProvisionalInvoice, VIS.CalloutEngine); //inherit CalloutEngine\n\n  //call when change the DateInvoiced field on Provisional Invoice window\n  ProvisionalInvoice.prototype.DateAcct = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "" || this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      //Can be change according to DateInvoiced incase of Provisional Invoice window\n      mTab.setValue("DateAcct", value);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Order Header - PriceList.\n  /// (used also in Invoice)\n  /// - C_Currency_ID\n  /// \t- IsTaxIncluded\n  /// \tWindow Context:\n  /// \t- EnforcePriceLimit\n  /// \t- M_PriceList_Version_ID\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  ProvisionalInvoice.prototype.PriceList = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var M_PriceList_ID = value.toString();\n      if (Util.getValueOfInt(M_PriceList_ID) == 0) return "";\n      this.setCalloutActive(true);\n      if (steps) {\n        this.log.warning("init");\n      }\n\n      //\tUse net price list - may not be future\n      var dr = VIS.dataContext.getJSONRecord("MPriceList/GetPriceListDataForProvisionalInvoice", M_PriceList_ID);\n      if (dr != null) {\n        //\tTax Included\n        mTab.setValue("IsTaxIncluded", "Y" == dr["IsTaxIncluded"]);\n\n        //\tPrice Limit Enforce\n        ctx.setContext(windowNo, "EnforcePriceLimit", dr["EnforcePriceLimit"]);\n\n        //\tCurrency\n        var ii = Util.getValueOfInt(dr["C_Currency_ID"]);\n        mTab.setValue("C_Currency_ID", ii);\n\n        //\tPriceList Version\n        var prislst = Util.getValueOfInt(dr["M_PriceList_Version_ID"]);\n        ctx.setContext(windowNo, "M_PriceList_Version_ID", prislst);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log(Level.SEVERE, "", err);\n      return err;\n    }\n    if (steps) {\n      this.log.warning("finish");\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *\tInvoice Header- BPartner.\r\n   *\t\t- M_PriceList_ID (+ Context)\r\n   *\t\t- C_BPartner_Location_ID\r\n   *\t\t- AD_User_ID\r\n   *\t\t- PaymentMethod\r\n   *\t\t- C_PaymentTerm_ID\r\n   *\t@param ctx context\r\n   *\t@param windowNo window no\r\n   *\t@param mTab tab\r\n   *\t@param mField field\r\n   *\t@param value value\r\n   *\t@return null or error message\r\n   */\n  ProvisionalInvoice.prototype.BPartner = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var C_BPartner_ID = Util.getValueOfInt(value);\n      if (C_BPartner_ID == null || C_BPartner_ID == 0) {\n        return "";\n      }\n      this.setCalloutActive(true);\n      var isSOTrx = ctx.isSOTrx(windowNo);\n      var dr = VIS.dataContext.getJSONRecord("MBPartner/GetBPDataForProvisionalInvoice", C_BPartner_ID);\n      if (dr != null) {\n        //\tPriceList \n        var ii = Util.getValueOfInt(dr[isSOTrx ? "M_PriceList_ID" : "PO_PriceList_ID"]);\n        if (ii > 0) {\n          mTab.setValue("M_PriceList_ID", ii);\n        }\n\n        // Payment Method\n        var _CountVA009 = dr["countVA009"];\n        if (_CountVA009 > 0) {\n          var _PaymentMethod_ID = 0;\n          if (!isSOTrx && Util.getValueOfString(dr["IsVendor"]) == "Y") {\n            //In case of Purchase Order and vendor\n            _PaymentMethod_ID = Util.getValueOfInt(dr["VA009_PO_PaymentMethod_ID"]);\n          } else if (isSOTrx && Util.getValueOfString(dr["IsCustomer"]) == "Y") {\n            //In case of Sales Order and customer\n            _PaymentMethod_ID = Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]);\n          } else {\n            _PaymentMethod_ID = 0;\n          }\n          if (_PaymentMethod_ID == 0) mTab.setValue("VA009_PaymentMethod_ID", null);else {\n            mTab.setValue("VA009_PaymentMethod_ID", _PaymentMethod_ID);\n          }\n        }\n\n        //  Payment Term\n        ii = Util.getValueOfInt(dr[isSOTrx ? "C_PaymentTerm_ID" : "PO_PaymentTerm_ID"]);\n        if (ii > 0) {\n          mTab.setValue("C_PaymentTerm_ID", ii);\n        }\n\n        //\tLocation\n        var locID = Util.getValueOfInt(dr["C_BPartner_Location_ID"]);\n        /*VIS_0045: 04-May-2023 - DevOps Task ID: 2110*/\n        //\toverwritten by InfoBP selection - works only if InfoWindow\n        //\twas used otherwise creates error (uses last value, may bevar to differnt BP)\n        if (C_BPartner_ID.toString().equals(ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_ID").toString())) {\n          var loc = ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_LOCATION_ID");\n          if (loc && loc.toString().length > 0) {\n            locID = parseInt(loc);\n          }\n        }\n        if (locID == 0) {\n          mTab.setValue("C_BPartner_Location_ID", null);\n        } else {\n          mTab.setValue("C_BPartner_Location_ID", locID);\n        }\n\n        /*VIS_0045: 04-May-2023 - DevOps Task ID: 2110*/\n        //\tContact - overwritten by InfoBP selection\n        var contID = Util.getValueOfInt(dr["AD_User_ID"]);\n        if (C_BPartner_ID.toString().equals(ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_ID").toString())) {\n          var cont = ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "AD_USER_ID");\n          if (cont && cont.toString().length > 0) {\n            contID = parseInt(cont);\n          }\n        }\n        if (contID == 0) {\n          mTab.setValue("AD_User_ID", null);\n        } else {\n          mTab.setValue("AD_User_ID", contID);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    return this.PriceList(ctx, windowNo, mTab, mField, mTab.getValue("M_PriceList_ID"));\n    // removed by dead control flow\n\n    // removed by dead control flow\n\n  };\n  VIS.Model.ProvisionalInvoice = ProvisionalInvoice;\n  //**************ProvisionalInvoice End*********\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutinvoice.js?\n}')},"./Areas/VAS/Scripts/model/calloutinvoicebatch.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutInvoiceBatch() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutInvoiceBatch"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutInvoiceBatch, VIS.CalloutEngine); //inherit CalloutEngine\n\n  //private static VLogger _log = VLogger.GetVLogger(typeof(CalloutInvoiceBatch).FullName);  //Sarab\n  /// <summary>\n  ///\tInvoice Batch Line - DateInvoiced.\t- updates DateAcct\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab"> tab</param>\n  /// <param name="mField">field</param>\n  /// <param name="value">value</param>\n  /// <returns>null or error message</returns>\n  CalloutInvoiceBatch.prototype.Date = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    mTab.setValue("DateAcct", value);\n    //\n    this.SetDocumentNo(ctx, windowNo, mTab);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  //\tdate\n\n  /// <summary>\n  ///  Invoice Batch Line - BPartner.\n  //\t\t- C_BPartner_Location_ID\n  //\t\t- AD_User_ID\n  //\t\t- PaymentRule\n  //\t\t- C_PaymentTerm_ID\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab">tab</param>\n  /// <param name="mField">field</param>\n  /// <param name="value">value</param>\n  /// <returns>null or error message</returns>\n  CalloutInvoiceBatch.prototype.BPartner = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var C_BPartner_ID = Util.getValueOfInt(value);\n    if (C_BPartner_ID == null || C_BPartner_ID == 0) {\n      return "";\n    }\n    var IsSOTrx = ctx.isSOTrx();\n    var idr = null;\n    try {\n      var paramString = true.toString() + "," + C_BPartner_ID.toString();\n      idr = VIS.dataContext.getJSONRecord("MBPartner/GetBPartnerData", paramString);\n\n      //\tPaymentRule\n      if (idr != null) {\n        var s = Util.getValueOfString(idr[IsSOTrx ? "PaymentRule" : "PaymentRulePO"]);\n        if (s != null && s.length != 0) {\n          if (ctx.getContext("DocBaseType").endsWith("C"))\n            // .endsWith("C"))\t//\tCredits are Payment Term\n            {\n              s = "P";\n            } else if (this.isSOTrx && s == "S" || s == "U")\n            //\tNo Check/Transfer for SO_Trx\n            {\n              s = "P"; //  Payment Term\n            }\n        }\n        //  Payment Term\n        var ii = Util.getValueOfInt(idr[IsSOTrx ? "C_PaymentTerm_ID" : "PO_PaymentTerm_ID"]);\n        if (ii > 0) {\n          mTab.setValue("C_PaymentTerm_ID", ii);\n        }\n        //\tLocation\n        var locID = Util.getValueOfInt(idr["C_BPartner_Location_ID"]);\n        /*VIS_0045: 04-May-2023 - DevOps Task ID: 2110*/\n        //\toverwritten by InfoBP selection - works only if InfoWindow\n        //\twas used otherwise creates error (uses last value, may belong to differnt BP)\n        if (C_BPartner_ID.toString().equals(ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_ID").toString())) {\n          var loc = ctx.getWindowTabContext(windowNo, VIS.EnvConstants.TAB_INFO, "C_BPARTNER_LOCATION_ID");\n          if (loc.toString().length > 0) {\n            locID = Util.getValueOfInt(loc);\n          }\n        }\n        if (locID == 0) {\n          mTab.setValue("C_BPartner_Location_ID", null);\n        } else {\n          mTab.setValue("C_BPartner_Location_ID", Util.getValueOfInt(locID));\n        }\n\n        //\tContact - overwritten by InfoBP selection\n        var contID = Util.getValueOfInt(idr["AD_User_ID"]);\n        if (C_BPartner_ID.toString().equals(ctx.getContext("C_BPartner_ID"))) {\n          var cont = ctx.getContext("AD_User_ID");\n          if (cont.toString().length > 0) {\n            contID = Util.getValueOfInt(cont);\n          }\n        }\n        if (contID == 0) {\n          mTab.setValue("AD_User_ID", null);\n        } else {\n          mTab.setValue("AD_User_ID", Util.getValueOfInt(contID));\n        }\n        //\tCreditAvailable\n        if (IsSOTrx) {\n          var CreditLimit = Util.getValueOfDouble(idr["SO_CreditLimit"]);\n          if (CreditLimit != 0) {\n            var CreditAvailable = Util.getValueOfDouble(idr["CreditAvailable"]);\n            if (idr == null && CreditAvailable < 0) {\n              VIS.ADialog.info("CreditLimitOver");\n            }\n          }\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err.message;\n    }\n    //\n    this.SetDocumentNo(ctx, windowNo, mTab);\n    oldValue = null;\n    return this.Tax(ctx, windowNo, mTab, mField, value);\n  }; //\tbPartner\n\n  /// <summary>\n  /// Document Type.\n  //- called from DocType\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab"> tab</param>\n  /// <param name="mField">field</param>\n  /// <param name="value">value</param>\n  /// <returns>null or error message</returns>\n  CalloutInvoiceBatch.prototype.DocType = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    this.SetDocumentNo(ctx, windowNo, mTab);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  }; //\tdocType\n\n  /// <summary>\n  /// Set Document No (increase existing)\n  /// </summary>\n  /// <param name="ctx"> Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab"> Model Tab</param>\n  CalloutInvoiceBatch.prototype.SetDocumentNo = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //\tGet last line\n    //  \n    var C_InvoiceBatch_ID = ctx.getContextAsInt(windowNo, "C_InvoiceBatch_ID");\n    var paramString = C_InvoiceBatch_ID.toString();\n\n    //Get product price information\n    var dr = null;\n    dr = VIS.dataContext.getJSONRecord("MInvoiceBatchLine/GetInvoiceBatchLineDetail", paramString);\n    if (dr == null) {\n      return;\n    }\n\n    //\tNeed to Increase when different DocType or BP\n    var C_DocType_ID = ctx.getContextAsInt(windowNo, "C_DocType_ID");\n    var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n    if (C_DocType_ID == dr["C_DocType_ID"] && C_BPartner_ID == dr["C_BPartner_ID"]) {\n      return;\n    }\n    //\tNew Number\n    var oldDocNo = dr["DocumentNo"];\n    if (oldDocNo == null) {\n      return;\n    }\n    var docNo = 0;\n    docNo = Util.getValueOfInt(oldDocNo);\n    if (docNo == 0) {\n      return;\n    }\n    var newDocNo = Util.getValueOfString(docNo + 1);\n    mTab.setValue("DocumentNo", newDocNo);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n  }; //\tsetDocumentNo\n\n  /// <summary>\n  /// Invoice Batch Line - Charge.\n  //\t- updates PriceEntered from Charge\n  //  Calles tax\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab">tab</param>\n  /// <param name="mField">field</param>\n  /// <param name="value">value</param>\n  /// <returns>null or error message</returns>\n  CalloutInvoiceBatch.prototype.Charge = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var C_Charge_ID = Util.getValueOfInt(value);\n    if (C_Charge_ID == null || Util.getValueOfInt(C_Charge_ID) == 0) {\n      return "";\n    }\n    try {\n      var chargeAmt = VIS.dataContext.getJSONRecord("MCharge/GetCharge", C_Charge_ID.toString());\n      mTab.setValue("PriceEntered", Util.getValueOfDecimal(chargeAmt));\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.severe, null, err);\n      return err.message;\n    }\n    //\n    oldValue = null;\n    return this.Tax(ctx, windowNo, mTab, mField, value);\n  }; //\tcharge\n  /// <summary>\n  ///   Invoice Line - Tax.\n  //\t\t- basis: Charge, BPartner Location\n  //\t\t- sets C_Tax_ID\n  // Calles Amount\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">window no</param>\n  /// <param name="mTab"> tab</param>\n  /// <param name="mField">field</param>\n  /// <param name="value">value</param>\n  /// <returns>null or error message</returns>\n  CalloutInvoiceBatch.prototype.Tax = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    var column = mField.getColumnName();\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var C_Charge_ID = 0;\n    if (column.equals("C_Charge_ID")) {\n      C_Charge_ID = Util.getValueOfInt(value);\n    } else {\n      C_Charge_ID = ctx.getContextAsInt(windowNo, "C_Charge_ID");\n    }\n    this.log.fine("C_Charge_ID=" + C_Charge_ID);\n    if (C_Charge_ID == 0) {\n      return this.Amt(ctx, windowNo, mTab, mField, value); //\n    }\n    var C_BPartner_Location_ID = ctx.getContextAsInt(windowNo, "C_BPartner_Location_ID");\n    if (C_BPartner_Location_ID == 0) {\n      return this.Amt(ctx, windowNo, mTab, mField, value); //\n    }\n    this.log.fine("BP_Location=" + C_BPartner_Location_ID);\n\n    //\tDates\n    //var billDate = CommonFunctions.CovertMilliToDate(ctx.getContextAsTime(windowNo, "DateInvoiced"));//Sarab\n    var billDate = Util.getValueOfDate(ctx.getContext("DateInvoiced"));\n    this.log.fine("Bill Date=" + billDate);\n    var shipDate = billDate;\n    this.log.fine("Ship Date=" + shipDate);\n    var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n    this.log.fine("Org=" + AD_Org_ID);\n    var M_Warehouse_ID = ctx.getContextAsInt("#M_Warehouse_ID");\n    this.log.fine("Warehouse=" + M_Warehouse_ID);\n    var paramString = C_Charge_ID.toString().concat(",", billDate.toString(), shipDate.toString(), ",", AD_Org_ID.toString(), ",", M_Warehouse_ID.toString(), ",", C_BPartner_Location_ID.toString(), ",", C_BPartner_Location_ID.toString(), ",", ctx.getWindowContext(windowNo, "IsSOTrx", true).equals("Y"));\n    var C_Tax_ID = VIS.dataContext.getJSONRecord("MTax/Get", paramString);\n\n    //var C_Tax_ID = VAdvantage.Model.Tax.Get(ctx, 0, C_Charge_ID, billDate, shipDate,\n    //AD_Org_ID, M_Warehouse_ID, C_BPartner_Location_ID, C_BPartner_Location_ID,\n    // ctx.getContext("IsSOTrx").equals("Y"));\n\n    if (C_Tax_ID == 0) {\n\n      // ShowMessage.Error(VLogger.RetrieveError().toString(), true);\n    } else {\n      mTab.setValue("C_Tax_ID", Util.getValueOfInt(C_Tax_ID));\n    }\n    // ctx = windowNo = mTab = mField = value = oldValue = null;\n    return this.Amt(ctx, windowNo, mTab, mField, value);\n  };\n  CalloutInvoiceBatch.prototype.Amt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var StdPrecision = ctx.getStdPrecision();\n\n    //\tget values\n    var QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n    var PriceEntered = Util.getValueOfDecimal(mTab.getValue("PriceEntered"));\n    this.log.fine("QtyEntered=" + QtyEntered + ", PriceEntered=" + PriceEntered);\n    if (QtyEntered == null) {\n      QtyEntered = VIS.Env.ZERO;\n    }\n    if (PriceEntered == null) {\n      PriceEntered = VIS.Env.ZERO;\n    }\n\n    //\tLine Net Amt\n    var LineNetAmt = QtyEntered * PriceEntered;\n    if (Util.scale(LineNetAmt) > StdPrecision) {\n      LineNetAmt = LineNetAmt.toFixed(StdPrecision); //, MidpointRounding.AwayFromZero);\n    }\n\n    //\tCalculate Tax Amount\n    var IsTaxIncluded = "Y" == ctx.getContext("IsTaxIncluded");\n    var TaxAmt = null;\n    if (mField.getColumnName().equals("TaxAmt")) {\n      TaxAmt = mTab.getValue("TaxAmt");\n    } else {\n      var taxID = mTab.getValue("C_Tax_ID");\n      if (taxID != null) {\n        var C_Tax_ID = Util.getValueOfInt(taxID);\n\n        //\n        var paramString = C_Tax_ID.toString().concat(",", LineNetAmt.toString(), ",",\n        //2\n        IsTaxIncluded.toString(), ",",\n        //3\n        StdPrecision.toString() //4 \n        ); //7          \n        var dr = null;\n        TaxAmt = VIS.dataContext.getJSONRecord("MTax/CalculateTax", paramString);\n        mTab.setValue("TaxAmt", TaxAmt);\n\n        // Set Surcharge Amount to zero\n        if (mTab.getField("SurchargeAmt") != null) {\n          mTab.setValue("SurchargeAmt", 0);\n        }\n      }\n    }\n\n    //\t\n    if (IsTaxIncluded) {\n      mTab.setValue("LineTotalAmt", LineNetAmt);\n      mTab.setValue("LineNetAmt", Util.getValueOfDecimal(LineNetAmt) * Util.getValueOfDecimal(TaxAmt));\n    } else {\n      mTab.setValue("LineNetAmt", LineNetAmt);\n      mTab.setValue("LineTotalAmt", Util.getValueOfDecimal(LineNetAmt) + Util.getValueOfDecimal(TaxAmt));\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutInvoiceBatch = CalloutInvoiceBatch;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutinvoicebatch.js?\n}')},"./Areas/VAS/Scripts/model/calloutmasterforecast.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutMasterForecast() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutMasterForecast"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutMasterForecast, VIS.CalloutEngine); //inherit prototype\n\n  /**\r\n   * set currency \r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutMasterForecast.prototype.Currency = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      if (mTab.getValue("M_PriceList_ID") == null) {\n        mTab.setValue("C_Currency_ID", Util.getValueOfInt(ctx.getContext("$C_Currency_ID")));\n      }\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      //get currency from pricelist\n      var pricelist = VIS.dataContext.getJSONRecord("MPriceList/GetPriceListData", Util.getValueOfString(mTab.getValue("M_PriceList_ID")));\n      if (pricelist["C_Currency_ID"] != null) {\n        mTab.setValue("C_Currency_ID", pricelist["C_Currency_ID"]);\n      }\n    } catch (err) {\n      this.log.log(Level.SEVERE, sql, err);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n    // removed by dead control flow\n\n  };\n\n  /**\r\n   * Set Price as per price list\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutMasterForecast.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      if (mTab.getValue("M_Product_ID") == null) {\n        //set values to 0 if no product is selected\n        mTab.setValue("Price", 0);\n        mTab.setValue("PlannedRevenue", 0);\n        mTab.setValue("ForcastQty", 0);\n        mTab.setValue("TotalQty", 0);\n      }\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      if (ctx.getContextAsInt(windowNo, "M_PriceList_ID") > 0) {\n        var stdPrecision = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", Util.getValueOfString(ctx.getContextAsInt(windowNo, "C_Currency_ID")));\n        var paramString = Util.getValueOfString(mTab.getValue("M_Product_ID")).concat(",", Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")), ",", Util.getValueOfString(ctx.getContextAsInt(windowNo, "M_PriceList_ID")), ",", Util.getValueOfString(mTab.getValue("C_UOM_ID")));\n\n        //get the price from product price only if pricelist is selected\n        var ProductData = VIS.dataContext.getJSONRecord("MProductPricing/GetProductdata", paramString);\n        if (ProductData != null) {\n          mTab.setValue("Price", ProductData["PriceStd"]);\n          mTab.setValue("PlannedRevenue", (ProductData["PriceStd"] * Util.getValueOfDecimal(mTab.getValue("TotalQty"))).toFixed(Util.getValueOfInt(stdPrecision.StdPrecision)));\n\n          //set BaseUOM\n          if (Util.getValueOfInt(mTab.getValue("C_UOM_ID")) == 0) {\n            mTab.setValue("C_UOM_ID", ProductData["C_UOM_ID"]);\n          }\n          if (mTab.findColumn("IsBOM") > 0) {\n            mTab.setValue("IsBOM", ProductData["IsBOM"]);\n          }\n        }\n        //set BOM,BOMuse and Routing\n        var BOMData = VIS.dataContext.getJSONRecord("MTeamForcast/GetBOMdetails", Util.getValueOfString(mTab.getValue("M_Product_ID")));\n        if (BOMData != null) {\n          mTab.setValue("BOMUse", BOMData["BOMUse"]);\n          mTab.setValue("VAMFG_M_Routing_ID", BOMData["VAMFG_M_Routing_ID"]);\n          mTab.setValue("M_BOM_ID", BOMData["M_BOM_ID"]);\n        }\n      }\n    } catch (err) {\n      this.log.log(Level.SEVERE, sql, err);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /**\r\n   * Set price and Qty\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutMasterForecast.prototype.CalculatePrice = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || Util.getValueOfInt(value) <= 0) {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      var stdPrecision = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", Util.getValueOfString(ctx.getContextAsInt(windowNo, "C_Currency_ID")));\n      //set Total Qty\n      var totalqty = Util.getValueOfDecimal(mTab.getValue("ForcastQty")) + Util.getValueOfDecimal(mTab.getValue("SalesOrderQty")) + Util.getValueOfDecimal(mTab.getValue("OppQty"));\n      mTab.setValue("TotalQty", totalqty);\n\n      //set Planned Revenue\n      var price = Util.getValueOfDecimal(mTab.getValue("Price")) * Util.getValueOfDecimal(mTab.getValue("TotalQty"));\n      mTab.setValue("PlannedRevenue", price.toFixed(Util.getValueOfInt(stdPrecision.StdPrecision)));\n    } catch (err) {\n      this.log.log(Level.SEVERE, sql, err);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutMasterForecast = CalloutMasterForecast;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutmasterforecast.js?\n}')},"./Areas/VAS/Scripts/model/calloutmovement.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n\n  /// <summary>\n  /// Inventory Movement Callouts\n  /// </summary>\n  function CalloutMovement() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutMovement"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutMovement, VIS.CalloutEngine); //inherit CalloutEngine\n\n  /// <summary>\n  /// Product modified\n  /// Set Attribute Set Instance\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current window no</param>\n  /// <param name="tab">model tab</param>\n  /// <param name="field">model field</param>\n  /// <param name="value">new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutMovement.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      //if (Util.getValueOfInt(VIS.DB.executeScalar("SELECT COUNT(*) FROM AD_column WHERE ad_table_id = " +\n      //    " (SELECT ad_table_id   FROM ad_table   WHERE upper(tablename) = upper(\'M_MovementLine\'))" +\n      //    " and upper(columnname) = \'C_UOM_ID\'", null, null)) > 0) {\n      mTab.setValue("MovementQty", 1);\n      mTab.setValue("QtyEntered", 1);\n      //}\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var M_Product_ID = value;\n      if (M_Product_ID == null || M_Product_ID == 0) return "";\n      //\tSet Attribute\n      // JID_0910: On change of product on line system is not removing the ASI. if product is changed then also update the ASI field.\n\n      //if (ctx.getContextAsInt(windowNo, "M_Product_ID") == M_Product_ID\n      //    && ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID") != 0)\n      //    mTab.setValue("M_AttributeSetInstance_ID", ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID"));\n      //else\n      mTab.setValue("M_AttributeSetInstance_ID", null);\n\n      // change by Shivani \n      //var sql = "SELECT COUNT(*) FROM AD_column WHERE ad_table_id = " +\n      //    " (SELECT ad_table_id   FROM ad_table   WHERE upper(tablename) = upper(\'M_MovementLine\'))" +\n      //    " and upper(columnname) = \'C_UOM_ID\'";\n      //if (Util.getValueOfInt(VIS.DB.executeScalar(sql, null, null)) > 0) {\n      //sql = "select c_uom_id from m_product where m_product_id=" + M_Product_ID;\n      //var c_uom_id = Util.getValueOfInt(VIS.DB.executeScalar(sql, null, null));\n\n      var c_uom_id = VIS.dataContext.getJSONRecord("MProduct/GetC_UOM_ID", M_Product_ID.toString());\n      mTab.setValue("C_UOM_ID", c_uom_id);\n      if (value != oldValue) {\n        mTab.setValue("MovementQty", 1);\n        mTab.setValue("QtyEntered", 1);\n      }\n\n      // var c_uom_id = Util.getValueOfInt(value);\n\n      c_uom_id = Util.getValueOfDecimal(mTab.getValue("C_UOM_ID"));\n      var QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n      M_Product_ID = Util.getValueOfInt(mTab.getValue("M_Product_ID"));\n      var paramStr = M_Product_ID.toString().concat(\',\').concat(c_uom_id.toString()).concat(\',\').concat(QtyEntered.toString());\n      var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n      QtyOrdered = pc;\n      var conversion = false;\n      if (QtyOrdered != null) {\n        conversion = QtyEntered != QtyOrdered;\n      }\n      if (QtyOrdered == null) {\n        conversion = false;\n        QtyOrdered = 1;\n      }\n      if (conversion) {\n        mTab.setValue("MovementQty", QtyOrdered);\n      } else {\n        mTab.setValue("MovementQty", QtyOrdered * QtyEntered);\n      }\n      // }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.severe, sql, err);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutMovement = CalloutMovement;\n  function CalloutInventoryMove() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutInventoryMove");\n  }\n  ;\n  //#endregion\n  VIS.Utility.inheritPrototype(CalloutInventoryMove, VIS.CalloutEngine); //inherit calloutengine\n\n  CalloutInventoryMove.prototype.UOM = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == 0 || value == null || value.toString() == "") {\n      //VAI051:- When Qty is zero then Movement Qty should be 0;\n      if (value == 0) {\n        mTab.setValue("MovementQty", 0);\n      }\n      return "";\n    }\n    if (this.isCalloutActive() || value == null) return "";\n    this.setCalloutActive(true);\n    try {\n      var M_Product_ID = Util.getValueOfDecimal(mTab.getValue("M_Product_ID"));\n      if (M_Product_ID == 0) {\n        QtyEntered = 1;\n        QtyOrdered = QtyEntered;\n        mTab.setValue("QtyOrdered", QtyOrdered);\n        mTab.setValue("QtyEntered", QtyEntered);\n        this.setCalloutActive(false);\n        ctx = windowNo = mTab = mField = value = oldValue = null;\n        return "";\n      }\n      if (mField.getColumnName() == "C_UOM_ID") {\n        var C_UOM_To_ID = Util.getValueOfInt(value);\n        QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n        M_Product_ID = Util.getValueOfInt(mTab.getValue("M_Product_ID"));\n        paramStr = M_Product_ID.toString().concat(\',\').concat(C_UOM_To_ID.toString()).concat(\',\').concat(QtyEntered.toString());\n        var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n        QtyOrdered = pc;\n        var conversion = false;\n        if (QtyOrdered != null) {\n          conversion = QtyEntered != QtyOrdered;\n        }\n        if (QtyOrdered == null) {\n          conversion = false;\n          QtyOrdered = 1;\n        }\n        if (conversion) {\n          mTab.setValue("MovementQty", QtyOrdered);\n        } else {\n          mTab.setValue("MovementQty", QtyOrdered * QtyEntered);\n        }\n      } else if (mField.getColumnName() == "QtyEntered") {\n        var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n        QtyEntered = Util.getValueOfDecimal(value);\n\n        //Get precision from server\n        paramStr = C_UOM_To_ID.toString().concat(","); //1\n        var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n        var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp)); //, MidpointRounding.AwayFromZero);\n        if (QtyEntered != QtyEntered1) {\n          this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n          QtyEntered = QtyEntered1;\n          mTab.setValue("QtyEntered", QtyEntered);\n        }\n        paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",",\n        //2\n\n        QtyEntered.toString()); //3\n        var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n        QtyOrdered = pc; //(Decimal?)MUOMConversion.ConvertProductFrom(ctx, M_Product_ID,\n\n        if (QtyOrdered == null) QtyOrdered = QtyEntered;\n        var conversion = QtyEntered != QtyOrdered;\n        this.log.fine("UOM=" + C_UOM_To_ID + ", QtyEntered=" + QtyEntered + " -> " + conversion + " QtyOrdered=" + QtyOrdered);\n        ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        mTab.setValue("MovementQty", QtyOrdered);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutInventoryMove = CalloutInventoryMove;\n  function CalloutshipLine() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutshipLine");\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutshipLine, VIS.CalloutEngine); //inherit calloutengine\n\n  CalloutshipLine.prototype.DocType = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive() || value == null) return "";\n    this.setCalloutActive(true);\n    try {\n      //sql = "SELECT M_Product_ID , movementqty , M_AttributeSetInstance_ID FROM M_InOutLine WHERE M_InOutLine_ID=" + Util.getValueOfInt(value);\n      // var M_Product_ID = Util.getValueOfInt(VIS.DB.executeScalar(sql, null, null));\n\n      //var ds = VIS.DB.executeDataSet(sql);\n      var paramString = value.toString() + "," + mTab.getValue("M_Package_ID").toString() + "," + mTab.getValue("M_InOutLine_ID").toString();\n      var idr = VIS.dataContext.getJSONRecord("MInOut/GetProductDetails", paramString);\n      var movementqty = 0;\n      if (idr != null && Object.keys(idr).length > 0) {\n        movementqty = Util.getValueOfDecimal(idr.Movementqty);\n        //sql = "SELECT  SUM(ConfirmedQty + scrappedqty) FROM M_PackageLine WHERE  M_Package_ID=" + mTab.getValue("M_Package_ID") + " and m_inoutline_id =  " + mTab.getValue("M_InOutLine_ID");\n        //var totalConfirmedAndScrapped = Util.getValueOfDecimal(VIS.DB.executeScalar(sql))\n        mTab.setValue("M_Product_ID", Util.getValueOfInt(idr.M_Product_ID));\n        mTab.setValue("Qty", movementqty - Util.getValueOfInt(idr.totalConfirmedAndScrapped));\n        mTab.setValue("M_AttributeSetInstance_ID", Util.getValueOfInt(idr.M_AttributeSetInstance_ID));\n        mTab.setValue("DTD001_IsConfirm", true);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString()); // SD\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutshipLine = CalloutshipLine;\n  //***Callout CalloutshipLine End\n\n  //*************CalloutMoveConfirmLineSetQty**********//\n  function CalloutMoveConfirmLine() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutMoveConfirmLine"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutMoveConfirmLine, VIS.CalloutEngine); //inherit prototype\n\n  CalloutMoveConfirmLine.prototype.SetQty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (Util.getValueOfDecimal(mTab.getValue("TargetQty")) < Util.getValueOfDecimal(mTab.getValue("ConfirmedQty"))) {\n      mTab.setValue("ConfirmedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")));\n      mTab.setValue("DifferenceQty", 0);\n      mTab.setValue("ScrappedQty", 0);\n      this.setCalloutActive(false);\n      return "";\n    }\n    if (mField.getColumnName() == "ConfirmedQty") {\n      if (Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) < 0) {\n        mTab.setValue("ConfirmedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")));\n        mTab.setValue("DifferenceQty", 0);\n        mTab.setValue("ScrappedQty", 0);\n        this.setCalloutActive(false);\n        return "";\n      }\n      mTab.setValue("ScrappedQty", 0);\n      mTab.setValue("DifferenceQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")) - (Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) + Util.getValueOfDecimal(mTab.getValue("ScrappedQty"))));\n    } else if (mField.getColumnName() == "DifferenceQty") {\n      if (Util.getValueOfDecimal(mTab.getValue("TargetQty")) < Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) + Util.getValueOfDecimal(mTab.getValue("DifferenceQty"))) {\n        mTab.setValue("ConfirmedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")));\n        mTab.setValue("DifferenceQty", 0);\n        mTab.setValue("ScrappedQty", 0);\n        this.setCalloutActive(false);\n        return "";\n      }\n      mTab.setValue("ScrappedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")) - (Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) + Util.getValueOfDecimal(mTab.getValue("DifferenceQty"))));\n    } else if (mField.getColumnName() == "ScrappedQty") {\n      if (Util.getValueOfDecimal(mTab.getValue("ScrappedQty")) < 0) {\n        mTab.setValue("ConfirmedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")));\n        mTab.setValue("DifferenceQty", 0);\n        mTab.setValue("ScrappedQty", 0);\n        this.setCalloutActive(false);\n        return "";\n      }\n      if (Util.getValueOfDecimal(mTab.getValue("TargetQty")) < Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) + Util.getValueOfDecimal(mTab.getValue("ScrappedQty"))) {\n        mTab.setValue("ConfirmedQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")));\n        mTab.setValue("DifferenceQty", 0);\n        mTab.setValue("ScrappedQty", 0);\n        this.setCalloutActive(false);\n        return "";\n      }\n      mTab.setValue("DifferenceQty", Util.getValueOfDecimal(mTab.getValue("TargetQty")) - (Util.getValueOfDecimal(mTab.getValue("ConfirmedQty")) + Util.getValueOfDecimal(mTab.getValue("ScrappedQty"))));\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutMoveConfirmLine = CalloutMoveConfirmLine;\n  //*****************MoveConfirmLineSetQty********************//\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutmovement.js?\n}')},"./Areas/VAS/Scripts/model/calloutoffer.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutObjectData() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutObjectData"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutObjectData, VIS.CalloutEngine); //inherit CalloutEngine\n\n  CalloutObjectData.prototype.Objectchk = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (value == null) {\n      return "";\n    }\n    var FO_OBJ_DATA_ID = Util.getValueOfInt(mTab.getValue("FO_OBJECT_DATA_ID")); //Object Data ID\n    //Integer acc_ID=null; //Accomodation ID\n    var oldstartdate; //From Date stored in Database\n    var oldtilldate; //Till Date stored in Database\n    var todaydate = Util.getValueOfDateTime(mTab.getValue("TODAYDATE")); //Date \n    if (FO_OBJ_DATA_ID == null) {\n      return "";\n    } else {\n      var sql = "select FO_RES_ACCOMODATION_ID,DATE_FROM,TILL_DATE from FO_RES_ACCOMODATION where FO_OBJECT_DATA_ID=@FO_OBJ_DATA_ID";\n      var dr = null;\n      try {\n        //SqlParameter[] param = new SqlParameter[1];\n        var param = [];\n        param[0] = new VIS.DB.SqlParam("@FO_OBJ_DATA_ID", FO_OBJ_DATA_ID);\n        dr = VIS.DB.executeReader(sql, param, null);\n        //PreparedStatement pst = DataBase.prepareStatement(sql, null);\n        //pst.setInt(1, FO_OBJ_DATA_ID);\n        //ResultSet rs = pst.executeQuery();\n        while (dr.read()) {\n          //\tacc_ID= rs.getInt(1);\n          oldstartdate = Util.getValueOfDateTime(dr[1]);\n          oldtilldate = Util.getValueOfDateTime(dr[2]);\n          // curr_date is the current date holding the cursor\n          var curr_date = oldstartdate;\n          //if (todaydate.after(oldtilldate) == true)\n          if (todaydate.compareTo(oldtilldate) > 0) {\n            mTab.setValue("RES_STATUS", false);\n            return "";\n          }\n          //else if (todaydate.before(oldstartdate) == true)\n          else if (todaydate.compareTo(oldstartdate) < 0) {\n            mTab.setValue("RES_STATUS", false);\n            return "";\n          }\n          //else if (todaydate.after(oldstartdate) && todaydate.before(oldtilldate))\n          else if (todaydate.compareTo(oldstartdate) > 0 && todaydate.compareTo(oldtilldate) < 0) {\n            while (!(curr_date.compareTo(oldtilldate) == 0)) {\n              if (todaydate.compareTo(curr_date) == 0) {\n                mTab.setValue("RES_STATUS", true);\n              }\n              //curr_date = TimeUtil.addDays(curr_date, 1);\n              curr_date = curr_date.AddDays(1);\n            }\n          }\n        }\n        dr.close();\n        //pst.close();\n      } catch (err) {\n        this.setCalloutActive(false);\n        if (dr != null) {\n          dr.close();\n        }\n        this.log.severe(e.toString());\n      } finally {\n        if (dr != null) {\n          dr.close();\n        }\n      }\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutObjectData = CalloutObjectData;\n  //*************CalloutObjectData End*********\n\n  //************CalloutOffer Start********\n  function CalloutOffer() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutOffer"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutOffer, VIS.CalloutEngine); //inherit CalloutEngine\n  /**\r\n  * \r\n  * @param ctx context\r\n  * @param windowNo window no\r\n  * @param mTab tab\r\n  * @param mField field\r\n  * @param value value\r\n  * @return null or error message\r\n  */\n  CalloutOffer.prototype.Datechk = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var a = Util.getValueOfDateTime(value);\n    if (a == null || a == 0) {\n      return "";\n    }\n    var org_id = mTab.getValue("AD_ORG_ID");\n    var days_Payable = 0; //Payable Days stored in settings window\n    //String sql = "select  DAYSPAYABLE2 from fo_deposits where FO_DEPOSITS_ID=1000000 ";\n\n    // Query changed because of the change of the table (Sandeep 6-10-2009)\n    var sql = "select  DAYSPAYABLE2 from FO_SETTINGS where AD_ORG_ID=" + org_id;\n    var dr = null;\n    try {\n      dr = VIS.DB.executeReader(sql, null, null);\n      while (dr.read()) {\n        days_Payable = Util.getValueOfInt(dr[0].toString()); //.getInt(1);\n        // Console.WriteLine("Days Payable"+days_Payable);\n      }\n      dr.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n      }\n      this.log.severe(err.toString());\n    }\n    var dt = Util.getValueOfDateTime(mTab.getValue("DATE1"));\n    //Console.WriteLine("dt"+dt);\n    //java.sql.Timestamp incdays;\n    var incdays;\n    incdays = dt.AddDays(days_Payable); //incdays = TimeUtil.AddDays(dt, days_Payable);\n    //Console.WriteLine("Inc Days"+incdays);\n    mTab.setValue("DATE2", incdays);\n    var Offer;\n    var Offer_num = 100;\n    var sql1 = "select max(OFFERNO)from FO_OFFER";\n    try {\n      dr = VIS.DB.executeReader(sql1, null, null);\n      while (dr.read()) {\n        Offer_num = Util.getValueOfInt(dr[0].toString()); //.getInt(1);\n      }\n      dr.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n      }\n      this.log.severe(err.toString());\n    } finally {\n      if (dr != null) {\n        dr.close();\n      }\n    }\n    if (Offer_num == null | Offer_num == 0) {\n      Offer = 100;\n    } else {\n      Offer = Offer_num + 1;\n    }\n    mTab.setValue("OFFERNO", Offer);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /**\r\n  * \r\n  * @param ctx context\r\n  * @param windowNo window no\r\n  * @param mTab tab\r\n  * @param mField field\r\n  * @param value value\r\n  * @return null or error message\r\n  */\n  CalloutOffer.prototype.guestpricelist = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null) {\n      return "";\n    }\n    //int add_ID = (int)value;\n    var add_ID = Util.getValueOfInt(value);\n    if (add_ID == null || add_ID == 0) return "";\n    //int add_ID = (Integer)mTab.getValue("FO_ADDRESS_ID");\n    var sql = "select FO_PRICE_LIST_ID from FO_ADDRESS_PRICE where FO_ADDRESS_ID=" + add_ID;\n    var pricelist_ID = 0;\n    var dr = null;\n    try {\n      //PreparedStatement pst = DataBase.prepareStatement(sql, null);\n\n      //ResultSet rs = pst.executeQuery();\n      dr = VIS.DB.executeReader(sql, null, null);\n      while (dr.read()) {\n        pricelist_ID = Util.getValueOfInt(dr[0]); //rs.getInt(1);\n      }\n      dr.close();\n      // pst.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n      }\n      this.log.severe(err.toString());\n    } finally {\n      if (dr != null) {\n        dr.close();\n      }\n    }\n    mTab.setValue("FO_PRICE_LIST_ID", pricelist_ID);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutOffer = CalloutOffer;\n  function copyname() {\n    VIS.CalloutEngine.call(this, "VIS.copyname"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(copyname, VIS.CalloutEngine); //inherit prototype\n  copyname.prototype.product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    mTab.setValue("Help", mTab.getValue("Name"));\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  copyname.prototype.product2 = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    mTab.setValue("Description", mTab.getValue("Help"));\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.copyname = copyname;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutoffer.js?\n}')},"./Areas/VAS/Scripts/model/calloutofferserincluded.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutOfferSerIncluded() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutOfferSerIncluded"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutOfferSerIncluded, VIS.CalloutEngine); //inherit CalloutEngine\n  CalloutOfferSerIncluded.prototype.CalculatePrice = function (number, price, rebate) {\n    return Decimal.Subtract(Decimal.Multiply(number, price), rebate);\n  };\n  CalloutOfferSerIncluded.prototype.CalculateRebate = function (number, price, rebate) {\n    return Decimal.Multiply(Decimal.Multiply(number, price), Decimal.Multiply(new Decimal(0.01), rebate));\n\n    //return (new Decimal(number),price,arebate);\n  };\n  /************************************************************************\r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   ************************************************************************/\n  /*****************************************************************************\r\n   *   if service is selected then UOM will be displayed\r\n   ****************************************************************************/\n  CalloutOfferSerIncluded.prototype.OfferServices = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var stdprice = 24; //Standard Price\n    //\t\tif (isCalloutActive())\n    //\t\t\treturn"";\n    //\t\tsetCalloutActive(true);\n    var FO_SERVICE_ID = Util.getValueOfInt(value);\n    if (FO_SERVICE_ID == null || FO_SERVICE_ID == 0) return "";\n    var sql = "select uom.FO_HOTEL_UOM_ID,s.DESCRIPTION " + "from FO_HOTEL_UOM uom " + "inner join FO_SERVICE s ON(uom.FO_HOTEL_UOM_ID= s.FO_HOTEL_UOM_ID) " + "where s.FO_SERVICE_ID=@FO_SERVICE_ID ";\n    var FO_HOTEL_UOM_ID = 0;\n    var APRICE = new Decimal(0);\n    var CG1PRICE = new Decimal(0);\n    var CG2PRICE = new Decimal(0);\n    var cal, cal1, cal2, grand_total;\n    var calrebate, cg1calrebate, cg2calrebate;\n    var UOM1, UOM2;\n    var dr = null;\n    try {\n      //PreparedStatement pst = DataBase.prepareStatement(sql,null);\n      //pst.setInt(1,FO_SERVICE_ID);\n      //ResultSet rs = pst.executeQuery();\n      var param = [];\n      //SqlParameter[] param = new SqlParameter[1];\n      param[0] = new VIS.DB.SqlParam("@FO_SERVICE_ID", FO_SERVICE_ID);\n      dr = VIS.DB.executeReader(sql, param, null);\n      while (dr.read()) {\n        FO_HOTEL_UOM_ID = Util.getValueOfInt(dr[0]);\n        mTab.setValue("AUOM_ID", FO_HOTEL_UOM_ID);\n        mTab.setValue("CG1UOM_ID", FO_HOTEL_UOM_ID);\n        mTab.setValue("CG2UOM_ID", FO_HOTEL_UOM_ID);\n        mTab.setValue("DESCRIPTION", Util.getValueOfString(dr[1])); //rs.getString(2));\n      }\n      dr.close();\n      //rs.close();\n      //pst.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n      }\n      this.log.severe(err.toString());\n    }\n    var sqlprice = "select PRICE,CHILDGROUP1,CHILDGROUP2,UOM1,UOM2 from FO_SERVICE_PRICE_PRICELINE " + "where CREATED=(select max(CREATED) from FO_SERVICE_PRICE_PRICELINE " + "where FO_SERVICE_ID=@FO_SERVICE_ID)";\n    try {\n      //PreparedStatement pst1 = DataBase.prepareStatement(sqlprice,null);\n      //pst1.setInt(1,FO_SERVICE_ID);\n      //ResultSet rs1 = pst1.executeQuery();\n      var param = [];\n      // SqlParameter[] param = new VIS.DB.SqlParam[1];\n      param[0] = new VIS.DB.SqlParam("@FO_SERVICE_ID", FO_SERVICE_ID);\n      dr = VIS.DB.executeReader(sqlprice, param, null);\n      while (dr.read()) {\n        APRICE = Util.getValueOfDecimal(dr[0]);\n        CG1PRICE = Util.getValueOfDecimal(dr[1]);\n        CG2PRICE = Util.getValueOfDecimal(dr[2]);\n        //code changed by sandeep for is%\n        UOM1 = dr[3].toString();\n        UOM2 = dr[4].toString();\n        if (UOM1.equals("Y")) {\n          //CG1PRICE=APRICE.multiply(CG1PRICE).multiply(new BigDecimal(0.01));\n          CG1PRICE = Decimal.Multiply(Decimal.Multiply(APRICE, CG1PRICE), new Decimal(0.01));\n        }\n        if (UOM2.equals("Y")) {\n          CG2PRICE = Decimal.Multiply(Decimal.Multiply(APRICE, CG2PRICE), new Decimal(0.01));\n          //CG2PRICE=APRICE.multiply(CG2PRICE).multiply(new BigDecimal(0.01));\n        }\n\n        //code changes end\n        mTab.setValue("APRICE", APRICE);\n        mTab.setValue("CG1PRICE", CG1PRICE);\n        mTab.setValue("CG2PRICE", CG2PRICE);\n      }\n      dr.close();\n      //rs1.close();\n      //pst1.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    var uomsel = mTab.getValue("AUOM_ID").toString();\n    var anumber = Util.getValueOfInt(mTab.getValue("ANUM"));\n    var aprice = Util.getValueOfDecimal(mTab.getValue("AP0RICE"));\n    var arebate = Util.getValueOfDecimal(mTab.getValue("AREBATE"));\n    var cg1number = Util.getValueOfInt(mTab.getValue("CG1NUM"));\n    var cg2number = Util.getValueOfInt(mTab.getValue("CG2NUM"));\n    var cg1price = Util.getValueOfDecimal(mTab.getValue("CG1P0RICE"));\n    var cg2price = Util.getValueOfDecimal(mTab.getValue("CG2PRICE"));\n    var atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n    //var miltodate=atoDate.GetTime();\n    var afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n    //var milfromdate=afromDate.GetTime();\n    var daydiff = Utility.timeUtil.getDaysBetween(afromDate, atoDate);\n    var t = afromDate.Subtract(atoDate);\n    var monthact;\n    var weekact;\n    var monthquo = daydiff / 30;\n    var monthrem = daydiff % 30;\n    var weekquo = daydiff / 7;\n    var weekrem = daydiff % 7;\n    if (monthrem == 0) {\n      monthact = monthquo;\n    } else {\n      monthact = monthquo + 1;\n    }\n    if (weekrem == 0) {\n      weekact = weekquo;\n    } else {\n      weekact = weekquo + 1;\n    }\n    var mildiff = t.TotalMilliseconds; // miltodate - milfromdate;\n    var secdiff = t.TotalSeconds; // mildiff / 1000;\n    var mindiff = t.TotalMinutes; // secdiff / 60;\n\n    if (Util.getValueOfInt(arebate) == 0) {\n      calrebate = VIS.Env.ZERO;\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          cal1 = cg1price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          // grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          // per month\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          cal = CalculatePrice(new Decimal(stdprice * daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week \t\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal((daydiff + 1) * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal((daydiff + 1) * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          // System.out.println("false");\n          break;\n      }\n    } else {\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          calrebate = CalculateRebate(new Decimal(daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          //per month \n          calrebate = CalculateRebate(new Decimal(monthact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(monthact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(monthact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          calrebate = CalculateRebate(new Decimal(weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          calrebate = CalculateRebate(new Decimal(daydiff + 1), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff + 1), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff + 1), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          calrebate = CalculateRebate(new Decimal(stdprice * daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(stdprice * daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          calrebate = CalculateRebate(new Decimal(mindiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(mindiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(mindiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          calrebate = CalculateRebate(new Decimal(secdiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(secdiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(secdiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week  \n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          calrebate = CalculateRebate(new Decimal(stdprice * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          calrebate = CalculateRebate(new Decimal(stdprice * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          // System.out.println("false");\n          break;\n      }\n    }\n    if (anumber == 0)\n      //update code on 11-09-2009 by sandeep\n      {\n        mTab.setValue("ATOTAL_AMOUNT", 0);\n        mTab.setValue("GRAND_TOTAL", 0);\n      }\n    if (cg1number == 0) {\n      mTab.setValue("CG1TOTAL_AMOUNT", 0);\n    }\n    if (cg2number == 0) {\n      mTab.setValue("CG2TOTAL_AMOUNT", 0);\n    }\n    //\t\tsetCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /************************************************************************\r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   ************************************************************************/\n  /*****************************************************************************\r\n   *    Check todate with fromdate for Adult\r\n   *    and if the todate is less then from date the info message will pop up \r\n   *    also it will calculate the number of days between todate and from date \r\n   *    if todate>fromdate\r\n   ****************************************************************************/\n  CalloutOfferSerIncluded.prototype.tochkdate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var stdprice = 24; //Standard Price\n    //\t\tif (isCalloutActive())\n    //\t\t\treturn"";\n    //\t\tsetCalloutActive(true);\n    var cal, cal1, cal2;\n    var calrebate, cg1calrebate, cg2calrebate, grand_total;\n    var a = Util.getValueOfDateTime(value);\n    if (a == null || a.equals(0)) return "";\n    var atoDate = Util.getValueOfDateTime(value);\n    var afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n    var cg1number = Util.getValueOfInt(mTab.getValue("CG1NUM"));\n    var cg2number = Util.getValueOfInt(mTab.getValue("CG2NUM"));\n    var cg1price = Util.getValueOfDecimal(mTab.getValue("CG1PRICE"));\n    var cg2price = Util.getValueOfDecimal(mTab.getValue("CG2PRICE"));\n    // var milfromdate = afromDate.GetTime();\n    try {\n      atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n      //   var miltodate = atoDate.GetTime();\n      var numdays;\n      numdays = Utility.timeUtil.getDaysBetween(afromDate, atoDate);\n      if (numdays <= 0) {\n        ////////////////////////////////////////////////\n        var incdays;\n        incdays = Utility.TimeUtil.AddDays(afromDate, 1);\n        mTab.setValue("ADATETO", incdays);\n        //////////////////////////////////////////////\n      } else if (atoDate.compareTo(afromDate) > 0) {\n        var t = atoDate.Subtract(afromDate);\n        var daydiff = Utility.timeUtil.getDaysBetween(afromDate, atoDate);\n        var mildiff = t.TotalMilliseconds; // miltodate - milfromdate;\n        var secdiff = t.TotalMinutes; // mildiff / 1000;\n        var mindiff = t.TotalMinutes; // secdiff / 60;\n        var monthact;\n        var weekact;\n        var monthquo = daydiff / 30;\n        var monthrem = daydiff % 30;\n        var weekquo = daydiff / 7;\n        var weekrem = daydiff % 7;\n        if (monthrem == 0) {\n          monthact = monthquo;\n        } else {\n          monthact = monthquo + 1;\n        }\n        if (weekrem == 0) {\n          weekact = weekquo;\n        } else {\n          weekact = weekquo + 1;\n        }\n        var setafromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n        mTab.setValue("CG1DATETO", atoDate);\n        mTab.setValue("CG2DATETO", atoDate);\n        mTab.setValue("CG1DATEFROM", setafromDate);\n        mTab.setValue("CG2DATEFROM", setafromDate);\n        var uomsel = mTab.getValue("AUOM_ID").toString();\n        if (uomsel == "" || uomsel.toString().trim().length == 0) {\n          uomsel = "0";\n        }\n        var aprice = Util.getValueOfDecimal(mTab.getValue("APRICE"));\n        var anumber = Util.getValueOfInt(mTab.getValue("ANUM"));\n        var arebate = Util.getValueOfDecimal(mTab.getValue("AREBATE"));\n        if (Util.getValueOfInt(arebate) == 0) {\n          calrebate = VIS.Env.ZERO;\n          switch (int.Parse(uomsel)) {\n            case 1000003:\n              //flat rate\n              cal = aprice;\n              cal1 = cg1price;\n              cal2 = cg2price;\n              cal1 = cg1price;\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000004:\n              //per person\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000005:\n              //per stock\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000006:\n              //per night\n              cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000007:\n              // per month\n              cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(monthact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(monthact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000008:\n              //per week\n              cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000009:\n              //per day\n              cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000010:\n              //per standard\n              cal = CalculatePrice(new Decimal(stdprice * daydiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000011:\n              //per minute\n              cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(mindiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(mindiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000012:\n              //per second\n              cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(secdiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(secdiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000013:\n              //person/night\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000014:\n              //stock/night\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000015:\n              //person/week \t\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000016:\n              //stock/week\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000017:\n              //person/day\n              cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000018:\n              //stock/day\n              cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal((daydiff + 1) * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal((daydiff + 1) * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000019:\n              //person/standard\n              cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000020:\n              //stock/standard\n              cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            default:\n              // System.out.println("false");\n              break;\n          }\n        } else {\n          switch (int.Parse(uomsel)) {\n            case 1000003:\n              //flat rate\n              cal = aprice;\n              cal1 = cg1price;\n              cal2 = cg2price;\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000004:\n              //per person\n              calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000005:\n              //per stock\n              calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000006:\n              //per night\n              calrebate = CalculateRebate(new Decimal(daydiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000007:\n              //per month \n              calrebate = CalculateRebate(new Decimal(monthact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(monthact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(monthact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(monthact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(monthact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000008:\n              //per week\n              calrebate = CalculateRebate(new Decimal(weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000009:\n              //per day\n              calrebate = CalculateRebate(new Decimal(daydiff + 1), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff + 1), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff + 1), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000010:\n              //per standard\n              calrebate = CalculateRebate(new Decimal(stdprice * daydiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(stdprice * daydiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000011:\n              //per minute\n              calrebate = CalculateRebate(new Decimal(mindiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(mindiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(mindiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(mindiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(mindiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000012:\n              //per second\n              calrebate = CalculateRebate(new Decimal(secdiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(secdiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(secdiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(secdiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(secdiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000013:\n              //person/night\n              calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000014:\n              //stock/night\n              calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000015:\n              //person/week  \n              calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000016:\n              //stock/week\n              calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000017:\n              //person/day\n              calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000018:\n              //stock/day\n              calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n              cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000019:\n              //person/standard\n              calrebate = CalculateRebate(new Decimal(stdprice * daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000020:\n              //stock/standard\n              calrebate = CalculateRebate(new Decimal(stdprice * daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            default:\n              // System.out.println("false");\n              break;\n          }\n        }\n        if (anumber == 0)\n          //update code on 11-09-2009 by sandeep\n          {\n            mTab.setValue("ATOTAL_AMOUNT", 0);\n            mTab.setValue("GRAND_TOTAL", 0);\n          }\n        if (cg1number == 0) {\n          mTab.setValue("CG1TOTAL_AMOUNT", 0);\n        }\n        if (cg2number == 0) {\n          mTab.setValue("CG2TOTAL_AMOUNT", 0);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n      //e.getLocalizedMessage();\n    }\n    //\t\tsetCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /************************************************************************\r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   ************************************************************************/\n  /*****************************************************************************\r\n   *    Check fromdate with todate for Adult\r\n   *    and if the todate is less then from date the info message will pop up \r\n   *    also it will calculate the number of days between todate and from date \r\n   *    if todate>fromdate\r\n   ****************************************************************************/\n  CalloutOfferSerIncluded.prototype.fromchkdate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var stdprice = 24; //Standard Price\n    //\t\tif (isCalloutActive())\n    //\t\t\treturn"";\n    //\t\tsetCalloutActive(true);\n    var cal, cal1, cal2;\n    var calrebate, cg1calrebate, cg2calrebate, grand_total;\n    var b = Util.getValueOfDateTime(value);\n    if (b == null || b.equals(0)) return "";\n    var afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n    var atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n    var cg1number = Util.getValueOfInt(mTab.getValue("CG1NUM"));\n    var cg2number = Util.getValueOfInt(mTab.getValue("CG2NUM"));\n    var cg1price = Util.getValueOfDecimal(mTab.getValue("CG1PRICE"));\n    var cg2price = Util.getValueOfDecimal(mTab.getValue("CG2PRICE"));\n    //var miltodate=atoDate.GetTime();\n    try {\n      afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n      //  var milfromdate=afromDate.GetTime();\n      if (afromDate.compareTo(atoDate) > 0) {\n        //\t\t\t\tObject ob[]={"ok"};\n        //\t\t\t\tJOptionPane.showOptionDialog(new JFrame(),"FromDate cannot appear after ToDate","FO",0,JOptionPane.ERROR_MESSAGE,null,ob,ob[0]);\n        //\t\t\t\tmTab.setValue("ADATEFROM",null);\n        //\t\t\t\tmTab.setValue("CG1DATEFROM",null);\n        //\t\t\t\tmTab.setValue("CG2DATEFROM",null);\n        mTab.setValue("CG1DATEFROM", afromDate);\n        mTab.setValue("CG2DATEFROM", afromDate);\n        ////////////////////////////////////////////////\t\t\t\n        var incdays;\n        incdays = Utility.timeUtil.addDays(afromDate, 1);\n        mTab.setValue("ADATETO", incdays);\n        //////////////////////////////////////////////\t\n      } else if (atoDate.compareTo(afromDate) > 0) {\n        var t = atoDate.Subtract(afromDate);\n        var daydiff = Utility.timeUtil.getDaysBetween(afromDate, atoDate);\n        var mildiff = t.TotalMilliseconds; // miltodate - milfromdate;\n        var secdiff = t.TotalSeconds; // mildiff / 1000;\n        var mindiff = t.TotalMinutes; // secdiff / 60;\n        var monthact;\n        var weekact;\n        var monthquo = daydiff / 30;\n        var monthrem = daydiff % 30;\n        var weekquo = daydiff / 7;\n        var weekrem = daydiff % 7;\n        if (monthrem == 0) {\n          monthact = monthquo;\n        } else {\n          monthact = monthquo + 1;\n        }\n        if (weekrem == 0) {\n          weekact = weekquo;\n        } else {\n          weekact = weekquo + 1;\n        }\n        var setafromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n        mTab.setValue("CG1DATETO", atoDate);\n        mTab.setValue("CG2DATETO", atoDate);\n        mTab.setValue("CG1DATEFROM", setafromDate);\n        mTab.setValue("CG2DATEFROM", setafromDate);\n        var uomsel = mTab.getValue("AUOM_ID").toString();\n        if (uomsel == "" || uomsel.toString().trim().length == 0) {\n          uomsel = "0";\n        }\n        var aprice = Util.getValueOfDecimal(mTab.getValue("APRICE"));\n        var anumber = Util.getValueOfInt(mTab.getValue("ANUM"));\n        var arebate = Util.getValueOfDecimal(mTab.getValue("AREBATE"));\n        if (Util.getValueOfInt(arebate) == 0) {\n          calrebate = VIS.Env.ZERO;\n          switch (int.Parse(uomsel)) {\n            case 1000003:\n              //flat rate\n              cal = aprice;\n              cal1 = cg1price;\n              cal2 = cg2price;\n              cal1 = cg1price;\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000004:\n              //per person\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000005:\n              //per stock\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000006:\n              //per night\n              cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000007:\n              // per month\n              cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(monthact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(monthact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000008:\n              //per week\n              cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000009:\n              //per day\n              cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000010:\n              //per standard\n              cal = CalculatePrice(new Decimal(stdprice * daydiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000011:\n              //per minute\n              cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(mindiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(mindiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000012:\n              //per second\n              cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(secdiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(secdiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000013:\n              //person/night\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000014:\n              //stock/night\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000015:\n              //person/week \t\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000016:\n              //stock/week\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000017:\n              //person/day\n              cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000018:\n              //stock/day\n              cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal((daydiff + 1) * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal((daydiff + 1) * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000019:\n              //person/standard\n              cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000020:\n              //stock/standard\n              cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            default:\n              // System.out.println("false");\n              break;\n          }\n        } else {\n          switch (int.Parse(uomsel)) {\n            case 1000003:\n              //flat rate\n              cal = aprice;\n              cal1 = cg1price;\n              cal2 = cg2price;\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000004:\n              //per person\n              calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000005:\n              //per stock\n              calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000006:\n              //per night\n              calrebate = CalculateRebate(new Decimal(daydiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000007:\n              //per month \n              calrebate = CalculateRebate(new Decimal(monthact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(monthact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(monthact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(monthact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(monthact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000008:\n              //per week\n              calrebate = CalculateRebate(new Decimal(weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000009:\n              //per day\n              calrebate = CalculateRebate(new Decimal(daydiff + 1), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff + 1), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff + 1), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000010:\n              //per standard\n              calrebate = CalculateRebate(new Decimal(stdprice * daydiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(stdprice * daydiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000011:\n              //per minute\n              calrebate = CalculateRebate(new Decimal(mindiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(mindiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(mindiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(mindiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(mindiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000012:\n              //per second\n              calrebate = CalculateRebate(new Decimal(secdiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(secdiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(secdiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(secdiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(secdiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000013:\n              //person/night\n              calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000014:\n              //stock/night\n              calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000015:\n              //person/week  \n              calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000016:\n              //stock/week\n              calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000017:\n              //person/day\n              calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000018:\n              //stock/day\n              calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n              cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000019:\n              //person/standard\n              calrebate = CalculateRebate(new Decimal(stdprice * daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000020:\n              //stock/standard\n              calrebate = CalculateRebate(new Decimal(stdprice * daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            default:\n              // System.out.println("false");\n              break;\n          }\n        }\n        if (anumber == 0)\n          //update code on 11-09-2009 by sandeep\n          {\n            mTab.setValue("ATOTAL_AMOUNT", 0);\n            mTab.setValue("GRAND_TOTAL", 0);\n          }\n        if (cg1number == 0) {\n          mTab.setValue("CG1TOTAL_AMOUNT", 0);\n        }\n        if (cg2number == 0) {\n          mTab.setValue("CG2TOTAL_AMOUNT", 0);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n      //e.getLocalizedMessage();\n    }\n    //\t\tsetCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /************************************************************************\r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   ************************************************************************/\n\n  /*****************************************************************************\r\n   *   if Adult UOM is selected the same will be displayed in child records\r\n   ****************************************************************************/\n  CalloutOfferSerIncluded.prototype.UOMSelected = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var stdprice = 24; //Standard Price\n    //\t\tif (isCalloutActive())\n    //\t\t\treturn"";\n    //\t\tsetCalloutActive(true);\n    var cal, cal1, cal2;\n    var calrebate, cg1calrebate, cg2calrebate, grand_total;\n\n    //log.severe("value"+value);\n    var UOMsel = Util.getValueOfInt(value);\n    UOMsel = Util.getValueOfInt(mTab.getValue("AUOM_ID"));\n    if (UOMsel == null) return "";\n    mTab.setValue("CG1UOM_ID", UOMsel);\n    mTab.setValue("CG2UOM_ID", UOMsel);\n    var uomsel = mTab.getValue("AUOM_ID").toString();\n    var aprice = Util.getValueOfDecimal(mTab.getValue("APRICE"));\n    var anumber = Util.getValueOfInt(mTab.getValue("ANUM"));\n    var arebate = Util.getValueOfDecimal(mTab.getValue("AREBATE"));\n    var cg1number = Util.getValueOfInt(mTab.getValue("CG1NUM"));\n    var cg2number = Util.getValueOfInt(mTab.getValue("CG2NUM"));\n    var cg1price = Util.getValueOfDecimal(mTab.getValue("CG1PRICE"));\n    var cg2price = Util.getValueOfDecimal(mTab.getValue("CG2PRICE"));\n    var atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n    //var miltodate=atoDate.GetTime();\n    var afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n    //var milfromdate=afromDate.GetTime();\n    var t = atoDate.Subtract(afromDate);\n    var daydiff = Utility.timeUtil.getDaysBetween(afromDate, atoDate);\n    var mildiff = t.TotalMilliseconds; // miltodate - milfromdate;\n    var secdiff = t.TotalSeconds; // mildiff / 1000;\n    var mindiff = t.TotalMinutes; // secdiff / 60;\n    var monthact;\n    var weekact;\n    var monthquo = daydiff / 30;\n    var monthrem = daydiff % 30;\n    var weekquo = daydiff / 7;\n    var weekrem = daydiff % 7;\n    if (monthrem == 0) {\n      monthact = monthquo;\n    } else {\n      monthact = monthquo + 1;\n    }\n    if (weekrem == 0) {\n      weekact = weekquo;\n    } else {\n      weekact = weekquo + 1;\n    }\n    if (Util.getValueOfInt(arebate) == 0) {\n      calrebate = VIS.Env.ZERO;\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          cal1 = cg1price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          // per month\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          cal = CalculatePrice(new Decimal(stdprice * daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week \t\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal((daydiff + 1) * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal((daydiff + 1) * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          // System.out.println("false");\n          break;\n      }\n    } else {\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          calrebate = CalculateRebate(new Decimal(daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          //per month \n          calrebate = CalculateRebate(new Decimal(monthact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(monthact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(monthact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          calrebate = CalculateRebate(new Decimal(weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          calrebate = CalculateRebate(new Decimal(daydiff + 1), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff + 1), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff + 1), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          calrebate = CalculateRebate(new Decimal(stdprice * daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(stdprice * daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          calrebate = CalculateRebate(new Decimal(mindiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(mindiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(mindiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          calrebate = CalculateRebate(new Decimal(secdiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(secdiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(secdiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week  \n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          calrebate = CalculateRebate(new Decimal(stdprice * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          calrebate = CalculateRebate(new Decimal(stdprice * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          // System.out.println("false");\n          break;\n      }\n    }\n    if (anumber == 0)\n      //update code on 11-09-2009 by sandeep\n      {\n        mTab.setValue("ATOTAL_AMOUNT", 0);\n        mTab.setValue("GRAND_TOTAL", 0);\n      }\n    if (cg1number == 0) {\n      mTab.setValue("CG1TOTAL_AMOUNT", 0);\n    }\n    if (cg2number == 0) {\n      mTab.setValue("CG2TOTAL_AMOUNT", 0);\n    }\n    //\t\tsetCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /************************************************************************\r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   ************************************************************************/\n  /*****************************************************************************\r\n   *   if Adult Number is selected then the calculation is done\r\n   ****************************************************************************/\n  CalloutOfferSerIncluded.prototype.AVALSelected = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var stdprice = 24; //Standard Price\n    //\t\t\tif (isCalloutActive())\n    //\t\t\t\treturn"";\n    //\t\t\tsetCalloutActive(true);\n    var cal, cal1, cal2;\n    var calrebate, cg1calrebate, cg2calrebate, grand_total;\n    var uomsel = null;\n    try {\n      uomsel = mTab.getValue("AUOM_ID").toString();\n    } catch (err) {\n      this.setCalloutActive(false);\n      return "";\n    }\n    var aprice = Util.getValueOfDecimal(mTab.getValue("APRICE"));\n    var arebate = Util.getValueOfDecimal(mTab.getValue("AREBATE"));\n    var anumber = Util.getValueOfInt(mTab.getValue("ANUM"));\n    var atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n    var cg1number = Util.getValueOfInt(mTab.getValue("CG1NUM"));\n    var cg2number = Util.getValueOfInt(mTab.getValue("CG2NUM"));\n    var cg1price = Util.getValueOfDecimal(mTab.getValue("CG1PRICE"));\n    var cg2price = Util.getValueOfDecimal(mTab.getValue("CG2PRICE"));\n    //var miltodate=atoDate.GetTime();\n    var afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n    //var milfromdate=afromDate.GetTime();\n    var t = atoDate.Subtract(afromDate);\n    var daydiff = Utility.timeUtil.getDaysBetween(afromDate, atoDate);\n    var mildiff = t.TotalMilliseconds; // miltodate - milfromdate;\n    var secdiff = t.TotalSeconds; // mildiff / 1000;\n    var mindiff = t.TotalMinutes; // secdiff / 60;\n    var monthact;\n    var weekact;\n    var monthquo = daydiff / 30;\n    var monthrem = daydiff % 30;\n    var weekquo = daydiff / 7;\n    var weekrem = daydiff % 7;\n    if (monthrem == 0) {\n      monthact = monthquo;\n    } else {\n      monthact = monthquo + 1;\n    }\n    if (weekrem == 0) {\n      weekact = weekquo;\n    } else {\n      weekact = weekquo + 1;\n    }\n    if (Util.getValueOfInt(arebate) == 0) {\n      calrebate = VIS.Env.ZERO;\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          cal1 = cg1price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          // per month\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          cal = CalculatePrice(new Decimal(stdprice * daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week \t\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal((daydiff + 1) * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal((daydiff + 1) * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          // System.out.println("false");\n          break;\n      }\n    } else {\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          calrebate = CalculateRebate(new Decimal(daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          //per month \n          calrebate = CalculateRebate(new Decimal(monthact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(monthact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(monthact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          calrebate = CalculateRebate(new Decimal(weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          calrebate = CalculateRebate(new Decimal(daydiff + 1), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff + 1), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff + 1), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          calrebate = CalculateRebate(new Decimal(stdprice * daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(stdprice * daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          calrebate = CalculateRebate(new Decimal(mindiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(mindiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(mindiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          calrebate = CalculateRebate(new Decimal(secdiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(secdiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(secdiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week  \n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          calrebate = CalculateRebate(new Decimal(stdprice * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          calrebate = CalculateRebate(new Decimal(stdprice * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(stdprice * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(stdprice * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(stdprice * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(stdprice * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          // System.out.println("false");\n          break;\n      }\n    }\n    if (anumber == 0)\n      //update code on 11-09-2009 by sandeep\n      {\n        mTab.setValue("ATOTAL_AMOUNT", 0);\n        mTab.setValue("GRAND_TOTAL", 0);\n      }\n    if (cg1number == 0) {\n      mTab.setValue("CG1TOTAL_AMOUNT", 0);\n    }\n    if (cg2number == 0) {\n      mTab.setValue("CG2TOTAL_AMOUNT", 0);\n    }\n    //\t\t\t\t\t\tsetCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutOfferSerIncluded = CalloutOfferSerIncluded;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutofferserincluded.js?\n}')},"./Areas/VAS/Scripts/model/calloutofferservices.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutOfferServices() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutOfferServices"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutOfferServices, VIS.CalloutEngine); //inherit CalloutEngine\n  CalloutOfferServices.prototype.CalculatePrice = function (number, price, rebate) {\n    return Decimal.Subtract(Decimal.Multiply(number, price), rebate);\n  };\n  CalloutOfferServices.prototype.CalculateRebate = function (number, price, rebate) {\n    return Decimal.Multiply(Decimal.Multiply(number, price), Decimal.Multiply(new Decimal(0.01), rebate));\n    //return (new Decimal(number),price,arebate);\n  };\n  /************************************************************************\r\n  *  Service Selected\r\n  *\r\n  *  @param ctx      Context\r\n  *  @param windowNo current Window No\r\n  *  @param mTab     Model Tab\r\n  *  @param mField   Model Field\r\n  *  @param value    The new value\r\n  *  @return Error message or ""\r\n  ************************************************************************/\n  /*****************************************************************************\r\n   *   if service is selected then UOM will be displayed\r\n   ****************************************************************************/\n  CalloutOfferServices.prototype.OfferServices = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var FO_SERVICE_ID = Util.getValueOfInt(value);\n    if (FO_SERVICE_ID == null || FO_SERVICE_ID == 0) return "";\n    var sql = "select uom.FO_HOTEL_UOM_ID,s.DESCRIPTION " + "from FO_HOTEL_UOM uom " + "inner join FO_SERVICE s ON(uom.FO_HOTEL_UOM_ID= s.FO_HOTEL_UOM_ID) " + "where s.FO_SERVICE_ID=@FO_SERVICE_ID ";\n    var FO_HOTEL_UOM_ID = 0;\n    var APRICE = new Decimal(0);\n    var CG1PRICE = new Decimal(0);\n    var CG2PRICE = new Decimal(0);\n    var cal, cal1, cal2, grand_total;\n    var calrebate, cg1calrebate, cg2calrebate;\n    var UOM1, UOM2;\n    var dr = null;\n    try {\n      //PreparedStatement pst = DataBase.prepareStatement(sql,null);\n      //pst.setInt(1,FO_SERVICE_ID);\n      //ResultSet rs = pst.executeQuery();\n      var param = [];\n      //SqlParameter[] param = new SqlParameter[1];\n      param[0] = new VIS.DB.SqlParam("@FO_SERVICE_ID", FO_SERVICE_ID);\n      dr = VIS.DB.executeReader(sql, param, null);\n      while (dr.read()) {\n        FO_HOTEL_UOM_ID = Util.getValueOfInt(dr[0]);\n        mTab.setValue("AUOM_ID", FO_HOTEL_UOM_ID);\n        mTab.setValue("CG1UOM_ID", FO_HOTEL_UOM_ID);\n        mTab.setValue("CG2UOM_ID", FO_HOTEL_UOM_ID);\n        mTab.setValue("DESCRIPTION", Util.getValueOfString(dr[1])); //rs.getString(2));\n      }\n      dr.close();\n      //pst.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      if (dr != null) {\n        dr.close();\n      }\n      this.log.severe(err.toString());\n    } finally {\n      if (dr != null) {\n        dr.close();\n      }\n    }\n    var sqlprice = "select PRICE,CHILDGROUP1,CHILDGROUP2,UOM1,UOM2 from FO_SERVICE_PRICE_PRICELINE " + "where CREATED=(select max(CREATED) from FO_SERVICE_PRICE_PRICELINE " + "where FO_SERVICE_ID=@FO_SERVICE_ID)";\n    try {\n      //PreparedStatement pst1 = DataBase.prepareStatement(sqlprice,null);\n      //pst1.setInt(1,FO_SERVICE_ID);\n      //ResultSet rs1 = pst1.executeQuery();\n      var param = [];\n      //SqlParameter[] param = new SqlParameter[1];\n      param[0] = new SqlParameter("@FO_SERVICE_ID", FO_SERVICE_ID);\n      dr = VIS.DB.executeReader(sqlprice, param, null);\n      while (dr.read()) {\n        APRICE = Util.getValueOfDecimal(dr[0]);\n        CG1PRICE = Util.getValueOfDecimal(dr[1]);\n        CG2PRICE = Util.getValueOfDecimal(dr[2]);\n\n        //code changed by sandeep for is%\n        UOM1 = dr[3].toString();\n        UOM2 = dr[4].toString();\n        if (UOM1 == "Y") {\n          //CG1PRICE=APRICE.multiply(CG1PRICE).multiply(new BigDecimal(0.01));\n          CG1PRICE = Decimal.Multiply(Decimal.Multiply(APRICE, CG1PRICE), new Decimal(0.01));\n        }\n        if (UOM2 == "Y") {\n          CG2PRICE = Decimal.Multiply(Decimal.Multiply(APRICE, CG2PRICE), new Decimal(0.01));\n          //CG2PRICE=APRICE.multiply(CG2PRICE).multiply(new BigDecimal(0.01));\n        }\n\n        //changes end\n        mTab.setValue("APRICE", APRICE);\n        mTab.setValue("CG1PRICE", CG1PRICE);\n        mTab.setValue("CG2PRICE", CG2PRICE);\n      }\n      //rs1.close();\n      //pst1.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    } finally {\n      if (dr != null) {\n        dr.close();\n      }\n    }\n    var uomsel = mTab.getValue("AUOM_ID").toString();\n    var anumber = Util.getValueOfInt(mTab.getValue("ANUM"));\n    var aprice = Util.getValueOfDecimal(mTab.getValue("APRICE"));\n    var arebate = Util.getValueOfDecimal(mTab.getValue("AREBATE"));\n    var cg1number = Util.getValueOfInt(mTab.getValue("CG1NUM"));\n    var cg2number = Util.getValueOfInt(mTab.getValue("CG2NUM"));\n    var cg1price = Util.getValueOfDecimal(mTab.getValue("CG1PRICE"));\n    var cg2price = Util.getValueOfDecimal(mTab.getValue("CG2PRICE"));\n\n    //Get Days wise difference\n    var atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n    //var atoDate=Util.getValueOfDateTime(mTab.getValue("ADATETO");\n    //var miltodate=atoDate.GetTime();\n\n    var afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n    //var afromDate=Util.getValueOfDateTime(mTab.getValue("ADATEFROM");\n    //var milfromdate=afromDate.GetTime();\n\n    var daydiff = Utility.timeUtil.getDaysBetween(afromDate, atoDate);\n    var t = afromDate.Subtract(atoDate);\n    //var daydiff = t.Days;\n\n    var monthact;\n    var weekact;\n    var monthquo = daydiff / 30;\n    var monthrem = daydiff % 30;\n    var weekquo = daydiff / 7;\n    var weekrem = daydiff % 7;\n    if (monthrem == 0) {\n      monthact = monthquo;\n    } else {\n      monthact = monthquo + 1;\n    }\n    if (weekrem == 0) {\n      weekact = weekquo;\n    } else {\n      weekact = weekquo + 1;\n    }\n\n    //var mildiff=miltodate-milfromdate;\n    var secdiff = t.Seconds;\n    var mindiff = t.Minutes;\n    if (Util.getValueOfInt(arebate) == 0) {\n      calrebate = VIS.Env.ZERO;\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          cal1 = cg1price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          // per month\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          cal = CalculatePrice(new Decimal(24 * daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week \t\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal((daydiff + 1) * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal((daydiff + 1) * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          ShowMessage.Info("false", true, "", "");\n          break;\n      }\n    } else {\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          calrebate = CalculateRebate(new Decimal(daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          //per month \n          calrebate = CalculateRebate(new Decimal(monthact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(monthact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(monthact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          calrebate = CalculateRebate(new Decimal(weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          calrebate = CalculateRebate(new Decimal(daydiff + 1), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff + 1), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff + 1), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          calrebate = CalculateRebate(new Decimal(24 * daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(24 * daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(24 * daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(24 * daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          calrebate = CalculateRebate(new Decimal(mindiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(mindiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(mindiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          calrebate = CalculateRebate(new Decimal(secdiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(secdiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(secdiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week  \n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          calrebate = CalculateRebate(new Decimal(24 * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(24 * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(24 * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          calrebate = CalculateRebate(new Decimal(24 * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(24 * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(24 * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          ShowMessage.Info("false", true, "", "");\n          break;\n      }\n    }\n    if (anumber == 0)\n      //update code on 11-09-2009 by sandeep\n      {\n        mTab.setValue("ATOTAL_AMOUNT", 0);\n        mTab.setValue("GRAND_TOTAL", 0);\n      }\n    if (cg1number == 0) {\n      mTab.setValue("CG1TOTAL_AMOUNT", 0);\n    }\n    if (cg2number == 0) {\n      mTab.setValue("CG2TOTAL_AMOUNT", 0);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /************************************************************************\r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   ************************************************************************/\n  /*****************************************************************************\r\n   *    Check todate with fromdate for Adult\r\n   *    and if the todate is less then from date the info message will pop up \r\n   *    also it will calculate the number of days between todate and from date \r\n   *    if todate>fromdate\r\n   ****************************************************************************/\n  CalloutOfferServices.prototype.tochkdate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var cal, cal1, cal2;\n    var calrebate, cg1calrebate, cg2calrebate, grand_total;\n    var a = Util.getValueOfDateTime(value); // Timestamp a = (Timestamp)value;\n    if (a == null || a.equals(0)) return "";\n    var atoDate = Util.getValueOfDateTime(value);\n    atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n\n    //var afromDate=Util.getValueOfDateTime(mTab.getValue("ADATEFROM");\n    var afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n    var cg1number = Util.getValueOfInt(mTab.getValue("CG1NUM"));\n    var cg2number = Util.getValueOfInt(mTab.getValue("CG2NUM"));\n    var cg1price = Util.getValueOfDecimal(mTab.getValue("CG1PRICE"));\n    var cg2price = Util.getValueOfDecimal(mTab.getValue("CG2PRICE"));\n    //var milfromdate=afromDate.GetTime();\n    try {\n      atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n      //var miltodate=atoDate.GetTime();\n      //TimeSpan t = afromDate.Subtract(atoDate);//commented be sandeep\n      // var numdays = t.Days;//commented be sandeep\n      var numdays;\n      numdays = Utility.TimeUtil.getDaysBetween(afromDate, atoDate);\n\n      //numdays=TimeUtil.getDaysBetween(afromDate, atoDate);\n      if (numdays <= 0) {\n        //Object[] ob={"ok"};\n        //JOptionPane.showOptionDialog(new JFrame(),"ToDate cannot appear Before After Date","FO",0,JOptionPane.ERROR_MESSAGE,null,ob,ob[0]);\n        // ShowMessage.Error("\'ToDate\' cannot appear Before \'After Date\'", true);\n        ////////////////////////////////////////////////\t\t\t\n        var incdays; // = afromDate.AddDays(1);\n        incdays = Utility.TimeUtil.AddDays(afromDate, 1);\n        mTab.setValue("ADATETO", incdays);\n\n        //Date date2 = new Date();\n        //////////////////////////////////////////////\t\n      } else if (atoDate.compareTo(afromDate) > 0) {\n        var t1 = atoDate.Subtract(afromDate);\n        // var daydiff = t1.Days;//TimeUtil.getDaysBetween(afromDate,atoDate) ;\n\n        var daydiff = Utility.TimeUtil.getDaysBetween(afromDate, atoDate);\n        var mildiff = t1.Milliseconds; //miltodate-milfromdate;\n        var secdiff = t1.Seconds; //mildiff/1000;\n        var mindiff = t1.Minutes; //secdiff/60;\n        var monthact;\n        var weekact;\n        var monthquo = daydiff / 30;\n        var monthrem = daydiff % 30;\n        var weekquo = daydiff / 7;\n        var weekrem = daydiff % 7;\n        if (monthrem == 0) {\n          monthact = monthquo;\n        } else {\n          monthact = monthquo + 1;\n        }\n        if (weekrem == 0) {\n          weekact = weekquo;\n        } else {\n          weekact = weekquo + 1;\n        }\n        var SetafromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n        mTab.setValue("CG1DATETO", atoDate);\n        mTab.setValue("CG2DATETO", atoDate);\n        mTab.setValue("CG1DATEFROM", SetafromDate);\n        mTab.setValue("CG2DATEFROM", SetafromDate);\n        var uomsel = mTab.getValue("AUOM_ID").toString();\n        if (uomsel == "" || uomsel.Trim().Length == 0) {\n          uomsel = "0";\n        }\n        var aprice = Util.getValueOfDecimal(mTab.getValue("APRICE"));\n        var anumber = System.Convert.ToInt16(mTab.getValue("ANUM"));\n        var arebate = Util.getValueOfDecimal(mTab.getValue("AREBATE"));\n        if (Util.getValueOfInt(arebate) == 0) {\n          calrebate = VIS.Env.ZERO;\n          switch (int.Parse(uomsel)) {\n            case 1000003:\n              //flat rate\n              cal = aprice;\n              cal1 = cg1price;\n              cal2 = cg2price;\n              cal1 = cg1price;\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000004:\n              //per person\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000005:\n              //per stock\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000006:\n              //per night\n              cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000007:\n              // per month\n              cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(monthact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(monthact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000008:\n              //per week\n              cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000009:\n              //per day\n              cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000010:\n              //per standard\n              cal = CalculatePrice(new Decimal(24 * daydiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000011:\n              //per minute\n              cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(mindiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(mindiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000012:\n              //per second\n              cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(secdiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(secdiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000013:\n              //person/night\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000014:\n              //stock/night\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000015:\n              //person/week \t\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000016:\n              //stock/week\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000017:\n              //person/day\n              cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000018:\n              //stock/day\n              cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal((daydiff + 1) * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal((daydiff + 1) * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000019:\n              //person/standard\n              cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000020:\n              //stock/standard\n              cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            default:\n              ShowMessage.Info("false", true, "", "");\n              break;\n          }\n        } else {\n          switch (int.Parse(uomsel)) {\n            case 1000003:\n              //flat rate\n              cal = aprice;\n              cal1 = cg1price;\n              cal2 = cg2price;\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000004:\n              //per person\n              calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000005:\n              //per stock\n              calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000006:\n              //per night\n              calrebate = CalculateRebate(new Decimal(daydiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000007:\n              //per month \n              calrebate = CalculateRebate(new Decimal(monthact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(monthact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(monthact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(monthact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(monthact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000008:\n              //per week\n              calrebate = CalculateRebate(new Decimal(weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000009:\n              //per day\n              calrebate = CalculateRebate(new Decimal(daydiff + 1), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff + 1), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff + 1), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000010:\n              //per standard\n              calrebate = CalculateRebate(new Decimal(24 * daydiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(24 * daydiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(24 * daydiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(24 * daydiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000011:\n              //per minute\n              calrebate = CalculateRebate(new Decimal(mindiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(mindiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(mindiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(mindiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(mindiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000012:\n              //per second\n              calrebate = CalculateRebate(new Decimal(secdiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(secdiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(secdiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(secdiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(secdiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000013:\n              //person/night\n              calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000014:\n              //stock/night\n              calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000015:\n              //person/week  \n              calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000016:\n              //stock/week\n              calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000017:\n              //person/day\n              calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000018:\n              //stock/day\n              calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n              cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000019:\n              //person/standard\n              calrebate = CalculateRebate(new Decimal(24 * daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(24 * daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(24 * daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000020:\n              //stock/standard\n              calrebate = CalculateRebate(new Decimal(24 * daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(24 * daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(24 * daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            default:\n              ShowMessage.Info("false", true, "", "");\n              break;\n          }\n        }\n        if (anumber == 0)\n          //update code on 11-09-2009 by sandeep\n          {\n            mTab.setValue("ATOTAL_AMOUNT", 0);\n            mTab.setValue("GRAND_TOTAL", 0);\n          }\n        if (cg1number == 0) {\n          mTab.setValue("CG1TOTAL_AMOUNT", 0);\n        }\n        if (cg2number == 0) {\n          mTab.setValue("CG2TOTAL_AMOUNT", 0);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n      //e.getLocalizedMessage();\n    }\n    //setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /************************************************************************\r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   ************************************************************************/\n\n  /*****************************************************************************\r\n   *    Check fromdate with todate for Adult\r\n   *    and if the todate is less then from date the info message will pop up \r\n   *    also it will calculate the number of days between todate and from date \r\n   *    if todate>fromdate\r\n   ****************************************************************************/\n  CalloutOfferServices.prototype.fromchkdate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var cal, cal1, cal2;\n    var calrebate, cg1calrebate, cg2calrebate, grand_total;\n    var b = Util.getValueOfDateTime(value);\n    if (b == null || b.equals(0)) return "";\n    var afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n    var atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n    var cg1number = Util.getValueOfInt(mTab.getValue("CG1NUM"));\n    var cg2number = Util.getValueOfInt(mTab.getValue("CG2NUM"));\n    var cg1price = Util.getValueOfDecimal(mTab.getValue("CG1PRICE"));\n    var cg2price = Util.getValueOfDecimal(mTab.getValue("CG2PRICE"));\n\n    //var miltodate=atoDate.GetTime();\n    try {\n      afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n      //var milfromdate=afromDate.getTime();\n      //if(afromDate.after(atoDate))\n      if (afromDate.compareTo(atoDate) > 0) {\n        mTab.setValue("CG1DATEFROM", afromDate);\n        mTab.setValue("CG2DATEFROM", afromDate);\n        ////////////////////////////////////////////////\t\t\t\n        var incdays;\n\n        //incdays=TimeUtil.addDays(afromDate, 1);\n        incdays = afromDate.addDays(1); // TimeUtil.addDays(afromDate, 1);\n        mTab.setValue("ADATETO", incdays);\n        //////////////////////////////////////////////\t\n      } else if (atoDate.compareTo(afromDate) > 0) {\n        // TimeSpan t2 = atoDate.Subtract(afromDate);//commented by sandeep\n        var t2 = afromDate.subtract(atoDate); //Added by Sandeep\n        //var daydiff = t2.Days;\n        var daydiff = Utility.TimeUtil.getDaysBetween(afromDate, atoDate);\n        var mildiff = t2.Milliseconds;\n        var secdiff = t2.Seconds;\n        var mindiff = t2.Minutes;\n        var monthact;\n        var weekact;\n        var monthquo = daydiff / 30;\n        var monthrem = daydiff % 30;\n        var weekquo = daydiff / 7;\n        var weekrem = daydiff % 7;\n        if (monthrem == 0) {\n          monthact = monthquo;\n        } else {\n          monthact = monthquo + 1;\n        }\n        if (weekrem == 0) {\n          weekact = weekquo;\n        } else {\n          weekact = weekquo + 1;\n        }\n        var SetafromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n        mTab.setValue("CG1DATETO", atoDate);\n        mTab.setValue("CG2DATETO", atoDate);\n        mTab.setValue("CG1DATEFROM", SetafromDate);\n        mTab.setValue("CG2DATEFROM", SetafromDate);\n        var uomsel = mTab.getValue("AUOM_ID").toString();\n        if (uomsel == "" || uomsel.Trim().Length == 0) {\n          uomsel = "0";\n        }\n        var aprice = Util.getValueOfDecimal(mTab.getValue("APRICE"));\n        var anumber = Util.getValueOfInt(mTab.getValue("ANUM"));\n        var arebate = Util.getValueOfDecimal(mTab.getValue("AREBATE"));\n        if (Util.getValueOfInt(arebate) == 0) {\n          calrebate = VIS.Env.ZERO;\n          switch (int.Parse(uomsel)) {\n            case 1000003:\n              //flat rate\n              cal = aprice;\n              cal1 = cg1price;\n              cal2 = cg2price;\n              cal1 = cg1price;\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000004:\n              //per person\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000005:\n              //per stock\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000006:\n              //per night\n              cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000007:\n              // per month\n              cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(monthact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(monthact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000008:\n              //per week\n              cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000009:\n              //per day\n              cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000010:\n              //per standard\n              cal = CalculatePrice(new Decimal(24 * daydiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000011:\n              //per minute\n              cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(mindiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(mindiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000012:\n              //per second\n              cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(secdiff), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(secdiff), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000013:\n              //person/night\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000014:\n              //stock/night\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000015:\n              //person/week \t\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000016:\n              //stock/week\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000017:\n              //person/day\n              cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000018:\n              //stock/day\n              cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal((daydiff + 1) * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal((daydiff + 1) * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000019:\n              //person/standard\n              cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000020:\n              //stock/standard\n              cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, calrebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            default:\n              ShowMessage.Info("false", true, "", "");\n              break;\n          }\n        } else {\n          switch (int.Parse(uomsel)) {\n            case 1000003:\n              //flat rate\n              cal = aprice;\n              cal1 = cg1price;\n              cal2 = cg2price;\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000004:\n              //per person\n              calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000005:\n              //per stock\n              calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000006:\n              //per night\n              calrebate = CalculateRebate(new Decimal(daydiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000007:\n              //per month \n              calrebate = CalculateRebate(new Decimal(monthact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(monthact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(monthact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(monthact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(monthact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000008:\n              //per week\n              calrebate = CalculateRebate(new Decimal(weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000009:\n              //per day\n              calrebate = CalculateRebate(new Decimal(daydiff + 1), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff + 1), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff + 1), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000010:\n              //per standard\n              calrebate = CalculateRebate(new Decimal(24 * daydiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(24 * daydiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(24 * daydiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(24 * daydiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000011:\n              //per minute\n              calrebate = CalculateRebate(new Decimal(mindiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(mindiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(mindiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(mindiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(mindiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000012:\n              //per second\n              calrebate = CalculateRebate(new Decimal(secdiff), aprice, arebate);\n              cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(secdiff), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(secdiff), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(secdiff), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(secdiff), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000013:\n              //person/night\n              calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000014:\n              //stock/night\n              calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000015:\n              //person/week  \n              calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000016:\n              //stock/week\n              calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000017:\n              //person/day\n              calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n              cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000018:\n              //stock/day\n              calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n              cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000019:\n              //person/standard\n              calrebate = CalculateRebate(new Decimal(24 * daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(24 * daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(24 * daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            case 1000020:\n              //stock/standard\n              calrebate = CalculateRebate(new Decimal(24 * daydiff * anumber), aprice, arebate);\n              cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n              cg1calrebate = CalculateRebate(new Decimal(24 * daydiff * cg1number), cg1price, arebate);\n              cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, cg1calrebate);\n              cg2calrebate = CalculateRebate(new Decimal(24 * daydiff * cg2number), cg2price, arebate);\n              cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, cg2calrebate);\n              mTab.setValue("ATOTAL_AMOUNT", cal);\n              mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n              mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n              grand_total = cal;\n              mTab.setValue("GRAND_TOTAL", grand_total);\n              break;\n            default:\n              ShowMessage.Info("false", true, "", "");\n              break;\n          }\n        }\n        if (anumber == 0)\n          //update code on 11-09-2009 by sandeep\n          {\n            mTab.setValue("ATOTAL_AMOUNT", 0);\n            mTab.setValue("GRAND_TOTAL", 0);\n          }\n        if (cg1number == 0) {\n          mTab.setValue("CG1TOTAL_AMOUNT", 0);\n        }\n        if (cg2number == 0) {\n          mTab.setValue("CG2TOTAL_AMOUNT", 0);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n      //e.getLocalizedMessage();\n    }\n    //\t\tsetCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /************************************************************************\r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   ************************************************************************/\n  /*****************************************************************************\r\n   *   if Adult UOM is selected the same will be displayed in child records\r\n   ****************************************************************************/\n  CalloutOfferServices.prototype.UOMSelected = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    //\t\tif (isCalloutActive())\n    //\t\t\treturn"";\n    //\t\tsetCalloutActive(true);\n    var cal, cal1, cal2;\n    var calrebate, cg1calrebate, cg2calrebate, grand_total;\n    var UOMsel = Util.getValueOfInt(value);\n    UOMsel = Util.getValueOfInt(mTab.getValue("AUOM_ID"));\n    if (UOMsel == null) return "";\n    mTab.setValue("CG1UOM_ID", UOMsel);\n    mTab.setValue("CG2UOM_ID", UOMsel);\n    var uomsel = mTab.getValue("AUOM_ID").toString();\n    var aprice = Util.getValueOfDecimal(mTab.getValue("APRICE"));\n    var anumber = Util.getValueOfInt(mTab.getValue("ANUM"));\n    var arebate = Util.getValueOfDecimal(mTab.getValue("AREBATE"));\n    var cg1number = Util.getValueOfInt(mTab.getValue("CG1NUM"));\n    var cg2number = Util.getValueOfInt(mTab.getValue("CG2NUM"));\n    var cg1price = Util.getValueOfDecimal(mTab.getValue("CG1PRICE"));\n    var cg2price = Util.getValueOfDecimal(mTab.getValue("CG2PRICE"));\n    var atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n    //var miltodate = atoDate.GetTime();\n\n    var afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n    //var milfromdate = afromDate.GetTime();\n    var t3;\n    if (afromDate.compareTo(atoDate) > 0) {\n      t3 = afromDate.Subtract(atoDate);\n    } else {\n      t3 = atoDate.Subtract(afromDate);\n    }\n    var daydiff = Utility.timeUtil.getDaysBetween(afromDate, atoDate);\n    //var daydiff = t3.Days;\n\n    //var mildiff = miltodate - milfromdate;\n    //var secdiff = mildiff / 1000;\n    //var mindiff = secdiff / 60;\n\n    var mildiff = t3.Milliseconds;\n    var secdiff = t3.Seconds;\n    var mindiff = t3.Minutes;\n    var monthact;\n    var weekact;\n    var monthquo = daydiff / 30;\n    var monthrem = daydiff % 30;\n    var weekquo = daydiff / 7;\n    var weekrem = daydiff % 7;\n    if (monthrem == 0) {\n      monthact = monthquo;\n    } else {\n      monthact = monthquo + 1;\n    }\n    if (weekrem == 0) {\n      weekact = weekquo;\n    } else {\n      weekact = weekquo + 1;\n    }\n    if (Util.getValueOfInt(arebate) == 0) {\n      calrebate = VIS.Env.ZERO;\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          cal1 = cg1price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          // per month\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          cal = CalculatePrice(new Decimal(24 * daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week \t\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal((daydiff + 1) * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal((daydiff + 1) * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          ShowMessage.Info("false", true, "", "");\n          break;\n      }\n    } else {\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          calrebate = CalculateRebate(new Decimal(daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          //per month \n          calrebate = CalculateRebate(new Decimal(monthact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(monthact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(monthact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          calrebate = CalculateRebate(new Decimal(weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          calrebate = CalculateRebate(new Decimal(daydiff + 1), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff + 1), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff + 1), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          calrebate = CalculateRebate(new Decimal(24 * daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(24 * daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(24 * daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(24 * daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          calrebate = CalculateRebate(new Decimal(mindiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(mindiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(mindiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          calrebate = CalculateRebate(new Decimal(secdiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(secdiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(secdiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week  \n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          calrebate = CalculateRebate(new Decimal(24 * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(24 * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(24 * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          calrebate = CalculateRebate(new Decimal(24 * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(24 * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(24 * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          ShowMessage.Info("false", true, "", "");\n          break;\n      }\n    }\n    if (anumber == 0)\n      //update code on 11-09-2009 by sandeep\n      {\n        mTab.setValue("ATOTAL_AMOUNT", 0);\n        mTab.setValue("GRAND_TOTAL", 0);\n      }\n    if (cg1number == 0) {\n      mTab.setValue("CG1TOTAL_AMOUNT", 0);\n    }\n    if (cg2number == 0) {\n      mTab.setValue("CG2TOTAL_AMOUNT", 0);\n    }\n    //\t\tsetCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /************************************************************************\r\n   *\r\n   *  @param ctx      Context\r\n   *  @param windowNo current Window No\r\n   *  @param mTab     Model Tab\r\n   *  @param mField   Model Field\r\n   *  @param value    The new value\r\n   *  @return Error message or ""\r\n   ************************************************************************/\n  /*****************************************************************************\r\n   *   if Adult Number is selected then the calculation is done\r\n   ****************************************************************************/\n  CalloutOfferServices.prototype.AVALSelected = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var cal, cal1, cal2;\n    var calrebate, cg1calrebate, cg2calrebate, grand_total;\n    var uomsel = null;\n    try {\n      uomsel = mTab.getValue("AUOM_ID").toString();\n    } catch (err) {\n      this.setCalloutActive(false);\n      return "";\n    }\n    var aprice = Util.getValueOfDecimal(mTab.getValue("APRICE"));\n    var arebate = Util.getValueOfDecimal(mTab.getValue("AREBATE"));\n    var anumber = Util.getValueOfInt(mTab.getValue("ANUM"));\n    var atoDate = Util.getValueOfDateTime(mTab.getValue("ADATETO"));\n    var cg1number = Util.getValueOfInt(mTab.getValue("CG1NUM"));\n    var cg2number = Util.getValueOfInt(mTab.getValue("CG2NUM"));\n    var cg1price = Util.getValueOfDecimal(mTab.getValue("CG1PRICE"));\n    var cg2price = Util.getValueOfDecimal(mTab.getValue("CG2PRICE"));\n\n    //var miltodate = atoDate.GetTime();\n    var afromDate = Util.getValueOfDateTime(mTab.getValue("ADATEFROM"));\n    //var milfromdate = afromDate.GetTime();\n    var t4 = afromDate.Subtract(atoDate);\n    var daydiff = Utility.TimeUtil.getDaysBetween(afromDate, atoDate);\n    //var daydiff = t4.Days;\n\n    //var mildiff = miltodate - milfromdate;\n    //var secdiff = mildiff / 1000;\n    //var mindiff = secdiff / 60;\n\n    var mildiff = t4.Milliseconds;\n    var secdiff = t4.Seconds;\n    var mindiff = t4.Minutes;\n    var monthact;\n    var weekact;\n    var monthquo = daydiff / 30;\n    var monthrem = daydiff % 30;\n    var weekquo = daydiff / 7;\n    var weekrem = daydiff % 7;\n    if (monthrem == 0) {\n      monthact = monthquo;\n    } else {\n      monthact = monthquo + 1;\n    }\n    if (weekrem == 0) {\n      weekact = weekquo;\n    } else {\n      weekact = weekquo + 1;\n    }\n    if (Util.getValueOfInt(arebate) == 0) {\n      calrebate = VIS.Env.ZERO;\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          cal1 = cg1price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          // per month\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          cal = CalculatePrice(new Decimal(24 * daydiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week \t\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal((daydiff + 1) * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal((daydiff + 1) * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, calrebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          ShowMessage.Info("false", true, "", "");\n          break;\n      }\n    } else {\n      switch (int.Parse(uomsel)) {\n        case 1000003:\n          //flat rate\n          cal = aprice;\n          cal1 = cg1price;\n          cal2 = cg2price;\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000004:\n          //per person\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000005:\n          //per stock\n          calrebate = CalculateRebate(new Decimal(anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000006:\n          //per night\n          calrebate = CalculateRebate(new Decimal(daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000007:\n          //per month \n          calrebate = CalculateRebate(new Decimal(monthact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(monthact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(monthact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(monthact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(monthact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(monthact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000008:\n          //per week\n          calrebate = CalculateRebate(new Decimal(weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000009:\n          //per day\n          calrebate = CalculateRebate(new Decimal(daydiff + 1), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff + 1), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff + 1), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff + 1), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff + 1), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff + 1), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000010:\n          //per standard\n          calrebate = CalculateRebate(new Decimal(24 * daydiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(24 * daydiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(24 * daydiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(24 * daydiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000011:\n          //per minute\n          calrebate = CalculateRebate(new Decimal(mindiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(mindiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(mindiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(mindiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(mindiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(mindiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000012:\n          //per second\n          calrebate = CalculateRebate(new Decimal(secdiff), aprice, arebate);\n          cal = CalculatePrice(new Decimal(secdiff), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(secdiff), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(secdiff), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(secdiff), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(secdiff), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000013:\n          //person/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000014:\n          //stock/night\n          calrebate = CalculateRebate(new Decimal(daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000015:\n          //person/week  \n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000016:\n          //stock/week\n          calrebate = CalculateRebate(new Decimal(anumber * weekact), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * weekact), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * weekact), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * weekact), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * weekact), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * weekact), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000017:\n          //person/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal(anumber * (daydiff + 1)), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000018:\n          //stock/day\n          calrebate = CalculateRebate(new Decimal(anumber * (daydiff + 1)), aprice, arebate);\n          cal = CalculatePrice(new Decimal((daydiff + 1) * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(cg1number * (daydiff + 1)), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(cg1number * (daydiff + 1)), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(cg2number * (daydiff + 1)), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(cg2number * (daydiff + 1)), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000019:\n          //person/standard\n          calrebate = CalculateRebate(new Decimal(24 * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(24 * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(24 * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = Decimal.Add(Decimal.Add(cal, cal1), cal2);\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        case 1000020:\n          //stock/standard\n          calrebate = CalculateRebate(new Decimal(24 * daydiff * anumber), aprice, arebate);\n          cal = CalculatePrice(new Decimal(24 * daydiff * anumber), aprice, calrebate);\n          cg1calrebate = CalculateRebate(new Decimal(24 * daydiff * cg1number), cg1price, arebate);\n          cal1 = CalculatePrice(new Decimal(24 * daydiff * cg1number), cg1price, cg1calrebate);\n          cg2calrebate = CalculateRebate(new Decimal(24 * daydiff * cg2number), cg2price, arebate);\n          cal2 = CalculatePrice(new Decimal(24 * daydiff * cg2number), cg2price, cg2calrebate);\n          mTab.setValue("ATOTAL_AMOUNT", cal);\n          mTab.setValue("CG1TOTAL_AMOUNT", cal1);\n          mTab.setValue("CG2TOTAL_AMOUNT", cal2);\n          grand_total = cal;\n          mTab.setValue("GRAND_TOTAL", grand_total);\n          break;\n        default:\n          ShowMessage.Info("false", true, "", "");\n          break;\n      }\n    }\n    if (anumber == 0)\n      //update code on 11-09-2009 by sandeep\n      {\n        mTab.setValue("ATOTAL_AMOUNT", 0);\n        mTab.setValue("GRAND_TOTAL", 0);\n      }\n    if (cg1number == 0) {\n      mTab.setValue("CG1TOTAL_AMOUNT", 0);\n    }\n    if (cg2number == 0) {\n      mTab.setValue("CG2TOTAL_AMOUNT", 0);\n    }\n    //\t\t\t\t\t\tsetCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutOfferServices = CalloutOfferServices;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutofferservices.js?\n}')},"./Areas/VAS/Scripts/model/calloutorderline.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  var steps = false;\n  var countEd011 = 0;\n\n  //*************CalloutOrderLine Start**************\n  function CalloutOrderLine() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutOrderLine"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutOrderLine, VIS.CalloutEngine); //inherit CalloutEngine\n\n  CalloutOrderLine.prototype.EndDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    if (value == null || value.toString() == "") {\n      return ""; //Must sir but it was not the case\n    }\n    var SDate = new Date(mTab.getValue("StartDate"));\n    //var frequency = Util.getValueOfInt(mTab.getValue("C_Frequency_ID"));\n    //var Sql = "Select NoOfDays from C_Frequency where C_Frequency_ID=" + frequency; //By Sarab\n    //var Sql = "Select NoOfMonths from C_Frequency where C_Frequency_ID=" + frequency;\n    //var days = Util.getValueOfInt(VIS.DB.executeScalar(Sql, null, null));\n\n    var months = VIS.dataContext.getJSONRecord("MOrderLine/GetNoOfMonths", Util.getValueOfString(mTab.getValue("C_Frequency_ID")));\n    var invoice = Util.getValueOfInt(mTab.getValue("NoofCycle"));\n    //var End = SDate.addDays(days * invoice);     //By sarab \n    //var End = SDate.setMonth(SDate.getMonth() + (days * invoice));        // By Karan\n    var End = SDate.getDate() + "/" + (SDate.getMonth() + months * invoice) + "/" + SDate.getFullYear();\n    if (End <= 0) {\n      End = new Date();\n    } else {\n      End = new Date(End);\n    }\n    End = End.toISOString();\n    mTab.setValue("EndDate", End);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutOrderLine.prototype.Qty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var Cycles = Util.getValueOfDecimal(value);\n    var cyclesCount = Util.getValueOfDecimal(mTab.getValue("QtyPerCycle"));\n    var qty = Cycles * cyclesCount;\n    mTab.setValue("QtyEntered", qty);\n    mTab.setValue("QtyOrdered", qty);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutOrderLine.prototype.QtyPerCycle = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var cyclesCount = Util.getValueOfDecimal(value);\n    var Cycles = Util.getValueOfDecimal(mTab.getValue("NoofCycle"));\n    var qty = Cycles * cyclesCount;\n    mTab.setValue("QtyEntered", qty);\n    mTab.setValue("QtyOrdered", qty);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutOrderLine = CalloutOrderLine;\n  //**************CalloutOrderLine End*****************\n\n  //***********CalloutOrderlineRecording Start********\n  function CalloutOrderlineRecording() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutOrderlineRecording"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutOrderlineRecording, VIS.CalloutEngine); //inherit CalloutEngine\n\n  CalloutOrderlineRecording.prototype.Orderline = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      var paramString = Util.getValueOfInt(value);\n      var dr = VIS.dataContext.getJSONRecord("MOrderLine/GetOrderLine", paramString);\n\n      //X_C_OrderLine ol = new X_C_OrderLine(Env.GetCtx(), Util.getValueOfInt(value), null);\n      mTab.setValue("M_Product_ID", dr["M_Product_ID"]);\n      mTab.setValue("Qty", dr["Qty"]);\n      mTab.setValue("C_UOM_ID", dr["C_UOM_ID"]);\n      mTab.setValue("C_BPartner_ID", dr["C_BPartner_ID"]);\n      mTab.setValue("PlannedHours", dr["PlannedHours"]);\n      this.setCalloutActive(false);\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutOrderlineRecording = CalloutOrderlineRecording;\n  //***********CalloutOrderlineRecording End********\n\n  //VIS430:Set Product,Charge,Uom and Attribute set Instance when select contract line id\n  //***********CalloutContractLineStart********\n  function CalloutContractLine() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutContractLine"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutContractLine, VIS.CalloutEngine); //inherit CalloutEngine\n\n  CalloutContractLine.prototype.Contractlines = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      var paramString = Util.getValueOfInt(value);\n      var cl = VIS.dataContext.getJSONRecord("MVASContract/GetContractData", paramString);\n      if (cl != null) {\n        if (Util.getValueOfInt(cl.M_Product) > 0) {\n          mTab.setValue("M_Product_ID", Util.getValueOfInt(cl.M_Product));\n          mTab.setValue("C_Charge_ID", null); //VIS430:When contract line change then set charge, Product and Attribute set instance null\n        }\n        if (Util.getValueOfInt(cl.C_Charge) > 0) {\n          mTab.setValue("C_Charge_ID", Util.getValueOfInt(cl.C_Charge));\n          mTab.setValue("M_Product_ID", null);\n        }\n        mTab.setValue("M_AttributeSetInstance_ID", cl["M_AttributeSetInstance"]);\n        mTab.setValue("C_UOM_ID", cl["C_UOM"]);\n        mTab.setValue("QtyEntered", 1);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutContractLine = CalloutContractLine;\n  //***********CalloutContractLine End********\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutorderline.js?\n}')},"./Areas/VAS/Scripts/model/calloutpayment.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n\n  //*********** CalloutPayment Start ****\n  function CalloutPayment() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutPayment"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutPayment, VIS.CalloutEngine); //inherit CalloutEngine\n\n  /**\r\n   * This function is used to set the Business Partner Detail on Payment Screen\r\n   * VIS_045 -> 28/Oct/2024\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutPayment.prototype.BPartner = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      // Get Document ID\n      var C_DocType_ID = Util.getValueOfString(mTab.getValue("C_DocType_ID"));\n\n      // Business Partner ID, Document Type ID\n      var paramString = value.toString() + "," + C_DocType_ID;\n\n      // Get BP Details\n      dr = VIS.dataContext.getJSONRecord("MPayment/GetBPartnerDetail", paramString);\n      if (dr != null) {\n        // BP Location\n        mTab.setValue("C_BPartner_Location_ID", Util.getValueOfInt(dr["C_BPartner_Location_ID"]));\n        if (dr["IsVA009ModuleInstall"]) {\n          /* Payment Method / Tender Type*/\n          if (Util.getValueOfString(dr["IsSOTrx"]).equals("Y")) {\n            mTab.setValue("VA009_PaymentMethod_ID", Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]));\n            mTab.setValue("TenderType", Util.getValueOfString(dr["VA009_PaymentBaseType"]));\n          } else if (Util.getValueOfString(dr["IsSOTrx"]).equals("N")) {\n            mTab.setValue("VA009_PaymentMethod_ID", Util.getValueOfInt(dr["VA009_PO_PaymentMethod_ID"]));\n            mTab.setValue("TenderType", Util.getValueOfString(dr["PO_PaymentBaseType"]));\n          } else {\n            if (Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]) > 0) {\n              mTab.setValue("VA009_PaymentMethod_ID", Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]));\n              mTab.setValue("TenderType", Util.getValueOfString(dr["VA009_PaymentBaseType"]));\n            } else if (Util.getValueOfInt(dr["VA009_PO_PaymentMethod_ID"]) > 0) {\n              mTab.setValue("VA009_PaymentMethod_ID", Util.getValueOfInt(dr["VA009_PO_PaymentMethod_ID"]));\n              mTab.setValue("TenderType", Util.getValueOfString(dr["PO_PaymentBaseType"]));\n            }\n          }\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, "CalloutPayment.BPartner -" + value, err.message);\n      return err.toString();\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Payment_Invoice.\n  /// when Invoice selected\n  /// - set C_Currency_ID \n  /// - C_BPartner_ID\n  /// - DiscountAmt = C_Invoice_Discount (ID, DateTrx)\n  /// - PayAmt = invoiceOpen (ID) - Discount\n  /// - WriteOffAmt = 0\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns> null or error message</returns>\n  CalloutPayment.prototype.Invoice = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    /*VIS_427 Set value of VAS_IsDiscountApplied false when user change invoice*/\n    mTab.setValue("VAS_IsDiscountApplied", false);\n    if (value == null || value.toString() == "") {\n      /*VIS_427 Clear references and amounts when we clear invoice*/\n      if (mField.getColumnName() == "C_Invoice_ID") {\n        this.setCalloutActive(true);\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n        mTab.setValue("PaymentAmount", VIS.Env.ZERO);\n        mTab.setValue("PayAmt", VIS.Env.ZERO);\n        mTab.setValue("DiscountAmt", VIS.Env.ZERO);\n        mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\n        mTab.setValue("OverUnderAmt", VIS.Env.ZERO);\n        this.setCalloutActive(false);\n      }\n      return "";\n    }\n    var C_Invoice_ID = Util.getValueOfInt(value.toString()); //(int)value;\n    if (this.isCalloutActive() //\tassuming it is resetting value\n    || C_Invoice_ID == null || C_Invoice_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    mTab.setValue("C_Order_ID", null);\n    mTab.setValue("C_Charge_ID", null);\n    mTab.setValue("IsPrepayment", false); //Boolean.FALSE);\n    //\n    mTab.setValue("DiscountAmt", VIS.Env.ZERO);\n    mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\n    mTab.setValue("IsOverUnderPayment", false); //Boolean.FALSE);\n    mTab.setValue("OverUnderAmt", VIS.Env.ZERO);\n    var C_InvoicePaySchedule_ID = 0;\n    var IsReturnTrx = "";\n    //Added by Bharat\n    var invoiceDiscrepancy = false;\n    var payDiscrepancy = mTab.getField("IsInDispute") != null;\n\n    //------------14-11-2014---------\n    //Pratap changes 7-8-14/////\n    var dueAmount = 0;\n    var _chk = 0;\n\n    // Added by Bharat on 02 June 2017 to remove client side queries\n\n    var drAmt = null;\n    try {\n      drAmt = VIS.dataContext.getJSONRecord("MInvoice/GetInvPaySchedDetail", C_Invoice_ID.toString());\n      if (drAmt != null) {\n        C_InvoicePaySchedule_ID = Util.getValueOfInt(drAmt["C_InvoicePaySchedule_ID"]);\n        dueAmount = Util.getValueOfDecimal(drAmt["dueAmount"]);\n        IsReturnTrx = Util.getValueOfString(drAmt["IsReturnTrx"]);\n        if ("Y" == IsReturnTrx) {\n          dueAmount = dueAmount * -1;\n        }\n        mTab.setValue("C_InvoicePaySchedule_ID", C_InvoicePaySchedule_ID);\n        mTab.setValue("PayAmt", dueAmount);\n        mTab.setValue("PaymentAmount", dueAmount);\n        _chk = 1;\n        var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA009_");\n        if (DataPrefix["VA009_"]) {\n          if (Util.getValueOfString(drAmt["VA009_PaymentBaseType"]) != "B" && Util.getValueOfString(drAmt["VA009_PaymentBaseType"]) != "C" && Util.getValueOfString(drAmt["VA009_PaymentBaseType"]) != "P") {\n            mTab.setValue("VA009_PaymentMethod_ID", Util.getValueOfInt(drAmt["VA009_PaymentMethod_ID"]));\n          } else mTab.setValue("VA009_PaymentMethod_ID", null);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, "CalloutPayment.Invoice -" + C_Invoice_ID, err.message);\n      return err.toString();\n    }\n    // Bharat\n\n    //var _sqlAmt = "SELECT * FROM   (SELECT ips.C_InvoicePaySchedule_ID, "\n    //+ " ips.DueAmt  FROM C_Invoice i  INNER JOIN C_InvoicePaySchedule ips "\n    //+ " ON (i.C_Invoice_ID        =ips.C_Invoice_ID)  WHERE i.IsPayScheduleValid=\'Y\' "\n    //+ " AND ips.IsValid           =\'Y\'  AND ips.isactive          =\'Y\' "\n    //+ " AND i.C_Invoice_ID    = " + C_Invoice_ID\n    //+ "  AND ips.C_InvoicePaySchedule_ID NOT IN"\n    //+ "(SELECT NVL(C_InvoicePaySchedule_ID,0) FROM C_InvoicePaySchedule WHERE c_payment_id IN"\n    //+ "(SELECT NVL(c_payment_id,0) FROM C_InvoicePaySchedule) union "\n    //+ " SELECT NVL(C_InvoicePaySchedule_id,0) FROM C_InvoicePaySchedule  WHERE c_cashline_id IN"\n    //+ "(SELECT NVL(c_cashline_id,0) FROM C_InvoicePaySchedule )) "\n    //+ " ORDER BY ips.duedate ASC  ) WHERE rownum=1";\n    //var drAmt = null;\n    //try {\n    //    drAmt = VIS.DB.executeReader(_sqlAmt, null, null);\n    //    if (drAmt.read()) {\n    //        C_InvoicePaySchedule_ID = Util.getValueOfInt(drAmt.get("c_invoicepayschedule_id"));\n    //        dueAmount = Util.getValueOfDecimal(drAmt.get("dueamt"));\n    //        mTab.setValue("C_InvoicePaySchedule_ID", C_InvoicePaySchedule_ID);\n    //        mTab.setValue("PayAmt", dueAmount);\n    //        _chk = 1;\n    //    }\n    //    drAmt.close();\n    //}\n    //catch (err) {\n    //    if (drAmt != null) {\n    //        drAmt.close();\n    //    }\n    //    this.log.log(Level.SEVERE, _sqlAmt, e);\n    //    return err.toString();\n    //}\n    //-------------------------------\n    // Added by mohit- Letter of Credit fectch on selection opf invoice\n    //var _VA026 = 0;\n    //$.ajax({\n    //    url: VIS.Application.contextUrl + \'Payment/GetModuleCount\',\n    //    type: \'Get\',\n    //    //async: false,\n    //    data: {\n    //        prefix:"VA026_"\n    //    },\n    //    success: function (data) {\n    //        try\n    //        {\n    //            _VA026 = jQuery.parseJSON(data);\n\n    //            if (_VA026) {\n\n    //                GetLetterOfCredit();\n    //            }\n    //        }\n    //        catch (err) {                   \n    //            this.log.log(Level.SEVERE, \'Payment\', e);\n    //            return err.toString();\n    //        }\n    //    },\n    //    error: function (data) {\n\n    //    },\n    //});\n\n    //function GetLetterOfCredit() {\n    //    $.ajax({\n    //        url: VIS.Application.contextUrl + \'Payment/GetLCNo\',\n    //        type: \'Get\',\n    //        //async: false,\n    //        data: {\n    //            Invoice_ID: value\n    //        },\n    //        success: function (data) {\n    //            if (data != null) {\n    //                var LcData = jQuery.parseJSON(data);\n    //                mTab.setValue("VA009_PaymentMethod_ID", Util.getValueOfInt(LcData.paymethod));\n    //                if (Util.getValueOfInt(LcData.lcno) > 0) {\n    //                    mTab.setValue("TenderType", "L");\n    //                    mTab.setValue("VA026_LCDetail_ID", Util.getValueOfInt(LcData.lcno));\n    //                    mTab.setValue("VA026_TRLoanApplication_ID", Util.getValueOfInt(LcData.trloan_id));\n    //                }\n    //            }\n\n    //        },\n    //        error: function (data) {\n\n    //        },\n    //    });\n    //};\n\n    //-----End change by mohit-------------------------------------\n\n    if (ctx.getContextAsInt(windowNo, "C_Invoice_ID") == C_Invoice_ID && ctx.getContextAsInt(windowNo, "C_InvoicePaySchedule_ID") != 0) {\n      C_InvoicePaySchedule_ID = ctx.getContextAsInt(windowNo, "C_InvoicePaySchedule_ID");\n    }\n\n    //  Payment Date\n    var ts = mTab.getValue("DateTrx");\n    var tsDate;\n    if (ts == null) {\n      ts = new Date();\n    }\n\n    // Added by Bharat on 02 June 2017 to remove client side queries\n    var paramString = C_Invoice_ID.toString() + "," + C_InvoicePaySchedule_ID.toString() + "," + Globalize.format(Util.getValueOfDate(ts), "yyyy-MM-dd").toString();\n    var dr = null;\n    try {\n      dr = VIS.dataContext.getJSONRecord("MPayment/GetInvoiceData", paramString);\n      if (dr != null) {\n        mTab.setValue("C_BPartner_ID", Util.getValueOfInt(dr["C_BPartner_ID"])); //.getInt(1)));\n        mTab.setValue("C_Bpartner_Location_Id", Util.getValueOfInt(dr["C_Bpartner_Location_Id"]));\n        var C_Currency_ID = Util.getValueOfInt(dr["C_Currency_ID"]); //\tSet Invoice Currency\n        mTab.setValue("C_Currency_ID", C_Currency_ID);\n\n        // JID_1208: System should set Currency Type that is defined on Invoice.\n        mTab.setValue("C_ConversionType_ID", dr["C_ConversionType_ID"]);\n        var invoiceOpen = Util.getValueOfDecimal(dr["invoiceOpen"]); //\tSet Invoice Open Amount\n        if (invoiceOpen == null) {\n          invoiceOpen = VIS.Env.ZERO;\n        }\n        var discountAmt = Util.getValueOfDecimal(dr["invoiceDiscount"]); //\tSet Discount Amt\n        if (discountAmt == null) {\n          discountAmt = VIS.Env.ZERO;\n        }\n        //VIS_427 negate the value if Return trx check box true\n        if (dr["IsReturnTrx"] == "Y") {\n          if (invoiceOpen > 0) {\n            invoiceOpen = invoiceOpen * -1;\n          }\n          if (discountAmt > 0) {\n            discountAmt = discountAmt * -1;\n          }\n        }\n        /*VIS_427 Bug id 5620 identified and commented as their is no need of this check  \r\n         as we need to set payment amount after subtracting it from pay amount*/\n        //if (_chk == 0)//Pratap\n        //{\n        mTab.setValue("PayAmt", invoiceOpen - discountAmt);\n        mTab.setValue("PaymentAmount", invoiceOpen - discountAmt);\n        //}\n        mTab.setValue("C_InvoicePaySchedule_ID", C_InvoicePaySchedule_ID); //Pratap\n        mTab.setValue("DiscountAmt", discountAmt);\n        //  reset as dependent fields get reset\n        ctx.setContext(windowNo, "C_Invoice_ID", C_Invoice_ID.toString());\n\n        //Added by Bharat to Set Discrepancy from Invoice\n        invoiceDiscrepancy = Util.getValueOfString(dr["IsInDispute"]) == "Y";\n        if (payDiscrepancy) {\n          if (invoiceDiscrepancy) {\n            mTab.setValue("IsInDispute", true);\n            VIS.ADialog.info("DiscrepancyInvoice");\n          } else {\n            mTab.setValue("IsInDispute", false);\n          }\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    // ctx = mTab = mField = value = oldValue = null;\n    return this.DocType(ctx, windowNo, mTab, mField, value);\n  };\n  /// <summary>\n  /// Payment_Order.\n  /// when Waiting Payment Order selected\n  /// - set C_Currency_ID\n  /// - C_BPartner_ID\n  /// - DiscountAmt = C_Invoice_Discount (ID, DateTrx)\n  /// - PayAmt = invoiceOpen (ID) - Discount\n  /// - WriteOffAmt = 0\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField"> Grid Field</param>\n  /// <param name="value"> New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutPayment.prototype.Order = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var C_Order_ID = value;\n    if (this.isCalloutActive() //\tassuming it is resetting value\n    || C_Order_ID == null || C_Order_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    mTab.setValue("C_Invoice_ID", null);\n    mTab.setValue("C_Charge_ID", null);\n    mTab.setValue("IsPrepayment", true); // Boolean.TRUE);\n    //\n    mTab.setValue("DiscountAmt", VIS.Env.ZERO);\n    mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\n    mTab.setValue("IsOverUnderPayment", false); // Boolean.FALSE);\n    mTab.setValue("OverUnderAmt", VIS.Env.ZERO);\n\n    //  Payment Date\n    var ts = mTab.getValue("DateTrx");\n    if (ts == null) {\n      ts = new Date();\n    }\n    //JID_1536_4 - set conversion Type on order selection\n    var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA009_");\n    var paramString = DataPrefix["VA009_"] + "," + C_Order_ID.toString();\n    var dr = null;\n    try {\n      dr = VIS.dataContext.getJSONRecord("MPayment/GetOrderData", paramString);\n      if (dr != null) {\n        mTab.setValue("C_BPartner_ID", Util.getValueOfInt(dr["C_BPartner_ID"]));\n        mTab.setValue("C_Bpartner_Location_Id", Util.getValueOfInt(dr["C_BPartner_Location_ID"]));\n        mTab.setValue("C_Currency_ID", Util.getValueOfInt(dr["C_Currency_ID"]));\n        mTab.setValue("C_ConversionType_ID", Util.getValueOfInt(dr["C_ConversionType_ID"]));\n        //\n        var grandTotal = Util.getValueOfDecimal(dr["GrandTotal"]);\n        if (grandTotal == null) {\n          grandTotal = VIS.Env.ZERO;\n        }\n        if (DataPrefix["VA009_"]) {\n          var PaymentMethod = Util.getValueOfInt(dr["VA009_PaymentMethod_ID"]);\n          mTab.setValue("VA009_PaymentMethod_ID", PaymentMethod);\n        }\n        mTab.setValue("PaymentAmount", grandTotal);\n        mTab.setValue("PayAmt", grandTotal);\n        //if Payment for PrepayOrder then set PaymentAmount as ReadOnly\n        //other than prepayOrder set as ReadOnly false\n        if (dr["IsPrePayOrder"] == true) {\n          mTab.getField("PaymentAmount").setReadOnly(true);\n        } else {\n          mTab.getField("PaymentAmount").setReadOnly(false);\n        }\n      }\n    } catch (err) {\n      if (dr != null) {\n        dr = null;\n      }\n      this.log.log(Level.SEVERE, sql, err);\n      this.setCalloutActive(false);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    //ctx = mTab = mField = value = oldValue = null;\n    return this.DocType(ctx, windowNo, mTab, mField, value);\n  };\n  /// <summary>\n  /// Payment_Charge.\n  /// - reset - C_BPartner_ID, Invoice, Order, Project,\n  /// Discount, WriteOff\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutPayment.prototype.Charge = function (ctx, windowNo, mTab, mField, value) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n      // removed by dead control flow\n var C_Charge_ID; \n      // removed by dead control flow\n\n      // removed by dead control flow\n\n      // removed by dead control flow\n\n      // removed by dead control flow\n\n      //\t mTab.setValue("C_Project_ID", null);\n      // removed by dead control flow\n // Boolean.FALSE);\n      //\n      // removed by dead control flow\n\n      // removed by dead control flow\n\n      // removed by dead control flow\n // Boolean.FALSE);\n      // removed by dead control flow\n\n      // removed by dead control flow\n\n      // removed by dead control flow\n\n      // removed by dead control flow\n\n    }\n  };\n  /// <summary>\n  /// Payment_Document Type.\n  /// Verify that Document Type (AP/AR) and Invoice (SO/PO) are in sync\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns\n  CalloutPayment.prototype.DocType = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var C_Invoice_ID = ctx.getContextAsInt(windowNo, "C_Invoice_ID");\n    var C_Order_ID = ctx.getContextAsInt(windowNo, "C_Order_ID");\n    var C_DocType_ID = ctx.getContextAsInt(windowNo, "C_DocType_ID");\n    this.log.fine("Payment_DocType - C_Invoice_ID=" + C_Invoice_ID + ", C_DocType_ID=" + C_DocType_ID);\n    var paramString = C_DocType_ID.toString();\n    var dt = VIS.dataContext.getJSONRecord("MDocType/GetDocType", paramString);\n    var isSOTrx = Util.getValueOfBoolean(dt["IsSOTrx"]);\n    if (C_DocType_ID != 0) {\n      // dt = MDocType.Get(ctx, C_DocType_ID);\n\n      // ctx.setIsSOTrx(windowNo, dt["IsSOTrx"]);\n      // Change by mohit to set the Sales transaction value in window context according to the selection of document type on payment window- asked by Mukesh Sir- 3 April 2019.\n      ctx.setWindowContext(windowNo, "IsSOTrx", isSOTrx ? "Y" : "N");\n      //ctx.setContext("IsSOTrx", isSOTrx ? "Y" : "N");\n      mTab.setValue("IsReceipt", isSOTrx ? "Y" : "N");\n    }\n    //\tInvoice//\tInvoice\n    if (C_Invoice_ID != 0) {\n      paramString = C_Invoice_ID.toString();\n      var inv = VIS.dataContext.getJSONRecord("MInvoice/GetInvoice", paramString);\n      //  MInvoice inv = new MInvoice(ctx, C_Invoice_ID, null);\n      if (dt != null) {\n        if (Util.getValueOfBoolean(inv["IsSOTrx"]) != isSOTrx) {\n          return VIS.Msg.getMsg("DocTypeInvInconsistent");\n        }\n      }\n    }\n    //\tOrder\n    if (C_Order_ID != 0) {\n      // Edited by Vivek assigned by Mukesh sir on 05/10/2017\n      paramString = C_Order_ID.toString();\n      var Ord = VIS.dataContext.getJSONRecord("MOrder/GetOrder", paramString);\n      //  MInvoice inv = new MInvoice(ctx, C_Invoice_ID, null);\n      if (dt != null) {\n        if (Util.getValueOfBoolean(Ord["IsSOTrx"]) != isSOTrx) {\n          return VIS.Msg.getMsg("DocTypeOrdInconsistent");\n        }\n      }\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  // Manish 22/2/2017 Get all amount with currency wise.\n\n  CalloutPayment.prototype.AmountCurrencyType = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      mTab.setValue("OutStandingAmount", "");\n      return "";\n    }\n    this.setCalloutActive(true);\n    var amounts = "";\n    var bp_BusinessPartner = mTab.getValue("C_BPartner_ID");\n    var asOnDate = mTab.getValue("AsOnDate");\n    if (asOnDate == "" || asOnDate == null || bp_BusinessPartner == "" || bp_BusinessPartner == null) {\n      mTab.setValue("OutStandingAmount", amounts);\n      this.setCalloutActive(false);\n      return "";\n    }\n    var paramString = "N," + bp_BusinessPartner.toString() + "," + asOnDate.toString();\n    try {\n      amounts = VIS.dataContext.getJSONRecord("MPayment/GetOutStandingAmt", paramString); //in difference currency\n      mTab.setValue("OutStandingAmount", amounts);\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n\n  /// <summary>\n  /// Payment_Amounts.\n  /// Change of:\n  /// - IsOverUnderPayment -> set OverUnderAmt to 0\n  /// - C_Currency_ID, C_ConvesionRate_ID -> convert all\n  /// - PayAmt, DiscountAmt, WriteOffAmt, OverUnderAmt -> PayAmt\n  /// make sure that add up to InvoiceOpenAmt\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <param name="oldValue">Old Value</param>\n  /// <returns>null or error message</returns>\n  CalloutPayment.prototype.Amounts = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive())\n      //\tassuming it is resetting value\n      {\n        return "";\n      }\n    var C_Invoice_ID = ctx.getContextAsInt(windowNo, "C_Invoice_ID");\n    //\tNew Payment\n    if (ctx.getContextAsInt(windowNo, "C_Payment_ID") == 0 && ctx.getContextAsInt(windowNo, "C_BPartner_ID") == 0 && C_Invoice_ID == 0) {\n      return "";\n    }\n    var cur = mTab.getValue("C_Currency_ID");\n    if (cur == null) {\n      return "";\n    }\n    // added by Bharat as discussed with Vivek\n    if (C_Invoice_ID != 0) {\n      this.setCalloutActive(true);\n\n      //\tChanged Column\n      var colName = mField.getColumnName();\n      var C_InvoicePaySchedule_ID = 0;\n      if (ctx.getContextAsInt(windowNo, "C_Invoice_ID") == C_Invoice_ID && mTab.getValue("C_InvoicePaySchedule_ID") != null) {\n        C_InvoicePaySchedule_ID = mTab.getValue("C_InvoicePaySchedule_ID");\n      }\n      /*VIS_427 BugId 5620 when user change value of discount amount than set value of checkbox true\r\n       so that user can identify that value entered of discount field is from discountAmt field */\n      if (colName == "DiscountAmt") {\n        mTab.setValue("VAS_IsDiscountApplied", true);\n      }\n      //\tGet Open Amount & Invoice Currency\n      var invoiceOpenAmt = VIS.Env.ZERO;\n      var discountAmt = VIS.Env.ZERO;\n      var C_Currency_Invoice_ID = 0,\n        conversionType_Invioce_ID = 0;\n      var IsReturnTrx = "N";\n      var checkPrecision = true;\n      if (C_Invoice_ID != 0) {\n        var ts = mTab.getValue("DateTrx");\n        if (ts == null) {\n          //ts = DateTime.Now.Date; //new DateTime(CommonFunctions.CurrentTimeMillis());\n          ts = new Date();\n        }\n\n        // Added by Bharat on 18 May 2017 to remove client side queries\n        var paramString = C_Invoice_ID.toString() + "," + C_InvoicePaySchedule_ID.toString() + "," + Globalize.format(Util.getValueOfDate(ts), "yyyy-MM-dd").toString();\n        var dr = VIS.dataContext.getJSONRecord("MPayment/GetInvoiceData", paramString);\n        if (dr != null) {\n          C_Currency_Invoice_ID = Util.getValueOfInt(dr["C_Currency_ID"]);\n          conversionType_Invioce_ID = Util.getValueOfInt(dr["C_ConversionType_ID"]);\n          invoiceOpenAmt = Util.getValueOfDecimal(dr["invoiceOpen"]);\n          if (invoiceOpenAmt == null) {\n            invoiceOpenAmt = VIS.Env.ZERO;\n          }\n          discountAmt = Util.getValueOfDecimal(dr["invoiceDiscount"]);\n          IsReturnTrx = dr["IsReturnTrx"];\n        }\n        //var sql = "SELECT C_BPartner_ID,C_Currency_ID,"\t\t//\t1..2\n        //    + " invoiceOpen(C_Invoice_ID, @param1) as invoiceOpen,"\t\t\t\t\t//\t3\t\t#1\n        //    + " invoiceDiscount(C_Invoice_ID,@param2,@param3) as invoiceDiscount, IsSOTrx "\t//\t4..5\t#2/3\n        //    + "FROM C_Invoice WHERE C_Invoice_ID=@param4";\t\t\t//\t\t\t#4\n        //var dr = null;\n        ////SqlParameter[] param = new SqlParameter[4];\n        //var param = [];\n        //try {\n        //    param[0] = new CalloutDB.SqlParam("@param1", C_InvoicePaySchedule_ID);\n        //    param[1] = new CalloutDB.SqlParam("@param2", ts);\n        //    param[1].setIsDate(true);\n        //    param[2] = new CalloutDB.SqlParam("@param3", C_InvoicePaySchedule_ID);\n        //    param[3] = new CalloutDB.SqlParam("@param4", C_Invoice_ID);\n        //    dr = CalloutDB.executeCalloutReader(sql, param, null);\n\n        //    if (dr.read()) {\n        //        C_Currency_Invoice_ID = Util.getValueOfInt(dr.get("c_currency_id"));//.getInt(2);\n        //        invoiceOpenAmt = Util.getValueOfDecimal(dr.get("invoiceopen"));//.getBigDecimal(3);\t\t//\tSet Invoice Open Amount\n        //        if (invoiceOpenAmt == null) {\n        //            invoiceOpenAmt = VIS.Env.ZERO;\n        //        }\n        //        discountAmt = Util.getValueOfDecimal(dr.get("invoicediscount"));//.getBigDecimal(4);\n        //    }\n        //    dr.close();\n        //}\n        //catch (err) {\n        //    if (dr != null) {\n        //        dr.close();\n        //    }\n        //    this.log.log(Level.SEVERE, sql, err);\n        //    this.setCalloutActive(false);\n        //    return err.message;\n        //}\n      } //\tget Invoice Info\n\n      this.log.fine("Open=" + invoiceOpenAmt + " Discount= " + discountAmt + ", C_Invoice_ID=" + C_Invoice_ID + ", C_Currency_ID=" + C_Currency_Invoice_ID);\n\n      //\tGet Info from Tab\n      if (colName == "PaymentAmount") {\n        mTab.setValue("PayAmt", mTab.getValue("PaymentAmount"));\n      }\n      //VIS_427 BugId 5620 allowing to set discount amount if value of check box is false\n      if (!mTab.getValue("VAS_IsDiscountApplied")) {\n        mTab.setValue("DiscountAmt", discountAmt);\n      }\n      var payAmt = Util.getValueOfDecimal(mTab.getValue("PayAmt") == null ? VIS.Env.ZERO : mTab.getValue("PayAmt"));\n      var writeOffAmt = Util.getValueOfDecimal(mTab.getValue("WriteOffAmt") == null ? VIS.Env.ZERO : mTab.getValue("WriteOffAmt"));\n      var overUnderAmt = Util.getValueOfDecimal(mTab.getValue("OverUnderAmt") == null ? VIS.Env.ZERO : mTab.getValue("OverUnderAmt"));\n      var enteredDiscountAmt = Util.getValueOfDecimal(mTab.getValue("DiscountAmt") == null ? VIS.Env.ZERO : mTab.getValue("DiscountAmt"));\n      if (IsReturnTrx == "Y") {\n        if (payAmt > 0) {\n          payAmt = payAmt * -1;\n          mTab.setValue("PayAmt", payAmt);\n          mTab.setValue("PaymentAmount", payAmt);\n        } else {\n          mTab.setValue("PaymentAmount", payAmt);\n        }\n        if (enteredDiscountAmt > 0) {\n          enteredDiscountAmt = enteredDiscountAmt * -1;\n        }\n        if (discountAmt > 0) {\n          discountAmt = discountAmt * -1;\n        }\n        if (writeOffAmt > 0) {\n          writeOffAmt = writeOffAmt * -1;\n          mTab.setValue("WriteOffAmt", writeOffAmt);\n        }\n        if (overUnderAmt > 0) {\n          overUnderAmt = overUnderAmt * -1;\n          mTab.setValue("OverUnderAmt", overUnderAmt);\n        }\n        if (invoiceOpenAmt > 0) {\n          invoiceOpenAmt = invoiceOpenAmt * -1;\n        }\n      } else {\n        if (payAmt < 0) {\n          payAmt = payAmt * -1;\n          mTab.setValue("PayAmt", payAmt);\n          mTab.setValue("PaymentAmount", payAmt);\n        } else {\n          mTab.setValue("PaymentAmount", payAmt);\n        }\n        if (enteredDiscountAmt < 0) {\n          enteredDiscountAmt = enteredDiscountAmt * -1;\n        }\n        if (discountAmt < 0) {\n          discountAmt = discountAmt * -1;\n        }\n        if (writeOffAmt < 0) {\n          writeOffAmt = writeOffAmt * -1;\n          mTab.setValue("WriteOffAmt", writeOffAmt);\n        }\n        if (overUnderAmt < 0) {\n          overUnderAmt = overUnderAmt * -1;\n          mTab.setValue("OverUnderAmt", overUnderAmt);\n        }\n        if (invoiceOpenAmt < 0) {\n          invoiceOpenAmt = invoiceOpenAmt * -1;\n        }\n      }\n      this.log.fine("Pay=" + payAmt + ", Discount=" + enteredDiscountAmt + ", WriteOff=" + writeOffAmt + ", OverUnderAmt=" + overUnderAmt);\n      //\tGet Currency Info\n      var C_Currency_ID = Util.getValueOfInt(cur);\n      var paramString = C_Currency_ID.toString();\n      var currency = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", paramString);\n      var precision = currency["StdPrecision"];\n      //MCurrency currency = MCurrency.Get(ctx, C_Currency_ID);\n      var ConvDate = mTab.getValue("DateAcct");\n      var C_ConversionType_ID = 0;\n      var ii = Util.getValueOfInt(mTab.getValue("C_ConversionType_ID"));\n      if (ii != null) {\n        C_ConversionType_ID = ii;\n      }\n      var AD_Client_ID = ctx.getContextAsInt(windowNo, "AD_Client_ID");\n      var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n      //\tGet Currency Rate\n      var currencyRate = VIS.Env.ONE;\n      if (C_Currency_ID > 0 && C_Currency_Invoice_ID > 0 && C_Currency_ID != C_Currency_Invoice_ID || colName == "C_Currency_ID" || colName == "C_ConversionType_ID") {\n        this.log.fine("InvCurrency=" + C_Currency_Invoice_ID + ", PayCurrency=" + C_Currency_ID + ", Date=" + ConvDate + ", Type=" + C_ConversionType_ID);\n        var paramStr = C_Currency_Invoice_ID + "," + C_Currency_ID + "," + ConvDate + "," + C_ConversionType_ID + "," + AD_Client_ID + "," + AD_Org_ID;\n        currencyRate = VIS.dataContext.getJSONRecord("MConversionRate/GetRate", paramStr);\n\n        //currencyRate = MConversionRate.GetRate(C_Currency_Invoice_ID, C_Currency_ID,\n        //    ConvDate, C_ConversionType_ID, AD_Client_ID, AD_Org_ID);\n        if (currencyRate == null || currencyRate.toString() == 0) {\n          //\t mTab.setValue("C_Currency_ID", new int(C_Currency_Invoice_ID));\t//\tdoes not work\n          this.setCalloutActive(false);\n          if (C_Currency_Invoice_ID == 0) {\n            return ""; //\tno error message when no invoice is selected\n          }\n          mTab.setValue("C_Currency_ID", C_Currency_Invoice_ID);\n\n          // Set Invoice Currency and Currency Type if Currency Conversion not available\n          if (colName == "C_ConversionType_ID") {\n            if (conversionType_Invioce_ID == 0) {\n              return "";\n            }\n            mTab.setValue("C_ConversionType_ID", conversionType_Invioce_ID);\n          }\n          return "NoCurrencyConversion";\n        }\n        //\n        invoiceOpenAmt = Util.getValueOfDecimal((invoiceOpenAmt * currencyRate).toFixed(currency["StdPrecision"])); //, MidpointRounding.AwayFromZero);\n        /*VIS_427 Change enteredDiscount according to currency rate Either when user entered discount manually \r\n          and changed currecny or convertion type or not entered manually*/\n        if (enteredDiscountAmt != 0 && (mTab.getValue("VAS_IsDiscountApplied") && (colName == "C_Currency_ID" || colName == "C_ConversionType_ID") || !mTab.getValue("VAS_IsDiscountApplied"))) {\n          //discountAmt = enteredDiscountAmt;\n          enteredDiscountAmt = Util.getValueOfDecimal((enteredDiscountAmt * currencyRate).toFixed(currency["StdPrecision"]));\n        }\n        discountAmt = Util.getValueOfDecimal((discountAmt * currencyRate).toFixed(currency["StdPrecision"]));\n        //currency.GetStdPrecision());//, MidpointRounding.AwayFromZero);\n        this.log.fine("Rate=" + currencyRate + ", InvoiceOpenAmt=" + invoiceOpenAmt + ", DiscountAmt=" + discountAmt);\n      }\n\n      //\tCurrency Changed - convert all\n      if (colName == "C_Currency_ID" || colName == "C_ConversionType_ID") {\n        mTab.setValue("VAS_IsDiscountApplied", false);\n        //writeOffAmt = (writeOffAmt * currencyRate).toFixed(currency["StdPrecision"]);\n        writeOffAmt = 0;\n        //  currency.GetStdPrecision());//, MidpointRounding.AwayFromZero);\n        mTab.setValue("WriteOffAmt", writeOffAmt);\n        //overUnderAmt = (overUnderAmt * currencyRate).toFixed(currency["StdPrecision"]);\n        overUnderAmt = 0;\n        //currency.GetStdPrecision());//, MidpointRounding.AwayFromZero);\n        mTab.setValue("OverUnderAmt", overUnderAmt);\n\n        // nnayak - Entered Discount amount should be converted to entered currency \n        //enteredDiscountAmt = (enteredDiscountAmt * currencyRate).toFixed(currency["StdPrecision"]);\n        enteredDiscountAmt = 0;\n        //currency.GetStdPrecision());//, MidpointRounding.AwayFromZero);\n        //if entered discount is not zero then set discountAmt else set enteredDiscountAmt\n        if (enteredDiscountAmt != 0) {\n          discountAmt = enteredDiscountAmt;\n        }\n        mTab.setValue("DiscountAmt", discountAmt);\n        payAmt = invoiceOpenAmt - discountAmt - writeOffAmt - overUnderAmt;\n        mTab.setValue("PayAmt", Util.getValueOfDecimal(payAmt.toFixed(precision)));\n        mTab.setValue("PaymentAmount", Util.getValueOfDecimal(payAmt.toFixed(precision)));\n      }\n\n      //\tNo Invoice - Set Discount, Witeoff, Under/Over to 0\n      else if (C_Invoice_ID == 0) {\n        if (VIS.Env.ZERO != discountAmt) {\n          mTab.setValue("DiscountAmt", VIS.Env.ZERO);\n        }\n        if (VIS.Env.ZERO != writeOffAmt) {\n          mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\n        }\n        if (VIS.Env.ZERO != overUnderAmt) {\n          mTab.setValue("OverUnderAmt", VIS.Env.ZERO);\n        }\n      }\n      //  PayAmt - calculate write off\n      else if (colName == "PayAmt" || colName == "PaymentAmount") {\n        if (enteredDiscountAmt != 0) discountAmt = enteredDiscountAmt;\n        overUnderAmt = invoiceOpenAmt - payAmt - discountAmt - writeOffAmt;\n        //if (VIS.Env.ZERO.compareTo(overUnderAmt) > 0) {\n        //if (Math.abs(writeOffAmt).compareTo(discountAmt) <= 0) {\n        //    discountAmt = (discountAmt + overUnderAmt);\n        //}\n        //else {\n        //    discountAmt = VIS.Env.ZERO;\n        //}  \n        //overUnderAmt = (((invoiceOpenAmt - payAmt) - discountAmt) - writeOffAmt);\n        //}\n        // --------Commented as discussed with Mukesh Sir and Mandeep sir on 14 June 2017---------\n        if (IsReturnTrx == "N" && overUnderAmt > 0 || IsReturnTrx == "Y" && overUnderAmt < 0) {\n          VIS.ADialog.info("LessScheduleAmount");\n        }\n        if (IsReturnTrx == "Y" && overUnderAmt > 0 || IsReturnTrx == "N" && overUnderAmt < 0) {\n          VIS.ADialog.info("MoreScheduleAmount");\n          payAmt = invoiceOpenAmt - discountAmt - writeOffAmt;\n          overUnderAmt = invoiceOpenAmt - payAmt - discountAmt - writeOffAmt;\n          if (checkPrecision) {\n            mTab.setValue("PayAmt", Util.getValueOfDecimal(payAmt.toFixed(precision)));\n            mTab.setValue("PaymentAmount", Util.getValueOfDecimal(payAmt.toFixed(precision)));\n          } else {\n            mTab.setValue("PayAmt", payAmt);\n            mTab.setValue("PaymentAmount", payAmt);\n          }\n        }\n        if (checkPrecision) {\n          mTab.setValue("DiscountAmt", Util.getValueOfDecimal(discountAmt.toFixed(precision)));\n          mTab.setValue("OverUnderAmt", Util.getValueOfDecimal(overUnderAmt.toFixed(precision)));\n          mTab.setValue("PayAmt", Util.getValueOfDecimal(payAmt.toFixed(precision)));\n          mTab.setValue("PaymentAmount", Util.getValueOfDecimal(payAmt.toFixed(precision)));\n        } else {\n          mTab.setValue("DiscountAmt", discountAmt);\n          mTab.setValue("OverUnderAmt", overUnderAmt);\n        }\n      } else\n        //  calculate PayAmt\n        {\n          /* nnayak - Allow reduction in discount, but not an increase. To give a discount that is higher\r\n             than the calculated discount, users have to enter a write off */\n          //Source code modified by Suganthi for Allowing positive and negative discount in order\n          //if(EnteredDiscountAmt.compareTo(DiscountAmt)<0)\n          discountAmt = enteredDiscountAmt;\n          payAmt = invoiceOpenAmt - discountAmt - writeOffAmt - overUnderAmt;\n          if (IsReturnTrx == "Y" && payAmt > 0 || IsReturnTrx == "N" && payAmt < 0) {\n            VIS.ADialog.info("MoreScheduleAmount");\n            if (colName == "OverUnderAmt") {\n              payAmt = invoiceOpenAmt - discountAmt - writeOffAmt;\n              overUnderAmt = invoiceOpenAmt - payAmt - discountAmt - writeOffAmt;\n            }\n            if (colName == "DiscountAmt") {\n              payAmt = invoiceOpenAmt - overUnderAmt - writeOffAmt;\n              discountAmt = invoiceOpenAmt - payAmt - overUnderAmt - writeOffAmt;\n            }\n            if (colName == "WriteOffAmt") {\n              payAmt = invoiceOpenAmt - discountAmt - overUnderAmt;\n              writeOffAmt = invoiceOpenAmt - payAmt - discountAmt - overUnderAmt;\n            }\n          }\n          if (checkPrecision) {\n            mTab.setValue("PayAmt", Util.getValueOfDecimal(payAmt.toFixed(precision)));\n            mTab.setValue("PaymentAmount", Util.getValueOfDecimal(payAmt.toFixed(precision)));\n            mTab.setValue("DiscountAmt", Util.getValueOfDecimal(discountAmt.toFixed(precision)));\n            mTab.setValue("WriteOffAmt", Util.getValueOfDecimal(writeOffAmt.toFixed(precision)));\n            mTab.setValue("OverUnderAmt", Util.getValueOfDecimal(overUnderAmt.toFixed(precision)));\n          } else {\n            mTab.setValue("PayAmt", payAmt);\n            mTab.setValue("PaymentAmount", payAmt);\n            mTab.setValue("DiscountAmt", discountAmt);\n            mTab.setValue("WriteOffAmt", writeOffAmt);\n            mTab.setValue("OverUnderAmt", overUnderAmt);\n          }\n          if (IsReturnTrx == "N" && overUnderAmt > 0 || IsReturnTrx == "Y" && overUnderAmt < 0) {\n            VIS.ADialog.info("LessScheduleAmount");\n          }\n        }\n      this.setCalloutActive(false);\n    } else {\n      this.setCalloutActive(true);\n      try {\n        // for independent BP / Charge / order id > 0 while order schedule id not defined\n        if (Util.getValueOfInt(mTab.getValue("C_Order_ID")) > 0 && Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) == 0 || Util.getValueOfInt(mTab.getValue("C_Order_ID")) == 0 && Util.getValueOfInt(mTab.getValue("VA009_OrderPaySchedule_ID")) == 0 && Util.getValueOfInt(mTab.getValue("C_Invoice_ID")) == 0 && Util.getValueOfInt(mTab.getValue("C_InvoicePaySchedule_ID")) == 0) {\n          mTab.setValue("PayAmt", Util.getValueOfDecimal(mTab.getValue("PaymentAmount")));\n        }\n        //window --\x3e Payment to set Loan Amount and Interest amount\n        var dataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA026_");\n        if (dataPrefix["VA026_"]) {\n          if (mField.getColumnName() == "PaymentAmount") {\n            //to check PaymentType using IsSOTrx\n            var dt = VIS.dataContext.getJSONRecord("MDocType/GetDocType", mTab.getValue("C_DocType_ID"));\n            //for AP Payment\n            if (!Util.getValueOfBoolean(dt.IsSOTrx)) {\n              //get precision based on currency_ID\n              var currency = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", cur);\n              var precision = currency["StdPrecision"];\n              var loanAmt = Util.getValueOfDecimal(mTab.getValue("PaymentAmount")) / Util.getValueOfDecimal(mTab.getValue("VA026_Interest") / 100 + 1).toString();\n              mTab.setValue("VA026_InterestAmt", Util.getValueOfDecimal(loanAmt.toFixed(precision)));\n              mTab.setValue("VA026_InterestAmount", Util.getValueOfDecimal((mTab.getValue("PaymentAmount") - mTab.getValue("VA026_InterestAmt")).toFixed(precision)));\n            }\n          }\n        }\n        this.setCalloutActive(false);\n      } catch (err) {\n        this.setCalloutActive(false);\n        this.log.log(Level.SEVERE, sql, err);\n        return err;\n      }\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * Get Bank Account Curremcy\r\n   * @param ctx context\r\n   * @param windowNo current Window No\r\n   * @param mTab Grid Tab\r\n   * @param mField Grid Field\r\n   * @param value New Value\r\n   * @param oldValue Old Value\r\n   * @return Error message or ""\r\n   */\n  CalloutPayment.prototype.BankAccount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var c_bankaccount_ID = value;\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var currency = Util.getValueOfInt(VIS.dataContext.getJSONRecord("MPayment/GetBankAcctCurrency", c_bankaccount_ID.toString()));\n      mTab.setValue("C_Currency_ID", currency);\n\n      //VA230:Set value in override checkbox\n      setOverrideAutoCheckValue(mTab);\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * Set value in override checkbox\r\n   * @param ctx context\r\n   * @param windowNo current Window No\r\n   * @param mTab Grid Tab\r\n   * @param mField Grid Field\r\n   * @param value New Value\r\n   * @param oldValue Old Value\r\n   * @return Error message or ""\r\n   */\n  CalloutPayment.prototype.SetOverrideAutoCheck = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      mTab.setValue("IsOverrideAutoCheck", false);\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      setOverrideAutoCheckValue(mTab);\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * VA230:Get autocheckcontrol and set override autocheck funcationlity based on condition\r\n   * @param {any} mTab\r\n   */\n  function setOverrideAutoCheckValue(mTab) {\n    var bankaccountId = Util.getValueOfInt(mTab.getValue("C_BankAccount_ID"));\n    var paymentMethodId = Util.getValueOfInt(mTab.getValue("VA009_PaymentMethod_ID"));\n    var checkNo = Util.getValueOfString(mTab.getValue("CheckNo"));\n    var autoCheck = false;\n    if (bankaccountId > 0 && paymentMethodId > 0 && checkNo != "" && Util.getValueOfString(mTab.getValue("TenderType")) == "K") {\n      var paramString = bankaccountId.toString() + "," + paymentMethodId.toString();\n      autoCheck = Util.getValueOfBoolean(VIS.dataContext.getJSONRecord("MPayment/GetAutoCheckControl", paramString.toString()));\n    }\n    mTab.setValue("IsOverrideAutoCheck", autoCheck);\n  }\n\n  /**\r\n  * Get Provisional Invoice data\r\n  * @param ctx context\r\n  * @param windowNo current Window No\r\n  * @param mTab Grid Tab\r\n  * @param mField Grid Field\r\n  * @param value New Value\r\n  * @param oldValue Old Value\r\n  * @return Error message or ""\r\n  */\n  CalloutPayment.prototype.ProvisionalInvoice = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "" || this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      //get the data of the selected  Provisional invoice \n      var data = VIS.dataContext.getJSONRecord("MPayment/GetProvisionalInvoiceData", Util.getValueOfInt(mTab.getValue("C_ProvisionalInvoice_ID")));\n      if (data != null) {\n        mTab.setValue("C_BPartner_ID", data["C_BPartner_ID"]);\n        mTab.setValue("C_BPartner_Location_ID", data["C_BPartner_Location_ID"]);\n        mTab.setValue("PaymentAmount", data["GrandTotal"]);\n        mTab.setValue("PayAmt", data["GrandTotal"]);\n        mTab.setValue("C_Currency_ID", data["C_Currency_ID"]);\n        mTab.setValue("C_ConversionType_ID", data["C_ConversionType_ID"]);\n        //check if VA009 module is Installed \n        var DataPrefix = VIS.dataContext.getJSONRecord("ModulePrefix/GetModulePrefix", "VA009_");\n        if (DataPrefix["VA009_"]) {\n          // mTab.setValue("VA009_PaymentMethod_ID", Util.getValueOfInt(data["VA009_PaymentMethod_ID"]));\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutPayment = CalloutPayment;\n  //*********** CalloutPayment End ******\n\n  //************CalloutPaymentAllocate Start ********\n  function CalloutPaymentAllocate() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutPaymentAllocate"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutPaymentAllocate, VIS.CalloutEngine); //inherit CalloutEngine\n  /// <summary>\n  /// Payment_Invoice.\n  /// when Invoice selected\n  /// - set InvoiceAmt = invoiceOpen\n  /// - DiscountAmt = C_Invoice_Discount (ID, DateTrx)\n  /// - Amount = invoiceOpen (ID) - Discount\n  /// - WriteOffAmt,OverUnderAmt = 0\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="WindowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns></returns>\n  CalloutPaymentAllocate.prototype.Invoice = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    // \n    if (value == null || value.toString() == "") {\n      /*VIS_427 Clear references and amounts when we clear invoice*/\n      if (mField.getColumnName() == "C_Invoice_ID") {\n        this.setCalloutActive(true);\n        mTab.setValue("C_InvoicePaySchedule_ID", null);\n        mTab.setValue("InvoiceAmt", VIS.Env.ZERO);\n        mTab.setValue("Amount", VIS.Env.ZERO);\n        mTab.setValue("DiscountAmt", VIS.Env.ZERO);\n        mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\n        mTab.setValue("OverUnderAmt", VIS.Env.ZERO);\n        this.setCalloutActive(false);\n      }\n      return "";\n    }\n    var C_Invoice_ID = Util.getValueOfInt(value);\n    if (this.isCalloutActive() //\tassuming it is resetting value\n    || C_Invoice_ID == null || C_Invoice_ID == 0) {\n      return "";\n    }\n\n    //\tCheck Payment\n    var C_Payment_ID = ctx.getContextAsInt(windowNo, "C_Payment_ID");\n    var paramString = C_Payment_ID.toString();\n\n    //Get product price information\n    var payment = null;\n    payment = VIS.dataContext.getJSONRecord("MPayment/GetPayment", paramString);\n\n    // MPayment payment = new MPayment(ctx, C_Payment_ID, null);\n    if (payment["C_Charge_ID"] != 0 || payment["C_Invoice_ID"] != 0 || payment["C_Order_ID"] != 0) return VIS.Msg.getMsg("PaymentIsAllocated");\n    this.setCalloutActive(true);\n    //\n    mTab.setValue("DiscountAmt", VIS.Env.ZERO);\n    mTab.setValue("WriteOffAmt", VIS.Env.ZERO);\n    mTab.setValue("OverUnderAmt", VIS.Env.ZERO);\n    var C_InvoicePaySchedule_ID = 0;\n    if (ctx.getContextAsInt(windowNo, "C_Invoice_ID") == C_Invoice_ID && ctx.getContextAsInt(windowNo, "C_InvoicePaySchedule_ID") != 0) {\n      C_InvoicePaySchedule_ID = ctx.getContextAsInt(windowNo, "C_InvoicePaySchedule_ID");\n    }\n    var dueAmount = 0;\n    var _chk = 0;\n\n    // Added by Bharat on 28 June 2017\n    var drAmt = null;\n    try {\n      drAmt = VIS.dataContext.getJSONRecord("MInvoice/GetInvPaySchedDetail", C_Invoice_ID);\n      if (drAmt != null) {\n        C_InvoicePaySchedule_ID = Util.getValueOfInt(drAmt["C_InvoicePaySchedule_ID"]);\n        dueAmount = Util.getValueOfDecimal(drAmt["dueAmount"]);\n        IsReturnTrx = drAmt["IsReturnTrx"];\n        if ("Y" == IsReturnTrx) {\n          dueAmount = dueAmount * -1;\n        }\n        mTab.setValue("C_InvoicePaySchedule_ID", C_InvoicePaySchedule_ID);\n        mTab.setValue("Amount", dueAmount);\n        _chk = 1;\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, "PaymentAllocate.Invoice -" + C_Invoice_ID, err.message);\n      return err.toString();\n    }\n\n    // Bharat\n    //  Payment Date\n    var ts = Util.getValueOfDate(ctx.getContextAsTime(windowNo, "DateTrx"));\n    if (ts == null) {\n      ts = new Date();\n    }\n    //VIS_427 Changed the format of date to get accurate data\n    var paramString = C_Invoice_ID.toString() + "," + C_InvoicePaySchedule_ID.toString() + "," + Globalize.format(ts, "yyyy-MM-dd").toString();\n    var dr = null;\n    try {\n      dr = VIS.dataContext.getJSONRecord("MPayment/GetInvoiceData", paramString);\n      if (dr != null) {\n        var invoiceOpen = Util.getValueOfDecimal(dr["invoiceOpen"]); //\tSet Invoice OPen Amount\n        if (invoiceOpen == null) {\n          invoiceOpen = VIS.Env.ZERO;\n        }\n        var discountAmt = Util.getValueOfDecimal(dr["invoiceDiscount"]); //\tSet Discount Amt\n        if (discountAmt == null) {\n          discountAmt = VIS.Env.ZERO;\n        }\n        //VIS_427 negate the value if Return trx check box true\n        if (dr["IsReturnTrx"] == "Y") {\n          if (invoiceOpen > 0) {\n            invoiceOpen = invoiceOpen * -1;\n          }\n          if (discountAmt > 0) {\n            discountAmt = discountAmt * -1;\n          }\n        }\n        mTab.setValue("InvoiceAmt", invoiceOpen);\n\n        /*VIS_427 Getting conversion rate to convert amount*/\n        var currencyRate = VIS.Env.ONE;\n        var C_Currency_Invoice_ID = Util.getValueOfInt(dr["C_Currency_ID"]);\n        var C_Currency_ID = ctx.getContextAsInt(windowNo, "C_Currency_ID");\n        var C_ConversionType_ID = ctx.getContextAsInt(windowNo, "C_ConversionType_ID");\n        var AD_Client_ID = ctx.getContextAsInt(windowNo, "AD_Client_ID");\n        var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n        var ConvDate = ctx.getContext(windowNo, "DateAcct");\n        if (C_Currency_ID > 0 && C_Currency_Invoice_ID > 0 && C_Currency_ID != C_Currency_Invoice_ID) {\n          var paramStr = C_Currency_Invoice_ID + "," + C_Currency_ID + "," + ConvDate + "," + C_ConversionType_ID + "," + AD_Client_ID + "," + AD_Org_ID;\n          currencyRate = VIS.dataContext.getJSONRecord("MConversionRate/GetRate", paramStr);\n          /*If currency rate not found then show message and set amount\'s field zero*/\n          if (currencyRate == null || currencyRate == 0) {\n            mTab.setValue("Amount", 0);\n            mTab.setValue("DiscountAmt", 0);\n            this.setCalloutActive(false);\n            return "NoCurrencyConversion";\n          }\n          invoiceOpen = Util.getValueOfDecimal(invoiceOpen * currencyRate);\n          discountAmt = Util.getValueOfDecimal(discountAmt * currencyRate);\n        }\n        // if (_chk == 0) {\n        mTab.setValue("Amount", invoiceOpen - discountAmt);\n        //}\n        mTab.setValue("DiscountAmt", discountAmt);\n        //  reset as dependent fields get reset\n        // VIS_045: commented due to read only logic not working because on new record this context not clear\n        // ctx.setContext(windowNo, "C_Invoice_ID", C_Invoice_ID.toString());\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Payment_Amounts.\n  /// Change of:\n  /// - IsOverUnderPayment -> set OverUnderAmt to 0\n  /// - C_Currency_ID, C_ConvesionRate_ID -> convert all\n  /// - PayAmt, DiscountAmt, WriteOffAmt, OverUnderAmt -> PayAmt\n  /// make sure that add up to InvoiceOpenAmt\n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="WindowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <param name="oldValue"></param>\n  /// <returns></returns>\n  CalloutPaymentAllocate.prototype.Amounts = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    //if (value == DBNull.Value || value == null || value.toString() == "")\n    //{\n    //    return "";\n    //}\n    if (this.isCalloutActive())\n      //\tassuming it is resetting value\n      {\n        return "";\n      }\n    //\tNo Invoice\n    var C_Invoice_ID = mTab.getValue("C_Invoice_ID");\n    if (C_Invoice_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    //\tGet Info from Tab\n    // Added by Bharat on 23 June 2017\n    var C_InvoicePaySchedule_ID = 0;\n    if (mTab.getValue("C_InvoicePaySchedule_ID") != null) {\n      C_InvoicePaySchedule_ID = mTab.getValue("C_InvoicePaySchedule_ID");\n    }\n    var invoiceOpenAmt = VIS.Env.ZERO;\n    var IsReturnTrx = "N";\n    var C_Currency_Invoice_ID = 0;\n    var checkPrecision = true;\n    var amount = Util.getValueOfDecimal(mTab.getValue("Amount"));\n    var discountAmt = Util.getValueOfDecimal(mTab.getValue("DiscountAmt"));\n    var writeOffAmt = Util.getValueOfDecimal(mTab.getValue("WriteOffAmt"));\n    var overUnderAmt = Util.getValueOfDecimal(mTab.getValue("OverUnderAmt"));\n    var invoiceAmt = Util.getValueOfDecimal(mTab.getValue("InvoiceAmt"));\n    this.log.fine("Amt=" + amount + ", Discount=" + discountAmt + ", WriteOff=" + writeOffAmt + ", OverUnder=" + overUnderAmt + ", Invoice=" + invoiceAmt);\n\n    // Added by Bharat on 23 june 2017 to remove client side queries\n    var ts = ctx.getContext(windowNo, "DateTrx");\n    if (ts == null) {\n      ts = new Date();\n    }\n    var paramString = C_Invoice_ID.toString() + "," + C_InvoicePaySchedule_ID.toString() + "," + Globalize.format(ts, "yyyy-MM-dd").toString();\n    var dr = VIS.dataContext.getJSONRecord("MPayment/GetInvoiceData", paramString);\n    if (dr != null) {\n      C_Currency_Invoice_ID = Util.getValueOfInt(dr["C_Currency_ID"]);\n      invoiceOpenAmt = Util.getValueOfDecimal(dr["invoiceOpen"]);\n      if (invoiceOpenAmt == null) {\n        invoiceOpenAmt = VIS.Env.ZERO;\n      }\n      if (VIS.Env.ZERO == discountAmt) {\n        discountAmt = Util.getValueOfDecimal(dr["invoiceDiscount"]);\n      }\n      IsReturnTrx = dr["IsReturnTrx"];\n    }\n    if (IsReturnTrx == "Y") {\n      if (amount > 0) {\n        amount = amount * -1;\n        mTab.setValue("Amount", amount);\n      }\n      if (discountAmt > 0) {\n        discountAmt = discountAmt * -1;\n      }\n      if (writeOffAmt > 0) {\n        writeOffAmt = writeOffAmt * -1;\n        mTab.setValue("WriteOffAmt", writeOffAmt);\n      }\n      if (overUnderAmt > 0) {\n        overUnderAmt = overUnderAmt * -1;\n        mTab.setValue("OverUnderAmt", overUnderAmt);\n      }\n      if (invoiceOpenAmt > 0) {\n        invoiceOpenAmt = invoiceOpenAmt * -1;\n      }\n    } else {\n      if (amount < 0) {\n        amount = amount * -1;\n        mTab.setValue("Amount", amount);\n      }\n      if (discountAmt < 0) {\n        discountAmt = discountAmt * -1;\n      }\n      if (writeOffAmt < 0) {\n        writeOffAmt = writeOffAmt * -1;\n        mTab.setValue("WriteOffAmt", writeOffAmt);\n      }\n      if (overUnderAmt < 0) {\n        overUnderAmt = overUnderAmt * -1;\n        mTab.setValue("OverUnderAmt", overUnderAmt);\n      }\n      if (invoiceOpenAmt < 0) {\n        invoiceOpenAmt = invoiceOpenAmt * -1;\n      }\n    }\n    //\tChanged Column\n    var colName = mField.getColumnName();\n    var paramString = C_Currency_Invoice_ID.toString();\n    var currency = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", paramString);\n    var precision = currency["StdPrecision"];\n    /*VIS_427 Getting conversion rate to convert amount*/\n    var C_Currency_ID = ctx.getContextAsInt(windowNo, "C_Currency_ID");\n    var C_ConversionType_ID = ctx.getContextAsInt(windowNo, "C_ConversionType_ID");\n    var AD_Client_ID = ctx.getContextAsInt(windowNo, "AD_Client_ID");\n    var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n    var ConvDate = ctx.getContext(windowNo, "DateAcct");\n    if (C_Currency_ID > 0 && C_Currency_Invoice_ID > 0 && C_Currency_ID != C_Currency_Invoice_ID) {\n      var paramStr = C_Currency_Invoice_ID + "," + C_Currency_ID + "," + ConvDate + "," + C_ConversionType_ID + "," + AD_Client_ID + "," + AD_Org_ID;\n      currencyRate = VIS.dataContext.getJSONRecord("MConversionRate/GetRate", paramStr);\n      invoiceOpenAmt = Util.getValueOfDecimal((invoiceOpenAmt * currencyRate).toFixed(precision));\n      if (colName != "Amount") {\n        amount = Util.getValueOfDecimal((amount * currencyRate).toFixed(precision));\n      }\n    }\n    //  PayAmt - calculate write off\n    if (colName == "Amount") {\n      //writeOffAmt = Decimal.Subtract(Decimal.Subtract(Decimal.Subtract(invoiceAmt, amount), discountAmt), overUnderAmt);\n      //writeOffAmt = (((invoiceAmt - amount) - discountAmt) - overUnderAmt);\n      overUnderAmt = invoiceOpenAmt - amount - discountAmt - writeOffAmt;\n      //mTab.setValue("WriteOffAmt", writeOffAmt);\n      if (IsReturnTrx == "N" && overUnderAmt > 0 || IsReturnTrx == "Y" && overUnderAmt < 0) {\n        VIS.ADialog.info("LessScheduleAmount");\n      }\n      if (IsReturnTrx == "Y" && overUnderAmt > 0 || IsReturnTrx == "N" && overUnderAmt < 0) {\n        VIS.ADialog.info("MoreScheduleAmount");\n        amount = invoiceOpenAmt - discountAmt - writeOffAmt;\n        overUnderAmt = invoiceOpenAmt - amount - discountAmt - writeOffAmt;\n        if (checkPrecision) {\n          mTab.setValue("Amount", amount.toFixed(precision));\n        } else {\n          mTab.setValue("Amount", amount);\n        }\n      }\n      if (checkPrecision) {\n        mTab.setValue("DiscountAmt", discountAmt.toFixed(precision));\n        mTab.setValue("OverUnderAmt", overUnderAmt.toFixed(precision));\n        mTab.setValue("Amount", amount.toFixed(precision));\n      } else {\n        mTab.setValue("DiscountAmt", discountAmt);\n        mTab.setValue("OverUnderAmt", overUnderAmt);\n      }\n    } else\n      //  calculate Amount\n      {\n        //amount = Decimal.Subtract(Decimal.Subtract(Decimal.Subtract(invoiceAmt, discountAmt), writeOffAmt), overUnderAmt);\n        amount = invoiceOpenAmt - discountAmt - writeOffAmt - overUnderAmt;\n        if (IsReturnTrx == "Y" && amount > 0 || IsReturnTrx == "N" && amount < 0) {\n          VIS.ADialog.info("MoreScheduleAmount");\n          if (colName == "OverUnderAmt") {\n            amount = invoiceOpenAmt - discountAmt - writeOffAmt;\n            overUnderAmt = invoiceOpenAmt - amount - discountAmt - writeOffAmt;\n          }\n          if (colName == "DiscountAmt") {\n            amount = invoiceOpenAmt - overUnderAmt - writeOffAmt;\n            discountAmt = invoiceOpenAmt - amount - overUnderAmt - writeOffAmt;\n          }\n          if (colName == "WriteOffAmt") {\n            amount = invoiceOpenAmt - discountAmt - overUnderAmt;\n            writeOffAmt = invoiceOpenAmt - amount - discountAmt - overUnderAmt;\n          }\n        }\n        if (checkPrecision) {\n          mTab.setValue("Amount", amount.toFixed(precision));\n          mTab.setValue("DiscountAmt", discountAmt.toFixed(precision));\n          mTab.setValue("WriteOffAmt", writeOffAmt.toFixed(precision));\n          mTab.setValue("OverUnderAmt", overUnderAmt.toFixed(precision));\n        } else {\n          mTab.setValue("Amount", amount);\n          mTab.setValue("DiscountAmt", discountAmt);\n          mTab.setValue("WriteOffAmt", writeOffAmt);\n          mTab.setValue("OverUnderAmt", overUnderAmt);\n        }\n        if (IsReturnTrx == "N" && overUnderAmt > 0 || IsReturnTrx == "Y" && overUnderAmt < 0) {\n          VIS.ADialog.info("LessScheduleAmount");\n        }\n      }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutPaymentAllocate = CalloutPaymentAllocate;\n  //************ CalloutPaymentAllocate End *********\n\n  //*************CalloutPaymentTypeSO Starts***********\n  function CalloutPaymentTypeSO() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutPaymentTypeSO"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutPaymentTypeSO, VIS.CalloutEngine); //inherit prototype\n\n  CalloutPaymentTypeSO.prototype.SetPaymentType = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      if (mField.getColumnName() == "PaymentRule") {\n        if (mTab.getValue("PaymentRule") == null) {\n          mTab.setValue("PaymentMethod", null);\n        } else {\n          var _PaymentMethod_ID = mTab.getValue("PaymentRule");\n          mTab.setValue("PaymentMethod", _PaymentMethod_ID);\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutPaymentTypeSO = CalloutPaymentTypeSO;\n  //*************CalloutPaymentTypeSO Ends*************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutpayment.js?\n}')},"./Areas/VAS/Scripts/model/calloutpayselection.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutPaySelection() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutPaySelection"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutPaySelection, VIS.CalloutEngine); //inherit CalloutEngine\n  /// <summary>\n  /// Payment Selection Line - Payment Amount.\n  /// - called from C_PaySelectionLine.PayAmt\n  /// - update DifferenceAmt\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value">New Value</param>\n  /// <returns> null or error message</returns>\n  CalloutPaySelection.prototype.PayAmt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    if (this.isCalloutActive() || value == null || value == "") {\n      return "";\n    }\n    //\tget invoice info\n    var ii = Util.getValueOfInt(mTab.getValue("C_Invoice_ID"));\n    if (ii == null) {\n      return "";\n    }\n    var C_Invoice_ID = ii; // ii.intValue();\n    if (C_Invoice_ID == 0) {\n      return "";\n    }\n    //\n    var OpenAmt = Util.getValueOfDecimal(mTab.getValue("OpenAmt"));\n    var PayAmt = Util.getValueOfDecimal(mTab.getValue("PayAmt"));\n    var DiscountAmt = Util.getValueOfDecimal(mTab.getValue("DiscountAmt"));\n    this.setCalloutActive(true);\n    // var DifferenceAmt = Decimal.Subtract(Decimal.Subtract(OpenAmt, PayAmt), DiscountAmt);\n\n    var DifferenceAmt = OpenAmt - PayAmt - DiscountAmt;\n    this.log.fine(" - OpenAmt=" + OpenAmt + " - PayAmt=" + PayAmt + ", Discount=" + DiscountAmt + ", Difference=" + DifferenceAmt);\n    mTab.setValue("DifferenceAmt", DifferenceAmt);\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Payment Selection Line - Invoice.\n  /// - called from C_PaySelectionLine.C_Invoice_ID\n  /// - update PayAmt & DifferenceAmt\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutPaySelection.prototype.Invoice = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value == "") {\n      return "";\n    }\n    //\tget value\n    var C_Invoice_ID = Util.getValueOfInt(value);\n    if (C_Invoice_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var C_BankAccount_ID = ctx.getContextAsInt(windowNo, "C_BankAccount_ID");\n    var PayDate = ctx.getContext("PayDate");\n    var OpenAmt = VIS.Env.ZERO;\n    var DiscountAmt = VIS.Env.ZERO;\n    var isSOTrx = false;\n    var idr = null;\n    try {\n      var fields = C_Invoice_ID.toString() + ", " + C_BankAccount_ID.toString() + "," + PayDate.toString();\n      idr = VIS.dataContext.getJSONRecord("MInvoice/GetInvoiceOpenDetail", fields);\n      if (idr != null && Object.keys(idr).length > 0) {\n        OpenAmt = Util.getValueOfDecimal(idr["OpenAmt"]);\n        DiscountAmt = Util.getValueOfDecimal(idr["DiscountAmt"]);\n        IsSOTrx = "Y" == Util.getValueOfString(idr["IsSOTrx"]);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    this.log.fine(" - OpenAmt=" + OpenAmt + " (Invoice=" + C_Invoice_ID + ",BankAcct=" + C_BankAccount_ID + ")");\n    mTab.setValue("OpenAmt", OpenAmt);\n    mTab.setValue("PayAmt", OpenAmt - DiscountAmt);\n    mTab.setValue("DiscountAmt", DiscountAmt);\n    mTab.setValue("DifferenceAmt", VIS.Env.ZERO);\n    mTab.setValue("IsSOTrx", isSOTrx);\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutPaySelection = CalloutPaySelection;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutpayselection.js?\n}')},"./Areas/VAS/Scripts/model/calloutpricelist.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n\n  //****************CalloutCurrency Start ******\n  function CalloutCurrency() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutCurrency"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutCurrency, VIS.CalloutEngine); //inherit CalloutEngine\n\n  CalloutCurrency.prototype.Currency = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var PriceListData = VIS.dataContext.getJSONRecord("MPriceList/GetPriceList", value.toString());\n      if (PriceListData != null) {\n        mTab.setValue("C_Currency_ID", PriceListData.C_Currency_ID);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutCurrency = CalloutCurrency;\n  //****************CalloutCurrency End ******\n\n  //**************CalloutPriclistUOM Start********************\n  function CalloutPriclistUOM() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutPriclistUOM"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutPriclistUOM, VIS.CalloutEngine); //inherit prototype\n\n  CalloutPriclistUOM.prototype.SetUOM = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n\n    // JID_0910: On change of product on line system is not removing the ASI. if product is changed then also update the ASI field.\n    if (mTab.getField("M_AttributeSetInstance_ID") != null) {\n      mTab.setValue("M_AttributeSetInstance_ID", null);\n    }\n    try {\n      var _C_UOM_ID = VIS.dataContext.getJSONRecord("MProduct/GetC_UOM_ID", value.toString());\n      mTab.setValue("C_UOM_ID", _C_UOM_ID);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString()); // SD\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutPriclistUOM = CalloutPriclistUOM;\n  //**************CalloutPriclistUOM End********************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutpricelist.js?\n}')},"./Areas/VAS/Scripts/model/calloutproduction.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutProduction() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProduction"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProduction, VIS.CalloutEngine); //inherit CalloutEngine\n  /// <summary>\n  /// Product modified\n  /// Set Attribute Set Instance\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutProduction.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var M_Product_ID = value;\n    if (M_Product_ID == null || M_Product_ID == 0) {\n      return "";\n    }\n    //\tSet Attribute\n    // JID_0910: On change of product on line system is not removing the ASI. if product is changed then also update the ASI field.\n\n    //if (ctx.getContextAsInt(windowNo, "M_Product_ID") == M_Product_ID\n    //    && ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID") != 0) {\n    //    mTab.setValue("M_AttributeSetInstance_ID", Util.getValueOfInt(ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID")));\n    //}\n    //else {\n    mTab.setValue("M_AttributeSetInstance_ID", null);\n    //}\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// when we select BOM on production Plan, if attribute defined on BOM then need to set the same Attributesetinstance\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutProduction.prototype.SetAttributeSetInstance = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "" || this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var paramString = value.toString();\n      ;\n      var asi = VIS.dataContext.getJSONRecord("MProductionLine/GetAttributeSetInstance", paramString);\n      mTab.setValue("M_AttributeSetInstance_ID", asi);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// when we select either Product or AttibutesetInstance on production Plan, pick respective BOM based on respective input\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutProduction.prototype.SetBOM = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "" || this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var paramString;\n      if (mField.getColumnName().equals("M_Product_ID")) {\n        // on selection of product, make ASI as null\n        mTab.setValue("M_AttributeSetInstance_ID", 0);\n        paramString = value.toString().concat(",", 0);\n      } else if (mField.getColumnName().equals("M_AttributeSetInstance_ID")) {\n        paramString = mTab.getValue("M_Product_ID").toString().concat(",", value.toString());\n      }\n      var bom = VIS.dataContext.getJSONRecord("MProductionLine/GetBOM", paramString);\n      mTab.setValue("M_BOM_ID", bom);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// VAI050-set qty acc to precision defined on UOM\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutProduction.prototype.setQtyPrecision = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (mField.getColumnName() == "BOMQty") {\n      var C_UOM_To_ID = mTab.getValue("C_UOM_ID");\n      paramStr = C_UOM_To_ID.toString().concat(",");\n      var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n      var QtyEntered = Util.getValueOfDecimal(value).toFixed(Util.getValueOfInt(gp));\n      mTab.setValue("BOMQty", QtyEntered);\n    } else {\n      var productID = mTab.getValue("M_Product_ID");\n      paramStr = productID.toString().concat(",");\n      var gp = VIS.dataContext.getJSONRecord("MProductionLine/GetPrecision", paramStr);\n      var QtyEntered = Util.getValueOfDecimal(value).toFixed(Util.getValueOfInt(gp));\n      mTab.setValue("ProductionQty", QtyEntered);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutProduction = CalloutProduction;\n  function CalloutProductionLine() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProductionLine"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProductionLine, VIS.CalloutEngine); //inherit CalloutEngine\n\n  //Callout To Set Charge Amount\n  CalloutProductionLine.prototype.SetChargeAmount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var paramString = value.toString();\n      ;\n      var dr = VIS.dataContext.getJSONRecord("MProductionLine/GetChargeAmt", paramString);\n      if (dr != null) {\n        mTab.setValue("Amt", dr["ChargeAmt"]);\n        mTab.setValue("M_Product_ID", null);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutProductionLine = CalloutProductionLine;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutproduction.js?\n}')},"./Areas/VAS/Scripts/model/calloutproject.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutProject() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProject"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProject, VIS.CalloutEngine); //inherit CalloutEngine\n  /// <summary>\n  /// Project Line Planned - Price + Qty.\n  //- called from PlannedPrice, PlannedQty, PriceList, Discount\n  //- calculates PlannedAmt\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Gridfield</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutProject.prototype.Planned = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive() || value == null) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var PlannedQty, PlannedPrice, PriceList, Discount;\n    var RemainingMargin = 0;\n    var StdPrecision = ctx.getStdPrecision();\n    var PriceListPrecision = StdPrecision;\n    var paramString = ctx.getContextAsInt(windowNo, "M_PriceList_Version_ID");\n    if (paramString != 0) {\n      var dr = VIS.dataContext.getJSONRecord("MProject/GetPriceListPrecision", paramString.toString());\n      if (dr != null) {\n        StdPrecision = Util.getValueOfInt(dr["StdPrecision"]);\n        PriceListPrecision = Util.getValueOfInt(dr["PriceListPrecision"]);\n      }\n    }\n\n    //\tVIS0060: Handled internal server error and Call controller method to get limit price.\n    var taskID = Util.getValueOfInt(mTab.getValue("C_ProjectTask_ID"));\n    var projID = Util.getValueOfInt(mTab.getValue("C_Project_ID"));\n    var productID = Util.getValueOfInt(mTab.getValue("M_Product_ID"));\n    var paramString = taskID.toString() + "," + projID.toString() + "," + productID.toString();\n    var PriceLimit = VIS.dataContext.getJSONRecord("MProject/GetProjectPriceLimit", paramString);\n    PlannedQty = Util.getValueOfDecimal(mTab.getValue("PlannedQty"));\n    if (PlannedQty == null) {\n      PlannedQty = Envs.ONE;\n    }\n    PlannedPrice = Util.getValueOfDecimal(mTab.getValue("PlannedPrice"));\n    if (PlannedPrice == null) {\n      PlannedPrice = VIS.Env.ZERO;\n    } else {\n      PlannedPrice = PlannedPrice.toFixed(PriceListPrecision);\n    }\n    PriceList = Util.getValueOfDecimal(mTab.getValue("PriceList"));\n    if (PriceList == null) {\n      PriceList = PlannedPrice;\n    } else {\n      PriceList = PriceList.toFixed(PriceListPrecision);\n    }\n    Discount = Util.getValueOfDecimal(mTab.getValue("Discount"));\n    if (Discount == null) {\n      Discount = VIS.Env.ZERO;\n    } else {\n      Discount = Discount.toFixed(PriceListPrecision);\n    }\n    var columnName = mField.getColumnName();\n    if (columnName == "PlannedPrice") {\n      if (PriceList == 0) {\n        Discount = VIS.Env.ZERO;\n      } else {\n        var multiplier = (PlannedPrice * VIS.Env.ONEHUNDRED / PriceList).toFixed(10); //, MidpointRounding.AwayFromZero);\n        Discount = VIS.Env.ONEHUNDRED - multiplier;\n      }\n      mTab.setValue("Discount", Discount.toFixed(PriceListPrecision));\n      mTab.setValue("PlannedPrice", PlannedPrice);\n      this.log.fine("PriceList=" + PriceList + " - Discount=" + Discount + " -> [PlannedPrice=" + PlannedPrice + "] (Precision=" + PriceListPrecision + ")");\n    } else if (columnName == "PriceList") {\n      if (VIS.Env.signum(PriceList) == 0) {\n        Discount = VIS.Env.ZERO;\n      } else {\n        var multiplier = PlannedPrice * VIS.Env.ONEHUNDRED / PriceList; //, MidpointRounding.AwayFromZero);\n        Discount = VIS.Env.ONEHUNDRED - multiplier;\n      }\n      mTab.setValue("Discount", Discount.toFixed(PriceListPrecision));\n      mTab.setValue("PriceList", PriceList);\n      this.log.fine("[PriceList=" + PriceList + "] - Discount=" + Discount + " -> PlannedPrice=" + PlannedPrice + " (Precision=" + PriceListPrecision + ")");\n    } else if (columnName == "Discount") {\n      var multiplier = (Discount / VIS.Env.ONEHUNDRED).toFixed(10); //, MidpointRounding.AwayFromZero);\n\n      multiplier = VIS.Env.ONE - multiplier;\n      //\n      PlannedPrice = PriceList * multiplier;\n      if (Util.scale(PlannedPrice) > PriceListPrecision) {\n        PlannedPrice = PlannedPrice.toFixed(PriceListPrecision); //, MidpointRounding.AwayFromZero);\n      }\n      mTab.setValue("PlannedPrice", PlannedPrice);\n      mTab.setValue("Discount", Discount);\n      this.log.fine("PriceList=" + PriceList + " - [Discount=" + Discount + "] -> PlannedPrice=" + PlannedPrice + " (Precision=" + PriceListPrecision + ")");\n    }\n\n    //\tCalculate Amount\n    var PlannedAmt = PlannedQty * PlannedPrice;\n    if (Util.scale(PlannedAmt) > StdPrecision) {\n      PlannedAmt = PlannedAmt.toFixed(StdPrecision); //, MidpointRounding.AwayFromZero);\n    }\n\n    // Calculate Planned Margin Amount after calculation of Palnned Amount, so that its to be accurate\n    if (PlannedQty != null) {\n      RemainingMargin = (Util.getValueOfDecimal(mTab.getValue("PlannedPrice")) - PriceLimit) * Util.getValueOfDecimal(mTab.getValue("PlannedQty"));\n      RemainingMargin = RemainingMargin.toFixed(StdPrecision);\n    }\n    this.log.fine("PlannedQty=" + PlannedQty + " * PlannedPrice=" + PlannedPrice + " -> PlannedAmt=" + PlannedAmt + " (Precision=" + StdPrecision + ")");\n    mTab.setValue("PlannedAmt", PlannedAmt);\n    mTab.setValue("PlannedMarginAmt", RemainingMargin);\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  //\tplanned\n\n  /// <summary>\n  /// Project Line Product\n  //- called from Product\n  //- calculates PlannedPrice, PriceList, Discount\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current window no</param>\n  /// <param name="mTab">grid tab</param>\n  /// <param name="mField">grid field</param>\n  /// <param name="value">new valuw</param>\n  /// <returns>null or error message</returns>\n  CalloutProject.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var M_Product_ID = Util.getValueOfInt(value);\n    var M_PriceList_Version_ID = ctx.getContextAsInt(windowNo, "M_PriceList_Version_ID");\n    if (M_Product_ID == null || Util.getValueOfInt(M_Product_ID) == 0 || M_PriceList_Version_ID == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n    var Qty = Util.getValueOfDecimal(mTab.getValue("PlannedQty"));\n    var IsSOTrx = true;\n    //MProductPricing pp = new MProductPricing(ctx.getAD_Client_ID(), ctx.getAD_Org_ID(),\n    //    Util.getValueOfInt(M_Product_ID), C_BPartner_ID, Qty, IsSOTrx);\n    //pp.SetM_PriceList_Version_ID(M_PriceList_Version_ID);\n    var date = Util.getValueOfDateTime(mTab.getValue("PlannedDate"));\n    //DateTime date = (DateTime)mTab.getValue("PlannedDate");\n    if (date == null) {\n      date = Util.getValueOfDateTime(mTab.getValue("DateContract"));\n      if (date == null) {\n        date = Util.getValueOfDateTime(mTab.getValue("DateFinish"));\n        if (date == null) {\n          //date = new DateTime(System.currentTimeMillis());\n          date = new Date();\n          //date = new DateTime(CommonFunctions.CurrentTimeMillis());// (DateTime)(Util.getValueOfDateTime(CommonFunctions.CurrentTimeMillis()));\n        }\n      }\n      //pp.SetPriceDate(date);\n      ////\n      //var PriceList = pp.GetPriceList();\n      //mTab.setValue("PriceList", PriceList);\n      //var PlannedPrice = pp.GetPriceStd();\n      //mTab.setValue("PlannedPrice", PlannedPrice);\n      //var Discount = pp.GetDiscount();\n      //mTab.setValue("Discount", Discount);\n      ////\n      //var curPrecision = 2;\n      //var PlannedAmt = pp.GetLineAmt(curPrecision);\n      //mTab.setValue("PlannedAmt", PlannedAmt);\n\n      var paramString = M_Product_ID.toString().concat(",", C_BPartner_ID.toString(), ",",\n      //2\n      Qty.toString(), ",",\n      //3\n      isSOTrx, ",",\n      //4 \n      M_PriceList_ID.toString(), ",",\n      //5\n      M_PriceList_Version_ID.toString(), ",",\n      //6\n      date.toString(), ",",\n      //7\n      null); //8\n\n      //Get product price information\n      var dr = null;\n      dr = VIS.dataContext.getJSONRecord("MProductPricing/GetProductPricing", paramString);\n      var rowDataDB = null;\n\n      // MProductPricing pp = new MProductPricing(ctx.getAD_Client_ID(), ctx.getAD_Org_ID(),\n      //     M_Product_ID, C_BPartner_ID, Qty, isSOTrx);\n\n      //\t\t\n      mTab.setValue("PriceList", dr["PriceList"]);\n      // mTab.setValue("PriceLimit", dr.PriceLimit);\n      mTab.setValue("PlannedPrice", dr.PriceActual);\n      //mTab.setValue("PriceEntered", dr.PriceEntered);\n      //  mTab.setValue("C_Currency_ID", Util.getValueOfInt(dr.C_Currency_ID));\n      mTab.setValue("Discount", dr.Discount);\n      mTab.setValue("PlannedAmt", dr.LineAmt);\n\n      //\t\n      //this.log.fine("PlannedQty=" + Qty + " * PlannedPrice=" + PlannedPrice + " -> PlannedAmt=" + PlannedAmt);\n      return "";\n    } //\tproduct\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  }; //\tCalloutProject\n\n  VIS.Model.CalloutProject = CalloutProject;\n\n  //************CalloutProjectLine Start***************\n  function CalloutProjectLine() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProjectLine"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProjectLine, VIS.CalloutEngine); //inherit prototype\n\n  CalloutProjectLine.prototype.Charge = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var paramString = mTab.getValue("C_Charge_ID").toString();\n    //X_C_Charge charge = new X_C_Charge(ctx, Cid, null);\n    //var amt=charge.GetChargeAmt();\n    var amt = VIS.dataContext.getJSONRecord("MCharge/GetCharge", paramString);\n    mTab.setValue("PlannedQty", 1);\n    mTab.setValue("PlannedPrice", amt);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutProjectLine = CalloutProjectLine;\n  //**************CalloutProjectLine End*************\n\n  //************CalloutProjectLine Start***************\n  function CalloutProjectLine() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProjectLine"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProjectLine, VIS.CalloutEngine); //inherit prototype\n  CalloutProjectLine.prototype.Charge = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    var paramString = mTab.getValue("C_Charge_ID").toString();\n    //X_C_Charge charge = new X_C_Charge(ctx, Cid, null);\n    //var amt=charge.GetChargeAmt();\n    var amt = VIS.dataContext.getJSONRecord("MCharge/GetCharge", paramString);\n    mTab.setValue("PlannedQty", 1);\n    mTab.setValue("PlannedPrice", amt);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutProjectLine = CalloutProjectLine;\n  //**************CalloutProjectLine End*************\n\n  //*************CalloutProjectCBParner Starts***********\n  function CalloutProjectCBPartner() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutProjectCBPartner"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutProjectCBPartner, VIS.CalloutEngine); //inherit prototype\n\n  CalloutProjectCBPartner.prototype.SetAddress = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      mTab.setValue("C_BPartner_Location_ID", null);\n      mTab.setValue("AD_User_ID", null);\n      mTab.setValue("M_PriceList_Version_ID", null);\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      if (mField.getColumnName() == "C_BPartner_ID") {\n        if (mTab.getField("Ref_BPartner_ID") != null) {\n          mTab.setValue("Ref_BPartner_ID", value);\n        }\n        var dr = null;\n        dr = VIS.dataContext.getJSONRecord("MBPartner/GetBPData", Util.getValueOfString(mTab.getValue("C_BPartner_ID")));\n        if (dr != null) {\n          var _Location_ID = VIS.Utility.Util.getValueOfInt(dr["C_BPartner_Location_ID"]);\n          if (_Location_ID == 0) mTab.setValue("C_BPartner_Location_ID", null);else mTab.setValue("C_BPartner_Location_ID", _Location_ID);\n          var _User_ID = VIS.Utility.Util.getValueOfInt(dr["AD_User_ID"]);\n          if (_User_ID == 0) mTab.setValue("AD_User_ID", null);else mTab.setValue("AD_User_ID", _User_ID);\n          var M_PriceList_Version_ID = VIS.Utility.Util.getValueOfInt(dr["M_PriceList_Version_ID"]);\n          if (M_PriceList_Version_ID == 0) mTab.setValue("M_PriceList_Version_ID", null);else mTab.setValue("M_PriceList_Version_ID", M_PriceList_Version_ID);\n        }\n      } else if (mField.getColumnName() == "C_BPartnerSR_ID") {\n        if (mTab.getField("Ref_BPartner_ID") != null) {\n          mTab.setValue("Ref_BPartner_ID", value);\n        }\n        var dr = null;\n        dr = VIS.dataContext.getJSONRecord("MBPartner/GetBPData", Util.getValueOfString(mTab.getValue("C_BPartnerSR_ID")));\n        if (dr != null) {\n          var _Location_ID = VIS.Utility.Util.getValueOfInt(dr["C_BPartner_Location_ID"]);\n          if (_Location_ID == 0) mTab.setValue("C_BPartner_Location_ID", null);else mTab.setValue("C_BPartner_Location_ID", _Location_ID);\n          var _User_ID = VIS.Utility.Util.getValueOfInt(dr["AD_User_ID"]);\n          if (_User_ID == 0) mTab.setValue("AD_User_ID", null);else mTab.setValue("AD_User_ID", _User_ID);\n          var M_PriceList_Version_ID = VIS.Utility.Util.getValueOfInt(dr["M_PriceList_Version_ID"]);\n          if (M_PriceList_Version_ID == 0) mTab.setValue("M_PriceList_Version_ID", null);else mTab.setValue("M_PriceList_Version_ID", M_PriceList_Version_ID);\n        }\n      }\n      //var sql = "SELECT au.ad_user_id,  cl.c_bpartner_location_id FROM c_bpartner cp  INNER JOIN c_bpartner_location cl ON cl.c_bpartner_id=cp.c_bpartner_id INNER JOIN Ad_User au ON au.c_bpartner_id   =cp.c_bpartner_id WHERE cp.c_bpartner_id= " + VIS.Utility.Util.getValueOfString(mTab.getValue("C_BPartner_ID")) + " AND cp.isactive       =\'Y\'  ORDER BY cp.created";\n\n      //var ds = CalloutDB.executeCalloutDataSet(sql, null);\n      //for (var i = 0; i < ds.tables[0].rows.length; i++) {\n      //    var dr = ds.tables[0].rows[i];\n      //    if (dr != null) {\n      //        var _Location_ID = VIS.Utility.Util.getValueOfInt(dr.getCell("C_BPartner_Location_ID"));\n      //        if (_Location_ID == 0)\n      //            mTab.setValue("C_BPartner_Location_ID", null);\n      //        else\n      //            mTab.setValue("C_BPartner_Location_ID", _Location_ID);\n\n      //        var _User_ID = VIS.Utility.Util.getValueOfInt(dr.getCell("AD_User_ID"));\n      //        if (_User_ID == 0)\n      //            mTab.setValue("AD_User_ID", null);\n      //        else\n      //            mTab.setValue("AD_User_ID", _User_ID);\n      //    }\n      //}\n\n      //var _locatio_id = Util.getValueOfString(CalloutDB.executeCalloutScalar(sql, null, null));\n      //if (parseInt(_locatio_id)>0) {\n      //     mTab.setValue("C_BPartner_Location_ID", parseInt(_locatio_id));\n      //}\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutProjectCBPartner = CalloutProjectCBPartner;\n  //*************CalloutProjectCBParner Ends*************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutproject.js?\n}')},"./Areas/VAS/Scripts/model/calloutrequest.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutRequest() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutRequest"); //must call\n  }\n  VIS.Utility.inheritPrototype(CalloutRequest, VIS.CalloutEngine); //inherit CalloutEngine\n  /// <summary>\n  /// Request - Copy Mail Text - <b>Callout</b>\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutRequest.prototype.CopyMail = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    var colName = mField.getColumnName();\n    this.log.info(colName + "=" + value);\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var txt = VIS.dataContext.getJSONRecord("MRequestType/GetMailText", value.toString());\n      txt = VIS.Env.parseContext(ctx, windowNo, txt, false, true);\n      mTab.setValue("Result", txt);\n      //}\n      //idr.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      //if (idr != null) {\n      //    idr.close();\n      //}\n      this.log.log(Level.SEVERE, sql, err);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  }; //  copyText\n\n  /// <summary>\n  /// Request - Copy Response Text - <b>Callout</b>\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>message or ""</returns>\n  CalloutRequest.prototype.CopyResponse = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    var colName = mField.getColumnName();\n    this.log.info(colName + "=" + value);\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var txt = VIS.dataContext.getJSONRecord("MRequestType/GetResponseText", value.toString());\n      txt = VIS.Env.parseContext(ctx, windowNo, txt, false, true);\n      mTab.setValue("Result", txt);\n      //}\n      // idr.close();\n    } catch (err) {\n      this.setCalloutActive(false);\n      //if (idr != null) {\n      //    idr.close();\n      //}\n      this.log.log(Level.SEVERE, sql, err);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  }; //  copyResponse\n\n  /// <summary>\n  /// Request - Chane of Request Type - <b>Callout</b>\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value"> The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutRequest.prototype.Type = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    var colName = mField.getColumnName();\n    this.log.info(colName + "=" + value);\n    mTab.setValue("R_Status_ID", null);\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    //var R_RequestType_ID = ((Integer)value).intValue();\n    var R_RequestType_ID = Util.getValueOfInt(value);\n    if (R_RequestType_ID == 0) {\n      return "";\n    }\n    var paramString = R_RequestType_ID.toString();\n\n    //Get BankAccount information\n\n    var R_Status_ID = VIS.dataContext.getJSONRecord("MRequestType/GetDefaultR_Status_ID", paramString);\n    //MRequestType rt = MRequestType.Get(ctx, R_RequestType_ID);\n    // var R_Status_ID = rt.GetDefaultR_Status_ID();\n    if (R_Status_ID != 0) {\n      //mTab.setValue("R_Status_ID", new Integer(R_Status_ID));\n      mTab.setValue("R_Status_ID", Util.getValueOfInt(R_Status_ID));\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  }; //\ttype\n\n  /// <summary>\n  /// Request - Copy Resolution Data - <b>Callout</b>\n  /// </summary>\n  /// <param name="ctx">Context</param>\n  /// <param name="WindowNo">current Window No</param>\n  /// <param name="mTab">Model Tab</param>\n  /// <param name="mField">Model Field</param>\n  /// <param name="value">The new value</param>\n  /// <returns>Error message or ""</returns>\n  CalloutRequest.prototype.CopyResolution = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    // VIS_0336 callout for showing comments of selected Resolution in result field.\n    //  \n    var colName = mField.getColumnName();\n    this.log.info(colName + "=" + value);\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      var txt = VIS.dataContext.getJSONRecord("MRequestType/GetResolutionText", value.toString());\n      txt = VIS.Env.parseContext(ctx, windowNo, txt, false, true);\n      mTab.setValue("Result", txt);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, sql, err);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  //CalloutRequest.prototype.BPartner = function (ctx, windowNo, mTab, mField, value, oldValue) {\n  //    if (value == null || value.toString() == "" || this.isCalloutActive()) {\n  //        return "";\n  //    }\n\n  //    this.setCalloutActive(true);\n\n  //    var sql = "Select AD_User_ID FROM AD_User WHERE IsActive=\'Y\' AND C_BPartner_ID=" + value;\n  //    var AD_User_ID = Util.getValueOfInt(VIS.DB.executeScalar(sql));\n\n  //    if (AD_User_ID) {\n  //        mTab.setValue("AD_User_ID", 0);\n  //        mTab.setValue("AD_User_ID", AD_User_ID);\n  //    }\n\n  //    this.setCalloutActive(false);\n  //    return "";\n  //};\n\n  VIS.Model.CalloutRequest = CalloutRequest;\n\n  //*************CalloutMRequest Starts***********\n  function CalloutMRequest() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutMRequest"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutMRequest, VIS.CalloutEngine); //inherit prototype\n\n  CalloutMRequest.prototype.DateRequired = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var DateDoc, DateReq;\n      DateDoc = new Date(mTab.getValue("StartDate"));\n      DateReq = new Date(mTab.getValue("CloseDate"));\n      if (DateReq.toISOString() < DateDoc.toISOString()) {\n        mTab.setValue("CloseDate", "");\n        this.setCalloutActive(false);\n        VIS.ADialog.info("CloseDateInvalid", null, "", "");\n      }\n      this.log.fine("CloseDate=" + DateReq);\n    } catch (err) {\n      VIS.ADialog.info("error in Date" + err, null, "", "");\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutMRequest.prototype.PlanDateRequired = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var DateDoc, DateReq;\n      DateDoc = new Date(mTab.getValue("DateStartPlan"));\n      DateReq = new Date(mTab.getValue("DateCompletePlan"));\n      if (DateReq.toISOString() < DateDoc.toISOString()) {\n        mTab.setValue("DateCompletePlan", "");\n        this.setCalloutActive(false);\n        VIS.ADialog.info("CmpDateInvalid", null, "", "");\n      }\n      this.log.fine("DateCompletePlan=" + DateReq);\n    } catch (err) {\n      VIS.ADialog.info("error in Date" + err, null, "", "");\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutMRequest = CalloutMRequest;\n  //*************CalloutMRequest Ends*************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutrequest.js?\n}')},"./Areas/VAS/Scripts/model/calloutrequisition.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  var steps = false;\n  function CalloutRequisition() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutRequisition"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutRequisition, VIS.CalloutEngine); //inherit CalloutEngine\n\n  /** Logger\t\t\t\t\t*/\n\n  /**\r\n   *\tRequisition Line - Product.\r\n   *\t\t- PriceStd\r\n   *  @param ctx context\r\n   *  @param WindowNo current Window No\r\n   *  @param mTab Grid Tab\r\n   *  @param mField Grid Field\r\n   *  @param value New Value\r\n   *  @return null or error message\r\n   */\n  CalloutRequisition.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    try {\n      if (this.isCalloutActive() || value == null || value.toString() == "") {\n        return "";\n      }\n      var M_Product_ID = value;\n      if (M_Product_ID == null || M_Product_ID == 0) return "";\n      this.setCalloutActive(true);\n\n      //\n      /**\tSet Attribute\r\n      if (ctx.getContextAsInt( Env.WINDOW_INFO, Env.TAB_INFO, "M_Product_ID") == M_Product_ID.intValue()\r\n          && ctx.getContextAsInt( Env.WINDOW_INFO, Env.TAB_INFO, "M_AttributeSetInstance_ID") != 0)\r\n          mTab.setValue("M_AttributeSetInstance_ID", Integer.valueOf(ctx.getContextAsInt( Env.WINDOW_INFO, Env.TAB_INFO, "M_AttributeSetInstance_ID")));\r\n      else\r\n          mTab.setValue("M_AttributeSetInstance_ID", null);\r\n      **/\n\n      // JID_0910: On change of product on line system is not removing the ASI. if product is changed then also update the ASI field.\n      mTab.setValue("M_AttributeSetInstance_ID", null);\n      var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n      //VAI051:- When change the Product then  RequitionQty and Qauntity should be updated \n      mTab.setValue("Qty", mTab.getValue("QtyEntered"));\n      var qty = mTab.getValue("Qty");\n      var isSOTrx = false;\n      var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n      var M_PriceList_Version_ID = ctx.getContextAsInt(windowNo, "M_PriceList_Version_ID");\n      var orderDate = ctx.getContext(windowNo, "DateDoc");\n      var paramString;\n      var C_UOM_ID;\n      //VAI050-If SOtrx false than set UOM --Give priority to pruchase UOM \n      //If Purchase UOM not found than set PU unit which is set on Product else set Base UOM of Product\n      if (isSOTrx == false) {\n        var newParam = C_BPartner_ID.toString() + "," + M_Product_ID.toString();\n        var result = VIS.dataContext.getJSONRecord("MProduct/GetProductUOMs", newParam);\n        if (result) {\n          C_UOM_ID = result["PurchaseUOM"] == 0 ? result["VAS_PurchaseUOM_ID"] == 0 ? result["C_UOM_ID"] : result["VAS_PurchaseUOM_ID"] : result["PurchaseUOM"];\n        }\n      } else {\n        C_UOM_ID = VIS.dataContext.getJSONRecord("MProduct/GetC_UOM_ID", M_Product_ID);\n      }\n\n      //** Price List - ValidFrom date validation ** Dt:03/26/2021 ** Modified By: Kumar **//\n      //var paramsPrice = Util.getValueOfString(M_PriceList_ID).concat(",", Util.getValueOfString(mTab.getValue("M_Requisition_ID")), ",",\n      //    Util.getValueOfString(M_Product_ID), ",",\n      //    Util.getValueOfString(C_UOM_ID), ",",\n      //    Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")), ",",\n      //    "3");\n\n      //Get PriceListversion based on Pricelist\n      //var M_PriceList_Version_ID = VIS.dataContext.getJSONRecord("MPriceListVersion/GetM_PriceList_Version_ID", paramsPrice);\n\n      paramString = M_Product_ID.toString().concat(",", C_BPartner_ID, ",",\n      //2\n      qty, ",",\n      //3\n      isSOTrx, ",",\n      //4 \n      M_PriceList_ID, ",",\n      //5\n      M_PriceList_Version_ID, ",",\n      //6\n      orderDate, ",", null, ",", C_UOM_ID, ",", 1); //7\n\n      //Get product price information\n      var dr = null;\n      dr = VIS.dataContext.getJSONRecord("MProductPricing/GetProductPricing", paramString);\n      mTab.setValue("PriceActual", dr["PriceActual"]);\n      mTab.setValue("PrintDescription", Util.getValueOfString(dr["DocumentNote"]));\n      //\t\t\n      //mTab.setValue("PriceActual", pp.GetPriceStd());\n      ctx.setContext(windowNo, "EnforcePriceLimit", dr["EnforcePriceLimit"] ? "Y" : "N"); //\tnot used\n      ctx.setContext(windowNo, "DiscountSchema", dr["DiscountSchema"] ? "Y" : "N");\n\n      // Set Product UOM \n      mTab.setValue("C_UOM_ID", C_UOM_ID);\n      var param = mTab.getValue("M_Requisition_ID").toString() + "," + ctx.getAD_Client_ID().toString() + "," + value.toString();\n      var OrderLine = VIS.dataContext.getJSONRecord("MOrderLine/GetReqOrderLine", param);\n\n      //var sql = "SELECT C_OrderLine_ID FROM C_OrderLine"\n      //    + " WHERE C_Order_ID ="\n      //    + " (SELECT C_Order_ID "\n      //    + " FROM C_Order "\n      //    + " WHERE DocumentNo="\n      //    + " (SELECT DocumentNo FROM M_Requisition WHERE M_Requisition.M_Requisition_id = " + mTab.getValue("M_Requisition_id") + ")"\n      //    + " AND AD_Client_ID =" + ctx.getAD_Client_ID() + ")"\n      //    + " AND M_Product_ID=" + value;\n\n      //var OrderLine = Util.getValueOfInt(VIS.DB.executeScalar(sql));\n\n      if (OrderLine > 0) {\n        mTab.setValue("C_OrderLine_ID", OrderLine);\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err.message;\n      //MessageBox.Show("CalloutRequisition- Product");\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Requisition Line - Charge.\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value"> New Value</param>\n  /// <returns>null or error message</returns>\n\n  CalloutRequisition.prototype.Charge = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    try {\n      if (this.isCalloutActive() || value == null || value.toString() == "") {\n        return "";\n      }\n      this.setCalloutActive(true);\n      var C_Charge_ID = Util.getValueOfInt(value);\n      if (C_Charge_ID == null || C_Charge_ID == 0) {\n        this.setCalloutActive(false);\n        return "";\n      }\n\n      //\tNo Product defined\n      if (mTab.getValue("M_Product_ID") != null) {\n        mTab.setValue("M_Product_ID", null);\n      }\n      mTab.setValue("M_AttributeSetInstance_ID", null);\n\n      //set default UOM for charge.\n      var c_uom_id = ctx.getContextAsInt("#C_UOM_ID");\n      if (c_uom_id > 0) {\n        mTab.setValue("C_UOM_ID", c_uom_id); //\tDefault charge from context\n      } else {\n        mTab.setValue("C_UOM_ID", 100); //\tEA\n      }\n\n      //var chargeAmt = VIS.dataContext.getJSONRecord("MCharge/GetCharge", C_Charge_ID.toString());\n      //mTab.setValue("PriceActual", Util.getValueOfDecimal(chargeAmt));\n\n      //190 - Set PriceActual and Print Description\n      var dr = VIS.dataContext.getJSONRecord("MCharge/GetChargeDetails", C_Charge_ID.toString());\n      if (dr != null) {\n        mTab.setValue("PriceActual", Util.getValueOfDecimal(dr["ChargeAmt"]));\n        mTab.setValue("PrintDescription", Util.getValueOfString(dr["PrintDescription"]));\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *\tOrder Line - Amount.\r\n   *\t\t- called from Qty, PriceActual\r\n   *\t\t- calculates LineNetAmt\r\n   *  @param ctx context\r\n   *  @param WindowNo current Window No\r\n   *  @param mTab Grid Tab\r\n   *  @param mField Grid Field\r\n   *  @param value New Value\r\n   *  @return null or error message\r\n   */\n  CalloutRequisition.prototype.Amt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive() || value == null) return "";\n    try {\n      this.setCalloutActive(true);\n      var StdPrecision = ctx.getStdPrecision();\n      var PriceListPrecision = StdPrecision;\n      var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n      var dr;\n      if (M_PriceList_ID != 0) {\n        dr = VIS.dataContext.getJSONRecord("MPriceList/GetPriceList", M_PriceList_ID.toString());\n        if (dr != null) {\n          StdPrecision = Util.getValueOfInt(dr["StdPrecision"]);\n          PriceListPrecision = Util.getValueOfInt(dr["PriceListPrecision"]);\n        }\n      }\n\n      //\tQty changed - recalc price\n      if (mField.getColumnName() == "Qty" && "Y" == ctx.getContext("DiscountSchema")) {\n        var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n        var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n        var qty = value;\n        var isSOTrx = false;\n        //pp.SetM_PriceList_ID(M_PriceList_ID);\n        var M_PriceList_Version_ID = ctx.getContextAsInt(windowNo, "M_PriceList_Version_ID");\n        //pp.SetM_PriceList_Version_ID(M_PriceList_Version_ID);\n        ///DateTime orderDate = (DateTime)mTab.getValue("DateInvoiced");\n        var orderDate = mTab.getValue("DateInvoiced");\n        // pp.SetPriceDate(orderDate);\n        //\n\n        //*******************\n        var paramString = M_Product_ID.concat(",", C_BPartner_ID, ",",\n        //2\n        qty, ",",\n        //3\n        isSOTrx, ",",\n        //4 \n        M_PriceList_ID, ",",\n        //5\n        M_PriceList_Version_ID, ",",\n        //6\n        orderDate, ",", null); //7\n\n        //Get product price information\n        var dr = null;\n        dr = VIS.dataContext.getJSONRecord("MProductPricing/GetProductPricing", paramString);\n        mTab.setValue("PriceActual", Util.getValueOfDecimal(dr["PriceActual"].toFixed(PriceListPrecision)));\n      }\n      var Qty = mTab.getValue("QtyEntered");\n      //Decimal PriceActual = (Decimal)mTab.getValue("PriceActual");\n      var PriceActual = mTab.getValue("PriceActual");\n\n      //\tget values\n      this.log.fine("amt - Qty=" + Qty + ", Price=" + PriceActual + ", Precision=" + PriceListPrecision);\n\n      //\tMultiply\n      var LineNetAmt = Qty * PriceActual;\n      if (Util.scale(LineNetAmt) > StdPrecision) LineNetAmt = LineNetAmt.toFixed(StdPrecision); //, MidpointRounding.AwayFromZero);\n      mTab.setValue("LineNetAmt", LineNetAmt);\n      // JID_1744 the precision should be as per currency percision\n      mTab.setValue("PriceActual", Util.getValueOfDecimal(PriceActual.toFixed(PriceListPrecision)));\n      this.log.info("amt - LineNetAmt=" + LineNetAmt);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.saveError("CalloutRequisation", err);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /// <summary>\n  /// Requisition Line - Quantity.\n  /// - called from C_UOM_ID, QtyEntered\n  /// - enforces qty UOM relationship\n  /// </summary> JID_0996 - On entering the Entered qty callout will update the qty field in base UOM.\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns>null or error message</returns>\n  CalloutRequisition.prototype.Qty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    var paramStr = "";\n    if (this.isCalloutActive() || value == null || value.toString() == "") return "";\n    console.log("Before Charge Or Product");\n    if (Util.getValueOfInt(mTab.getValue("M_Product_ID")) == 0 && Util.getValueOfInt(mTab.getValue("C_Charge_ID")) == 0) {\n      return "";\n    }\n    console.log("After Charge Or Product");\n    this.setCalloutActive(true);\n    try {\n      var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n      if (steps) {\n        this.log.Warning("init - M_Product_ID=" + M_Product_ID + " - ");\n      }\n      var QtyEntered = VIS.Env.ZERO;\n      var QtyRequired = VIS.Env.ZERO;\n      var PriceActual, PriceEntered;\n      var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n\n      //\tNo Product\n      if (M_Product_ID == 0) {\n        QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n        QtyRequired = QtyEntered;\n        mTab.setValue("Qty", QtyRequired);\n      }\n      //\tUOM Changed - convert from Entered -> Product\n      /** Price List - Ensuring valid Uom id ** Dt:01/02/2021 ** Modified By: Kumar **/else if (mField.getColumnName() == "C_UOM_ID" || mField.getColumnName() == "M_AttributeSetInstance_ID") {\n        var C_UOM_To_ID = Util.getValueOfInt(mTab.getValue("C_UOM_ID"));\n        QtyEntered = Util.getValueOfDecimal(mTab.getValue("QtyEntered"));\n        var C_BPartner_ID = ctx.getContextAsInt(windowNo, "C_BPartner_ID");\n        var M_AttributeSetInstance_ID;\n        /** Price List - Ensuring valid Uom id ** Dt:01/02/2021 ** Modified By: Kumar **/\n        if (mField.getColumnName() == "M_AttributeSetInstance_ID") {\n          M_AttributeSetInstance_ID = Util.getValueOfInt(mTab.getValue("M_AttributeSetInstance_ID"));\n        } else {\n          M_AttributeSetInstance_ID = ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID");\n        }\n        var isSOTrx = false;\n        var orderDate = ctx.getContext(windowNo, "DateDoc");\n        var gp = 2;\n        var params = M_Product_ID.toString().concat(",", mTab.getValue("M_Requisition_ID").toString() + "," + Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")) + "," + Util.getValueOfString(mTab.getValue("C_UOM_ID")) + "," + ctx.getAD_Client_ID().toString() + "," + Util.getValueOfString(C_BPartner_ID) + "," + QtyEntered.toString() + "," + M_PriceList_ID.toString());\n        var productPrices = VIS.dataContext.getJSONRecord("MProductPricing/GetPricesOnChange", params);\n        if (productPrices != null) {\n          mTab.setValue("PriceActual", Util.getValueOfDecimal(productPrices["PriceEntered"]));\n          gp = Util.getValueOfInt(productPrices["UOMPrecision"]);\n          QtyRequired = productPrices["QtyOrdered"];\n        }\n\n        //paramStr = M_Product_ID.toString().concat(",", C_BPartner_ID, ",", //2\n        //    QtyEntered, ",", //3\n        //    isSOTrx, ",", //4 \n        //    M_PriceList_ID, ",", //5\n        //    M_PriceList_Version_ID, ",", //6\n        //    orderDate, ",", null, ",", M_AttributeSetInstance_ID.toString(), ",",  //7\n        //    C_UOM_To_ID, ",", 1);\n        ////Get product price information\n        //dr = null;\n        //dr = VIS.dataContext.getJSONRecord("MProductPricing/GetProductPricing", paramStr);\n        //if (dr != null) {\n        //    PriceActual = dr["PriceActual"];\n        //    /** Price List - Ensuring valid Uom id ** Dt:01/02/2021 ** Modified By: Kumar **/\n        //    if (mField.getColumnName() == "M_AttributeSetInstance_ID") {\n        //        mTab.setValue("PriceActual", Util.getValueOfInt(PriceActual));\n        //    }\n        //}\n        //Get precision from server side\n        //paramStr = C_UOM_To_ID.toString().concat(",");\n        //var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n\n        var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp));\n        if (QtyEntered != QtyEntered1) {\n          this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n          QtyEntered = QtyEntered1;\n          mTab.setValue("QtyEntered", QtyEntered);\n        }\n\n        //Conversion of Qty Entered\n        //paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ","\n        //    , QtyEntered.toString());\n        //var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n        //QtyRequired = pc;\n\n        if (QtyRequired == null) {\n          QtyRequired = QtyEntered;\n        }\n        mTab.setValue("Qty", QtyRequired);\n\n        //var conversion = QtyEntered != QtyRequired;\n\n        //if (PriceActual == 0) {\n        //    //Conversion of Price Entered\n        //    PriceActual = Util.getValueOfDecimal(mTab.getValue("PriceActual"));\n        //    paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",", //2\n        //        PriceActual.toString()); //3\n        //    pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n\n        //    PriceEntered = pc;\n        //    if (PriceEntered == null)\n        //        PriceEntered = PriceActual;\n        //    this.log.fine("UOM=" + C_UOM_To_ID\n        //        + ", QtyEntered/PriceActual=" + QtyEntered + "/" + PriceActual\n        //        + " -> " + conversion\n        //        + " QtyRequired/PriceEntered=" + QtyRequired + "/" + PriceEntered);\n        //    ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n\n        //    mTab.setValue("PriceActual", PriceEntered);\n        //}\n        //else {\n        //    mTab.setValue("PriceActual", PriceActual);\n        //}                \n      }\n      //\tQtyEntered changed - calculate QtyRequired\n      else if (mField.getColumnName() == "QtyEntered") {\n        var C_UOM_To_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n        QtyEntered = Util.getValueOfDecimal(value);\n        //Get precision from server\n        paramStr = C_UOM_To_ID.toString().concat(","); //1\n        var gp = VIS.dataContext.getJSONRecord("MUOM/GetPrecision", paramStr);\n        var QtyEntered1 = QtyEntered.toFixed(Util.getValueOfInt(gp)); //, MidpointRounding.AwayFromZero);\n\n        if (QtyEntered != QtyEntered1) {\n          this.log.fine("Corrected QtyEntered Scale UOM=" + C_UOM_To_ID + "; QtyEntered=" + QtyEntered + "->" + QtyEntered1);\n          QtyEntered = QtyEntered1;\n          mTab.setValue("QtyEntered", QtyEntered);\n        }\n        paramStr = M_Product_ID.toString().concat(",", C_UOM_To_ID.toString(), ",",\n        //2\n        QtyEntered.toString()); //3\n        var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n        QtyRequired = pc;\n        if (QtyRequired == null) QtyRequired = QtyEntered;\n        var conversion = QtyEntered != QtyRequired;\n        this.log.fine("UOM=" + C_UOM_To_ID + ", QtyEntered=" + QtyEntered + " -> " + conversion + " Qty=" + QtyRequired);\n        ctx.setContext(windowNo, "UOMConversion", conversion ? "Y" : "N");\n        mTab.setValue("Qty", QtyRequired);\n      }\n      PriceActual = Util.getValueOfDecimal(mTab.getValue("PriceActual"));\n      var StdPrecision = ctx.getStdPrecision();\n      if (M_PriceList_ID > 0) {\n        var dr = VIS.dataContext.getJSONRecord("MPriceList/GetPriceList", M_PriceList_ID.toString());\n        if (dr != null) {\n          StdPrecision = Util.getValueOfInt(dr["StdPrecision"]);\n        }\n        dr = null;\n      }\n      var LineNetAmt = QtyEntered * PriceActual;\n      if (Util.scale(LineNetAmt) > StdPrecision) LineNetAmt = LineNetAmt.toFixed(StdPrecision); //, MidpointRounding.AwayFromZero);\n      mTab.setValue("LineNetAmt", LineNetAmt);\n      this.log.info("amt - LineNetAmt=" + LineNetAmt);\n    } catch (err) {\n      this.setCalloutActive(false);\n      return err;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n  *  //VIS0336:for setting the Projectline details on req line tab\r\n  * @param {any} ctx\r\n  * @param {any} windowNo\r\n  * @param {any} mTab\r\n  * @param {any} mField\r\n  * @param {any} value\r\n  * @param {any} oldValue\r\n  */\n  CalloutRequisition.prototype.ProjectLine = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null) {\n      return "";\n    }\n    if (mTab.getValue("C_ProjectLine_ID") != null) {\n      var paramString = mTab.getValue("C_ProjectLine_ID");\n      var data = VIS.dataContext.getJSONRecord("MProject/GetReqLinesProjectDetail", paramString);\n      if (data != null) {\n        mTab.setValue("M_Product_ID", data["ProductID"]);\n        mTab.setValue("M_AttributeSetInstance_ID", data["AtrrInstance"]);\n        mTab.setValue("C_Charge_ID", data["ChargeID"]);\n        mTab.setValue("C_UOM_ID", data["UOM"]);\n        mTab.setValue("PriceActual", data["PriceActual"]);\n        mTab.setValue("QtyEntered", data["QtyEntered"]);\n      }\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n  VIS.Model.CalloutRequisition = CalloutRequisition;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutrequisition.js?\n}')},"./Areas/VAS/Scripts/model/callouttax.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n\n  //**************CalloutTax Start**********\n  function CalloutTax() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutTax"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutTax, VIS.CalloutEngine); //inherit prototype\n  CalloutTax.prototype.Tax = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value == 0 || value.toString() == "") {\n      return "";\n    }\n    var C_Tax_ID = 0;\n    var Rate = VIS.Env.ZERO;\n    var LineAmount = "";\n    var TotalRate = VIS.Env.ZERO;\n    C_Tax_ID = Util.getValueOfInt(mTab.getValue("C_Tax_ID"));\n    //var sqltax = "select rate from c_tax WHERE c_tax_id=" + C_Tax_ID + "";\n    //Rate = Util.getValueOfDecimal(VIS.DB.executeScalar(sqltax, null, null));        \n\n    // if Surcharge Tax is selected on Tax Rate, calculate surcharge tax amount accordingly\n    if (mTab.getField("SurchargeAmt") != null) {\n      var StdPrecision = 0;\n      var IsTaxIncluded = false;\n      var currency = VIS.dataContext.getJSONRecord("MPriceList/GetPriceListData", Util.getValueOfInt(mTab.getValue("M_PriceList_ID")).toString());\n      if (currency != null) {\n        StdPrecision = currency["StdPrecision"];\n        IsTaxIncluded = "Y" == currency["IsTaxIncluded"];\n      }\n      var LineNetAmt = Util.getValueOfDecimal(mTab.getValue("LineNetAmt"));\n      var dr = VIS.dataContext.getJSONRecord("MTax/CalculateSurcharge", C_Tax_ID.toString() + "," + LineNetAmt.toString() + "," + StdPrecision.toString() + "," + IsTaxIncluded.toString());\n      TotalRate = dr["TaxAmt"];\n      mTab.setValue("TaxAmt", TotalRate);\n      mTab.setValue("SurchargeAmt", dr["SurchargeAmt"]);\n      if (!IsTaxIncluded) {\n        mTab.setValue("GrandTotal", LineNetAmt + TotalRate + dr["SurchargeAmt"]);\n      } else {\n        mTab.setValue("GrandTotal", LineNetAmt);\n      }\n    } else {\n      // JID_0872: Grand Total is not calculating right\n      Rate = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", C_Tax_ID.toString());\n      var LineNetAmt = Util.getValueOfDecimal(mTab.getValue("LineNetAmt"));\n      TotalRate = Util.getValueOfDecimal(LineNetAmt * Rate / 100);\n      TotalRate = Util.getValueOfDecimal(TotalRate.toFixed(2));\n      mTab.setValue("GrandTotal", TotalRate + LineNetAmt);\n      mTab.setValue("taxamt", TotalRate);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /**\r\n   *  VIS319  Set TaxExempt and TaxExemptReason AT Invoice Line and Ordert Line\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutTax.prototype.SetTaxExemptReason = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value == 0 || value.toString() == "" || this.isCalloutActive()) {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      //check whether window is of sales type\n      var isSOTrx = ctx.getWindowContext(windowNo, "IsSOTrx", true) == "Y";\n      var paramString = Util.getValueOfString(mTab.getValue("C_Tax_ID"));\n      //Added parameter in order to handle the connditions\n      if (mTab.getKeyColumnName() == "C_InvoiceLine_ID") {\n        paramString = Util.getValueOfString(mTab.getValue("C_Tax_ID")) + "," + Util.getValueOfString(mTab.getValue("AD_Org_ID")) + "," + Util.getValueOfString(mTab.getValue("C_Invoice_ID")) + "," + Util.getValueOfString(ctx.getWindowContext(windowNo, "C_BPartner_Location_ID")) + "," + Util.getValueOfString(isSOTrx) + ", " + mTab.getKeyColumnName().toString();\n      } else if (mTab.getKeyColumnName() == "C_OrderLine_ID") {\n        paramString = Util.getValueOfString(mTab.getValue("C_Tax_ID")) + "," + Util.getValueOfString(mTab.getValue("AD_Org_ID")) + "," + Util.getValueOfString(mTab.getValue("C_Order_ID")) + "," + Util.getValueOfString(ctx.getWindowContext(windowNo, "C_BPartner_Location_ID")) + "," + Util.getValueOfString(isSOTrx) + ", " + mTab.getKeyColumnName().toString();\n      }\n      var data = VIS.dataContext.getJSONRecord("MTax/GetTaxExempt", paramString);\n      if (data != null) {\n        mTab.setValue("IsTaxExempt", Util.getValueOfString(data["IsTaxExempt"]).equals("Y") ? true : false);\n        mTab.setValue("C_TaxExemptReason_ID", Util.getValueOfInt(data["C_TaxExemptReason_ID"]));\n      }\n      //if their is any message on change of tax then displayed in ui for sale type windows\n      if (data["errorMsg"] != "" && isSOTrx) {\n        VIS.ADialog.info("", "", data["errorMsg"]);\n      }\n    } catch (err) {\n      this.log.log(Level.SEVERE, sql, err);\n      this.setCalloutActive(false);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * VIS319_: When TaxExempt is true then Rate should be zero\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n\n  CalloutTax.prototype.SetTaxRate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value == 0 || value.toString() == "" || this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var taxexempt = mTab.getValue("IsTaxExempt");\n    if (taxexempt) {\n      mTab.setValue("Rate", 0);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutTax = CalloutTax;\n  //***********CalloutTax End *************\n\n  //************CalloutTaxAmt Start***************\n  function CalloutTaxAmt() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutTaxAmt"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutTaxAmt, VIS.CalloutEngine); //inherit prototype\n  CalloutTaxAmt.prototype.TaxID = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      var rate = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", Util.getValueOfInt(value));\n      if (rate != 0) {\n        var taxAmt = Util.getValueOfDecimal(mTab.getValue("ApprovedExpenseAmt")) * rate / 100;\n        taxAmt = taxAmt.toFixed(2);\n        mTab.setValue("TaxAmt", taxAmt);\n      } else {\n        mTab.setValue("TaxAmt", VIS.Env.ZERO);\n      }\n      this.setCalloutActive(false);\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutTaxAmt.prototype.ExpenseAmt = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      var rate = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", Util.getValueOfInt(mTab.getValue("C_Tax_ID")));\n      if (rate != 0) {\n        var taxAmt = Util.getValueOfDecimal(value) * rate / 100;\n        taxAmt = taxAmt.toFixed(2);\n        mTab.setValue("TaxAmt", taxAmt);\n      } else {\n        mTab.setValue("TaxAmt", VIS.Env.ZERO);\n      }\n      this.setCalloutActive(false);\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutTaxAmt = CalloutTaxAmt;\n  //*************CalloutTaxAmt End**************\n\n  //**************CalloutTaxAmount Start*********************\n\n  function CalloutTaxAmount() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutTaxAmount"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutTaxAmount, VIS.CalloutEngine); //inherit prototype\n  // Method on payment window\n  CalloutTaxAmount.prototype.PaymentTaxAmount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      // get precision from currency\n      var currency = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", mTab.getValue("C_Currency_ID").toString());\n      var StdPrecision = currency["StdPrecision"];\n      if (mField.getColumnName() == "C_Tax_ID") {\n        //if (Util.getValueOfDecimal(mTab.getValue("PayAmt")) > 0) {\n        var dr = null;\n        // if Surcharge Tax is selected on Tax Rate, calculate surcharge tax amount accordingly\n        if (mTab.getField("SurchargeAmt") != null) {\n          dr = VIS.dataContext.getJSONRecord("MTax/CalculateSurcharge", value.toString() + "," + mTab.getValue("PayAmt").toString() + "," + StdPrecision.toString());\n          mTab.setValue("TaxAmount", dr["TaxAmt"]);\n          mTab.setValue("SurchargeAmt", dr["SurchargeAmt"]);\n          this.setCalloutActive(false);\n          return "";\n        } else {\n          dr = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", value.toString());\n          var Rate = Util.getValueOfDecimal(dr);\n          if (Rate > 0) {\n            //Formula for caluculating Tax amount ==>  Amount - Amount / ((Rate / 100) + 1)\n            var TaxAmt = Util.getValueOfDecimal(Util.getValueOfDecimal(mTab.getValue("PayAmt")) - Util.getValueOfDecimal(mTab.getValue("PayAmt")) / (Rate / 100 + 1));\n\n            // Round the amount according to currency precision\n            TaxAmt = Util.getValueOfDecimal(TaxAmt.toFixed(StdPrecision));\n            mTab.setValue("TaxAmount", TaxAmt);\n          } else {\n            mTab.setValue("TaxAmount", 0);\n            this.setCalloutActive(false);\n            return "";\n          }\n        }\n        //}\n        //else {\n        //    this.setCalloutActive(false);\n        //    return "";\n        //}\n      } else {\n        if (Util.getValueOfInt(mTab.getValue("C_Tax_ID")) > 0) {\n          var dr = null;\n          // if Surcharge Tax is selected on Tax Rate, calculate surcharge tax amount accordingly\n          if (mTab.getField("SurchargeAmt") != null) {\n            dr = VIS.dataContext.getJSONRecord("MTax/CalculateSurcharge", mTab.getValue("C_Tax_ID").toString() + "," + mTab.getValue("PayAmt").toString() + "," + StdPrecision.toString());\n            mTab.setValue("TaxAmount", dr["TaxAmt"]);\n            mTab.setValue("SurchargeAmt", dr["SurchargeAmt"]);\n            this.setCalloutActive(false);\n            return "";\n          } else {\n            dr = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", mTab.getValue("C_Tax_ID").toString());\n            var Rate = Util.getValueOfDecimal(dr);\n            if (Rate > 0) {\n              //Formula for caluculating Tax amount ==>  Amount - Amount / ((Rate / 100) + 1)\n              var TaxAmt = Util.getValueOfDecimal(Util.getValueOfDecimal(mTab.getValue("PayAmt")) - Util.getValueOfDecimal(mTab.getValue("PayAmt")) / (Rate / 100 + 1));\n\n              // Round the amount according to currency precision                        \n              TaxAmt = Util.getValueOfDecimal(TaxAmt.toFixed(StdPrecision));\n              mTab.setValue("TaxAmount", TaxAmt);\n            } else {\n              mTab.setValue("TaxAmount", 0);\n              this.setCalloutActive(false);\n              return "";\n            }\n          }\n        } else {\n          this.setCalloutActive(false);\n          return "";\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString()); // SD\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  // Method on Cash Journal\n  CalloutTaxAmount.prototype.CashLineTaxAmount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    try {\n      var StdPrecision = 2;\n      // get precision from currency if tax id is greater than 0\n      if (mField.getColumnName() == "C_Tax_ID" || Util.getValueOfInt(mTab.getValue("C_Tax_ID")) > 0) {\n        var currency = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", ctx.getContext(windowNo, "C_Currency_ID").toString());\n        StdPrecision = currency["StdPrecision"];\n      }\n      if (mField.getColumnName() == "C_Tax_ID") {\n        if (Util.getValueOfDecimal(mTab.getValue("Amount")) != 0) {\n          var dr = null;\n          // if Surcharge Tax is selected on Tax Rate, calculate surcharge tax amount accordingly\n          if (mTab.getField("SurchargeAmt") != null) {\n            dr = VIS.dataContext.getJSONRecord("MTax/CalculateSurcharge", value.toString() + "," + mTab.getValue("Amount").toString() + "," + StdPrecision.toString());\n            mTab.setValue("TaxAmt", dr["TaxAmt"]);\n            mTab.setValue("SurchargeAmt", dr["SurchargeAmt"]);\n            this.setCalloutActive(false);\n            return "";\n          } else {\n            dr = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", value.toString());\n            var Rate = Util.getValueOfDecimal(dr);\n            if (Rate > 0) {\n              //Formula for caluculating Tax amount ==>  Amount - Amount / ((Rate / 100) + 1)\n              var TaxAmt = Util.getValueOfDecimal(Util.getValueOfDecimal(mTab.getValue("Amount")) - Util.getValueOfDecimal(mTab.getValue("Amount")) / (Rate / 100 + 1));\n\n              // JID_1037: On cash line tax amount field was not working accordingling to currency precision                            \n              TaxAmt = Util.getValueOfDecimal(TaxAmt.toFixed(StdPrecision));\n              mTab.setValue("TaxAmt", TaxAmt);\n            } else {\n              mTab.setValue("TaxAmt", 0);\n              this.setCalloutActive(false);\n              return "";\n            }\n          }\n        } else {\n          this.setCalloutActive(false);\n          return "";\n        }\n      } else {\n        if (Util.getValueOfInt(mTab.getValue("C_Tax_ID")) > 0) {\n          var dr = null;\n          // if Surcharge Tax is selected on Tax Rate, calculate surcharge tax amount accordingly\n          if (mTab.getField("SurchargeAmt") != null) {\n            dr = VIS.dataContext.getJSONRecord("MTax/CalculateSurcharge", mTab.getValue("C_Tax_ID").toString() + "," + mTab.getValue("Amount").toString() + "," + StdPrecision.toString());\n            mTab.setValue("TaxAmt", dr["TaxAmt"]);\n            mTab.setValue("SurchargeAmt", dr["SurchargeAmt"]);\n            this.setCalloutActive(false);\n            return "";\n          } else {\n            dr = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", mTab.getValue("C_Tax_ID").toString());\n            var Rate = Util.getValueOfDecimal(dr);\n            if (Rate > 0) {\n              //Formula for caluculating Tax amount ==>  Amount - Amount / ((Rate / 100) + 1)\n              var TaxAmt = Util.getValueOfDecimal(Util.getValueOfDecimal(mTab.getValue("Amount")) - Util.getValueOfDecimal(mTab.getValue("Amount")) / (Rate / 100 + 1));\n\n              // JID_1037: On cash line tax amount field was not working accordingling to currency precision\n              TaxAmt = Util.getValueOfDecimal(TaxAmt.toFixed(StdPrecision));\n              mTab.setValue("TaxAmt", TaxAmt);\n            } else {\n              mTab.setValue("TaxAmt", 0);\n              this.setCalloutActive(false);\n              return "";\n            }\n          }\n        } else {\n          this.setCalloutActive(false);\n          return "";\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString()); // SD\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  // Method on Bank Statement Line\n  CalloutTaxAmount.prototype.BankStatementLineTaxAmount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var paramString = "";\n    try {\n      // Need to round Tax Amount according to Currency Precision  \n      paramString = mTab.getValue("C_Currency_ID").toString();\n      var currency = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", paramString);\n      var StdPrecision = currency["StdPrecision"];\n      if (mField.getColumnName() == "C_Tax_ID") {\n        if (Util.getValueOfDecimal(mTab.getValue("ChargeAmt")) != 0) {\n          var dr = null;\n          // if Surcharge Tax is selected on Tax Rate, calculate surcharge tax amount accordingly\n          if (mTab.getField("SurchargeAmt") != null) {\n            dr = VIS.dataContext.getJSONRecord("MTax/CalculateSurcharge", value.toString() + "," + mTab.getValue("ChargeAmt").toString() + "," + StdPrecision.toString());\n            mTab.setValue("TaxAmt", dr["TaxAmt"]);\n            mTab.setValue("SurchargeAmt", dr["SurchargeAmt"]);\n            this.setCalloutActive(false);\n            return "";\n          } else {\n            dr = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", value.toString());\n            var Rate = Util.getValueOfDecimal(dr);\n            if (Rate > 0) {\n              //Formula for caluculating Tax amount ==>  Amount - Amount / ((Rate / 100) + 1)\n              var TaxAmt = Util.getValueOfDecimal(Util.getValueOfDecimal(mTab.getValue("ChargeAmt")) - Util.getValueOfDecimal(mTab.getValue("ChargeAmt")) / (Rate / 100 + 1));\n\n              // JID_0333: Need to round Tax Amount according to Currency Precision                            \n              TaxAmt = Util.getValueOfDecimal(TaxAmt.toFixed(StdPrecision));\n              mTab.setValue("TaxAmt", TaxAmt);\n            } else {\n              mTab.setValue("TaxAmt", 0);\n              this.setCalloutActive(false);\n              ctx = windowNo = mTab = mField = value = oldValue = null;\n              return "";\n            }\n          }\n        } else {\n          this.setCalloutActive(false);\n          ctx = windowNo = mTab = mField = value = oldValue = null;\n          return "";\n        }\n      } else {\n        if (Util.getValueOfInt(mTab.getValue("C_Tax_ID")) > 0) {\n          var dr = null;\n          if (mTab.getField("SurchargeAmt") != null) {\n            // if Surcharge Tax is selected on Tax Rate, calculate surcharge tax amount accordingly\n            dr = VIS.dataContext.getJSONRecord("MTax/CalculateSurcharge", mTab.getValue("C_Tax_ID").toString() + "," + mTab.getValue("ChargeAmt").toString() + "," + StdPrecision.toString());\n            mTab.setValue("TaxAmt", dr["TaxAmt"]);\n            mTab.setValue("SurchargeAmt", dr["SurchargeAmt"]);\n            this.setCalloutActive(false);\n            return "";\n          } else {\n            dr = VIS.dataContext.getJSONRecord("MTax/GetTaxRate", mTab.getValue("C_Tax_ID").toString());\n            var Rate = Util.getValueOfDecimal(dr);\n            if (Rate > 0) {\n              //Formula for caluculating Tax amount ==>  Amount - Amount / ((Rate / 100) + 1)\n              var TaxAmt = Util.getValueOfDecimal(Util.getValueOfDecimal(mTab.getValue("ChargeAmt")) - Util.getValueOfDecimal(mTab.getValue("ChargeAmt")) / (Rate / 100 + 1));\n\n              // JID_0333: Need to round Tax Amount according to Currency Precision                           \n              TaxAmt = Util.getValueOfDecimal(TaxAmt.toFixed(StdPrecision));\n              mTab.setValue("TaxAmt", TaxAmt);\n            } else {\n              mTab.setValue("TaxAmt", 0);\n              this.setCalloutActive(false);\n              ctx = windowNo = mTab = mField = value = oldValue = null;\n              return "";\n            }\n          }\n        } else {\n          this.setCalloutActive(false);\n          ctx = windowNo = mTab = mField = value = oldValue = null;\n          return "";\n        }\n      }\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString()); // SD\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutTaxAmount = CalloutTaxAmount;\n  //**************CalloutTaxAmount End*********************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/callouttax.js?\n}')},"./Areas/VAS/Scripts/model/calloutteamforecast.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n  function CalloutTeamForcast() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutTeamForcast"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutTeamForcast, VIS.CalloutEngine); //inherit prototype\n  CalloutTeamForcast.prototype.ProductInfo = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    var M_Product_ID = value;\n    if (M_Product_ID == null || M_Product_ID == 0) return "";\n    var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n    if (M_Product_ID == null || M_Product_ID == 0) return "";\n    var M_PriceList_ID = ctx.getContextAsInt(windowNo, "M_PriceList_ID");\n    var M_Attribute_ID = ctx.getContextAsInt(windowNo, "M_AttributeSetInstance_ID");\n    if (M_PriceList_ID != 0) {\n      var fields = M_Product_ID.toString() + ", " + M_PriceList_ID.toString() + "," + M_Attribute_ID.toString();\n      var PriceStd = VIS.dataContext.getJSONRecord("MTeamForcast/GetProductPrice", fields);\n      if (PriceStd != 0) {\n        mTab.setValue("PriceStd", PriceStd);\n        mTab.setValue("UnitPrice", PriceStd);\n        mTab.setValue("PriceStd", PriceStd * Util.getValueOfDecimal(mTab.getValue("QtyEntered")));\n        mTab.setValue("TotalPrice", PriceStd * Util.getValueOfDecimal(mTab.getValue("QtyEntered")));\n      }\n    } else {\n      VIS.ADialog.info("PriceLisetNotFound");\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  CalloutTeamForcast.prototype.Charge = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    try {\n      if (this.isCalloutActive() || value == null || value.toString() == "") {\n        //mTab.getField("C_UOM_ID").setReadOnly(false);\n        return "";\n      }\n      this.setCalloutActive(true);\n\n      //\tNo Product defined\n      if (mTab.getValue("M_Product_ID") != null) {\n        mTab.setValue("M_Product_ID", null);\n        mTab.setValue("M_AttributeSetInstance_ID", null);\n      }\n\n      //\tDefault charge from context\n      var c_uom_id = ctx.getContextAsInt("#C_UOM_ID");\n      if (c_uom_id > 0) {\n        mTab.setValue("C_UOM_ID", c_uom_id);\n      } else {\n        mTab.setValue("C_UOM_ID", 100); //\tEA\n      }\n      //mTab.getField("C_UOM_ID").setReadOnly(true);\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.log(Level.SEVERE, sql, err);\n      return err;\n    }\n    this.setCalloutActive(false);\n    oldValue = null;\n  };\n  CalloutTeamForcast.prototype.CalculatePrice = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    // \n    if (this.isCalloutActive() || value == null || value.toString() == "" || Util.getValueOfInt(value) <= 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var stdPrecision = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", Util.getValueOfString(ctx.getContextAsInt(windowNo, "C_Currency_ID")));\n    var price = Util.getValueOfDecimal(mTab.getValue("UnitPrice")) * Util.getValueOfDecimal(mTab.getValue("BaseQty"));\n    // ForcastLine.SetQtyEntered(price);\n    mTab.setValue("PriceStd", price.toFixed(Util.getValueOfInt(stdPrecision.StdPrecision)));\n    mTab.setValue("TotalPrice", price.toFixed(Util.getValueOfInt(stdPrecision.StdPrecision)));\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * UOM Conversion\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutTeamForcast.prototype.Qty = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var C_UOM_ID = mTab.getValue("C_UOM_ID");\n    if (C_UOM_ID == null) {\n      C_UOM_ID = ctx.getContextAsInt(windowNo, "C_UOM_ID");\n    }\n    var Qty = mTab.getValue("BaseQty");\n    var stdPrecision = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", Util.getValueOfString(ctx.getContextAsInt(windowNo, "C_Currency_ID")));\n    if (mTab.getValue("M_Product_ID") != null) {\n      var M_Product_ID = mTab.getValue("M_Product_ID");\n      var paramStr = M_Product_ID.toString().concat(",", C_UOM_ID.toString(), ",", Qty.toString());\n      var pc = VIS.dataContext.getJSONRecord("MUOMConversion/ConvertProductFrom", paramStr);\n      if (pc != null) {\n        mTab.setValue("QtyEntered", pc);\n      } else {\n        mTab.setValue("QtyEntered", Qty);\n      }\n    } else {\n      mTab.setValue("QtyEntered", Qty);\n    }\n    if (Util.getValueOfDecimal(mTab.getValue("UnitPrice")) != 0 && Qty != 0) {\n      mTab.setValue("PriceStd", (Qty * mTab.getValue("UnitPrice")).toFixed(Util.getValueOfInt(stdPrecision.StdPrecision)));\n      mTab.setValue("TotalPrice", (Qty * mTab.getValue("UnitPrice")).toFixed(Util.getValueOfInt(stdPrecision.StdPrecision)));\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * set currency on the basis of Pricelist\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutTeamForcast.prototype.Currency = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    //get currency from pricelist\n    var pricelist = VIS.dataContext.getJSONRecord("MPriceList/GetPriceListData", Util.getValueOfString(mTab.getValue("M_PriceList_ID")));\n    if (pricelist["C_Currency_ID"] != null) {\n      mTab.setValue("C_Currency_ID", pricelist["C_Currency_ID"]);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   *Set Std price \r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutTeamForcast.prototype.ProductPrice = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      if (mTab.getValue("M_Product_ID") == null) {\n        //set values to 0 if no product is selected\n        mTab.setValue("PriceStd", 0);\n        mTab.setValue("TotalPrice", 0);\n        mTab.setValue("UnitPrice", 0);\n        mTab.setValue("QtyEntered", 1);\n        mTab.setValue("BaseQty", 1);\n      }\n      return "";\n    }\n    this.setCalloutActive(true);\n    if (ctx.getContextAsInt(windowNo, "M_PriceList_ID") > 0) {\n      var stdPrecision = VIS.dataContext.getJSONRecord("MCurrency/GetCurrency", Util.getValueOfString(ctx.getContextAsInt(windowNo, "C_Currency_ID")));\n      var paramString = Util.getValueOfString(mTab.getValue("M_Product_ID")).concat(",", Util.getValueOfString(mTab.getValue("M_AttributeSetInstance_ID")), ",", Util.getValueOfString(ctx.getContextAsInt(windowNo, "M_PriceList_ID")), ",", Util.getValueOfString(mTab.getValue("C_UOM_ID")));\n\n      //get the price from product price inly if pricelist is selected\n      var ProductData = VIS.dataContext.getJSONRecord("MProductPricing/GetProductdata", paramString);\n      if (ProductData != null) {\n        mTab.setValue("PriceStd", ProductData["PriceStd"]);\n        mTab.setValue("UnitPrice", ProductData["PriceStd"]);\n        mTab.setValue("PriceStd", (ProductData["PriceStd"] * Util.getValueOfDecimal(mTab.getValue("BaseQty"))).toFixed(Util.getValueOfInt(stdPrecision.StdPrecision)));\n        mTab.setValue("TotalPrice", (ProductData["PriceStd"] * Util.getValueOfDecimal(mTab.getValue("BaseQty"))).toFixed(Util.getValueOfInt(stdPrecision.StdPrecision)));\n        if (Util.getValueOfInt(mTab.getValue("C_UOM_ID")) == 0) {\n          mTab.setValue("C_UOM_ID", ProductData["C_UOM_ID"]);\n        }\n        if (mTab.findColumn("IsBOM") > 0) {\n          mTab.setValue("IsBOM", ProductData["IsBOM"]);\n        }\n      }\n    }\n    //set BOM,BOMuse and Routing\n    var BOMData = VIS.dataContext.getJSONRecord("MTeamForcast/GetBOMdetails", Util.getValueOfString(mTab.getValue("M_Product_ID")));\n    if (BOMData != null) {\n      mTab.setValue("BOMUse", BOMData["BOMUse"]);\n      mTab.setValue("VAMFG_M_Routing_ID", BOMData["VAMFG_M_Routing_ID"]);\n      mTab.setValue("M_BOM_ID", BOMData["M_BOM_ID"]);\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  /**\r\n   * Set Period as per account date\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutTeamForcast.prototype.AccountDate = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      var paramString = Util.getValueOfString(mTab.getValue("AD_Client_ID")).concat(",", Util.getValueOfString(mTab.getValue("DateAcct")), ",", Util.getValueOfString(mTab.getValue("AD_Org_ID")));\n\n      //get Period\n      var Period = VIS.dataContext.getJSONRecord("MPeriod/GetPeriod", paramString);\n      if (Period != null) {\n        mTab.setValue("C_Period_ID", Period);\n      }\n    } catch (err) {\n      this.log.log(Level.SEVERE, sql, err);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n\n  /**\r\n   * Set Supervisor\r\n   * @param {any} ctx\r\n   * @param {any} windowNo\r\n   * @param {any} mTab\r\n   * @param {any} mField\r\n   * @param {any} value\r\n   * @param {any} oldValue\r\n   */\n  CalloutTeamForcast.prototype.SuperVisor = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || Util.getValueOfInt(value) == 0) {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      //get supervisor\n      var SuperVisor = VIS.dataContext.getJSONRecord("MTeamForcast/GetSuperVisor", Util.getValueOfString(value));\n      if (SuperVisor != null) {\n        mTab.setValue("Supervisor_ID", SuperVisor);\n      }\n    } catch (err) {\n      this.log.log(Level.SEVERE, sql, err);\n      return err.message;\n    }\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutTeamForcast = CalloutTeamForcast;\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/calloutteamforecast.js?\n}')},"./Areas/VAS/Scripts/model/callouttimeexpense.js":()=>{eval('{;\n(function (VIS, $) {\n  var Level = VIS.Logging.Level;\n  var Util = VIS.Utility.Util;\n\n  //*************CalloutUserTimeRec Start******************\n  function CalloutUserTimeRec() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutUserTimeRec"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutUserTimeRec, VIS.CalloutEngine); //inherit prototype\n\n  /// <summary>\n  /// \n  /// </summary>\n  /// <param name="ctx"></param>\n  /// <param name="WindowNo"></param>\n  /// <param name="mTab"></param>\n  /// <param name="mField"></param>\n  /// <param name="value"></param>\n  /// <returns></returns>\n  CalloutUserTimeRec.prototype.IsInternal = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive()) {\n      return "";\n    }\n    try {\n      this.setCalloutActive(true);\n      // Util.getValueOfInt(value);\n      var paramstring = Util.getValueOfInt(value).toString();\n      var pType = VIS.dataContext.getJSONRecord("MExpenseReport/GetProfiletype", paramstring);\n      //var sql = "select ProfileType from S_Resource where AD_User_ID = " + Util.getValueOfInt(value);\n      //var pType = Util.getValueOfString(VIS.DB.executeScalar(sql, null, null));\n      if (pType != "") {\n        if (pType.toUpper() == "I") {\n          mTab.setValue("IsInternal", true);\n        } else if (pType.toUpper() == "E") {\n          mTab.setValue("IsInternal", false);\n        }\n      }\n      this.setCalloutActive(false);\n    } catch (err) {\n      this.setCalloutActive(false);\n    }\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  };\n  VIS.Model.CalloutUserTimeRec = CalloutUserTimeRec;\n  //**************** CalloutUserTimeRec End ***************\n\n  //*************CalloutTimeExpense Start*******************\n  function CalloutTimeExpense() {\n    VIS.CalloutEngine.call(this, "VIS.CalloutTimeExpense"); //must call\n  }\n  ;\n  VIS.Utility.inheritPrototype(CalloutTimeExpense, VIS.CalloutEngine); //inherit prototype\n\n  /// <summary>\n  /// Expense Report Line\n  //- called from M_Product_ID, S_ResourceAssignment_ID\n  //set ExpenseAmt\n\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current window no</param>\n  /// <param name="mTab">grid tab</param>\n  /// <param name="mField">grid field</param>\n  /// <param name="value">new value</param>\n  /// <returns>null or error message</returns>\n  CalloutTimeExpense.prototype.Product = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n\n    var M_Product_ID = value;\n    if (M_Product_ID == null || Util.getValueOfInt(M_Product_ID) == 0) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var priceActual = null;\n\n    //\tget expense date - or default to today\'s date\n    //var DateExpense = VIS.Env.ctx.getContext("DateExpense");\n    var DateExpense = ctx.getContext(windowNo, "DateExpense");\n    var sql = null;\n    var idr = null;\n    try {\n      var noPrice = true;\n      //JID_1784_1 set UOM of the selected product\n      var UOM = VIS.dataContext.getJSONRecord("MProduct/GetProduct", M_Product_ID.toString());\n      mTab.setValue("C_UOM_ID", Util.getValueOfInt(UOM.C_UOM_ID));\n      //\tSearch Pricelist for current version\n      uom = mTab.getValue("C_UOM_ID");\n      //  var paramString = paramStr = M_Product_ID.toString().concat(\',\').concat(mTab.getValue("S_TimeExpense_ID").toString()).concat(\',\').concat(mTab.getValue("C_UOM_ID").toString().concat(\',\').concat(mTab.getValue("DateExpense").toString()));\n      var paramString = paramStr = M_Product_ID + "," + mTab.getValue("S_TimeExpense_ID") + "," + mTab.getValue("C_UOM_ID") + "," + mTab.getValue("DateExpense");\n      var price = VIS.dataContext.getJSONRecord("MExpenseReport/GetstandardPrice", paramString);\n      //sql = "SELECT pp.PriceStd, "\n      //    + "pp.C_UOM_ID,pv.ValidFrom,pl.C_Currency_ID "\n      //    + "FROM M_Product p, M_ProductPrice pp, M_PriceList pl, M_PriceList_Version pv "\n      //    + "WHERE p.M_Product_ID=pp.M_Product_ID"\n      //    + " AND pp.M_PriceList_Version_ID=pv.M_PriceList_Version_ID"\n      //    + " AND pv.M_PriceList_ID=pl.M_PriceList_ID"\n      //    + " AND pv.IsActive=\'Y\'"\n      //    + " AND p.M_Product_ID=@param1"\t\t//\t1\n      //    + " AND pl.M_PriceList_ID=@param2"\t//\t2\n      //    + " AND pp.C_UOM_ID= " + uom\n      //    + " ORDER BY pv.ValidFrom DESC";\n      ////PreparedStatement pstmt = DataBase.prepareStatement(sql, null);\n      //var param = [];\n      ////pstmt.setInt(1, M_Product_ID.intValue());\n      //param[0] = new VIS.DB.SqlParam("@param1", Util.getValueOfInt(M_Product_ID));\n      ////pstmt.setInt(2, ctx.getContextAsInt(windowNo, "M_PriceList_ID"));\n      //param[1] = new VIS.DB.SqlParam("@param2", ctx.getContextAsInt(windowNo, "M_PriceList_ID"));\n      ////ResultSet rs = pstmt.executeQuery();\n      //idr = VIS.DB.executeReader(sql, param, null);\n      //while (idr.read() && noPrice) {\n      //    // DateTime plDate = rs.GetDateTime("ValidFrom");\n      //    var plDate = idr.get("validfrom");//.GetDateTime("ValidFrom");\n      //    //\twe have the price list\n      //    //\tif order date is after or equal PriceList validFrom\n      //    // if (plDate == null || !DateExpense.before(plDate))\n      //    if (plDate == null || !(DateExpense < plDate)) {\n      //        noPrice = false;\n      //        //\tPrice\n      //        //priceActual =Util.getValueOfDecimal(idr["PriceStd"]);//.GetDecimal("PriceStd");\n      //        priceActual = Util.getValueOfDecimal(idr.get("pricestd"));//.GetDecimal("PriceStd");\n\n      //        if (priceActual == null) {\n      //            priceActual = Util.getValueOfDecimal(idr.get("pricelist"));//.GetDecimal("PriceList");\n      //        }\n      //        if (priceActual == null) {\n      //            priceActual = Util.getValueOfDecimal(idr.get("pricelimit"));//.GetDecimal("PriceLimit");\n      //        }\n      //        //\tCurrency\n      //        var ii = Util.getValueOfInt(idr.get("c_currency_id"));\n      //        if (!(idr == null)) {\n      //            mTab.setValue("C_Currency_ID", ii);\n      //        }\n      //    }\n      //}\n      //idr.close();\n      var priceActual = price["PriceActual"];\n      var currency = price["C_Currency_ID"];\n      mTab.setValue("ExpenseAmt", priceActual);\n      mTab.setValue("C_Currency_ID", currency);\n      mTab.setValue("ConvertedAmt", priceActual);\n      //\tno prices yet - look base pricelist\n      //if (noPrice) {\n      //    //\tFind if via Base Pricelist\n      //    sql = "SELECT bomPriceStd(p.M_Product_ID,pv.M_PriceList_Version_ID) AS PriceStd,"\n      //        + "bomPriceList(p.M_Product_ID,pv.M_PriceList_Version_ID) AS PriceList,"\n      //        + "bomPriceLimit(p.M_Product_ID,pv.M_PriceList_Version_ID) AS PriceLimit,"\n      //        + "p.C_UOM_ID,pv.ValidFrom,pl.C_Currency_ID "\n      //        + "FROM M_Product p, M_ProductPrice pp, M_PriceList pl, M_PriceList bpl, M_PriceList_Version pv "\n      //        + "WHERE p.M_Product_ID=pp.M_Product_ID"\n      //        + " AND pp.M_PriceList_Version_ID=pv.M_PriceList_Version_ID"\n      //        + " AND pv.M_PriceList_ID=bpl.M_PriceList_ID"\n      //        + " AND pv.IsActive=\'Y\'"\n      //        + " AND bpl.M_PriceList_ID=pl.BasePriceList_ID"\t//\tBase\n      //        + " AND p.M_Product_ID=@param1"\t\t//  1\n      //        + " AND pl.M_PriceList_ID=@param2"\t//\t2\n      //        + " ORDER BY pv.ValidFrom DESC";\n      //    var param1 = [];\n      //    //pstmt = DataBase.prepareStatement(sql, null);\n      //    //pstmt.setInt(1, M_Product_ID.intValue());\n      //    param1[0] = new VIS.DB.SqlParam("@param1", Util.getValueOfInt(M_Product_ID));\n\n      //    //pstmt.setInt(2, ctx.getContextAsInt(windowNo, "M_PriceList_ID"));\n      //    param1[1] = new VIS.DB.SqlParam("@param2", ctx.getContextAsInt(windowNo, "M_PriceList_ID"));\n      //    //rs = pstmt.executeQuery();\n      //    idr = VIS.DB.executeReader(sql, param1, null);\n      //    while (idr.read() && noPrice) {\n      //        var plDate = idr.get("validfrom");//.GetDateTime("ValidFrom");\n      //        //\twe have the price list\n      //        //\tif order date is after or equal PriceList validFrom\n      //        if (plDate == null || !(DateExpense < plDate)) {\n      //            noPrice = false;\n      //            //\tPrice\n      //            priceActual = Util.getValueOfDecimal(idr.get("pricestd"));//.GetDecimal("PriceStd");\n      //            if (priceActual == null) {\n      //                priceActual = Util.getValueOfDecimal(idr.get("pricelist"));//.GetDecimal("PriceList");\n      //            }\n      //            if (priceActual == null) {\n      //                priceActual = Util.getValueOfDecimal(idr.get("pricelimit"));//.GetDecimal("PriceLimit");\n      //            }\n      //            //\tCurrency\n      //            var ii = Util.getValueOfInt(idr.get("c_currency_id"));\n      //            if (!(idr == null)) {\n      //                mTab.setValue("C_Currency_ID", ii);\n      //            }\n      //        }\n      //    }\n      //    idr.close();\n      //}\n    } catch (err) {\n      if (idr != null) {\n        idr.close();\n      }\n      this.log.log(Level.SEVERE, sql, err);\n      this.setCalloutActive(false);\n      return e.message; //.getLocalizedMessage();\n    }\n\n    //\tfinish\n    this.setCalloutActive(false); //\tcalculate amount\n    //if (priceActual == null)\n    //    priceActual = VIS.Env.ZERO;\n    //mTab.setValue("ExpenseAmt", priceActual);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  }; //\tExpense_Product\n\n  /// <summary>\n  ///  Expense - Amount.- called from ExpenseAmt, C_Currency_ID,- calculates ConvertedAmt\n  /// </summary>\n  /// <param name="ctx">context</param>\n  /// <param name="windowNo">current Window No</param>\n  /// <param name="mTab">Grid Tab</param>\n  /// <param name="mField">Grid Field</param>\n  /// <param name="value">New Value</param>\n  /// <returns> null or error message</returns>\n  CalloutTimeExpense.prototype.Amount = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    //  \n    if (this.isCalloutActive()) {\n      return "";\n    }\n    this.setCalloutActive(true);\n\n    //\tget values\n    var ExpenseAmt = mTab.getValue("ExpenseAmt");\n    // did changes to correct the logic for conversion and to consider expense date in conversion.-Mohit\n    //var C_Currency_From_ID = mTab.getValue("C_Currency_ID");        \n    //var C_Currency_To_ID = ctx.getContextAsInt(windowNo, "$C_Currency_ID");\n    var C_Currency_To_ID = 0;\n    var C_Currency_From_ID = mTab.getValue("C_Currency_ID");\n    C_Currency_To_ID = VIS.dataContext.getJSONRecord("MExpenseReport/GetPriceListCurrency", mTab.getValue("S_TimeExpense_ID"));\n    //DateTime DateExpense = new DateTime(ctx.getContextAsTime(windowNo, "DateExpense"));\n    var DateExpense = ctx.getContext(windowNo, "DateExpense");\n    //\n    this.log.fine("Amt=" + ExpenseAmt + ", C_Currency_ID=" + C_Currency_From_ID);\n    //\tConverted Amount = Unit price\n    var ConvertedAmt = ExpenseAmt.toString();\n    //\tconvert if required\n    if (!ConvertedAmt.equals(VIS.Env.ZERO) && C_Currency_To_ID != Util.getValueOfInt(C_Currency_From_ID)) {\n      var AD_Client_ID = ctx.getContextAsInt(windowNo, "AD_Client_ID");\n      var AD_Org_ID = ctx.getContextAsInt(windowNo, "AD_Org_ID");\n      var paramString = ConvertedAmt.toString() + "," + C_Currency_From_ID.toString() + "," + C_Currency_To_ID.toString() + "," + DateExpense + "," + 0 + "," + AD_Client_ID.toString() + "," + AD_Org_ID.toString();\n\n      //ConvertedAmt = VAdvantage.Model.MConversionRate.Convert(ctx,\n      //    ConvertedAmt, Util.getValueOfInt(C_Currency_From_ID), C_Currency_To_ID,\n      //    DateExpense, 0, AD_Client_ID, AD_Org_ID);\n      // ConvertedAmt = VIS.dataContext.getJSONRecord("MConversionRate/Convert", paramString);\n\n      // called currencyconvert method to calculate the conversion on basis of expense date also.\n      ConvertedAmt = VIS.dataContext.getJSONRecord("MConversionRate/CurrencyConvert", paramString);\n    }\n    mTab.setValue("ConvertedAmt", ConvertedAmt);\n    this.log.fine("= ConvertedAmt=" + ConvertedAmt);\n    this.setCalloutActive(false);\n    ctx = windowNo = mTab = mField = value = oldValue = null;\n    return "";\n  }; //\tExpense_Amount\n\n  //To set price in Expense amount when UOM is selected on Report line window\n  CalloutTimeExpense.prototype.SetPrice = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (value == null || value.toString() == "") {\n      return "";\n    }\n    if (this.isCalloutActive() || value == null) return "";\n    this.setCalloutActive(true);\n    try {\n      var paramStr = "";\n      var M_Product_ID = ctx.getContextAsInt(windowNo, "M_Product_ID");\n      //  paramStr = M_Product_ID.toString().concat(\',\').concat(mTab.getValue("S_TimeExpense_ID").toString()).concat(\',\').concat(Util.getValueOfString(mTab.getValue("C_UOM_ID")));\n      paramStr = M_Product_ID + "," + mTab.getValue("S_TimeExpense_ID") + "," + mTab.getValue("C_UOM_ID");\n      var prices = VIS.dataContext.getJSONRecord("MExpenseReport/GetPrices", paramStr);\n      if (prices != null) {\n        var PriceStd = prices["PriceStd"];\n        mTab.setValue("ExpenseAmt", PriceStd);\n        mTab.setValue("ConvertedAmt", PriceStd);\n      }\n      // To set UOM when charge is selected\n      if (mTab.getValue("C_Charge_ID") > 0) {\n        var c_uom_id = ctx.getContextAsInt("#C_UOM_ID");\n        if (c_uom_id > 0) {\n          mTab.setValue("C_UOM_ID", c_uom_id); //\tDefault UOM from context.\n        } else {\n          mTab.setValue("C_UOM_ID", 100);\n        }\n        var chargeID = VIS.Utility.Util.getValueOfInt(mTab.getValue("C_Charge_ID"));\n        var paramString = chargeID.toString();\n        var chargeamt = VIS.dataContext.getJSONRecord("MExpenseReport/GetChargeAmount", paramString);\n        mTab.setValue("ExpenseAmt", chargeamt);\n        mTab.setValue("ConvertedAmt", chargeamt);\n      }\n      this.setCalloutActive(false);\n      return;\n    } catch (err) {\n      this.setCalloutActive(false);\n      this.log.severe(err.toString());\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n\n  //autofills customer in customer field on selection of request field or project field in Report line tab in time and expense report window\n  CalloutTimeExpense.prototype.SetCustomerData = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "") {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var fieldStatus = mField.getColumnName();\n    var columnId = value;\n    var paramString = columnId + "," + fieldStatus;\n    var res = VIS.dataContext.getJSONRecord("MExpenseReport/LoadCustomerData", paramString);\n    if (res != null && res.Customer > 0) {\n      mTab.setValue("C_BPartner_ID", res.Customer);\n      mTab.setValue("C_BPartner_Location_ID", res.Location);\n    } else {\n      mTab.setValue("C_BPartner_ID", 0);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n\n  //for fetching M_PRODUCT_ID, C_UOM_ID from database according to Id  selected in\n  // projectphase or project task or product field in in Report line tab in time and expense report window\n  // and set uom field to \'each\' on selection of charge field\n  CalloutTimeExpense.prototype.setProductData = function (ctx, windowNo, mTab, mField, value, oldValue) {\n    if (this.isCalloutActive() || value == null || value.toString() == "" || mTab.getValue("C_Charge_ID") > 0 || mTab.getValue("IsTimeReport") == false) {\n      return "";\n    }\n    this.setCalloutActive(true);\n    var columnName = mField.getColumnName();\n    var paramString = value + "," + columnName;\n    var res = VIS.dataContext.getJSONRecord("MExpenseReport/LoadProductData", paramString);\n    if (res != null && res.M_Product_ID > 0) {\n      mTab.setValue("M_Product_ID", res.M_Product_ID);\n      mTab.setValue("C_UOM_ID", res.C_UOM_ID);\n    }\n    this.setCalloutActive(false);\n    return "";\n  };\n\n  //\tCalloutTimeExpense\n  VIS.Model.CalloutTimeExpense = CalloutTimeExpense;\n  //***************CalloutTimeExpense End*****************\n})(VIS, jQuery);\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/model/callouttimeexpense.js?\n}')},"./Areas/VAS/Scripts/src/VASjs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";eval('{__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _app_forms_createforecast_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../app/forms/createforecast.js */ "./Areas/VAS/Scripts/app/forms/createforecast.js");\n/* harmony import */ var _app_forms_createforecast_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_app_forms_createforecast_js__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _app_forms_glDimensionValue_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../app/forms/glDimensionValue.js */ "./Areas/VAS/Scripts/app/forms/glDimensionValue.js");\n/* harmony import */ var _app_forms_glDimensionValue_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_app_forms_glDimensionValue_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _app_forms_vallocation_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../app/forms/vallocation.js */ "./Areas/VAS/Scripts/app/forms/vallocation.js");\n/* harmony import */ var _app_forms_vallocation_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vallocation_js__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _app_forms_vcreatefrom_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../app/forms/vcreatefrom.js */ "./Areas/VAS/Scripts/app/forms/vcreatefrom.js");\n/* harmony import */ var _app_forms_vcreatefrom_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vcreatefrom_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _app_forms_vcreatefrominvoice_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../app/forms/vcreatefrominvoice.js */ "./Areas/VAS/Scripts/app/forms/vcreatefrominvoice.js");\n/* harmony import */ var _app_forms_vcreatefrominvoice_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vcreatefrominvoice_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _app_forms_vcreatefromrequisition_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../app/forms/vcreatefromrequisition.js */ "./Areas/VAS/Scripts/app/forms/vcreatefromrequisition.js");\n/* harmony import */ var _app_forms_vcreatefromrequisition_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vcreatefromrequisition_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _app_forms_vcreatefromshipment_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../app/forms/vcreatefromshipment.js */ "./Areas/VAS/Scripts/app/forms/vcreatefromshipment.js");\n/* harmony import */ var _app_forms_vcreatefromshipment_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vcreatefromshipment_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _app_forms_vcreatefromstatement_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../app/forms/vcreatefromstatement.js */ "./Areas/VAS/Scripts/app/forms/vcreatefromstatement.js");\n/* harmony import */ var _app_forms_vcreatefromstatement_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vcreatefromstatement_js__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _app_forms_vcreateformprovisionalinvoice_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../app/forms/vcreateformprovisionalinvoice.js */ "./Areas/VAS/Scripts/app/forms/vcreateformprovisionalinvoice.js");\n/* harmony import */ var _app_forms_vcreateformprovisionalinvoice_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vcreateformprovisionalinvoice_js__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _app_forms_vcreaterelatedlines_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../app/forms/vcreaterelatedlines.js */ "./Areas/VAS/Scripts/app/forms/vcreaterelatedlines.js");\n/* harmony import */ var _app_forms_vcreaterelatedlines_js__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vcreaterelatedlines_js__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _app_forms_acctviewer_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../app/forms/acctviewer.js */ "./Areas/VAS/Scripts/app/forms/acctviewer.js");\n/* harmony import */ var _app_forms_acctviewer_js__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_app_forms_acctviewer_js__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _app_forms_acctviewermenu_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ../app/forms/acctviewermenu.js */ "./Areas/VAS/Scripts/app/forms/acctviewermenu.js");\n/* harmony import */ var _app_forms_acctviewermenu_js__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_app_forms_acctviewermenu_js__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var _app_forms_vinoutgen_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ../app/forms/vinoutgen.js */ "./Areas/VAS/Scripts/app/forms/vinoutgen.js");\n/* harmony import */ var _app_forms_vinoutgen_js__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vinoutgen_js__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var _app_forms_vinvoicegen_js__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ../app/forms/vinvoicegen.js */ "./Areas/VAS/Scripts/app/forms/vinvoicegen.js");\n/* harmony import */ var _app_forms_vinvoicegen_js__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vinvoicegen_js__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var _app_forms_vmatch_js__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ../app/forms/vmatch.js */ "./Areas/VAS/Scripts/app/forms/vmatch.js");\n/* harmony import */ var _app_forms_vmatch_js__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vmatch_js__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var _app_forms_vcharge_js__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ../app/forms/vcharge.js */ "./Areas/VAS/Scripts/app/forms/vcharge.js");\n/* harmony import */ var _app_forms_vcharge_js__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vcharge_js__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _app_forms_vattributegrid_js__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ../app/forms/vattributegrid.js */ "./Areas/VAS/Scripts/app/forms/vattributegrid.js");\n/* harmony import */ var _app_forms_vattributegrid_js__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vattributegrid_js__WEBPACK_IMPORTED_MODULE_16__);\n/* harmony import */ var _app_forms_vpayselect_js__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ../app/forms/vpayselect.js */ "./Areas/VAS/Scripts/app/forms/vpayselect.js");\n/* harmony import */ var _app_forms_vpayselect_js__WEBPACK_IMPORTED_MODULE_17___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vpayselect_js__WEBPACK_IMPORTED_MODULE_17__);\n/* harmony import */ var _app_forms_vpayprint_js__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ../app/forms/vpayprint.js */ "./Areas/VAS/Scripts/app/forms/vpayprint.js");\n/* harmony import */ var _app_forms_vpayprint_js__WEBPACK_IMPORTED_MODULE_18___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vpayprint_js__WEBPACK_IMPORTED_MODULE_18__);\n/* harmony import */ var _app_forms_vBOMdrop_js__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ../app/forms/vBOMdrop.js */ "./Areas/VAS/Scripts/app/forms/vBOMdrop.js");\n/* harmony import */ var _app_forms_vBOMdrop_js__WEBPACK_IMPORTED_MODULE_19___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vBOMdrop_js__WEBPACK_IMPORTED_MODULE_19__);\n/* harmony import */ var _app_forms_vtrxmaterial_js__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ../app/forms/vtrxmaterial.js */ "./Areas/VAS/Scripts/app/forms/vtrxmaterial.js");\n/* harmony import */ var _app_forms_vtrxmaterial_js__WEBPACK_IMPORTED_MODULE_20___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vtrxmaterial_js__WEBPACK_IMPORTED_MODULE_20__);\n/* harmony import */ var _app_forms_TabAlertRuleSql_js__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ../app/forms/TabAlertRuleSql.js */ "./Areas/VAS/Scripts/app/forms/TabAlertRuleSql.js");\n/* harmony import */ var _app_forms_TabAlertRuleSql_js__WEBPACK_IMPORTED_MODULE_21___default = /*#__PURE__*/__webpack_require__.n(_app_forms_TabAlertRuleSql_js__WEBPACK_IMPORTED_MODULE_21__);\n/* harmony import */ var _app_forms_vasattachuser_js__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ../app/forms/vasattachuser.js */ "./Areas/VAS/Scripts/app/forms/vasattachuser.js");\n/* harmony import */ var _app_forms_vasattachuser_js__WEBPACK_IMPORTED_MODULE_22___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vasattachuser_js__WEBPACK_IMPORTED_MODULE_22__);\n/* harmony import */ var _app_forms_vasattachusererror_js__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ../app/forms/vasattachusererror.js */ "./Areas/VAS/Scripts/app/forms/vasattachusererror.js");\n/* harmony import */ var _app_forms_vasattachusererror_js__WEBPACK_IMPORTED_MODULE_23___default = /*#__PURE__*/__webpack_require__.n(_app_forms_vasattachusererror_js__WEBPACK_IMPORTED_MODULE_23__);\n/* harmony import */ var _model_Callouts_js__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ../model/Callouts.js */ "./Areas/VAS/Scripts/model/Callouts.js");\n/* harmony import */ var _model_Callouts_js__WEBPACK_IMPORTED_MODULE_24___default = /*#__PURE__*/__webpack_require__.n(_model_Callouts_js__WEBPACK_IMPORTED_MODULE_24__);\n/* harmony import */ var _model_CalloutAssignment_js__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ../model/CalloutAssignment.js */ "./Areas/VAS/Scripts/model/CalloutAssignment.js");\n/* harmony import */ var _model_CalloutAssignment_js__WEBPACK_IMPORTED_MODULE_25___default = /*#__PURE__*/__webpack_require__.n(_model_CalloutAssignment_js__WEBPACK_IMPORTED_MODULE_25__);\n/* harmony import */ var _model_calloutbankstatement_js__WEBPACK_IMPORTED_MODULE_26__ = __webpack_require__(/*! ../model/calloutbankstatement.js */ "./Areas/VAS/Scripts/model/calloutbankstatement.js");\n/* harmony import */ var _model_calloutbankstatement_js__WEBPACK_IMPORTED_MODULE_26___default = /*#__PURE__*/__webpack_require__.n(_model_calloutbankstatement_js__WEBPACK_IMPORTED_MODULE_26__);\n/* harmony import */ var _model_calloutbpartner_js__WEBPACK_IMPORTED_MODULE_27__ = __webpack_require__(/*! ../model/calloutbpartner.js */ "./Areas/VAS/Scripts/model/calloutbpartner.js");\n/* harmony import */ var _model_calloutbpartner_js__WEBPACK_IMPORTED_MODULE_27___default = /*#__PURE__*/__webpack_require__.n(_model_calloutbpartner_js__WEBPACK_IMPORTED_MODULE_27__);\n/* harmony import */ var _model_CalloutCashJournal_js__WEBPACK_IMPORTED_MODULE_28__ = __webpack_require__(/*! ../model/CalloutCashJournal.js */ "./Areas/VAS/Scripts/model/CalloutCashJournal.js");\n/* harmony import */ var _model_CalloutCashJournal_js__WEBPACK_IMPORTED_MODULE_28___default = /*#__PURE__*/__webpack_require__.n(_model_CalloutCashJournal_js__WEBPACK_IMPORTED_MODULE_28__);\n/* harmony import */ var _model_calloutcheckinout_js__WEBPACK_IMPORTED_MODULE_29__ = __webpack_require__(/*! ../model/calloutcheckinout.js */ "./Areas/VAS/Scripts/model/calloutcheckinout.js");\n/* harmony import */ var _model_calloutcheckinout_js__WEBPACK_IMPORTED_MODULE_29___default = /*#__PURE__*/__webpack_require__.n(_model_calloutcheckinout_js__WEBPACK_IMPORTED_MODULE_29__);\n/* harmony import */ var _model_calloutcontract_js__WEBPACK_IMPORTED_MODULE_30__ = __webpack_require__(/*! ../model/calloutcontract.js */ "./Areas/VAS/Scripts/model/calloutcontract.js");\n/* harmony import */ var _model_calloutcontract_js__WEBPACK_IMPORTED_MODULE_30___default = /*#__PURE__*/__webpack_require__.n(_model_calloutcontract_js__WEBPACK_IMPORTED_MODULE_30__);\n/* harmony import */ var _model_calloutcrm_js__WEBPACK_IMPORTED_MODULE_31__ = __webpack_require__(/*! ../model/calloutcrm.js */ "./Areas/VAS/Scripts/model/calloutcrm.js");\n/* harmony import */ var _model_calloutcrm_js__WEBPACK_IMPORTED_MODULE_31___default = /*#__PURE__*/__webpack_require__.n(_model_calloutcrm_js__WEBPACK_IMPORTED_MODULE_31__);\n/* harmony import */ var _model_calloutframework_js__WEBPACK_IMPORTED_MODULE_32__ = __webpack_require__(/*! ../model/calloutframework.js */ "./Areas/VAS/Scripts/model/calloutframework.js");\n/* harmony import */ var _model_calloutframework_js__WEBPACK_IMPORTED_MODULE_32___default = /*#__PURE__*/__webpack_require__.n(_model_calloutframework_js__WEBPACK_IMPORTED_MODULE_32__);\n/* harmony import */ var _model_calloutgljournal_js__WEBPACK_IMPORTED_MODULE_33__ = __webpack_require__(/*! ../model/calloutgljournal.js */ "./Areas/VAS/Scripts/model/calloutgljournal.js");\n/* harmony import */ var _model_calloutgljournal_js__WEBPACK_IMPORTED_MODULE_33___default = /*#__PURE__*/__webpack_require__.n(_model_calloutgljournal_js__WEBPACK_IMPORTED_MODULE_33__);\n/* harmony import */ var _model_calloutinout_js__WEBPACK_IMPORTED_MODULE_34__ = __webpack_require__(/*! ../model/calloutinout.js */ "./Areas/VAS/Scripts/model/calloutinout.js");\n/* harmony import */ var _model_calloutinout_js__WEBPACK_IMPORTED_MODULE_34___default = /*#__PURE__*/__webpack_require__.n(_model_calloutinout_js__WEBPACK_IMPORTED_MODULE_34__);\n/* harmony import */ var _model_calloutinventory_js__WEBPACK_IMPORTED_MODULE_35__ = __webpack_require__(/*! ../model/calloutinventory.js */ "./Areas/VAS/Scripts/model/calloutinventory.js");\n/* harmony import */ var _model_calloutinventory_js__WEBPACK_IMPORTED_MODULE_35___default = /*#__PURE__*/__webpack_require__.n(_model_calloutinventory_js__WEBPACK_IMPORTED_MODULE_35__);\n/* harmony import */ var _model_calloutinvoice_js__WEBPACK_IMPORTED_MODULE_36__ = __webpack_require__(/*! ../model/calloutinvoice.js */ "./Areas/VAS/Scripts/model/calloutinvoice.js");\n/* harmony import */ var _model_calloutinvoice_js__WEBPACK_IMPORTED_MODULE_36___default = /*#__PURE__*/__webpack_require__.n(_model_calloutinvoice_js__WEBPACK_IMPORTED_MODULE_36__);\n/* harmony import */ var _model_calloutinvoicebatch_js__WEBPACK_IMPORTED_MODULE_37__ = __webpack_require__(/*! ../model/calloutinvoicebatch.js */ "./Areas/VAS/Scripts/model/calloutinvoicebatch.js");\n/* harmony import */ var _model_calloutinvoicebatch_js__WEBPACK_IMPORTED_MODULE_37___default = /*#__PURE__*/__webpack_require__.n(_model_calloutinvoicebatch_js__WEBPACK_IMPORTED_MODULE_37__);\n/* harmony import */ var _model_calloutmasterforecast_js__WEBPACK_IMPORTED_MODULE_38__ = __webpack_require__(/*! ../model/calloutmasterforecast.js */ "./Areas/VAS/Scripts/model/calloutmasterforecast.js");\n/* harmony import */ var _model_calloutmasterforecast_js__WEBPACK_IMPORTED_MODULE_38___default = /*#__PURE__*/__webpack_require__.n(_model_calloutmasterforecast_js__WEBPACK_IMPORTED_MODULE_38__);\n/* harmony import */ var _model_calloutmovement_js__WEBPACK_IMPORTED_MODULE_39__ = __webpack_require__(/*! ../model/calloutmovement.js */ "./Areas/VAS/Scripts/model/calloutmovement.js");\n/* harmony import */ var _model_calloutmovement_js__WEBPACK_IMPORTED_MODULE_39___default = /*#__PURE__*/__webpack_require__.n(_model_calloutmovement_js__WEBPACK_IMPORTED_MODULE_39__);\n/* harmony import */ var _model_calloutoffer_js__WEBPACK_IMPORTED_MODULE_40__ = __webpack_require__(/*! ../model/calloutoffer.js */ "./Areas/VAS/Scripts/model/calloutoffer.js");\n/* harmony import */ var _model_calloutoffer_js__WEBPACK_IMPORTED_MODULE_40___default = /*#__PURE__*/__webpack_require__.n(_model_calloutoffer_js__WEBPACK_IMPORTED_MODULE_40__);\n/* harmony import */ var _model_calloutofferserincluded_js__WEBPACK_IMPORTED_MODULE_41__ = __webpack_require__(/*! ../model/calloutofferserincluded.js */ "./Areas/VAS/Scripts/model/calloutofferserincluded.js");\n/* harmony import */ var _model_calloutofferserincluded_js__WEBPACK_IMPORTED_MODULE_41___default = /*#__PURE__*/__webpack_require__.n(_model_calloutofferserincluded_js__WEBPACK_IMPORTED_MODULE_41__);\n/* harmony import */ var _model_calloutofferservices_js__WEBPACK_IMPORTED_MODULE_42__ = __webpack_require__(/*! ../model/calloutofferservices.js */ "./Areas/VAS/Scripts/model/calloutofferservices.js");\n/* harmony import */ var _model_calloutofferservices_js__WEBPACK_IMPORTED_MODULE_42___default = /*#__PURE__*/__webpack_require__.n(_model_calloutofferservices_js__WEBPACK_IMPORTED_MODULE_42__);\n/* harmony import */ var _model_CalloutOrder_js__WEBPACK_IMPORTED_MODULE_43__ = __webpack_require__(/*! ../model/CalloutOrder.js */ "./Areas/VAS/Scripts/model/CalloutOrder.js");\n/* harmony import */ var _model_CalloutOrder_js__WEBPACK_IMPORTED_MODULE_43___default = /*#__PURE__*/__webpack_require__.n(_model_CalloutOrder_js__WEBPACK_IMPORTED_MODULE_43__);\n/* harmony import */ var _model_calloutorderline_js__WEBPACK_IMPORTED_MODULE_44__ = __webpack_require__(/*! ../model/calloutorderline.js */ "./Areas/VAS/Scripts/model/calloutorderline.js");\n/* harmony import */ var _model_calloutorderline_js__WEBPACK_IMPORTED_MODULE_44___default = /*#__PURE__*/__webpack_require__.n(_model_calloutorderline_js__WEBPACK_IMPORTED_MODULE_44__);\n/* harmony import */ var _model_calloutpayment_js__WEBPACK_IMPORTED_MODULE_45__ = __webpack_require__(/*! ../model/calloutpayment.js */ "./Areas/VAS/Scripts/model/calloutpayment.js");\n/* harmony import */ var _model_calloutpayment_js__WEBPACK_IMPORTED_MODULE_45___default = /*#__PURE__*/__webpack_require__.n(_model_calloutpayment_js__WEBPACK_IMPORTED_MODULE_45__);\n/* harmony import */ var _model_calloutpayselection_js__WEBPACK_IMPORTED_MODULE_46__ = __webpack_require__(/*! ../model/calloutpayselection.js */ "./Areas/VAS/Scripts/model/calloutpayselection.js");\n/* harmony import */ var _model_calloutpayselection_js__WEBPACK_IMPORTED_MODULE_46___default = /*#__PURE__*/__webpack_require__.n(_model_calloutpayselection_js__WEBPACK_IMPORTED_MODULE_46__);\n/* harmony import */ var _model_calloutpricelist_js__WEBPACK_IMPORTED_MODULE_47__ = __webpack_require__(/*! ../model/calloutpricelist.js */ "./Areas/VAS/Scripts/model/calloutpricelist.js");\n/* harmony import */ var _model_calloutpricelist_js__WEBPACK_IMPORTED_MODULE_47___default = /*#__PURE__*/__webpack_require__.n(_model_calloutpricelist_js__WEBPACK_IMPORTED_MODULE_47__);\n/* harmony import */ var _model_CalloutProduct_js__WEBPACK_IMPORTED_MODULE_48__ = __webpack_require__(/*! ../model/CalloutProduct.js */ "./Areas/VAS/Scripts/model/CalloutProduct.js");\n/* harmony import */ var _model_CalloutProduct_js__WEBPACK_IMPORTED_MODULE_48___default = /*#__PURE__*/__webpack_require__.n(_model_CalloutProduct_js__WEBPACK_IMPORTED_MODULE_48__);\n/* harmony import */ var _model_calloutproduction_js__WEBPACK_IMPORTED_MODULE_49__ = __webpack_require__(/*! ../model/calloutproduction.js */ "./Areas/VAS/Scripts/model/calloutproduction.js");\n/* harmony import */ var _model_calloutproduction_js__WEBPACK_IMPORTED_MODULE_49___default = /*#__PURE__*/__webpack_require__.n(_model_calloutproduction_js__WEBPACK_IMPORTED_MODULE_49__);\n/* harmony import */ var _model_calloutproject_js__WEBPACK_IMPORTED_MODULE_50__ = __webpack_require__(/*! ../model/calloutproject.js */ "./Areas/VAS/Scripts/model/calloutproject.js");\n/* harmony import */ var _model_calloutproject_js__WEBPACK_IMPORTED_MODULE_50___default = /*#__PURE__*/__webpack_require__.n(_model_calloutproject_js__WEBPACK_IMPORTED_MODULE_50__);\n/* harmony import */ var _model_calloutrequest_js__WEBPACK_IMPORTED_MODULE_51__ = __webpack_require__(/*! ../model/calloutrequest.js */ "./Areas/VAS/Scripts/model/calloutrequest.js");\n/* harmony import */ var _model_calloutrequest_js__WEBPACK_IMPORTED_MODULE_51___default = /*#__PURE__*/__webpack_require__.n(_model_calloutrequest_js__WEBPACK_IMPORTED_MODULE_51__);\n/* harmony import */ var _model_calloutrequisition_js__WEBPACK_IMPORTED_MODULE_52__ = __webpack_require__(/*! ../model/calloutrequisition.js */ "./Areas/VAS/Scripts/model/calloutrequisition.js");\n/* harmony import */ var _model_calloutrequisition_js__WEBPACK_IMPORTED_MODULE_52___default = /*#__PURE__*/__webpack_require__.n(_model_calloutrequisition_js__WEBPACK_IMPORTED_MODULE_52__);\n/* harmony import */ var _model_CalloutSetAttributeCode_js__WEBPACK_IMPORTED_MODULE_53__ = __webpack_require__(/*! ../model/CalloutSetAttributeCode.js */ "./Areas/VAS/Scripts/model/CalloutSetAttributeCode.js");\n/* harmony import */ var _model_CalloutSetAttributeCode_js__WEBPACK_IMPORTED_MODULE_53___default = /*#__PURE__*/__webpack_require__.n(_model_CalloutSetAttributeCode_js__WEBPACK_IMPORTED_MODULE_53__);\n/* harmony import */ var _model_callouttax_js__WEBPACK_IMPORTED_MODULE_54__ = __webpack_require__(/*! ../model/callouttax.js */ "./Areas/VAS/Scripts/model/callouttax.js");\n/* harmony import */ var _model_callouttax_js__WEBPACK_IMPORTED_MODULE_54___default = /*#__PURE__*/__webpack_require__.n(_model_callouttax_js__WEBPACK_IMPORTED_MODULE_54__);\n/* harmony import */ var _model_calloutteamforecast_js__WEBPACK_IMPORTED_MODULE_55__ = __webpack_require__(/*! ../model/calloutteamforecast.js */ "./Areas/VAS/Scripts/model/calloutteamforecast.js");\n/* harmony import */ var _model_calloutteamforecast_js__WEBPACK_IMPORTED_MODULE_55___default = /*#__PURE__*/__webpack_require__.n(_model_calloutteamforecast_js__WEBPACK_IMPORTED_MODULE_55__);\n/* harmony import */ var _model_callouttimeexpense_js__WEBPACK_IMPORTED_MODULE_56__ = __webpack_require__(/*! ../model/callouttimeexpense.js */ "./Areas/VAS/Scripts/model/callouttimeexpense.js");\n/* harmony import */ var _model_callouttimeexpense_js__WEBPACK_IMPORTED_MODULE_56___default = /*#__PURE__*/__webpack_require__.n(_model_callouttimeexpense_js__WEBPACK_IMPORTED_MODULE_56__);\n/* harmony import */ var _model_calloutInvRevaluation_js__WEBPACK_IMPORTED_MODULE_57__ = __webpack_require__(/*! ../model/calloutInvRevaluation.js */ "./Areas/VAS/Scripts/model/calloutInvRevaluation.js");\n/* harmony import */ var _model_calloutInvRevaluation_js__WEBPACK_IMPORTED_MODULE_57___default = /*#__PURE__*/__webpack_require__.n(_model_calloutInvRevaluation_js__WEBPACK_IMPORTED_MODULE_57__);\n/* harmony import */ var _model_VAS_CalloutContract_js__WEBPACK_IMPORTED_MODULE_58__ = __webpack_require__(/*! ../model/VAS_CalloutContract.js */ "./Areas/VAS/Scripts/model/VAS_CalloutContract.js");\n/* harmony import */ var _model_VAS_CalloutContract_js__WEBPACK_IMPORTED_MODULE_58___default = /*#__PURE__*/__webpack_require__.n(_model_VAS_CalloutContract_js__WEBPACK_IMPORTED_MODULE_58__);\n/* harmony import */ var _model_calloutTerm_js__WEBPACK_IMPORTED_MODULE_59__ = __webpack_require__(/*! ../model/calloutTerm.js */ "./Areas/VAS/Scripts/model/calloutTerm.js");\n/* harmony import */ var _model_calloutTerm_js__WEBPACK_IMPORTED_MODULE_59___default = /*#__PURE__*/__webpack_require__.n(_model_calloutTerm_js__WEBPACK_IMPORTED_MODULE_59__);\n/* harmony import */ var _app_forms_PoReceiptTabPanel_js__WEBPACK_IMPORTED_MODULE_60__ = __webpack_require__(/*! ../app/forms/PoReceiptTabPanel.js */ "./Areas/VAS/Scripts/app/forms/PoReceiptTabPanel.js");\n/* harmony import */ var _app_forms_PoReceiptTabPanel_js__WEBPACK_IMPORTED_MODULE_60___default = /*#__PURE__*/__webpack_require__.n(_app_forms_PoReceiptTabPanel_js__WEBPACK_IMPORTED_MODULE_60__);\n/* harmony import */ var _app_forms_InvoiceTaxTabPanel_js__WEBPACK_IMPORTED_MODULE_61__ = __webpack_require__(/*! ../app/forms/InvoiceTaxTabPanel.js */ "./Areas/VAS/Scripts/app/forms/InvoiceTaxTabPanel.js");\n/* harmony import */ var _app_forms_InvoiceTaxTabPanel_js__WEBPACK_IMPORTED_MODULE_61___default = /*#__PURE__*/__webpack_require__.n(_app_forms_InvoiceTaxTabPanel_js__WEBPACK_IMPORTED_MODULE_61__);\n/* harmony import */ var _app_forms_PurchaseOrderTabPanel_js__WEBPACK_IMPORTED_MODULE_62__ = __webpack_require__(/*! ../app/forms/PurchaseOrderTabPanel.js */ "./Areas/VAS/Scripts/app/forms/PurchaseOrderTabPanel.js");\n/* harmony import */ var _app_forms_PurchaseOrderTabPanel_js__WEBPACK_IMPORTED_MODULE_62___default = /*#__PURE__*/__webpack_require__.n(_app_forms_PurchaseOrderTabPanel_js__WEBPACK_IMPORTED_MODULE_62__);\n/* harmony import */ var _app_forms_LineHistoryTabPanel_js__WEBPACK_IMPORTED_MODULE_63__ = __webpack_require__(/*! ../app/forms/LineHistoryTabPanel.js */ "./Areas/VAS/Scripts/app/forms/LineHistoryTabPanel.js");\n/* harmony import */ var _app_forms_LineHistoryTabPanel_js__WEBPACK_IMPORTED_MODULE_63___default = /*#__PURE__*/__webpack_require__.n(_app_forms_LineHistoryTabPanel_js__WEBPACK_IMPORTED_MODULE_63__);\n/* harmony import */ var _app_forms_RequisitionLinesTabPanel_js__WEBPACK_IMPORTED_MODULE_64__ = __webpack_require__(/*! ../app/forms/RequisitionLinesTabPanel.js */ "./Areas/VAS/Scripts/app/forms/RequisitionLinesTabPanel.js");\n/* harmony import */ var _app_forms_RequisitionLinesTabPanel_js__WEBPACK_IMPORTED_MODULE_64___default = /*#__PURE__*/__webpack_require__.n(_app_forms_RequisitionLinesTabPanel_js__WEBPACK_IMPORTED_MODULE_64__);\n/* harmony import */ var _app_forms_MatchPOTabPanel_js__WEBPACK_IMPORTED_MODULE_65__ = __webpack_require__(/*! ../app/forms/MatchPOTabPanel.js */ "./Areas/VAS/Scripts/app/forms/MatchPOTabPanel.js");\n/* harmony import */ var _app_forms_MatchPOTabPanel_js__WEBPACK_IMPORTED_MODULE_65___default = /*#__PURE__*/__webpack_require__.n(_app_forms_MatchPOTabPanel_js__WEBPACK_IMPORTED_MODULE_65__);\n/* harmony import */ var _app_forms_VAS_TimeSheetInvoice_js__WEBPACK_IMPORTED_MODULE_66__ = __webpack_require__(/*! ../app/forms/VAS_TimeSheetInvoice.js */ "./Areas/VAS/Scripts/app/forms/VAS_TimeSheetInvoice.js");\n/* harmony import */ var _app_forms_VAS_TimeSheetInvoice_js__WEBPACK_IMPORTED_MODULE_66___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_TimeSheetInvoice_js__WEBPACK_IMPORTED_MODULE_66__);\n/* harmony import */ var _app_forms_VAS_ProductUomSetup_js__WEBPACK_IMPORTED_MODULE_67__ = __webpack_require__(/*! ../app/forms/VAS_ProductUomSetup.js */ "./Areas/VAS/Scripts/app/forms/VAS_ProductUomSetup.js");\n/* harmony import */ var _app_forms_VAS_ProductUomSetup_js__WEBPACK_IMPORTED_MODULE_67___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ProductUomSetup_js__WEBPACK_IMPORTED_MODULE_67__);\n/* harmony import */ var _app_forms_VAS_PurchaseOrderTabPanel_js__WEBPACK_IMPORTED_MODULE_68__ = __webpack_require__(/*! ../app/forms/VAS_PurchaseOrderTabPanel.js */ "./Areas/VAS/Scripts/app/forms/VAS_PurchaseOrderTabPanel.js");\n/* harmony import */ var _app_forms_VAS_PurchaseOrderTabPanel_js__WEBPACK_IMPORTED_MODULE_68___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_PurchaseOrderTabPanel_js__WEBPACK_IMPORTED_MODULE_68__);\n/* harmony import */ var _app_forms_VAS_OrderSummary_js__WEBPACK_IMPORTED_MODULE_69__ = __webpack_require__(/*! ../app/forms/VAS_OrderSummary.js */ "./Areas/VAS/Scripts/app/forms/VAS_OrderSummary.js");\n/* harmony import */ var _app_forms_VAS_OrderSummary_js__WEBPACK_IMPORTED_MODULE_69___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_OrderSummary_js__WEBPACK_IMPORTED_MODULE_69__);\n/* harmony import */ var _app_forms_UnAllocatedPaymentTabPanel_js__WEBPACK_IMPORTED_MODULE_70__ = __webpack_require__(/*! ../app/forms/UnAllocatedPaymentTabPanel.js */ "./Areas/VAS/Scripts/app/forms/UnAllocatedPaymentTabPanel.js");\n/* harmony import */ var _app_forms_UnAllocatedPaymentTabPanel_js__WEBPACK_IMPORTED_MODULE_70___default = /*#__PURE__*/__webpack_require__.n(_app_forms_UnAllocatedPaymentTabPanel_js__WEBPACK_IMPORTED_MODULE_70__);\n/* harmony import */ var _app_forms_InvoiceLineTabPanel_js__WEBPACK_IMPORTED_MODULE_71__ = __webpack_require__(/*! ../app/forms/InvoiceLineTabPanel.js */ "./Areas/VAS/Scripts/app/forms/InvoiceLineTabPanel.js");\n/* harmony import */ var _app_forms_InvoiceLineTabPanel_js__WEBPACK_IMPORTED_MODULE_71___default = /*#__PURE__*/__webpack_require__.n(_app_forms_InvoiceLineTabPanel_js__WEBPACK_IMPORTED_MODULE_71__);\n/* harmony import */ var _app_forms_VAS_ARInvoiceWidget_js__WEBPACK_IMPORTED_MODULE_72__ = __webpack_require__(/*! ../app/forms/VAS_ARInvoiceWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_ARInvoiceWidget.js");\n/* harmony import */ var _app_forms_VAS_ARInvoiceWidget_js__WEBPACK_IMPORTED_MODULE_72___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ARInvoiceWidget_js__WEBPACK_IMPORTED_MODULE_72__);\n/* harmony import */ var _app_forms_VAS_InvGrandTotalWidget_js__WEBPACK_IMPORTED_MODULE_73__ = __webpack_require__(/*! ../app/forms/VAS_InvGrandTotalWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_InvGrandTotalWidget.js");\n/* harmony import */ var _app_forms_VAS_InvGrandTotalWidget_js__WEBPACK_IMPORTED_MODULE_73___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_InvGrandTotalWidget_js__WEBPACK_IMPORTED_MODULE_73__);\n/* harmony import */ var _app_forms_VAS_PrMonthlySalesWidget_js__WEBPACK_IMPORTED_MODULE_74__ = __webpack_require__(/*! ../app/forms/VAS_PrMonthlySalesWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_PrMonthlySalesWidget.js");\n/* harmony import */ var _app_forms_VAS_PrMonthlySalesWidget_js__WEBPACK_IMPORTED_MODULE_74___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_PrMonthlySalesWidget_js__WEBPACK_IMPORTED_MODULE_74__);\n/* harmony import */ var _app_forms_VAS_LowestPrMonthlySalesWidget_js__WEBPACK_IMPORTED_MODULE_75__ = __webpack_require__(/*! ../app/forms/VAS_LowestPrMonthlySalesWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_LowestPrMonthlySalesWidget.js");\n/* harmony import */ var _app_forms_VAS_LowestPrMonthlySalesWidget_js__WEBPACK_IMPORTED_MODULE_75___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_LowestPrMonthlySalesWidget_js__WEBPACK_IMPORTED_MODULE_75__);\n/* harmony import */ var _app_forms_VAS_HighestSellProduct_js__WEBPACK_IMPORTED_MODULE_76__ = __webpack_require__(/*! ../app/forms/VAS_HighestSellProduct.js */ "./Areas/VAS/Scripts/app/forms/VAS_HighestSellProduct.js");\n/* harmony import */ var _app_forms_VAS_HighestSellProduct_js__WEBPACK_IMPORTED_MODULE_76___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_HighestSellProduct_js__WEBPACK_IMPORTED_MODULE_76__);\n/* harmony import */ var _app_forms_VAS_LowestSellProduct_js__WEBPACK_IMPORTED_MODULE_77__ = __webpack_require__(/*! ../app/forms/VAS_LowestSellProduct.js */ "./Areas/VAS/Scripts/app/forms/VAS_LowestSellProduct.js");\n/* harmony import */ var _app_forms_VAS_LowestSellProduct_js__WEBPACK_IMPORTED_MODULE_77___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_LowestSellProduct_js__WEBPACK_IMPORTED_MODULE_77__);\n/* harmony import */ var _app_forms_VAS_BankBalanceWidget_js__WEBPACK_IMPORTED_MODULE_78__ = __webpack_require__(/*! ../app/forms/VAS_BankBalanceWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_BankBalanceWidget.js");\n/* harmony import */ var _app_forms_VAS_BankBalanceWidget_js__WEBPACK_IMPORTED_MODULE_78___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_BankBalanceWidget_js__WEBPACK_IMPORTED_MODULE_78__);\n/* harmony import */ var _app_forms_VAS_CashBalanceWidget_js__WEBPACK_IMPORTED_MODULE_79__ = __webpack_require__(/*! ../app/forms/VAS_CashBalanceWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_CashBalanceWidget.js");\n/* harmony import */ var _app_forms_VAS_CashBalanceWidget_js__WEBPACK_IMPORTED_MODULE_79___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_CashBalanceWidget_js__WEBPACK_IMPORTED_MODULE_79__);\n/* harmony import */ var _app_forms_VAS_PurchaseStateDetailWidget_js__WEBPACK_IMPORTED_MODULE_80__ = __webpack_require__(/*! ../app/forms/VAS_PurchaseStateDetailWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_PurchaseStateDetailWidget.js");\n/* harmony import */ var _app_forms_VAS_PurchaseStateDetailWidget_js__WEBPACK_IMPORTED_MODULE_80___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_PurchaseStateDetailWidget_js__WEBPACK_IMPORTED_MODULE_80__);\n/* harmony import */ var _app_forms_VAS_CreateInventoryLines_js__WEBPACK_IMPORTED_MODULE_81__ = __webpack_require__(/*! ../app/forms/VAS_CreateInventoryLines.js */ "./Areas/VAS/Scripts/app/forms/VAS_CreateInventoryLines.js");\n/* harmony import */ var _app_forms_VAS_CreateInventoryLines_js__WEBPACK_IMPORTED_MODULE_81___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_CreateInventoryLines_js__WEBPACK_IMPORTED_MODULE_81__);\n/* harmony import */ var _app_forms_VAS_CreditUtilizationWidget_js__WEBPACK_IMPORTED_MODULE_82__ = __webpack_require__(/*! ../app/forms/VAS_CreditUtilizationWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_CreditUtilizationWidget.js");\n/* harmony import */ var _app_forms_VAS_CreditUtilizationWidget_js__WEBPACK_IMPORTED_MODULE_82___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_CreditUtilizationWidget_js__WEBPACK_IMPORTED_MODULE_82__);\n/* harmony import */ var _app_forms_VAS_ExpectedTransferWidget_js__WEBPACK_IMPORTED_MODULE_83__ = __webpack_require__(/*! ../app/forms/VAS_ExpectedTransferWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_ExpectedTransferWidget.js");\n/* harmony import */ var _app_forms_VAS_ExpectedTransferWidget_js__WEBPACK_IMPORTED_MODULE_83___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ExpectedTransferWidget_js__WEBPACK_IMPORTED_MODULE_83__);\n/* harmony import */ var _app_forms_VAS_PendingTransferWidget_js__WEBPACK_IMPORTED_MODULE_84__ = __webpack_require__(/*! ../app/forms/VAS_PendingTransferWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_PendingTransferWidget.js");\n/* harmony import */ var _app_forms_VAS_PendingTransferWidget_js__WEBPACK_IMPORTED_MODULE_84___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_PendingTransferWidget_js__WEBPACK_IMPORTED_MODULE_84__);\n/* harmony import */ var _app_forms_VAS_ExpectedFulfilmentWidget_js__WEBPACK_IMPORTED_MODULE_85__ = __webpack_require__(/*! ../app/forms/VAS_ExpectedFulfilmentWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_ExpectedFulfilmentWidget.js");\n/* harmony import */ var _app_forms_VAS_ExpectedFulfilmentWidget_js__WEBPACK_IMPORTED_MODULE_85___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ExpectedFulfilmentWidget_js__WEBPACK_IMPORTED_MODULE_85__);\n/* harmony import */ var _app_forms_VAS_DueFulfilmentWidget_js__WEBPACK_IMPORTED_MODULE_86__ = __webpack_require__(/*! ../app/forms/VAS_DueFulfilmentWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_DueFulfilmentWidget.js");\n/* harmony import */ var _app_forms_VAS_DueFulfilmentWidget_js__WEBPACK_IMPORTED_MODULE_86___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_DueFulfilmentWidget_js__WEBPACK_IMPORTED_MODULE_86__);\n/* harmony import */ var _app_forms_VAS_ExpectedOrderWidget_js__WEBPACK_IMPORTED_MODULE_87__ = __webpack_require__(/*! ../app/forms/VAS_ExpectedOrderWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_ExpectedOrderWidget.js");\n/* harmony import */ var _app_forms_VAS_ExpectedOrderWidget_js__WEBPACK_IMPORTED_MODULE_87___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ExpectedOrderWidget_js__WEBPACK_IMPORTED_MODULE_87__);\n/* harmony import */ var _app_forms_VAS_OpenQuotationWidget_js__WEBPACK_IMPORTED_MODULE_88__ = __webpack_require__(/*! ../app/forms/VAS_OpenQuotationWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_OpenQuotationWidget.js");\n/* harmony import */ var _app_forms_VAS_OpenQuotationWidget_js__WEBPACK_IMPORTED_MODULE_88___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_OpenQuotationWidget_js__WEBPACK_IMPORTED_MODULE_88__);\n/* harmony import */ var _app_forms_VAS_DueOrderWidget_js__WEBPACK_IMPORTED_MODULE_89__ = __webpack_require__(/*! ../app/forms/VAS_DueOrderWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_DueOrderWidget.js");\n/* harmony import */ var _app_forms_VAS_DueOrderWidget_js__WEBPACK_IMPORTED_MODULE_89___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_DueOrderWidget_js__WEBPACK_IMPORTED_MODULE_89__);\n/* harmony import */ var _app_forms_VAS_ExpectedDeliveryWidget_js__WEBPACK_IMPORTED_MODULE_90__ = __webpack_require__(/*! ../app/forms/VAS_ExpectedDeliveryWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_ExpectedDeliveryWidget.js");\n/* harmony import */ var _app_forms_VAS_ExpectedDeliveryWidget_js__WEBPACK_IMPORTED_MODULE_90___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ExpectedDeliveryWidget_js__WEBPACK_IMPORTED_MODULE_90__);\n/* harmony import */ var _app_forms_VAS_PendingDeliveryWidget_js__WEBPACK_IMPORTED_MODULE_91__ = __webpack_require__(/*! ../app/forms/VAS_PendingDeliveryWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_PendingDeliveryWidget.js");\n/* harmony import */ var _app_forms_VAS_PendingDeliveryWidget_js__WEBPACK_IMPORTED_MODULE_91___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_PendingDeliveryWidget_js__WEBPACK_IMPORTED_MODULE_91__);\n/* harmony import */ var _app_forms_VAS_ExpectedInvoiceWidget_js__WEBPACK_IMPORTED_MODULE_92__ = __webpack_require__(/*! ../app/forms/VAS_ExpectedInvoiceWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_ExpectedInvoiceWidget.js");\n/* harmony import */ var _app_forms_VAS_ExpectedInvoiceWidget_js__WEBPACK_IMPORTED_MODULE_92___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ExpectedInvoiceWidget_js__WEBPACK_IMPORTED_MODULE_92__);\n/* harmony import */ var _app_forms_VAS_ExpectedGRNWidget_js__WEBPACK_IMPORTED_MODULE_93__ = __webpack_require__(/*! ../app/forms/VAS_ExpectedGRNWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_ExpectedGRNWidget.js");\n/* harmony import */ var _app_forms_VAS_ExpectedGRNWidget_js__WEBPACK_IMPORTED_MODULE_93___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ExpectedGRNWidget_js__WEBPACK_IMPORTED_MODULE_93__);\n/* harmony import */ var _app_forms_VAS_PendingGRNWidget_js__WEBPACK_IMPORTED_MODULE_94__ = __webpack_require__(/*! ../app/forms/VAS_PendingGRNWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_PendingGRNWidget.js");\n/* harmony import */ var _app_forms_VAS_PendingGRNWidget_js__WEBPACK_IMPORTED_MODULE_94___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_PendingGRNWidget_js__WEBPACK_IMPORTED_MODULE_94__);\n/* harmony import */ var _app_forms_VAS_CustomerRMAWidget_js__WEBPACK_IMPORTED_MODULE_95__ = __webpack_require__(/*! ../app/forms/VAS_CustomerRMAWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_CustomerRMAWidget.js");\n/* harmony import */ var _app_forms_VAS_CustomerRMAWidget_js__WEBPACK_IMPORTED_MODULE_95___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_CustomerRMAWidget_js__WEBPACK_IMPORTED_MODULE_95__);\n/* harmony import */ var _app_forms_VAS_VendorReturnWidget_js__WEBPACK_IMPORTED_MODULE_96__ = __webpack_require__(/*! ../app/forms/VAS_VendorReturnWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_VendorReturnWidget.js");\n/* harmony import */ var _app_forms_VAS_VendorReturnWidget_js__WEBPACK_IMPORTED_MODULE_96___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_VendorReturnWidget_js__WEBPACK_IMPORTED_MODULE_96__);\n/* harmony import */ var _app_forms_VAS_InvoiceSummary_js__WEBPACK_IMPORTED_MODULE_97__ = __webpack_require__(/*! ../app/forms/VAS_InvoiceSummary.js */ "./Areas/VAS/Scripts/app/forms/VAS_InvoiceSummary.js");\n/* harmony import */ var _app_forms_VAS_InvoiceSummary_js__WEBPACK_IMPORTED_MODULE_97___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_InvoiceSummary_js__WEBPACK_IMPORTED_MODULE_97__);\n/* harmony import */ var _app_forms_VAS_ExpenseAmountWidget_js__WEBPACK_IMPORTED_MODULE_98__ = __webpack_require__(/*! ../app/forms/VAS_ExpenseAmountWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_ExpenseAmountWidget.js");\n/* harmony import */ var _app_forms_VAS_ExpenseAmountWidget_js__WEBPACK_IMPORTED_MODULE_98___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ExpenseAmountWidget_js__WEBPACK_IMPORTED_MODULE_98__);\n/* harmony import */ var _app_forms_VAS_ExpRevProfitWidget_js__WEBPACK_IMPORTED_MODULE_99__ = __webpack_require__(/*! ../app/forms/VAS_ExpRevProfitWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_ExpRevProfitWidget.js");\n/* harmony import */ var _app_forms_VAS_ExpRevProfitWidget_js__WEBPACK_IMPORTED_MODULE_99___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ExpRevProfitWidget_js__WEBPACK_IMPORTED_MODULE_99__);\n/* harmony import */ var _app_forms_VAS_FinDInsights_js__WEBPACK_IMPORTED_MODULE_100__ = __webpack_require__(/*! ../app/forms/VAS_FinDInsights.js */ "./Areas/VAS/Scripts/app/forms/VAS_FinDInsights.js");\n/* harmony import */ var _app_forms_VAS_FinDInsights_js__WEBPACK_IMPORTED_MODULE_100___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_FinDInsights_js__WEBPACK_IMPORTED_MODULE_100__);\n/* harmony import */ var _app_forms_VAS_FinDInsightsGridView_js__WEBPACK_IMPORTED_MODULE_101__ = __webpack_require__(/*! ../app/forms/VAS_FinDInsightsGridView.js */ "./Areas/VAS/Scripts/app/forms/VAS_FinDInsightsGridView.js");\n/* harmony import */ var _app_forms_VAS_FinDInsightsGridView_js__WEBPACK_IMPORTED_MODULE_101___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_FinDInsightsGridView_js__WEBPACK_IMPORTED_MODULE_101__);\n/* harmony import */ var _app_forms_VAS_ScheduleDetail_js__WEBPACK_IMPORTED_MODULE_102__ = __webpack_require__(/*! ../app/forms/VAS_ScheduleDetail.js */ "./Areas/VAS/Scripts/app/forms/VAS_ScheduleDetail.js");\n/* harmony import */ var _app_forms_VAS_ScheduleDetail_js__WEBPACK_IMPORTED_MODULE_102___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ScheduleDetail_js__WEBPACK_IMPORTED_MODULE_102__);\n/* harmony import */ var _model_CalloutBudget_js__WEBPACK_IMPORTED_MODULE_103__ = __webpack_require__(/*! ../model/CalloutBudget.js */ "./Areas/VAS/Scripts/model/CalloutBudget.js");\n/* harmony import */ var _model_CalloutBudget_js__WEBPACK_IMPORTED_MODULE_103___default = /*#__PURE__*/__webpack_require__.n(_model_CalloutBudget_js__WEBPACK_IMPORTED_MODULE_103__);\n/* harmony import */ var _app_forms_VAS_ExpectedPayments_js__WEBPACK_IMPORTED_MODULE_104__ = __webpack_require__(/*! ../app/forms/VAS_ExpectedPayments.js */ "./Areas/VAS/Scripts/app/forms/VAS_ExpectedPayments.js");\n/* harmony import */ var _app_forms_VAS_ExpectedPayments_js__WEBPACK_IMPORTED_MODULE_104___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_ExpectedPayments_js__WEBPACK_IMPORTED_MODULE_104__);\n/* harmony import */ var _app_forms_VAS_InvoiceMatchedTabPanel_js__WEBPACK_IMPORTED_MODULE_105__ = __webpack_require__(/*! ../app/forms/VAS_InvoiceMatchedTabPanel.js */ "./Areas/VAS/Scripts/app/forms/VAS_InvoiceMatchedTabPanel.js");\n/* harmony import */ var _app_forms_VAS_InvoiceMatchedTabPanel_js__WEBPACK_IMPORTED_MODULE_105___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_InvoiceMatchedTabPanel_js__WEBPACK_IMPORTED_MODULE_105__);\n/* harmony import */ var _app_forms_VAS_CashFlowWidget_js__WEBPACK_IMPORTED_MODULE_106__ = __webpack_require__(/*! ../app/forms/VAS_CashFlowWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_CashFlowWidget.js");\n/* harmony import */ var _app_forms_VAS_CashFlowWidget_js__WEBPACK_IMPORTED_MODULE_106___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_CashFlowWidget_js__WEBPACK_IMPORTED_MODULE_106__);\n/* harmony import */ var _model_CalloutChartOfAccount_js__WEBPACK_IMPORTED_MODULE_107__ = __webpack_require__(/*! ../model/CalloutChartOfAccount.js */ "./Areas/VAS/Scripts/model/CalloutChartOfAccount.js");\n/* harmony import */ var _model_CalloutChartOfAccount_js__WEBPACK_IMPORTED_MODULE_107___default = /*#__PURE__*/__webpack_require__.n(_model_CalloutChartOfAccount_js__WEBPACK_IMPORTED_MODULE_107__);\n/* harmony import */ var _app_forms_VAS_MonthlyAvBankBalWidget_js__WEBPACK_IMPORTED_MODULE_108__ = __webpack_require__(/*! ../app/forms/VAS_MonthlyAvBankBalWidget.js */ "./Areas/VAS/Scripts/app/forms/VAS_MonthlyAvBankBalWidget.js");\n/* harmony import */ var _app_forms_VAS_MonthlyAvBankBalWidget_js__WEBPACK_IMPORTED_MODULE_108___default = /*#__PURE__*/__webpack_require__.n(_app_forms_VAS_MonthlyAvBankBalWidget_js__WEBPACK_IMPORTED_MODULE_108__);\n/* harmony import */ var _app_tabpanel_VAS_LeadConversation_js__WEBPACK_IMPORTED_MODULE_109__ = __webpack_require__(/*! ../app/tabpanel/VAS_LeadConversation.js */ "./Areas/VAS/Scripts/app/tabpanel/VAS_LeadConversation.js");\n/* harmony import */ var _app_tabpanel_VAS_LeadConversation_js__WEBPACK_IMPORTED_MODULE_109___default = /*#__PURE__*/__webpack_require__.n(_app_tabpanel_VAS_LeadConversation_js__WEBPACK_IMPORTED_MODULE_109__);\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n//# sourceURL=webpack://VIENNA_Advantage_Standard/./Areas/VAS/Scripts/src/VASjs.js?\n}')}},__webpack_module_cache__={};function __webpack_require__(e){var n=__webpack_module_cache__[e];if(void 0!==n)return n.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}__webpack_require__.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(n,{a:n}),n},__webpack_require__.d=(e,n)=>{for(var t in n)__webpack_require__.o(n,t)&&!__webpack_require__.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},__webpack_require__.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__=__webpack_require__("./Areas/VAS/Scripts/src/VASjs.js")})();